"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@langchain";
exports.ids = ["vendor-chunks/@langchain"];
exports.modules = {

/***/ "(rsc)/./node_modules/@langchain/core/node_modules/ansi-styles/index.js":
/*!************************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/ansi-styles/index.js ***!
  \************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("/* module decorator */ module = __webpack_require__.nmd(module);\n\nconst ANSI_BACKGROUND_OFFSET = 10;\nconst wrapAnsi256 = (offset = 0)=>(code)=>`\\u001B[${38 + offset};5;${code}m`;\nconst wrapAnsi16m = (offset = 0)=>(red, green, blue)=>`\\u001B[${38 + offset};2;${red};${green};${blue}m`;\nfunction assembleStyles() {\n    const codes = new Map();\n    const styles = {\n        modifier: {\n            reset: [\n                0,\n                0\n            ],\n            // 21 isn't widely supported and 22 does the same thing\n            bold: [\n                1,\n                22\n            ],\n            dim: [\n                2,\n                22\n            ],\n            italic: [\n                3,\n                23\n            ],\n            underline: [\n                4,\n                24\n            ],\n            overline: [\n                53,\n                55\n            ],\n            inverse: [\n                7,\n                27\n            ],\n            hidden: [\n                8,\n                28\n            ],\n            strikethrough: [\n                9,\n                29\n            ]\n        },\n        color: {\n            black: [\n                30,\n                39\n            ],\n            red: [\n                31,\n                39\n            ],\n            green: [\n                32,\n                39\n            ],\n            yellow: [\n                33,\n                39\n            ],\n            blue: [\n                34,\n                39\n            ],\n            magenta: [\n                35,\n                39\n            ],\n            cyan: [\n                36,\n                39\n            ],\n            white: [\n                37,\n                39\n            ],\n            // Bright color\n            blackBright: [\n                90,\n                39\n            ],\n            redBright: [\n                91,\n                39\n            ],\n            greenBright: [\n                92,\n                39\n            ],\n            yellowBright: [\n                93,\n                39\n            ],\n            blueBright: [\n                94,\n                39\n            ],\n            magentaBright: [\n                95,\n                39\n            ],\n            cyanBright: [\n                96,\n                39\n            ],\n            whiteBright: [\n                97,\n                39\n            ]\n        },\n        bgColor: {\n            bgBlack: [\n                40,\n                49\n            ],\n            bgRed: [\n                41,\n                49\n            ],\n            bgGreen: [\n                42,\n                49\n            ],\n            bgYellow: [\n                43,\n                49\n            ],\n            bgBlue: [\n                44,\n                49\n            ],\n            bgMagenta: [\n                45,\n                49\n            ],\n            bgCyan: [\n                46,\n                49\n            ],\n            bgWhite: [\n                47,\n                49\n            ],\n            // Bright color\n            bgBlackBright: [\n                100,\n                49\n            ],\n            bgRedBright: [\n                101,\n                49\n            ],\n            bgGreenBright: [\n                102,\n                49\n            ],\n            bgYellowBright: [\n                103,\n                49\n            ],\n            bgBlueBright: [\n                104,\n                49\n            ],\n            bgMagentaBright: [\n                105,\n                49\n            ],\n            bgCyanBright: [\n                106,\n                49\n            ],\n            bgWhiteBright: [\n                107,\n                49\n            ]\n        }\n    };\n    // Alias bright black as gray (and grey)\n    styles.color.gray = styles.color.blackBright;\n    styles.bgColor.bgGray = styles.bgColor.bgBlackBright;\n    styles.color.grey = styles.color.blackBright;\n    styles.bgColor.bgGrey = styles.bgColor.bgBlackBright;\n    for (const [groupName, group] of Object.entries(styles)){\n        for (const [styleName, style] of Object.entries(group)){\n            styles[styleName] = {\n                open: `\\u001B[${style[0]}m`,\n                close: `\\u001B[${style[1]}m`\n            };\n            group[styleName] = styles[styleName];\n            codes.set(style[0], style[1]);\n        }\n        Object.defineProperty(styles, groupName, {\n            value: group,\n            enumerable: false\n        });\n    }\n    Object.defineProperty(styles, \"codes\", {\n        value: codes,\n        enumerable: false\n    });\n    styles.color.close = \"\\x1b[39m\";\n    styles.bgColor.close = \"\\x1b[49m\";\n    styles.color.ansi256 = wrapAnsi256();\n    styles.color.ansi16m = wrapAnsi16m();\n    styles.bgColor.ansi256 = wrapAnsi256(ANSI_BACKGROUND_OFFSET);\n    styles.bgColor.ansi16m = wrapAnsi16m(ANSI_BACKGROUND_OFFSET);\n    // From https://github.com/Qix-/color-convert/blob/3f0e0d4e92e235796ccb17f6e85c72094a651f49/conversions.js\n    Object.defineProperties(styles, {\n        rgbToAnsi256: {\n            value: (red, green, blue)=>{\n                // We use the extended greyscale palette here, with the exception of\n                // black and white. normal palette only has 4 greyscale shades.\n                if (red === green && green === blue) {\n                    if (red < 8) {\n                        return 16;\n                    }\n                    if (red > 248) {\n                        return 231;\n                    }\n                    return Math.round((red - 8) / 247 * 24) + 232;\n                }\n                return 16 + 36 * Math.round(red / 255 * 5) + 6 * Math.round(green / 255 * 5) + Math.round(blue / 255 * 5);\n            },\n            enumerable: false\n        },\n        hexToRgb: {\n            value: (hex)=>{\n                const matches = /(?<colorString>[a-f\\d]{6}|[a-f\\d]{3})/i.exec(hex.toString(16));\n                if (!matches) {\n                    return [\n                        0,\n                        0,\n                        0\n                    ];\n                }\n                let { colorString } = matches.groups;\n                if (colorString.length === 3) {\n                    colorString = colorString.split(\"\").map((character)=>character + character).join(\"\");\n                }\n                const integer = Number.parseInt(colorString, 16);\n                return [\n                    integer >> 16 & 0xFF,\n                    integer >> 8 & 0xFF,\n                    integer & 0xFF\n                ];\n            },\n            enumerable: false\n        },\n        hexToAnsi256: {\n            value: (hex)=>styles.rgbToAnsi256(...styles.hexToRgb(hex)),\n            enumerable: false\n        }\n    });\n    return styles;\n}\n// Make the export immutable\nObject.defineProperty(module, \"exports\", {\n    enumerable: true,\n    get: assembleStyles\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy9hbnNpLXN0eWxlcy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiO0FBQUE7QUFFQSxNQUFNQSx5QkFBeUI7QUFFL0IsTUFBTUMsY0FBYyxDQUFDQyxTQUFTLENBQUMsR0FBS0MsQ0FBQUEsT0FBUSxDQUFDLE9BQU8sRUFBRSxLQUFLRCxPQUFPLEdBQUcsRUFBRUMsS0FBSyxDQUFDLENBQUM7QUFFOUUsTUFBTUMsY0FBYyxDQUFDRixTQUFTLENBQUMsR0FBSyxDQUFDRyxLQUFLQyxPQUFPQyxPQUFTLENBQUMsT0FBTyxFQUFFLEtBQUtMLE9BQU8sR0FBRyxFQUFFRyxJQUFJLENBQUMsRUFBRUMsTUFBTSxDQUFDLEVBQUVDLEtBQUssQ0FBQyxDQUFDO0FBRTVHLFNBQVNDO0lBQ1IsTUFBTUMsUUFBUSxJQUFJQztJQUNsQixNQUFNQyxTQUFTO1FBQ2RDLFVBQVU7WUFDVEMsT0FBTztnQkFBQztnQkFBRzthQUFFO1lBQ2IsdURBQXVEO1lBQ3ZEQyxNQUFNO2dCQUFDO2dCQUFHO2FBQUc7WUFDYkMsS0FBSztnQkFBQztnQkFBRzthQUFHO1lBQ1pDLFFBQVE7Z0JBQUM7Z0JBQUc7YUFBRztZQUNmQyxXQUFXO2dCQUFDO2dCQUFHO2FBQUc7WUFDbEJDLFVBQVU7Z0JBQUM7Z0JBQUk7YUFBRztZQUNsQkMsU0FBUztnQkFBQztnQkFBRzthQUFHO1lBQ2hCQyxRQUFRO2dCQUFDO2dCQUFHO2FBQUc7WUFDZkMsZUFBZTtnQkFBQztnQkFBRzthQUFHO1FBQ3ZCO1FBQ0FDLE9BQU87WUFDTkMsT0FBTztnQkFBQztnQkFBSTthQUFHO1lBQ2ZsQixLQUFLO2dCQUFDO2dCQUFJO2FBQUc7WUFDYkMsT0FBTztnQkFBQztnQkFBSTthQUFHO1lBQ2ZrQixRQUFRO2dCQUFDO2dCQUFJO2FBQUc7WUFDaEJqQixNQUFNO2dCQUFDO2dCQUFJO2FBQUc7WUFDZGtCLFNBQVM7Z0JBQUM7Z0JBQUk7YUFBRztZQUNq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Q2I7UUFDQXNCLGNBQWM7WUFDYnZCLE9BQU9TLENBQUFBLE1BQU9qRSxPQUFPNkQsWUFBWSxJQUFJN0QsT0FBT2dFLFFBQVEsQ0FBQ0M7WUFDckRSLFlBQVk7UUFDYjtJQUNEO0lBRUEsT0FBT3pEO0FBQ1I7QUFFQSw0QkFBNEI7QUFDNUJnRCxPQUFPTyxjQUFjLENBQUN5QixRQUFRLFdBQVc7SUFDeEN2QixZQUFZO0lBQ1p3QixLQUFLcEY7QUFDTiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLWZvcm0tYnVpbGRlci10dXRvcmlhbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvbm9kZV9tb2R1bGVzL2Fuc2ktc3R5bGVzL2luZGV4LmpzPzc2NDEiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBBTlNJX0JBQ0tHUk9VTkRfT0ZGU0VUID0gMTA7XG5cbmNvbnN0IHdyYXBBbnNpMjU2ID0gKG9mZnNldCA9IDApID0+IGNvZGUgPT4gYFxcdTAwMUJbJHszOCArIG9mZnNldH07NTske2NvZGV9bWA7XG5cbmNvbnN0IHdyYXBBbnNpMTZtID0gKG9mZnNldCA9IDApID0+IChyZWQsIGdyZWVuLCBibHVlKSA9PiBgXFx1MDAxQlskezM4ICsgb2Zmc2V0fTsyOyR7cmVkfTske2dyZWVufTske2JsdWV9bWA7XG5cbmZ1bmN0aW9uIGFzc2VtYmxlU3R5bGVzKCkge1xuXHRjb25zdCBjb2RlcyA9IG5ldyBNYXAoKTtcblx0Y29uc3Qgc3R5bGVzID0ge1xuXHRcdG1vZGlmaWVyOiB7XG5cdFx0XHRyZXNldDogWzAsIDBdLFxuXHRcdFx0Ly8gMjEgaXNuJ3Qgd2lkZWx5IHN1cHBvcnRlZCBhbmQgMjIgZG9lcyB0aGUgc2FtZSB0aGluZ1xuXHRcdFx0Ym9sZDogWzEsIDIyXSxcblx0XHRcdGRpbTogWzIsIDIyXSxcblx0XHRcdGl0YWxpYzogWzMsIDIzXSxcblx0XHRcdHVuZGVybGluZTogWzQsIDI0XSxcblx0XHRcdG92ZXJsaW5lOiBbNTMsIDU1XSxcblx0XHRcdGludmVyc2U6IFs3LCAyN10sXG5cdFx0XHRoaWRkZW46IFs4LCAyOF0sXG5cdFx0XHRzdHJpa2V0aHJvdWdoOiBbOSwgMjldXG5cdFx0fSxcblx0XHRjb2xvcjoge1xuXHRcdFx0YmxhY2s6IFszMCwgMzldLFxuXHRcdFx0cmVkOiBbMzEsIDM5XSxcblx0XHRcdGdyZWVuOiBbMzIsIDM5XSxcblx0XHRcdHllbGxvdzogWzMzLCAzOV0sXG5cdFx0XHRibHVlOiBbMzQsIDM5XSxcblx0XHRcdG1hZ2VudGE6IFszNSwgMzldLFxuXHRcdFx0Y3lhbjogWzM2LCAzOV0sXG5cdFx0XHR3aGl0ZTogWzM3LCAzOV0sXG5cblx0XHRcdC8vIEJyaWdodCBjb2xvclxuXHRcdFx0YmxhY2tCcmlnaHQ6IFs5MCwgMzldLFxuXHRcdFx0cmVkQnJpZ2h0OiBbOTEsIDM5XSxcblx0XHRcdGdyZWVuQnJpZ2h0OiBbOTIsIDM5XSxcblx0XHRcdHllbGxvd0JyaWdodDogWzkzLCAzOV0sXG5cdFx0XHRibHVlQnJpZ2h0OiBbOTQsIDM5XSxcblx0XHRcdG1hZ2VudGFCcmlnaHQ6IFs5NSwgMzldLFxuXHRcdFx0Y3lhbkJyaWdodDogWzk2LCAzOV0sXG5cdFx0XHR3aGl0ZUJyaWdodDogWzk3LCAzOV1cblx0XHR9LFxuXHRcdGJnQ29sb3I6IHtcblx0XHRcdGJnQmxhY2s6IFs0MCwgNDldLFxuXHRcdFx0YmdSZWQ6IFs0MSwgNDldLFxuXHRcdFx0YmdHcmVlbjogWzQyLCA0OV0sXG5cdFx0XHRiZ1llbGxvdzogWzQzLCA0OV0sXG5cdFx0XHRiZ0JsdWU6IFs0NCwgNDldLFxuXHRcdFx0YmdNYWdlbnRhOiBbNDUsIDQ5XSxcblx0XHRcdGJnQ3lhbjogWzQ2LCA0OV0sXG5cdFx0XHRiZ1doaXRlOiBbNDcsIDQ5XSxcblxuXHRcdFx0Ly8gQnJpZ2h0IGNvbG9yXG5cdFx0XHRiZ0JsYWNrQnJpZ2h0OiBbMTAwLCA0OV0sXG5cdFx0XHRiZ1JlZEJyaWdodDogWzEwMSwgNDldLFxuXHRcdFx0YmdHcmVlbkJyaWdodDogWzEwMiwgNDldLFxuXHRcdFx0YmdZZWxsb3dCcmlnaHQ6IFsxMDMsIDQ5XSxcblx0XHRcdGJnQmx1ZUJyaWdodDogWzEwNCwgNDldLFxuXHRcdFx0YmdNYWdlbnRhQnJpZ2h0OiBbMTA1LCA0OV0sXG5cdFx0XHRiZ0N5YW5CcmlnaHQ6IFsxMDYsIDQ5XSxcblx0XHRcdGJnV2hpdGVCcmlnaHQ6IFsxMDcsIDQ5XVxuXHRcdH1cblx0fTtcblxuXHQvLyBBbGlhcyBicmlnaHQgYmxhY2sgYXMgZ3JheSAoYW5kIGdyZXkpXG5cdHN0eWxlcy5jb2xvci5ncmF5ID0gc3R5bGVzLmNvbG9yLmJsYWNrQnJpZ2h0O1xuXHRzdHlsZXMuYmdDb2xvci5iZ0dyYXkgPSBzdHlsZXMuYmdDb2xvci5iZ0JsYWNrQnJpZ2h0O1xuXHRzdHlsZXMuY29sb3IuZ3JleSA9IHN0eWxlcy5jb2xvci5ibGFja0JyaWdodDtcblx0c3R5bGVzLmJnQ29sb3IuYmdHcmV5ID0gc3R5bGVzLmJnQ29sb3IuYmdCbGFja0JyaWdodDtcblxuXHRmb3IgKGNvbnN0IFtncm91cE5hbWUsIGdyb3VwXSBvZiBPYmplY3QuZW50cmllcyhzdHlsZXMpKSB7XG5cdFx0Zm9yIChjb25zdCBbc3R5bGVOYW1lLCBzdHlsZV0gb2YgT2JqZWN0LmVudHJpZXMoZ3JvdXApKSB7XG5cdFx0XHRzdHlsZXNbc3R5bGVOYW1lXSA9IHtcblx0XHRcdFx0b3BlbjogYFxcdTAwMUJbJHtzdHlsZVswXX1tYCxcblx0XHRcdFx0Y2xvc2U6IGBcXHUwMDFCWyR7c3R5bGVbMV19bWBcblx0XHRcdH07XG5cblx0XHRcdGdyb3VwW3N0eWxlTmFtZV0gPSBzdHlsZXNbc3R5bGVOYW1lXTtcblxuXHRcdFx0Y29kZXMuc2V0KHN0eWxlWzBdLCBzdHlsZVsxXSk7XG5cdFx0fVxuXG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KHN0eWxlcywgZ3JvdXBOYW1lLCB7XG5cdFx0XHR2YWx1ZTogZ3JvdXAsXG5cdFx0XHRlbnVtZXJhYmxlOiBmYWxzZVxuXHRcdH0pO1xuXHR9XG5cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KHN0eWxlcywgJ2NvZGVzJywge1xuXHRcdHZhbHVlOiBjb2Rlcyxcblx0XHRlbnVtZXJhYmxlOiBmYWxzZVxuXHR9KTtcblxuXHRzdHlsZXMuY29sb3IuY2xvc2UgPSAnXFx1MDAxQlszOW0nO1xuXHRzdHlsZXMuYmdDb2xvci5jbG9zZSA9ICdcXHUwMDFCWzQ5bSc7XG5cblx0c3R5bGVzLmNvbG9yLmFuc2kyNTYgPSB3cmFwQW5zaTI1NigpO1xuXHRzdHlsZXMuY29sb3IuYW5zaTE2bSA9IHdyYXBBbnNpMTZtKCk7XG5cdHN0eWxlcy5iZ0NvbG9yLmFuc2kyNTYgPSB3cmFwQW5zaTI1NihBTlNJX0JBQ0tHUk9VTkRfT0ZGU0VUKTtcblx0c3R5bGVzLmJnQ29sb3IuYW5zaTE2bSA9IHdyYXBBbnNpMTZtKEFOU0lfQkFDS0dST1VORF9PRkZTRVQpO1xuXG5cdC8vIEZyb20gaHR0cHM6Ly9naXRodWIuY29tL1FpeC0vY29sb3ItY29udmVydC9ibG9iLzNmMGUwZDRlOTJlMjM1Nzk2Y2NiMTdmNmU4NWM3MjA5NGE2NTFmNDkvY29udmVyc2lvbnMuanNcblx0T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoc3R5bGVzLCB7XG5cdFx0cmdiVG9BbnNpMjU2OiB7XG5cdFx0XHR2YWx1ZTogKHJlZCwgZ3JlZW4sIGJsdWUpID0+IHtcblx0XHRcdFx0Ly8gV2UgdXNlIHRoZSBleHRlbmRlZCBncmV5c2NhbGUgcGFsZXR0ZSBoZXJlLCB3aXRoIHRoZSBleGNlcHRpb24gb2Zcblx0XHRcdFx0Ly8gYmxhY2sgYW5kIHdoaXRlLiBub3JtYWwgcGFsZXR0ZSBvbmx5IGhhcyA0IGdyZXlzY2FsZSBzaGFkZXMuXG5cdFx0XHRcdGlmIChyZWQgPT09IGdyZWVuICYmIGdyZWVuID09PSBibHVlKSB7XG5cdFx0XHRcdFx0aWYgKHJlZCA8IDgpIHtcblx0XHRcdFx0XHRcdHJldHVybiAxNjtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAocmVkID4gMjQ4KSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gMjMxO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHJldHVybiBNYXRoLnJvdW5kKCgocmVkIC0gOCkgLyAyNDcpICogMjQpICsgMjMyO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIDE2ICtcblx0XHRcdFx0XHQoMzYgKiBNYXRoLnJvdW5kKHJlZCAvIDI1NSAqIDUpKSArXG5cdFx0XHRcdFx0KDYgKiBNYXRoLnJvdW5kKGdyZWVuIC8gMjU1ICogNSkpICtcblx0XHRcdFx0XHRNYXRoLnJvdW5kKGJsdWUgLyAyNTUgKiA1KTtcblx0XHRcdH0sXG5cdFx0XHRlbnVtZXJhYmxlOiBmYWxzZVxuXHRcdH0sXG5cdFx0aGV4VG9SZ2I6IHtcblx0XHRcdHZhbHVlOiBoZXggPT4ge1xuXHRcdFx0XHRjb25zdCBtYXRjaGVzID0gLyg/PGNvbG9yU3RyaW5nPlthLWZcXGRdezZ9fFthLWZcXGRdezN9KS9pLmV4ZWMoaGV4LnRvU3RyaW5nKDE2KSk7XG5cdFx0XHRcdGlmICghbWF0Y2hlcykge1xuXHRcdFx0XHRcdHJldHVybiBbMCwgMCwgMF07XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRsZXQge2NvbG9yU3RyaW5nfSA9IG1hdGNoZXMuZ3JvdXBzO1xuXG5cdFx0XHRcdGlmIChjb2xvclN0cmluZy5sZW5ndGggPT09IDMpIHtcblx0XHRcdFx0XHRjb2xvclN0cmluZyA9IGNvbG9yU3RyaW5nLnNwbGl0KCcnKS5tYXAoY2hhcmFjdGVyID0+IGNoYXJhY3RlciArIGNoYXJhY3Rlcikuam9pbignJyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRjb25zdCBpbnRlZ2VyID0gTnVtYmVyLnBhcnNlSW50KGNvbG9yU3RyaW5nLCAxNik7XG5cblx0XHRcdFx0cmV0dXJuIFtcblx0XHRcdFx0XHQoaW50ZWdlciA+PiAxNikgJiAweEZGLFxuXHRcdFx0XHRcdChpbnRlZ2VyID4+IDgpICYgMHhGRixcblx0XHRcdFx0XHRpbnRlZ2VyICYgMHhGRlxuXHRcdFx0XHRdO1xuXHRcdFx0fSxcblx0XHRcdGVudW1lcmFibGU6IGZhbHNlXG5cdFx0fSxcblx0XHRoZXhUb0Fuc2kyNTY6IHtcblx0XHRcdHZhbHVlOiBoZXggPT4gc3R5bGVzLnJnYlRvQW5zaTI1NiguLi5zdHlsZXMuaGV4VG9SZ2IoaGV4KSksXG5cdFx0XHRlbnVtZXJhYmxlOiBmYWxzZVxuXHRcdH1cblx0fSk7XG5cblx0cmV0dXJuIHN0eWxlcztcbn1cblxuLy8gTWFrZSB0aGUgZXhwb3J0IGltbXV0YWJsZVxuT2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZSwgJ2V4cG9ydHMnLCB7XG5cdGVudW1lcmFibGU6IHRydWUsXG5cdGdldDogYXNzZW1ibGVTdHlsZXNcbn0pO1xuIl0sIm5hbWVzIjpbIkFOU0lfQkFDS0dST1VORF9PRkZTRVQiLCJ3cmFwQW5zaTI1NiIsIm9mZnNldCIsImNvZGUiLCJ3cmFwQW5zaTE2bSIsInJlZCIsImdyZWVuIiwiYmx1ZSIsImFzc2VtYmxlU3R5bGVzIiwiY29kZXMiLCJNYXAiLCJzdHlsZXMiLCJtb2RpZmllciIsInJlc2V0IiwiYm9sZCIsImRpbSIsIml0YWxpYyIsInVuZGVybGluZSIsIm92ZXJsaW5lIiwiaW52ZXJzZSIsImhpZGRlbiIsInN0cmlrZXRocm91Z2giLCJjb2xvciIsImJsYWNrIiwieWVsbG93IiwibWFnZW50YSIsImN5YW4iLCJ3aGl0ZSIsImJsYWNrQnJpZ2h0IiwicmVkQnJpZ2h0IiwiZ3JlZW5CcmlnaHQiLCJ5ZWxsb3dCcmlnaHQiLCJibHVlQnJpZ2h0IiwibWFnZW50YUJyaWdodCIsImN5YW5CcmlnaHQiLCJ3aGl0ZUJyaWdodCIsImJnQ29sb3IiLCJiZ0JsYWNrIiwiYmdSZWQiLCJiZ0dyZWVuIiwiYmdZZWxsb3ciLCJiZ0JsdWUiLCJiZ01hZ2VudGEiLCJiZ0N5YW4iLCJiZ1doaXRlIiwiYmdCbGFja0JyaWdodCIsImJnUmVkQnJpZ2h0IiwiYmdHcmVlbkJyaWdodCIsImJnWWVsbG93QnJpZ2h0IiwiYmdCbHVlQnJpZ2h0IiwiYmdNYWdlbnRhQnJpZ2h0IiwiYmdDeWFuQnJpZ2h0IiwiYmdXaGl0ZUJyaWdodCIsImdyYXkiLCJiZ0dyYXkiLCJncmV5IiwiYmdHcmV5IiwiZ3JvdXBOYW1lIiwiZ3JvdXAiLCJPYmplY3QiLCJlbnRyaWVzIiwic3R5bGVOYW1lIiwic3R5bGUiLCJvcGVuIiwiY2xvc2UiLCJzZXQiLCJkZWZpbmVQcm9wZXJ0eSIsInZhbHVlIiwiZW51bWVyYWJsZSIsImFuc2kyNTYiLCJhbnNpMTZtIiwiZGVmaW5lUHJvcGVydGllcyIsInJnYlRvQW5zaTI1NiIsIk1hdGgiLCJyb3VuZCIsImhleFRvUmdiIiwiaGV4IiwibWF0Y2hlcyIsImV4ZWMiLCJ0b1N0cmluZyIsImNvbG9yU3RyaW5nIiwiZ3JvdXBzIiwibGVuZ3RoIiwic3BsaXQiLCJtYXAiLCJjaGFyYWN0ZXIiLCJqb2luIiwiaW50ZWdlciIsIk51bWJlciIsInBhcnNlSW50IiwiaGV4VG9BbnNpMjU2IiwibW9kdWxlIiwiZ2V0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/node_modules/ansi-styles/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/node_modules/camelcase/index.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@langchain/core/node_modules/camelcase/index.js ***!
  \**********************************************************************/
/***/ ((module) => {

eval("\nconst UPPERCASE = /[\\p{Lu}]/u;\nconst LOWERCASE = /[\\p{Ll}]/u;\nconst LEADING_CAPITAL = /^[\\p{Lu}](?![\\p{Lu}])/gu;\nconst IDENTIFIER = /([\\p{Alpha}\\p{N}_]|$)/u;\nconst SEPARATORS = /[_.\\- ]+/;\nconst LEADING_SEPARATORS = new RegExp(\"^\" + SEPARATORS.source);\nconst SEPARATORS_AND_IDENTIFIER = new RegExp(SEPARATORS.source + IDENTIFIER.source, \"gu\");\nconst NUMBERS_AND_IDENTIFIER = new RegExp(\"\\\\d+\" + IDENTIFIER.source, \"gu\");\nconst preserveCamelCase = (string, toLowerCase, toUpperCase)=>{\n    let isLastCharLower = false;\n    let isLastCharUpper = false;\n    let isLastLastCharUpper = false;\n    for(let i = 0; i < string.length; i++){\n        const character = string[i];\n        if (isLastCharLower && UPPERCASE.test(character)) {\n            string = string.slice(0, i) + \"-\" + string.slice(i);\n            isLastCharLower = false;\n            isLastLastCharUpper = isLastCharUpper;\n            isLastCharUpper = true;\n            i++;\n        } else if (isLastCharUpper && isLastLastCharUpper && LOWERCASE.test(character)) {\n            string = string.slice(0, i - 1) + \"-\" + string.slice(i - 1);\n            isLastLastCharUpper = isLastCharUpper;\n            isLastCharUpper = false;\n            isLastCharLower = true;\n        } else {\n            isLastCharLower = toLowerCase(character) === character && toUpperCase(character) !== character;\n            isLastLastCharUpper = isLastCharUpper;\n            isLastCharUpper = toUpperCase(character) === character && toLowerCase(character) !== character;\n        }\n    }\n    return string;\n};\nconst preserveConsecutiveUppercase = (input, toLowerCase)=>{\n    LEADING_CAPITAL.lastIndex = 0;\n    return input.replace(LEADING_CAPITAL, (m1)=>toLowerCase(m1));\n};\nconst postProcess = (input, toUpperCase)=>{\n    SEPARATORS_AND_IDENTIFIER.lastIndex = 0;\n    NUMBERS_AND_IDENTIFIER.lastIndex = 0;\n    return input.replace(SEPARATORS_AND_IDENTIFIER, (_, identifier)=>toUpperCase(identifier)).replace(NUMBERS_AND_IDENTIFIER, (m)=>toUpperCase(m));\n};\nconst camelCase = (input, options)=>{\n    if (!(typeof input === \"string\" || Array.isArray(input))) {\n        throw new TypeError(\"Expected the input to be `string | string[]`\");\n    }\n    options = {\n        pascalCase: false,\n        preserveConsecutiveUppercase: false,\n        ...options\n    };\n    if (Array.isArray(input)) {\n        input = input.map((x)=>x.trim()).filter((x)=>x.length).join(\"-\");\n    } else {\n        input = input.trim();\n    }\n    if (input.length === 0) {\n        return \"\";\n    }\n    const toLowerCase = options.locale === false ? (string)=>string.toLowerCase() : (string)=>string.toLocaleLowerCase(options.locale);\n    const toUpperCase = options.locale === false ? (string)=>string.toUpperCase() : (string)=>string.toLocaleUpperCase(options.locale);\n    if (input.length === 1) {\n        return options.pascalCase ? toUpperCase(input) : toLowerCase(input);\n    }\n    const hasUpperCase = input !== toLowerCase(input);\n    if (hasUpperCase) {\n        input = preserveCamelCase(input, toLowerCase, toUpperCase);\n    }\n    input = input.replace(LEADING_SEPARATORS, \"\");\n    if (options.preserveConsecutiveUppercase) {\n        input = preserveConsecutiveUppercase(input, toLowerCase);\n    } else {\n        input = toLowerCase(input);\n    }\n    if (options.pascalCase) {\n        input = toUpperCase(input.charAt(0)) + input.slice(1);\n    }\n    return postProcess(input, toUpperCase);\n};\nmodule.exports = camelCase;\n// TODO: Remove this for the next major release\nmodule.exports[\"default\"] = camelCase;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL25vZGVfbW9kdWxlcy9jYW1lbGNhc2UvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFFQSxNQUFNQSxZQUFZO0FBQ2xCLE1BQU1DLFlBQVk7QUFDbEIsTUFBTUMsa0JBQWtCO0FBQ3hCLE1BQU1DLGFBQWE7QUFDbkIsTUFBTUMsYUFBYTtBQUVuQixNQUFNQyxxQkFBcUIsSUFBSUMsT0FBTyxNQUFNRixXQUFXRyxNQUFNO0FBQzdELE1BQU1DLDRCQUE0QixJQUFJRixPQUFPRixXQUFXRyxNQUFNLEdBQUdKLFdBQVdJLE1BQU0sRUFBRTtBQUNwRixNQUFNRSx5QkFBeUIsSUFBSUgsT0FBTyxTQUFTSCxXQUFXSSxNQUFNLEVBQUU7QUFFdEUsTUFBTUcsb0JBQW9CLENBQUNDLFFBQVFDLGFBQWFDO0lBQy9DLElBQUlDLGtCQUFrQjtJQUN0QixJQUFJQyxrQkFBa0I7SUFDdEIsSUFBSUMsc0JBQXNCO0lBRTFCLElBQUssSUFBSUMsSUFBSSxHQUFHQSxJQUFJTixPQUFPTyxNQUFNLEVBQUVELElBQUs7UUFDdkMsTUFBTUUsWUFBWVIsTUFBTSxDQUFDTSxFQUFFO1FBRTNCLElBQUlILG1CQUFtQmQsVUFBVW9CLElBQUksQ0FBQ0QsWUFBWTtZQUNqRFIsU0FBU0EsT0FBT1UsS0FBSyxDQUFDLEdBQUdKLEtBQUssTUFBTU4sT0FBT1UsS0FBSyxDQUFDSjtZQUNqREgsa0JBQWtCO1lBQ2xCRSxzQkFBc0JEO1lBQ3RCQSxrQkFBa0I7WUFDbEJFO1FBQ0QsT0FBTyxJQUFJRixtQkFBbUJDLHVCQUF1QmYsVUFBVW1CLElBQUksQ0FBQ0QsWUFBWTtZQUMvRVIsU0FBU0EsT0FBT1UsS0FBSyxDQUFDLEdBQUdKLElBQUksS0FBSyxNQUFNTixPQUFPVSxLQUFLLENBQUNKLElBQUk7WUFDekRELHNCQUFzQkQ7WUFDdEJBLGtCQUFrQjtZQUNsQkQsa0JBQWtCO1FBQ25CLE9BQU87WUFDTkEsa0JBQWtCRixZQUFZTyxlQUFlQSxhQUFhTixZQUFZTSxlQUFlQTtZQUNyRkgsc0JBQXNCRDtZQUN0QkEsa0JBQWtCRixZQUFZTSxlQUFlQSxhQUFhUCxZQUFZTyxlQUFlQTtRQUN0RjtJQUNEO0lBRUEsT0FBT1I7QUFDUjtBQUVBLE1BQU1XLCtCQUErQixDQUFDQyxPQUFPWDtJQUM1Q1YsZ0JBQWdCc0IsU0FBUyxHQUFHO0lBRTVCLE9BQU9ELE1BQU1FLE9BQU8sQ0FBQ3ZCLGlCQUFpQndCLENBQUFBLEtBQU1kLFlBQVljO0FBQ3pEO0FBRUEsTUFBTUMsY0FBYyxDQUFDSixPQUFPVjtJQUMzQkwsMEJBQTBCZ0IsU0FBUyxHQUFHO0lBQ3RDZix1QkFBdUJlLFNBQVMsR0FBRztJQUVuQyxPQUFPRCxNQUFNRSxPQUFPLENBQUNqQiwyQkFBMkIsQ0FBQ29CLEdBQUdDLGFBQWVoQixZQUFZZ0IsYUFDN0VKLE9BQU8sQ0FBQ2hCLHdCQUF3QnFCLENBQUFBLElBQUtqQixZQUFZaUI7QUFDcEQ7QUFFQSxNQUFNQyxZQUFZLENBQUNSLE9BQU9TO0lBQ3pCLElBQUksQ0FBRSxRQUFPVCxVQUFVLFlBQVlVLE1BQU1DLE9BQU8sQ0FBQ1gsTUFBSyxHQUFJO1FBQ3pELE1BQU0sSUFBSVksVUFBVTtJQUNyQjtJQUVBSCxVQUFVO1FBQ1RJLFlBQVk7UUFDWmQsOEJBQThCO1FBQzlCLEdBQUdVLE9BQU87SUFDWDtJQUVBLElBQUlDLE1BQU1DLE9BQU8sQ0FBQ1gsUUFBUTtRQUN6QkEsUUFBUUEsTUFBTWMsR0FBRyxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFQyxJQUFJLElBQzNCQyxNQUFNLENBQUNGLENBQUFBLElBQUtBLEVBQUVwQixNQUFNLEVBQ3BCdUIsSUFBSSxDQUFDO0lBQ1IsT0FBTztRQUNObEIsUUFBUUEsTUFBTWdCLElBQUk7SUFDbkI7SUFFQSxJQUFJaEIsTUFBTUwsTUFBTSxLQUFLLEdBQUc7UUFDdkIsT0FBTztJQUNSO0lBRUEsTUFBTU4sY0FBY29CLFFBQVFVLE1BQU0sS0FBSyxRQUN0Qy9CLENBQUFBLFNBQVVBLE9BQU9DLFdBQVcsS0FDNUJELENBQUFBLFNBQVVBLE9BQU9nQyxpQkFBaUIsQ0FBQ1gsUUFBUVUsTUFBTTtJQUNsRCxNQUFNN0IsY0FBY21CLFFBQVFVLE1BQU0sS0FBSyxRQUN0Qy9CLENBQUFBLFNBQVVBLE9BQU9FLFdBQVcsS0FDNUJGLENBQUFBLFNBQVVBLE9BQU9pQyxpQkFBaUIsQ0FBQ1osUUFBUVUsTUFBTTtJQUVsRCxJQUFJbkIsTUFBTUwsTUFBTSxLQUFLLEdBQUc7UUFDdkIsT0FBT2MsUUFBUUksVUFBVSxHQUFHdkIsWUFBWVUsU0FBU1gsWUFBWVc7SUFDOUQ7SUFFQSxNQUFNc0IsZUFBZXRCLFVBQVVYLFlBQVlXO0lBRTNDLElBQUlzQixjQUFjO1FBQ2pCdEIsUUFBUWIsa0JBQWtCYSxPQUFPWCxhQUFhQztJQUMvQztJQUVBVSxRQUFRQSxNQUFNRSxPQUFPLENBQUNwQixvQkFBb0I7SUFFMUMsSUFBSTJCLFFBQVFWLDRCQUE0QixFQUFFO1FBQ3pDQyxRQUFRRCw2QkFBNkJDLE9BQU9YO0lBQzdDLE9BQU87UUFDTlcsUUFBUVgsWUFBWVc7SUFDckI7SUFFQSxJQUFJUyxRQUFRSSxVQUFVLEVBQUU7UUFDdkJiLFFBQVFWLFlBQVlVLE1BQU11QixNQUFNLENBQUMsTUFBTXZCLE1BQU1GLEtBQUssQ0FBQztJQUNwRDtJQUVBLE9BQU9NLFlBQVlKLE9BQU9WO0FBQzNCO0FBRUFrQyxPQUFPQyxPQUFPLEdBQUdqQjtBQUNqQiwrQ0FBK0M7QUFDL0NnQix5QkFBc0IsR0FBR2hCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9ub2RlX21vZHVsZXMvY2FtZWxjYXNlL2luZGV4LmpzPzIwNTciXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5jb25zdCBVUFBFUkNBU0UgPSAvW1xccHtMdX1dL3U7XG5jb25zdCBMT1dFUkNBU0UgPSAvW1xccHtMbH1dL3U7XG5jb25zdCBMRUFESU5HX0NBUElUQUwgPSAvXltcXHB7THV9XSg/IVtcXHB7THV9XSkvZ3U7XG5jb25zdCBJREVOVElGSUVSID0gLyhbXFxwe0FscGhhfVxccHtOfV9dfCQpL3U7XG5jb25zdCBTRVBBUkFUT1JTID0gL1tfLlxcLSBdKy87XG5cbmNvbnN0IExFQURJTkdfU0VQQVJBVE9SUyA9IG5ldyBSZWdFeHAoJ14nICsgU0VQQVJBVE9SUy5zb3VyY2UpO1xuY29uc3QgU0VQQVJBVE9SU19BTkRfSURFTlRJRklFUiA9IG5ldyBSZWdFeHAoU0VQQVJBVE9SUy5zb3VyY2UgKyBJREVOVElGSUVSLnNvdXJjZSwgJ2d1Jyk7XG5jb25zdCBOVU1CRVJTX0FORF9JREVOVElGSUVSID0gbmV3IFJlZ0V4cCgnXFxcXGQrJyArIElERU5USUZJRVIuc291cmNlLCAnZ3UnKTtcblxuY29uc3QgcHJlc2VydmVDYW1lbENhc2UgPSAoc3RyaW5nLCB0b0xvd2VyQ2FzZSwgdG9VcHBlckNhc2UpID0+IHtcblx0bGV0IGlzTGFzdENoYXJMb3dlciA9IGZhbHNlO1xuXHRsZXQgaXNMYXN0Q2hhclVwcGVyID0gZmFsc2U7XG5cdGxldCBpc0xhc3RMYXN0Q2hhclVwcGVyID0gZmFsc2U7XG5cblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBzdHJpbmcubGVuZ3RoOyBpKyspIHtcblx0XHRjb25zdCBjaGFyYWN0ZXIgPSBzdHJpbmdbaV07XG5cblx0XHRpZiAoaXNMYXN0Q2hhckxvd2VyICYmIFVQUEVSQ0FTRS50ZXN0KGNoYXJhY3RlcikpIHtcblx0XHRcdHN0cmluZyA9IHN0cmluZy5zbGljZSgwLCBpKSArICctJyArIHN0cmluZy5zbGljZShpKTtcblx0XHRcdGlzTGFzdENoYXJMb3dlciA9IGZhbHNlO1xuXHRcdFx0aXNMYXN0TGFzdENoYXJVcHBlciA9IGlzTGFzdENoYXJVcHBlcjtcblx0XHRcdGlzTGFzdENoYXJVcHBlciA9IHRydWU7XG5cdFx0XHRpKys7XG5cdFx0fSBlbHNlIGlmIChpc0xhc3RDaGFyVXBwZXIgJiYgaXNMYXN0TGFzdENoYXJVcHBlciAmJiBMT1dFUkNBU0UudGVzdChjaGFyYWN0ZXIpKSB7XG5cdFx0XHRzdHJpbmcgPSBzdHJpbmcuc2xpY2UoMCwgaSAtIDEpICsgJy0nICsgc3RyaW5nLnNsaWNlKGkgLSAxKTtcblx0XHRcdGlzTGFzdExhc3RDaGFyVXBwZXIgPSBpc0xhc3RDaGFyVXBwZXI7XG5cdFx0XHRpc0xhc3RDaGFyVXBwZXIgPSBmYWxzZTtcblx0XHRcdGlzTGFzdENoYXJMb3dlciA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlzTGFzdENoYXJMb3dlciA9IHRvTG93ZXJDYXNlKGNoYXJhY3RlcikgPT09IGNoYXJhY3RlciAmJiB0b1VwcGVyQ2FzZShjaGFyYWN0ZXIpICE9PSBjaGFyYWN0ZXI7XG5cdFx0XHRpc0xhc3RMYXN0Q2hhclVwcGVyID0gaXNMYXN0Q2hhclVwcGVyO1xuXHRcdFx0aXNMYXN0Q2hhclVwcGVyID0gdG9VcHBlckNhc2UoY2hhcmFjdGVyKSA9PT0gY2hhcmFjdGVyICYmIHRvTG93ZXJDYXNlKGNoYXJhY3RlcikgIT09IGNoYXJhY3Rlcjtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gc3RyaW5nO1xufTtcblxuY29uc3QgcHJlc2VydmVDb25zZWN1dGl2ZVVwcGVyY2FzZSA9IChpbnB1dCwgdG9Mb3dlckNhc2UpID0+IHtcblx0TEVBRElOR19DQVBJVEFMLmxhc3RJbmRleCA9IDA7XG5cblx0cmV0dXJuIGlucHV0LnJlcGxhY2UoTEVBRElOR19DQVBJVEFMLCBtMSA9PiB0b0xvd2VyQ2FzZShtMSkpO1xufTtcblxuY29uc3QgcG9zdFByb2Nlc3MgPSAoaW5wdXQsIHRvVXBwZXJDYXNlKSA9PiB7XG5cdFNFUEFSQVRPUlNfQU5EX0lERU5USUZJRVIubGFzdEluZGV4ID0gMDtcblx0TlVNQkVSU19BTkRfSURFTlRJRklFUi5sYXN0SW5kZXggPSAwO1xuXG5cdHJldHVybiBpbnB1dC5yZXBsYWNlKFNFUEFSQVRPUlNfQU5EX0lERU5USUZJRVIsIChfLCBpZGVudGlmaWVyKSA9PiB0b1VwcGVyQ2FzZShpZGVudGlmaWVyKSlcblx0XHQucmVwbGFjZShOVU1CRVJTX0FORF9JREVOVElGSUVSLCBtID0+IHRvVXBwZXJDYXNlKG0pKTtcbn07XG5cbmNvbnN0IGNhbWVsQ2FzZSA9IChpbnB1dCwgb3B0aW9ucykgPT4ge1xuXHRpZiAoISh0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnIHx8IEFycmF5LmlzQXJyYXkoaW5wdXQpKSkge1xuXHRcdHRocm93IG5ldyBUeXBlRXJyb3IoJ0V4cGVjdGVkIHRoZSBpbnB1dCB0byBiZSBgc3RyaW5nIHwgc3RyaW5nW11gJyk7XG5cdH1cblxuXHRvcHRpb25zID0ge1xuXHRcdHBhc2NhbENhc2U6IGZhbHNlLFxuXHRcdHByZXNlcnZlQ29uc2VjdXRpdmVVcHBlcmNhc2U6IGZhbHNlLFxuXHRcdC4uLm9wdGlvbnNcblx0fTtcblxuXHRpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcblx0XHRpbnB1dCA9IGlucHV0Lm1hcCh4ID0+IHgudHJpbSgpKVxuXHRcdFx0LmZpbHRlcih4ID0+IHgubGVuZ3RoKVxuXHRcdFx0LmpvaW4oJy0nKTtcblx0fSBlbHNlIHtcblx0XHRpbnB1dCA9IGlucHV0LnRyaW0oKTtcblx0fVxuXG5cdGlmIChpbnB1dC5sZW5ndGggPT09IDApIHtcblx0XHRyZXR1cm4gJyc7XG5cdH1cblxuXHRjb25zdCB0b0xvd2VyQ2FzZSA9IG9wdGlvbnMubG9jYWxlID09PSBmYWxzZSA/XG5cdFx0c3RyaW5nID0+IHN0cmluZy50b0xvd2VyQ2FzZSgpIDpcblx0XHRzdHJpbmcgPT4gc3RyaW5nLnRvTG9jYWxlTG93ZXJDYXNlKG9wdGlvbnMubG9jYWxlKTtcblx0Y29uc3QgdG9VcHBlckNhc2UgPSBvcHRpb25zLmxvY2FsZSA9PT0gZmFsc2UgP1xuXHRcdHN0cmluZyA9PiBzdHJpbmcudG9VcHBlckNhc2UoKSA6XG5cdFx0c3RyaW5nID0+IHN0cmluZy50b0xvY2FsZVVwcGVyQ2FzZShvcHRpb25zLmxvY2FsZSk7XG5cblx0aWYgKGlucHV0Lmxlbmd0aCA9PT0gMSkge1xuXHRcdHJldHVybiBvcHRpb25zLnBhc2NhbENhc2UgPyB0b1VwcGVyQ2FzZShpbnB1dCkgOiB0b0xvd2VyQ2FzZShpbnB1dCk7XG5cdH1cblxuXHRjb25zdCBoYXNVcHBlckNhc2UgPSBpbnB1dCAhPT0gdG9Mb3dlckNhc2UoaW5wdXQpO1xuXG5cdGlmIChoYXNVcHBlckNhc2UpIHtcblx0XHRpbnB1dCA9IHByZXNlcnZlQ2FtZWxDYXNlKGlucHV0LCB0b0xvd2VyQ2FzZSwgdG9VcHBlckNhc2UpO1xuXHR9XG5cblx0aW5wdXQgPSBpbnB1dC5yZXBsYWNlKExFQURJTkdfU0VQQVJBVE9SUywgJycpO1xuXG5cdGlmIChvcHRpb25zLnByZXNlcnZlQ29uc2VjdXRpdmVVcHBlcmNhc2UpIHtcblx0XHRpbnB1dCA9IHByZXNlcnZlQ29uc2VjdXRpdmVVcHBlcmNhc2UoaW5wdXQsIHRvTG93ZXJDYXNlKTtcblx0fSBlbHNlIHtcblx0XHRpbnB1dCA9IHRvTG93ZXJDYXNlKGlucHV0KTtcblx0fVxuXG5cdGlmIChvcHRpb25zLnBhc2NhbENhc2UpIHtcblx0XHRpbnB1dCA9IHRvVXBwZXJDYXNlKGlucHV0LmNoYXJBdCgwKSkgKyBpbnB1dC5zbGljZSgxKTtcblx0fVxuXG5cdHJldHVybiBwb3N0UHJvY2VzcyhpbnB1dCwgdG9VcHBlckNhc2UpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBjYW1lbENhc2U7XG4vLyBUT0RPOiBSZW1vdmUgdGhpcyBmb3IgdGhlIG5leHQgbWFqb3IgcmVsZWFzZVxubW9kdWxlLmV4cG9ydHMuZGVmYXVsdCA9IGNhbWVsQ2FzZTtcbiJdLCJuYW1lcyI6WyJVUFBFUkNBU0UiLCJMT1dFUkNBU0UiLCJMRUFESU5HX0NBUElUQUwiLCJJREVOVElGSUVSIiwiU0VQQVJBVE9SUyIsIkxFQURJTkdfU0VQQVJBVE9SUyIsIlJlZ0V4cCIsInNvdXJjZSIsIlNFUEFSQVRPUlNfQU5EX0lERU5USUZJRVIiLCJOVU1CRVJTX0FORF9JREVOVElGSUVSIiwicHJlc2VydmVDYW1lbENhc2UiLCJzdHJpbmciLCJ0b0xvd2VyQ2FzZSIsInRvVXBwZXJDYXNlIiwiaXNMYXN0Q2hhckxvd2VyIiwiaXNMYXN0Q2hhclVwcGVyIiwiaXNMYXN0TGFzdENoYXJVcHBlciIsImkiLCJsZW5ndGgiLCJjaGFyYWN0ZXIiLCJ0ZXN0Iiwic2xpY2UiLCJwcmVzZXJ2ZUNvbnNlY3V0aXZlVXBwZXJjYXNlIiwiaW5wdXQiLCJsYXN0SW5kZXgiLCJyZXBsYWNlIiwibTEiLCJwb3N0UHJvY2VzcyIsIl8iLCJpZGVudGlmaWVyIiwibSIsImNhbWVsQ2FzZSIsIm9wdGlvbnMiLCJBcnJheSIsImlzQXJyYXkiLCJUeXBlRXJyb3IiLCJwYXNjYWxDYXNlIiwibWFwIiwieCIsInRyaW0iLCJmaWx0ZXIiLCJqb2luIiwibG9jYWxlIiwidG9Mb2NhbGVMb3dlckNhc2UiLCJ0b0xvY2FsZVVwcGVyQ2FzZSIsImhhc1VwcGVyQ2FzZSIsImNoYXJBdCIsIm1vZHVsZSIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/node_modules/camelcase/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/callbacks/manager.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/callbacks/manager.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseCallbackManager: () => (/* reexport safe */ _dist_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.BaseCallbackManager),\n/* harmony export */   CallbackManager: () => (/* reexport safe */ _dist_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.CallbackManager),\n/* harmony export */   CallbackManagerForChainRun: () => (/* reexport safe */ _dist_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.CallbackManagerForChainRun),\n/* harmony export */   CallbackManagerForLLMRun: () => (/* reexport safe */ _dist_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.CallbackManagerForLLMRun),\n/* harmony export */   CallbackManagerForRetrieverRun: () => (/* reexport safe */ _dist_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.CallbackManagerForRetrieverRun),\n/* harmony export */   CallbackManagerForToolRun: () => (/* reexport safe */ _dist_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.CallbackManagerForToolRun),\n/* harmony export */   TraceGroup: () => (/* reexport safe */ _dist_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.TraceGroup),\n/* harmony export */   ensureHandler: () => (/* reexport safe */ _dist_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.ensureHandler),\n/* harmony export */   parseCallbackConfigArg: () => (/* reexport safe */ _dist_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.parseCallbackConfigArg),\n/* harmony export */   traceAsGroup: () => (/* reexport safe */ _dist_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.traceAsGroup)\n/* harmony export */ });\n/* harmony import */ var _dist_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/callbacks/manager.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/manager.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2NhbGxiYWNrcy9tYW5hZ2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQTRDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9jYWxsYmFja3MvbWFuYWdlci5qcz9mZjQ0Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4uL2Rpc3QvY2FsbGJhY2tzL21hbmFnZXIuanMnIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/callbacks/manager.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/caches.js":
/*!*****************************************************!*\
  !*** ./node_modules/@langchain/core/dist/caches.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseCache: () => (/* binding */ BaseCache),\n/* harmony export */   InMemoryCache: () => (/* binding */ InMemoryCache),\n/* harmony export */   deserializeStoredGeneration: () => (/* binding */ deserializeStoredGeneration),\n/* harmony export */   getCacheKey: () => (/* binding */ getCacheKey),\n/* harmony export */   serializeGeneration: () => (/* binding */ serializeGeneration)\n/* harmony export */ });\n/* harmony import */ var _utils_hash_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/hash.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/hash.js\");\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./messages/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/index.js\");\n\n\n/**\n * This cache key should be consistent across all versions of langchain.\n * It is currently NOT consistent across versions of langchain.\n *\n * A huge benefit of having a remote cache (like redis) is that you can\n * access the cache from different processes/machines. The allows you to\n * seperate concerns and scale horizontally.\n *\n * TODO: Make cache key consistent across versions of langchain.\n */ const getCacheKey = (...strings)=>(0,_utils_hash_js__WEBPACK_IMPORTED_MODULE_0__.insecureHash)(strings.join(\"_\"));\nfunction deserializeStoredGeneration(storedGeneration) {\n    if (storedGeneration.message !== undefined) {\n        return {\n            text: storedGeneration.text,\n            message: (0,_messages_index_js__WEBPACK_IMPORTED_MODULE_1__.mapStoredMessageToChatMessage)(storedGeneration.message)\n        };\n    } else {\n        return {\n            text: storedGeneration.text\n        };\n    }\n}\nfunction serializeGeneration(generation) {\n    const serializedValue = {\n        text: generation.text\n    };\n    if (generation.message !== undefined) {\n        serializedValue.message = generation.message.toDict();\n    }\n    return serializedValue;\n}\n/**\n * Base class for all caches. All caches should extend this class.\n */ class BaseCache {\n}\nconst GLOBAL_MAP = new Map();\n/**\n * A cache for storing LLM generations that stores data in memory.\n */ class InMemoryCache extends BaseCache {\n    constructor(map){\n        super();\n        Object.defineProperty(this, \"cache\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.cache = map ?? new Map();\n    }\n    /**\n     * Retrieves data from the cache using a prompt and an LLM key. If the\n     * data is not found, it returns null.\n     * @param prompt The prompt used to find the data.\n     * @param llmKey The LLM key used to find the data.\n     * @returns The data corresponding to the prompt and LLM key, or null if not found.\n     */ lookup(prompt, llmKey) {\n        return Promise.resolve(this.cache.get(getCacheKey(prompt, llmKey)) ?? null);\n    }\n    /**\n     * Updates the cache with new data using a prompt and an LLM key.\n     * @param prompt The prompt used to store the data.\n     * @param llmKey The LLM key used to store the data.\n     * @param value The data to be stored.\n     */ async update(prompt, llmKey, value) {\n        this.cache.set(getCacheKey(prompt, llmKey), value);\n    }\n    /**\n     * Returns a global instance of InMemoryCache using a predefined global\n     * map as the initial cache.\n     * @returns A global instance of InMemoryCache.\n     */ static global() {\n        return new InMemoryCache(GLOBAL_MAP);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvY2FjaGVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBK0M7QUFDc0I7QUFDckU7Ozs7Ozs7OztDQVNDLEdBQ00sTUFBTUUsY0FBYyxDQUFDLEdBQUdDLFVBQVlILDREQUFZQSxDQUFDRyxRQUFRQyxJQUFJLENBQUMsTUFBTTtBQUNwRSxTQUFTQyw0QkFBNEJDLGdCQUFnQjtJQUN4RCxJQUFJQSxpQkFBaUJDLE9BQU8sS0FBS0MsV0FBVztRQUN4QyxPQUFPO1lBQ0hDLE1BQU1ILGlCQUFpQkcsSUFBSTtZQUMzQkYsU0FBU04saUZBQTZCQSxDQUFDSyxpQkFBaUJDLE9BQU87UUFDbkU7SUFDSixPQUNLO1FBQ0QsT0FBTztZQUFFRSxNQUFNSCxpQkFBaUJHLElBQUk7UUFBQztJQUN6QztBQUNKO0FBQ08sU0FBU0Msb0JBQW9CQyxVQUFVO0lBQzFDLE1BQU1DLGtCQUFrQjtRQUNwQkgsTUFBTUUsV0FBV0YsSUFBSTtJQUN6QjtJQUNBLElBQUlFLFdBQVdKLE9BQU8sS0FBS0MsV0FBVztRQUNsQ0ksZ0JBQWdCTCxPQUFPLEdBQUdJLFdBQVdKLE9BQU8sQ0FBQ00sTUFBTTtJQUN2RDtJQUNBLE9BQU9EO0FBQ1g7QUFDQTs7Q0FFQyxHQUNNLE1BQU1FO0FBQ2I7QUFDQSxNQUFNQyxhQUFhLElBQUlDO0FBQ3ZCOztDQUVDLEdBQ00sTUFBTUMsc0JBQXNCSDtJQUMvQkksWUFBWUMsR0FBRyxDQUFFO1FBQ2IsS0FBSztRQUNMQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFNBQVM7WUFDakNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ0MsS0FBSyxHQUFHUCxPQUFPLElBQUlIO0lBQzVCO0lBQ0E7Ozs7OztLQU1DLEdBQ0RXLE9BQU9DLE1BQU0sRUFBRUMsTUFBTSxFQUFFO1FBQ25CLE9BQU9DLFFBQVFDLE9BQU8sQ0FBQyxJQUFJLENBQUNMLEtBQUssQ0FBQ00sR0FBRyxDQUFDOUIsWUFBWTBCLFFBQVFDLFlBQVk7SUFDMUU7SUFDQTs7Ozs7S0FLQyxHQUNELE1BQU1JLE9BQU9MLE1BQU0sRUFBRUMsTUFBTSxFQUFFSixLQUFLLEVBQUU7UUFDaEMsSUFBSSxDQUFDQyxLQUFLLENBQUNRLEdBQUcsQ0FBQ2hDLFlBQVkwQixRQUFRQyxTQUFTSjtJQUNoRDtJQUNBOzs7O0tBSUMsR0FDRCxPQUFPVSxTQUFTO1FBQ1osT0FBTyxJQUFJbEIsY0FBY0Y7SUFDN0I7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLWZvcm0tYnVpbGRlci10dXRvcmlhbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9jYWNoZXMuanM/NjViZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpbnNlY3VyZUhhc2ggfSBmcm9tIFwiLi91dGlscy9oYXNoLmpzXCI7XG5pbXBvcnQgeyBtYXBTdG9yZWRNZXNzYWdlVG9DaGF0TWVzc2FnZSwgfSBmcm9tIFwiLi9tZXNzYWdlcy9pbmRleC5qc1wiO1xuLyoqXG4gKiBUaGlzIGNhY2hlIGtleSBzaG91bGQgYmUgY29uc2lzdGVudCBhY3Jvc3MgYWxsIHZlcnNpb25zIG9mIGxhbmdjaGFpbi5cbiAqIEl0IGlzIGN1cnJlbnRseSBOT1QgY29uc2lzdGVudCBhY3Jvc3MgdmVyc2lvbnMgb2YgbGFuZ2NoYWluLlxuICpcbiAqIEEgaHVnZSBiZW5lZml0IG9mIGhhdmluZyBhIHJlbW90ZSBjYWNoZSAobGlrZSByZWRpcykgaXMgdGhhdCB5b3UgY2FuXG4gKiBhY2Nlc3MgdGhlIGNhY2hlIGZyb20gZGlmZmVyZW50IHByb2Nlc3Nlcy9tYWNoaW5lcy4gVGhlIGFsbG93cyB5b3UgdG9cbiAqIHNlcGVyYXRlIGNvbmNlcm5zIGFuZCBzY2FsZSBob3Jpem9udGFsbHkuXG4gKlxuICogVE9ETzogTWFrZSBjYWNoZSBrZXkgY29uc2lzdGVudCBhY3Jvc3MgdmVyc2lvbnMgb2YgbGFuZ2NoYWluLlxuICovXG5leHBvcnQgY29uc3QgZ2V0Q2FjaGVLZXkgPSAoLi4uc3RyaW5ncykgPT4gaW5zZWN1cmVIYXNoKHN0cmluZ3Muam9pbihcIl9cIikpO1xuZXhwb3J0IGZ1bmN0aW9uIGRlc2VyaWFsaXplU3RvcmVkR2VuZXJhdGlvbihzdG9yZWRHZW5lcmF0aW9uKSB7XG4gICAgaWYgKHN0b3JlZEdlbmVyYXRpb24ubWVzc2FnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0ZXh0OiBzdG9yZWRHZW5lcmF0aW9uLnRleHQsXG4gICAgICAgICAgICBtZXNzYWdlOiBtYXBTdG9yZWRNZXNzYWdlVG9DaGF0TWVzc2FnZShzdG9yZWRHZW5lcmF0aW9uLm1lc3NhZ2UpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHsgdGV4dDogc3RvcmVkR2VuZXJhdGlvbi50ZXh0IH07XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZUdlbmVyYXRpb24oZ2VuZXJhdGlvbikge1xuICAgIGNvbnN0IHNlcmlhbGl6ZWRWYWx1ZSA9IHtcbiAgICAgICAgdGV4dDogZ2VuZXJhdGlvbi50ZXh0LFxuICAgIH07XG4gICAgaWYgKGdlbmVyYXRpb24ubWVzc2FnZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHNlcmlhbGl6ZWRWYWx1ZS5tZXNzYWdlID0gZ2VuZXJhdGlvbi5tZXNzYWdlLnRvRGljdCgpO1xuICAgIH1cbiAgICByZXR1cm4gc2VyaWFsaXplZFZhbHVlO1xufVxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBhbGwgY2FjaGVzLiBBbGwgY2FjaGVzIHNob3VsZCBleHRlbmQgdGhpcyBjbGFzcy5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VDYWNoZSB7XG59XG5jb25zdCBHTE9CQUxfTUFQID0gbmV3IE1hcCgpO1xuLyoqXG4gKiBBIGNhY2hlIGZvciBzdG9yaW5nIExMTSBnZW5lcmF0aW9ucyB0aGF0IHN0b3JlcyBkYXRhIGluIG1lbW9yeS5cbiAqL1xuZXhwb3J0IGNsYXNzIEluTWVtb3J5Q2FjaGUgZXh0ZW5kcyBCYXNlQ2FjaGUge1xuICAgIGNvbnN0cnVjdG9yKG1hcCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjYWNoZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNhY2hlID0gbWFwID8/IG5ldyBNYXAoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGRhdGEgZnJvbSB0aGUgY2FjaGUgdXNpbmcgYSBwcm9tcHQgYW5kIGFuIExMTSBrZXkuIElmIHRoZVxuICAgICAqIGRhdGEgaXMgbm90IGZvdW5kLCBpdCByZXR1cm5zIG51bGwuXG4gICAgICogQHBhcmFtIHByb21wdCBUaGUgcHJvbXB0IHVzZWQgdG8gZmluZCB0aGUgZGF0YS5cbiAgICAgKiBAcGFyYW0gbGxtS2V5IFRoZSBMTE0ga2V5IHVzZWQgdG8gZmluZCB0aGUgZGF0YS5cbiAgICAgKiBAcmV0dXJucyBUaGUgZGF0YSBjb3JyZXNwb25kaW5nIHRvIHRoZSBwcm9tcHQgYW5kIExMTSBrZXksIG9yIG51bGwgaWYgbm90IGZvdW5kLlxuICAgICAqL1xuICAgIGxvb2t1cChwcm9tcHQsIGxsbUtleSkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuY2FjaGUuZ2V0KGdldENhY2hlS2V5KHByb21wdCwgbGxtS2V5KSkgPz8gbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGNhY2hlIHdpdGggbmV3IGRhdGEgdXNpbmcgYSBwcm9tcHQgYW5kIGFuIExMTSBrZXkuXG4gICAgICogQHBhcmFtIHByb21wdCBUaGUgcHJvbXB0IHVzZWQgdG8gc3RvcmUgdGhlIGRhdGEuXG4gICAgICogQHBhcmFtIGxsbUtleSBUaGUgTExNIGtleSB1c2VkIHRvIHN0b3JlIHRoZSBkYXRhLlxuICAgICAqIEBwYXJhbSB2YWx1ZSBUaGUgZGF0YSB0byBiZSBzdG9yZWQuXG4gICAgICovXG4gICAgYXN5bmMgdXBkYXRlKHByb21wdCwgbGxtS2V5LCB2YWx1ZSkge1xuICAgICAgICB0aGlzLmNhY2hlLnNldChnZXRDYWNoZUtleShwcm9tcHQsIGxsbUtleSksIHZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGdsb2JhbCBpbnN0YW5jZSBvZiBJbk1lbW9yeUNhY2hlIHVzaW5nIGEgcHJlZGVmaW5lZCBnbG9iYWxcbiAgICAgKiBtYXAgYXMgdGhlIGluaXRpYWwgY2FjaGUuXG4gICAgICogQHJldHVybnMgQSBnbG9iYWwgaW5zdGFuY2Ugb2YgSW5NZW1vcnlDYWNoZS5cbiAgICAgKi9cbiAgICBzdGF0aWMgZ2xvYmFsKCkge1xuICAgICAgICByZXR1cm4gbmV3IEluTWVtb3J5Q2FjaGUoR0xPQkFMX01BUCk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbImluc2VjdXJlSGFzaCIsIm1hcFN0b3JlZE1lc3NhZ2VUb0NoYXRNZXNzYWdlIiwiZ2V0Q2FjaGVLZXkiLCJzdHJpbmdzIiwiam9pbiIsImRlc2VyaWFsaXplU3RvcmVkR2VuZXJhdGlvbiIsInN0b3JlZEdlbmVyYXRpb24iLCJtZXNzYWdlIiwidW5kZWZpbmVkIiwidGV4dCIsInNlcmlhbGl6ZUdlbmVyYXRpb24iLCJnZW5lcmF0aW9uIiwic2VyaWFsaXplZFZhbHVlIiwidG9EaWN0IiwiQmFzZUNhY2hlIiwiR0xPQkFMX01BUCIsIk1hcCIsIkluTWVtb3J5Q2FjaGUiLCJjb25zdHJ1Y3RvciIsIm1hcCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJjYWNoZSIsImxvb2t1cCIsInByb21wdCIsImxsbUtleSIsIlByb21pc2UiLCJyZXNvbHZlIiwiZ2V0IiwidXBkYXRlIiwic2V0IiwiZ2xvYmFsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/caches.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/callbacks/base.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/callbacks/base.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseCallbackHandler: () => (/* binding */ BaseCallbackHandler)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../load/serializable.js */ \"(rsc)/./node_modules/@langchain/core/dist/load/serializable.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/env.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/env.js\");\n\n\n\n/**\n * Abstract class that provides a set of optional methods that can be\n * overridden in derived classes to handle various events during the\n * execution of a LangChain application.\n */ class BaseCallbackHandlerMethodsClass {\n}\n/**\n * Abstract base class for creating callback handlers in the LangChain\n * framework. It provides a set of optional methods that can be overridden\n * in derived classes to handle various events during the execution of a\n * LangChain application.\n */ class BaseCallbackHandler extends BaseCallbackHandlerMethodsClass {\n    get lc_namespace() {\n        return [\n            \"langchain_core\",\n            \"callbacks\",\n            this.name\n        ];\n    }\n    get lc_secrets() {\n        return undefined;\n    }\n    get lc_attributes() {\n        return undefined;\n    }\n    get lc_aliases() {\n        return undefined;\n    }\n    /**\n     * The name of the serializable. Override to provide an alias or\n     * to preserve the serialized module name in minified environments.\n     *\n     * Implemented as a static method to support loading logic.\n     */ static lc_name() {\n        return this.name;\n    }\n    /**\n     * The final serialized identifier for the module.\n     */ get lc_id() {\n        return [\n            ...this.lc_namespace,\n            (0,_load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.get_lc_unique_name)(this.constructor)\n        ];\n    }\n    constructor(input){\n        super();\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"lc_kwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"ignoreLLM\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"ignoreChain\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"ignoreAgent\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"ignoreRetriever\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"awaitHandlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"LANGCHAIN_CALLBACKS_BACKGROUND\") !== \"true\"\n        });\n        this.lc_kwargs = input || {};\n        if (input) {\n            this.ignoreLLM = input.ignoreLLM ?? this.ignoreLLM;\n            this.ignoreChain = input.ignoreChain ?? this.ignoreChain;\n            this.ignoreAgent = input.ignoreAgent ?? this.ignoreAgent;\n            this.ignoreRetriever = input.ignoreRetriever ?? this.ignoreRetriever;\n            this.awaitHandlers = input._awaitHandler ?? this.awaitHandlers;\n        }\n    }\n    copy() {\n        return new this.constructor(this);\n    }\n    toJSON() {\n        return _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.Serializable.prototype.toJSON.call(this);\n    }\n    toJSONNotImplemented() {\n        return _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.Serializable.prototype.toJSONNotImplemented.call(this);\n    }\n    static fromMethods(methods) {\n        class Handler extends BaseCallbackHandler {\n            constructor(){\n                super();\n                Object.defineProperty(this, \"name\", {\n                    enumerable: true,\n                    configurable: true,\n                    writable: true,\n                    value: uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"]()\n                });\n                Object.assign(this, methods);\n            }\n        }\n        return new Handler();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvY2FsbGJhY2tzL2Jhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUE2QjtBQUMrQztBQUNuQjtBQUN6RDs7OztDQUlDLEdBQ0QsTUFBTUk7QUFDTjtBQUNBOzs7OztDQUtDLEdBQ00sTUFBTUMsNEJBQTRCRDtJQUNyQyxJQUFJRSxlQUFlO1FBQ2YsT0FBTztZQUFDO1lBQWtCO1lBQWEsSUFBSSxDQUFDQyxJQUFJO1NBQUM7SUFDckQ7SUFDQSxJQUFJQyxhQUFhO1FBQ2IsT0FBT0M7SUFDWDtJQUNBLElBQUlDLGdCQUFnQjtRQUNoQixPQUFPRDtJQUNYO0lBQ0EsSUFBSUUsYUFBYTtRQUNiLE9BQU9GO0lBQ1g7SUFDQTs7Ozs7S0FLQyxHQUNELE9BQU9HLFVBQVU7UUFDYixPQUFPLElBQUksQ0FBQ0wsSUFBSTtJQUNwQjtJQUNBOztLQUVDLEdBQ0QsSUFBSU0sUUFBUTtRQUNSLE9BQU87ZUFDQSxJQUFJLENBQUNQLFlBQVk7WUFDcEJKLHlFQUFrQkEsQ0FBQyxJQUFJLENBQUNZLFdBQVc7U0FDdEM7SUFDTDtJQUNBQSxZQUFZQyxLQUFLLENBQUU7UUFDZixLQUFLO1FBQ0xDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CO1lBQzNDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxhQUFhO1lBQ3JDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxhQUFhO1lBQ3JDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxlQUFlO1lBQ3ZDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxlQUFlO1lBQ3ZDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxtQkFBbUI7WUFDM0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGlCQUFpQjtZQUN6Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBT2xCLHFFQUFzQkEsQ0FBQyxzQ0FBc0M7UUFDeEU7UUFDQSxJQUFJLENBQUNtQixTQUFTLEdBQUdQLFNBQVMsQ0FBQztRQUMzQixJQUFJQSxPQUFPO1lBQ1AsSUFBSSxDQUFDUSxTQUFTLEdBQUdSLE1BQU1RLFNBQVMsSUFBSSxJQUFJLENBQUNBLFNBQVM7WUFDbEQsSUFBSSxDQUFDQyxXQUFXLEdBQUdULE1BQU1TLFdBQVcsSUFBSSxJQUFJLENBQUNBLFdBQVc7WUFDeEQsSUFBSSxDQUFDQyxXQUFXLEdBQUdWLE1BQU1VLFdBQVcsSUFBSSxJQUFJLENBQUNBLFdBQVc7WUFDeEQsSUFBSSxDQUFDQyxlQUFlLEdBQUdYLE1BQU1XLGVBQWUsSUFBSSxJQUFJLENBQUNBLGVBQWU7WUFDcEUsSUFBSSxDQUFDQyxhQUFhLEdBQUdaLE1BQU1hLGFBQWEsSUFBSSxJQUFJLENBQUNELGFBQWE7UUFDbEU7SUFDSjtJQUNBRSxPQUFPO1FBQ0gsT0FBTyxJQUFJLElBQUksQ0FBQ2YsV0FBVyxDQUFDLElBQUk7SUFDcEM7SUFDQWdCLFNBQVM7UUFDTCxPQUFPN0IsK0RBQVlBLENBQUM4QixTQUFTLENBQUNELE1BQU0sQ0FBQ0UsSUFBSSxDQUFDLElBQUk7SUFDbEQ7SUFDQUMsdUJBQXVCO1FBQ25CLE9BQU9oQywrREFBWUEsQ0FBQzhCLFNBQVMsQ0FBQ0Usb0JBQW9CLENBQUNELElBQUksQ0FBQyxJQUFJO0lBQ2hFO0lBQ0EsT0FBT0UsWUFBWUMsT0FBTyxFQUFFO1FBQ3hCLE1BQU1DLGdCQUFnQi9CO1lBQ2xCUyxhQUFjO2dCQUNWLEtBQUs7Z0JBQ0xFLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtvQkFDaENDLFlBQVk7b0JBQ1pDLGNBQWM7b0JBQ2RDLFVBQVU7b0JBQ1ZDLE9BQU9yQiw0Q0FBTztnQkFDbEI7Z0JBQ0FnQixPQUFPc0IsTUFBTSxDQUFDLElBQUksRUFBRUg7WUFDeEI7UUFDSjtRQUNBLE9BQU8sSUFBSUM7SUFDZjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2NhbGxiYWNrcy9iYXNlLmpzPzUxODUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgdXVpZCBmcm9tIFwidXVpZFwiO1xuaW1wb3J0IHsgU2VyaWFsaXphYmxlLCBnZXRfbGNfdW5pcXVlX25hbWUsIH0gZnJvbSBcIi4uL2xvYWQvc2VyaWFsaXphYmxlLmpzXCI7XG5pbXBvcnQgeyBnZXRFbnZpcm9ubWVudFZhcmlhYmxlIH0gZnJvbSBcIi4uL3V0aWxzL2Vudi5qc1wiO1xuLyoqXG4gKiBBYnN0cmFjdCBjbGFzcyB0aGF0IHByb3ZpZGVzIGEgc2V0IG9mIG9wdGlvbmFsIG1ldGhvZHMgdGhhdCBjYW4gYmVcbiAqIG92ZXJyaWRkZW4gaW4gZGVyaXZlZCBjbGFzc2VzIHRvIGhhbmRsZSB2YXJpb3VzIGV2ZW50cyBkdXJpbmcgdGhlXG4gKiBleGVjdXRpb24gb2YgYSBMYW5nQ2hhaW4gYXBwbGljYXRpb24uXG4gKi9cbmNsYXNzIEJhc2VDYWxsYmFja0hhbmRsZXJNZXRob2RzQ2xhc3Mge1xufVxuLyoqXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzIGZvciBjcmVhdGluZyBjYWxsYmFjayBoYW5kbGVycyBpbiB0aGUgTGFuZ0NoYWluXG4gKiBmcmFtZXdvcmsuIEl0IHByb3ZpZGVzIGEgc2V0IG9mIG9wdGlvbmFsIG1ldGhvZHMgdGhhdCBjYW4gYmUgb3ZlcnJpZGRlblxuICogaW4gZGVyaXZlZCBjbGFzc2VzIHRvIGhhbmRsZSB2YXJpb3VzIGV2ZW50cyBkdXJpbmcgdGhlIGV4ZWN1dGlvbiBvZiBhXG4gKiBMYW5nQ2hhaW4gYXBwbGljYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlQ2FsbGJhY2tIYW5kbGVyIGV4dGVuZHMgQmFzZUNhbGxiYWNrSGFuZGxlck1ldGhvZHNDbGFzcyB7XG4gICAgZ2V0IGxjX25hbWVzcGFjZSgpIHtcbiAgICAgICAgcmV0dXJuIFtcImxhbmdjaGFpbl9jb3JlXCIsIFwiY2FsbGJhY2tzXCIsIHRoaXMubmFtZV07XG4gICAgfVxuICAgIGdldCBsY19zZWNyZXRzKCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBnZXQgbGNfYXR0cmlidXRlcygpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgZ2V0IGxjX2FsaWFzZXMoKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIHRoZSBzZXJpYWxpemFibGUuIE92ZXJyaWRlIHRvIHByb3ZpZGUgYW4gYWxpYXMgb3JcbiAgICAgKiB0byBwcmVzZXJ2ZSB0aGUgc2VyaWFsaXplZCBtb2R1bGUgbmFtZSBpbiBtaW5pZmllZCBlbnZpcm9ubWVudHMuXG4gICAgICpcbiAgICAgKiBJbXBsZW1lbnRlZCBhcyBhIHN0YXRpYyBtZXRob2QgdG8gc3VwcG9ydCBsb2FkaW5nIGxvZ2ljLlxuICAgICAqL1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5uYW1lO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgZmluYWwgc2VyaWFsaXplZCBpZGVudGlmaWVyIGZvciB0aGUgbW9kdWxlLlxuICAgICAqL1xuICAgIGdldCBsY19pZCgpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIC4uLnRoaXMubGNfbmFtZXNwYWNlLFxuICAgICAgICAgICAgZ2V0X2xjX3VuaXF1ZV9uYW1lKHRoaXMuY29uc3RydWN0b3IpLFxuICAgICAgICBdO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihpbnB1dCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19rd2FyZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaWdub3JlTExNXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaWdub3JlQ2hhaW5cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpZ25vcmVBZ2VudFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlnbm9yZVJldHJpZXZlclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImF3YWl0SGFuZGxlcnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGdldEVudmlyb25tZW50VmFyaWFibGUoXCJMQU5HQ0hBSU5fQ0FMTEJBQ0tTX0JBQ0tHUk9VTkRcIikgIT09IFwidHJ1ZVwiXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmxjX2t3YXJncyA9IGlucHV0IHx8IHt9O1xuICAgICAgICBpZiAoaW5wdXQpIHtcbiAgICAgICAgICAgIHRoaXMuaWdub3JlTExNID0gaW5wdXQuaWdub3JlTExNID8/IHRoaXMuaWdub3JlTExNO1xuICAgICAgICAgICAgdGhpcy5pZ25vcmVDaGFpbiA9IGlucHV0Lmlnbm9yZUNoYWluID8/IHRoaXMuaWdub3JlQ2hhaW47XG4gICAgICAgICAgICB0aGlzLmlnbm9yZUFnZW50ID0gaW5wdXQuaWdub3JlQWdlbnQgPz8gdGhpcy5pZ25vcmVBZ2VudDtcbiAgICAgICAgICAgIHRoaXMuaWdub3JlUmV0cmlldmVyID0gaW5wdXQuaWdub3JlUmV0cmlldmVyID8/IHRoaXMuaWdub3JlUmV0cmlldmVyO1xuICAgICAgICAgICAgdGhpcy5hd2FpdEhhbmRsZXJzID0gaW5wdXQuX2F3YWl0SGFuZGxlciA/PyB0aGlzLmF3YWl0SGFuZGxlcnM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29weSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMpO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiBTZXJpYWxpemFibGUucHJvdG90eXBlLnRvSlNPTi5jYWxsKHRoaXMpO1xuICAgIH1cbiAgICB0b0pTT05Ob3RJbXBsZW1lbnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIFNlcmlhbGl6YWJsZS5wcm90b3R5cGUudG9KU09OTm90SW1wbGVtZW50ZWQuY2FsbCh0aGlzKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21NZXRob2RzKG1ldGhvZHMpIHtcbiAgICAgICAgY2xhc3MgSGFuZGxlciBleHRlbmRzIEJhc2VDYWxsYmFja0hhbmRsZXIge1xuICAgICAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHV1aWQudjQoKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgbWV0aG9kcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBIYW5kbGVyKCk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbInV1aWQiLCJTZXJpYWxpemFibGUiLCJnZXRfbGNfdW5pcXVlX25hbWUiLCJnZXRFbnZpcm9ubWVudFZhcmlhYmxlIiwiQmFzZUNhbGxiYWNrSGFuZGxlck1ldGhvZHNDbGFzcyIsIkJhc2VDYWxsYmFja0hhbmRsZXIiLCJsY19uYW1lc3BhY2UiLCJuYW1lIiwibGNfc2VjcmV0cyIsInVuZGVmaW5lZCIsImxjX2F0dHJpYnV0ZXMiLCJsY19hbGlhc2VzIiwibGNfbmFtZSIsImxjX2lkIiwiY29uc3RydWN0b3IiLCJpbnB1dCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJsY19rd2FyZ3MiLCJpZ25vcmVMTE0iLCJpZ25vcmVDaGFpbiIsImlnbm9yZUFnZW50IiwiaWdub3JlUmV0cmlldmVyIiwiYXdhaXRIYW5kbGVycyIsIl9hd2FpdEhhbmRsZXIiLCJjb3B5IiwidG9KU09OIiwicHJvdG90eXBlIiwiY2FsbCIsInRvSlNPTk5vdEltcGxlbWVudGVkIiwiZnJvbU1ldGhvZHMiLCJtZXRob2RzIiwiSGFuZGxlciIsInY0IiwiYXNzaWduIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/callbacks/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/callbacks/manager.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/callbacks/manager.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseCallbackManager: () => (/* binding */ BaseCallbackManager),\n/* harmony export */   CallbackManager: () => (/* binding */ CallbackManager),\n/* harmony export */   CallbackManagerForChainRun: () => (/* binding */ CallbackManagerForChainRun),\n/* harmony export */   CallbackManagerForLLMRun: () => (/* binding */ CallbackManagerForLLMRun),\n/* harmony export */   CallbackManagerForRetrieverRun: () => (/* binding */ CallbackManagerForRetrieverRun),\n/* harmony export */   CallbackManagerForToolRun: () => (/* binding */ CallbackManagerForToolRun),\n/* harmony export */   TraceGroup: () => (/* binding */ TraceGroup),\n/* harmony export */   ensureHandler: () => (/* binding */ ensureHandler),\n/* harmony export */   parseCallbackConfigArg: () => (/* binding */ parseCallbackConfigArg),\n/* harmony export */   traceAsGroup: () => (/* binding */ traceAsGroup)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/base.js\");\n/* harmony import */ var _tracers_console_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../tracers/console.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/console.js\");\n/* harmony import */ var _tracers_initialize_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../tracers/initialize.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/initialize.js\");\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../messages/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/index.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/env.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/env.js\");\n/* harmony import */ var _tracers_tracer_langchain_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../tracers/tracer_langchain.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/tracer_langchain.js\");\n/* harmony import */ var _promises_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./promises.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/promises.js\");\n\n\n\n\n\n\n\n\nif (/* #__PURE__ */ (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_4__.getEnvironmentVariable)(\"LANGCHAIN_TRACING_V2\") === \"true\" && /* #__PURE__ */ (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_4__.getEnvironmentVariable)(\"LANGCHAIN_CALLBACKS_BACKGROUND\") !== \"true\") {\n    /* #__PURE__ */ console.warn([\n        \"[WARN]: You have enabled LangSmith tracing without backgrounding callbacks.\",\n        \"[WARN]: If you are not using a serverless environment where you must wait for tracing calls to finish,\",\n        `[WARN]: we suggest setting \"process.env.LANGCHAIN_CALLBACKS_BACKGROUND=true\" to avoid additional latency.`\n    ].join(\"\\n\"));\n}\nfunction parseCallbackConfigArg(arg) {\n    if (!arg) {\n        return {};\n    } else if (Array.isArray(arg) || \"name\" in arg) {\n        return {\n            callbacks: arg\n        };\n    } else {\n        return arg;\n    }\n}\n/**\n * Manage callbacks from different components of LangChain.\n */ class BaseCallbackManager {\n    setHandler(handler) {\n        return this.setHandlers([\n            handler\n        ]);\n    }\n}\n/**\n * Base class for run manager in LangChain.\n */ class BaseRunManager {\n    constructor(runId, handlers, inheritableHandlers, tags, inheritableTags, metadata, inheritableMetadata, _parentRunId){\n        Object.defineProperty(this, \"runId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: runId\n        });\n        Object.defineProperty(this, \"handlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: handlers\n        });\n        Object.defineProperty(this, \"inheritableHandlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: inheritableHandlers\n        });\n        Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: tags\n        });\n        Object.defineProperty(this, \"inheritableTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: inheritableTags\n        });\n        Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: metadata\n        });\n        Object.defineProperty(this, \"inheritableMetadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: inheritableMetadata\n        });\n        Object.defineProperty(this, \"_parentRunId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: _parentRunId\n        });\n    }\n    async handleText(text) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                try {\n                    await handler.handleText?.(text, this.runId, this._parentRunId, this.tags);\n                } catch (err) {\n                    console.error(`Error in handler ${handler.constructor.name}, handleText: ${err}`);\n                }\n            }, handler.awaitHandlers)));\n    }\n}\n/**\n * Manages callbacks for retriever runs.\n */ class CallbackManagerForRetrieverRun extends BaseRunManager {\n    getChild(tag) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        const manager = new CallbackManager(this.runId);\n        manager.setHandlers(this.inheritableHandlers);\n        manager.addTags(this.inheritableTags);\n        manager.addMetadata(this.inheritableMetadata);\n        if (tag) {\n            manager.addTags([\n                tag\n            ], false);\n        }\n        return manager;\n    }\n    async handleRetrieverEnd(documents) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreRetriever) {\n                    try {\n                        await handler.handleRetrieverEnd?.(documents, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleRetriever`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleRetrieverError(err) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreRetriever) {\n                    try {\n                        await handler.handleRetrieverError?.(err, this.runId, this._parentRunId, this.tags);\n                    } catch (error) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleRetrieverError: ${error}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n}\nclass CallbackManagerForLLMRun extends BaseRunManager {\n    async handleLLMNewToken(token, idx, _runId, _parentRunId, _tags, fields) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreLLM) {\n                    try {\n                        await handler.handleLLMNewToken?.(token, idx ?? {\n                            prompt: 0,\n                            completion: 0\n                        }, this.runId, this._parentRunId, this.tags, fields);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleLLMNewToken: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleLLMError(err) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreLLM) {\n                    try {\n                        await handler.handleLLMError?.(err, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleLLMError: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleLLMEnd(output) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreLLM) {\n                    try {\n                        await handler.handleLLMEnd?.(output, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleLLMEnd: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n}\nclass CallbackManagerForChainRun extends BaseRunManager {\n    getChild(tag) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        const manager = new CallbackManager(this.runId);\n        manager.setHandlers(this.inheritableHandlers);\n        manager.addTags(this.inheritableTags);\n        manager.addMetadata(this.inheritableMetadata);\n        if (tag) {\n            manager.addTags([\n                tag\n            ], false);\n        }\n        return manager;\n    }\n    async handleChainError(err, _runId, _parentRunId, _tags, kwargs) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreChain) {\n                    try {\n                        await handler.handleChainError?.(err, this.runId, this._parentRunId, this.tags, kwargs);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleChainError: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleChainEnd(output, _runId, _parentRunId, _tags, kwargs) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreChain) {\n                    try {\n                        await handler.handleChainEnd?.(output, this.runId, this._parentRunId, this.tags, kwargs);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleChainEnd: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleAgentAction(action) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreAgent) {\n                    try {\n                        await handler.handleAgentAction?.(action, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleAgentAction: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleAgentEnd(action) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreAgent) {\n                    try {\n                        await handler.handleAgentEnd?.(action, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleAgentEnd: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n}\nclass CallbackManagerForToolRun extends BaseRunManager {\n    getChild(tag) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        const manager = new CallbackManager(this.runId);\n        manager.setHandlers(this.inheritableHandlers);\n        manager.addTags(this.inheritableTags);\n        manager.addMetadata(this.inheritableMetadata);\n        if (tag) {\n            manager.addTags([\n                tag\n            ], false);\n        }\n        return manager;\n    }\n    async handleToolError(err) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreAgent) {\n                    try {\n                        await handler.handleToolError?.(err, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleToolError: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n    async handleToolEnd(output) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreAgent) {\n                    try {\n                        await handler.handleToolEnd?.(output, this.runId, this._parentRunId, this.tags);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleToolEnd: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n    }\n}\n/**\n * @example\n * ```typescript\n * const prompt = PromptTemplate.fromTemplate(\"What is the answer to {question}?\");\n *\n * // Example of using LLMChain with OpenAI and a simple prompt\n * const chain = new LLMChain({\n *   llm: new ChatOpenAI({ temperature: 0.9 }),\n *   prompt,\n * });\n *\n * // Running the chain with a single question\n * const result = await chain.call({\n *   question: \"What is the airspeed velocity of an unladen swallow?\",\n * });\n * console.log(\"The answer is:\", result);\n * ```\n */ class CallbackManager extends BaseCallbackManager {\n    constructor(parentRunId, options){\n        super();\n        Object.defineProperty(this, \"handlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"inheritableHandlers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"inheritableTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"inheritableMetadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"callback_manager\"\n        });\n        Object.defineProperty(this, \"_parentRunId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.handlers = options?.handlers ?? this.handlers;\n        this.inheritableHandlers = options?.inheritableHandlers ?? this.inheritableHandlers;\n        this.tags = options?.tags ?? this.tags;\n        this.inheritableTags = options?.inheritableTags ?? this.inheritableTags;\n        this.metadata = options?.metadata ?? this.metadata;\n        this.inheritableMetadata = options?.inheritableMetadata ?? this.inheritableMetadata;\n        this._parentRunId = parentRunId;\n    }\n    /**\n     * Gets the parent run ID, if any.\n     *\n     * @returns The parent run ID.\n     */ getParentRunId() {\n        return this._parentRunId;\n    }\n    async handleLLMStart(llm, prompts, _runId = undefined, _parentRunId = undefined, extraParams = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        return Promise.all(prompts.map(async (prompt)=>{\n            const runId = (0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])();\n            await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                    if (!handler.ignoreLLM) {\n                        try {\n                            await handler.handleLLMStart?.(llm, [\n                                prompt\n                            ], runId, this._parentRunId, extraParams, this.tags, this.metadata, runName);\n                        } catch (err) {\n                            console.error(`Error in handler ${handler.constructor.name}, handleLLMStart: ${err}`);\n                        }\n                    }\n                }, handler.awaitHandlers)));\n            return new CallbackManagerForLLMRun(runId, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n        }));\n    }\n    async handleChatModelStart(llm, messages, _runId = undefined, _parentRunId = undefined, extraParams = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        return Promise.all(messages.map(async (messageGroup)=>{\n            const runId = (0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])();\n            await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                    if (!handler.ignoreLLM) {\n                        try {\n                            if (handler.handleChatModelStart) {\n                                await handler.handleChatModelStart?.(llm, [\n                                    messageGroup\n                                ], runId, this._parentRunId, extraParams, this.tags, this.metadata, runName);\n                            } else if (handler.handleLLMStart) {\n                                const messageString = (0,_messages_index_js__WEBPACK_IMPORTED_MODULE_3__.getBufferString)(messageGroup);\n                                await handler.handleLLMStart?.(llm, [\n                                    messageString\n                                ], runId, this._parentRunId, extraParams, this.tags, this.metadata, runName);\n                            }\n                        } catch (err) {\n                            console.error(`Error in handler ${handler.constructor.name}, handleLLMStart: ${err}`);\n                        }\n                    }\n                }, handler.awaitHandlers)));\n            return new CallbackManagerForLLMRun(runId, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n        }));\n    }\n    async handleChainStart(chain, inputs, runId = (0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(), runType = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreChain) {\n                    try {\n                        await handler.handleChainStart?.(chain, inputs, runId, this._parentRunId, this.tags, this.metadata, runType, runName);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleChainStart: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n        return new CallbackManagerForChainRun(runId, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n    }\n    async handleToolStart(tool, input, runId = (0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(), _parentRunId = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreAgent) {\n                    try {\n                        await handler.handleToolStart?.(tool, input, runId, this._parentRunId, this.tags, this.metadata, runName);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleToolStart: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n        return new CallbackManagerForToolRun(runId, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n    }\n    async handleRetrieverStart(retriever, query, runId = (0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])(), _parentRunId = undefined, _tags = undefined, _metadata = undefined, runName = undefined) {\n        await Promise.all(this.handlers.map((handler)=>(0,_promises_js__WEBPACK_IMPORTED_MODULE_6__.consumeCallback)(async ()=>{\n                if (!handler.ignoreRetriever) {\n                    try {\n                        await handler.handleRetrieverStart?.(retriever, query, runId, this._parentRunId, this.tags, this.metadata, runName);\n                    } catch (err) {\n                        console.error(`Error in handler ${handler.constructor.name}, handleRetrieverStart: ${err}`);\n                    }\n                }\n            }, handler.awaitHandlers)));\n        return new CallbackManagerForRetrieverRun(runId, this.handlers, this.inheritableHandlers, this.tags, this.inheritableTags, this.metadata, this.inheritableMetadata, this._parentRunId);\n    }\n    addHandler(handler, inherit = true) {\n        this.handlers.push(handler);\n        if (inherit) {\n            this.inheritableHandlers.push(handler);\n        }\n    }\n    removeHandler(handler) {\n        this.handlers = this.handlers.filter((_handler)=>_handler !== handler);\n        this.inheritableHandlers = this.inheritableHandlers.filter((_handler)=>_handler !== handler);\n    }\n    setHandlers(handlers, inherit = true) {\n        this.handlers = [];\n        this.inheritableHandlers = [];\n        for (const handler of handlers){\n            this.addHandler(handler, inherit);\n        }\n    }\n    addTags(tags, inherit = true) {\n        this.removeTags(tags); // Remove duplicates\n        this.tags.push(...tags);\n        if (inherit) {\n            this.inheritableTags.push(...tags);\n        }\n    }\n    removeTags(tags) {\n        this.tags = this.tags.filter((tag)=>!tags.includes(tag));\n        this.inheritableTags = this.inheritableTags.filter((tag)=>!tags.includes(tag));\n    }\n    addMetadata(metadata, inherit = true) {\n        this.metadata = {\n            ...this.metadata,\n            ...metadata\n        };\n        if (inherit) {\n            this.inheritableMetadata = {\n                ...this.inheritableMetadata,\n                ...metadata\n            };\n        }\n    }\n    removeMetadata(metadata) {\n        for (const key of Object.keys(metadata)){\n            delete this.metadata[key];\n            delete this.inheritableMetadata[key];\n        }\n    }\n    copy(additionalHandlers = [], inherit = true) {\n        const manager = new CallbackManager(this._parentRunId);\n        for (const handler of this.handlers){\n            const inheritable = this.inheritableHandlers.includes(handler);\n            manager.addHandler(handler, inheritable);\n        }\n        for (const tag of this.tags){\n            const inheritable = this.inheritableTags.includes(tag);\n            manager.addTags([\n                tag\n            ], inheritable);\n        }\n        for (const key of Object.keys(this.metadata)){\n            const inheritable = Object.keys(this.inheritableMetadata).includes(key);\n            manager.addMetadata({\n                [key]: this.metadata[key]\n            }, inheritable);\n        }\n        for (const handler of additionalHandlers){\n            if (// Prevent multiple copies of console_callback_handler\n            manager.handlers.filter((h)=>h.name === \"console_callback_handler\").some((h)=>h.name === handler.name)) {\n                continue;\n            }\n            manager.addHandler(handler, inherit);\n        }\n        return manager;\n    }\n    static fromHandlers(handlers) {\n        class Handler extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseCallbackHandler {\n            constructor(){\n                super();\n                Object.defineProperty(this, \"name\", {\n                    enumerable: true,\n                    configurable: true,\n                    writable: true,\n                    value: (0,uuid__WEBPACK_IMPORTED_MODULE_7__[\"default\"])()\n                });\n                Object.assign(this, handlers);\n            }\n        }\n        const manager = new this();\n        manager.addHandler(new Handler());\n        return manager;\n    }\n    static async configure(inheritableHandlers, localHandlers, inheritableTags, localTags, inheritableMetadata, localMetadata, options) {\n        let callbackManager;\n        if (inheritableHandlers || localHandlers) {\n            if (Array.isArray(inheritableHandlers) || !inheritableHandlers) {\n                callbackManager = new CallbackManager();\n                callbackManager.setHandlers(inheritableHandlers?.map(ensureHandler) ?? [], true);\n            } else {\n                callbackManager = inheritableHandlers;\n            }\n            callbackManager = callbackManager.copy(Array.isArray(localHandlers) ? localHandlers.map(ensureHandler) : localHandlers?.handlers, false);\n        }\n        const verboseEnabled = (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_4__.getEnvironmentVariable)(\"LANGCHAIN_VERBOSE\") === \"true\" || options?.verbose;\n        const tracingV2Enabled = (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_4__.getEnvironmentVariable)(\"LANGCHAIN_TRACING_V2\") === \"true\";\n        const tracingEnabled = tracingV2Enabled || ((0,_utils_env_js__WEBPACK_IMPORTED_MODULE_4__.getEnvironmentVariable)(\"LANGCHAIN_TRACING\") ?? false);\n        if (verboseEnabled || tracingEnabled) {\n            if (!callbackManager) {\n                callbackManager = new CallbackManager();\n            }\n            if (verboseEnabled && !callbackManager.handlers.some((handler)=>handler.name === _tracers_console_js__WEBPACK_IMPORTED_MODULE_1__.ConsoleCallbackHandler.prototype.name)) {\n                const consoleHandler = new _tracers_console_js__WEBPACK_IMPORTED_MODULE_1__.ConsoleCallbackHandler();\n                callbackManager.addHandler(consoleHandler, true);\n            }\n            if (tracingEnabled && !callbackManager.handlers.some((handler)=>handler.name === \"langchain_tracer\")) {\n                if (tracingV2Enabled) {\n                    callbackManager.addHandler(await (0,_tracers_initialize_js__WEBPACK_IMPORTED_MODULE_2__.getTracingV2CallbackHandler)(), true);\n                }\n            }\n        }\n        if (inheritableTags || localTags) {\n            if (callbackManager) {\n                callbackManager.addTags(inheritableTags ?? []);\n                callbackManager.addTags(localTags ?? [], false);\n            }\n        }\n        if (inheritableMetadata || localMetadata) {\n            if (callbackManager) {\n                callbackManager.addMetadata(inheritableMetadata ?? {});\n                callbackManager.addMetadata(localMetadata ?? {}, false);\n            }\n        }\n        return callbackManager;\n    }\n}\nfunction ensureHandler(handler) {\n    if (\"name\" in handler) {\n        return handler;\n    }\n    return _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseCallbackHandler.fromMethods(handler);\n}\n/**\n * @example\n * ```typescript\n * const prompt = PromptTemplate.fromTemplate(`What is the answer to {question}?`);\n *\n * // Example of using LLMChain to process a series of questions\n * const chain = new LLMChain({\n *   llm: new ChatOpenAI({ temperature: 0.9 }),\n *   prompt,\n * });\n *\n * // Process questions using the chain\n * const processQuestions = async (questions) => {\n *   for (const question of questions) {\n *     const result = await chain.call({ question });\n *     console.log(result);\n *   }\n * };\n *\n * // Example questions\n * const questions = [\n *   \"What is your name?\",\n *   \"What is your quest?\",\n *   \"What is your favorite color?\",\n * ];\n *\n * // Run the example\n * processQuestions(questions).catch(console.error);\n *\n * ```\n */ class TraceGroup {\n    constructor(groupName, options){\n        Object.defineProperty(this, \"groupName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: groupName\n        });\n        Object.defineProperty(this, \"options\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: options\n        });\n        Object.defineProperty(this, \"runManager\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n    }\n    async getTraceGroupCallbackManager(group_name, inputs, options) {\n        const cb = new _tracers_tracer_langchain_js__WEBPACK_IMPORTED_MODULE_5__.LangChainTracer(options);\n        const cm = await CallbackManager.configure([\n            cb\n        ]);\n        const runManager = await cm?.handleChainStart({\n            lc: 1,\n            type: \"not_implemented\",\n            id: [\n                \"langchain\",\n                \"callbacks\",\n                \"groups\",\n                group_name\n            ]\n        }, inputs ?? {});\n        if (!runManager) {\n            throw new Error(\"Failed to create run group callback manager.\");\n        }\n        return runManager;\n    }\n    async start(inputs) {\n        if (!this.runManager) {\n            this.runManager = await this.getTraceGroupCallbackManager(this.groupName, inputs, this.options);\n        }\n        return this.runManager.getChild();\n    }\n    async error(err) {\n        if (this.runManager) {\n            await this.runManager.handleChainError(err);\n            this.runManager = undefined;\n        }\n    }\n    async end(output) {\n        if (this.runManager) {\n            await this.runManager.handleChainEnd(output ?? {});\n            this.runManager = undefined;\n        }\n    }\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _coerceToDict(value, defaultKey) {\n    return value && !Array.isArray(value) && typeof value === \"object\" ? value : {\n        [defaultKey]: value\n    };\n}\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nasync function traceAsGroup(groupOptions, enclosedCode, ...args) {\n    const traceGroup = new TraceGroup(groupOptions.name, groupOptions);\n    const callbackManager = await traceGroup.start({\n        ...args\n    });\n    try {\n        const result = await enclosedCode(callbackManager, ...args);\n        await traceGroup.end(_coerceToDict(result, \"output\"));\n        return result;\n    } catch (err) {\n        await traceGroup.error(err);\n        throw err;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvY2FsbGJhY2tzL21hbmFnZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQW9DO0FBQ2E7QUFDYztBQUNRO0FBQ2hCO0FBQ0U7QUFDUztBQUNsQjtBQUNoRCxJQUNBLGFBQWEsR0FBR00scUVBQXNCQSxDQUFDLDRCQUE0QixVQUMvRCxhQUFhLEdBQUdBLHFFQUFzQkEsQ0FBQyxzQ0FDbkMsUUFBUTtJQUNaLGFBQWEsR0FBR0csUUFBUUMsSUFBSSxDQUFDO1FBQ3pCO1FBQ0E7UUFDQSxDQUFDLHlHQUF5RyxDQUFDO0tBQzlHLENBQUNDLElBQUksQ0FBQztBQUNYO0FBQ08sU0FBU0MsdUJBQXVCQyxHQUFHO0lBQ3RDLElBQUksQ0FBQ0EsS0FBSztRQUNOLE9BQU8sQ0FBQztJQUNaLE9BQ0ssSUFBSUMsTUFBTUMsT0FBTyxDQUFDRixRQUFRLFVBQVVBLEtBQUs7UUFDMUMsT0FBTztZQUFFRyxXQUFXSDtRQUFJO0lBQzVCLE9BQ0s7UUFDRCxPQUFPQTtJQUNYO0FBQ0o7QUFDQTs7Q0FFQyxHQUNNLE1BQU1JO0lBQ1RDLFdBQVdDLE9BQU8sRUFBRTtRQUNoQixPQUFPLElBQUksQ0FBQ0MsV0FBVyxDQUFDO1lBQUNEO1NBQVE7SUFDckM7QUFDSjtBQUNBOztDQUVDLEdBQ0QsTUFBTUU7SUFDRkMsWUFBWUMsS0FBSyxFQUFFQyxRQUFRLEVBQUVDLG1CQUFtQixFQUFFQyxJQUFJLEVBQUVDLGVBQWUsRUFBRUMsUUFBUSxFQUFFQyxtQkFBbUIsRUFBRUMsWUFBWSxDQUFFO1FBQ2xIQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFNBQVM7WUFDakNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU9iO1FBQ1g7UUFDQVEsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxZQUFZO1lBQ3BDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPWjtRQUNYO1FBQ0FPLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsdUJBQXVCO1lBQy9DQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPWDtRQUNYO1FBQ0FNLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtZQUNoQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBT1Y7UUFDWDtRQUNBSyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG1CQUFtQjtZQUMzQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBT1Q7UUFDWDtRQUNBSSxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFlBQVk7WUFDcENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU9SO1FBQ1g7UUFDQUcsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSx1QkFBdUI7WUFDL0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU9QO1FBQ1g7UUFDQUUsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU9OO1FBQ1g7SUFDSjtJQUNBLE1BQU1PLFdBQVdDLElBQUksRUFBRTtRQUNuQixNQUFNQyxRQUFRQyxHQUFHLENBQUMsSUFBSSxDQUFDaEIsUUFBUSxDQUFDaUIsR0FBRyxDQUFDLENBQUN0QixVQUFZWCw2REFBZUEsQ0FBQztnQkFDN0QsSUFBSTtvQkFDQSxNQUFNVyxRQUFRa0IsVUFBVSxHQUFHQyxNQUFNLElBQUksQ0FBQ2YsS0FBSyxFQUFFLElBQUksQ0FBQ08sWUFBWSxFQUFFLElBQUksQ0FBQ0osSUFBSTtnQkFDN0UsRUFDQSxPQUFPZ0IsS0FBSztvQkFDUmpDLFFBQVFrQyxLQUFLLENBQUMsQ0FBQyxpQkFBaUIsRUFBRXhCLFFBQVFHLFdBQVcsQ0FBQ3NCLElBQUksQ0FBQyxjQUFjLEVBQUVGLElBQUksQ0FBQztnQkFDcEY7WUFDSixHQUFHdkIsUUFBUTBCLGFBQWE7SUFDNUI7QUFDSjtBQUNBOztDQUVDLEdBQ00sTUFBTUMsdUNBQXVDekI7SUFDaEQwQixTQUFTQyxHQUFHLEVBQUU7UUFDVixtRUFBbUU7UUFDbkUsTUFBTUMsVUFBVSxJQUFJQyxnQkFBZ0IsSUFBSSxDQUFDM0IsS0FBSztRQUM5QzBCLFFBQVE3QixXQUFXLENBQUMsSUFBSSxDQUFDSyxtQkFBbUI7UUFDNUN3QixRQUFRRSxPQUFPLENBQUMsSUFBSSxDQUFDeEIsZUFBZTtRQUNwQ3NCLFFBQVFHLFdBQVcsQ0FBQyxJQUFJLENBQUN2QixtQkFBbUI7UUFDNUMsSUFBSW1CLEtBQUs7WUFDTEMsUUFBUUUsT0FBTyxDQUFDO2dCQUFDSDthQUFJLEVBQUU7UUFDM0I7UUFDQSxPQUFPQztJQUNYO0lBQ0EsTUFBTUksbUJBQW1CQyxTQUFTLEVBQUU7UUFDaEMsTUFBTWYsUUFBUUMsR0FBRyxDQUFDLElBQUksQ0FBQ2hCLFFBQVEsQ0FBQ2lCLEdBQUcsQ0FBQyxDQUFDdEIsVUFBWVgsNkRBQWVBLENBQUM7Z0JBQzdELElBQUksQ0FBQ1csUUFBUW9DLGVBQWUsRUFBRTtvQkFDMUIsSUFBSTt3QkFDQSxNQUFNcEMsUUFBUWtDLGtCQUFrQixHQUFHQyxXQUFXLElBQUksQ0FBQy9CLEtBQUssRUFBRSxJQUFJLENBQUNPLFlBQVksRUFBRSxJQUFJLENBQUNKLElBQUk7b0JBQzFGLEVBQ0EsT0FBT2dCLEtBQUs7d0JBQ1JqQyxRQUFRa0MsS0FBSyxDQUFDLENBQUMsaUJBQWlCLEVBQUV4QixRQUFRRyxXQUFXLENBQUNzQixJQUFJLENBQUMsaUJBQWlCLENBQUM7b0JBQ2pGO2dCQUNKO1lBQ0osR0FBR3pCLFFBQVEwQixhQUFhO0lBQzVCO0lBQ0EsTUFBTVcscUJBQXFCZCxHQUFHLEVBQUU7UUFDNUIsTUFBTUgsUUFBUUMsR0FBRyxDQUFDLElBQUksQ0FBQ2hCLFFBQVEsQ0FBQ2lCLEdBQUcsQ0FBQyxDQUFDdEIsVUFBWVgsNkRBQWVBLENBQUM7Z0JBQzdELElBQUksQ0FBQ1csUUFBUW9DLGVBQWUsRUFBRTtvQkFDMUIsSUFBSTt3QkFDQSxNQUFNcEMsUUFBUXFDLG9CQUFvQixHQUFHZCxLQUFLLElBQUksQ0FBQ25CLEtBQUssRUFBRSxJQUFJLENBQUNPLFlBQVksRUFBRSxJQUFJLENBQUNKLElBQUk7b0JBQ3RGLEVBQ0EsT0FBT2lCLE9BQU87d0JBQ1ZsQyxRQUFRa0MsS0FBSyxDQUFDLENBQUMsaUJBQWlCLEVBQUV4QixRQUFRRyxXQUFXLENBQUNzQixJQUFJLENBQUMsd0JBQXdCLEVBQUVELE1BQU0sQ0FBQztvQkFDaEc7Z0JBQ0o7WUFDSixHQUFHeEIsUUFBUTBCLGFBQWE7SUFDNUI7QUFDSjtBQUNPLE1BQU1ZLGlDQUFpQ3BDO0lBQzFDLE1BQU1xQyxrQkFBa0JDLEtBQUssRUFBRUMsR0FBRyxFQUFFQyxNQUFNLEVBQUUvQixZQUFZLEVBQUVnQyxLQUFLLEVBQUVDLE1BQU0sRUFBRTtRQUNyRSxNQUFNeEIsUUFBUUMsR0FBRyxDQUFDLElBQUksQ0FBQ2hCLFFBQVEsQ0FBQ2lCLEdBQUcsQ0FBQyxDQUFDdEIsVUFBWVgsNkRBQWVBLENBQUM7Z0JBQzdELElBQUksQ0FBQ1csUUFBUTZDLFNBQVMsRUFBRTtvQkFDcEIsSUFBSTt3QkFDQSxNQUFNN0MsUUFBUXVDLGlCQUFpQixHQUFHQyxPQUFPQyxPQUFPOzRCQUFFSyxRQUFROzRCQUFHQyxZQUFZO3dCQUFFLEdBQUcsSUFBSSxDQUFDM0MsS0FBSyxFQUFFLElBQUksQ0FBQ08sWUFBWSxFQUFFLElBQUksQ0FBQ0osSUFBSSxFQUFFcUM7b0JBQzVILEVBQ0EsT0FBT3JCLEtBQUs7d0JBQ1JqQyxRQUFRa0MsS0FBSyxDQUFDLENBQUMsaUJBQWlCLEVBQUV4QixRQUFRRyxXQUFXLENBQUNzQixJQUFJLENBQUMscUJBQXFCLEVBQUVGLElBQUksQ0FBQztvQkFDM0Y7Z0JBQ0o7WUFDSixHQUFHdkIsUUFBUTBCLGFBQWE7SUFDNUI7SUFDQSxNQUFNc0IsZUFBZXpCLEdBQUcsRUFBRTtRQUN0QixNQUFNSCxRQUFRQyxHQUFHLENBQUMsSUFBSSxDQUFDaEIsUUFBUSxDQUFDaUIsR0FBRyxDQUFDLENBQUN0QixVQUFZWCw2REFBZUEsQ0FBQztnQkFDN0QsSUFBSSxDQUFDVyxRQUFRNkMsU0FBUyxFQUFFO29CQUNwQixJQUFJO3dCQUNBLE1BQU03QyxRQUFRZ0QsY0FBYyxHQUFHekIsS0FBSyxJQUFJLENBQUNuQixLQUFLLEVBQUUsSUFBSSxDQUFDTyxZQUFZLEVBQUUsSUFBSSxDQUFDSixJQUFJO29CQUNoRixFQUNBLE9BQU9nQixLQUFLO3dCQUNSakMsUUFBUWtDLEtBQUssQ0FBQyxDQUFDLGlCQUFpQixFQUFFeEIsUUFBUUcsV0FBVyxDQUFDc0IsSUFBSSxDQUFDLGtCQUFrQixFQUFFRixJQUFJLENBQUM7b0JBQ3hGO2dCQUNKO1lBQ0osR0FBR3ZCLFFBQVEwQixhQUFhO0lBQzVCO0lBQ0EsTUFBTXVCLGFBQWFDLE1BQU0sRUFBRTtRQUN2QixNQUFNOUIsUUFBUUMsR0FBRyxDQUFDLElBQUksQ0FBQ2hCLFFBQVEsQ0FBQ2lCLEdBQUcsQ0FBQyxDQUFDdEIsVUFBWVgsNkRBQWVBLENBQUM7Z0JBQzdELElBQUksQ0FBQ1csUUFBUTZDLFNBQVMsRUFBRTtvQkFDcEIsSUFBSTt3QkFDQSxNQUFNN0MsUUFBUWlELFlBQVksR0FBR0MsUUFBUSxJQUFJLENBQUM5QyxLQUFLLEVBQUUsSUFBSSxDQUFDTyxZQUFZLEVBQUUsSUFBSSxDQUFDSixJQUFJO29CQUNqRixFQUNBLE9BQU9nQixLQUFLO3dCQUNSakMsUUFBUWtDLEtBQUssQ0FBQyxDQUFDLGlCQUFpQixFQUFFeEIsUUFBUUcsV0FBVyxDQUFDc0IsSUFBSSxDQUFDLGdCQUFnQixFQUFFRixJQUFJLENBQUM7b0JBQ3RGO2dCQUNKO1lBQ0osR0FBR3ZCLFFBQVEwQixhQUFhO0lBQzVCO0FBQ0o7QUFDTyxNQUFNeUIsbUNBQW1DakQ7SUFDNUMwQixTQUFTQyxHQUFHLEVBQUU7UUFDVixtRUFBbUU7UUFDbkUsTUFBTUMsVUFBVSxJQUFJQyxnQkFBZ0IsSUFBSSxDQUFDM0IsS0FBSztRQUM5QzBCLFFBQVE3QixXQUFXLENBQUMsSUFBSSxDQUFDSyxtQkFBbUI7UUFDNUN3QixRQUFRRSxPQUFPLENBQUMsSUFBSSxDQUFDeEIsZUFBZTtRQUNwQ3NCLFFBQVFHLFdBQVcsQ0FBQyxJQUFJLENBQUN2QixtQkFBbUI7UUFDNUMsSUFBSW1CLEtBQUs7WUFDTEMsUUFBUUUsT0FBTyxDQUFDO2dCQUFDSDthQUFJLEVBQUU7UUFDM0I7UUFDQSxPQUFPQztJQUNYO0lBQ0EsTUFBTXNCLGlCQUFpQjdCLEdBQUcsRUFBRW1CLE1BQU0sRUFBRS9CLFlBQVksRUFBRWdDLEtBQUssRUFBRVUsTUFBTSxFQUFFO1FBQzdELE1BQU1qQyxRQUFRQyxHQUFHLENBQUMsSUFBSSxDQUFDaEIsUUFBUSxDQUFDaUIsR0FBRyxDQUFDLENBQUN0QixVQUFZWCw2REFBZUEsQ0FBQztnQkFDN0QsSUFBSSxDQUFDVyxRQUFRc0QsV0FBVyxFQUFFO29CQUN0QixJQUFJO3dCQUNBLE1BQU10RCxRQUFRb0QsZ0JBQWdCLEdBQUc3QixLQUFLLElBQUksQ0FBQ25CLEtBQUssRUFBRSxJQUFJLENBQUNPLFlBQVksRUFBRSxJQUFJLENBQUNKLElBQUksRUFBRThDO29CQUNwRixFQUNBLE9BQU85QixLQUFLO3dCQUNSakMsUUFBUWtDLEtBQUssQ0FBQyxDQUFDLGlCQUFpQixFQUFFeEIsUUFBUUcsV0FBVyxDQUFDc0IsSUFBSSxDQUFDLG9CQUFvQixFQUFFRixJQUFJLENBQUM7b0JBQzFGO2dCQUNKO1lBQ0osR0FBR3ZCLFFBQVEwQixhQUFhO0lBQzVCO0lBQ0EsTUFBTTZCLGVBQWVMLE1BQU0sRUFBRVIsTUFBTSxFQUFFL0IsWUFBWSxFQUFFZ0MsS0FBSyxFQUFFVSxNQUFNLEVBQUU7UUFDOUQsTUFBTWpDLFFBQVFDLEdBQUcsQ0FBQyxJQUFJLENBQUNoQixRQUFRLENBQUNpQixHQUFHLENBQUMsQ0FBQ3RCLFVBQVlYLDZEQUFlQSxDQUFDO2dCQUM3RCxJQUFJLENBQUNXLFFBQVFzRCxXQUFXLEVBQUU7b0JBQ3RCLElBQUk7d0JBQ0EsTUFBTXRELFFBQVF1RCxjQUFjLEdBQUdMLFFBQVEsSUFBSSxDQUFDOUMsS0FBSyxFQUFFLElBQUksQ0FBQ08sWUFBWSxFQUFFLElBQUksQ0FBQ0osSUFBSSxFQUFFOEM7b0JBQ3JGLEVBQ0EsT0FBTzlCLEtBQUs7d0JBQ1JqQyxRQUFRa0MsS0FBSyxDQUFDLENBQUMsaUJBQWlCLEVBQUV4QixRQUFRRyxXQUFXLENBQUNzQixJQUFJLENBQUMsa0JBQWtCLEVBQUVGLElBQUksQ0FBQztvQkFDeEY7Z0JBQ0o7WUFDSixHQUFHdkIsUUFBUTBCLGFBQWE7SUFDNUI7SUFDQSxNQUFNOEIsa0JBQWtCQyxNQUFNLEVBQUU7UUFDNUIsTUFBTXJDLFFBQVFDLEdBQUcsQ0FBQyxJQUFJLENBQUNoQixRQUFRLENBQUNpQixHQUFHLENBQUMsQ0FBQ3RCLFVBQVlYLDZEQUFlQSxDQUFDO2dCQUM3RCxJQUFJLENBQUNXLFFBQVEwRCxXQUFXLEVBQUU7b0JBQ3RCLElBQUk7d0JBQ0EsTUFBTTFELFFBQVF3RCxpQkFBaUIsR0FBR0MsUUFBUSxJQUFJLENBQUNyRCxLQUFLLEVBQUUsSUFBSSxDQUFDTyxZQUFZLEVBQUUsSUFBSSxDQUFDSixJQUFJO29CQUN0RixFQUNBLE9BQU9nQixLQUFLO3dCQUNSakMsUUFBUWtDLEtBQUssQ0FBQyxDQUFDLGlCQUFpQixFQUFFeEIsUUFBUUcsV0FBVyxDQUFDc0IsSUFBSSxDQUFDLHFCQUFxQixFQUFFRixJQUFJLENBQUM7b0JBQzNGO2dCQUNKO1lBQ0osR0FBR3ZCLFFBQVEwQixhQUFhO0lBQzVCO0lBQ0EsTUFBTWlDLGVBQWVGLE1BQU0sRUFBRTtRQUN6QixNQUFNckMsUUFBUUMsR0FBRyxDQUFDLElBQUksQ0FBQ2hCLFFBQVEsQ0FBQ2lCLEdBQUcsQ0FBQyxDQUFDdEIsVUFBWVgsNkRBQWVBLENBQUM7Z0JBQzdELElBQUksQ0FBQ1csUUFBUTBELFdBQVcsRUFBRTtvQkFDdEIsSUFBSTt3QkFDQSxNQUFNMUQsUUFBUTJELGNBQWMsR0FBR0YsUUFBUSxJQUFJLENBQUNyRCxLQUFLLEVBQUUsSUFBSSxDQUFDTyxZQUFZLEVBQUUsSUFBSSxDQUFDSixJQUFJO29CQUNuRixFQUNBLE9BQU9nQixLQUFLO3dCQUNSakMsUUFBUWtDLEtBQUssQ0FBQyxDQUFDLGlCQUFpQixFQUFFeEIsUUFBUUcsV0FBVyxDQUFDc0IsSUFBSSxDQUFDLGtCQUFrQixFQUFFRixJQUFJLENBQUM7b0JBQ3hGO2dCQUNKO1lBQ0osR0FBR3ZCLFFBQVEwQixhQUFhO0lBQzVCO0FBQ0o7QUFDTyxNQUFNa0Msa0NBQWtDMUQ7SUFDM0MwQixTQUFTQyxHQUFHLEVBQUU7UUFDVixtRUFBbUU7UUFDbkUsTUFBTUMsVUFBVSxJQUFJQyxnQkFBZ0IsSUFBSSxDQUFDM0IsS0FBSztRQUM5QzBCLFFBQVE3QixXQUFXLENBQUMsSUFBSSxDQUFDSyxtQkFBbUI7UUFDNUN3QixRQUFRRSxPQUFPLENBQUMsSUFBSSxDQUFDeEIsZUFBZTtRQUNwQ3NCLFFBQVFHLFdBQVcsQ0FBQyxJQUFJLENBQUN2QixtQkFBbUI7UUFDNUMsSUFBSW1CLEtBQUs7WUFDTEMsUUFBUUUsT0FBTyxDQUFDO2dCQUFDSDthQUFJLEVBQUU7UUFDM0I7UUFDQSxPQUFPQztJQUNYO0lBQ0EsTUFBTStCLGdCQUFnQnRDLEdBQUcsRUFBRTtRQUN2QixNQUFNSCxRQUFRQyxHQUFHLENBQUMsSUFBSSxDQUFDaEIsUUFBUSxDQUFDaUIsR0FBRyxDQUFDLENBQUN0QixVQUFZWCw2REFBZUEsQ0FBQztnQkFDN0QsSUFBSSxDQUFDVyxRQUFRMEQsV0FBVyxFQUFFO29CQUN0QixJQUFJO3dCQUNBLE1BQU0xRCxRQUFRNkQsZUFBZSxHQUFHdEMsS0FBSyxJQUFJLENBQUNuQixLQUFLLEVBQUUsSUFBSSxDQUFDTyxZQUFZLEVBQUUsSUFBSSxDQUFDSixJQUFJO29CQUNqRixFQUNBLE9BQU9nQixLQUFLO3dCQUNSakMsUUFBUWtDLEtBQUssQ0FBQyxDQUFDLGlCQUFpQixFQUFFeEIsUUFBUUcsV0FBVyxDQUFDc0IsSUFBSSxDQUFDLG1CQUFtQixFQUFFRixJQUFJLENBQUM7b0JBQ3pGO2dCQUNKO1lBQ0osR0FBR3ZCLFFBQVEwQixhQUFhO0lBQzVCO0lBQ0EsTUFBTW9DLGNBQWNaLE1BQU0sRUFBRTtRQUN4QixNQUFNOUIsUUFBUUMsR0FBRyxDQUFDLElBQUksQ0FBQ2hCLFFBQVEsQ0FBQ2lCLEdBQUcsQ0FBQyxDQUFDdEIsVUFBWVgsNkRBQWVBLENBQUM7Z0JBQzdELElBQUksQ0FBQ1csUUFBUTBELFdBQVcsRUFBRTtvQkFDdEIsSUFBSTt3QkFDQSxNQUFNMUQsUUFBUThELGFBQWEsR0FBR1osUUFBUSxJQUFJLENBQUM5QyxLQUFLLEVBQUUsSUFBSSxDQUFDTyxZQUFZLEVBQUUsSUFBSSxDQUFDSixJQUFJO29CQUNsRixFQUNBLE9BQU9nQixLQUFLO3dCQUNSakMsUUFBUWtDLEtBQUssQ0FBQyxDQUFDLGlCQUFpQixFQUFFeEIsUUFBUUcsV0FBVyxDQUFDc0IsSUFBSSxDQUFDLGlCQUFpQixFQUFFRixJQUFJLENBQUM7b0JBQ3ZGO2dCQUNKO1lBQ0osR0FBR3ZCLFFBQVEwQixhQUFhO0lBQzVCO0FBQ0o7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0FpQkMsR0FDTSxNQUFNSyx3QkFBd0JqQztJQUNqQ0ssWUFBWTRELFdBQVcsRUFBRUMsT0FBTyxDQUFFO1FBQzlCLEtBQUs7UUFDTHBELE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxFQUFFO1FBQ2I7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSx1QkFBdUI7WUFDL0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sRUFBRTtRQUNiO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtZQUNoQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxFQUFFO1FBQ2I7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxtQkFBbUI7WUFDM0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sRUFBRTtRQUNiO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxDQUFDO1FBQ1o7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSx1QkFBdUI7WUFDL0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sQ0FBQztRQUNaO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtZQUNoQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNaLFFBQVEsR0FBRzJELFNBQVMzRCxZQUFZLElBQUksQ0FBQ0EsUUFBUTtRQUNsRCxJQUFJLENBQUNDLG1CQUFtQixHQUNwQjBELFNBQVMxRCx1QkFBdUIsSUFBSSxDQUFDQSxtQkFBbUI7UUFDNUQsSUFBSSxDQUFDQyxJQUFJLEdBQUd5RCxTQUFTekQsUUFBUSxJQUFJLENBQUNBLElBQUk7UUFDdEMsSUFBSSxDQUFDQyxlQUFlLEdBQUd3RCxTQUFTeEQsbUJBQW1CLElBQUksQ0FBQ0EsZUFBZTtRQUN2RSxJQUFJLENBQUNDLFFBQVEsR0FBR3VELFNBQVN2RCxZQUFZLElBQUksQ0FBQ0EsUUFBUTtRQUNsRCxJQUFJLENBQUNDLG1CQUFtQixHQUNwQnNELFNBQVN0RCx1QkFBdUIsSUFBSSxDQUFDQSxtQkFBbUI7UUFDNUQsSUFBSSxDQUFDQyxZQUFZLEdBQUdvRDtJQUN4QjtJQUNBOzs7O0tBSUMsR0FDREUsaUJBQWlCO1FBQ2IsT0FBTyxJQUFJLENBQUN0RCxZQUFZO0lBQzVCO0lBQ0EsTUFBTXVELGVBQWVDLEdBQUcsRUFBRUMsT0FBTyxFQUFFMUIsU0FBUzJCLFNBQVMsRUFBRTFELGVBQWUwRCxTQUFTLEVBQUVDLGNBQWNELFNBQVMsRUFBRTFCLFFBQVEwQixTQUFTLEVBQUVFLFlBQVlGLFNBQVMsRUFBRUcsVUFBVUgsU0FBUyxFQUFFO1FBQ3JLLE9BQU9qRCxRQUFRQyxHQUFHLENBQUMrQyxRQUFROUMsR0FBRyxDQUFDLE9BQU93QjtZQUNsQyxNQUFNMUMsUUFBUXRCLGdEQUFNQTtZQUNwQixNQUFNc0MsUUFBUUMsR0FBRyxDQUFDLElBQUksQ0FBQ2hCLFFBQVEsQ0FBQ2lCLEdBQUcsQ0FBQyxDQUFDdEIsVUFBWVgsNkRBQWVBLENBQUM7b0JBQzdELElBQUksQ0FBQ1csUUFBUTZDLFNBQVMsRUFBRTt3QkFDcEIsSUFBSTs0QkFDQSxNQUFNN0MsUUFBUWtFLGNBQWMsR0FBR0MsS0FBSztnQ0FBQ3JCOzZCQUFPLEVBQUUxQyxPQUFPLElBQUksQ0FBQ08sWUFBWSxFQUFFMkQsYUFBYSxJQUFJLENBQUMvRCxJQUFJLEVBQUUsSUFBSSxDQUFDRSxRQUFRLEVBQUUrRDt3QkFDbkgsRUFDQSxPQUFPakQsS0FBSzs0QkFDUmpDLFFBQVFrQyxLQUFLLENBQUMsQ0FBQyxpQkFBaUIsRUFBRXhCLFFBQVFHLFdBQVcsQ0FBQ3NCLElBQUksQ0FBQyxrQkFBa0IsRUFBRUYsSUFBSSxDQUFDO3dCQUN4RjtvQkFDSjtnQkFDSixHQUFHdkIsUUFBUTBCLGFBQWE7WUFDeEIsT0FBTyxJQUFJWSx5QkFBeUJsQyxPQUFPLElBQUksQ0FBQ0MsUUFBUSxFQUFFLElBQUksQ0FBQ0MsbUJBQW1CLEVBQUUsSUFBSSxDQUFDQyxJQUFJLEVBQUUsSUFBSSxDQUFDQyxlQUFlLEVBQUUsSUFBSSxDQUFDQyxRQUFRLEVBQUUsSUFBSSxDQUFDQyxtQkFBbUIsRUFBRSxJQUFJLENBQUNDLFlBQVk7UUFDbkw7SUFDSjtJQUNBLE1BQU04RCxxQkFBcUJOLEdBQUcsRUFBRU8sUUFBUSxFQUFFaEMsU0FBUzJCLFNBQVMsRUFBRTFELGVBQWUwRCxTQUFTLEVBQUVDLGNBQWNELFNBQVMsRUFBRTFCLFFBQVEwQixTQUFTLEVBQUVFLFlBQVlGLFNBQVMsRUFBRUcsVUFBVUgsU0FBUyxFQUFFO1FBQzVLLE9BQU9qRCxRQUFRQyxHQUFHLENBQUNxRCxTQUFTcEQsR0FBRyxDQUFDLE9BQU9xRDtZQUNuQyxNQUFNdkUsUUFBUXRCLGdEQUFNQTtZQUNwQixNQUFNc0MsUUFBUUMsR0FBRyxDQUFDLElBQUksQ0FBQ2hCLFFBQVEsQ0FBQ2lCLEdBQUcsQ0FBQyxDQUFDdEIsVUFBWVgsNkRBQWVBLENBQUM7b0JBQzdELElBQUksQ0FBQ1csUUFBUTZDLFNBQVMsRUFBRTt3QkFDcEIsSUFBSTs0QkFDQSxJQUFJN0MsUUFBUXlFLG9CQUFvQixFQUFFO2dDQUM5QixNQUFNekUsUUFBUXlFLG9CQUFvQixHQUFHTixLQUFLO29DQUFDUTtpQ0FBYSxFQUFFdkUsT0FBTyxJQUFJLENBQUNPLFlBQVksRUFBRTJELGFBQWEsSUFBSSxDQUFDL0QsSUFBSSxFQUFFLElBQUksQ0FBQ0UsUUFBUSxFQUFFK0Q7NEJBQy9ILE9BQ0ssSUFBSXhFLFFBQVFrRSxjQUFjLEVBQUU7Z0NBQzdCLE1BQU1VLGdCQUFnQjFGLG1FQUFlQSxDQUFDeUY7Z0NBQ3RDLE1BQU0zRSxRQUFRa0UsY0FBYyxHQUFHQyxLQUFLO29DQUFDUztpQ0FBYyxFQUFFeEUsT0FBTyxJQUFJLENBQUNPLFlBQVksRUFBRTJELGFBQWEsSUFBSSxDQUFDL0QsSUFBSSxFQUFFLElBQUksQ0FBQ0UsUUFBUSxFQUFFK0Q7NEJBQzFIO3dCQUNKLEVBQ0EsT0FBT2pELEtBQUs7NEJBQ1JqQyxRQUFRa0MsS0FBSyxDQUFDLENBQUMsaUJBQWlCLEVBQUV4QixRQUFRRyxXQUFXLENBQUNzQixJQUFJLENBQUMsa0JBQWtCLEVBQUVGLElBQUksQ0FBQzt3QkFDeEY7b0JBQ0o7Z0JBQ0osR0FBR3ZCLFFBQVEwQixhQUFhO1lBQ3hCLE9BQU8sSUFBSVkseUJBQXlCbEMsT0FBTyxJQUFJLENBQUNDLFFBQVEsRUFBRSxJQUFJLENBQUNDLG1CQUFtQixFQUFFLElBQUksQ0FBQ0MsSUFBSSxFQUFFLElBQUksQ0FBQ0MsZUFBZSxFQUFFLElBQUksQ0FBQ0MsUUFBUSxFQUFFLElBQUksQ0FBQ0MsbUJBQW1CLEVBQUUsSUFBSSxDQUFDQyxZQUFZO1FBQ25MO0lBQ0o7SUFDQSxNQUFNa0UsaUJBQWlCQyxLQUFLLEVBQUVDLE1BQU0sRUFBRTNFLFFBQVF0QixnREFBTUEsRUFBRSxFQUFFa0csVUFBVVgsU0FBUyxFQUFFMUIsUUFBUTBCLFNBQVMsRUFBRUUsWUFBWUYsU0FBUyxFQUFFRyxVQUFVSCxTQUFTLEVBQUU7UUFDeEksTUFBTWpELFFBQVFDLEdBQUcsQ0FBQyxJQUFJLENBQUNoQixRQUFRLENBQUNpQixHQUFHLENBQUMsQ0FBQ3RCLFVBQVlYLDZEQUFlQSxDQUFDO2dCQUM3RCxJQUFJLENBQUNXLFFBQVFzRCxXQUFXLEVBQUU7b0JBQ3RCLElBQUk7d0JBQ0EsTUFBTXRELFFBQVE2RSxnQkFBZ0IsR0FBR0MsT0FBT0MsUUFBUTNFLE9BQU8sSUFBSSxDQUFDTyxZQUFZLEVBQUUsSUFBSSxDQUFDSixJQUFJLEVBQUUsSUFBSSxDQUFDRSxRQUFRLEVBQUV1RSxTQUFTUjtvQkFDakgsRUFDQSxPQUFPakQsS0FBSzt3QkFDUmpDLFFBQVFrQyxLQUFLLENBQUMsQ0FBQyxpQkFBaUIsRUFBRXhCLFFBQVFHLFdBQVcsQ0FBQ3NCLElBQUksQ0FBQyxvQkFBb0IsRUFBRUYsSUFBSSxDQUFDO29CQUMxRjtnQkFDSjtZQUNKLEdBQUd2QixRQUFRMEIsYUFBYTtRQUN4QixPQUFPLElBQUl5QiwyQkFBMkIvQyxPQUFPLElBQUksQ0FBQ0MsUUFBUSxFQUFFLElBQUksQ0FBQ0MsbUJBQW1CLEVBQUUsSUFBSSxDQUFDQyxJQUFJLEVBQUUsSUFBSSxDQUFDQyxlQUFlLEVBQUUsSUFBSSxDQUFDQyxRQUFRLEVBQUUsSUFBSSxDQUFDQyxtQkFBbUIsRUFBRSxJQUFJLENBQUNDLFlBQVk7SUFDckw7SUFDQSxNQUFNc0UsZ0JBQWdCQyxJQUFJLEVBQUVDLEtBQUssRUFBRS9FLFFBQVF0QixnREFBTUEsRUFBRSxFQUFFNkIsZUFBZTBELFNBQVMsRUFBRTFCLFFBQVEwQixTQUFTLEVBQUVFLFlBQVlGLFNBQVMsRUFBRUcsVUFBVUgsU0FBUyxFQUFFO1FBQzFJLE1BQU1qRCxRQUFRQyxHQUFHLENBQUMsSUFBSSxDQUFDaEIsUUFBUSxDQUFDaUIsR0FBRyxDQUFDLENBQUN0QixVQUFZWCw2REFBZUEsQ0FBQztnQkFDN0QsSUFBSSxDQUFDVyxRQUFRMEQsV0FBVyxFQUFFO29CQUN0QixJQUFJO3dCQUNBLE1BQU0xRCxRQUFRaUYsZUFBZSxHQUFHQyxNQUFNQyxPQUFPL0UsT0FBTyxJQUFJLENBQUNPLFlBQVksRUFBRSxJQUFJLENBQUNKLElBQUksRUFBRSxJQUFJLENBQUNFLFFBQVEsRUFBRStEO29CQUNyRyxFQUNBLE9BQU9qRCxLQUFLO3dCQUNSakMsUUFBUWtDLEtBQUssQ0FBQyxDQUFDLGlCQUFpQixFQUFFeEIsUUFBUUcsV0FBVyxDQUFDc0IsSUFBSSxDQUFDLG1CQUFtQixFQUFFRixJQUFJLENBQUM7b0JBQ3pGO2dCQUNKO1lBQ0osR0FBR3ZCLFFBQVEwQixhQUFhO1FBQ3hCLE9BQU8sSUFBSWtDLDBCQUEwQnhELE9BQU8sSUFBSSxDQUFDQyxRQUFRLEVBQUUsSUFBSSxDQUFDQyxtQkFBbUIsRUFBRSxJQUFJLENBQUNDLElBQUksRUFBRSxJQUFJLENBQUNDLGVBQWUsRUFBRSxJQUFJLENBQUNDLFFBQVEsRUFBRSxJQUFJLENBQUNDLG1CQUFtQixFQUFFLElBQUksQ0FBQ0MsWUFBWTtJQUNwTDtJQUNBLE1BQU15RSxxQkFBcUJDLFNBQVMsRUFBRUMsS0FBSyxFQUFFbEYsUUFBUXRCLGdEQUFNQSxFQUFFLEVBQUU2QixlQUFlMEQsU0FBUyxFQUFFMUIsUUFBUTBCLFNBQVMsRUFBRUUsWUFBWUYsU0FBUyxFQUFFRyxVQUFVSCxTQUFTLEVBQUU7UUFDcEosTUFBTWpELFFBQVFDLEdBQUcsQ0FBQyxJQUFJLENBQUNoQixRQUFRLENBQUNpQixHQUFHLENBQUMsQ0FBQ3RCLFVBQVlYLDZEQUFlQSxDQUFDO2dCQUM3RCxJQUFJLENBQUNXLFFBQVFvQyxlQUFlLEVBQUU7b0JBQzFCLElBQUk7d0JBQ0EsTUFBTXBDLFFBQVFvRixvQkFBb0IsR0FBR0MsV0FBV0MsT0FBT2xGLE9BQU8sSUFBSSxDQUFDTyxZQUFZLEVBQUUsSUFBSSxDQUFDSixJQUFJLEVBQUUsSUFBSSxDQUFDRSxRQUFRLEVBQUUrRDtvQkFDL0csRUFDQSxPQUFPakQsS0FBSzt3QkFDUmpDLFFBQVFrQyxLQUFLLENBQUMsQ0FBQyxpQkFBaUIsRUFBRXhCLFFBQVFHLFdBQVcsQ0FBQ3NCLElBQUksQ0FBQyx3QkFBd0IsRUFBRUYsSUFBSSxDQUFDO29CQUM5RjtnQkFDSjtZQUNKLEdBQUd2QixRQUFRMEIsYUFBYTtRQUN4QixPQUFPLElBQUlDLCtCQUErQnZCLE9BQU8sSUFBSSxDQUFDQyxRQUFRLEVBQUUsSUFBSSxDQUFDQyxtQkFBbUIsRUFBRSxJQUFJLENBQUNDLElBQUksRUFBRSxJQUFJLENBQUNDLGVBQWUsRUFBRSxJQUFJLENBQUNDLFFBQVEsRUFBRSxJQUFJLENBQUNDLG1CQUFtQixFQUFFLElBQUksQ0FBQ0MsWUFBWTtJQUN6TDtJQUNBNEUsV0FBV3ZGLE9BQU8sRUFBRXdGLFVBQVUsSUFBSSxFQUFFO1FBQ2hDLElBQUksQ0FBQ25GLFFBQVEsQ0FBQ29GLElBQUksQ0FBQ3pGO1FBQ25CLElBQUl3RixTQUFTO1lBQ1QsSUFBSSxDQUFDbEYsbUJBQW1CLENBQUNtRixJQUFJLENBQUN6RjtRQUNsQztJQUNKO0lBQ0EwRixjQUFjMUYsT0FBTyxFQUFFO1FBQ25CLElBQUksQ0FBQ0ssUUFBUSxHQUFHLElBQUksQ0FBQ0EsUUFBUSxDQUFDc0YsTUFBTSxDQUFDLENBQUNDLFdBQWFBLGFBQWE1RjtRQUNoRSxJQUFJLENBQUNNLG1CQUFtQixHQUFHLElBQUksQ0FBQ0EsbUJBQW1CLENBQUNxRixNQUFNLENBQUMsQ0FBQ0MsV0FBYUEsYUFBYTVGO0lBQzFGO0lBQ0FDLFlBQVlJLFFBQVEsRUFBRW1GLFVBQVUsSUFBSSxFQUFFO1FBQ2xDLElBQUksQ0FBQ25GLFFBQVEsR0FBRyxFQUFFO1FBQ2xCLElBQUksQ0FBQ0MsbUJBQW1CLEdBQUcsRUFBRTtRQUM3QixLQUFLLE1BQU1OLFdBQVdLLFNBQVU7WUFDNUIsSUFBSSxDQUFDa0YsVUFBVSxDQUFDdkYsU0FBU3dGO1FBQzdCO0lBQ0o7SUFDQXhELFFBQVF6QixJQUFJLEVBQUVpRixVQUFVLElBQUksRUFBRTtRQUMxQixJQUFJLENBQUNLLFVBQVUsQ0FBQ3RGLE9BQU8sb0JBQW9CO1FBQzNDLElBQUksQ0FBQ0EsSUFBSSxDQUFDa0YsSUFBSSxJQUFJbEY7UUFDbEIsSUFBSWlGLFNBQVM7WUFDVCxJQUFJLENBQUNoRixlQUFlLENBQUNpRixJQUFJLElBQUlsRjtRQUNqQztJQUNKO0lBQ0FzRixXQUFXdEYsSUFBSSxFQUFFO1FBQ2IsSUFBSSxDQUFDQSxJQUFJLEdBQUcsSUFBSSxDQUFDQSxJQUFJLENBQUNvRixNQUFNLENBQUMsQ0FBQzlELE1BQVEsQ0FBQ3RCLEtBQUt1RixRQUFRLENBQUNqRTtRQUNyRCxJQUFJLENBQUNyQixlQUFlLEdBQUcsSUFBSSxDQUFDQSxlQUFlLENBQUNtRixNQUFNLENBQUMsQ0FBQzlELE1BQVEsQ0FBQ3RCLEtBQUt1RixRQUFRLENBQUNqRTtJQUMvRTtJQUNBSSxZQUFZeEIsUUFBUSxFQUFFK0UsVUFBVSxJQUFJLEVBQUU7UUFDbEMsSUFBSSxDQUFDL0UsUUFBUSxHQUFHO1lBQUUsR0FBRyxJQUFJLENBQUNBLFFBQVE7WUFBRSxHQUFHQSxRQUFRO1FBQUM7UUFDaEQsSUFBSStFLFNBQVM7WUFDVCxJQUFJLENBQUM5RSxtQkFBbUIsR0FBRztnQkFBRSxHQUFHLElBQUksQ0FBQ0EsbUJBQW1CO2dCQUFFLEdBQUdELFFBQVE7WUFBQztRQUMxRTtJQUNKO0lBQ0FzRixlQUFldEYsUUFBUSxFQUFFO1FBQ3JCLEtBQUssTUFBTXVGLE9BQU9wRixPQUFPcUYsSUFBSSxDQUFDeEYsVUFBVztZQUNyQyxPQUFPLElBQUksQ0FBQ0EsUUFBUSxDQUFDdUYsSUFBSTtZQUN6QixPQUFPLElBQUksQ0FBQ3RGLG1CQUFtQixDQUFDc0YsSUFBSTtRQUN4QztJQUNKO0lBQ0FFLEtBQUtDLHFCQUFxQixFQUFFLEVBQUVYLFVBQVUsSUFBSSxFQUFFO1FBQzFDLE1BQU0xRCxVQUFVLElBQUlDLGdCQUFnQixJQUFJLENBQUNwQixZQUFZO1FBQ3JELEtBQUssTUFBTVgsV0FBVyxJQUFJLENBQUNLLFFBQVEsQ0FBRTtZQUNqQyxNQUFNK0YsY0FBYyxJQUFJLENBQUM5RixtQkFBbUIsQ0FBQ3dGLFFBQVEsQ0FBQzlGO1lBQ3REOEIsUUFBUXlELFVBQVUsQ0FBQ3ZGLFNBQVNvRztRQUNoQztRQUNBLEtBQUssTUFBTXZFLE9BQU8sSUFBSSxDQUFDdEIsSUFBSSxDQUFFO1lBQ3pCLE1BQU02RixjQUFjLElBQUksQ0FBQzVGLGVBQWUsQ0FBQ3NGLFFBQVEsQ0FBQ2pFO1lBQ2xEQyxRQUFRRSxPQUFPLENBQUM7Z0JBQUNIO2FBQUksRUFBRXVFO1FBQzNCO1FBQ0EsS0FBSyxNQUFNSixPQUFPcEYsT0FBT3FGLElBQUksQ0FBQyxJQUFJLENBQUN4RixRQUFRLEVBQUc7WUFDMUMsTUFBTTJGLGNBQWN4RixPQUFPcUYsSUFBSSxDQUFDLElBQUksQ0FBQ3ZGLG1CQUFtQixFQUFFb0YsUUFBUSxDQUFDRTtZQUNuRWxFLFFBQVFHLFdBQVcsQ0FBQztnQkFBRSxDQUFDK0QsSUFBSSxFQUFFLElBQUksQ0FBQ3ZGLFFBQVEsQ0FBQ3VGLElBQUk7WUFBQyxHQUFHSTtRQUN2RDtRQUNBLEtBQUssTUFBTXBHLFdBQVdtRyxtQkFBb0I7WUFDdEMsSUFDQSxzREFBc0Q7WUFDdERyRSxRQUFRekIsUUFBUSxDQUNYc0YsTUFBTSxDQUFDLENBQUNVLElBQU1BLEVBQUU1RSxJQUFJLEtBQUssNEJBQ3pCNkUsSUFBSSxDQUFDLENBQUNELElBQU1BLEVBQUU1RSxJQUFJLEtBQUt6QixRQUFReUIsSUFBSSxHQUFHO2dCQUN2QztZQUNKO1lBQ0FLLFFBQVF5RCxVQUFVLENBQUN2RixTQUFTd0Y7UUFDaEM7UUFDQSxPQUFPMUQ7SUFDWDtJQUNBLE9BQU95RSxhQUFhbEcsUUFBUSxFQUFFO1FBQzFCLE1BQU1tRyxnQkFBZ0J6SCx5REFBbUJBO1lBQ3JDb0IsYUFBYztnQkFDVixLQUFLO2dCQUNMUyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7b0JBQ2hDQyxZQUFZO29CQUNaQyxjQUFjO29CQUNkQyxVQUFVO29CQUNWQyxPQUFPbkMsZ0RBQU1BO2dCQUNqQjtnQkFDQThCLE9BQU82RixNQUFNLENBQUMsSUFBSSxFQUFFcEc7WUFDeEI7UUFDSjtRQUNBLE1BQU15QixVQUFVLElBQUksSUFBSTtRQUN4QkEsUUFBUXlELFVBQVUsQ0FBQyxJQUFJaUI7UUFDdkIsT0FBTzFFO0lBQ1g7SUFDQSxhQUFhNEUsVUFBVXBHLG1CQUFtQixFQUFFcUcsYUFBYSxFQUFFbkcsZUFBZSxFQUFFb0csU0FBUyxFQUFFbEcsbUJBQW1CLEVBQUVtRyxhQUFhLEVBQUU3QyxPQUFPLEVBQUU7UUFDaEksSUFBSThDO1FBQ0osSUFBSXhHLHVCQUF1QnFHLGVBQWU7WUFDdEMsSUFBSWhILE1BQU1DLE9BQU8sQ0FBQ1Usd0JBQXdCLENBQUNBLHFCQUFxQjtnQkFDNUR3RyxrQkFBa0IsSUFBSS9FO2dCQUN0QitFLGdCQUFnQjdHLFdBQVcsQ0FBQ0sscUJBQXFCZ0IsSUFBSXlGLGtCQUFrQixFQUFFLEVBQUU7WUFDL0UsT0FDSztnQkFDREQsa0JBQWtCeEc7WUFDdEI7WUFDQXdHLGtCQUFrQkEsZ0JBQWdCWixJQUFJLENBQUN2RyxNQUFNQyxPQUFPLENBQUMrRyxpQkFDL0NBLGNBQWNyRixHQUFHLENBQUN5RixpQkFDbEJKLGVBQWV0RyxVQUFVO1FBQ25DO1FBQ0EsTUFBTTJHLGlCQUFpQjdILHFFQUFzQkEsQ0FBQyx5QkFBeUIsVUFDbkU2RSxTQUFTaUQ7UUFDYixNQUFNQyxtQkFBbUIvSCxxRUFBc0JBLENBQUMsNEJBQTRCO1FBQzVFLE1BQU1nSSxpQkFBaUJELG9CQUNsQi9ILENBQUFBLHFFQUFzQkEsQ0FBQyx3QkFBd0IsS0FBSTtRQUN4RCxJQUFJNkgsa0JBQWtCRyxnQkFBZ0I7WUFDbEMsSUFBSSxDQUFDTCxpQkFBaUI7Z0JBQ2xCQSxrQkFBa0IsSUFBSS9FO1lBQzFCO1lBQ0EsSUFBSWlGLGtCQUNBLENBQUNGLGdCQUFnQnpHLFFBQVEsQ0FBQ2lHLElBQUksQ0FBQyxDQUFDdEcsVUFBWUEsUUFBUXlCLElBQUksS0FBS3pDLHVFQUFzQkEsQ0FBQ29JLFNBQVMsQ0FBQzNGLElBQUksR0FBRztnQkFDckcsTUFBTTRGLGlCQUFpQixJQUFJckksdUVBQXNCQTtnQkFDakQ4SCxnQkFBZ0J2QixVQUFVLENBQUM4QixnQkFBZ0I7WUFDL0M7WUFDQSxJQUFJRixrQkFDQSxDQUFDTCxnQkFBZ0J6RyxRQUFRLENBQUNpRyxJQUFJLENBQUMsQ0FBQ3RHLFVBQVlBLFFBQVF5QixJQUFJLEtBQUsscUJBQXFCO2dCQUNsRixJQUFJeUYsa0JBQWtCO29CQUNsQkosZ0JBQWdCdkIsVUFBVSxDQUFDLE1BQU10RyxtRkFBMkJBLElBQUk7Z0JBQ3BFO1lBQ0o7UUFDSjtRQUNBLElBQUl1QixtQkFBbUJvRyxXQUFXO1lBQzlCLElBQUlFLGlCQUFpQjtnQkFDakJBLGdCQUFnQjlFLE9BQU8sQ0FBQ3hCLG1CQUFtQixFQUFFO2dCQUM3Q3NHLGdCQUFnQjlFLE9BQU8sQ0FBQzRFLGFBQWEsRUFBRSxFQUFFO1lBQzdDO1FBQ0o7UUFDQSxJQUFJbEcsdUJBQXVCbUcsZUFBZTtZQUN0QyxJQUFJQyxpQkFBaUI7Z0JBQ2pCQSxnQkFBZ0I3RSxXQUFXLENBQUN2Qix1QkFBdUIsQ0FBQztnQkFDcERvRyxnQkFBZ0I3RSxXQUFXLENBQUM0RSxpQkFBaUIsQ0FBQyxHQUFHO1lBQ3JEO1FBQ0o7UUFDQSxPQUFPQztJQUNYO0FBQ0o7QUFDTyxTQUFTQyxjQUFjL0csT0FBTztJQUNqQyxJQUFJLFVBQVVBLFNBQVM7UUFDbkIsT0FBT0E7SUFDWDtJQUNBLE9BQU9qQix5REFBbUJBLENBQUN1SSxXQUFXLENBQUN0SDtBQUMzQztBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0E4QkMsR0FDTSxNQUFNdUg7SUFDVHBILFlBQVlxSCxTQUFTLEVBQUV4RCxPQUFPLENBQUU7UUFDNUJwRCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGFBQWE7WUFDckNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU91RztRQUNYO1FBQ0E1RyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFdBQVc7WUFDbkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8rQztRQUNYO1FBQ0FwRCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGNBQWM7WUFDdENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtJQUNKO0lBQ0EsTUFBTXdHLDZCQUE2QkMsVUFBVSxFQUFFM0MsTUFBTSxFQUFFZixPQUFPLEVBQUU7UUFDNUQsTUFBTTJELEtBQUssSUFBSXZJLHlFQUFlQSxDQUFDNEU7UUFDL0IsTUFBTTRELEtBQUssTUFBTTdGLGdCQUFnQjJFLFNBQVMsQ0FBQztZQUFDaUI7U0FBRztRQUMvQyxNQUFNRSxhQUFhLE1BQU1ELElBQUkvQyxpQkFBaUI7WUFDMUNpRCxJQUFJO1lBQ0pDLE1BQU07WUFDTkMsSUFBSTtnQkFBQztnQkFBYTtnQkFBYTtnQkFBVU47YUFBVztRQUN4RCxHQUFHM0MsVUFBVSxDQUFDO1FBQ2QsSUFBSSxDQUFDOEMsWUFBWTtZQUNiLE1BQU0sSUFBSUksTUFBTTtRQUNwQjtRQUNBLE9BQU9KO0lBQ1g7SUFDQSxNQUFNSyxNQUFNbkQsTUFBTSxFQUFFO1FBQ2hCLElBQUksQ0FBQyxJQUFJLENBQUM4QyxVQUFVLEVBQUU7WUFDbEIsSUFBSSxDQUFDQSxVQUFVLEdBQUcsTUFBTSxJQUFJLENBQUNKLDRCQUE0QixDQUFDLElBQUksQ0FBQ0QsU0FBUyxFQUFFekMsUUFBUSxJQUFJLENBQUNmLE9BQU87UUFDbEc7UUFDQSxPQUFPLElBQUksQ0FBQzZELFVBQVUsQ0FBQ2pHLFFBQVE7SUFDbkM7SUFDQSxNQUFNSixNQUFNRCxHQUFHLEVBQUU7UUFDYixJQUFJLElBQUksQ0FBQ3NHLFVBQVUsRUFBRTtZQUNqQixNQUFNLElBQUksQ0FBQ0EsVUFBVSxDQUFDekUsZ0JBQWdCLENBQUM3QjtZQUN2QyxJQUFJLENBQUNzRyxVQUFVLEdBQUd4RDtRQUN0QjtJQUNKO0lBQ0EsTUFBTThELElBQUlqRixNQUFNLEVBQUU7UUFDZCxJQUFJLElBQUksQ0FBQzJFLFVBQVUsRUFBRTtZQUNqQixNQUFNLElBQUksQ0FBQ0EsVUFBVSxDQUFDdEUsY0FBYyxDQUFDTCxVQUFVLENBQUM7WUFDaEQsSUFBSSxDQUFDMkUsVUFBVSxHQUFHeEQ7UUFDdEI7SUFDSjtBQUNKO0FBQ0EsOERBQThEO0FBQzlELFNBQVMrRCxjQUFjbkgsS0FBSyxFQUFFb0gsVUFBVTtJQUNwQyxPQUFPcEgsU0FBUyxDQUFDdEIsTUFBTUMsT0FBTyxDQUFDcUIsVUFBVSxPQUFPQSxVQUFVLFdBQ3BEQSxRQUNBO1FBQUUsQ0FBQ29ILFdBQVcsRUFBRXBIO0lBQU07QUFDaEM7QUFDQSw4REFBOEQ7QUFDdkQsZUFBZXFILGFBQWFDLFlBQVksRUFBRUMsWUFBWSxFQUFFLEdBQUdDLElBQUk7SUFDbEUsTUFBTUMsYUFBYSxJQUFJbkIsV0FBV2dCLGFBQWE5RyxJQUFJLEVBQUU4RztJQUNyRCxNQUFNekIsa0JBQWtCLE1BQU00QixXQUFXUixLQUFLLENBQUM7UUFBRSxHQUFHTyxJQUFJO0lBQUM7SUFDekQsSUFBSTtRQUNBLE1BQU1FLFNBQVMsTUFBTUgsYUFBYTFCLG9CQUFvQjJCO1FBQ3RELE1BQU1DLFdBQVdQLEdBQUcsQ0FBQ0MsY0FBY08sUUFBUTtRQUMzQyxPQUFPQTtJQUNYLEVBQ0EsT0FBT3BILEtBQUs7UUFDUixNQUFNbUgsV0FBV2xILEtBQUssQ0FBQ0Q7UUFDdkIsTUFBTUE7SUFDVjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2NhbGxiYWNrcy9tYW5hZ2VyLmpzPzA5ZGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSBcInV1aWRcIjtcbmltcG9ydCB7IEJhc2VDYWxsYmFja0hhbmRsZXIsIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgQ29uc29sZUNhbGxiYWNrSGFuZGxlciB9IGZyb20gXCIuLi90cmFjZXJzL2NvbnNvbGUuanNcIjtcbmltcG9ydCB7IGdldFRyYWNpbmdWMkNhbGxiYWNrSGFuZGxlciB9IGZyb20gXCIuLi90cmFjZXJzL2luaXRpYWxpemUuanNcIjtcbmltcG9ydCB7IGdldEJ1ZmZlclN0cmluZyB9IGZyb20gXCIuLi9tZXNzYWdlcy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSB9IGZyb20gXCIuLi91dGlscy9lbnYuanNcIjtcbmltcG9ydCB7IExhbmdDaGFpblRyYWNlciwgfSBmcm9tIFwiLi4vdHJhY2Vycy90cmFjZXJfbGFuZ2NoYWluLmpzXCI7XG5pbXBvcnQgeyBjb25zdW1lQ2FsbGJhY2sgfSBmcm9tIFwiLi9wcm9taXNlcy5qc1wiO1xuaWYgKFxuLyogI19fUFVSRV9fICovIGdldEVudmlyb25tZW50VmFyaWFibGUoXCJMQU5HQ0hBSU5fVFJBQ0lOR19WMlwiKSA9PT0gXCJ0cnVlXCIgJiZcbiAgICAvKiAjX19QVVJFX18gKi8gZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkxBTkdDSEFJTl9DQUxMQkFDS1NfQkFDS0dST1VORFwiKSAhPT1cbiAgICAgICAgXCJ0cnVlXCIpIHtcbiAgICAvKiAjX19QVVJFX18gKi8gY29uc29sZS53YXJuKFtcbiAgICAgICAgXCJbV0FSTl06IFlvdSBoYXZlIGVuYWJsZWQgTGFuZ1NtaXRoIHRyYWNpbmcgd2l0aG91dCBiYWNrZ3JvdW5kaW5nIGNhbGxiYWNrcy5cIixcbiAgICAgICAgXCJbV0FSTl06IElmIHlvdSBhcmUgbm90IHVzaW5nIGEgc2VydmVybGVzcyBlbnZpcm9ubWVudCB3aGVyZSB5b3UgbXVzdCB3YWl0IGZvciB0cmFjaW5nIGNhbGxzIHRvIGZpbmlzaCxcIixcbiAgICAgICAgYFtXQVJOXTogd2Ugc3VnZ2VzdCBzZXR0aW5nIFwicHJvY2Vzcy5lbnYuTEFOR0NIQUlOX0NBTExCQUNLU19CQUNLR1JPVU5EPXRydWVcIiB0byBhdm9pZCBhZGRpdGlvbmFsIGxhdGVuY3kuYCxcbiAgICBdLmpvaW4oXCJcXG5cIikpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQ2FsbGJhY2tDb25maWdBcmcoYXJnKSB7XG4gICAgaWYgKCFhcmcpIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFyZykgfHwgXCJuYW1lXCIgaW4gYXJnKSB7XG4gICAgICAgIHJldHVybiB7IGNhbGxiYWNrczogYXJnIH07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gYXJnO1xuICAgIH1cbn1cbi8qKlxuICogTWFuYWdlIGNhbGxiYWNrcyBmcm9tIGRpZmZlcmVudCBjb21wb25lbnRzIG9mIExhbmdDaGFpbi5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VDYWxsYmFja01hbmFnZXIge1xuICAgIHNldEhhbmRsZXIoaGFuZGxlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXRIYW5kbGVycyhbaGFuZGxlcl0pO1xuICAgIH1cbn1cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgcnVuIG1hbmFnZXIgaW4gTGFuZ0NoYWluLlxuICovXG5jbGFzcyBCYXNlUnVuTWFuYWdlciB7XG4gICAgY29uc3RydWN0b3IocnVuSWQsIGhhbmRsZXJzLCBpbmhlcml0YWJsZUhhbmRsZXJzLCB0YWdzLCBpbmhlcml0YWJsZVRhZ3MsIG1ldGFkYXRhLCBpbmhlcml0YWJsZU1ldGFkYXRhLCBfcGFyZW50UnVuSWQpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicnVuSWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHJ1bklkXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJoYW5kbGVyc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogaGFuZGxlcnNcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluaGVyaXRhYmxlSGFuZGxlcnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGluaGVyaXRhYmxlSGFuZGxlcnNcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRhZ3NcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluaGVyaXRhYmxlVGFnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogaW5oZXJpdGFibGVUYWdzXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtZXRhZGF0YVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogbWV0YWRhdGFcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluaGVyaXRhYmxlTWV0YWRhdGFcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGluaGVyaXRhYmxlTWV0YWRhdGFcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIl9wYXJlbnRSdW5JZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogX3BhcmVudFJ1bklkXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVUZXh0KHRleHQpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlVGV4dD8uKHRleHQsIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVUZXh0OiAke2Vycn1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgIH1cbn1cbi8qKlxuICogTWFuYWdlcyBjYWxsYmFja3MgZm9yIHJldHJpZXZlciBydW5zLlxuICovXG5leHBvcnQgY2xhc3MgQ2FsbGJhY2tNYW5hZ2VyRm9yUmV0cmlldmVyUnVuIGV4dGVuZHMgQmFzZVJ1bk1hbmFnZXIge1xuICAgIGdldENoaWxkKHRhZykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIGNvbnN0IG1hbmFnZXIgPSBuZXcgQ2FsbGJhY2tNYW5hZ2VyKHRoaXMucnVuSWQpO1xuICAgICAgICBtYW5hZ2VyLnNldEhhbmRsZXJzKHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycyk7XG4gICAgICAgIG1hbmFnZXIuYWRkVGFncyh0aGlzLmluaGVyaXRhYmxlVGFncyk7XG4gICAgICAgIG1hbmFnZXIuYWRkTWV0YWRhdGEodGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhKTtcbiAgICAgICAgaWYgKHRhZykge1xuICAgICAgICAgICAgbWFuYWdlci5hZGRUYWdzKFt0YWddLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1hbmFnZXI7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVJldHJpZXZlckVuZChkb2N1bWVudHMpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlUmV0cmlldmVyKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVSZXRyaWV2ZXJFbmQ/Lihkb2N1bWVudHMsIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVSZXRyaWV2ZXJgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlUmV0cmlldmVyRXJyb3IoZXJyKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZVJldHJpZXZlcikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlUmV0cmlldmVyRXJyb3I/LihlcnIsIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZVJldHJpZXZlckVycm9yOiAke2Vycm9yfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBDYWxsYmFja01hbmFnZXJGb3JMTE1SdW4gZXh0ZW5kcyBCYXNlUnVuTWFuYWdlciB7XG4gICAgYXN5bmMgaGFuZGxlTExNTmV3VG9rZW4odG9rZW4sIGlkeCwgX3J1bklkLCBfcGFyZW50UnVuSWQsIF90YWdzLCBmaWVsZHMpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlTExNKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVMTE1OZXdUb2tlbj8uKHRva2VuLCBpZHggPz8geyBwcm9tcHQ6IDAsIGNvbXBsZXRpb246IDAgfSwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncywgZmllbGRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlTExNTmV3VG9rZW46ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVMTE1FcnJvcihlcnIpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlTExNKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVMTE1FcnJvcj8uKGVyciwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZUxMTUVycm9yOiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlTExNRW5kKG91dHB1dCkge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVMTE0pIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUxMTUVuZD8uKG91dHB1dCwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZUxMTUVuZDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIENhbGxiYWNrTWFuYWdlckZvckNoYWluUnVuIGV4dGVuZHMgQmFzZVJ1bk1hbmFnZXIge1xuICAgIGdldENoaWxkKHRhZykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIGNvbnN0IG1hbmFnZXIgPSBuZXcgQ2FsbGJhY2tNYW5hZ2VyKHRoaXMucnVuSWQpO1xuICAgICAgICBtYW5hZ2VyLnNldEhhbmRsZXJzKHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycyk7XG4gICAgICAgIG1hbmFnZXIuYWRkVGFncyh0aGlzLmluaGVyaXRhYmxlVGFncyk7XG4gICAgICAgIG1hbmFnZXIuYWRkTWV0YWRhdGEodGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhKTtcbiAgICAgICAgaWYgKHRhZykge1xuICAgICAgICAgICAgbWFuYWdlci5hZGRUYWdzKFt0YWddLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1hbmFnZXI7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUNoYWluRXJyb3IoZXJyLCBfcnVuSWQsIF9wYXJlbnRSdW5JZCwgX3RhZ3MsIGt3YXJncykge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVDaGFpbikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlQ2hhaW5FcnJvcj8uKGVyciwgdGhpcy5ydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncywga3dhcmdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlQ2hhaW5FcnJvcjogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUNoYWluRW5kKG91dHB1dCwgX3J1bklkLCBfcGFyZW50UnVuSWQsIF90YWdzLCBrd2FyZ3MpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlQ2hhaW4pIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUNoYWluRW5kPy4ob3V0cHV0LCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzLCBrd2FyZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVDaGFpbkVuZDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUFnZW50QWN0aW9uKGFjdGlvbikge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVBZ2VudCkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlQWdlbnRBY3Rpb24/LihhY3Rpb24sIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVBZ2VudEFjdGlvbjogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUFnZW50RW5kKGFjdGlvbikge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVBZ2VudCkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlQWdlbnRFbmQ/LihhY3Rpb24sIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVBZ2VudEVuZDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIENhbGxiYWNrTWFuYWdlckZvclRvb2xSdW4gZXh0ZW5kcyBCYXNlUnVuTWFuYWdlciB7XG4gICAgZ2V0Q2hpbGQodGFnKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgY29uc3QgbWFuYWdlciA9IG5ldyBDYWxsYmFja01hbmFnZXIodGhpcy5ydW5JZCk7XG4gICAgICAgIG1hbmFnZXIuc2V0SGFuZGxlcnModGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzKTtcbiAgICAgICAgbWFuYWdlci5hZGRUYWdzKHRoaXMuaW5oZXJpdGFibGVUYWdzKTtcbiAgICAgICAgbWFuYWdlci5hZGRNZXRhZGF0YSh0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEpO1xuICAgICAgICBpZiAodGFnKSB7XG4gICAgICAgICAgICBtYW5hZ2VyLmFkZFRhZ3MoW3RhZ10sIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWFuYWdlcjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlVG9vbEVycm9yKGVycikge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVBZ2VudCkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlVG9vbEVycm9yPy4oZXJyLCB0aGlzLnJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgdGhpcy50YWdzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlVG9vbEVycm9yOiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlVG9vbEVuZChvdXRwdXQpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlQWdlbnQpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZVRvb2xFbmQ/LihvdXRwdXQsIHRoaXMucnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVUb29sRW5kOiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICB9XG59XG4vKipcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBwcm9tcHQgPSBQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUoXCJXaGF0IGlzIHRoZSBhbnN3ZXIgdG8ge3F1ZXN0aW9ufT9cIik7XG4gKlxuICogLy8gRXhhbXBsZSBvZiB1c2luZyBMTE1DaGFpbiB3aXRoIE9wZW5BSSBhbmQgYSBzaW1wbGUgcHJvbXB0XG4gKiBjb25zdCBjaGFpbiA9IG5ldyBMTE1DaGFpbih7XG4gKiAgIGxsbTogbmV3IENoYXRPcGVuQUkoeyB0ZW1wZXJhdHVyZTogMC45IH0pLFxuICogICBwcm9tcHQsXG4gKiB9KTtcbiAqXG4gKiAvLyBSdW5uaW5nIHRoZSBjaGFpbiB3aXRoIGEgc2luZ2xlIHF1ZXN0aW9uXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBjaGFpbi5jYWxsKHtcbiAqICAgcXVlc3Rpb246IFwiV2hhdCBpcyB0aGUgYWlyc3BlZWQgdmVsb2NpdHkgb2YgYW4gdW5sYWRlbiBzd2FsbG93P1wiLFxuICogfSk7XG4gKiBjb25zb2xlLmxvZyhcIlRoZSBhbnN3ZXIgaXM6XCIsIHJlc3VsdCk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIENhbGxiYWNrTWFuYWdlciBleHRlbmRzIEJhc2VDYWxsYmFja01hbmFnZXIge1xuICAgIGNvbnN0cnVjdG9yKHBhcmVudFJ1bklkLCBvcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImhhbmRsZXJzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5oZXJpdGFibGVIYW5kbGVyc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW11cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmhlcml0YWJsZVRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtZXRhZGF0YVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZToge31cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluaGVyaXRhYmxlTWV0YWRhdGFcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHt9XG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcImNhbGxiYWNrX21hbmFnZXJcIlxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiX3BhcmVudFJ1bklkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSBvcHRpb25zPy5oYW5kbGVycyA/PyB0aGlzLmhhbmRsZXJzO1xuICAgICAgICB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnMgPVxuICAgICAgICAgICAgb3B0aW9ucz8uaW5oZXJpdGFibGVIYW5kbGVycyA/PyB0aGlzLmluaGVyaXRhYmxlSGFuZGxlcnM7XG4gICAgICAgIHRoaXMudGFncyA9IG9wdGlvbnM/LnRhZ3MgPz8gdGhpcy50YWdzO1xuICAgICAgICB0aGlzLmluaGVyaXRhYmxlVGFncyA9IG9wdGlvbnM/LmluaGVyaXRhYmxlVGFncyA/PyB0aGlzLmluaGVyaXRhYmxlVGFncztcbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IG9wdGlvbnM/Lm1ldGFkYXRhID8/IHRoaXMubWV0YWRhdGE7XG4gICAgICAgIHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YSA9XG4gICAgICAgICAgICBvcHRpb25zPy5pbmhlcml0YWJsZU1ldGFkYXRhID8/IHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YTtcbiAgICAgICAgdGhpcy5fcGFyZW50UnVuSWQgPSBwYXJlbnRSdW5JZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgcGFyZW50IHJ1biBJRCwgaWYgYW55LlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIHBhcmVudCBydW4gSUQuXG4gICAgICovXG4gICAgZ2V0UGFyZW50UnVuSWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wYXJlbnRSdW5JZDtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlTExNU3RhcnQobGxtLCBwcm9tcHRzLCBfcnVuSWQgPSB1bmRlZmluZWQsIF9wYXJlbnRSdW5JZCA9IHVuZGVmaW5lZCwgZXh0cmFQYXJhbXMgPSB1bmRlZmluZWQsIF90YWdzID0gdW5kZWZpbmVkLCBfbWV0YWRhdGEgPSB1bmRlZmluZWQsIHJ1bk5hbWUgPSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21wdHMubWFwKGFzeW5jIChwcm9tcHQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJ1bklkID0gdXVpZHY0KCk7XG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0aGlzLmhhbmRsZXJzLm1hcCgoaGFuZGxlcikgPT4gY29uc3VtZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlTExNKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZUxMTVN0YXJ0Py4obGxtLCBbcHJvbXB0XSwgcnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCBleHRyYVBhcmFtcywgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhLCBydW5OYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlTExNU3RhcnQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDYWxsYmFja01hbmFnZXJGb3JMTE1SdW4ocnVuSWQsIHRoaXMuaGFuZGxlcnMsIHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycywgdGhpcy50YWdzLCB0aGlzLmluaGVyaXRhYmxlVGFncywgdGhpcy5tZXRhZGF0YSwgdGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhLCB0aGlzLl9wYXJlbnRSdW5JZCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQ2hhdE1vZGVsU3RhcnQobGxtLCBtZXNzYWdlcywgX3J1bklkID0gdW5kZWZpbmVkLCBfcGFyZW50UnVuSWQgPSB1bmRlZmluZWQsIGV4dHJhUGFyYW1zID0gdW5kZWZpbmVkLCBfdGFncyA9IHVuZGVmaW5lZCwgX21ldGFkYXRhID0gdW5kZWZpbmVkLCBydW5OYW1lID0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChtZXNzYWdlcy5tYXAoYXN5bmMgKG1lc3NhZ2VHcm91cCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcnVuSWQgPSB1dWlkdjQoKTtcbiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghaGFuZGxlci5pZ25vcmVMTE0pIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyLmhhbmRsZUNoYXRNb2RlbFN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVDaGF0TW9kZWxTdGFydD8uKGxsbSwgW21lc3NhZ2VHcm91cF0sIHJ1bklkLCB0aGlzLl9wYXJlbnRSdW5JZCwgZXh0cmFQYXJhbXMsIHRoaXMudGFncywgdGhpcy5tZXRhZGF0YSwgcnVuTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChoYW5kbGVyLmhhbmRsZUxMTVN0YXJ0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZVN0cmluZyA9IGdldEJ1ZmZlclN0cmluZyhtZXNzYWdlR3JvdXApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlTExNU3RhcnQ/LihsbG0sIFttZXNzYWdlU3RyaW5nXSwgcnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCBleHRyYVBhcmFtcywgdGhpcy50YWdzLCB0aGlzLm1ldGFkYXRhLCBydW5OYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBoYW5kbGVyICR7aGFuZGxlci5jb25zdHJ1Y3Rvci5uYW1lfSwgaGFuZGxlTExNU3RhcnQ6ICR7ZXJyfWApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgaGFuZGxlci5hd2FpdEhhbmRsZXJzKSkpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDYWxsYmFja01hbmFnZXJGb3JMTE1SdW4ocnVuSWQsIHRoaXMuaGFuZGxlcnMsIHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycywgdGhpcy50YWdzLCB0aGlzLmluaGVyaXRhYmxlVGFncywgdGhpcy5tZXRhZGF0YSwgdGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhLCB0aGlzLl9wYXJlbnRSdW5JZCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQ2hhaW5TdGFydChjaGFpbiwgaW5wdXRzLCBydW5JZCA9IHV1aWR2NCgpLCBydW5UeXBlID0gdW5kZWZpbmVkLCBfdGFncyA9IHVuZGVmaW5lZCwgX21ldGFkYXRhID0gdW5kZWZpbmVkLCBydW5OYW1lID0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZUNoYWluKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgaGFuZGxlci5oYW5kbGVDaGFpblN0YXJ0Py4oY2hhaW4sIGlucHV0cywgcnVuSWQsIHRoaXMuX3BhcmVudFJ1bklkLCB0aGlzLnRhZ3MsIHRoaXMubWV0YWRhdGEsIHJ1blR5cGUsIHJ1bk5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGhhbmRsZXIgJHtoYW5kbGVyLmNvbnN0cnVjdG9yLm5hbWV9LCBoYW5kbGVDaGFpblN0YXJ0OiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICAgICAgcmV0dXJuIG5ldyBDYWxsYmFja01hbmFnZXJGb3JDaGFpblJ1bihydW5JZCwgdGhpcy5oYW5kbGVycywgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzLCB0aGlzLnRhZ3MsIHRoaXMuaW5oZXJpdGFibGVUYWdzLCB0aGlzLm1ldGFkYXRhLCB0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEsIHRoaXMuX3BhcmVudFJ1bklkKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlVG9vbFN0YXJ0KHRvb2wsIGlucHV0LCBydW5JZCA9IHV1aWR2NCgpLCBfcGFyZW50UnVuSWQgPSB1bmRlZmluZWQsIF90YWdzID0gdW5kZWZpbmVkLCBfbWV0YWRhdGEgPSB1bmRlZmluZWQsIHJ1bk5hbWUgPSB1bmRlZmluZWQpIHtcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5oYW5kbGVycy5tYXAoKGhhbmRsZXIpID0+IGNvbnN1bWVDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWhhbmRsZXIuaWdub3JlQWdlbnQpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBoYW5kbGVyLmhhbmRsZVRvb2xTdGFydD8uKHRvb2wsIGlucHV0LCBydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncywgdGhpcy5tZXRhZGF0YSwgcnVuTmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZVRvb2xTdGFydDogJHtlcnJ9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCBoYW5kbGVyLmF3YWl0SGFuZGxlcnMpKSk7XG4gICAgICAgIHJldHVybiBuZXcgQ2FsbGJhY2tNYW5hZ2VyRm9yVG9vbFJ1bihydW5JZCwgdGhpcy5oYW5kbGVycywgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzLCB0aGlzLnRhZ3MsIHRoaXMuaW5oZXJpdGFibGVUYWdzLCB0aGlzLm1ldGFkYXRhLCB0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEsIHRoaXMuX3BhcmVudFJ1bklkKTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlUmV0cmlldmVyU3RhcnQocmV0cmlldmVyLCBxdWVyeSwgcnVuSWQgPSB1dWlkdjQoKSwgX3BhcmVudFJ1bklkID0gdW5kZWZpbmVkLCBfdGFncyA9IHVuZGVmaW5lZCwgX21ldGFkYXRhID0gdW5kZWZpbmVkLCBydW5OYW1lID0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHRoaXMuaGFuZGxlcnMubWFwKChoYW5kbGVyKSA9PiBjb25zdW1lQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFoYW5kbGVyLmlnbm9yZVJldHJpZXZlcikge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZXIuaGFuZGxlUmV0cmlldmVyU3RhcnQ/LihyZXRyaWV2ZXIsIHF1ZXJ5LCBydW5JZCwgdGhpcy5fcGFyZW50UnVuSWQsIHRoaXMudGFncywgdGhpcy5tZXRhZGF0YSwgcnVuTmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgaW4gaGFuZGxlciAke2hhbmRsZXIuY29uc3RydWN0b3IubmFtZX0sIGhhbmRsZVJldHJpZXZlclN0YXJ0OiAke2Vycn1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGhhbmRsZXIuYXdhaXRIYW5kbGVycykpKTtcbiAgICAgICAgcmV0dXJuIG5ldyBDYWxsYmFja01hbmFnZXJGb3JSZXRyaWV2ZXJSdW4ocnVuSWQsIHRoaXMuaGFuZGxlcnMsIHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycywgdGhpcy50YWdzLCB0aGlzLmluaGVyaXRhYmxlVGFncywgdGhpcy5tZXRhZGF0YSwgdGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhLCB0aGlzLl9wYXJlbnRSdW5JZCk7XG4gICAgfVxuICAgIGFkZEhhbmRsZXIoaGFuZGxlciwgaW5oZXJpdCA9IHRydWUpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVycy5wdXNoKGhhbmRsZXIpO1xuICAgICAgICBpZiAoaW5oZXJpdCkge1xuICAgICAgICAgICAgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzLnB1c2goaGFuZGxlcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlSGFuZGxlcihoYW5kbGVyKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzLmZpbHRlcigoX2hhbmRsZXIpID0+IF9oYW5kbGVyICE9PSBoYW5kbGVyKTtcbiAgICAgICAgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzID0gdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzLmZpbHRlcigoX2hhbmRsZXIpID0+IF9oYW5kbGVyICE9PSBoYW5kbGVyKTtcbiAgICB9XG4gICAgc2V0SGFuZGxlcnMoaGFuZGxlcnMsIGluaGVyaXQgPSB0cnVlKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSBbXTtcbiAgICAgICAgdGhpcy5pbmhlcml0YWJsZUhhbmRsZXJzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgaGFuZGxlciBvZiBoYW5kbGVycykge1xuICAgICAgICAgICAgdGhpcy5hZGRIYW5kbGVyKGhhbmRsZXIsIGluaGVyaXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFkZFRhZ3ModGFncywgaW5oZXJpdCA9IHRydWUpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVUYWdzKHRhZ3MpOyAvLyBSZW1vdmUgZHVwbGljYXRlc1xuICAgICAgICB0aGlzLnRhZ3MucHVzaCguLi50YWdzKTtcbiAgICAgICAgaWYgKGluaGVyaXQpIHtcbiAgICAgICAgICAgIHRoaXMuaW5oZXJpdGFibGVUYWdzLnB1c2goLi4udGFncyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlVGFncyh0YWdzKSB7XG4gICAgICAgIHRoaXMudGFncyA9IHRoaXMudGFncy5maWx0ZXIoKHRhZykgPT4gIXRhZ3MuaW5jbHVkZXModGFnKSk7XG4gICAgICAgIHRoaXMuaW5oZXJpdGFibGVUYWdzID0gdGhpcy5pbmhlcml0YWJsZVRhZ3MuZmlsdGVyKCh0YWcpID0+ICF0YWdzLmluY2x1ZGVzKHRhZykpO1xuICAgIH1cbiAgICBhZGRNZXRhZGF0YShtZXRhZGF0YSwgaW5oZXJpdCA9IHRydWUpIHtcbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IHsgLi4udGhpcy5tZXRhZGF0YSwgLi4ubWV0YWRhdGEgfTtcbiAgICAgICAgaWYgKGluaGVyaXQpIHtcbiAgICAgICAgICAgIHRoaXMuaW5oZXJpdGFibGVNZXRhZGF0YSA9IHsgLi4udGhpcy5pbmhlcml0YWJsZU1ldGFkYXRhLCAuLi5tZXRhZGF0YSB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbW92ZU1ldGFkYXRhKG1ldGFkYXRhKSB7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKG1ldGFkYXRhKSkge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMubWV0YWRhdGFba2V5XTtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGFba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjb3B5KGFkZGl0aW9uYWxIYW5kbGVycyA9IFtdLCBpbmhlcml0ID0gdHJ1ZSkge1xuICAgICAgICBjb25zdCBtYW5hZ2VyID0gbmV3IENhbGxiYWNrTWFuYWdlcih0aGlzLl9wYXJlbnRSdW5JZCk7XG4gICAgICAgIGZvciAoY29uc3QgaGFuZGxlciBvZiB0aGlzLmhhbmRsZXJzKSB7XG4gICAgICAgICAgICBjb25zdCBpbmhlcml0YWJsZSA9IHRoaXMuaW5oZXJpdGFibGVIYW5kbGVycy5pbmNsdWRlcyhoYW5kbGVyKTtcbiAgICAgICAgICAgIG1hbmFnZXIuYWRkSGFuZGxlcihoYW5kbGVyLCBpbmhlcml0YWJsZSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB0YWcgb2YgdGhpcy50YWdzKSB7XG4gICAgICAgICAgICBjb25zdCBpbmhlcml0YWJsZSA9IHRoaXMuaW5oZXJpdGFibGVUYWdzLmluY2x1ZGVzKHRhZyk7XG4gICAgICAgICAgICBtYW5hZ2VyLmFkZFRhZ3MoW3RhZ10sIGluaGVyaXRhYmxlKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyh0aGlzLm1ldGFkYXRhKSkge1xuICAgICAgICAgICAgY29uc3QgaW5oZXJpdGFibGUgPSBPYmplY3Qua2V5cyh0aGlzLmluaGVyaXRhYmxlTWV0YWRhdGEpLmluY2x1ZGVzKGtleSk7XG4gICAgICAgICAgICBtYW5hZ2VyLmFkZE1ldGFkYXRhKHsgW2tleV06IHRoaXMubWV0YWRhdGFba2V5XSB9LCBpbmhlcml0YWJsZSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBoYW5kbGVyIG9mIGFkZGl0aW9uYWxIYW5kbGVycykge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgLy8gUHJldmVudCBtdWx0aXBsZSBjb3BpZXMgb2YgY29uc29sZV9jYWxsYmFja19oYW5kbGVyXG4gICAgICAgICAgICBtYW5hZ2VyLmhhbmRsZXJzXG4gICAgICAgICAgICAgICAgLmZpbHRlcigoaCkgPT4gaC5uYW1lID09PSBcImNvbnNvbGVfY2FsbGJhY2tfaGFuZGxlclwiKVxuICAgICAgICAgICAgICAgIC5zb21lKChoKSA9PiBoLm5hbWUgPT09IGhhbmRsZXIubmFtZSkpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1hbmFnZXIuYWRkSGFuZGxlcihoYW5kbGVyLCBpbmhlcml0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWFuYWdlcjtcbiAgICB9XG4gICAgc3RhdGljIGZyb21IYW5kbGVycyhoYW5kbGVycykge1xuICAgICAgICBjbGFzcyBIYW5kbGVyIGV4dGVuZHMgQmFzZUNhbGxiYWNrSGFuZGxlciB7XG4gICAgICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgICAgICBzdXBlcigpO1xuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdXVpZHY0KClcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMsIGhhbmRsZXJzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtYW5hZ2VyID0gbmV3IHRoaXMoKTtcbiAgICAgICAgbWFuYWdlci5hZGRIYW5kbGVyKG5ldyBIYW5kbGVyKCkpO1xuICAgICAgICByZXR1cm4gbWFuYWdlcjtcbiAgICB9XG4gICAgc3RhdGljIGFzeW5jIGNvbmZpZ3VyZShpbmhlcml0YWJsZUhhbmRsZXJzLCBsb2NhbEhhbmRsZXJzLCBpbmhlcml0YWJsZVRhZ3MsIGxvY2FsVGFncywgaW5oZXJpdGFibGVNZXRhZGF0YSwgbG9jYWxNZXRhZGF0YSwgb3B0aW9ucykge1xuICAgICAgICBsZXQgY2FsbGJhY2tNYW5hZ2VyO1xuICAgICAgICBpZiAoaW5oZXJpdGFibGVIYW5kbGVycyB8fCBsb2NhbEhhbmRsZXJzKSB7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpbmhlcml0YWJsZUhhbmRsZXJzKSB8fCAhaW5oZXJpdGFibGVIYW5kbGVycykge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrTWFuYWdlciA9IG5ldyBDYWxsYmFja01hbmFnZXIoKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFja01hbmFnZXIuc2V0SGFuZGxlcnMoaW5oZXJpdGFibGVIYW5kbGVycz8ubWFwKGVuc3VyZUhhbmRsZXIpID8/IFtdLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrTWFuYWdlciA9IGluaGVyaXRhYmxlSGFuZGxlcnM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYWxsYmFja01hbmFnZXIgPSBjYWxsYmFja01hbmFnZXIuY29weShBcnJheS5pc0FycmF5KGxvY2FsSGFuZGxlcnMpXG4gICAgICAgICAgICAgICAgPyBsb2NhbEhhbmRsZXJzLm1hcChlbnN1cmVIYW5kbGVyKVxuICAgICAgICAgICAgICAgIDogbG9jYWxIYW5kbGVycz8uaGFuZGxlcnMsIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB2ZXJib3NlRW5hYmxlZCA9IGdldEVudmlyb25tZW50VmFyaWFibGUoXCJMQU5HQ0hBSU5fVkVSQk9TRVwiKSA9PT0gXCJ0cnVlXCIgfHxcbiAgICAgICAgICAgIG9wdGlvbnM/LnZlcmJvc2U7XG4gICAgICAgIGNvbnN0IHRyYWNpbmdWMkVuYWJsZWQgPSBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTEFOR0NIQUlOX1RSQUNJTkdfVjJcIikgPT09IFwidHJ1ZVwiO1xuICAgICAgICBjb25zdCB0cmFjaW5nRW5hYmxlZCA9IHRyYWNpbmdWMkVuYWJsZWQgfHxcbiAgICAgICAgICAgIChnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTEFOR0NIQUlOX1RSQUNJTkdcIikgPz8gZmFsc2UpO1xuICAgICAgICBpZiAodmVyYm9zZUVuYWJsZWQgfHwgdHJhY2luZ0VuYWJsZWQpIHtcbiAgICAgICAgICAgIGlmICghY2FsbGJhY2tNYW5hZ2VyKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyID0gbmV3IENhbGxiYWNrTWFuYWdlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZlcmJvc2VFbmFibGVkICYmXG4gICAgICAgICAgICAgICAgIWNhbGxiYWNrTWFuYWdlci5oYW5kbGVycy5zb21lKChoYW5kbGVyKSA9PiBoYW5kbGVyLm5hbWUgPT09IENvbnNvbGVDYWxsYmFja0hhbmRsZXIucHJvdG90eXBlLm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29uc29sZUhhbmRsZXIgPSBuZXcgQ29uc29sZUNhbGxiYWNrSGFuZGxlcigpO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrTWFuYWdlci5hZGRIYW5kbGVyKGNvbnNvbGVIYW5kbGVyLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0cmFjaW5nRW5hYmxlZCAmJlxuICAgICAgICAgICAgICAgICFjYWxsYmFja01hbmFnZXIuaGFuZGxlcnMuc29tZSgoaGFuZGxlcikgPT4gaGFuZGxlci5uYW1lID09PSBcImxhbmdjaGFpbl90cmFjZXJcIikpIHtcbiAgICAgICAgICAgICAgICBpZiAodHJhY2luZ1YyRW5hYmxlZCkge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja01hbmFnZXIuYWRkSGFuZGxlcihhd2FpdCBnZXRUcmFjaW5nVjJDYWxsYmFja0hhbmRsZXIoKSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChpbmhlcml0YWJsZVRhZ3MgfHwgbG9jYWxUYWdzKSB7XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2tNYW5hZ2VyKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyLmFkZFRhZ3MoaW5oZXJpdGFibGVUYWdzID8/IFtdKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFja01hbmFnZXIuYWRkVGFncyhsb2NhbFRhZ3MgPz8gW10sIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5oZXJpdGFibGVNZXRhZGF0YSB8fCBsb2NhbE1ldGFkYXRhKSB7XG4gICAgICAgICAgICBpZiAoY2FsbGJhY2tNYW5hZ2VyKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tNYW5hZ2VyLmFkZE1ldGFkYXRhKGluaGVyaXRhYmxlTWV0YWRhdGEgPz8ge30pO1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrTWFuYWdlci5hZGRNZXRhZGF0YShsb2NhbE1ldGFkYXRhID8/IHt9LCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrTWFuYWdlcjtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gZW5zdXJlSGFuZGxlcihoYW5kbGVyKSB7XG4gICAgaWYgKFwibmFtZVwiIGluIGhhbmRsZXIpIHtcbiAgICAgICAgcmV0dXJuIGhhbmRsZXI7XG4gICAgfVxuICAgIHJldHVybiBCYXNlQ2FsbGJhY2tIYW5kbGVyLmZyb21NZXRob2RzKGhhbmRsZXIpO1xufVxuLyoqXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgcHJvbXB0ID0gUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKGBXaGF0IGlzIHRoZSBhbnN3ZXIgdG8ge3F1ZXN0aW9ufT9gKTtcbiAqXG4gKiAvLyBFeGFtcGxlIG9mIHVzaW5nIExMTUNoYWluIHRvIHByb2Nlc3MgYSBzZXJpZXMgb2YgcXVlc3Rpb25zXG4gKiBjb25zdCBjaGFpbiA9IG5ldyBMTE1DaGFpbih7XG4gKiAgIGxsbTogbmV3IENoYXRPcGVuQUkoeyB0ZW1wZXJhdHVyZTogMC45IH0pLFxuICogICBwcm9tcHQsXG4gKiB9KTtcbiAqXG4gKiAvLyBQcm9jZXNzIHF1ZXN0aW9ucyB1c2luZyB0aGUgY2hhaW5cbiAqIGNvbnN0IHByb2Nlc3NRdWVzdGlvbnMgPSBhc3luYyAocXVlc3Rpb25zKSA9PiB7XG4gKiAgIGZvciAoY29uc3QgcXVlc3Rpb24gb2YgcXVlc3Rpb25zKSB7XG4gKiAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2hhaW4uY2FsbCh7IHF1ZXN0aW9uIH0pO1xuICogICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gKiAgIH1cbiAqIH07XG4gKlxuICogLy8gRXhhbXBsZSBxdWVzdGlvbnNcbiAqIGNvbnN0IHF1ZXN0aW9ucyA9IFtcbiAqICAgXCJXaGF0IGlzIHlvdXIgbmFtZT9cIixcbiAqICAgXCJXaGF0IGlzIHlvdXIgcXVlc3Q/XCIsXG4gKiAgIFwiV2hhdCBpcyB5b3VyIGZhdm9yaXRlIGNvbG9yP1wiLFxuICogXTtcbiAqXG4gKiAvLyBSdW4gdGhlIGV4YW1wbGVcbiAqIHByb2Nlc3NRdWVzdGlvbnMocXVlc3Rpb25zKS5jYXRjaChjb25zb2xlLmVycm9yKTtcbiAqXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFRyYWNlR3JvdXAge1xuICAgIGNvbnN0cnVjdG9yKGdyb3VwTmFtZSwgb3B0aW9ucykge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJncm91cE5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGdyb3VwTmFtZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwib3B0aW9uc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogb3B0aW9uc1xuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicnVuTWFuYWdlclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBnZXRUcmFjZUdyb3VwQ2FsbGJhY2tNYW5hZ2VyKGdyb3VwX25hbWUsIGlucHV0cywgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBjYiA9IG5ldyBMYW5nQ2hhaW5UcmFjZXIob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGNtID0gYXdhaXQgQ2FsbGJhY2tNYW5hZ2VyLmNvbmZpZ3VyZShbY2JdKTtcbiAgICAgICAgY29uc3QgcnVuTWFuYWdlciA9IGF3YWl0IGNtPy5oYW5kbGVDaGFpblN0YXJ0KHtcbiAgICAgICAgICAgIGxjOiAxLFxuICAgICAgICAgICAgdHlwZTogXCJub3RfaW1wbGVtZW50ZWRcIixcbiAgICAgICAgICAgIGlkOiBbXCJsYW5nY2hhaW5cIiwgXCJjYWxsYmFja3NcIiwgXCJncm91cHNcIiwgZ3JvdXBfbmFtZV0sXG4gICAgICAgIH0sIGlucHV0cyA/PyB7fSk7XG4gICAgICAgIGlmICghcnVuTWFuYWdlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGNyZWF0ZSBydW4gZ3JvdXAgY2FsbGJhY2sgbWFuYWdlci5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJ1bk1hbmFnZXI7XG4gICAgfVxuICAgIGFzeW5jIHN0YXJ0KGlucHV0cykge1xuICAgICAgICBpZiAoIXRoaXMucnVuTWFuYWdlcikge1xuICAgICAgICAgICAgdGhpcy5ydW5NYW5hZ2VyID0gYXdhaXQgdGhpcy5nZXRUcmFjZUdyb3VwQ2FsbGJhY2tNYW5hZ2VyKHRoaXMuZ3JvdXBOYW1lLCBpbnB1dHMsIHRoaXMub3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMucnVuTWFuYWdlci5nZXRDaGlsZCgpO1xuICAgIH1cbiAgICBhc3luYyBlcnJvcihlcnIpIHtcbiAgICAgICAgaWYgKHRoaXMucnVuTWFuYWdlcikge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5ydW5NYW5hZ2VyLmhhbmRsZUNoYWluRXJyb3IoZXJyKTtcbiAgICAgICAgICAgIHRoaXMucnVuTWFuYWdlciA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBlbmQob3V0cHV0KSB7XG4gICAgICAgIGlmICh0aGlzLnJ1bk1hbmFnZXIpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucnVuTWFuYWdlci5oYW5kbGVDaGFpbkVuZChvdXRwdXQgPz8ge30pO1xuICAgICAgICAgICAgdGhpcy5ydW5NYW5hZ2VyID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgfVxufVxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmZ1bmN0aW9uIF9jb2VyY2VUb0RpY3QodmFsdWUsIGRlZmF1bHRLZXkpIHtcbiAgICByZXR1cm4gdmFsdWUgJiYgIUFycmF5LmlzQXJyYXkodmFsdWUpICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIlxuICAgICAgICA/IHZhbHVlXG4gICAgICAgIDogeyBbZGVmYXVsdEtleV06IHZhbHVlIH07XG59XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHRyYWNlQXNHcm91cChncm91cE9wdGlvbnMsIGVuY2xvc2VkQ29kZSwgLi4uYXJncykge1xuICAgIGNvbnN0IHRyYWNlR3JvdXAgPSBuZXcgVHJhY2VHcm91cChncm91cE9wdGlvbnMubmFtZSwgZ3JvdXBPcHRpb25zKTtcbiAgICBjb25zdCBjYWxsYmFja01hbmFnZXIgPSBhd2FpdCB0cmFjZUdyb3VwLnN0YXJ0KHsgLi4uYXJncyB9KTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBlbmNsb3NlZENvZGUoY2FsbGJhY2tNYW5hZ2VyLCAuLi5hcmdzKTtcbiAgICAgICAgYXdhaXQgdHJhY2VHcm91cC5lbmQoX2NvZXJjZVRvRGljdChyZXN1bHQsIFwib3V0cHV0XCIpKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBhd2FpdCB0cmFjZUdyb3VwLmVycm9yKGVycik7XG4gICAgICAgIHRocm93IGVycjtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsidjQiLCJ1dWlkdjQiLCJCYXNlQ2FsbGJhY2tIYW5kbGVyIiwiQ29uc29sZUNhbGxiYWNrSGFuZGxlciIsImdldFRyYWNpbmdWMkNhbGxiYWNrSGFuZGxlciIsImdldEJ1ZmZlclN0cmluZyIsImdldEVudmlyb25tZW50VmFyaWFibGUiLCJMYW5nQ2hhaW5UcmFjZXIiLCJjb25zdW1lQ2FsbGJhY2siLCJjb25zb2xlIiwid2FybiIsImpvaW4iLCJwYXJzZUNhbGxiYWNrQ29uZmlnQXJnIiwiYXJnIiwiQXJyYXkiLCJpc0FycmF5IiwiY2FsbGJhY2tzIiwiQmFzZUNhbGxiYWNrTWFuYWdlciIsInNldEhhbmRsZXIiLCJoYW5kbGVyIiwic2V0SGFuZGxlcnMiLCJCYXNlUnVuTWFuYWdlciIsImNvbnN0cnVjdG9yIiwicnVuSWQiLCJoYW5kbGVycyIsImluaGVyaXRhYmxlSGFuZGxlcnMiLCJ0YWdzIiwiaW5oZXJpdGFibGVUYWdzIiwibWV0YWRhdGEiLCJpbmhlcml0YWJsZU1ldGFkYXRhIiwiX3BhcmVudFJ1bklkIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImhhbmRsZVRleHQiLCJ0ZXh0IiwiUHJvbWlzZSIsImFsbCIsIm1hcCIsImVyciIsImVycm9yIiwibmFtZSIsImF3YWl0SGFuZGxlcnMiLCJDYWxsYmFja01hbmFnZXJGb3JSZXRyaWV2ZXJSdW4iLCJnZXRDaGlsZCIsInRhZyIsIm1hbmFnZXIiLCJDYWxsYmFja01hbmFnZXIiLCJhZGRUYWdzIiwiYWRkTWV0YWRhdGEiLCJoYW5kbGVSZXRyaWV2ZXJFbmQiLCJkb2N1bWVudHMiLCJpZ25vcmVSZXRyaWV2ZXIiLCJoYW5kbGVSZXRyaWV2ZXJFcnJvciIsIkNhbGxiYWNrTWFuYWdlckZvckxMTVJ1biIsImhhbmRsZUxMTU5ld1Rva2VuIiwidG9rZW4iLCJpZHgiLCJfcnVuSWQiLCJfdGFncyIsImZpZWxkcyIsImlnbm9yZUxMTSIsInByb21wdCIsImNvbXBsZXRpb24iLCJoYW5kbGVMTE1FcnJvciIsImhhbmRsZUxMTUVuZCIsIm91dHB1dCIsIkNhbGxiYWNrTWFuYWdlckZvckNoYWluUnVuIiwiaGFuZGxlQ2hhaW5FcnJvciIsImt3YXJncyIsImlnbm9yZUNoYWluIiwiaGFuZGxlQ2hhaW5FbmQiLCJoYW5kbGVBZ2VudEFjdGlvbiIsImFjdGlvbiIsImlnbm9yZUFnZW50IiwiaGFuZGxlQWdlbnRFbmQiLCJDYWxsYmFja01hbmFnZXJGb3JUb29sUnVuIiwiaGFuZGxlVG9vbEVycm9yIiwiaGFuZGxlVG9vbEVuZCIsInBhcmVudFJ1bklkIiwib3B0aW9ucyIsImdldFBhcmVudFJ1bklkIiwiaGFuZGxlTExNU3RhcnQiLCJsbG0iLCJwcm9tcHRzIiwidW5kZWZpbmVkIiwiZXh0cmFQYXJhbXMiLCJfbWV0YWRhdGEiLCJydW5OYW1lIiwiaGFuZGxlQ2hhdE1vZGVsU3RhcnQiLCJtZXNzYWdlcyIsIm1lc3NhZ2VHcm91cCIsIm1lc3NhZ2VTdHJpbmciLCJoYW5kbGVDaGFpblN0YXJ0IiwiY2hhaW4iLCJpbnB1dHMiLCJydW5UeXBlIiwiaGFuZGxlVG9vbFN0YXJ0IiwidG9vbCIsImlucHV0IiwiaGFuZGxlUmV0cmlldmVyU3RhcnQiLCJyZXRyaWV2ZXIiLCJxdWVyeSIsImFkZEhhbmRsZXIiLCJpbmhlcml0IiwicHVzaCIsInJlbW92ZUhhbmRsZXIiLCJmaWx0ZXIiLCJfaGFuZGxlciIsInJlbW92ZVRhZ3MiLCJpbmNsdWRlcyIsInJlbW92ZU1ldGFkYXRhIiwia2V5Iiwia2V5cyIsImNvcHkiLCJhZGRpdGlvbmFsSGFuZGxlcnMiLCJpbmhlcml0YWJsZSIsImgiLCJzb21lIiwiZnJvbUhhbmRsZXJzIiwiSGFuZGxlciIsImFzc2lnbiIsImNvbmZpZ3VyZSIsImxvY2FsSGFuZGxlcnMiLCJsb2NhbFRhZ3MiLCJsb2NhbE1ldGFkYXRhIiwiY2FsbGJhY2tNYW5hZ2VyIiwiZW5zdXJlSGFuZGxlciIsInZlcmJvc2VFbmFibGVkIiwidmVyYm9zZSIsInRyYWNpbmdWMkVuYWJsZWQiLCJ0cmFjaW5nRW5hYmxlZCIsInByb3RvdHlwZSIsImNvbnNvbGVIYW5kbGVyIiwiZnJvbU1ldGhvZHMiLCJUcmFjZUdyb3VwIiwiZ3JvdXBOYW1lIiwiZ2V0VHJhY2VHcm91cENhbGxiYWNrTWFuYWdlciIsImdyb3VwX25hbWUiLCJjYiIsImNtIiwicnVuTWFuYWdlciIsImxjIiwidHlwZSIsImlkIiwiRXJyb3IiLCJzdGFydCIsImVuZCIsIl9jb2VyY2VUb0RpY3QiLCJkZWZhdWx0S2V5IiwidHJhY2VBc0dyb3VwIiwiZ3JvdXBPcHRpb25zIiwiZW5jbG9zZWRDb2RlIiwiYXJncyIsInRyYWNlR3JvdXAiLCJyZXN1bHQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/callbacks/manager.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/callbacks/promises.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/callbacks/promises.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   awaitAllCallbacks: () => (/* binding */ awaitAllCallbacks),\n/* harmony export */   consumeCallback: () => (/* binding */ consumeCallback)\n/* harmony export */ });\n/* harmony import */ var p_queue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! p-queue */ \"(rsc)/./node_modules/p-queue/dist/index.js\");\n\nlet queue;\n/**\n * Creates a queue using the p-queue library. The queue is configured to\n * auto-start and has a concurrency of 1, meaning it will process tasks\n * one at a time.\n */ function createQueue() {\n    const PQueue =  true ? p_queue__WEBPACK_IMPORTED_MODULE_0__[\"default\"] : p_queue__WEBPACK_IMPORTED_MODULE_0__;\n    return new PQueue({\n        autoStart: true,\n        concurrency: 1\n    });\n}\n/**\n * Consume a promise, either adding it to the queue or waiting for it to resolve\n * @param promise Promise to consume\n * @param wait Whether to wait for the promise to resolve or resolve immediately\n */ async function consumeCallback(promiseFn, wait) {\n    if (wait === true) {\n        await promiseFn();\n    } else {\n        if (typeof queue === \"undefined\") {\n            queue = createQueue();\n        }\n        void queue.add(promiseFn);\n    }\n}\n/**\n * Waits for all promises in the queue to resolve. If the queue is\n * undefined, it immediately resolves a promise.\n */ function awaitAllCallbacks() {\n    return typeof queue !== \"undefined\" ? queue.onIdle() : Promise.resolve();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvY2FsbGJhY2tzL3Byb21pc2VzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnQztBQUNoQyxJQUFJQztBQUNKOzs7O0NBSUMsR0FDRCxTQUFTQztJQUNMLE1BQU1DLFNBQVMsS0FBc0JILEdBQUdBLCtDQUFpQixHQUFHQSxvQ0FBU0E7SUFDckUsT0FBTyxJQUFJRyxPQUFPO1FBQ2RFLFdBQVc7UUFDWEMsYUFBYTtJQUNqQjtBQUNKO0FBQ0E7Ozs7Q0FJQyxHQUNNLGVBQWVDLGdCQUFnQkMsU0FBUyxFQUFFQyxJQUFJO0lBQ2pELElBQUlBLFNBQVMsTUFBTTtRQUNmLE1BQU1EO0lBQ1YsT0FDSztRQUNELElBQUksT0FBT1AsVUFBVSxhQUFhO1lBQzlCQSxRQUFRQztRQUNaO1FBQ0EsS0FBS0QsTUFBTVMsR0FBRyxDQUFDRjtJQUNuQjtBQUNKO0FBQ0E7OztDQUdDLEdBQ00sU0FBU0c7SUFDWixPQUFPLE9BQU9WLFVBQVUsY0FBY0EsTUFBTVcsTUFBTSxLQUFLQyxRQUFRQyxPQUFPO0FBQzFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2NhbGxiYWNrcy9wcm9taXNlcy5qcz9lYzMzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQUXVldWVNb2QgZnJvbSBcInAtcXVldWVcIjtcbmxldCBxdWV1ZTtcbi8qKlxuICogQ3JlYXRlcyBhIHF1ZXVlIHVzaW5nIHRoZSBwLXF1ZXVlIGxpYnJhcnkuIFRoZSBxdWV1ZSBpcyBjb25maWd1cmVkIHRvXG4gKiBhdXRvLXN0YXJ0IGFuZCBoYXMgYSBjb25jdXJyZW5jeSBvZiAxLCBtZWFuaW5nIGl0IHdpbGwgcHJvY2VzcyB0YXNrc1xuICogb25lIGF0IGEgdGltZS5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlUXVldWUoKSB7XG4gICAgY29uc3QgUFF1ZXVlID0gXCJkZWZhdWx0XCIgaW4gUFF1ZXVlTW9kID8gUFF1ZXVlTW9kLmRlZmF1bHQgOiBQUXVldWVNb2Q7XG4gICAgcmV0dXJuIG5ldyBQUXVldWUoe1xuICAgICAgICBhdXRvU3RhcnQ6IHRydWUsXG4gICAgICAgIGNvbmN1cnJlbmN5OiAxLFxuICAgIH0pO1xufVxuLyoqXG4gKiBDb25zdW1lIGEgcHJvbWlzZSwgZWl0aGVyIGFkZGluZyBpdCB0byB0aGUgcXVldWUgb3Igd2FpdGluZyBmb3IgaXQgdG8gcmVzb2x2ZVxuICogQHBhcmFtIHByb21pc2UgUHJvbWlzZSB0byBjb25zdW1lXG4gKiBAcGFyYW0gd2FpdCBXaGV0aGVyIHRvIHdhaXQgZm9yIHRoZSBwcm9taXNlIHRvIHJlc29sdmUgb3IgcmVzb2x2ZSBpbW1lZGlhdGVseVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29uc3VtZUNhbGxiYWNrKHByb21pc2VGbiwgd2FpdCkge1xuICAgIGlmICh3YWl0ID09PSB0cnVlKSB7XG4gICAgICAgIGF3YWl0IHByb21pc2VGbigpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKHR5cGVvZiBxdWV1ZSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgcXVldWUgPSBjcmVhdGVRdWV1ZSgpO1xuICAgICAgICB9XG4gICAgICAgIHZvaWQgcXVldWUuYWRkKHByb21pc2VGbik7XG4gICAgfVxufVxuLyoqXG4gKiBXYWl0cyBmb3IgYWxsIHByb21pc2VzIGluIHRoZSBxdWV1ZSB0byByZXNvbHZlLiBJZiB0aGUgcXVldWUgaXNcbiAqIHVuZGVmaW5lZCwgaXQgaW1tZWRpYXRlbHkgcmVzb2x2ZXMgYSBwcm9taXNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gYXdhaXRBbGxDYWxsYmFja3MoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBxdWV1ZSAhPT0gXCJ1bmRlZmluZWRcIiA/IHF1ZXVlLm9uSWRsZSgpIDogUHJvbWlzZS5yZXNvbHZlKCk7XG59XG4iXSwibmFtZXMiOlsiUFF1ZXVlTW9kIiwicXVldWUiLCJjcmVhdGVRdWV1ZSIsIlBRdWV1ZSIsImRlZmF1bHQiLCJhdXRvU3RhcnQiLCJjb25jdXJyZW5jeSIsImNvbnN1bWVDYWxsYmFjayIsInByb21pc2VGbiIsIndhaXQiLCJhZGQiLCJhd2FpdEFsbENhbGxiYWNrcyIsIm9uSWRsZSIsIlByb21pc2UiLCJyZXNvbHZlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/callbacks/promises.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/documents/document.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/documents/document.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Document: () => (/* binding */ Document)\n/* harmony export */ });\n/**\n * Interface for interacting with a document.\n */ class Document {\n    constructor(fields){\n        Object.defineProperty(this, \"pageContent\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.pageContent = fields.pageContent ? fields.pageContent.toString() : this.pageContent;\n        this.metadata = fields.metadata ?? {};\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZG9jdW1lbnRzL2RvY3VtZW50LmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTs7Q0FFQyxHQUNNLE1BQU1BO0lBQ1RDLFlBQVlDLE1BQU0sQ0FBRTtRQUNoQkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxlQUFlO1lBQ3ZDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxZQUFZO1lBQ3BDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNDLFdBQVcsR0FBR1AsT0FBT08sV0FBVyxHQUMvQlAsT0FBT08sV0FBVyxDQUFDQyxRQUFRLEtBQzNCLElBQUksQ0FBQ0QsV0FBVztRQUN0QixJQUFJLENBQUNFLFFBQVEsR0FBR1QsT0FBT1MsUUFBUSxJQUFJLENBQUM7SUFDeEM7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLWZvcm0tYnVpbGRlci10dXRvcmlhbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9kb2N1bWVudHMvZG9jdW1lbnQuanM/YjRmYSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEludGVyZmFjZSBmb3IgaW50ZXJhY3Rpbmcgd2l0aCBhIGRvY3VtZW50LlxuICovXG5leHBvcnQgY2xhc3MgRG9jdW1lbnQge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJwYWdlQ29udGVudFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtZXRhZGF0YVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnBhZ2VDb250ZW50ID0gZmllbGRzLnBhZ2VDb250ZW50XG4gICAgICAgICAgICA/IGZpZWxkcy5wYWdlQ29udGVudC50b1N0cmluZygpXG4gICAgICAgICAgICA6IHRoaXMucGFnZUNvbnRlbnQ7XG4gICAgICAgIHRoaXMubWV0YWRhdGEgPSBmaWVsZHMubWV0YWRhdGEgPz8ge307XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkRvY3VtZW50IiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwicGFnZUNvbnRlbnQiLCJ0b1N0cmluZyIsIm1ldGFkYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/documents/document.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/documents/index.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/documents/index.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseDocumentTransformer: () => (/* reexport safe */ _transformers_js__WEBPACK_IMPORTED_MODULE_1__.BaseDocumentTransformer),\n/* harmony export */   Document: () => (/* reexport safe */ _document_js__WEBPACK_IMPORTED_MODULE_0__.Document),\n/* harmony export */   MappingDocumentTransformer: () => (/* reexport safe */ _transformers_js__WEBPACK_IMPORTED_MODULE_1__.MappingDocumentTransformer)\n/* harmony export */ });\n/* harmony import */ var _document_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./document.js */ \"(rsc)/./node_modules/@langchain/core/dist/documents/document.js\");\n/* harmony import */ var _transformers_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./transformers.js */ \"(rsc)/./node_modules/@langchain/core/dist/documents/transformers.js\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZG9jdW1lbnRzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQThCO0FBQ0kiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1mb3JtLWJ1aWxkZXItdHV0b3JpYWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZG9jdW1lbnRzL2luZGV4LmpzPzI2MjQiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSBcIi4vZG9jdW1lbnQuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3RyYW5zZm9ybWVycy5qc1wiO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/documents/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/documents/transformers.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/documents/transformers.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseDocumentTransformer: () => (/* binding */ BaseDocumentTransformer),\n/* harmony export */   MappingDocumentTransformer: () => (/* binding */ MappingDocumentTransformer)\n/* harmony export */ });\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runnables/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n\n/**\n * Abstract base class for document transformation systems.\n *\n * A document transformation system takes an array of Documents and returns an\n * array of transformed Documents. These arrays do not necessarily have to have\n * the same length.\n *\n * One example of this is a text splitter that splits a large document into\n * many smaller documents.\n */ class BaseDocumentTransformer extends _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__.Runnable {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"documents\",\n                \"transformers\"\n            ]\n        });\n    }\n    /**\n     * Method to invoke the document transformation. This method calls the\n     * transformDocuments method with the provided input.\n     * @param input The input documents to be transformed.\n     * @param _options Optional configuration object to customize the behavior of callbacks.\n     * @returns A Promise that resolves to the transformed documents.\n     */ invoke(input, _options) {\n        return this.transformDocuments(input);\n    }\n}\n/**\n * Class for document transformers that return exactly one transformed document\n * for each input document.\n */ class MappingDocumentTransformer extends BaseDocumentTransformer {\n    async transformDocuments(documents) {\n        const newDocuments = [];\n        for (const document of documents){\n            const transformedDocument = await this._transformDocument(document);\n            newDocuments.push(transformedDocument);\n        }\n        return newDocuments;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZG9jdW1lbnRzL3RyYW5zZm9ybWVycy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBZ0Q7QUFDaEQ7Ozs7Ozs7OztDQVNDLEdBQ00sTUFBTUMsZ0NBQWdDRCx3REFBUUE7SUFDakRFLGFBQWM7UUFDVixLQUFLLElBQUlDO1FBQ1RDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO2dCQUFDO2dCQUFrQjtnQkFBYTthQUFlO1FBQzFEO0lBQ0o7SUFDQTs7Ozs7O0tBTUMsR0FDREMsT0FBT0MsS0FBSyxFQUFFQyxRQUFRLEVBQUU7UUFDcEIsT0FBTyxJQUFJLENBQUNDLGtCQUFrQixDQUFDRjtJQUNuQztBQUNKO0FBQ0E7OztDQUdDLEdBQ00sTUFBTUcsbUNBQW1DYjtJQUM1QyxNQUFNWSxtQkFBbUJFLFNBQVMsRUFBRTtRQUNoQyxNQUFNQyxlQUFlLEVBQUU7UUFDdkIsS0FBSyxNQUFNQyxZQUFZRixVQUFXO1lBQzlCLE1BQU1HLHNCQUFzQixNQUFNLElBQUksQ0FBQ0Msa0JBQWtCLENBQUNGO1lBQzFERCxhQUFhSSxJQUFJLENBQUNGO1FBQ3RCO1FBQ0EsT0FBT0Y7SUFDWDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2RvY3VtZW50cy90cmFuc2Zvcm1lcnMuanM/NTAwMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSdW5uYWJsZSB9IGZyb20gXCIuLi9ydW5uYWJsZXMvYmFzZS5qc1wiO1xuLyoqXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzIGZvciBkb2N1bWVudCB0cmFuc2Zvcm1hdGlvbiBzeXN0ZW1zLlxuICpcbiAqIEEgZG9jdW1lbnQgdHJhbnNmb3JtYXRpb24gc3lzdGVtIHRha2VzIGFuIGFycmF5IG9mIERvY3VtZW50cyBhbmQgcmV0dXJucyBhblxuICogYXJyYXkgb2YgdHJhbnNmb3JtZWQgRG9jdW1lbnRzLiBUaGVzZSBhcnJheXMgZG8gbm90IG5lY2Vzc2FyaWx5IGhhdmUgdG8gaGF2ZVxuICogdGhlIHNhbWUgbGVuZ3RoLlxuICpcbiAqIE9uZSBleGFtcGxlIG9mIHRoaXMgaXMgYSB0ZXh0IHNwbGl0dGVyIHRoYXQgc3BsaXRzIGEgbGFyZ2UgZG9jdW1lbnQgaW50b1xuICogbWFueSBzbWFsbGVyIGRvY3VtZW50cy5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VEb2N1bWVudFRyYW5zZm9ybWVyIGV4dGVuZHMgUnVubmFibGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwiZG9jdW1lbnRzXCIsIFwidHJhbnNmb3JtZXJzXCJdXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdG8gaW52b2tlIHRoZSBkb2N1bWVudCB0cmFuc2Zvcm1hdGlvbi4gVGhpcyBtZXRob2QgY2FsbHMgdGhlXG4gICAgICogdHJhbnNmb3JtRG9jdW1lbnRzIG1ldGhvZCB3aXRoIHRoZSBwcm92aWRlZCBpbnB1dC5cbiAgICAgKiBAcGFyYW0gaW5wdXQgVGhlIGlucHV0IGRvY3VtZW50cyB0byBiZSB0cmFuc2Zvcm1lZC5cbiAgICAgKiBAcGFyYW0gX29wdGlvbnMgT3B0aW9uYWwgY29uZmlndXJhdGlvbiBvYmplY3QgdG8gY3VzdG9taXplIHRoZSBiZWhhdmlvciBvZiBjYWxsYmFja3MuXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIHRyYW5zZm9ybWVkIGRvY3VtZW50cy5cbiAgICAgKi9cbiAgICBpbnZva2UoaW5wdXQsIF9vcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybURvY3VtZW50cyhpbnB1dCk7XG4gICAgfVxufVxuLyoqXG4gKiBDbGFzcyBmb3IgZG9jdW1lbnQgdHJhbnNmb3JtZXJzIHRoYXQgcmV0dXJuIGV4YWN0bHkgb25lIHRyYW5zZm9ybWVkIGRvY3VtZW50XG4gKiBmb3IgZWFjaCBpbnB1dCBkb2N1bWVudC5cbiAqL1xuZXhwb3J0IGNsYXNzIE1hcHBpbmdEb2N1bWVudFRyYW5zZm9ybWVyIGV4dGVuZHMgQmFzZURvY3VtZW50VHJhbnNmb3JtZXIge1xuICAgIGFzeW5jIHRyYW5zZm9ybURvY3VtZW50cyhkb2N1bWVudHMpIHtcbiAgICAgICAgY29uc3QgbmV3RG9jdW1lbnRzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgZG9jdW1lbnQgb2YgZG9jdW1lbnRzKSB7XG4gICAgICAgICAgICBjb25zdCB0cmFuc2Zvcm1lZERvY3VtZW50ID0gYXdhaXQgdGhpcy5fdHJhbnNmb3JtRG9jdW1lbnQoZG9jdW1lbnQpO1xuICAgICAgICAgICAgbmV3RG9jdW1lbnRzLnB1c2godHJhbnNmb3JtZWREb2N1bWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ld0RvY3VtZW50cztcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiUnVubmFibGUiLCJCYXNlRG9jdW1lbnRUcmFuc2Zvcm1lciIsImNvbnN0cnVjdG9yIiwiYXJndW1lbnRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImludm9rZSIsImlucHV0IiwiX29wdGlvbnMiLCJ0cmFuc2Zvcm1Eb2N1bWVudHMiLCJNYXBwaW5nRG9jdW1lbnRUcmFuc2Zvcm1lciIsImRvY3VtZW50cyIsIm5ld0RvY3VtZW50cyIsImRvY3VtZW50IiwidHJhbnNmb3JtZWREb2N1bWVudCIsIl90cmFuc2Zvcm1Eb2N1bWVudCIsInB1c2giXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/documents/transformers.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/embeddings.js":
/*!*********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/embeddings.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Embeddings: () => (/* binding */ Embeddings)\n/* harmony export */ });\n/* harmony import */ var _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils/async_caller.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/async_caller.js\");\n\n/**\n * An abstract class that provides methods for embedding documents and\n * queries using LangChain.\n */ class Embeddings {\n    constructor(params){\n        /**\n         * The async caller should be used by subclasses to make any async calls,\n         * which will thus benefit from the concurrency and retry logic.\n         */ Object.defineProperty(this, \"caller\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.caller = new _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_0__.AsyncCaller(params ?? {});\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZW1iZWRkaW5ncy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFzRDtBQUN0RDs7O0NBR0MsR0FDTSxNQUFNQztJQUNUQyxZQUFZQyxNQUFNLENBQUU7UUFDaEI7OztTQUdDLEdBQ0RDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsVUFBVTtZQUNsQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDQyxNQUFNLEdBQUcsSUFBSVYsK0RBQVdBLENBQUNHLFVBQVUsQ0FBQztJQUM3QztBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2VtYmVkZGluZ3MuanM/ZTE5ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBc3luY0NhbGxlciB9IGZyb20gXCIuL3V0aWxzL2FzeW5jX2NhbGxlci5qc1wiO1xuLyoqXG4gKiBBbiBhYnN0cmFjdCBjbGFzcyB0aGF0IHByb3ZpZGVzIG1ldGhvZHMgZm9yIGVtYmVkZGluZyBkb2N1bWVudHMgYW5kXG4gKiBxdWVyaWVzIHVzaW5nIExhbmdDaGFpbi5cbiAqL1xuZXhwb3J0IGNsYXNzIEVtYmVkZGluZ3Mge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGFzeW5jIGNhbGxlciBzaG91bGQgYmUgdXNlZCBieSBzdWJjbGFzc2VzIHRvIG1ha2UgYW55IGFzeW5jIGNhbGxzLFxuICAgICAgICAgKiB3aGljaCB3aWxsIHRodXMgYmVuZWZpdCBmcm9tIHRoZSBjb25jdXJyZW5jeSBhbmQgcmV0cnkgbG9naWMuXG4gICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjYWxsZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jYWxsZXIgPSBuZXcgQXN5bmNDYWxsZXIocGFyYW1zID8/IHt9KTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiQXN5bmNDYWxsZXIiLCJFbWJlZGRpbmdzIiwiY29uc3RydWN0b3IiLCJwYXJhbXMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiY2FsbGVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/embeddings.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/example_selectors/base.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/example_selectors/base.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseExampleSelector: () => (/* binding */ BaseExampleSelector)\n/* harmony export */ });\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../load/serializable.js */ \"(rsc)/./node_modules/@langchain/core/dist/load/serializable.js\");\n\n/**\n * Base class for example selectors.\n */ class BaseExampleSelector extends _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.Serializable {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"example_selectors\",\n                \"base\"\n            ]\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZXhhbXBsZV9zZWxlY3RvcnMvYmFzZS5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUF1RDtBQUN2RDs7Q0FFQyxHQUNNLE1BQU1DLDRCQUE0QkQsK0RBQVlBO0lBQ2pERSxhQUFjO1FBQ1YsS0FBSyxJQUFJQztRQUNUQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztnQkFBQztnQkFBa0I7Z0JBQXFCO2FBQU87UUFDMUQ7SUFDSjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2V4YW1wbGVfc2VsZWN0b3JzL2Jhc2UuanM/YzUzZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTZXJpYWxpemFibGUgfSBmcm9tIFwiLi4vbG9hZC9zZXJpYWxpemFibGUuanNcIjtcbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgZXhhbXBsZSBzZWxlY3RvcnMuXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlRXhhbXBsZVNlbGVjdG9yIGV4dGVuZHMgU2VyaWFsaXphYmxlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcImV4YW1wbGVfc2VsZWN0b3JzXCIsIFwiYmFzZVwiXVxuICAgICAgICB9KTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiU2VyaWFsaXphYmxlIiwiQmFzZUV4YW1wbGVTZWxlY3RvciIsImNvbnN0cnVjdG9yIiwiYXJndW1lbnRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/example_selectors/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/example_selectors/conditional.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/example_selectors/conditional.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BasePromptSelector: () => (/* binding */ BasePromptSelector),\n/* harmony export */   ConditionalPromptSelector: () => (/* binding */ ConditionalPromptSelector),\n/* harmony export */   isChatModel: () => (/* binding */ isChatModel),\n/* harmony export */   isLLM: () => (/* binding */ isLLM)\n/* harmony export */ });\n/**\n * Abstract class that defines the interface for selecting a prompt for a\n * given language model.\n */ class BasePromptSelector {\n    /**\n     * Asynchronous version of `getPrompt` that also accepts an options object\n     * for partial variables.\n     * @param llm The language model for which to get a prompt.\n     * @param options Optional object for partial variables.\n     * @returns A Promise that resolves to a prompt template.\n     */ async getPromptAsync(llm, options) {\n        const prompt = this.getPrompt(llm);\n        return prompt.partial(options?.partialVariables ?? {});\n    }\n}\n/**\n * Concrete implementation of `BasePromptSelector` that selects a prompt\n * based on a set of conditions. It has a default prompt that it returns\n * if none of the conditions are met.\n */ class ConditionalPromptSelector extends BasePromptSelector {\n    constructor(default_prompt, conditionals = []){\n        super();\n        Object.defineProperty(this, \"defaultPrompt\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"conditionals\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.defaultPrompt = default_prompt;\n        this.conditionals = conditionals;\n    }\n    /**\n     * Method that selects a prompt based on a set of conditions. If none of\n     * the conditions are met, it returns the default prompt.\n     * @param llm The language model for which to get a prompt.\n     * @returns A prompt template.\n     */ getPrompt(llm) {\n        for (const [condition, prompt] of this.conditionals){\n            if (condition(llm)) {\n                return prompt;\n            }\n        }\n        return this.defaultPrompt;\n    }\n}\n/**\n * Type guard function that checks if a given language model is of type\n * `BaseLLM`.\n */ function isLLM(llm) {\n    return llm._modelType() === \"base_llm\";\n}\n/**\n * Type guard function that checks if a given language model is of type\n * `BaseChatModel`.\n */ function isChatModel(llm) {\n    return llm._modelType() === \"base_chat_model\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZXhhbXBsZV9zZWxlY3RvcnMvY29uZGl0aW9uYWwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7Q0FHQyxHQUNNLE1BQU1BO0lBQ1Q7Ozs7OztLQU1DLEdBQ0QsTUFBTUMsZUFBZUMsR0FBRyxFQUFFQyxPQUFPLEVBQUU7UUFDL0IsTUFBTUMsU0FBUyxJQUFJLENBQUNDLFNBQVMsQ0FBQ0g7UUFDOUIsT0FBT0UsT0FBT0UsT0FBTyxDQUFDSCxTQUFTSSxvQkFBb0IsQ0FBQztJQUN4RDtBQUNKO0FBQ0E7Ozs7Q0FJQyxHQUNNLE1BQU1DLGtDQUFrQ1I7SUFDM0NTLFlBQVlDLGNBQWMsRUFBRUMsZUFBZSxFQUFFLENBQUU7UUFDM0MsS0FBSztRQUNMQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGlCQUFpQjtZQUN6Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNDLGFBQWEsR0FBR1I7UUFDckIsSUFBSSxDQUFDQyxZQUFZLEdBQUdBO0lBQ3hCO0lBQ0E7Ozs7O0tBS0MsR0FDRE4sVUFBVUgsR0FBRyxFQUFFO1FBQ1gsS0FBSyxNQUFNLENBQUNpQixXQUFXZixPQUFPLElBQUksSUFBSSxDQUFDTyxZQUFZLENBQUU7WUFDakQsSUFBSVEsVUFBVWpCLE1BQU07Z0JBQ2hCLE9BQU9FO1lBQ1g7UUFDSjtRQUNBLE9BQU8sSUFBSSxDQUFDYyxhQUFhO0lBQzdCO0FBQ0o7QUFDQTs7O0NBR0MsR0FDTSxTQUFTRSxNQUFNbEIsR0FBRztJQUNyQixPQUFPQSxJQUFJbUIsVUFBVSxPQUFPO0FBQ2hDO0FBQ0E7OztDQUdDLEdBQ00sU0FBU0MsWUFBWXBCLEdBQUc7SUFDM0IsT0FBT0EsSUFBSW1CLFVBQVUsT0FBTztBQUNoQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLWZvcm0tYnVpbGRlci10dXRvcmlhbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9leGFtcGxlX3NlbGVjdG9ycy9jb25kaXRpb25hbC5qcz8xY2YxIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQWJzdHJhY3QgY2xhc3MgdGhhdCBkZWZpbmVzIHRoZSBpbnRlcmZhY2UgZm9yIHNlbGVjdGluZyBhIHByb21wdCBmb3IgYVxuICogZ2l2ZW4gbGFuZ3VhZ2UgbW9kZWwuXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlUHJvbXB0U2VsZWN0b3Ige1xuICAgIC8qKlxuICAgICAqIEFzeW5jaHJvbm91cyB2ZXJzaW9uIG9mIGBnZXRQcm9tcHRgIHRoYXQgYWxzbyBhY2NlcHRzIGFuIG9wdGlvbnMgb2JqZWN0XG4gICAgICogZm9yIHBhcnRpYWwgdmFyaWFibGVzLlxuICAgICAqIEBwYXJhbSBsbG0gVGhlIGxhbmd1YWdlIG1vZGVsIGZvciB3aGljaCB0byBnZXQgYSBwcm9tcHQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgT3B0aW9uYWwgb2JqZWN0IGZvciBwYXJ0aWFsIHZhcmlhYmxlcy5cbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIHByb21wdCB0ZW1wbGF0ZS5cbiAgICAgKi9cbiAgICBhc3luYyBnZXRQcm9tcHRBc3luYyhsbG0sIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcHJvbXB0ID0gdGhpcy5nZXRQcm9tcHQobGxtKTtcbiAgICAgICAgcmV0dXJuIHByb21wdC5wYXJ0aWFsKG9wdGlvbnM/LnBhcnRpYWxWYXJpYWJsZXMgPz8ge30pO1xuICAgIH1cbn1cbi8qKlxuICogQ29uY3JldGUgaW1wbGVtZW50YXRpb24gb2YgYEJhc2VQcm9tcHRTZWxlY3RvcmAgdGhhdCBzZWxlY3RzIGEgcHJvbXB0XG4gKiBiYXNlZCBvbiBhIHNldCBvZiBjb25kaXRpb25zLiBJdCBoYXMgYSBkZWZhdWx0IHByb21wdCB0aGF0IGl0IHJldHVybnNcbiAqIGlmIG5vbmUgb2YgdGhlIGNvbmRpdGlvbnMgYXJlIG1ldC5cbiAqL1xuZXhwb3J0IGNsYXNzIENvbmRpdGlvbmFsUHJvbXB0U2VsZWN0b3IgZXh0ZW5kcyBCYXNlUHJvbXB0U2VsZWN0b3Ige1xuICAgIGNvbnN0cnVjdG9yKGRlZmF1bHRfcHJvbXB0LCBjb25kaXRpb25hbHMgPSBbXSkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJkZWZhdWx0UHJvbXB0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNvbmRpdGlvbmFsc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmRlZmF1bHRQcm9tcHQgPSBkZWZhdWx0X3Byb21wdDtcbiAgICAgICAgdGhpcy5jb25kaXRpb25hbHMgPSBjb25kaXRpb25hbHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB0aGF0IHNlbGVjdHMgYSBwcm9tcHQgYmFzZWQgb24gYSBzZXQgb2YgY29uZGl0aW9ucy4gSWYgbm9uZSBvZlxuICAgICAqIHRoZSBjb25kaXRpb25zIGFyZSBtZXQsIGl0IHJldHVybnMgdGhlIGRlZmF1bHQgcHJvbXB0LlxuICAgICAqIEBwYXJhbSBsbG0gVGhlIGxhbmd1YWdlIG1vZGVsIGZvciB3aGljaCB0byBnZXQgYSBwcm9tcHQuXG4gICAgICogQHJldHVybnMgQSBwcm9tcHQgdGVtcGxhdGUuXG4gICAgICovXG4gICAgZ2V0UHJvbXB0KGxsbSkge1xuICAgICAgICBmb3IgKGNvbnN0IFtjb25kaXRpb24sIHByb21wdF0gb2YgdGhpcy5jb25kaXRpb25hbHMpIHtcbiAgICAgICAgICAgIGlmIChjb25kaXRpb24obGxtKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9tcHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdFByb21wdDtcbiAgICB9XG59XG4vKipcbiAqIFR5cGUgZ3VhcmQgZnVuY3Rpb24gdGhhdCBjaGVja3MgaWYgYSBnaXZlbiBsYW5ndWFnZSBtb2RlbCBpcyBvZiB0eXBlXG4gKiBgQmFzZUxMTWAuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0xMTShsbG0pIHtcbiAgICByZXR1cm4gbGxtLl9tb2RlbFR5cGUoKSA9PT0gXCJiYXNlX2xsbVwiO1xufVxuLyoqXG4gKiBUeXBlIGd1YXJkIGZ1bmN0aW9uIHRoYXQgY2hlY2tzIGlmIGEgZ2l2ZW4gbGFuZ3VhZ2UgbW9kZWwgaXMgb2YgdHlwZVxuICogYEJhc2VDaGF0TW9kZWxgLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNDaGF0TW9kZWwobGxtKSB7XG4gICAgcmV0dXJuIGxsbS5fbW9kZWxUeXBlKCkgPT09IFwiYmFzZV9jaGF0X21vZGVsXCI7XG59XG4iXSwibmFtZXMiOlsiQmFzZVByb21wdFNlbGVjdG9yIiwiZ2V0UHJvbXB0QXN5bmMiLCJsbG0iLCJvcHRpb25zIiwicHJvbXB0IiwiZ2V0UHJvbXB0IiwicGFydGlhbCIsInBhcnRpYWxWYXJpYWJsZXMiLCJDb25kaXRpb25hbFByb21wdFNlbGVjdG9yIiwiY29uc3RydWN0b3IiLCJkZWZhdWx0X3Byb21wdCIsImNvbmRpdGlvbmFscyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJkZWZhdWx0UHJvbXB0IiwiY29uZGl0aW9uIiwiaXNMTE0iLCJfbW9kZWxUeXBlIiwiaXNDaGF0TW9kZWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/example_selectors/conditional.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/example_selectors/index.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/example_selectors/index.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseExampleSelector: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseExampleSelector),\n/* harmony export */   BasePromptSelector: () => (/* reexport safe */ _conditional_js__WEBPACK_IMPORTED_MODULE_1__.BasePromptSelector),\n/* harmony export */   ConditionalPromptSelector: () => (/* reexport safe */ _conditional_js__WEBPACK_IMPORTED_MODULE_1__.ConditionalPromptSelector),\n/* harmony export */   LengthBasedExampleSelector: () => (/* reexport safe */ _length_based_js__WEBPACK_IMPORTED_MODULE_2__.LengthBasedExampleSelector),\n/* harmony export */   SemanticSimilarityExampleSelector: () => (/* reexport safe */ _semantic_similarity_js__WEBPACK_IMPORTED_MODULE_3__.SemanticSimilarityExampleSelector),\n/* harmony export */   isChatModel: () => (/* reexport safe */ _conditional_js__WEBPACK_IMPORTED_MODULE_1__.isChatModel),\n/* harmony export */   isLLM: () => (/* reexport safe */ _conditional_js__WEBPACK_IMPORTED_MODULE_1__.isLLM)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/example_selectors/base.js\");\n/* harmony import */ var _conditional_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./conditional.js */ \"(rsc)/./node_modules/@langchain/core/dist/example_selectors/conditional.js\");\n/* harmony import */ var _length_based_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./length_based.js */ \"(rsc)/./node_modules/@langchain/core/dist/example_selectors/length_based.js\");\n/* harmony import */ var _semantic_similarity_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./semantic_similarity.js */ \"(rsc)/./node_modules/@langchain/core/dist/example_selectors/semantic_similarity.js\");\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZXhhbXBsZV9zZWxlY3RvcnMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBMEI7QUFDTztBQUNDO0FBQ08iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1mb3JtLWJ1aWxkZXItdHV0b3JpYWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZXhhbXBsZV9zZWxlY3RvcnMvaW5kZXguanM/MGM5OCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tIFwiLi9iYXNlLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9jb25kaXRpb25hbC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vbGVuZ3RoX2Jhc2VkLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9zZW1hbnRpY19zaW1pbGFyaXR5LmpzXCI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/example_selectors/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/example_selectors/length_based.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/example_selectors/length_based.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LengthBasedExampleSelector: () => (/* binding */ LengthBasedExampleSelector)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/example_selectors/base.js\");\n\n/**\n * Calculates the length of a text based on the number of words and lines.\n */ function getLengthBased(text) {\n    return text.split(/\\n| /).length;\n}\n/**\n * A specialized example selector that selects examples based on their\n * length, ensuring that the total length of the selected examples does\n * not exceed a specified maximum length.\n * @example\n * ```typescript\n * const exampleSelector = new LengthBasedExampleSelector(\n *   [\n *     { input: \"happy\", output: \"sad\" },\n *     { input: \"tall\", output: \"short\" },\n *     { input: \"energetic\", output: \"lethargic\" },\n *     { input: \"sunny\", output: \"gloomy\" },\n *     { input: \"windy\", output: \"calm\" },\n *   ],\n *   {\n *     examplePrompt: new PromptTemplate({\n *       inputVariables: [\"input\", \"output\"],\n *       template: \"Input: {input}\\nOutput: {output}\",\n *     }),\n *     maxLength: 25,\n *   },\n * );\n * const dynamicPrompt = new FewShotPromptTemplate({\n *   exampleSelector,\n *   examplePrompt: new PromptTemplate({\n *     inputVariables: [\"input\", \"output\"],\n *     template: \"Input: {input}\\nOutput: {output}\",\n *   }),\n *   prefix: \"Give the antonym of every input\",\n *   suffix: \"Input: {adjective}\\nOutput:\",\n *   inputVariables: [\"adjective\"],\n * });\n * console.log(dynamicPrompt.format({ adjective: \"big\" }));\n * console.log(\n *   dynamicPrompt.format({\n *     adjective:\n *       \"big and huge and massive and large and gigantic and tall and much much much much much bigger than everything else\",\n *   }),\n * );\n * ```\n */ class LengthBasedExampleSelector extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseExampleSelector {\n    constructor(data){\n        super(data);\n        Object.defineProperty(this, \"examples\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"examplePrompt\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"getTextLength\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: getLengthBased\n        });\n        Object.defineProperty(this, \"maxLength\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 2048\n        });\n        Object.defineProperty(this, \"exampleTextLengths\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        this.examplePrompt = data.examplePrompt;\n        this.maxLength = data.maxLength ?? 2048;\n        this.getTextLength = data.getTextLength ?? getLengthBased;\n    }\n    /**\n     * Adds an example to the list of examples and calculates its length.\n     * @param example The example to be added.\n     * @returns Promise that resolves when the example has been added and its length calculated.\n     */ async addExample(example) {\n        this.examples.push(example);\n        const stringExample = await this.examplePrompt.format(example);\n        this.exampleTextLengths.push(this.getTextLength(stringExample));\n    }\n    /**\n     * Calculates the lengths of the examples.\n     * @param v Array of lengths of the examples.\n     * @param values Instance of LengthBasedExampleSelector.\n     * @returns Promise that resolves with an array of lengths of the examples.\n     */ async calculateExampleTextLengths(v, values) {\n        if (v.length > 0) {\n            return v;\n        }\n        const { examples, examplePrompt } = values;\n        const stringExamples = await Promise.all(examples.map((eg)=>examplePrompt.format(eg)));\n        return stringExamples.map((eg)=>this.getTextLength(eg));\n    }\n    /**\n     * Selects examples until the total length of the selected examples\n     * reaches the maxLength.\n     * @param inputVariables The input variables for the examples.\n     * @returns Promise that resolves with an array of selected examples.\n     */ async selectExamples(inputVariables) {\n        const inputs = Object.values(inputVariables).join(\" \");\n        let remainingLength = this.maxLength - this.getTextLength(inputs);\n        let i = 0;\n        const examples = [];\n        while(remainingLength > 0 && i < this.examples.length){\n            const newLength = remainingLength - this.exampleTextLengths[i];\n            if (newLength < 0) {\n                break;\n            } else {\n                examples.push(this.examples[i]);\n                remainingLength = newLength;\n            }\n            i += 1;\n        }\n        return examples;\n    }\n    /**\n     * Creates a new instance of LengthBasedExampleSelector and adds a list of\n     * examples to it.\n     * @param examples Array of examples to be added.\n     * @param args Input parameters for the LengthBasedExampleSelector.\n     * @returns Promise that resolves with a new instance of LengthBasedExampleSelector with the examples added.\n     */ static async fromExamples(examples, args) {\n        const selector = new LengthBasedExampleSelector(args);\n        await Promise.all(examples.map((eg)=>selector.addExample(eg)));\n        return selector;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZXhhbXBsZV9zZWxlY3RvcnMvbGVuZ3RoX2Jhc2VkLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQWdEO0FBQ2hEOztDQUVDLEdBQ0QsU0FBU0MsZUFBZUMsSUFBSTtJQUN4QixPQUFPQSxLQUFLQyxLQUFLLENBQUMsUUFBUUMsTUFBTTtBQUNwQztBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBd0NDLEdBQ00sTUFBTUMsbUNBQW1DTCx5REFBbUJBO0lBQy9ETSxZQUFZQyxJQUFJLENBQUU7UUFDZCxLQUFLLENBQUNBO1FBQ05DLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxFQUFFO1FBQ2I7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxpQkFBaUI7WUFDekNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGlCQUFpQjtZQUN6Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBT1o7UUFDWDtRQUNBTyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGFBQWE7WUFDckNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLHNCQUFzQjtZQUM5Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxFQUFFO1FBQ2I7UUFDQSxJQUFJLENBQUNDLGFBQWEsR0FBR1AsS0FBS08sYUFBYTtRQUN2QyxJQUFJLENBQUNDLFNBQVMsR0FBR1IsS0FBS1EsU0FBUyxJQUFJO1FBQ25DLElBQUksQ0FBQ0MsYUFBYSxHQUFHVCxLQUFLUyxhQUFhLElBQUlmO0lBQy9DO0lBQ0E7Ozs7S0FJQyxHQUNELE1BQU1nQixXQUFXQyxPQUFPLEVBQUU7UUFDdEIsSUFBSSxDQUFDQyxRQUFRLENBQUNDLElBQUksQ0FBQ0Y7UUFDbkIsTUFBTUcsZ0JBQWdCLE1BQU0sSUFBSSxDQUFDUCxhQUFhLENBQUNRLE1BQU0sQ0FBQ0o7UUFDdEQsSUFBSSxDQUFDSyxrQkFBa0IsQ0FBQ0gsSUFBSSxDQUFDLElBQUksQ0FBQ0osYUFBYSxDQUFDSztJQUNwRDtJQUNBOzs7OztLQUtDLEdBQ0QsTUFBTUcsNEJBQTRCQyxDQUFDLEVBQUVDLE1BQU0sRUFBRTtRQUN6QyxJQUFJRCxFQUFFckIsTUFBTSxHQUFHLEdBQUc7WUFDZCxPQUFPcUI7UUFDWDtRQUNBLE1BQU0sRUFBRU4sUUFBUSxFQUFFTCxhQUFhLEVBQUUsR0FBR1k7UUFDcEMsTUFBTUMsaUJBQWlCLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQ1YsU0FBU1csR0FBRyxDQUFDLENBQUNDLEtBQU9qQixjQUFjUSxNQUFNLENBQUNTO1FBQ25GLE9BQU9KLGVBQWVHLEdBQUcsQ0FBQyxDQUFDQyxLQUFPLElBQUksQ0FBQ2YsYUFBYSxDQUFDZTtJQUN6RDtJQUNBOzs7OztLQUtDLEdBQ0QsTUFBTUMsZUFBZUMsY0FBYyxFQUFFO1FBQ2pDLE1BQU1DLFNBQVMxQixPQUFPa0IsTUFBTSxDQUFDTyxnQkFBZ0JFLElBQUksQ0FBQztRQUNsRCxJQUFJQyxrQkFBa0IsSUFBSSxDQUFDckIsU0FBUyxHQUFHLElBQUksQ0FBQ0MsYUFBYSxDQUFDa0I7UUFDMUQsSUFBSUcsSUFBSTtRQUNSLE1BQU1sQixXQUFXLEVBQUU7UUFDbkIsTUFBT2lCLGtCQUFrQixLQUFLQyxJQUFJLElBQUksQ0FBQ2xCLFFBQVEsQ0FBQ2YsTUFBTSxDQUFFO1lBQ3BELE1BQU1rQyxZQUFZRixrQkFBa0IsSUFBSSxDQUFDYixrQkFBa0IsQ0FBQ2MsRUFBRTtZQUM5RCxJQUFJQyxZQUFZLEdBQUc7Z0JBQ2Y7WUFDSixPQUNLO2dCQUNEbkIsU0FBU0MsSUFBSSxDQUFDLElBQUksQ0FBQ0QsUUFBUSxDQUFDa0IsRUFBRTtnQkFDOUJELGtCQUFrQkU7WUFDdEI7WUFDQUQsS0FBSztRQUNUO1FBQ0EsT0FBT2xCO0lBQ1g7SUFDQTs7Ozs7O0tBTUMsR0FDRCxhQUFhb0IsYUFBYXBCLFFBQVEsRUFBRXFCLElBQUksRUFBRTtRQUN0QyxNQUFNQyxXQUFXLElBQUlwQywyQkFBMkJtQztRQUNoRCxNQUFNWixRQUFRQyxHQUFHLENBQUNWLFNBQVNXLEdBQUcsQ0FBQyxDQUFDQyxLQUFPVSxTQUFTeEIsVUFBVSxDQUFDYztRQUMzRCxPQUFPVTtJQUNYO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1mb3JtLWJ1aWxkZXItdHV0b3JpYWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZXhhbXBsZV9zZWxlY3RvcnMvbGVuZ3RoX2Jhc2VkLmpzP2QxNWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzZUV4YW1wbGVTZWxlY3RvciB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgbGVuZ3RoIG9mIGEgdGV4dCBiYXNlZCBvbiB0aGUgbnVtYmVyIG9mIHdvcmRzIGFuZCBsaW5lcy5cbiAqL1xuZnVuY3Rpb24gZ2V0TGVuZ3RoQmFzZWQodGV4dCkge1xuICAgIHJldHVybiB0ZXh0LnNwbGl0KC9cXG58IC8pLmxlbmd0aDtcbn1cbi8qKlxuICogQSBzcGVjaWFsaXplZCBleGFtcGxlIHNlbGVjdG9yIHRoYXQgc2VsZWN0cyBleGFtcGxlcyBiYXNlZCBvbiB0aGVpclxuICogbGVuZ3RoLCBlbnN1cmluZyB0aGF0IHRoZSB0b3RhbCBsZW5ndGggb2YgdGhlIHNlbGVjdGVkIGV4YW1wbGVzIGRvZXNcbiAqIG5vdCBleGNlZWQgYSBzcGVjaWZpZWQgbWF4aW11bSBsZW5ndGguXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgZXhhbXBsZVNlbGVjdG9yID0gbmV3IExlbmd0aEJhc2VkRXhhbXBsZVNlbGVjdG9yKFxuICogICBbXG4gKiAgICAgeyBpbnB1dDogXCJoYXBweVwiLCBvdXRwdXQ6IFwic2FkXCIgfSxcbiAqICAgICB7IGlucHV0OiBcInRhbGxcIiwgb3V0cHV0OiBcInNob3J0XCIgfSxcbiAqICAgICB7IGlucHV0OiBcImVuZXJnZXRpY1wiLCBvdXRwdXQ6IFwibGV0aGFyZ2ljXCIgfSxcbiAqICAgICB7IGlucHV0OiBcInN1bm55XCIsIG91dHB1dDogXCJnbG9vbXlcIiB9LFxuICogICAgIHsgaW5wdXQ6IFwid2luZHlcIiwgb3V0cHV0OiBcImNhbG1cIiB9LFxuICogICBdLFxuICogICB7XG4gKiAgICAgZXhhbXBsZVByb21wdDogbmV3IFByb21wdFRlbXBsYXRlKHtcbiAqICAgICAgIGlucHV0VmFyaWFibGVzOiBbXCJpbnB1dFwiLCBcIm91dHB1dFwiXSxcbiAqICAgICAgIHRlbXBsYXRlOiBcIklucHV0OiB7aW5wdXR9XFxuT3V0cHV0OiB7b3V0cHV0fVwiLFxuICogICAgIH0pLFxuICogICAgIG1heExlbmd0aDogMjUsXG4gKiAgIH0sXG4gKiApO1xuICogY29uc3QgZHluYW1pY1Byb21wdCA9IG5ldyBGZXdTaG90UHJvbXB0VGVtcGxhdGUoe1xuICogICBleGFtcGxlU2VsZWN0b3IsXG4gKiAgIGV4YW1wbGVQcm9tcHQ6IG5ldyBQcm9tcHRUZW1wbGF0ZSh7XG4gKiAgICAgaW5wdXRWYXJpYWJsZXM6IFtcImlucHV0XCIsIFwib3V0cHV0XCJdLFxuICogICAgIHRlbXBsYXRlOiBcIklucHV0OiB7aW5wdXR9XFxuT3V0cHV0OiB7b3V0cHV0fVwiLFxuICogICB9KSxcbiAqICAgcHJlZml4OiBcIkdpdmUgdGhlIGFudG9ueW0gb2YgZXZlcnkgaW5wdXRcIixcbiAqICAgc3VmZml4OiBcIklucHV0OiB7YWRqZWN0aXZlfVxcbk91dHB1dDpcIixcbiAqICAgaW5wdXRWYXJpYWJsZXM6IFtcImFkamVjdGl2ZVwiXSxcbiAqIH0pO1xuICogY29uc29sZS5sb2coZHluYW1pY1Byb21wdC5mb3JtYXQoeyBhZGplY3RpdmU6IFwiYmlnXCIgfSkpO1xuICogY29uc29sZS5sb2coXG4gKiAgIGR5bmFtaWNQcm9tcHQuZm9ybWF0KHtcbiAqICAgICBhZGplY3RpdmU6XG4gKiAgICAgICBcImJpZyBhbmQgaHVnZSBhbmQgbWFzc2l2ZSBhbmQgbGFyZ2UgYW5kIGdpZ2FudGljIGFuZCB0YWxsIGFuZCBtdWNoIG11Y2ggbXVjaCBtdWNoIG11Y2ggYmlnZ2VyIHRoYW4gZXZlcnl0aGluZyBlbHNlXCIsXG4gKiAgIH0pLFxuICogKTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgTGVuZ3RoQmFzZWRFeGFtcGxlU2VsZWN0b3IgZXh0ZW5kcyBCYXNlRXhhbXBsZVNlbGVjdG9yIHtcbiAgICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgICAgIHN1cGVyKGRhdGEpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJleGFtcGxlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW11cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImV4YW1wbGVQcm9tcHRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZ2V0VGV4dExlbmd0aFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZ2V0TGVuZ3RoQmFzZWRcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1heExlbmd0aFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogMjA0OFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZXhhbXBsZVRleHRMZW5ndGhzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5leGFtcGxlUHJvbXB0ID0gZGF0YS5leGFtcGxlUHJvbXB0O1xuICAgICAgICB0aGlzLm1heExlbmd0aCA9IGRhdGEubWF4TGVuZ3RoID8/IDIwNDg7XG4gICAgICAgIHRoaXMuZ2V0VGV4dExlbmd0aCA9IGRhdGEuZ2V0VGV4dExlbmd0aCA/PyBnZXRMZW5ndGhCYXNlZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhbiBleGFtcGxlIHRvIHRoZSBsaXN0IG9mIGV4YW1wbGVzIGFuZCBjYWxjdWxhdGVzIGl0cyBsZW5ndGguXG4gICAgICogQHBhcmFtIGV4YW1wbGUgVGhlIGV4YW1wbGUgdG8gYmUgYWRkZWQuXG4gICAgICogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGV4YW1wbGUgaGFzIGJlZW4gYWRkZWQgYW5kIGl0cyBsZW5ndGggY2FsY3VsYXRlZC5cbiAgICAgKi9cbiAgICBhc3luYyBhZGRFeGFtcGxlKGV4YW1wbGUpIHtcbiAgICAgICAgdGhpcy5leGFtcGxlcy5wdXNoKGV4YW1wbGUpO1xuICAgICAgICBjb25zdCBzdHJpbmdFeGFtcGxlID0gYXdhaXQgdGhpcy5leGFtcGxlUHJvbXB0LmZvcm1hdChleGFtcGxlKTtcbiAgICAgICAgdGhpcy5leGFtcGxlVGV4dExlbmd0aHMucHVzaCh0aGlzLmdldFRleHRMZW5ndGgoc3RyaW5nRXhhbXBsZSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGVzIHRoZSBsZW5ndGhzIG9mIHRoZSBleGFtcGxlcy5cbiAgICAgKiBAcGFyYW0gdiBBcnJheSBvZiBsZW5ndGhzIG9mIHRoZSBleGFtcGxlcy5cbiAgICAgKiBAcGFyYW0gdmFsdWVzIEluc3RhbmNlIG9mIExlbmd0aEJhc2VkRXhhbXBsZVNlbGVjdG9yLlxuICAgICAqIEByZXR1cm5zIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIGFuIGFycmF5IG9mIGxlbmd0aHMgb2YgdGhlIGV4YW1wbGVzLlxuICAgICAqL1xuICAgIGFzeW5jIGNhbGN1bGF0ZUV4YW1wbGVUZXh0TGVuZ3Rocyh2LCB2YWx1ZXMpIHtcbiAgICAgICAgaWYgKHYubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIHY7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeyBleGFtcGxlcywgZXhhbXBsZVByb21wdCB9ID0gdmFsdWVzO1xuICAgICAgICBjb25zdCBzdHJpbmdFeGFtcGxlcyA9IGF3YWl0IFByb21pc2UuYWxsKGV4YW1wbGVzLm1hcCgoZWcpID0+IGV4YW1wbGVQcm9tcHQuZm9ybWF0KGVnKSkpO1xuICAgICAgICByZXR1cm4gc3RyaW5nRXhhbXBsZXMubWFwKChlZykgPT4gdGhpcy5nZXRUZXh0TGVuZ3RoKGVnKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbGVjdHMgZXhhbXBsZXMgdW50aWwgdGhlIHRvdGFsIGxlbmd0aCBvZiB0aGUgc2VsZWN0ZWQgZXhhbXBsZXNcbiAgICAgKiByZWFjaGVzIHRoZSBtYXhMZW5ndGguXG4gICAgICogQHBhcmFtIGlucHV0VmFyaWFibGVzIFRoZSBpbnB1dCB2YXJpYWJsZXMgZm9yIHRoZSBleGFtcGxlcy5cbiAgICAgKiBAcmV0dXJucyBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCBhbiBhcnJheSBvZiBzZWxlY3RlZCBleGFtcGxlcy5cbiAgICAgKi9cbiAgICBhc3luYyBzZWxlY3RFeGFtcGxlcyhpbnB1dFZhcmlhYmxlcykge1xuICAgICAgICBjb25zdCBpbnB1dHMgPSBPYmplY3QudmFsdWVzKGlucHV0VmFyaWFibGVzKS5qb2luKFwiIFwiKTtcbiAgICAgICAgbGV0IHJlbWFpbmluZ0xlbmd0aCA9IHRoaXMubWF4TGVuZ3RoIC0gdGhpcy5nZXRUZXh0TGVuZ3RoKGlucHV0cyk7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgY29uc3QgZXhhbXBsZXMgPSBbXTtcbiAgICAgICAgd2hpbGUgKHJlbWFpbmluZ0xlbmd0aCA+IDAgJiYgaSA8IHRoaXMuZXhhbXBsZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdMZW5ndGggPSByZW1haW5pbmdMZW5ndGggLSB0aGlzLmV4YW1wbGVUZXh0TGVuZ3Roc1tpXTtcbiAgICAgICAgICAgIGlmIChuZXdMZW5ndGggPCAwKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBleGFtcGxlcy5wdXNoKHRoaXMuZXhhbXBsZXNbaV0pO1xuICAgICAgICAgICAgICAgIHJlbWFpbmluZ0xlbmd0aCA9IG5ld0xlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGkgKz0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZXhhbXBsZXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgaW5zdGFuY2Ugb2YgTGVuZ3RoQmFzZWRFeGFtcGxlU2VsZWN0b3IgYW5kIGFkZHMgYSBsaXN0IG9mXG4gICAgICogZXhhbXBsZXMgdG8gaXQuXG4gICAgICogQHBhcmFtIGV4YW1wbGVzIEFycmF5IG9mIGV4YW1wbGVzIHRvIGJlIGFkZGVkLlxuICAgICAqIEBwYXJhbSBhcmdzIElucHV0IHBhcmFtZXRlcnMgZm9yIHRoZSBMZW5ndGhCYXNlZEV4YW1wbGVTZWxlY3Rvci5cbiAgICAgKiBAcmV0dXJucyBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCBhIG5ldyBpbnN0YW5jZSBvZiBMZW5ndGhCYXNlZEV4YW1wbGVTZWxlY3RvciB3aXRoIHRoZSBleGFtcGxlcyBhZGRlZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgYXN5bmMgZnJvbUV4YW1wbGVzKGV4YW1wbGVzLCBhcmdzKSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdG9yID0gbmV3IExlbmd0aEJhc2VkRXhhbXBsZVNlbGVjdG9yKGFyZ3MpO1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChleGFtcGxlcy5tYXAoKGVnKSA9PiBzZWxlY3Rvci5hZGRFeGFtcGxlKGVnKSkpO1xuICAgICAgICByZXR1cm4gc2VsZWN0b3I7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkJhc2VFeGFtcGxlU2VsZWN0b3IiLCJnZXRMZW5ndGhCYXNlZCIsInRleHQiLCJzcGxpdCIsImxlbmd0aCIsIkxlbmd0aEJhc2VkRXhhbXBsZVNlbGVjdG9yIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImV4YW1wbGVQcm9tcHQiLCJtYXhMZW5ndGgiLCJnZXRUZXh0TGVuZ3RoIiwiYWRkRXhhbXBsZSIsImV4YW1wbGUiLCJleGFtcGxlcyIsInB1c2giLCJzdHJpbmdFeGFtcGxlIiwiZm9ybWF0IiwiZXhhbXBsZVRleHRMZW5ndGhzIiwiY2FsY3VsYXRlRXhhbXBsZVRleHRMZW5ndGhzIiwidiIsInZhbHVlcyIsInN0cmluZ0V4YW1wbGVzIiwiUHJvbWlzZSIsImFsbCIsIm1hcCIsImVnIiwic2VsZWN0RXhhbXBsZXMiLCJpbnB1dFZhcmlhYmxlcyIsImlucHV0cyIsImpvaW4iLCJyZW1haW5pbmdMZW5ndGgiLCJpIiwibmV3TGVuZ3RoIiwiZnJvbUV4YW1wbGVzIiwiYXJncyIsInNlbGVjdG9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/example_selectors/length_based.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/example_selectors/semantic_similarity.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/example_selectors/semantic_similarity.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SemanticSimilarityExampleSelector: () => (/* binding */ SemanticSimilarityExampleSelector)\n/* harmony export */ });\n/* harmony import */ var _documents_document_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../documents/document.js */ \"(rsc)/./node_modules/@langchain/core/dist/documents/document.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/example_selectors/base.js\");\n\n\nfunction sortedValues(values) {\n    return Object.keys(values).sort().map((key)=>values[key]);\n}\n/**\n * Class that selects examples based on semantic similarity. It extends\n * the BaseExampleSelector class.\n * @example\n * ```typescript\n * const exampleSelector = await SemanticSimilarityExampleSelector.fromExamples(\n *   [\n *     { input: \"happy\", output: \"sad\" },\n *     { input: \"tall\", output: \"short\" },\n *     { input: \"energetic\", output: \"lethargic\" },\n *     { input: \"sunny\", output: \"gloomy\" },\n *     { input: \"windy\", output: \"calm\" },\n *   ],\n *   new OpenAIEmbeddings(),\n *   HNSWLib,\n *   { k: 1 },\n * );\n * const dynamicPrompt = new FewShotPromptTemplate({\n *   exampleSelector,\n *   examplePrompt: PromptTemplate.fromTemplate(\n *     \"Input: {input}\\nOutput: {output}\",\n *   ),\n *   prefix: \"Give the antonym of every input\",\n *   suffix: \"Input: {adjective}\\nOutput:\",\n *   inputVariables: [\"adjective\"],\n * });\n * console.log(await dynamicPrompt.format({ adjective: \"rainy\" }));\n * ```\n */ class SemanticSimilarityExampleSelector extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseExampleSelector {\n    constructor(data){\n        super(data);\n        Object.defineProperty(this, \"vectorStoreRetriever\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"exampleKeys\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"inputKeys\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.exampleKeys = data.exampleKeys;\n        this.inputKeys = data.inputKeys;\n        if (data.vectorStore !== undefined) {\n            this.vectorStoreRetriever = data.vectorStore.asRetriever({\n                k: data.k ?? 4,\n                filter: data.filter\n            });\n        } else if (data.vectorStoreRetriever) {\n            this.vectorStoreRetriever = data.vectorStoreRetriever;\n        } else {\n            throw new Error(`You must specify one of \"vectorStore\" and \"vectorStoreRetriever\".`);\n        }\n    }\n    /**\n     * Method that adds a new example to the vectorStore. The example is\n     * converted to a string and added to the vectorStore as a document.\n     * @param example The example to be added to the vectorStore.\n     * @returns Promise that resolves when the example has been added to the vectorStore.\n     */ async addExample(example) {\n        const inputKeys = this.inputKeys ?? Object.keys(example);\n        const stringExample = sortedValues(inputKeys.reduce((acc, key)=>({\n                ...acc,\n                [key]: example[key]\n            }), {})).join(\" \");\n        await this.vectorStoreRetriever.addDocuments([\n            new _documents_document_js__WEBPACK_IMPORTED_MODULE_0__.Document({\n                pageContent: stringExample,\n                metadata: example\n            })\n        ]);\n    }\n    /**\n     * Method that selects which examples to use based on semantic similarity.\n     * It performs a similarity search in the vectorStore using the input\n     * variables and returns the examples with the highest similarity.\n     * @param inputVariables The input variables used for the similarity search.\n     * @returns Promise that resolves with an array of the selected examples.\n     */ async selectExamples(inputVariables) {\n        const inputKeys = this.inputKeys ?? Object.keys(inputVariables);\n        const query = sortedValues(inputKeys.reduce((acc, key)=>({\n                ...acc,\n                [key]: inputVariables[key]\n            }), {})).join(\" \");\n        const exampleDocs = await this.vectorStoreRetriever.invoke(query);\n        const examples = exampleDocs.map((doc)=>doc.metadata);\n        if (this.exampleKeys) {\n            // If example keys are provided, filter examples to those keys.\n            return examples.map((example)=>this.exampleKeys.reduce((acc, key)=>({\n                        ...acc,\n                        [key]: example[key]\n                    }), {}));\n        }\n        return examples;\n    }\n    /**\n     * Static method that creates a new instance of\n     * SemanticSimilarityExampleSelector. It takes a list of examples, an\n     * instance of Embeddings, a VectorStore class, and an options object as\n     * parameters. It converts the examples to strings, creates a VectorStore\n     * from the strings and the embeddings, and returns a new\n     * SemanticSimilarityExampleSelector with the created VectorStore and the\n     * options provided.\n     * @param examples The list of examples to be used.\n     * @param embeddings The instance of Embeddings to be used.\n     * @param vectorStoreCls The VectorStore class to be used.\n     * @param options The options object for the SemanticSimilarityExampleSelector.\n     * @returns Promise that resolves with a new instance of SemanticSimilarityExampleSelector.\n     */ static async fromExamples(examples, embeddings, vectorStoreCls, options = {}) {\n        const inputKeys = options.inputKeys ?? null;\n        const stringExamples = examples.map((example)=>sortedValues(inputKeys ? inputKeys.reduce((acc, key)=>({\n                    ...acc,\n                    [key]: example[key]\n                }), {}) : example).join(\" \"));\n        const vectorStore = await vectorStoreCls.fromTexts(stringExamples, examples, embeddings, options);\n        return new SemanticSimilarityExampleSelector({\n            vectorStore,\n            k: options.k ?? 4,\n            exampleKeys: options.exampleKeys,\n            inputKeys: options.inputKeys\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvZXhhbXBsZV9zZWxlY3RvcnMvc2VtYW50aWNfc2ltaWxhcml0eS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBb0Q7QUFDSjtBQUNoRCxTQUFTRSxhQUFhQyxNQUFNO0lBQ3hCLE9BQU9DLE9BQU9DLElBQUksQ0FBQ0YsUUFDZEcsSUFBSSxHQUNKQyxHQUFHLENBQUMsQ0FBQ0MsTUFBUUwsTUFBTSxDQUFDSyxJQUFJO0FBQ2pDO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0E0QkMsR0FDTSxNQUFNQywwQ0FBMENSLHlEQUFtQkE7SUFDdEVTLFlBQVlDLElBQUksQ0FBRTtRQUNkLEtBQUssQ0FBQ0E7UUFDTlAsT0FBT1EsY0FBYyxDQUFDLElBQUksRUFBRSx3QkFBd0I7WUFDaERDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBWixPQUFPUSxjQUFjLENBQUMsSUFBSSxFQUFFLGVBQWU7WUFDdkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBWixPQUFPUSxjQUFjLENBQUMsSUFBSSxFQUFFLGFBQWE7WUFDckNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ0MsV0FBVyxHQUFHTixLQUFLTSxXQUFXO1FBQ25DLElBQUksQ0FBQ0MsU0FBUyxHQUFHUCxLQUFLTyxTQUFTO1FBQy9CLElBQUlQLEtBQUtRLFdBQVcsS0FBS0MsV0FBVztZQUNoQyxJQUFJLENBQUNDLG9CQUFvQixHQUFHVixLQUFLUSxXQUFXLENBQUNHLFdBQVcsQ0FBQztnQkFDckRDLEdBQUdaLEtBQUtZLENBQUMsSUFBSTtnQkFDYkMsUUFBUWIsS0FBS2EsTUFBTTtZQUN2QjtRQUNKLE9BQ0ssSUFBSWIsS0FBS1Usb0JBQW9CLEVBQUU7WUFDaEMsSUFBSSxDQUFDQSxvQkFBb0IsR0FBR1YsS0FBS1Usb0JBQW9CO1FBQ3pELE9BQ0s7WUFDRCxNQUFNLElBQUlJLE1BQU0sQ0FBQyxpRUFBaUUsQ0FBQztRQUN2RjtJQUNKO0lBQ0E7Ozs7O0tBS0MsR0FDRCxNQUFNQyxXQUFXQyxPQUFPLEVBQUU7UUFDdEIsTUFBTVQsWUFBWSxJQUFJLENBQUNBLFNBQVMsSUFBSWQsT0FBT0MsSUFBSSxDQUFDc0I7UUFDaEQsTUFBTUMsZ0JBQWdCMUIsYUFBYWdCLFVBQVVXLE1BQU0sQ0FBQyxDQUFDQyxLQUFLdEIsTUFBUztnQkFBRSxHQUFHc0IsR0FBRztnQkFBRSxDQUFDdEIsSUFBSSxFQUFFbUIsT0FBTyxDQUFDbkIsSUFBSTtZQUFDLElBQUksQ0FBQyxJQUFJdUIsSUFBSSxDQUFDO1FBQy9HLE1BQU0sSUFBSSxDQUFDVixvQkFBb0IsQ0FBQ1csWUFBWSxDQUFDO1lBQ3pDLElBQUloQyw0REFBUUEsQ0FBQztnQkFDVGlDLGFBQWFMO2dCQUNiTSxVQUFVUDtZQUNkO1NBQ0g7SUFDTDtJQUNBOzs7Ozs7S0FNQyxHQUNELE1BQU1RLGVBQWVDLGNBQWMsRUFBRTtRQUNqQyxNQUFNbEIsWUFBWSxJQUFJLENBQUNBLFNBQVMsSUFBSWQsT0FBT0MsSUFBSSxDQUFDK0I7UUFDaEQsTUFBTUMsUUFBUW5DLGFBQWFnQixVQUFVVyxNQUFNLENBQUMsQ0FBQ0MsS0FBS3RCLE1BQVM7Z0JBQUUsR0FBR3NCLEdBQUc7Z0JBQUUsQ0FBQ3RCLElBQUksRUFBRTRCLGNBQWMsQ0FBQzVCLElBQUk7WUFBQyxJQUFJLENBQUMsSUFBSXVCLElBQUksQ0FBQztRQUM5RyxNQUFNTyxjQUFjLE1BQU0sSUFBSSxDQUFDakIsb0JBQW9CLENBQUNrQixNQUFNLENBQUNGO1FBQzNELE1BQU1HLFdBQVdGLFlBQVkvQixHQUFHLENBQUMsQ0FBQ2tDLE1BQVFBLElBQUlQLFFBQVE7UUFDdEQsSUFBSSxJQUFJLENBQUNqQixXQUFXLEVBQUU7WUFDbEIsK0RBQStEO1lBQy9ELE9BQU91QixTQUFTakMsR0FBRyxDQUFDLENBQUNvQixVQUFZLElBQUksQ0FBQ1YsV0FBVyxDQUFDWSxNQUFNLENBQUMsQ0FBQ0MsS0FBS3RCLE1BQVM7d0JBQUUsR0FBR3NCLEdBQUc7d0JBQUUsQ0FBQ3RCLElBQUksRUFBRW1CLE9BQU8sQ0FBQ25CLElBQUk7b0JBQUMsSUFBSSxDQUFDO1FBQy9HO1FBQ0EsT0FBT2dDO0lBQ1g7SUFDQTs7Ozs7Ozs7Ozs7OztLQWFDLEdBQ0QsYUFBYUUsYUFBYUYsUUFBUSxFQUFFRyxVQUFVLEVBQUVDLGNBQWMsRUFBRUMsVUFBVSxDQUFDLENBQUMsRUFBRTtRQUMxRSxNQUFNM0IsWUFBWTJCLFFBQVEzQixTQUFTLElBQUk7UUFDdkMsTUFBTTRCLGlCQUFpQk4sU0FBU2pDLEdBQUcsQ0FBQyxDQUFDb0IsVUFBWXpCLGFBQWFnQixZQUN4REEsVUFBVVcsTUFBTSxDQUFDLENBQUNDLEtBQUt0QixNQUFTO29CQUFFLEdBQUdzQixHQUFHO29CQUFFLENBQUN0QixJQUFJLEVBQUVtQixPQUFPLENBQUNuQixJQUFJO2dCQUFDLElBQUksQ0FBQyxLQUNuRW1CLFNBQVNJLElBQUksQ0FBQztRQUNwQixNQUFNWixjQUFjLE1BQU15QixlQUFlRyxTQUFTLENBQUNELGdCQUFnQk4sVUFDbkVHLFlBQVlFO1FBQ1osT0FBTyxJQUFJcEMsa0NBQWtDO1lBQ3pDVTtZQUNBSSxHQUFHc0IsUUFBUXRCLENBQUMsSUFBSTtZQUNoQk4sYUFBYTRCLFFBQVE1QixXQUFXO1lBQ2hDQyxXQUFXMkIsUUFBUTNCLFNBQVM7UUFDaEM7SUFDSjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2V4YW1wbGVfc2VsZWN0b3JzL3NlbWFudGljX3NpbWlsYXJpdHkuanM/OTRkNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEb2N1bWVudCB9IGZyb20gXCIuLi9kb2N1bWVudHMvZG9jdW1lbnQuanNcIjtcbmltcG9ydCB7IEJhc2VFeGFtcGxlU2VsZWN0b3IgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5mdW5jdGlvbiBzb3J0ZWRWYWx1ZXModmFsdWVzKSB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKHZhbHVlcylcbiAgICAgICAgLnNvcnQoKVxuICAgICAgICAubWFwKChrZXkpID0+IHZhbHVlc1trZXldKTtcbn1cbi8qKlxuICogQ2xhc3MgdGhhdCBzZWxlY3RzIGV4YW1wbGVzIGJhc2VkIG9uIHNlbWFudGljIHNpbWlsYXJpdHkuIEl0IGV4dGVuZHNcbiAqIHRoZSBCYXNlRXhhbXBsZVNlbGVjdG9yIGNsYXNzLlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IGV4YW1wbGVTZWxlY3RvciA9IGF3YWl0IFNlbWFudGljU2ltaWxhcml0eUV4YW1wbGVTZWxlY3Rvci5mcm9tRXhhbXBsZXMoXG4gKiAgIFtcbiAqICAgICB7IGlucHV0OiBcImhhcHB5XCIsIG91dHB1dDogXCJzYWRcIiB9LFxuICogICAgIHsgaW5wdXQ6IFwidGFsbFwiLCBvdXRwdXQ6IFwic2hvcnRcIiB9LFxuICogICAgIHsgaW5wdXQ6IFwiZW5lcmdldGljXCIsIG91dHB1dDogXCJsZXRoYXJnaWNcIiB9LFxuICogICAgIHsgaW5wdXQ6IFwic3VubnlcIiwgb3V0cHV0OiBcImdsb29teVwiIH0sXG4gKiAgICAgeyBpbnB1dDogXCJ3aW5keVwiLCBvdXRwdXQ6IFwiY2FsbVwiIH0sXG4gKiAgIF0sXG4gKiAgIG5ldyBPcGVuQUlFbWJlZGRpbmdzKCksXG4gKiAgIEhOU1dMaWIsXG4gKiAgIHsgazogMSB9LFxuICogKTtcbiAqIGNvbnN0IGR5bmFtaWNQcm9tcHQgPSBuZXcgRmV3U2hvdFByb21wdFRlbXBsYXRlKHtcbiAqICAgZXhhbXBsZVNlbGVjdG9yLFxuICogICBleGFtcGxlUHJvbXB0OiBQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUoXG4gKiAgICAgXCJJbnB1dDoge2lucHV0fVxcbk91dHB1dDoge291dHB1dH1cIixcbiAqICAgKSxcbiAqICAgcHJlZml4OiBcIkdpdmUgdGhlIGFudG9ueW0gb2YgZXZlcnkgaW5wdXRcIixcbiAqICAgc3VmZml4OiBcIklucHV0OiB7YWRqZWN0aXZlfVxcbk91dHB1dDpcIixcbiAqICAgaW5wdXRWYXJpYWJsZXM6IFtcImFkamVjdGl2ZVwiXSxcbiAqIH0pO1xuICogY29uc29sZS5sb2coYXdhaXQgZHluYW1pY1Byb21wdC5mb3JtYXQoeyBhZGplY3RpdmU6IFwicmFpbnlcIiB9KSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFNlbWFudGljU2ltaWxhcml0eUV4YW1wbGVTZWxlY3RvciBleHRlbmRzIEJhc2VFeGFtcGxlU2VsZWN0b3Ige1xuICAgIGNvbnN0cnVjdG9yKGRhdGEpIHtcbiAgICAgICAgc3VwZXIoZGF0YSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInZlY3RvclN0b3JlUmV0cmlldmVyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImV4YW1wbGVLZXlzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlucHV0S2V5c1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmV4YW1wbGVLZXlzID0gZGF0YS5leGFtcGxlS2V5cztcbiAgICAgICAgdGhpcy5pbnB1dEtleXMgPSBkYXRhLmlucHV0S2V5cztcbiAgICAgICAgaWYgKGRhdGEudmVjdG9yU3RvcmUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy52ZWN0b3JTdG9yZVJldHJpZXZlciA9IGRhdGEudmVjdG9yU3RvcmUuYXNSZXRyaWV2ZXIoe1xuICAgICAgICAgICAgICAgIGs6IGRhdGEuayA/PyA0LFxuICAgICAgICAgICAgICAgIGZpbHRlcjogZGF0YS5maWx0ZXIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChkYXRhLnZlY3RvclN0b3JlUmV0cmlldmVyKSB7XG4gICAgICAgICAgICB0aGlzLnZlY3RvclN0b3JlUmV0cmlldmVyID0gZGF0YS52ZWN0b3JTdG9yZVJldHJpZXZlcjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgWW91IG11c3Qgc3BlY2lmeSBvbmUgb2YgXCJ2ZWN0b3JTdG9yZVwiIGFuZCBcInZlY3RvclN0b3JlUmV0cmlldmVyXCIuYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHRoYXQgYWRkcyBhIG5ldyBleGFtcGxlIHRvIHRoZSB2ZWN0b3JTdG9yZS4gVGhlIGV4YW1wbGUgaXNcbiAgICAgKiBjb252ZXJ0ZWQgdG8gYSBzdHJpbmcgYW5kIGFkZGVkIHRvIHRoZSB2ZWN0b3JTdG9yZSBhcyBhIGRvY3VtZW50LlxuICAgICAqIEBwYXJhbSBleGFtcGxlIFRoZSBleGFtcGxlIHRvIGJlIGFkZGVkIHRvIHRoZSB2ZWN0b3JTdG9yZS5cbiAgICAgKiBAcmV0dXJucyBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgZXhhbXBsZSBoYXMgYmVlbiBhZGRlZCB0byB0aGUgdmVjdG9yU3RvcmUuXG4gICAgICovXG4gICAgYXN5bmMgYWRkRXhhbXBsZShleGFtcGxlKSB7XG4gICAgICAgIGNvbnN0IGlucHV0S2V5cyA9IHRoaXMuaW5wdXRLZXlzID8/IE9iamVjdC5rZXlzKGV4YW1wbGUpO1xuICAgICAgICBjb25zdCBzdHJpbmdFeGFtcGxlID0gc29ydGVkVmFsdWVzKGlucHV0S2V5cy5yZWR1Y2UoKGFjYywga2V5KSA9PiAoeyAuLi5hY2MsIFtrZXldOiBleGFtcGxlW2tleV0gfSksIHt9KSkuam9pbihcIiBcIik7XG4gICAgICAgIGF3YWl0IHRoaXMudmVjdG9yU3RvcmVSZXRyaWV2ZXIuYWRkRG9jdW1lbnRzKFtcbiAgICAgICAgICAgIG5ldyBEb2N1bWVudCh7XG4gICAgICAgICAgICAgICAgcGFnZUNvbnRlbnQ6IHN0cmluZ0V4YW1wbGUsXG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IGV4YW1wbGUsXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB0aGF0IHNlbGVjdHMgd2hpY2ggZXhhbXBsZXMgdG8gdXNlIGJhc2VkIG9uIHNlbWFudGljIHNpbWlsYXJpdHkuXG4gICAgICogSXQgcGVyZm9ybXMgYSBzaW1pbGFyaXR5IHNlYXJjaCBpbiB0aGUgdmVjdG9yU3RvcmUgdXNpbmcgdGhlIGlucHV0XG4gICAgICogdmFyaWFibGVzIGFuZCByZXR1cm5zIHRoZSBleGFtcGxlcyB3aXRoIHRoZSBoaWdoZXN0IHNpbWlsYXJpdHkuXG4gICAgICogQHBhcmFtIGlucHV0VmFyaWFibGVzIFRoZSBpbnB1dCB2YXJpYWJsZXMgdXNlZCBmb3IgdGhlIHNpbWlsYXJpdHkgc2VhcmNoLlxuICAgICAqIEByZXR1cm5zIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIGFuIGFycmF5IG9mIHRoZSBzZWxlY3RlZCBleGFtcGxlcy5cbiAgICAgKi9cbiAgICBhc3luYyBzZWxlY3RFeGFtcGxlcyhpbnB1dFZhcmlhYmxlcykge1xuICAgICAgICBjb25zdCBpbnB1dEtleXMgPSB0aGlzLmlucHV0S2V5cyA/PyBPYmplY3Qua2V5cyhpbnB1dFZhcmlhYmxlcyk7XG4gICAgICAgIGNvbnN0IHF1ZXJ5ID0gc29ydGVkVmFsdWVzKGlucHV0S2V5cy5yZWR1Y2UoKGFjYywga2V5KSA9PiAoeyAuLi5hY2MsIFtrZXldOiBpbnB1dFZhcmlhYmxlc1trZXldIH0pLCB7fSkpLmpvaW4oXCIgXCIpO1xuICAgICAgICBjb25zdCBleGFtcGxlRG9jcyA9IGF3YWl0IHRoaXMudmVjdG9yU3RvcmVSZXRyaWV2ZXIuaW52b2tlKHF1ZXJ5KTtcbiAgICAgICAgY29uc3QgZXhhbXBsZXMgPSBleGFtcGxlRG9jcy5tYXAoKGRvYykgPT4gZG9jLm1ldGFkYXRhKTtcbiAgICAgICAgaWYgKHRoaXMuZXhhbXBsZUtleXMpIHtcbiAgICAgICAgICAgIC8vIElmIGV4YW1wbGUga2V5cyBhcmUgcHJvdmlkZWQsIGZpbHRlciBleGFtcGxlcyB0byB0aG9zZSBrZXlzLlxuICAgICAgICAgICAgcmV0dXJuIGV4YW1wbGVzLm1hcCgoZXhhbXBsZSkgPT4gdGhpcy5leGFtcGxlS2V5cy5yZWR1Y2UoKGFjYywga2V5KSA9PiAoeyAuLi5hY2MsIFtrZXldOiBleGFtcGxlW2tleV0gfSksIHt9KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV4YW1wbGVzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGF0aWMgbWV0aG9kIHRoYXQgY3JlYXRlcyBhIG5ldyBpbnN0YW5jZSBvZlxuICAgICAqIFNlbWFudGljU2ltaWxhcml0eUV4YW1wbGVTZWxlY3Rvci4gSXQgdGFrZXMgYSBsaXN0IG9mIGV4YW1wbGVzLCBhblxuICAgICAqIGluc3RhbmNlIG9mIEVtYmVkZGluZ3MsIGEgVmVjdG9yU3RvcmUgY2xhc3MsIGFuZCBhbiBvcHRpb25zIG9iamVjdCBhc1xuICAgICAqIHBhcmFtZXRlcnMuIEl0IGNvbnZlcnRzIHRoZSBleGFtcGxlcyB0byBzdHJpbmdzLCBjcmVhdGVzIGEgVmVjdG9yU3RvcmVcbiAgICAgKiBmcm9tIHRoZSBzdHJpbmdzIGFuZCB0aGUgZW1iZWRkaW5ncywgYW5kIHJldHVybnMgYSBuZXdcbiAgICAgKiBTZW1hbnRpY1NpbWlsYXJpdHlFeGFtcGxlU2VsZWN0b3Igd2l0aCB0aGUgY3JlYXRlZCBWZWN0b3JTdG9yZSBhbmQgdGhlXG4gICAgICogb3B0aW9ucyBwcm92aWRlZC5cbiAgICAgKiBAcGFyYW0gZXhhbXBsZXMgVGhlIGxpc3Qgb2YgZXhhbXBsZXMgdG8gYmUgdXNlZC5cbiAgICAgKiBAcGFyYW0gZW1iZWRkaW5ncyBUaGUgaW5zdGFuY2Ugb2YgRW1iZWRkaW5ncyB0byBiZSB1c2VkLlxuICAgICAqIEBwYXJhbSB2ZWN0b3JTdG9yZUNscyBUaGUgVmVjdG9yU3RvcmUgY2xhc3MgdG8gYmUgdXNlZC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgb3B0aW9ucyBvYmplY3QgZm9yIHRoZSBTZW1hbnRpY1NpbWlsYXJpdHlFeGFtcGxlU2VsZWN0b3IuXG4gICAgICogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggYSBuZXcgaW5zdGFuY2Ugb2YgU2VtYW50aWNTaW1pbGFyaXR5RXhhbXBsZVNlbGVjdG9yLlxuICAgICAqL1xuICAgIHN0YXRpYyBhc3luYyBmcm9tRXhhbXBsZXMoZXhhbXBsZXMsIGVtYmVkZGluZ3MsIHZlY3RvclN0b3JlQ2xzLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgY29uc3QgaW5wdXRLZXlzID0gb3B0aW9ucy5pbnB1dEtleXMgPz8gbnVsbDtcbiAgICAgICAgY29uc3Qgc3RyaW5nRXhhbXBsZXMgPSBleGFtcGxlcy5tYXAoKGV4YW1wbGUpID0+IHNvcnRlZFZhbHVlcyhpbnB1dEtleXNcbiAgICAgICAgICAgID8gaW5wdXRLZXlzLnJlZHVjZSgoYWNjLCBrZXkpID0+ICh7IC4uLmFjYywgW2tleV06IGV4YW1wbGVba2V5XSB9KSwge30pXG4gICAgICAgICAgICA6IGV4YW1wbGUpLmpvaW4oXCIgXCIpKTtcbiAgICAgICAgY29uc3QgdmVjdG9yU3RvcmUgPSBhd2FpdCB2ZWN0b3JTdG9yZUNscy5mcm9tVGV4dHMoc3RyaW5nRXhhbXBsZXMsIGV4YW1wbGVzLCAvLyBtZXRhZGF0YXNcbiAgICAgICAgZW1iZWRkaW5ncywgb3B0aW9ucyk7XG4gICAgICAgIHJldHVybiBuZXcgU2VtYW50aWNTaW1pbGFyaXR5RXhhbXBsZVNlbGVjdG9yKHtcbiAgICAgICAgICAgIHZlY3RvclN0b3JlLFxuICAgICAgICAgICAgazogb3B0aW9ucy5rID8/IDQsXG4gICAgICAgICAgICBleGFtcGxlS2V5czogb3B0aW9ucy5leGFtcGxlS2V5cyxcbiAgICAgICAgICAgIGlucHV0S2V5czogb3B0aW9ucy5pbnB1dEtleXMsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJEb2N1bWVudCIsIkJhc2VFeGFtcGxlU2VsZWN0b3IiLCJzb3J0ZWRWYWx1ZXMiLCJ2YWx1ZXMiLCJPYmplY3QiLCJrZXlzIiwic29ydCIsIm1hcCIsImtleSIsIlNlbWFudGljU2ltaWxhcml0eUV4YW1wbGVTZWxlY3RvciIsImNvbnN0cnVjdG9yIiwiZGF0YSIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJleGFtcGxlS2V5cyIsImlucHV0S2V5cyIsInZlY3RvclN0b3JlIiwidW5kZWZpbmVkIiwidmVjdG9yU3RvcmVSZXRyaWV2ZXIiLCJhc1JldHJpZXZlciIsImsiLCJmaWx0ZXIiLCJFcnJvciIsImFkZEV4YW1wbGUiLCJleGFtcGxlIiwic3RyaW5nRXhhbXBsZSIsInJlZHVjZSIsImFjYyIsImpvaW4iLCJhZGREb2N1bWVudHMiLCJwYWdlQ29udGVudCIsIm1ldGFkYXRhIiwic2VsZWN0RXhhbXBsZXMiLCJpbnB1dFZhcmlhYmxlcyIsInF1ZXJ5IiwiZXhhbXBsZURvY3MiLCJpbnZva2UiLCJleGFtcGxlcyIsImRvYyIsImZyb21FeGFtcGxlcyIsImVtYmVkZGluZ3MiLCJ2ZWN0b3JTdG9yZUNscyIsIm9wdGlvbnMiLCJzdHJpbmdFeGFtcGxlcyIsImZyb21UZXh0cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/example_selectors/semantic_similarity.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/language_models/base.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/language_models/base.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseLangChain: () => (/* binding */ BaseLangChain),\n/* harmony export */   BaseLanguageModel: () => (/* binding */ BaseLanguageModel),\n/* harmony export */   calculateMaxTokens: () => (/* binding */ calculateMaxTokens),\n/* harmony export */   getEmbeddingContextSize: () => (/* binding */ getEmbeddingContextSize),\n/* harmony export */   getModelContextSize: () => (/* binding */ getModelContextSize),\n/* harmony export */   getModelNameForTiktoken: () => (/* binding */ getModelNameForTiktoken)\n/* harmony export */ });\n/* harmony import */ var _caches_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../caches.js */ \"(rsc)/./node_modules/@langchain/core/dist/caches.js\");\n/* harmony import */ var _prompt_values_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../prompt_values.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompt_values.js\");\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../messages/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/index.js\");\n/* harmony import */ var _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/async_caller.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/async_caller.js\");\n/* harmony import */ var _utils_tiktoken_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/tiktoken.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/tiktoken.js\");\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../runnables/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n\n\n\n\n\n\n// https://www.npmjs.com/package/js-tiktoken\nconst getModelNameForTiktoken = (modelName)=>{\n    if (modelName.startsWith(\"gpt-3.5-turbo-16k\")) {\n        return \"gpt-3.5-turbo-16k\";\n    }\n    if (modelName.startsWith(\"gpt-3.5-turbo-\")) {\n        return \"gpt-3.5-turbo\";\n    }\n    if (modelName.startsWith(\"gpt-4-32k\")) {\n        return \"gpt-4-32k\";\n    }\n    if (modelName.startsWith(\"gpt-4-\")) {\n        return \"gpt-4\";\n    }\n    return modelName;\n};\nconst getEmbeddingContextSize = (modelName)=>{\n    switch(modelName){\n        case \"text-embedding-ada-002\":\n            return 8191;\n        default:\n            return 2046;\n    }\n};\nconst getModelContextSize = (modelName)=>{\n    switch(getModelNameForTiktoken(modelName)){\n        case \"gpt-3.5-turbo-16k\":\n            return 16384;\n        case \"gpt-3.5-turbo\":\n            return 4096;\n        case \"gpt-4-32k\":\n            return 32768;\n        case \"gpt-4\":\n            return 8192;\n        case \"text-davinci-003\":\n            return 4097;\n        case \"text-curie-001\":\n            return 2048;\n        case \"text-babbage-001\":\n            return 2048;\n        case \"text-ada-001\":\n            return 2048;\n        case \"code-davinci-002\":\n            return 8000;\n        case \"code-cushman-001\":\n            return 2048;\n        default:\n            return 4097;\n    }\n};\nconst calculateMaxTokens = async ({ prompt, modelName })=>{\n    let numTokens;\n    try {\n        numTokens = (await (0,_utils_tiktoken_js__WEBPACK_IMPORTED_MODULE_4__.encodingForModel)(getModelNameForTiktoken(modelName))).encode(prompt).length;\n    } catch (error) {\n        console.warn(\"Failed to calculate number of tokens, falling back to approximate count\");\n        // fallback to approximate calculation if tiktoken is not available\n        // each token is ~4 characters: https://help.openai.com/en/articles/4936856-what-are-tokens-and-how-to-count-them#\n        numTokens = Math.ceil(prompt.length / 4);\n    }\n    const maxTokens = getModelContextSize(modelName);\n    return maxTokens - numTokens;\n};\nconst getVerbosity = ()=>false;\n/**\n * Base class for language models, chains, tools.\n */ class BaseLangChain extends _runnables_base_js__WEBPACK_IMPORTED_MODULE_5__.Runnable {\n    get lc_attributes() {\n        return {\n            callbacks: undefined,\n            verbose: undefined\n        };\n    }\n    constructor(params){\n        super(params);\n        /**\n         * Whether to print out response text.\n         */ Object.defineProperty(this, \"verbose\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"callbacks\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.verbose = params.verbose ?? getVerbosity();\n        this.callbacks = params.callbacks;\n        this.tags = params.tags ?? [];\n        this.metadata = params.metadata ?? {};\n    }\n}\n/**\n * Base class for language models.\n */ class BaseLanguageModel extends BaseLangChain {\n    /**\n     * Keys that the language model accepts as call options.\n     */ get callKeys() {\n        return [\n            \"stop\",\n            \"timeout\",\n            \"signal\",\n            \"tags\",\n            \"metadata\",\n            \"callbacks\"\n        ];\n    }\n    constructor({ callbacks, callbackManager, ...params }){\n        super({\n            callbacks: callbacks ?? callbackManager,\n            ...params\n        });\n        /**\n         * The async caller should be used by subclasses to make any async calls,\n         * which will thus benefit from the concurrency and retry logic.\n         */ Object.defineProperty(this, \"caller\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"cache\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_encoding\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        if (typeof params.cache === \"object\") {\n            this.cache = params.cache;\n        } else if (params.cache) {\n            this.cache = _caches_js__WEBPACK_IMPORTED_MODULE_0__.InMemoryCache.global();\n        } else {\n            this.cache = undefined;\n        }\n        this.caller = new _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_3__.AsyncCaller(params ?? {});\n    }\n    async getNumTokens(content) {\n        // TODO: Figure out correct value.\n        if (typeof content !== \"string\") {\n            return 0;\n        }\n        // fallback to approximate calculation if tiktoken is not available\n        let numTokens = Math.ceil(content.length / 4);\n        if (!this._encoding) {\n            try {\n                this._encoding = await (0,_utils_tiktoken_js__WEBPACK_IMPORTED_MODULE_4__.encodingForModel)(\"modelName\" in this ? getModelNameForTiktoken(this.modelName) : \"gpt2\");\n            } catch (error) {\n                console.warn(\"Failed to calculate number of tokens, falling back to approximate count\", error);\n            }\n        }\n        if (this._encoding) {\n            try {\n                numTokens = this._encoding.encode(content).length;\n            } catch (error) {\n                console.warn(\"Failed to calculate number of tokens, falling back to approximate count\", error);\n            }\n        }\n        return numTokens;\n    }\n    static _convertInputToPromptValue(input) {\n        if (typeof input === \"string\") {\n            return new _prompt_values_js__WEBPACK_IMPORTED_MODULE_1__.StringPromptValue(input);\n        } else if (Array.isArray(input)) {\n            return new _prompt_values_js__WEBPACK_IMPORTED_MODULE_1__.ChatPromptValue(input.map(_messages_index_js__WEBPACK_IMPORTED_MODULE_2__.coerceMessageLikeToMessage));\n        } else {\n            return input;\n        }\n    }\n    /**\n     * Get the identifying parameters of the LLM.\n     */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    _identifyingParams() {\n        return {};\n    }\n    /**\n     * Create a unique cache key for a specific call to a specific language model.\n     * @param callOptions Call options for the model\n     * @returns A unique cache key.\n     */ _getSerializedCacheKeyParametersForCall(callOptions) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const params = {\n            ...this._identifyingParams(),\n            ...callOptions,\n            _type: this._llmType(),\n            _model: this._modelType()\n        };\n        const filteredEntries = Object.entries(params).filter(([_, value])=>value !== undefined);\n        const serializedEntries = filteredEntries.map(([key, value])=>`${key}:${JSON.stringify(value)}`).sort().join(\",\");\n        return serializedEntries;\n    }\n    /**\n     * @deprecated\n     * Return a json-like object representing this LLM.\n     */ serialize() {\n        return {\n            ...this._identifyingParams(),\n            _type: this._llmType(),\n            _model: this._modelType()\n        };\n    }\n    /**\n     * @deprecated\n     * Load an LLM from a json-like object describing it.\n     */ static async deserialize(_data) {\n        throw new Error(\"Use .toJSON() instead\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbGFuZ3VhZ2VfbW9kZWxzL2Jhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQTZDO0FBQzZCO0FBQ1A7QUFDWjtBQUNDO0FBQ1I7QUFDaEQsNENBQTRDO0FBQ3JDLE1BQU1PLDBCQUEwQixDQUFDQztJQUNwQyxJQUFJQSxVQUFVQyxVQUFVLENBQUMsc0JBQXNCO1FBQzNDLE9BQU87SUFDWDtJQUNBLElBQUlELFVBQVVDLFVBQVUsQ0FBQyxtQkFBbUI7UUFDeEMsT0FBTztJQUNYO0lBQ0EsSUFBSUQsVUFBVUMsVUFBVSxDQUFDLGNBQWM7UUFDbkMsT0FBTztJQUNYO0lBQ0EsSUFBSUQsVUFBVUMsVUFBVSxDQUFDLFdBQVc7UUFDaEMsT0FBTztJQUNYO0lBQ0EsT0FBT0Q7QUFDWCxFQUFFO0FBQ0ssTUFBTUUsMEJBQTBCLENBQUNGO0lBQ3BDLE9BQVFBO1FBQ0osS0FBSztZQUNELE9BQU87UUFDWDtZQUNJLE9BQU87SUFDZjtBQUNKLEVBQUU7QUFDSyxNQUFNRyxzQkFBc0IsQ0FBQ0g7SUFDaEMsT0FBUUQsd0JBQXdCQztRQUM1QixLQUFLO1lBQ0QsT0FBTztRQUNYLEtBQUs7WUFDRCxPQUFPO1FBQ1gsS0FBSztZQUNELE9BQU87UUFDWCxLQUFLO1lBQ0QsT0FBTztRQUNYLEtBQUs7WUFDRCxPQUFPO1FBQ1gsS0FBSztZQUNELE9BQU87UUFDWCxLQUFLO1lBQ0QsT0FBTztRQUNYLEtBQUs7WUFDRCxPQUFPO1FBQ1gsS0FBSztZQUNELE9BQU87UUFDWCxLQUFLO1lBQ0QsT0FBTztRQUNYO1lBQ0ksT0FBTztJQUNmO0FBQ0osRUFBRTtBQUNLLE1BQU1JLHFCQUFxQixPQUFPLEVBQUVDLE1BQU0sRUFBRUwsU0FBUyxFQUFHO0lBQzNELElBQUlNO0lBQ0osSUFBSTtRQUNBQSxZQUFZLENBQUMsTUFBTVQsb0VBQWdCQSxDQUFDRSx3QkFBd0JDLFdBQVUsRUFBR08sTUFBTSxDQUFDRixRQUFRRyxNQUFNO0lBQ2xHLEVBQ0EsT0FBT0MsT0FBTztRQUNWQyxRQUFRQyxJQUFJLENBQUM7UUFDYixtRUFBbUU7UUFDbkUsa0hBQWtIO1FBQ2xITCxZQUFZTSxLQUFLQyxJQUFJLENBQUNSLE9BQU9HLE1BQU0sR0FBRztJQUMxQztJQUNBLE1BQU1NLFlBQVlYLG9CQUFvQkg7SUFDdEMsT0FBT2MsWUFBWVI7QUFDdkIsRUFBRTtBQUNGLE1BQU1TLGVBQWUsSUFBTTtBQUMzQjs7Q0FFQyxHQUNNLE1BQU1DLHNCQUFzQmxCLHdEQUFRQTtJQUN2QyxJQUFJbUIsZ0JBQWdCO1FBQ2hCLE9BQU87WUFDSEMsV0FBV0M7WUFDWEMsU0FBU0Q7UUFDYjtJQUNKO0lBQ0FFLFlBQVlDLE1BQU0sQ0FBRTtRQUNoQixLQUFLLENBQUNBO1FBQ047O1NBRUMsR0FDREMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxXQUFXO1lBQ25DQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxhQUFhO1lBQ3JDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxRQUFRO1lBQ2hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxZQUFZO1lBQ3BDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNSLE9BQU8sR0FBR0UsT0FBT0YsT0FBTyxJQUFJTDtRQUNqQyxJQUFJLENBQUNHLFNBQVMsR0FBR0ksT0FBT0osU0FBUztRQUNqQyxJQUFJLENBQUNXLElBQUksR0FBR1AsT0FBT08sSUFBSSxJQUFJLEVBQUU7UUFDN0IsSUFBSSxDQUFDQyxRQUFRLEdBQUdSLE9BQU9RLFFBQVEsSUFBSSxDQUFDO0lBQ3hDO0FBQ0o7QUFDQTs7Q0FFQyxHQUNNLE1BQU1DLDBCQUEwQmY7SUFDbkM7O0tBRUMsR0FDRCxJQUFJZ0IsV0FBVztRQUNYLE9BQU87WUFBQztZQUFRO1lBQVc7WUFBVTtZQUFRO1lBQVk7U0FBWTtJQUN6RTtJQUNBWCxZQUFZLEVBQUVILFNBQVMsRUFBRWUsZUFBZSxFQUFFLEdBQUdYLFFBQVEsQ0FBRTtRQUNuRCxLQUFLLENBQUM7WUFDRkosV0FBV0EsYUFBYWU7WUFDeEIsR0FBR1gsTUFBTTtRQUNiO1FBQ0E7OztTQUdDLEdBQ0RDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsVUFBVTtZQUNsQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsU0FBUztZQUNqQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsYUFBYTtZQUNyQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxPQUFPTixPQUFPWSxLQUFLLEtBQUssVUFBVTtZQUNsQyxJQUFJLENBQUNBLEtBQUssR0FBR1osT0FBT1ksS0FBSztRQUM3QixPQUNLLElBQUlaLE9BQU9ZLEtBQUssRUFBRTtZQUNuQixJQUFJLENBQUNBLEtBQUssR0FBRzFDLHFEQUFhQSxDQUFDMkMsTUFBTTtRQUNyQyxPQUNLO1lBQ0QsSUFBSSxDQUFDRCxLQUFLLEdBQUdmO1FBQ2pCO1FBQ0EsSUFBSSxDQUFDaUIsTUFBTSxHQUFHLElBQUl4QywrREFBV0EsQ0FBQzBCLFVBQVUsQ0FBQztJQUM3QztJQUNBLE1BQU1lLGFBQWFDLE9BQU8sRUFBRTtRQUN4QixrQ0FBa0M7UUFDbEMsSUFBSSxPQUFPQSxZQUFZLFVBQVU7WUFDN0IsT0FBTztRQUNYO1FBQ0EsbUVBQW1FO1FBQ25FLElBQUloQyxZQUFZTSxLQUFLQyxJQUFJLENBQUN5QixRQUFROUIsTUFBTSxHQUFHO1FBQzNDLElBQUksQ0FBQyxJQUFJLENBQUMrQixTQUFTLEVBQUU7WUFDakIsSUFBSTtnQkFDQSxJQUFJLENBQUNBLFNBQVMsR0FBRyxNQUFNMUMsb0VBQWdCQSxDQUFDLGVBQWUsSUFBSSxHQUNyREUsd0JBQXdCLElBQUksQ0FBQ0MsU0FBUyxJQUN0QztZQUNWLEVBQ0EsT0FBT1MsT0FBTztnQkFDVkMsUUFBUUMsSUFBSSxDQUFDLDJFQUEyRUY7WUFDNUY7UUFDSjtRQUNBLElBQUksSUFBSSxDQUFDOEIsU0FBUyxFQUFFO1lBQ2hCLElBQUk7Z0JBQ0FqQyxZQUFZLElBQUksQ0FBQ2lDLFNBQVMsQ0FBQ2hDLE1BQU0sQ0FBQytCLFNBQVM5QixNQUFNO1lBQ3JELEVBQ0EsT0FBT0MsT0FBTztnQkFDVkMsUUFBUUMsSUFBSSxDQUFDLDJFQUEyRUY7WUFDNUY7UUFDSjtRQUNBLE9BQU9IO0lBQ1g7SUFDQSxPQUFPa0MsMkJBQTJCQyxLQUFLLEVBQUU7UUFDckMsSUFBSSxPQUFPQSxVQUFVLFVBQVU7WUFDM0IsT0FBTyxJQUFJaEQsZ0VBQWlCQSxDQUFDZ0Q7UUFDakMsT0FDSyxJQUFJQyxNQUFNQyxPQUFPLENBQUNGLFFBQVE7WUFDM0IsT0FBTyxJQUFJL0MsOERBQWVBLENBQUMrQyxNQUFNRyxHQUFHLENBQUNqRCwwRUFBMEJBO1FBQ25FLE9BQ0s7WUFDRCxPQUFPOEM7UUFDWDtJQUNKO0lBQ0E7O0tBRUMsR0FDRCw4REFBOEQ7SUFDOURJLHFCQUFxQjtRQUNqQixPQUFPLENBQUM7SUFDWjtJQUNBOzs7O0tBSUMsR0FDREMsd0NBQXdDQyxXQUFXLEVBQUU7UUFDakQsOERBQThEO1FBQzlELE1BQU16QixTQUFTO1lBQ1gsR0FBRyxJQUFJLENBQUN1QixrQkFBa0IsRUFBRTtZQUM1QixHQUFHRSxXQUFXO1lBQ2RDLE9BQU8sSUFBSSxDQUFDQyxRQUFRO1lBQ3BCQyxRQUFRLElBQUksQ0FBQ0MsVUFBVTtRQUMzQjtRQUNBLE1BQU1DLGtCQUFrQjdCLE9BQU84QixPQUFPLENBQUMvQixRQUFRZ0MsTUFBTSxDQUFDLENBQUMsQ0FBQ0MsR0FBRzNCLE1BQU0sR0FBS0EsVUFBVVQ7UUFDaEYsTUFBTXFDLG9CQUFvQkosZ0JBQ3JCUixHQUFHLENBQUMsQ0FBQyxDQUFDYSxLQUFLN0IsTUFBTSxHQUFLLENBQUMsRUFBRTZCLElBQUksQ0FBQyxFQUFFQyxLQUFLQyxTQUFTLENBQUMvQixPQUFPLENBQUMsRUFDdkRnQyxJQUFJLEdBQ0pDLElBQUksQ0FBQztRQUNWLE9BQU9MO0lBQ1g7SUFDQTs7O0tBR0MsR0FDRE0sWUFBWTtRQUNSLE9BQU87WUFDSCxHQUFHLElBQUksQ0FBQ2pCLGtCQUFrQixFQUFFO1lBQzVCRyxPQUFPLElBQUksQ0FBQ0MsUUFBUTtZQUNwQkMsUUFBUSxJQUFJLENBQUNDLFVBQVU7UUFDM0I7SUFDSjtJQUNBOzs7S0FHQyxHQUNELGFBQWFZLFlBQVlDLEtBQUssRUFBRTtRQUM1QixNQUFNLElBQUlDLE1BQU07SUFDcEI7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLWZvcm0tYnVpbGRlci10dXRvcmlhbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9sYW5ndWFnZV9tb2RlbHMvYmFzZS5qcz85YmUxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluTWVtb3J5Q2FjaGUgfSBmcm9tIFwiLi4vY2FjaGVzLmpzXCI7XG5pbXBvcnQgeyBTdHJpbmdQcm9tcHRWYWx1ZSwgQ2hhdFByb21wdFZhbHVlLCB9IGZyb20gXCIuLi9wcm9tcHRfdmFsdWVzLmpzXCI7XG5pbXBvcnQgeyBjb2VyY2VNZXNzYWdlTGlrZVRvTWVzc2FnZSwgfSBmcm9tIFwiLi4vbWVzc2FnZXMvaW5kZXguanNcIjtcbmltcG9ydCB7IEFzeW5jQ2FsbGVyIH0gZnJvbSBcIi4uL3V0aWxzL2FzeW5jX2NhbGxlci5qc1wiO1xuaW1wb3J0IHsgZW5jb2RpbmdGb3JNb2RlbCB9IGZyb20gXCIuLi91dGlscy90aWt0b2tlbi5qc1wiO1xuaW1wb3J0IHsgUnVubmFibGUgfSBmcm9tIFwiLi4vcnVubmFibGVzL2Jhc2UuanNcIjtcbi8vIGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL2pzLXRpa3Rva2VuXG5leHBvcnQgY29uc3QgZ2V0TW9kZWxOYW1lRm9yVGlrdG9rZW4gPSAobW9kZWxOYW1lKSA9PiB7XG4gICAgaWYgKG1vZGVsTmFtZS5zdGFydHNXaXRoKFwiZ3B0LTMuNS10dXJiby0xNmtcIikpIHtcbiAgICAgICAgcmV0dXJuIFwiZ3B0LTMuNS10dXJiby0xNmtcIjtcbiAgICB9XG4gICAgaWYgKG1vZGVsTmFtZS5zdGFydHNXaXRoKFwiZ3B0LTMuNS10dXJiby1cIikpIHtcbiAgICAgICAgcmV0dXJuIFwiZ3B0LTMuNS10dXJib1wiO1xuICAgIH1cbiAgICBpZiAobW9kZWxOYW1lLnN0YXJ0c1dpdGgoXCJncHQtNC0zMmtcIikpIHtcbiAgICAgICAgcmV0dXJuIFwiZ3B0LTQtMzJrXCI7XG4gICAgfVxuICAgIGlmIChtb2RlbE5hbWUuc3RhcnRzV2l0aChcImdwdC00LVwiKSkge1xuICAgICAgICByZXR1cm4gXCJncHQtNFwiO1xuICAgIH1cbiAgICByZXR1cm4gbW9kZWxOYW1lO1xufTtcbmV4cG9ydCBjb25zdCBnZXRFbWJlZGRpbmdDb250ZXh0U2l6ZSA9IChtb2RlbE5hbWUpID0+IHtcbiAgICBzd2l0Y2ggKG1vZGVsTmFtZSkge1xuICAgICAgICBjYXNlIFwidGV4dC1lbWJlZGRpbmctYWRhLTAwMlwiOlxuICAgICAgICAgICAgcmV0dXJuIDgxOTE7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gMjA0NjtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IGdldE1vZGVsQ29udGV4dFNpemUgPSAobW9kZWxOYW1lKSA9PiB7XG4gICAgc3dpdGNoIChnZXRNb2RlbE5hbWVGb3JUaWt0b2tlbihtb2RlbE5hbWUpKSB7XG4gICAgICAgIGNhc2UgXCJncHQtMy41LXR1cmJvLTE2a1wiOlxuICAgICAgICAgICAgcmV0dXJuIDE2Mzg0O1xuICAgICAgICBjYXNlIFwiZ3B0LTMuNS10dXJib1wiOlxuICAgICAgICAgICAgcmV0dXJuIDQwOTY7XG4gICAgICAgIGNhc2UgXCJncHQtNC0zMmtcIjpcbiAgICAgICAgICAgIHJldHVybiAzMjc2ODtcbiAgICAgICAgY2FzZSBcImdwdC00XCI6XG4gICAgICAgICAgICByZXR1cm4gODE5MjtcbiAgICAgICAgY2FzZSBcInRleHQtZGF2aW5jaS0wMDNcIjpcbiAgICAgICAgICAgIHJldHVybiA0MDk3O1xuICAgICAgICBjYXNlIFwidGV4dC1jdXJpZS0wMDFcIjpcbiAgICAgICAgICAgIHJldHVybiAyMDQ4O1xuICAgICAgICBjYXNlIFwidGV4dC1iYWJiYWdlLTAwMVwiOlxuICAgICAgICAgICAgcmV0dXJuIDIwNDg7XG4gICAgICAgIGNhc2UgXCJ0ZXh0LWFkYS0wMDFcIjpcbiAgICAgICAgICAgIHJldHVybiAyMDQ4O1xuICAgICAgICBjYXNlIFwiY29kZS1kYXZpbmNpLTAwMlwiOlxuICAgICAgICAgICAgcmV0dXJuIDgwMDA7XG4gICAgICAgIGNhc2UgXCJjb2RlLWN1c2htYW4tMDAxXCI6XG4gICAgICAgICAgICByZXR1cm4gMjA0ODtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiA0MDk3O1xuICAgIH1cbn07XG5leHBvcnQgY29uc3QgY2FsY3VsYXRlTWF4VG9rZW5zID0gYXN5bmMgKHsgcHJvbXB0LCBtb2RlbE5hbWUsIH0pID0+IHtcbiAgICBsZXQgbnVtVG9rZW5zO1xuICAgIHRyeSB7XG4gICAgICAgIG51bVRva2VucyA9IChhd2FpdCBlbmNvZGluZ0Zvck1vZGVsKGdldE1vZGVsTmFtZUZvclRpa3Rva2VuKG1vZGVsTmFtZSkpKS5lbmNvZGUocHJvbXB0KS5sZW5ndGg7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJGYWlsZWQgdG8gY2FsY3VsYXRlIG51bWJlciBvZiB0b2tlbnMsIGZhbGxpbmcgYmFjayB0byBhcHByb3hpbWF0ZSBjb3VudFwiKTtcbiAgICAgICAgLy8gZmFsbGJhY2sgdG8gYXBwcm94aW1hdGUgY2FsY3VsYXRpb24gaWYgdGlrdG9rZW4gaXMgbm90IGF2YWlsYWJsZVxuICAgICAgICAvLyBlYWNoIHRva2VuIGlzIH40IGNoYXJhY3RlcnM6IGh0dHBzOi8vaGVscC5vcGVuYWkuY29tL2VuL2FydGljbGVzLzQ5MzY4NTYtd2hhdC1hcmUtdG9rZW5zLWFuZC1ob3ctdG8tY291bnQtdGhlbSNcbiAgICAgICAgbnVtVG9rZW5zID0gTWF0aC5jZWlsKHByb21wdC5sZW5ndGggLyA0KTtcbiAgICB9XG4gICAgY29uc3QgbWF4VG9rZW5zID0gZ2V0TW9kZWxDb250ZXh0U2l6ZShtb2RlbE5hbWUpO1xuICAgIHJldHVybiBtYXhUb2tlbnMgLSBudW1Ub2tlbnM7XG59O1xuY29uc3QgZ2V0VmVyYm9zaXR5ID0gKCkgPT4gZmFsc2U7XG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIGxhbmd1YWdlIG1vZGVscywgY2hhaW5zLCB0b29scy5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VMYW5nQ2hhaW4gZXh0ZW5kcyBSdW5uYWJsZSB7XG4gICAgZ2V0IGxjX2F0dHJpYnV0ZXMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjYWxsYmFja3M6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHZlcmJvc2U6IHVuZGVmaW5lZCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IocGFyYW1zKSB7XG4gICAgICAgIHN1cGVyKHBhcmFtcyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIHRvIHByaW50IG91dCByZXNwb25zZSB0ZXh0LlxuICAgICAgICAgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidmVyYm9zZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjYWxsYmFja3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidGFnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtZXRhZGF0YVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnZlcmJvc2UgPSBwYXJhbXMudmVyYm9zZSA/PyBnZXRWZXJib3NpdHkoKTtcbiAgICAgICAgdGhpcy5jYWxsYmFja3MgPSBwYXJhbXMuY2FsbGJhY2tzO1xuICAgICAgICB0aGlzLnRhZ3MgPSBwYXJhbXMudGFncyA/PyBbXTtcbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IHBhcmFtcy5tZXRhZGF0YSA/PyB7fTtcbiAgICB9XG59XG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIGxhbmd1YWdlIG1vZGVscy5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VMYW5ndWFnZU1vZGVsIGV4dGVuZHMgQmFzZUxhbmdDaGFpbiB7XG4gICAgLyoqXG4gICAgICogS2V5cyB0aGF0IHRoZSBsYW5ndWFnZSBtb2RlbCBhY2NlcHRzIGFzIGNhbGwgb3B0aW9ucy5cbiAgICAgKi9cbiAgICBnZXQgY2FsbEtleXMoKSB7XG4gICAgICAgIHJldHVybiBbXCJzdG9wXCIsIFwidGltZW91dFwiLCBcInNpZ25hbFwiLCBcInRhZ3NcIiwgXCJtZXRhZGF0YVwiLCBcImNhbGxiYWNrc1wiXTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoeyBjYWxsYmFja3MsIGNhbGxiYWNrTWFuYWdlciwgLi4ucGFyYW1zIH0pIHtcbiAgICAgICAgc3VwZXIoe1xuICAgICAgICAgICAgY2FsbGJhY2tzOiBjYWxsYmFja3MgPz8gY2FsbGJhY2tNYW5hZ2VyLFxuICAgICAgICAgICAgLi4ucGFyYW1zLFxuICAgICAgICB9KTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBhc3luYyBjYWxsZXIgc2hvdWxkIGJlIHVzZWQgYnkgc3ViY2xhc3NlcyB0byBtYWtlIGFueSBhc3luYyBjYWxscyxcbiAgICAgICAgICogd2hpY2ggd2lsbCB0aHVzIGJlbmVmaXQgZnJvbSB0aGUgY29uY3VycmVuY3kgYW5kIHJldHJ5IGxvZ2ljLlxuICAgICAgICAgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2FsbGVyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNhY2hlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIl9lbmNvZGluZ1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodHlwZW9mIHBhcmFtcy5jYWNoZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgdGhpcy5jYWNoZSA9IHBhcmFtcy5jYWNoZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChwYXJhbXMuY2FjaGUpIHtcbiAgICAgICAgICAgIHRoaXMuY2FjaGUgPSBJbk1lbW9yeUNhY2hlLmdsb2JhbCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jYWNoZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNhbGxlciA9IG5ldyBBc3luY0NhbGxlcihwYXJhbXMgPz8ge30pO1xuICAgIH1cbiAgICBhc3luYyBnZXROdW1Ub2tlbnMoY29udGVudCkge1xuICAgICAgICAvLyBUT0RPOiBGaWd1cmUgb3V0IGNvcnJlY3QgdmFsdWUuXG4gICAgICAgIGlmICh0eXBlb2YgY29udGVudCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZmFsbGJhY2sgdG8gYXBwcm94aW1hdGUgY2FsY3VsYXRpb24gaWYgdGlrdG9rZW4gaXMgbm90IGF2YWlsYWJsZVxuICAgICAgICBsZXQgbnVtVG9rZW5zID0gTWF0aC5jZWlsKGNvbnRlbnQubGVuZ3RoIC8gNCk7XG4gICAgICAgIGlmICghdGhpcy5fZW5jb2RpbmcpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZW5jb2RpbmcgPSBhd2FpdCBlbmNvZGluZ0Zvck1vZGVsKFwibW9kZWxOYW1lXCIgaW4gdGhpc1xuICAgICAgICAgICAgICAgICAgICA/IGdldE1vZGVsTmFtZUZvclRpa3Rva2VuKHRoaXMubW9kZWxOYW1lKVxuICAgICAgICAgICAgICAgICAgICA6IFwiZ3B0MlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBjYWxjdWxhdGUgbnVtYmVyIG9mIHRva2VucywgZmFsbGluZyBiYWNrIHRvIGFwcHJveGltYXRlIGNvdW50XCIsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fZW5jb2RpbmcpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbnVtVG9rZW5zID0gdGhpcy5fZW5jb2RpbmcuZW5jb2RlKGNvbnRlbnQpLmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkZhaWxlZCB0byBjYWxjdWxhdGUgbnVtYmVyIG9mIHRva2VucywgZmFsbGluZyBiYWNrIHRvIGFwcHJveGltYXRlIGNvdW50XCIsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVtVG9rZW5zO1xuICAgIH1cbiAgICBzdGF0aWMgX2NvbnZlcnRJbnB1dFRvUHJvbXB0VmFsdWUoaW5wdXQpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmdQcm9tcHRWYWx1ZShpbnB1dCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2hhdFByb21wdFZhbHVlKGlucHV0Lm1hcChjb2VyY2VNZXNzYWdlTGlrZVRvTWVzc2FnZSkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGlucHV0O1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgaWRlbnRpZnlpbmcgcGFyYW1ldGVycyBvZiB0aGUgTExNLlxuICAgICAqL1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgX2lkZW50aWZ5aW5nUGFyYW1zKCkge1xuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIHVuaXF1ZSBjYWNoZSBrZXkgZm9yIGEgc3BlY2lmaWMgY2FsbCB0byBhIHNwZWNpZmljIGxhbmd1YWdlIG1vZGVsLlxuICAgICAqIEBwYXJhbSBjYWxsT3B0aW9ucyBDYWxsIG9wdGlvbnMgZm9yIHRoZSBtb2RlbFxuICAgICAqIEByZXR1cm5zIEEgdW5pcXVlIGNhY2hlIGtleS5cbiAgICAgKi9cbiAgICBfZ2V0U2VyaWFsaXplZENhY2hlS2V5UGFyYW1ldGVyc0ZvckNhbGwoY2FsbE9wdGlvbnMpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgICAgICAgLi4udGhpcy5faWRlbnRpZnlpbmdQYXJhbXMoKSxcbiAgICAgICAgICAgIC4uLmNhbGxPcHRpb25zLFxuICAgICAgICAgICAgX3R5cGU6IHRoaXMuX2xsbVR5cGUoKSxcbiAgICAgICAgICAgIF9tb2RlbDogdGhpcy5fbW9kZWxUeXBlKCksXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGZpbHRlcmVkRW50cmllcyA9IE9iamVjdC5lbnRyaWVzKHBhcmFtcykuZmlsdGVyKChbXywgdmFsdWVdKSA9PiB2YWx1ZSAhPT0gdW5kZWZpbmVkKTtcbiAgICAgICAgY29uc3Qgc2VyaWFsaXplZEVudHJpZXMgPSBmaWx0ZXJlZEVudHJpZXNcbiAgICAgICAgICAgIC5tYXAoKFtrZXksIHZhbHVlXSkgPT4gYCR7a2V5fToke0pTT04uc3RyaW5naWZ5KHZhbHVlKX1gKVxuICAgICAgICAgICAgLnNvcnQoKVxuICAgICAgICAgICAgLmpvaW4oXCIsXCIpO1xuICAgICAgICByZXR1cm4gc2VyaWFsaXplZEVudHJpZXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICogUmV0dXJuIGEganNvbi1saWtlIG9iamVjdCByZXByZXNlbnRpbmcgdGhpcyBMTE0uXG4gICAgICovXG4gICAgc2VyaWFsaXplKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4udGhpcy5faWRlbnRpZnlpbmdQYXJhbXMoKSxcbiAgICAgICAgICAgIF90eXBlOiB0aGlzLl9sbG1UeXBlKCksXG4gICAgICAgICAgICBfbW9kZWw6IHRoaXMuX21vZGVsVHlwZSgpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAqIExvYWQgYW4gTExNIGZyb20gYSBqc29uLWxpa2Ugb2JqZWN0IGRlc2NyaWJpbmcgaXQuXG4gICAgICovXG4gICAgc3RhdGljIGFzeW5jIGRlc2VyaWFsaXplKF9kYXRhKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVzZSAudG9KU09OKCkgaW5zdGVhZFwiKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiSW5NZW1vcnlDYWNoZSIsIlN0cmluZ1Byb21wdFZhbHVlIiwiQ2hhdFByb21wdFZhbHVlIiwiY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UiLCJBc3luY0NhbGxlciIsImVuY29kaW5nRm9yTW9kZWwiLCJSdW5uYWJsZSIsImdldE1vZGVsTmFtZUZvclRpa3Rva2VuIiwibW9kZWxOYW1lIiwic3RhcnRzV2l0aCIsImdldEVtYmVkZGluZ0NvbnRleHRTaXplIiwiZ2V0TW9kZWxDb250ZXh0U2l6ZSIsImNhbGN1bGF0ZU1heFRva2VucyIsInByb21wdCIsIm51bVRva2VucyIsImVuY29kZSIsImxlbmd0aCIsImVycm9yIiwiY29uc29sZSIsIndhcm4iLCJNYXRoIiwiY2VpbCIsIm1heFRva2VucyIsImdldFZlcmJvc2l0eSIsIkJhc2VMYW5nQ2hhaW4iLCJsY19hdHRyaWJ1dGVzIiwiY2FsbGJhY2tzIiwidW5kZWZpbmVkIiwidmVyYm9zZSIsImNvbnN0cnVjdG9yIiwicGFyYW1zIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsInRhZ3MiLCJtZXRhZGF0YSIsIkJhc2VMYW5ndWFnZU1vZGVsIiwiY2FsbEtleXMiLCJjYWxsYmFja01hbmFnZXIiLCJjYWNoZSIsImdsb2JhbCIsImNhbGxlciIsImdldE51bVRva2VucyIsImNvbnRlbnQiLCJfZW5jb2RpbmciLCJfY29udmVydElucHV0VG9Qcm9tcHRWYWx1ZSIsImlucHV0IiwiQXJyYXkiLCJpc0FycmF5IiwibWFwIiwiX2lkZW50aWZ5aW5nUGFyYW1zIiwiX2dldFNlcmlhbGl6ZWRDYWNoZUtleVBhcmFtZXRlcnNGb3JDYWxsIiwiY2FsbE9wdGlvbnMiLCJfdHlwZSIsIl9sbG1UeXBlIiwiX21vZGVsIiwiX21vZGVsVHlwZSIsImZpbHRlcmVkRW50cmllcyIsImVudHJpZXMiLCJmaWx0ZXIiLCJfIiwic2VyaWFsaXplZEVudHJpZXMiLCJrZXkiLCJKU09OIiwic3RyaW5naWZ5Iiwic29ydCIsImpvaW4iLCJzZXJpYWxpemUiLCJkZXNlcmlhbGl6ZSIsIl9kYXRhIiwiRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/language_models/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/language_models/chat_models.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/language_models/chat_models.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseChatModel: () => (/* binding */ BaseChatModel),\n/* harmony export */   SimpleChatModel: () => (/* binding */ SimpleChatModel),\n/* harmony export */   createChatMessageChunkEncoderStream: () => (/* binding */ createChatMessageChunkEncoderStream)\n/* harmony export */ });\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../messages/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/index.js\");\n/* harmony import */ var _outputs_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../outputs.js */ \"(rsc)/./node_modules/@langchain/core/dist/outputs.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/language_models/base.js\");\n/* harmony import */ var _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../callbacks/manager.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/manager.js\");\n\n\n\n\n/**\n * Creates a transform stream for encoding chat message chunks.\n * @deprecated Use {@link BytesOutputParser} instead\n * @returns A TransformStream instance that encodes chat message chunks.\n */ function createChatMessageChunkEncoderStream() {\n    const textEncoder = new TextEncoder();\n    return new TransformStream({\n        transform (chunk, controller) {\n            controller.enqueue(textEncoder.encode(typeof chunk.content === \"string\" ? chunk.content : JSON.stringify(chunk.content)));\n        }\n    });\n}\n/**\n * Base class for chat models. It extends the BaseLanguageModel class and\n * provides methods for generating chat based on input messages.\n */ class BaseChatModel extends _base_js__WEBPACK_IMPORTED_MODULE_2__.BaseLanguageModel {\n    constructor(fields){\n        super(fields);\n        // Only ever instantiated in main LangChain\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain\",\n                \"chat_models\",\n                this._llmType()\n            ]\n        });\n    }\n    _separateRunnableConfigFromCallOptions(options) {\n        const [runnableConfig, callOptions] = super._separateRunnableConfigFromCallOptions(options);\n        if (callOptions?.timeout && !callOptions.signal) {\n            callOptions.signal = AbortSignal.timeout(callOptions.timeout);\n        }\n        return [\n            runnableConfig,\n            callOptions\n        ];\n    }\n    /**\n     * Invokes the chat model with a single input.\n     * @param input The input for the language model.\n     * @param options The call options.\n     * @returns A Promise that resolves to a BaseMessageChunk.\n     */ async invoke(input, options) {\n        const promptValue = BaseChatModel._convertInputToPromptValue(input);\n        const result = await this.generatePrompt([\n            promptValue\n        ], options, options?.callbacks);\n        const chatGeneration = result.generations[0][0];\n        // TODO: Remove cast after figuring out inheritance\n        return chatGeneration.message;\n    }\n    // eslint-disable-next-line require-yield\n    async *_streamResponseChunks(_messages, _options, _runManager) {\n        throw new Error(\"Not implemented.\");\n    }\n    async *_streamIterator(input, options) {\n        // Subclass check required to avoid double callbacks with default implementation\n        if (this._streamResponseChunks === BaseChatModel.prototype._streamResponseChunks) {\n            yield this.invoke(input, options);\n        } else {\n            const prompt = BaseChatModel._convertInputToPromptValue(input);\n            const messages = prompt.toChatMessages();\n            const [runnableConfig, callOptions] = this._separateRunnableConfigFromCallOptions(options);\n            const callbackManager_ = await _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_3__.CallbackManager.configure(runnableConfig.callbacks, this.callbacks, runnableConfig.tags, this.tags, runnableConfig.metadata, this.metadata, {\n                verbose: this.verbose\n            });\n            const extra = {\n                options: callOptions,\n                invocation_params: this?.invocationParams(callOptions),\n                batch_size: 1\n            };\n            const runManagers = await callbackManager_?.handleChatModelStart(this.toJSON(), [\n                messages\n            ], undefined, undefined, extra, undefined, undefined, runnableConfig.runName);\n            let generationChunk;\n            try {\n                for await (const chunk of this._streamResponseChunks(messages, callOptions, runManagers?.[0])){\n                    chunk.message.response_metadata = _combineGenerationInfoAndMetadata(chunk);\n                    yield chunk.message;\n                    if (!generationChunk) {\n                        generationChunk = chunk;\n                    } else {\n                        generationChunk = generationChunk.concat(chunk);\n                    }\n                }\n            } catch (err) {\n                await Promise.all((runManagers ?? []).map((runManager)=>runManager?.handleLLMError(err)));\n                throw err;\n            }\n            await Promise.all((runManagers ?? []).map((runManager)=>runManager?.handleLLMEnd({\n                    // TODO: Remove cast after figuring out inheritance\n                    generations: [\n                        [\n                            generationChunk\n                        ]\n                    ]\n                })));\n        }\n    }\n    /** @ignore */ async _generateUncached(messages, parsedOptions, handledOptions) {\n        const baseMessages = messages.map((messageList)=>messageList.map(_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.coerceMessageLikeToMessage));\n        // create callback manager and start run\n        const callbackManager_ = await _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_3__.CallbackManager.configure(handledOptions.callbacks, this.callbacks, handledOptions.tags, this.tags, handledOptions.metadata, this.metadata, {\n            verbose: this.verbose\n        });\n        const extra = {\n            options: parsedOptions,\n            invocation_params: this?.invocationParams(parsedOptions),\n            batch_size: 1\n        };\n        const runManagers = await callbackManager_?.handleChatModelStart(this.toJSON(), baseMessages, undefined, undefined, extra, undefined, undefined, handledOptions.runName);\n        // generate results\n        const results = await Promise.allSettled(baseMessages.map((messageList, i)=>this._generate(messageList, {\n                ...parsedOptions,\n                promptIndex: i\n            }, runManagers?.[i])));\n        // handle results\n        const generations = [];\n        const llmOutputs = [];\n        await Promise.all(results.map(async (pResult, i)=>{\n            if (pResult.status === \"fulfilled\") {\n                const result = pResult.value;\n                for (const generation of result.generations){\n                    generation.message.response_metadata = _combineGenerationInfoAndMetadata(generation);\n                }\n                generations[i] = result.generations;\n                llmOutputs[i] = result.llmOutput;\n                return runManagers?.[i]?.handleLLMEnd({\n                    generations: [\n                        result.generations\n                    ],\n                    llmOutput: result.llmOutput\n                });\n            } else {\n                // status === \"rejected\"\n                await runManagers?.[i]?.handleLLMError(pResult.reason);\n                return Promise.reject(pResult.reason);\n            }\n        }));\n        // create combined output\n        const output = {\n            generations,\n            llmOutput: llmOutputs.length ? this._combineLLMOutput?.(...llmOutputs) : undefined\n        };\n        Object.defineProperty(output, _outputs_js__WEBPACK_IMPORTED_MODULE_1__.RUN_KEY, {\n            value: runManagers ? {\n                runIds: runManagers?.map((manager)=>manager.runId)\n            } : undefined,\n            configurable: true\n        });\n        return output;\n    }\n    async _generateCached({ messages, cache, llmStringKey, parsedOptions, handledOptions }) {\n        const baseMessages = messages.map((messageList)=>messageList.map(_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.coerceMessageLikeToMessage));\n        // create callback manager and start run\n        const callbackManager_ = await _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_3__.CallbackManager.configure(handledOptions.callbacks, this.callbacks, handledOptions.tags, this.tags, handledOptions.metadata, this.metadata, {\n            verbose: this.verbose\n        });\n        const extra = {\n            options: parsedOptions,\n            invocation_params: this?.invocationParams(parsedOptions),\n            batch_size: 1,\n            cached: true\n        };\n        const runManagers = await callbackManager_?.handleChatModelStart(this.toJSON(), baseMessages, undefined, undefined, extra, undefined, undefined, handledOptions.runName);\n        // generate results\n        const missingPromptIndices = [];\n        const results = await Promise.allSettled(baseMessages.map(async (baseMessage, index)=>{\n            // Join all content into one string for the prompt index\n            const prompt = BaseChatModel._convertInputToPromptValue(baseMessage).toString();\n            const result = await cache.lookup(prompt, llmStringKey);\n            if (result == null) {\n                missingPromptIndices.push(index);\n            }\n            return result;\n        }));\n        // Map run managers to the results before filtering out null results\n        // Null results are just absent from the cache.\n        const cachedResults = results.map((result, index)=>({\n                result,\n                runManager: runManagers?.[index]\n            })).filter(({ result })=>result.status === \"fulfilled\" && result.value != null || result.status === \"rejected\");\n        // Handle results and call run managers\n        const generations = [];\n        await Promise.all(cachedResults.map(async ({ result: promiseResult, runManager }, i)=>{\n            if (promiseResult.status === \"fulfilled\") {\n                const result = promiseResult.value;\n                generations[i] = result;\n                if (result.length) {\n                    await runManager?.handleLLMNewToken(result[0].text);\n                }\n                return runManager?.handleLLMEnd({\n                    generations: [\n                        result\n                    ]\n                });\n            } else {\n                // status === \"rejected\"\n                await runManager?.handleLLMError(promiseResult.reason);\n                return Promise.reject(promiseResult.reason);\n            }\n        }));\n        const output = {\n            generations,\n            missingPromptIndices\n        };\n        // This defines RUN_KEY as a non-enumerable property on the output object\n        // so that it is not serialized when the output is stringified, and so that\n        // it isnt included when listing the keys of the output object.\n        Object.defineProperty(output, _outputs_js__WEBPACK_IMPORTED_MODULE_1__.RUN_KEY, {\n            value: runManagers ? {\n                runIds: runManagers?.map((manager)=>manager.runId)\n            } : undefined,\n            configurable: true\n        });\n        return output;\n    }\n    /**\n     * Generates chat based on the input messages.\n     * @param messages An array of arrays of BaseMessage instances.\n     * @param options The call options or an array of stop sequences.\n     * @param callbacks The callbacks for the language model.\n     * @returns A Promise that resolves to an LLMResult.\n     */ async generate(messages, options, callbacks) {\n        // parse call options\n        let parsedOptions;\n        if (Array.isArray(options)) {\n            parsedOptions = {\n                stop: options\n            };\n        } else {\n            parsedOptions = options;\n        }\n        const baseMessages = messages.map((messageList)=>messageList.map(_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.coerceMessageLikeToMessage));\n        const [runnableConfig, callOptions] = this._separateRunnableConfigFromCallOptions(parsedOptions);\n        runnableConfig.callbacks = runnableConfig.callbacks ?? callbacks;\n        if (!this.cache) {\n            return this._generateUncached(baseMessages, callOptions, runnableConfig);\n        }\n        const { cache } = this;\n        const llmStringKey = this._getSerializedCacheKeyParametersForCall(callOptions);\n        const { generations, missingPromptIndices } = await this._generateCached({\n            messages: baseMessages,\n            cache,\n            llmStringKey,\n            parsedOptions: callOptions,\n            handledOptions: runnableConfig\n        });\n        let llmOutput = {};\n        if (missingPromptIndices.length > 0) {\n            const results = await this._generateUncached(missingPromptIndices.map((i)=>baseMessages[i]), callOptions, runnableConfig);\n            await Promise.all(results.generations.map(async (generation, index)=>{\n                const promptIndex = missingPromptIndices[index];\n                generations[promptIndex] = generation;\n                // Join all content into one string for the prompt index\n                const prompt = BaseChatModel._convertInputToPromptValue(baseMessages[promptIndex]).toString();\n                return cache.update(prompt, llmStringKey, generation);\n            }));\n            llmOutput = results.llmOutput ?? {};\n        }\n        return {\n            generations,\n            llmOutput\n        };\n    }\n    /**\n     * Get the parameters used to invoke the model\n     */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    invocationParams(_options) {\n        return {};\n    }\n    _modelType() {\n        return \"base_chat_model\";\n    }\n    /**\n     * @deprecated\n     * Return a json-like object representing this LLM.\n     */ serialize() {\n        return {\n            ...this.invocationParams(),\n            _type: this._llmType(),\n            _model: this._modelType()\n        };\n    }\n    /**\n     * Generates a prompt based on the input prompt values.\n     * @param promptValues An array of BasePromptValue instances.\n     * @param options The call options or an array of stop sequences.\n     * @param callbacks The callbacks for the language model.\n     * @returns A Promise that resolves to an LLMResult.\n     */ async generatePrompt(promptValues, options, callbacks) {\n        const promptMessages = promptValues.map((promptValue)=>promptValue.toChatMessages());\n        return this.generate(promptMessages, options, callbacks);\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.2.0.\n     *\n     * Makes a single call to the chat model.\n     * @param messages An array of BaseMessage instances.\n     * @param options The call options or an array of stop sequences.\n     * @param callbacks The callbacks for the language model.\n     * @returns A Promise that resolves to a BaseMessage.\n     */ async call(messages, options, callbacks) {\n        const result = await this.generate([\n            messages.map(_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.coerceMessageLikeToMessage)\n        ], options, callbacks);\n        const generations = result.generations;\n        return generations[0][0].message;\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.2.0.\n     *\n     * Makes a single call to the chat model with a prompt value.\n     * @param promptValue The value of the prompt.\n     * @param options The call options or an array of stop sequences.\n     * @param callbacks The callbacks for the language model.\n     * @returns A Promise that resolves to a BaseMessage.\n     */ async callPrompt(promptValue, options, callbacks) {\n        const promptMessages = promptValue.toChatMessages();\n        return this.call(promptMessages, options, callbacks);\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.2.0.\n     *\n     * Predicts the next message based on the input messages.\n     * @param messages An array of BaseMessage instances.\n     * @param options The call options or an array of stop sequences.\n     * @param callbacks The callbacks for the language model.\n     * @returns A Promise that resolves to a BaseMessage.\n     */ async predictMessages(messages, options, callbacks) {\n        return this.call(messages, options, callbacks);\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.2.0.\n     *\n     * Predicts the next message based on a text input.\n     * @param text The text input.\n     * @param options The call options or an array of stop sequences.\n     * @param callbacks The callbacks for the language model.\n     * @returns A Promise that resolves to a string.\n     */ async predict(text, options, callbacks) {\n        const message = new _messages_index_js__WEBPACK_IMPORTED_MODULE_0__.HumanMessage(text);\n        const result = await this.call([\n            message\n        ], options, callbacks);\n        if (typeof result.content !== \"string\") {\n            throw new Error(\"Cannot use predict when output is not a string.\");\n        }\n        return result.content;\n    }\n}\n/**\n * An abstract class that extends BaseChatModel and provides a simple\n * implementation of _generate.\n */ class SimpleChatModel extends BaseChatModel {\n    async _generate(messages, options, runManager) {\n        const text = await this._call(messages, options, runManager);\n        const message = new _messages_index_js__WEBPACK_IMPORTED_MODULE_0__.AIMessage(text);\n        if (typeof message.content !== \"string\") {\n            throw new Error(\"Cannot generate with a simple chat model when output is not a string.\");\n        }\n        return {\n            generations: [\n                {\n                    text: message.content,\n                    message\n                }\n            ]\n        };\n    }\n}\nfunction _combineGenerationInfoAndMetadata(generation) {\n    return {\n        ...generation.generationInfo,\n        ...generation.message.response_metadata\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbGFuZ3VhZ2VfbW9kZWxzL2NoYXRfbW9kZWxzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBNEY7QUFDbkQ7QUFDTTtBQUNZO0FBQzNEOzs7O0NBSUMsR0FDTSxTQUFTTTtJQUNaLE1BQU1DLGNBQWMsSUFBSUM7SUFDeEIsT0FBTyxJQUFJQyxnQkFBZ0I7UUFDdkJDLFdBQVVDLEtBQUssRUFBRUMsVUFBVTtZQUN2QkEsV0FBV0MsT0FBTyxDQUFDTixZQUFZTyxNQUFNLENBQUMsT0FBT0gsTUFBTUksT0FBTyxLQUFLLFdBQ3pESixNQUFNSSxPQUFPLEdBQ2JDLEtBQUtDLFNBQVMsQ0FBQ04sTUFBTUksT0FBTztRQUN0QztJQUNKO0FBQ0o7QUFDQTs7O0NBR0MsR0FDTSxNQUFNRyxzQkFBc0JkLHVEQUFpQkE7SUFDaERlLFlBQVlDLE1BQU0sQ0FBRTtRQUNoQixLQUFLLENBQUNBO1FBQ04sMkNBQTJDO1FBQzNDQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztnQkFBQztnQkFBYTtnQkFBZSxJQUFJLENBQUNDLFFBQVE7YUFBRztRQUN4RDtJQUNKO0lBQ0FDLHVDQUF1Q0MsT0FBTyxFQUFFO1FBQzVDLE1BQU0sQ0FBQ0MsZ0JBQWdCQyxZQUFZLEdBQUcsS0FBSyxDQUFDSCx1Q0FBdUNDO1FBQ25GLElBQUlFLGFBQWFDLFdBQVcsQ0FBQ0QsWUFBWUUsTUFBTSxFQUFFO1lBQzdDRixZQUFZRSxNQUFNLEdBQUdDLFlBQVlGLE9BQU8sQ0FBQ0QsWUFBWUMsT0FBTztRQUNoRTtRQUNBLE9BQU87WUFBQ0Y7WUFBZ0JDO1NBQVk7SUFDeEM7SUFDQTs7Ozs7S0FLQyxHQUNELE1BQU1JLE9BQU9DLEtBQUssRUFBRVAsT0FBTyxFQUFFO1FBQ3pCLE1BQU1RLGNBQWNuQixjQUFjb0IsMEJBQTBCLENBQUNG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LE1BQU1HLFVBQVUsSUFBSTNDLDREQUFZQSxDQUFDb0g7UUFDakMsTUFBTTlFLFNBQVMsTUFBTSxJQUFJLENBQUMyRixJQUFJLENBQUM7WUFBQ3RGO1NBQVEsRUFBRWYsU0FBU1k7UUFDbkQsSUFBSSxPQUFPRixPQUFPeEIsT0FBTyxLQUFLLFVBQVU7WUFDcEMsTUFBTSxJQUFJa0MsTUFBTTtRQUNwQjtRQUNBLE9BQU9WLE9BQU94QixPQUFPO0lBQ3pCO0FBQ0o7QUFDQTs7O0NBR0MsR0FDTSxNQUFNdUgsd0JBQXdCcEg7SUFDakMsTUFBTXNFLFVBQVVuQyxRQUFRLEVBQUV4QixPQUFPLEVBQUVnRCxVQUFVLEVBQUU7UUFDM0MsTUFBTXdDLE9BQU8sTUFBTSxJQUFJLENBQUNrQixLQUFLLENBQUNsRixVQUFVeEIsU0FBU2dEO1FBQ2pELE1BQU1qQyxVQUFVLElBQUk1Qyx5REFBU0EsQ0FBQ3FIO1FBQzlCLElBQUksT0FBT3pFLFFBQVE3QixPQUFPLEtBQUssVUFBVTtZQUNyQyxNQUFNLElBQUlrQyxNQUFNO1FBQ3BCO1FBQ0EsT0FBTztZQUNITixhQUFhO2dCQUNUO29CQUNJMEUsTUFBTXpFLFFBQVE3QixPQUFPO29CQUNyQjZCO2dCQUNKO2FBQ0g7UUFDTDtJQUNKO0FBQ0o7QUFDQSxTQUFTMkIsa0NBQWtDc0IsVUFBVTtJQUNqRCxPQUFPO1FBQ0gsR0FBR0EsV0FBVzJDLGNBQWM7UUFDNUIsR0FBRzNDLFdBQVdqRCxPQUFPLENBQUMwQixpQkFBaUI7SUFDM0M7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLWZvcm0tYnVpbGRlci10dXRvcmlhbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9sYW5ndWFnZV9tb2RlbHMvY2hhdF9tb2RlbHMuanM/MmQ4NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBSU1lc3NhZ2UsIEh1bWFuTWVzc2FnZSwgY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UsIH0gZnJvbSBcIi4uL21lc3NhZ2VzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBSVU5fS0VZLCB9IGZyb20gXCIuLi9vdXRwdXRzLmpzXCI7XG5pbXBvcnQgeyBCYXNlTGFuZ3VhZ2VNb2RlbCwgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBDYWxsYmFja01hbmFnZXIsIH0gZnJvbSBcIi4uL2NhbGxiYWNrcy9tYW5hZ2VyLmpzXCI7XG4vKipcbiAqIENyZWF0ZXMgYSB0cmFuc2Zvcm0gc3RyZWFtIGZvciBlbmNvZGluZyBjaGF0IG1lc3NhZ2UgY2h1bmtzLlxuICogQGRlcHJlY2F0ZWQgVXNlIHtAbGluayBCeXRlc091dHB1dFBhcnNlcn0gaW5zdGVhZFxuICogQHJldHVybnMgQSBUcmFuc2Zvcm1TdHJlYW0gaW5zdGFuY2UgdGhhdCBlbmNvZGVzIGNoYXQgbWVzc2FnZSBjaHVua3MuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDaGF0TWVzc2FnZUNodW5rRW5jb2RlclN0cmVhbSgpIHtcbiAgICBjb25zdCB0ZXh0RW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuICAgIHJldHVybiBuZXcgVHJhbnNmb3JtU3RyZWFtKHtcbiAgICAgICAgdHJhbnNmb3JtKGNodW5rLCBjb250cm9sbGVyKSB7XG4gICAgICAgICAgICBjb250cm9sbGVyLmVucXVldWUodGV4dEVuY29kZXIuZW5jb2RlKHR5cGVvZiBjaHVuay5jb250ZW50ID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICAgICAgPyBjaHVuay5jb250ZW50XG4gICAgICAgICAgICAgICAgOiBKU09OLnN0cmluZ2lmeShjaHVuay5jb250ZW50KSkpO1xuICAgICAgICB9LFxuICAgIH0pO1xufVxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBjaGF0IG1vZGVscy4gSXQgZXh0ZW5kcyB0aGUgQmFzZUxhbmd1YWdlTW9kZWwgY2xhc3MgYW5kXG4gKiBwcm92aWRlcyBtZXRob2RzIGZvciBnZW5lcmF0aW5nIGNoYXQgYmFzZWQgb24gaW5wdXQgbWVzc2FnZXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlQ2hhdE1vZGVsIGV4dGVuZHMgQmFzZUxhbmd1YWdlTW9kZWwge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICAvLyBPbmx5IGV2ZXIgaW5zdGFudGlhdGVkIGluIG1haW4gTGFuZ0NoYWluXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluXCIsIFwiY2hhdF9tb2RlbHNcIiwgdGhpcy5fbGxtVHlwZSgpXVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX3NlcGFyYXRlUnVubmFibGVDb25maWdGcm9tQ2FsbE9wdGlvbnMob3B0aW9ucykge1xuICAgICAgICBjb25zdCBbcnVubmFibGVDb25maWcsIGNhbGxPcHRpb25zXSA9IHN1cGVyLl9zZXBhcmF0ZVJ1bm5hYmxlQ29uZmlnRnJvbUNhbGxPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICBpZiAoY2FsbE9wdGlvbnM/LnRpbWVvdXQgJiYgIWNhbGxPcHRpb25zLnNpZ25hbCkge1xuICAgICAgICAgICAgY2FsbE9wdGlvbnMuc2lnbmFsID0gQWJvcnRTaWduYWwudGltZW91dChjYWxsT3B0aW9ucy50aW1lb3V0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW3J1bm5hYmxlQ29uZmlnLCBjYWxsT3B0aW9uc107XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEludm9rZXMgdGhlIGNoYXQgbW9kZWwgd2l0aCBhIHNpbmdsZSBpbnB1dC5cbiAgICAgKiBAcGFyYW0gaW5wdXQgVGhlIGlucHV0IGZvciB0aGUgbGFuZ3VhZ2UgbW9kZWwuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgVGhlIGNhbGwgb3B0aW9ucy5cbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIEJhc2VNZXNzYWdlQ2h1bmsuXG4gICAgICovXG4gICAgYXN5bmMgaW52b2tlKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHByb21wdFZhbHVlID0gQmFzZUNoYXRNb2RlbC5fY29udmVydElucHV0VG9Qcm9tcHRWYWx1ZShpbnB1dCk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVQcm9tcHQoW3Byb21wdFZhbHVlXSwgb3B0aW9ucywgb3B0aW9ucz8uY2FsbGJhY2tzKTtcbiAgICAgICAgY29uc3QgY2hhdEdlbmVyYXRpb24gPSByZXN1bHQuZ2VuZXJhdGlvbnNbMF1bMF07XG4gICAgICAgIC8vIFRPRE86IFJlbW92ZSBjYXN0IGFmdGVyIGZpZ3VyaW5nIG91dCBpbmhlcml0YW5jZVxuICAgICAgICByZXR1cm4gY2hhdEdlbmVyYXRpb24ubWVzc2FnZTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlcXVpcmUteWllbGRcbiAgICBhc3luYyAqX3N0cmVhbVJlc3BvbnNlQ2h1bmtzKF9tZXNzYWdlcywgX29wdGlvbnMsIF9ydW5NYW5hZ2VyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRlZC5cIik7XG4gICAgfVxuICAgIGFzeW5jICpfc3RyZWFtSXRlcmF0b3IoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgLy8gU3ViY2xhc3MgY2hlY2sgcmVxdWlyZWQgdG8gYXZvaWQgZG91YmxlIGNhbGxiYWNrcyB3aXRoIGRlZmF1bHQgaW1wbGVtZW50YXRpb25cbiAgICAgICAgaWYgKHRoaXMuX3N0cmVhbVJlc3BvbnNlQ2h1bmtzID09PVxuICAgICAgICAgICAgQmFzZUNoYXRNb2RlbC5wcm90b3R5cGUuX3N0cmVhbVJlc3BvbnNlQ2h1bmtzKSB7XG4gICAgICAgICAgICB5aWVsZCB0aGlzLmludm9rZShpbnB1dCwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBwcm9tcHQgPSBCYXNlQ2hhdE1vZGVsLl9jb252ZXJ0SW5wdXRUb1Byb21wdFZhbHVlKGlucHV0KTtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VzID0gcHJvbXB0LnRvQ2hhdE1lc3NhZ2VzKCk7XG4gICAgICAgICAgICBjb25zdCBbcnVubmFibGVDb25maWcsIGNhbGxPcHRpb25zXSA9IHRoaXMuX3NlcGFyYXRlUnVubmFibGVDb25maWdGcm9tQ2FsbE9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgQ2FsbGJhY2tNYW5hZ2VyLmNvbmZpZ3VyZShydW5uYWJsZUNvbmZpZy5jYWxsYmFja3MsIHRoaXMuY2FsbGJhY2tzLCBydW5uYWJsZUNvbmZpZy50YWdzLCB0aGlzLnRhZ3MsIHJ1bm5hYmxlQ29uZmlnLm1ldGFkYXRhLCB0aGlzLm1ldGFkYXRhLCB7IHZlcmJvc2U6IHRoaXMudmVyYm9zZSB9KTtcbiAgICAgICAgICAgIGNvbnN0IGV4dHJhID0ge1xuICAgICAgICAgICAgICAgIG9wdGlvbnM6IGNhbGxPcHRpb25zLFxuICAgICAgICAgICAgICAgIGludm9jYXRpb25fcGFyYW1zOiB0aGlzPy5pbnZvY2F0aW9uUGFyYW1zKGNhbGxPcHRpb25zKSxcbiAgICAgICAgICAgICAgICBiYXRjaF9zaXplOiAxLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJ1bk1hbmFnZXJzID0gYXdhaXQgY2FsbGJhY2tNYW5hZ2VyXz8uaGFuZGxlQ2hhdE1vZGVsU3RhcnQodGhpcy50b0pTT04oKSwgW21lc3NhZ2VzXSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGV4dHJhLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgcnVubmFibGVDb25maWcucnVuTmFtZSk7XG4gICAgICAgICAgICBsZXQgZ2VuZXJhdGlvbkNodW5rO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHRoaXMuX3N0cmVhbVJlc3BvbnNlQ2h1bmtzKG1lc3NhZ2VzLCBjYWxsT3B0aW9ucywgcnVuTWFuYWdlcnM/LlswXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2h1bmsubWVzc2FnZS5yZXNwb25zZV9tZXRhZGF0YSA9XG4gICAgICAgICAgICAgICAgICAgICAgICBfY29tYmluZUdlbmVyYXRpb25JbmZvQW5kTWV0YWRhdGEoY2h1bmspO1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCBjaHVuay5tZXNzYWdlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWdlbmVyYXRpb25DaHVuaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGlvbkNodW5rID0gY2h1bms7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZW5lcmF0aW9uQ2h1bmsgPSBnZW5lcmF0aW9uQ2h1bmsuY29uY2F0KGNodW5rKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCgocnVuTWFuYWdlcnMgPz8gW10pLm1hcCgocnVuTWFuYWdlcikgPT4gcnVuTWFuYWdlcj8uaGFuZGxlTExNRXJyb3IoZXJyKSkpO1xuICAgICAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKChydW5NYW5hZ2VycyA/PyBbXSkubWFwKChydW5NYW5hZ2VyKSA9PiBydW5NYW5hZ2VyPy5oYW5kbGVMTE1FbmQoe1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IFJlbW92ZSBjYXN0IGFmdGVyIGZpZ3VyaW5nIG91dCBpbmhlcml0YW5jZVxuICAgICAgICAgICAgICAgIGdlbmVyYXRpb25zOiBbW2dlbmVyYXRpb25DaHVua11dLFxuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogQGlnbm9yZSAqL1xuICAgIGFzeW5jIF9nZW5lcmF0ZVVuY2FjaGVkKG1lc3NhZ2VzLCBwYXJzZWRPcHRpb25zLCBoYW5kbGVkT3B0aW9ucykge1xuICAgICAgICBjb25zdCBiYXNlTWVzc2FnZXMgPSBtZXNzYWdlcy5tYXAoKG1lc3NhZ2VMaXN0KSA9PiBtZXNzYWdlTGlzdC5tYXAoY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UpKTtcbiAgICAgICAgLy8gY3JlYXRlIGNhbGxiYWNrIG1hbmFnZXIgYW5kIHN0YXJ0IHJ1blxuICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgQ2FsbGJhY2tNYW5hZ2VyLmNvbmZpZ3VyZShoYW5kbGVkT3B0aW9ucy5jYWxsYmFja3MsIHRoaXMuY2FsbGJhY2tzLCBoYW5kbGVkT3B0aW9ucy50YWdzLCB0aGlzLnRhZ3MsIGhhbmRsZWRPcHRpb25zLm1ldGFkYXRhLCB0aGlzLm1ldGFkYXRhLCB7IHZlcmJvc2U6IHRoaXMudmVyYm9zZSB9KTtcbiAgICAgICAgY29uc3QgZXh0cmEgPSB7XG4gICAgICAgICAgICBvcHRpb25zOiBwYXJzZWRPcHRpb25zLFxuICAgICAgICAgICAgaW52b2NhdGlvbl9wYXJhbXM6IHRoaXM/Lmludm9jYXRpb25QYXJhbXMocGFyc2VkT3B0aW9ucyksXG4gICAgICAgICAgICBiYXRjaF9zaXplOiAxLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBydW5NYW5hZ2VycyA9IGF3YWl0IGNhbGxiYWNrTWFuYWdlcl8/LmhhbmRsZUNoYXRNb2RlbFN0YXJ0KHRoaXMudG9KU09OKCksIGJhc2VNZXNzYWdlcywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGV4dHJhLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgaGFuZGxlZE9wdGlvbnMucnVuTmFtZSk7XG4gICAgICAgIC8vIGdlbmVyYXRlIHJlc3VsdHNcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsU2V0dGxlZChiYXNlTWVzc2FnZXMubWFwKChtZXNzYWdlTGlzdCwgaSkgPT4gdGhpcy5fZ2VuZXJhdGUobWVzc2FnZUxpc3QsIHsgLi4ucGFyc2VkT3B0aW9ucywgcHJvbXB0SW5kZXg6IGkgfSwgcnVuTWFuYWdlcnM/LltpXSkpKTtcbiAgICAgICAgLy8gaGFuZGxlIHJlc3VsdHNcbiAgICAgICAgY29uc3QgZ2VuZXJhdGlvbnMgPSBbXTtcbiAgICAgICAgY29uc3QgbGxtT3V0cHV0cyA9IFtdO1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChyZXN1bHRzLm1hcChhc3luYyAocFJlc3VsdCwgaSkgPT4ge1xuICAgICAgICAgICAgaWYgKHBSZXN1bHQuc3RhdHVzID09PSBcImZ1bGZpbGxlZFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gcFJlc3VsdC52YWx1ZTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGdlbmVyYXRpb24gb2YgcmVzdWx0LmdlbmVyYXRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIGdlbmVyYXRpb24ubWVzc2FnZS5yZXNwb25zZV9tZXRhZGF0YSA9XG4gICAgICAgICAgICAgICAgICAgICAgICBfY29tYmluZUdlbmVyYXRpb25JbmZvQW5kTWV0YWRhdGEoZ2VuZXJhdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdlbmVyYXRpb25zW2ldID0gcmVzdWx0LmdlbmVyYXRpb25zO1xuICAgICAgICAgICAgICAgIGxsbU91dHB1dHNbaV0gPSByZXN1bHQubGxtT3V0cHV0O1xuICAgICAgICAgICAgICAgIHJldHVybiBydW5NYW5hZ2Vycz8uW2ldPy5oYW5kbGVMTE1FbmQoe1xuICAgICAgICAgICAgICAgICAgICBnZW5lcmF0aW9uczogW3Jlc3VsdC5nZW5lcmF0aW9uc10sXG4gICAgICAgICAgICAgICAgICAgIGxsbU91dHB1dDogcmVzdWx0LmxsbU91dHB1dCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIHN0YXR1cyA9PT0gXCJyZWplY3RlZFwiXG4gICAgICAgICAgICAgICAgYXdhaXQgcnVuTWFuYWdlcnM/LltpXT8uaGFuZGxlTExNRXJyb3IocFJlc3VsdC5yZWFzb24pO1xuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChwUmVzdWx0LnJlYXNvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgLy8gY3JlYXRlIGNvbWJpbmVkIG91dHB1dFxuICAgICAgICBjb25zdCBvdXRwdXQgPSB7XG4gICAgICAgICAgICBnZW5lcmF0aW9ucyxcbiAgICAgICAgICAgIGxsbU91dHB1dDogbGxtT3V0cHV0cy5sZW5ndGhcbiAgICAgICAgICAgICAgICA/IHRoaXMuX2NvbWJpbmVMTE1PdXRwdXQ/LiguLi5sbG1PdXRwdXRzKVxuICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob3V0cHV0LCBSVU5fS0VZLCB7XG4gICAgICAgICAgICB2YWx1ZTogcnVuTWFuYWdlcnNcbiAgICAgICAgICAgICAgICA/IHsgcnVuSWRzOiBydW5NYW5hZ2Vycz8ubWFwKChtYW5hZ2VyKSA9PiBtYW5hZ2VyLnJ1bklkKSB9XG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbiAgICBhc3luYyBfZ2VuZXJhdGVDYWNoZWQoeyBtZXNzYWdlcywgY2FjaGUsIGxsbVN0cmluZ0tleSwgcGFyc2VkT3B0aW9ucywgaGFuZGxlZE9wdGlvbnMsIH0pIHtcbiAgICAgICAgY29uc3QgYmFzZU1lc3NhZ2VzID0gbWVzc2FnZXMubWFwKChtZXNzYWdlTGlzdCkgPT4gbWVzc2FnZUxpc3QubWFwKGNvZXJjZU1lc3NhZ2VMaWtlVG9NZXNzYWdlKSk7XG4gICAgICAgIC8vIGNyZWF0ZSBjYWxsYmFjayBtYW5hZ2VyIGFuZCBzdGFydCBydW5cbiAgICAgICAgY29uc3QgY2FsbGJhY2tNYW5hZ2VyXyA9IGF3YWl0IENhbGxiYWNrTWFuYWdlci5jb25maWd1cmUoaGFuZGxlZE9wdGlvbnMuY2FsbGJhY2tzLCB0aGlzLmNhbGxiYWNrcywgaGFuZGxlZE9wdGlvbnMudGFncywgdGhpcy50YWdzLCBoYW5kbGVkT3B0aW9ucy5tZXRhZGF0YSwgdGhpcy5tZXRhZGF0YSwgeyB2ZXJib3NlOiB0aGlzLnZlcmJvc2UgfSk7XG4gICAgICAgIGNvbnN0IGV4dHJhID0ge1xuICAgICAgICAgICAgb3B0aW9uczogcGFyc2VkT3B0aW9ucyxcbiAgICAgICAgICAgIGludm9jYXRpb25fcGFyYW1zOiB0aGlzPy5pbnZvY2F0aW9uUGFyYW1zKHBhcnNlZE9wdGlvbnMpLFxuICAgICAgICAgICAgYmF0Y2hfc2l6ZTogMSxcbiAgICAgICAgICAgIGNhY2hlZDogdHJ1ZSxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcnVuTWFuYWdlcnMgPSBhd2FpdCBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVDaGF0TW9kZWxTdGFydCh0aGlzLnRvSlNPTigpLCBiYXNlTWVzc2FnZXMsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBleHRyYSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGhhbmRsZWRPcHRpb25zLnJ1bk5hbWUpO1xuICAgICAgICAvLyBnZW5lcmF0ZSByZXN1bHRzXG4gICAgICAgIGNvbnN0IG1pc3NpbmdQcm9tcHRJbmRpY2VzID0gW107XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQoYmFzZU1lc3NhZ2VzLm1hcChhc3luYyAoYmFzZU1lc3NhZ2UsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAvLyBKb2luIGFsbCBjb250ZW50IGludG8gb25lIHN0cmluZyBmb3IgdGhlIHByb21wdCBpbmRleFxuICAgICAgICAgICAgY29uc3QgcHJvbXB0ID0gQmFzZUNoYXRNb2RlbC5fY29udmVydElucHV0VG9Qcm9tcHRWYWx1ZShiYXNlTWVzc2FnZSkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNhY2hlLmxvb2t1cChwcm9tcHQsIGxsbVN0cmluZ0tleSk7XG4gICAgICAgICAgICBpZiAocmVzdWx0ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBtaXNzaW5nUHJvbXB0SW5kaWNlcy5wdXNoKGluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0pKTtcbiAgICAgICAgLy8gTWFwIHJ1biBtYW5hZ2VycyB0byB0aGUgcmVzdWx0cyBiZWZvcmUgZmlsdGVyaW5nIG91dCBudWxsIHJlc3VsdHNcbiAgICAgICAgLy8gTnVsbCByZXN1bHRzIGFyZSBqdXN0IGFic2VudCBmcm9tIHRoZSBjYWNoZS5cbiAgICAgICAgY29uc3QgY2FjaGVkUmVzdWx0cyA9IHJlc3VsdHNcbiAgICAgICAgICAgIC5tYXAoKHJlc3VsdCwgaW5kZXgpID0+ICh7IHJlc3VsdCwgcnVuTWFuYWdlcjogcnVuTWFuYWdlcnM/LltpbmRleF0gfSkpXG4gICAgICAgICAgICAuZmlsdGVyKCh7IHJlc3VsdCB9KSA9PiAocmVzdWx0LnN0YXR1cyA9PT0gXCJmdWxmaWxsZWRcIiAmJiByZXN1bHQudmFsdWUgIT0gbnVsbCkgfHxcbiAgICAgICAgICAgIHJlc3VsdC5zdGF0dXMgPT09IFwicmVqZWN0ZWRcIik7XG4gICAgICAgIC8vIEhhbmRsZSByZXN1bHRzIGFuZCBjYWxsIHJ1biBtYW5hZ2Vyc1xuICAgICAgICBjb25zdCBnZW5lcmF0aW9ucyA9IFtdO1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChjYWNoZWRSZXN1bHRzLm1hcChhc3luYyAoeyByZXN1bHQ6IHByb21pc2VSZXN1bHQsIHJ1bk1hbmFnZXIgfSwgaSkgPT4ge1xuICAgICAgICAgICAgaWYgKHByb21pc2VSZXN1bHQuc3RhdHVzID09PSBcImZ1bGZpbGxlZFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gcHJvbWlzZVJlc3VsdC52YWx1ZTtcbiAgICAgICAgICAgICAgICBnZW5lcmF0aW9uc1tpXSA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVMTE1OZXdUb2tlbihyZXN1bHRbMF0udGV4dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBydW5NYW5hZ2VyPy5oYW5kbGVMTE1FbmQoe1xuICAgICAgICAgICAgICAgICAgICBnZW5lcmF0aW9uczogW3Jlc3VsdF0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBzdGF0dXMgPT09IFwicmVqZWN0ZWRcIlxuICAgICAgICAgICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUxMTUVycm9yKHByb21pc2VSZXN1bHQucmVhc29uKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocHJvbWlzZVJlc3VsdC5yZWFzb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IHtcbiAgICAgICAgICAgIGdlbmVyYXRpb25zLFxuICAgICAgICAgICAgbWlzc2luZ1Byb21wdEluZGljZXMsXG4gICAgICAgIH07XG4gICAgICAgIC8vIFRoaXMgZGVmaW5lcyBSVU5fS0VZIGFzIGEgbm9uLWVudW1lcmFibGUgcHJvcGVydHkgb24gdGhlIG91dHB1dCBvYmplY3RcbiAgICAgICAgLy8gc28gdGhhdCBpdCBpcyBub3Qgc2VyaWFsaXplZCB3aGVuIHRoZSBvdXRwdXQgaXMgc3RyaW5naWZpZWQsIGFuZCBzbyB0aGF0XG4gICAgICAgIC8vIGl0IGlzbnQgaW5jbHVkZWQgd2hlbiBsaXN0aW5nIHRoZSBrZXlzIG9mIHRoZSBvdXRwdXQgb2JqZWN0LlxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob3V0cHV0LCBSVU5fS0VZLCB7XG4gICAgICAgICAgICB2YWx1ZTogcnVuTWFuYWdlcnNcbiAgICAgICAgICAgICAgICA/IHsgcnVuSWRzOiBydW5NYW5hZ2Vycz8ubWFwKChtYW5hZ2VyKSA9PiBtYW5hZ2VyLnJ1bklkKSB9XG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZXMgY2hhdCBiYXNlZCBvbiB0aGUgaW5wdXQgbWVzc2FnZXMuXG4gICAgICogQHBhcmFtIG1lc3NhZ2VzIEFuIGFycmF5IG9mIGFycmF5cyBvZiBCYXNlTWVzc2FnZSBpbnN0YW5jZXMuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgVGhlIGNhbGwgb3B0aW9ucyBvciBhbiBhcnJheSBvZiBzdG9wIHNlcXVlbmNlcy5cbiAgICAgKiBAcGFyYW0gY2FsbGJhY2tzIFRoZSBjYWxsYmFja3MgZm9yIHRoZSBsYW5ndWFnZSBtb2RlbC5cbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhbiBMTE1SZXN1bHQuXG4gICAgICovXG4gICAgYXN5bmMgZ2VuZXJhdGUobWVzc2FnZXMsIG9wdGlvbnMsIGNhbGxiYWNrcykge1xuICAgICAgICAvLyBwYXJzZSBjYWxsIG9wdGlvbnNcbiAgICAgICAgbGV0IHBhcnNlZE9wdGlvbnM7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnMpKSB7XG4gICAgICAgICAgICBwYXJzZWRPcHRpb25zID0geyBzdG9wOiBvcHRpb25zIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwYXJzZWRPcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBiYXNlTWVzc2FnZXMgPSBtZXNzYWdlcy5tYXAoKG1lc3NhZ2VMaXN0KSA9PiBtZXNzYWdlTGlzdC5tYXAoY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UpKTtcbiAgICAgICAgY29uc3QgW3J1bm5hYmxlQ29uZmlnLCBjYWxsT3B0aW9uc10gPSB0aGlzLl9zZXBhcmF0ZVJ1bm5hYmxlQ29uZmlnRnJvbUNhbGxPcHRpb25zKHBhcnNlZE9wdGlvbnMpO1xuICAgICAgICBydW5uYWJsZUNvbmZpZy5jYWxsYmFja3MgPSBydW5uYWJsZUNvbmZpZy5jYWxsYmFja3MgPz8gY2FsbGJhY2tzO1xuICAgICAgICBpZiAoIXRoaXMuY2FjaGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZW5lcmF0ZVVuY2FjaGVkKGJhc2VNZXNzYWdlcywgY2FsbE9wdGlvbnMsIHJ1bm5hYmxlQ29uZmlnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IGNhY2hlIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCBsbG1TdHJpbmdLZXkgPSB0aGlzLl9nZXRTZXJpYWxpemVkQ2FjaGVLZXlQYXJhbWV0ZXJzRm9yQ2FsbChjYWxsT3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHsgZ2VuZXJhdGlvbnMsIG1pc3NpbmdQcm9tcHRJbmRpY2VzIH0gPSBhd2FpdCB0aGlzLl9nZW5lcmF0ZUNhY2hlZCh7XG4gICAgICAgICAgICBtZXNzYWdlczogYmFzZU1lc3NhZ2VzLFxuICAgICAgICAgICAgY2FjaGUsXG4gICAgICAgICAgICBsbG1TdHJpbmdLZXksXG4gICAgICAgICAgICBwYXJzZWRPcHRpb25zOiBjYWxsT3B0aW9ucyxcbiAgICAgICAgICAgIGhhbmRsZWRPcHRpb25zOiBydW5uYWJsZUNvbmZpZyxcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBsbG1PdXRwdXQgPSB7fTtcbiAgICAgICAgaWYgKG1pc3NpbmdQcm9tcHRJbmRpY2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCB0aGlzLl9nZW5lcmF0ZVVuY2FjaGVkKG1pc3NpbmdQcm9tcHRJbmRpY2VzLm1hcCgoaSkgPT4gYmFzZU1lc3NhZ2VzW2ldKSwgY2FsbE9wdGlvbnMsIHJ1bm5hYmxlQ29uZmlnKTtcbiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHJlc3VsdHMuZ2VuZXJhdGlvbnMubWFwKGFzeW5jIChnZW5lcmF0aW9uLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHByb21wdEluZGV4ID0gbWlzc2luZ1Byb21wdEluZGljZXNbaW5kZXhdO1xuICAgICAgICAgICAgICAgIGdlbmVyYXRpb25zW3Byb21wdEluZGV4XSA9IGdlbmVyYXRpb247XG4gICAgICAgICAgICAgICAgLy8gSm9pbiBhbGwgY29udGVudCBpbnRvIG9uZSBzdHJpbmcgZm9yIHRoZSBwcm9tcHQgaW5kZXhcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9tcHQgPSBCYXNlQ2hhdE1vZGVsLl9jb252ZXJ0SW5wdXRUb1Byb21wdFZhbHVlKGJhc2VNZXNzYWdlc1twcm9tcHRJbmRleF0pLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlLnVwZGF0ZShwcm9tcHQsIGxsbVN0cmluZ0tleSwgZ2VuZXJhdGlvbik7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBsbG1PdXRwdXQgPSByZXN1bHRzLmxsbU91dHB1dCA/PyB7fTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBnZW5lcmF0aW9ucywgbGxtT3V0cHV0IH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcGFyYW1ldGVycyB1c2VkIHRvIGludm9rZSB0aGUgbW9kZWxcbiAgICAgKi9cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGludm9jYXRpb25QYXJhbXMoX29wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgICBfbW9kZWxUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJiYXNlX2NoYXRfbW9kZWxcIjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWRcbiAgICAgKiBSZXR1cm4gYSBqc29uLWxpa2Ugb2JqZWN0IHJlcHJlc2VudGluZyB0aGlzIExMTS5cbiAgICAgKi9cbiAgICBzZXJpYWxpemUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi50aGlzLmludm9jYXRpb25QYXJhbXMoKSxcbiAgICAgICAgICAgIF90eXBlOiB0aGlzLl9sbG1UeXBlKCksXG4gICAgICAgICAgICBfbW9kZWw6IHRoaXMuX21vZGVsVHlwZSgpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZXMgYSBwcm9tcHQgYmFzZWQgb24gdGhlIGlucHV0IHByb21wdCB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHByb21wdFZhbHVlcyBBbiBhcnJheSBvZiBCYXNlUHJvbXB0VmFsdWUgaW5zdGFuY2VzLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIFRoZSBjYWxsIG9wdGlvbnMgb3IgYW4gYXJyYXkgb2Ygc3RvcCBzZXF1ZW5jZXMuXG4gICAgICogQHBhcmFtIGNhbGxiYWNrcyBUaGUgY2FsbGJhY2tzIGZvciB0aGUgbGFuZ3VhZ2UgbW9kZWwuXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYW4gTExNUmVzdWx0LlxuICAgICAqL1xuICAgIGFzeW5jIGdlbmVyYXRlUHJvbXB0KHByb21wdFZhbHVlcywgb3B0aW9ucywgY2FsbGJhY2tzKSB7XG4gICAgICAgIGNvbnN0IHByb21wdE1lc3NhZ2VzID0gcHJvbXB0VmFsdWVzLm1hcCgocHJvbXB0VmFsdWUpID0+IHByb21wdFZhbHVlLnRvQ2hhdE1lc3NhZ2VzKCkpO1xuICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZShwcm9tcHRNZXNzYWdlcywgb3B0aW9ucywgY2FsbGJhY2tzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIC5pbnZva2UoKSBpbnN0ZWFkLiBXaWxsIGJlIHJlbW92ZWQgaW4gMC4yLjAuXG4gICAgICpcbiAgICAgKiBNYWtlcyBhIHNpbmdsZSBjYWxsIHRvIHRoZSBjaGF0IG1vZGVsLlxuICAgICAqIEBwYXJhbSBtZXNzYWdlcyBBbiBhcnJheSBvZiBCYXNlTWVzc2FnZSBpbnN0YW5jZXMuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgVGhlIGNhbGwgb3B0aW9ucyBvciBhbiBhcnJheSBvZiBzdG9wIHNlcXVlbmNlcy5cbiAgICAgKiBAcGFyYW0gY2FsbGJhY2tzIFRoZSBjYWxsYmFja3MgZm9yIHRoZSBsYW5ndWFnZSBtb2RlbC5cbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIEJhc2VNZXNzYWdlLlxuICAgICAqL1xuICAgIGFzeW5jIGNhbGwobWVzc2FnZXMsIG9wdGlvbnMsIGNhbGxiYWNrcykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmdlbmVyYXRlKFttZXNzYWdlcy5tYXAoY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UpXSwgb3B0aW9ucywgY2FsbGJhY2tzKTtcbiAgICAgICAgY29uc3QgZ2VuZXJhdGlvbnMgPSByZXN1bHQuZ2VuZXJhdGlvbnM7XG4gICAgICAgIHJldHVybiBnZW5lcmF0aW9uc1swXVswXS5tZXNzYWdlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgLmludm9rZSgpIGluc3RlYWQuIFdpbGwgYmUgcmVtb3ZlZCBpbiAwLjIuMC5cbiAgICAgKlxuICAgICAqIE1ha2VzIGEgc2luZ2xlIGNhbGwgdG8gdGhlIGNoYXQgbW9kZWwgd2l0aCBhIHByb21wdCB2YWx1ZS5cbiAgICAgKiBAcGFyYW0gcHJvbXB0VmFsdWUgVGhlIHZhbHVlIG9mIHRoZSBwcm9tcHQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgVGhlIGNhbGwgb3B0aW9ucyBvciBhbiBhcnJheSBvZiBzdG9wIHNlcXVlbmNlcy5cbiAgICAgKiBAcGFyYW0gY2FsbGJhY2tzIFRoZSBjYWxsYmFja3MgZm9yIHRoZSBsYW5ndWFnZSBtb2RlbC5cbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIEJhc2VNZXNzYWdlLlxuICAgICAqL1xuICAgIGFzeW5jIGNhbGxQcm9tcHQocHJvbXB0VmFsdWUsIG9wdGlvbnMsIGNhbGxiYWNrcykge1xuICAgICAgICBjb25zdCBwcm9tcHRNZXNzYWdlcyA9IHByb21wdFZhbHVlLnRvQ2hhdE1lc3NhZ2VzKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGwocHJvbXB0TWVzc2FnZXMsIG9wdGlvbnMsIGNhbGxiYWNrcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSAuaW52b2tlKCkgaW5zdGVhZC4gV2lsbCBiZSByZW1vdmVkIGluIDAuMi4wLlxuICAgICAqXG4gICAgICogUHJlZGljdHMgdGhlIG5leHQgbWVzc2FnZSBiYXNlZCBvbiB0aGUgaW5wdXQgbWVzc2FnZXMuXG4gICAgICogQHBhcmFtIG1lc3NhZ2VzIEFuIGFycmF5IG9mIEJhc2VNZXNzYWdlIGluc3RhbmNlcy5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgY2FsbCBvcHRpb25zIG9yIGFuIGFycmF5IG9mIHN0b3Agc2VxdWVuY2VzLlxuICAgICAqIEBwYXJhbSBjYWxsYmFja3MgVGhlIGNhbGxiYWNrcyBmb3IgdGhlIGxhbmd1YWdlIG1vZGVsLlxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgQmFzZU1lc3NhZ2UuXG4gICAgICovXG4gICAgYXN5bmMgcHJlZGljdE1lc3NhZ2VzKG1lc3NhZ2VzLCBvcHRpb25zLCBjYWxsYmFja3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbChtZXNzYWdlcywgb3B0aW9ucywgY2FsbGJhY2tzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIC5pbnZva2UoKSBpbnN0ZWFkLiBXaWxsIGJlIHJlbW92ZWQgaW4gMC4yLjAuXG4gICAgICpcbiAgICAgKiBQcmVkaWN0cyB0aGUgbmV4dCBtZXNzYWdlIGJhc2VkIG9uIGEgdGV4dCBpbnB1dC5cbiAgICAgKiBAcGFyYW0gdGV4dCBUaGUgdGV4dCBpbnB1dC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBUaGUgY2FsbCBvcHRpb25zIG9yIGFuIGFycmF5IG9mIHN0b3Agc2VxdWVuY2VzLlxuICAgICAqIEBwYXJhbSBjYWxsYmFja3MgVGhlIGNhbGxiYWNrcyBmb3IgdGhlIGxhbmd1YWdlIG1vZGVsLlxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGEgc3RyaW5nLlxuICAgICAqL1xuICAgIGFzeW5jIHByZWRpY3QodGV4dCwgb3B0aW9ucywgY2FsbGJhY2tzKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBuZXcgSHVtYW5NZXNzYWdlKHRleHQpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmNhbGwoW21lc3NhZ2VdLCBvcHRpb25zLCBjYWxsYmFja3MpO1xuICAgICAgICBpZiAodHlwZW9mIHJlc3VsdC5jb250ZW50ICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgdXNlIHByZWRpY3Qgd2hlbiBvdXRwdXQgaXMgbm90IGEgc3RyaW5nLlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0LmNvbnRlbnQ7XG4gICAgfVxufVxuLyoqXG4gKiBBbiBhYnN0cmFjdCBjbGFzcyB0aGF0IGV4dGVuZHMgQmFzZUNoYXRNb2RlbCBhbmQgcHJvdmlkZXMgYSBzaW1wbGVcbiAqIGltcGxlbWVudGF0aW9uIG9mIF9nZW5lcmF0ZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFNpbXBsZUNoYXRNb2RlbCBleHRlbmRzIEJhc2VDaGF0TW9kZWwge1xuICAgIGFzeW5jIF9nZW5lcmF0ZShtZXNzYWdlcywgb3B0aW9ucywgcnVuTWFuYWdlcikge1xuICAgICAgICBjb25zdCB0ZXh0ID0gYXdhaXQgdGhpcy5fY2FsbChtZXNzYWdlcywgb3B0aW9ucywgcnVuTWFuYWdlcik7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBuZXcgQUlNZXNzYWdlKHRleHQpO1xuICAgICAgICBpZiAodHlwZW9mIG1lc3NhZ2UuY29udGVudCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGdlbmVyYXRlIHdpdGggYSBzaW1wbGUgY2hhdCBtb2RlbCB3aGVuIG91dHB1dCBpcyBub3QgYSBzdHJpbmcuXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBnZW5lcmF0aW9uczogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogbWVzc2FnZS5jb250ZW50LFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9O1xuICAgIH1cbn1cbmZ1bmN0aW9uIF9jb21iaW5lR2VuZXJhdGlvbkluZm9BbmRNZXRhZGF0YShnZW5lcmF0aW9uKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLi4uZ2VuZXJhdGlvbi5nZW5lcmF0aW9uSW5mbyxcbiAgICAgICAgLi4uZ2VuZXJhdGlvbi5tZXNzYWdlLnJlc3BvbnNlX21ldGFkYXRhLFxuICAgIH07XG59XG4iXSwibmFtZXMiOlsiQUlNZXNzYWdlIiwiSHVtYW5NZXNzYWdlIiwiY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UiLCJSVU5fS0VZIiwiQmFzZUxhbmd1YWdlTW9kZWwiLCJDYWxsYmFja01hbmFnZXIiLCJjcmVhdGVDaGF0TWVzc2FnZUNodW5rRW5jb2RlclN0cmVhbSIsInRleHRFbmNvZGVyIiwiVGV4dEVuY29kZXIiLCJUcmFuc2Zvcm1TdHJlYW0iLCJ0cmFuc2Zvcm0iLCJjaHVuayIsImNvbnRyb2xsZXIiLCJlbnF1ZXVlIiwiZW5jb2RlIiwiY29udGVudCIsIkpTT04iLCJzdHJpbmdpZnkiLCJCYXNlQ2hhdE1vZGVsIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiX2xsbVR5cGUiLCJfc2VwYXJhdGVSdW5uYWJsZUNvbmZpZ0Zyb21DYWxsT3B0aW9ucyIsIm9wdGlvbnMiLCJydW5uYWJsZUNvbmZpZyIsImNhbGxPcHRpb25zIiwidGltZW91dCIsInNpZ25hbCIsIkFib3J0U2lnbmFsIiwiaW52b2tlIiwiaW5wdXQiLCJwcm9tcHRWYWx1ZSIsIl9jb252ZXJ0SW5wdXRUb1Byb21wdFZhbHVlIiwicmVzdWx0IiwiZ2VuZXJhdGVQcm9tcHQiLCJjYWxsYmFja3MiLCJjaGF0R2VuZXJhdGlvbiIsImdlbmVyYXRpb25zIiwibWVzc2FnZSIsIl9zdHJlYW1SZXNwb25zZUNodW5rcyIsIl9tZXNzYWdlcyIsIl9vcHRpb25zIiwiX3J1bk1hbmFnZXIiLCJFcnJvciIsIl9zdHJlYW1JdGVyYXRvciIsInByb3RvdHlwZSIsInByb21wdCIsIm1lc3NhZ2VzIiwidG9DaGF0TWVzc2FnZXMiLCJjYWxsYmFja01hbmFnZXJfIiwiY29uZmlndXJlIiwidGFncyIsIm1ldGFkYXRhIiwidmVyYm9zZSIsImV4dHJhIiwiaW52b2NhdGlvbl9wYXJhbXMiLCJpbnZvY2F0aW9uUGFyYW1zIiwiYmF0Y2hfc2l6ZSIsInJ1bk1hbmFnZXJzIiwiaGFuZGxlQ2hhdE1vZGVsU3RhcnQiLCJ0b0pTT04iLCJ1bmRlZmluZWQiLCJydW5OYW1lIiwiZ2VuZXJhdGlvbkNodW5rIiwicmVzcG9uc2VfbWV0YWRhdGEiLCJfY29tYmluZUdlbmVyYXRpb25JbmZvQW5kTWV0YWRhdGEiLCJjb25jYXQiLCJlcnIiLCJQcm9taXNlIiwiYWxsIiwibWFwIiwicnVuTWFuYWdlciIsImhhbmRsZUxMTUVycm9yIiwiaGFuZGxlTExNRW5kIiwiX2dlbmVyYXRlVW5jYWNoZWQiLCJwYXJzZWRPcHRpb25zIiwiaGFuZGxlZE9wdGlvbnMiLCJiYXNlTWVzc2FnZXMiLCJtZXNzYWdlTGlzdCIsInJlc3VsdHMiLCJhbGxTZXR0bGVkIiwiaSIsIl9nZW5lcmF0ZSIsInByb21wdEluZGV4IiwibGxtT3V0cHV0cyIsInBSZXN1bHQiLCJzdGF0dXMiLCJnZW5lcmF0aW9uIiwibGxtT3V0cHV0IiwicmVhc29uIiwicmVqZWN0Iiwib3V0cHV0IiwibGVuZ3RoIiwiX2NvbWJpbmVMTE1PdXRwdXQiLCJydW5JZHMiLCJtYW5hZ2VyIiwicnVuSWQiLCJfZ2VuZXJhdGVDYWNoZWQiLCJjYWNoZSIsImxsbVN0cmluZ0tleSIsImNhY2hlZCIsIm1pc3NpbmdQcm9tcHRJbmRpY2VzIiwiYmFzZU1lc3NhZ2UiLCJpbmRleCIsInRvU3RyaW5nIiwibG9va3VwIiwicHVzaCIsImNhY2hlZFJlc3VsdHMiLCJmaWx0ZXIiLCJwcm9taXNlUmVzdWx0IiwiaGFuZGxlTExNTmV3VG9rZW4iLCJ0ZXh0IiwiZ2VuZXJhdGUiLCJBcnJheSIsImlzQXJyYXkiLCJzdG9wIiwiX2dldFNlcmlhbGl6ZWRDYWNoZUtleVBhcmFtZXRlcnNGb3JDYWxsIiwidXBkYXRlIiwiX21vZGVsVHlwZSIsInNlcmlhbGl6ZSIsIl90eXBlIiwiX21vZGVsIiwicHJvbXB0VmFsdWVzIiwicHJvbXB0TWVzc2FnZXMiLCJjYWxsIiwiY2FsbFByb21wdCIsInByZWRpY3RNZXNzYWdlcyIsInByZWRpY3QiLCJTaW1wbGVDaGF0TW9kZWwiLCJfY2FsbCIsImdlbmVyYXRpb25JbmZvIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/language_models/chat_models.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/language_models/llms.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/language_models/llms.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseLLM: () => (/* binding */ BaseLLM),\n/* harmony export */   LLM: () => (/* binding */ LLM)\n/* harmony export */ });\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../messages/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/index.js\");\n/* harmony import */ var _outputs_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../outputs.js */ \"(rsc)/./node_modules/@langchain/core/dist/outputs.js\");\n/* harmony import */ var _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../callbacks/manager.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/manager.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/language_models/base.js\");\n\n\n\n\n/**\n * LLM Wrapper. Takes in a prompt (or prompts) and returns a string.\n */ class BaseLLM extends _base_js__WEBPACK_IMPORTED_MODULE_3__.BaseLanguageModel {\n    constructor({ concurrency, ...rest }){\n        super(concurrency ? {\n            maxConcurrency: concurrency,\n            ...rest\n        } : rest);\n        // Only ever instantiated in main LangChain\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain\",\n                \"llms\",\n                this._llmType()\n            ]\n        });\n    }\n    /**\n     * This method takes an input and options, and returns a string. It\n     * converts the input to a prompt value and generates a result based on\n     * the prompt.\n     * @param input Input for the LLM.\n     * @param options Options for the LLM call.\n     * @returns A string result based on the prompt.\n     */ async invoke(input, options) {\n        const promptValue = BaseLLM._convertInputToPromptValue(input);\n        const result = await this.generatePrompt([\n            promptValue\n        ], options, options?.callbacks);\n        return result.generations[0][0].text;\n    }\n    // eslint-disable-next-line require-yield\n    async *_streamResponseChunks(_input, _options, _runManager) {\n        throw new Error(\"Not implemented.\");\n    }\n    _separateRunnableConfigFromCallOptions(options) {\n        const [runnableConfig, callOptions] = super._separateRunnableConfigFromCallOptions(options);\n        if (callOptions?.timeout && !callOptions.signal) {\n            callOptions.signal = AbortSignal.timeout(callOptions.timeout);\n        }\n        return [\n            runnableConfig,\n            callOptions\n        ];\n    }\n    async *_streamIterator(input, options) {\n        // Subclass check required to avoid double callbacks with default implementation\n        if (this._streamResponseChunks === BaseLLM.prototype._streamResponseChunks) {\n            yield this.invoke(input, options);\n        } else {\n            const prompt = BaseLLM._convertInputToPromptValue(input);\n            const [runnableConfig, callOptions] = this._separateRunnableConfigFromCallOptions(options);\n            const callbackManager_ = await _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_2__.CallbackManager.configure(runnableConfig.callbacks, this.callbacks, runnableConfig.tags, this.tags, runnableConfig.metadata, this.metadata, {\n                verbose: this.verbose\n            });\n            const extra = {\n                options: callOptions,\n                invocation_params: this?.invocationParams(callOptions),\n                batch_size: 1\n            };\n            const runManagers = await callbackManager_?.handleLLMStart(this.toJSON(), [\n                prompt.toString()\n            ], undefined, undefined, extra, undefined, undefined, runnableConfig.runName);\n            let generation = new _outputs_js__WEBPACK_IMPORTED_MODULE_1__.GenerationChunk({\n                text: \"\"\n            });\n            try {\n                for await (const chunk of this._streamResponseChunks(input.toString(), callOptions, runManagers?.[0])){\n                    if (!generation) {\n                        generation = chunk;\n                    } else {\n                        generation = generation.concat(chunk);\n                    }\n                    if (typeof chunk.text === \"string\") {\n                        yield chunk.text;\n                    }\n                }\n            } catch (err) {\n                await Promise.all((runManagers ?? []).map((runManager)=>runManager?.handleLLMError(err)));\n                throw err;\n            }\n            await Promise.all((runManagers ?? []).map((runManager)=>runManager?.handleLLMEnd({\n                    generations: [\n                        [\n                            generation\n                        ]\n                    ]\n                })));\n        }\n    }\n    /**\n     * This method takes prompt values, options, and callbacks, and generates\n     * a result based on the prompts.\n     * @param promptValues Prompt values for the LLM.\n     * @param options Options for the LLM call.\n     * @param callbacks Callbacks for the LLM call.\n     * @returns An LLMResult based on the prompts.\n     */ async generatePrompt(promptValues, options, callbacks) {\n        const prompts = promptValues.map((promptValue)=>promptValue.toString());\n        return this.generate(prompts, options, callbacks);\n    }\n    /**\n     * Get the parameters used to invoke the model\n     */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    invocationParams(_options) {\n        return {};\n    }\n    _flattenLLMResult(llmResult) {\n        const llmResults = [];\n        for(let i = 0; i < llmResult.generations.length; i += 1){\n            const genList = llmResult.generations[i];\n            if (i === 0) {\n                llmResults.push({\n                    generations: [\n                        genList\n                    ],\n                    llmOutput: llmResult.llmOutput\n                });\n            } else {\n                const llmOutput = llmResult.llmOutput ? {\n                    ...llmResult.llmOutput,\n                    tokenUsage: {}\n                } : undefined;\n                llmResults.push({\n                    generations: [\n                        genList\n                    ],\n                    llmOutput\n                });\n            }\n        }\n        return llmResults;\n    }\n    /** @ignore */ async _generateUncached(prompts, parsedOptions, handledOptions) {\n        const callbackManager_ = await _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_2__.CallbackManager.configure(handledOptions.callbacks, this.callbacks, handledOptions.tags, this.tags, handledOptions.metadata, this.metadata, {\n            verbose: this.verbose\n        });\n        const extra = {\n            options: parsedOptions,\n            invocation_params: this?.invocationParams(parsedOptions),\n            batch_size: prompts.length\n        };\n        const runManagers = await callbackManager_?.handleLLMStart(this.toJSON(), prompts, undefined, undefined, extra, undefined, undefined, handledOptions?.runName);\n        let output;\n        try {\n            output = await this._generate(prompts, parsedOptions, runManagers?.[0]);\n        } catch (err) {\n            await Promise.all((runManagers ?? []).map((runManager)=>runManager?.handleLLMError(err)));\n            throw err;\n        }\n        const flattenedOutputs = this._flattenLLMResult(output);\n        await Promise.all((runManagers ?? []).map((runManager, i)=>runManager?.handleLLMEnd(flattenedOutputs[i])));\n        const runIds = runManagers?.map((manager)=>manager.runId) || undefined;\n        // This defines RUN_KEY as a non-enumerable property on the output object\n        // so that it is not serialized when the output is stringified, and so that\n        // it isnt included when listing the keys of the output object.\n        Object.defineProperty(output, _outputs_js__WEBPACK_IMPORTED_MODULE_1__.RUN_KEY, {\n            value: runIds ? {\n                runIds\n            } : undefined,\n            configurable: true\n        });\n        return output;\n    }\n    async _generateCached({ prompts, cache, llmStringKey, parsedOptions, handledOptions }) {\n        const callbackManager_ = await _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_2__.CallbackManager.configure(handledOptions.callbacks, this.callbacks, handledOptions.tags, this.tags, handledOptions.metadata, this.metadata, {\n            verbose: this.verbose\n        });\n        const extra = {\n            options: parsedOptions,\n            invocation_params: this?.invocationParams(parsedOptions),\n            batch_size: prompts.length,\n            cached: true\n        };\n        const runManagers = await callbackManager_?.handleLLMStart(this.toJSON(), prompts, undefined, undefined, extra, undefined, undefined, handledOptions?.runName);\n        // generate results\n        const missingPromptIndices = [];\n        const results = await Promise.allSettled(prompts.map(async (prompt, index)=>{\n            const result = await cache.lookup(prompt, llmStringKey);\n            if (result == null) {\n                missingPromptIndices.push(index);\n            }\n            return result;\n        }));\n        // Map run managers to the results before filtering out null results\n        // Null results are just absent from the cache.\n        const cachedResults = results.map((result, index)=>({\n                result,\n                runManager: runManagers?.[index]\n            })).filter(({ result })=>result.status === \"fulfilled\" && result.value != null || result.status === \"rejected\");\n        // Handle results and call run managers\n        const generations = [];\n        await Promise.all(cachedResults.map(async ({ result: promiseResult, runManager }, i)=>{\n            if (promiseResult.status === \"fulfilled\") {\n                const result = promiseResult.value;\n                generations[i] = result;\n                if (result.length) {\n                    await runManager?.handleLLMNewToken(result[0].text);\n                }\n                return runManager?.handleLLMEnd({\n                    generations: [\n                        result\n                    ]\n                });\n            } else {\n                // status === \"rejected\"\n                await runManager?.handleLLMError(promiseResult.reason);\n                return Promise.reject(promiseResult.reason);\n            }\n        }));\n        const output = {\n            generations,\n            missingPromptIndices\n        };\n        // This defines RUN_KEY as a non-enumerable property on the output object\n        // so that it is not serialized when the output is stringified, and so that\n        // it isnt included when listing the keys of the output object.\n        Object.defineProperty(output, _outputs_js__WEBPACK_IMPORTED_MODULE_1__.RUN_KEY, {\n            value: runManagers ? {\n                runIds: runManagers?.map((manager)=>manager.runId)\n            } : undefined,\n            configurable: true\n        });\n        return output;\n    }\n    /**\n     * Run the LLM on the given prompts and input, handling caching.\n     */ async generate(prompts, options, callbacks) {\n        if (!Array.isArray(prompts)) {\n            throw new Error(\"Argument 'prompts' is expected to be a string[]\");\n        }\n        let parsedOptions;\n        if (Array.isArray(options)) {\n            parsedOptions = {\n                stop: options\n            };\n        } else {\n            parsedOptions = options;\n        }\n        const [runnableConfig, callOptions] = this._separateRunnableConfigFromCallOptions(parsedOptions);\n        runnableConfig.callbacks = runnableConfig.callbacks ?? callbacks;\n        if (!this.cache) {\n            return this._generateUncached(prompts, callOptions, runnableConfig);\n        }\n        const { cache } = this;\n        const llmStringKey = this._getSerializedCacheKeyParametersForCall(callOptions);\n        const { generations, missingPromptIndices } = await this._generateCached({\n            prompts,\n            cache,\n            llmStringKey,\n            parsedOptions: callOptions,\n            handledOptions: runnableConfig\n        });\n        let llmOutput = {};\n        if (missingPromptIndices.length > 0) {\n            const results = await this._generateUncached(missingPromptIndices.map((i)=>prompts[i]), callOptions, runnableConfig);\n            await Promise.all(results.generations.map(async (generation, index)=>{\n                const promptIndex = missingPromptIndices[index];\n                generations[promptIndex] = generation;\n                return cache.update(prompts[promptIndex], llmStringKey, generation);\n            }));\n            llmOutput = results.llmOutput ?? {};\n        }\n        return {\n            generations,\n            llmOutput\n        };\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.2.0.\n     * Convenience wrapper for {@link generate} that takes in a single string prompt and returns a single string output.\n     */ async call(prompt, options, callbacks) {\n        const { generations } = await this.generate([\n            prompt\n        ], options, callbacks);\n        return generations[0][0].text;\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.2.0.\n     *\n     * This method is similar to `call`, but it's used for making predictions\n     * based on the input text.\n     * @param text Input text for the prediction.\n     * @param options Options for the LLM call.\n     * @param callbacks Callbacks for the LLM call.\n     * @returns A prediction based on the input text.\n     */ async predict(text, options, callbacks) {\n        return this.call(text, options, callbacks);\n    }\n    /**\n     * @deprecated Use .invoke() instead. Will be removed in 0.2.0.\n     *\n     * This method takes a list of messages, options, and callbacks, and\n     * returns a predicted message.\n     * @param messages A list of messages for the prediction.\n     * @param options Options for the LLM call.\n     * @param callbacks Callbacks for the LLM call.\n     * @returns A predicted message based on the list of messages.\n     */ async predictMessages(messages, options, callbacks) {\n        const text = (0,_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.getBufferString)(messages);\n        const prediction = await this.call(text, options, callbacks);\n        return new _messages_index_js__WEBPACK_IMPORTED_MODULE_0__.AIMessage(prediction);\n    }\n    /**\n     * Get the identifying parameters of the LLM.\n     */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    _identifyingParams() {\n        return {};\n    }\n    /**\n     * @deprecated\n     * Return a json-like object representing this LLM.\n     */ serialize() {\n        return {\n            ...this._identifyingParams(),\n            _type: this._llmType(),\n            _model: this._modelType()\n        };\n    }\n    _modelType() {\n        return \"base_llm\";\n    }\n}\n/**\n * LLM class that provides a simpler interface to subclass than {@link BaseLLM}.\n *\n * Requires only implementing a simpler {@link _call} method instead of {@link _generate}.\n *\n * @augments BaseLLM\n */ class LLM extends BaseLLM {\n    async _generate(prompts, options, runManager) {\n        const generations = await Promise.all(prompts.map((prompt, promptIndex)=>this._call(prompt, {\n                ...options,\n                promptIndex\n            }, runManager).then((text)=>[\n                    {\n                        text\n                    }\n                ])));\n        return {\n            generations\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbGFuZ3VhZ2VfbW9kZWxzL2xsbXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQW1FO0FBQ1Q7QUFDQztBQUNaO0FBQy9DOztDQUVDLEdBQ00sTUFBTU0sZ0JBQWdCRCx1REFBaUJBO0lBQzFDRSxZQUFZLEVBQUVDLFdBQVcsRUFBRSxHQUFHQyxNQUFNLENBQUU7UUFDbEMsS0FBSyxDQUFDRCxjQUFjO1lBQUVFLGdCQUFnQkY7WUFBYSxHQUFHQyxJQUFJO1FBQUMsSUFBSUE7UUFDL0QsMkNBQTJDO1FBQzNDRSxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztnQkFBQztnQkFBYTtnQkFBUSxJQUFJLENBQUNDLFFBQVE7YUFBRztRQUNqRDtJQUNKO0lBQ0E7Ozs7Ozs7S0FPQyxHQUNELE1BQU1DLE9BQU9DLEtBQUssRUFBRUMsT0FBTyxFQUFFO1FBQ3pCLE1BQU1DLGNBQWNmLFFBQVFnQiwwQkFBMEIsQ0FBQ0g7UUFDdkQsTUFBTUksU0FBUyxNQUFNLElBQUksQ0FBQ0MsY0FBYyxDQUFDO1lBQUNIO1NBQVksRUFBRUQsU0FBU0EsU0FBU0s7UUFDMUUsT0FBT0YsT0FBT0csV0FBVyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUNDLElBQUk7SUFDeEM7SUFDQSx5Q0FBeUM7SUFDekMsT0FBT0Msc0JBQXNCQyxNQUFNLEVBQUVDLFFBQVEsRUFBRUMsV0FBVyxFQUFFO1FBQ3hELE1BQU0sSUFBSUMsTUFBTTtJQUNwQjtJQUNBQyx1Q0FBdUNiLE9BQU8sRUFBRTtRQUM1QyxNQUFNLENBQUNjLGdCQUFnQkMsWUFBWSxHQUFHLEtBQUssQ0FBQ0YsdUNBQXVDYjtRQUNuRixJQUFJZSxhQUFhQyxXQUFXLENBQUNELFlBQVlFLE1BQU0sRUFBRTtZQUM3Q0YsWUFBWUUsTUFBTSxHQUFHQyxZQUFZRixPQUFPLENB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Q0FBQ2dIO1FBQzdCLE1BQU1DLGFBQWEsTUFBTSxJQUFJLENBQUNKLElBQUksQ0FBQ25GLE1BQU1QLFNBQVNLO1FBQ2xELE9BQU8sSUFBSXpCLHlEQUFTQSxDQUFDa0g7SUFDekI7SUFDQTs7S0FFQyxHQUNELDhEQUE4RDtJQUM5REMscUJBQXFCO1FBQ2pCLE9BQU8sQ0FBQztJQUNaO0lBQ0E7OztLQUdDLEdBQ0RDLFlBQVk7UUFDUixPQUFPO1lBQ0gsR0FBRyxJQUFJLENBQUNELGtCQUFrQixFQUFFO1lBQzVCRSxPQUFPLElBQUksQ0FBQ3BHLFFBQVE7WUFDcEJxRyxRQUFRLElBQUksQ0FBQ0MsVUFBVTtRQUMzQjtJQUNKO0lBQ0FBLGFBQWE7UUFDVCxPQUFPO0lBQ1g7QUFDSjtBQUNBOzs7Ozs7Q0FNQyxHQUNNLE1BQU1DLFlBQVlsSDtJQUNyQixNQUFNNkUsVUFBVWYsT0FBTyxFQUFFaEQsT0FBTyxFQUFFNEMsVUFBVSxFQUFFO1FBQzFDLE1BQU10QyxjQUFjLE1BQU1tQyxRQUFRQyxHQUFHLENBQUNNLFFBQVFMLEdBQUcsQ0FBQyxDQUFDdEIsUUFBUW1FLGNBQWdCLElBQUksQ0FBQ2EsS0FBSyxDQUFDaEYsUUFBUTtnQkFBRSxHQUFHckIsT0FBTztnQkFBRXdGO1lBQVksR0FBRzVDLFlBQVkwRCxJQUFJLENBQUMsQ0FBQy9GLE9BQVM7b0JBQUM7d0JBQUVBO29CQUFLO2lCQUFFO1FBQ2hLLE9BQU87WUFBRUQ7UUFBWTtJQUN6QjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2xhbmd1YWdlX21vZGVscy9sbG1zLmpzP2U0MzIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQUlNZXNzYWdlLCBnZXRCdWZmZXJTdHJpbmcsIH0gZnJvbSBcIi4uL21lc3NhZ2VzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBSVU5fS0VZLCBHZW5lcmF0aW9uQ2h1bmssIH0gZnJvbSBcIi4uL291dHB1dHMuanNcIjtcbmltcG9ydCB7IENhbGxiYWNrTWFuYWdlciwgfSBmcm9tIFwiLi4vY2FsbGJhY2tzL21hbmFnZXIuanNcIjtcbmltcG9ydCB7IEJhc2VMYW5ndWFnZU1vZGVsLCB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbi8qKlxuICogTExNIFdyYXBwZXIuIFRha2VzIGluIGEgcHJvbXB0IChvciBwcm9tcHRzKSBhbmQgcmV0dXJucyBhIHN0cmluZy5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VMTE0gZXh0ZW5kcyBCYXNlTGFuZ3VhZ2VNb2RlbCB7XG4gICAgY29uc3RydWN0b3IoeyBjb25jdXJyZW5jeSwgLi4ucmVzdCB9KSB7XG4gICAgICAgIHN1cGVyKGNvbmN1cnJlbmN5ID8geyBtYXhDb25jdXJyZW5jeTogY29uY3VycmVuY3ksIC4uLnJlc3QgfSA6IHJlc3QpO1xuICAgICAgICAvLyBPbmx5IGV2ZXIgaW5zdGFudGlhdGVkIGluIG1haW4gTGFuZ0NoYWluXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluXCIsIFwibGxtc1wiLCB0aGlzLl9sbG1UeXBlKCldXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIG1ldGhvZCB0YWtlcyBhbiBpbnB1dCBhbmQgb3B0aW9ucywgYW5kIHJldHVybnMgYSBzdHJpbmcuIEl0XG4gICAgICogY29udmVydHMgdGhlIGlucHV0IHRvIGEgcHJvbXB0IHZhbHVlIGFuZCBnZW5lcmF0ZXMgYSByZXN1bHQgYmFzZWQgb25cbiAgICAgKiB0aGUgcHJvbXB0LlxuICAgICAqIEBwYXJhbSBpbnB1dCBJbnB1dCBmb3IgdGhlIExMTS5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25zIGZvciB0aGUgTExNIGNhbGwuXG4gICAgICogQHJldHVybnMgQSBzdHJpbmcgcmVzdWx0IGJhc2VkIG9uIHRoZSBwcm9tcHQuXG4gICAgICovXG4gICAgYXN5bmMgaW52b2tlKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHByb21wdFZhbHVlID0gQmFzZUxMTS5fY29udmVydElucHV0VG9Qcm9tcHRWYWx1ZShpbnB1dCk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZ2VuZXJhdGVQcm9tcHQoW3Byb21wdFZhbHVlXSwgb3B0aW9ucywgb3B0aW9ucz8uY2FsbGJhY2tzKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5nZW5lcmF0aW9uc1swXVswXS50ZXh0O1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVxdWlyZS15aWVsZFxuICAgIGFzeW5jICpfc3RyZWFtUmVzcG9uc2VDaHVua3MoX2lucHV0LCBfb3B0aW9ucywgX3J1bk1hbmFnZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkLlwiKTtcbiAgICB9XG4gICAgX3NlcGFyYXRlUnVubmFibGVDb25maWdGcm9tQ2FsbE9wdGlvbnMob3B0aW9ucykge1xuICAgICAgICBjb25zdCBbcnVubmFibGVDb25maWcsIGNhbGxPcHRpb25zXSA9IHN1cGVyLl9zZXBhcmF0ZVJ1bm5hYmxlQ29uZmlnRnJvbUNhbGxPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICBpZiAoY2FsbE9wdGlvbnM/LnRpbWVvdXQgJiYgIWNhbGxPcHRpb25zLnNpZ25hbCkge1xuICAgICAgICAgICAgY2FsbE9wdGlvbnMuc2lnbmFsID0gQWJvcnRTaWduYWwudGltZW91dChjYWxsT3B0aW9ucy50aW1lb3V0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW3J1bm5hYmxlQ29uZmlnLCBjYWxsT3B0aW9uc107XG4gICAgfVxuICAgIGFzeW5jICpfc3RyZWFtSXRlcmF0b3IoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgLy8gU3ViY2xhc3MgY2hlY2sgcmVxdWlyZWQgdG8gYXZvaWQgZG91YmxlIGNhbGxiYWNrcyB3aXRoIGRlZmF1bHQgaW1wbGVtZW50YXRpb25cbiAgICAgICAgaWYgKHRoaXMuX3N0cmVhbVJlc3BvbnNlQ2h1bmtzID09PSBCYXNlTExNLnByb3RvdHlwZS5fc3RyZWFtUmVzcG9uc2VDaHVua3MpIHtcbiAgICAgICAgICAgIHlpZWxkIHRoaXMuaW52b2tlKGlucHV0LCBvcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHByb21wdCA9IEJhc2VMTE0uX2NvbnZlcnRJbnB1dFRvUHJvbXB0VmFsdWUoaW5wdXQpO1xuICAgICAgICAgICAgY29uc3QgW3J1bm5hYmxlQ29uZmlnLCBjYWxsT3B0aW9uc10gPSB0aGlzLl9zZXBhcmF0ZVJ1bm5hYmxlQ29uZmlnRnJvbUNhbGxPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICAgICAgY29uc3QgY2FsbGJhY2tNYW5hZ2VyXyA9IGF3YWl0IENhbGxiYWNrTWFuYWdlci5jb25maWd1cmUocnVubmFibGVDb25maWcuY2FsbGJhY2tzLCB0aGlzLmNhbGxiYWNrcywgcnVubmFibGVDb25maWcudGFncywgdGhpcy50YWdzLCBydW5uYWJsZUNvbmZpZy5tZXRhZGF0YSwgdGhpcy5tZXRhZGF0YSwgeyB2ZXJib3NlOiB0aGlzLnZlcmJvc2UgfSk7XG4gICAgICAgICAgICBjb25zdCBleHRyYSA9IHtcbiAgICAgICAgICAgICAgICBvcHRpb25zOiBjYWxsT3B0aW9ucyxcbiAgICAgICAgICAgICAgICBpbnZvY2F0aW9uX3BhcmFtczogdGhpcz8uaW52b2NhdGlvblBhcmFtcyhjYWxsT3B0aW9ucyksXG4gICAgICAgICAgICAgICAgYmF0Y2hfc2l6ZTogMSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBydW5NYW5hZ2VycyA9IGF3YWl0IGNhbGxiYWNrTWFuYWdlcl8/LmhhbmRsZUxMTVN0YXJ0KHRoaXMudG9KU09OKCksIFtwcm9tcHQudG9TdHJpbmcoKV0sIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBleHRyYSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHJ1bm5hYmxlQ29uZmlnLnJ1bk5hbWUpO1xuICAgICAgICAgICAgbGV0IGdlbmVyYXRpb24gPSBuZXcgR2VuZXJhdGlvbkNodW5rKHtcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIlwiLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgdGhpcy5fc3RyZWFtUmVzcG9uc2VDaHVua3MoaW5wdXQudG9TdHJpbmcoKSwgY2FsbE9wdGlvbnMsIHJ1bk1hbmFnZXJzPy5bMF0pKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZ2VuZXJhdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGlvbiA9IGNodW5rO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGlvbiA9IGdlbmVyYXRpb24uY29uY2F0KGNodW5rKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNodW5rLnRleHQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIGNodW5rLnRleHQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoKHJ1bk1hbmFnZXJzID8/IFtdKS5tYXAoKHJ1bk1hbmFnZXIpID0+IHJ1bk1hbmFnZXI/LmhhbmRsZUxMTUVycm9yKGVycikpKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCgocnVuTWFuYWdlcnMgPz8gW10pLm1hcCgocnVuTWFuYWdlcikgPT4gcnVuTWFuYWdlcj8uaGFuZGxlTExNRW5kKHtcbiAgICAgICAgICAgICAgICBnZW5lcmF0aW9uczogW1tnZW5lcmF0aW9uXV0sXG4gICAgICAgICAgICB9KSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIHRha2VzIHByb21wdCB2YWx1ZXMsIG9wdGlvbnMsIGFuZCBjYWxsYmFja3MsIGFuZCBnZW5lcmF0ZXNcbiAgICAgKiBhIHJlc3VsdCBiYXNlZCBvbiB0aGUgcHJvbXB0cy5cbiAgICAgKiBAcGFyYW0gcHJvbXB0VmFsdWVzIFByb21wdCB2YWx1ZXMgZm9yIHRoZSBMTE0uXG4gICAgICogQHBhcmFtIG9wdGlvbnMgT3B0aW9ucyBmb3IgdGhlIExMTSBjYWxsLlxuICAgICAqIEBwYXJhbSBjYWxsYmFja3MgQ2FsbGJhY2tzIGZvciB0aGUgTExNIGNhbGwuXG4gICAgICogQHJldHVybnMgQW4gTExNUmVzdWx0IGJhc2VkIG9uIHRoZSBwcm9tcHRzLlxuICAgICAqL1xuICAgIGFzeW5jIGdlbmVyYXRlUHJvbXB0KHByb21wdFZhbHVlcywgb3B0aW9ucywgY2FsbGJhY2tzKSB7XG4gICAgICAgIGNvbnN0IHByb21wdHMgPSBwcm9tcHRWYWx1ZXMubWFwKChwcm9tcHRWYWx1ZSkgPT4gcHJvbXB0VmFsdWUudG9TdHJpbmcoKSk7XG4gICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRlKHByb21wdHMsIG9wdGlvbnMsIGNhbGxiYWNrcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcGFyYW1ldGVycyB1c2VkIHRvIGludm9rZSB0aGUgbW9kZWxcbiAgICAgKi9cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGludm9jYXRpb25QYXJhbXMoX29wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgICBfZmxhdHRlbkxMTVJlc3VsdChsbG1SZXN1bHQpIHtcbiAgICAgICAgY29uc3QgbGxtUmVzdWx0cyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxsbVJlc3VsdC5nZW5lcmF0aW9ucy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgY29uc3QgZ2VuTGlzdCA9IGxsbVJlc3VsdC5nZW5lcmF0aW9uc1tpXTtcbiAgICAgICAgICAgIGlmIChpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgbGxtUmVzdWx0cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGlvbnM6IFtnZW5MaXN0XSxcbiAgICAgICAgICAgICAgICAgICAgbGxtT3V0cHV0OiBsbG1SZXN1bHQubGxtT3V0cHV0LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGxtT3V0cHV0ID0gbGxtUmVzdWx0LmxsbU91dHB1dFxuICAgICAgICAgICAgICAgICAgICA/IHsgLi4ubGxtUmVzdWx0LmxsbU91dHB1dCwgdG9rZW5Vc2FnZToge30gfVxuICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBsbG1SZXN1bHRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBnZW5lcmF0aW9uczogW2dlbkxpc3RdLFxuICAgICAgICAgICAgICAgICAgICBsbG1PdXRwdXQsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxsbVJlc3VsdHM7XG4gICAgfVxuICAgIC8qKiBAaWdub3JlICovXG4gICAgYXN5bmMgX2dlbmVyYXRlVW5jYWNoZWQocHJvbXB0cywgcGFyc2VkT3B0aW9ucywgaGFuZGxlZE9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tNYW5hZ2VyXyA9IGF3YWl0IENhbGxiYWNrTWFuYWdlci5jb25maWd1cmUoaGFuZGxlZE9wdGlvbnMuY2FsbGJhY2tzLCB0aGlzLmNhbGxiYWNrcywgaGFuZGxlZE9wdGlvbnMudGFncywgdGhpcy50YWdzLCBoYW5kbGVkT3B0aW9ucy5tZXRhZGF0YSwgdGhpcy5tZXRhZGF0YSwgeyB2ZXJib3NlOiB0aGlzLnZlcmJvc2UgfSk7XG4gICAgICAgIGNvbnN0IGV4dHJhID0ge1xuICAgICAgICAgICAgb3B0aW9uczogcGFyc2VkT3B0aW9ucyxcbiAgICAgICAgICAgIGludm9jYXRpb25fcGFyYW1zOiB0aGlzPy5pbnZvY2F0aW9uUGFyYW1zKHBhcnNlZE9wdGlvbnMpLFxuICAgICAgICAgICAgYmF0Y2hfc2l6ZTogcHJvbXB0cy5sZW5ndGgsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXJzID0gYXdhaXQgY2FsbGJhY2tNYW5hZ2VyXz8uaGFuZGxlTExNU3RhcnQodGhpcy50b0pTT04oKSwgcHJvbXB0cywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGV4dHJhLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgaGFuZGxlZE9wdGlvbnM/LnJ1bk5hbWUpO1xuICAgICAgICBsZXQgb3V0cHV0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgb3V0cHV0ID0gYXdhaXQgdGhpcy5fZ2VuZXJhdGUocHJvbXB0cywgcGFyc2VkT3B0aW9ucywgcnVuTWFuYWdlcnM/LlswXSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoKHJ1bk1hbmFnZXJzID8/IFtdKS5tYXAoKHJ1bk1hbmFnZXIpID0+IHJ1bk1hbmFnZXI/LmhhbmRsZUxMTUVycm9yKGVycikpKTtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmbGF0dGVuZWRPdXRwdXRzID0gdGhpcy5fZmxhdHRlbkxMTVJlc3VsdChvdXRwdXQpO1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCgocnVuTWFuYWdlcnMgPz8gW10pLm1hcCgocnVuTWFuYWdlciwgaSkgPT4gcnVuTWFuYWdlcj8uaGFuZGxlTExNRW5kKGZsYXR0ZW5lZE91dHB1dHNbaV0pKSk7XG4gICAgICAgIGNvbnN0IHJ1bklkcyA9IHJ1bk1hbmFnZXJzPy5tYXAoKG1hbmFnZXIpID0+IG1hbmFnZXIucnVuSWQpIHx8IHVuZGVmaW5lZDtcbiAgICAgICAgLy8gVGhpcyBkZWZpbmVzIFJVTl9LRVkgYXMgYSBub24tZW51bWVyYWJsZSBwcm9wZXJ0eSBvbiB0aGUgb3V0cHV0IG9iamVjdFxuICAgICAgICAvLyBzbyB0aGF0IGl0IGlzIG5vdCBzZXJpYWxpemVkIHdoZW4gdGhlIG91dHB1dCBpcyBzdHJpbmdpZmllZCwgYW5kIHNvIHRoYXRcbiAgICAgICAgLy8gaXQgaXNudCBpbmNsdWRlZCB3aGVuIGxpc3RpbmcgdGhlIGtleXMgb2YgdGhlIG91dHB1dCBvYmplY3QuXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvdXRwdXQsIFJVTl9LRVksIHtcbiAgICAgICAgICAgIHZhbHVlOiBydW5JZHMgPyB7IHJ1bklkcyB9IDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9XG4gICAgYXN5bmMgX2dlbmVyYXRlQ2FjaGVkKHsgcHJvbXB0cywgY2FjaGUsIGxsbVN0cmluZ0tleSwgcGFyc2VkT3B0aW9ucywgaGFuZGxlZE9wdGlvbnMsIH0pIHtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tNYW5hZ2VyXyA9IGF3YWl0IENhbGxiYWNrTWFuYWdlci5jb25maWd1cmUoaGFuZGxlZE9wdGlvbnMuY2FsbGJhY2tzLCB0aGlzLmNhbGxiYWNrcywgaGFuZGxlZE9wdGlvbnMudGFncywgdGhpcy50YWdzLCBoYW5kbGVkT3B0aW9ucy5tZXRhZGF0YSwgdGhpcy5tZXRhZGF0YSwgeyB2ZXJib3NlOiB0aGlzLnZlcmJvc2UgfSk7XG4gICAgICAgIGNvbnN0IGV4dHJhID0ge1xuICAgICAgICAgICAgb3B0aW9uczogcGFyc2VkT3B0aW9ucyxcbiAgICAgICAgICAgIGludm9jYXRpb25fcGFyYW1zOiB0aGlzPy5pbnZvY2F0aW9uUGFyYW1zKHBhcnNlZE9wdGlvbnMpLFxuICAgICAgICAgICAgYmF0Y2hfc2l6ZTogcHJvbXB0cy5sZW5ndGgsXG4gICAgICAgICAgICBjYWNoZWQ6IHRydWUsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXJzID0gYXdhaXQgY2FsbGJhY2tNYW5hZ2VyXz8uaGFuZGxlTExNU3RhcnQodGhpcy50b0pTT04oKSwgcHJvbXB0cywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGV4dHJhLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgaGFuZGxlZE9wdGlvbnM/LnJ1bk5hbWUpO1xuICAgICAgICAvLyBnZW5lcmF0ZSByZXN1bHRzXG4gICAgICAgIGNvbnN0IG1pc3NpbmdQcm9tcHRJbmRpY2VzID0gW107XG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQocHJvbXB0cy5tYXAoYXN5bmMgKHByb21wdCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNhY2hlLmxvb2t1cChwcm9tcHQsIGxsbVN0cmluZ0tleSk7XG4gICAgICAgICAgICBpZiAocmVzdWx0ID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBtaXNzaW5nUHJvbXB0SW5kaWNlcy5wdXNoKGluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0pKTtcbiAgICAgICAgLy8gTWFwIHJ1biBtYW5hZ2VycyB0byB0aGUgcmVzdWx0cyBiZWZvcmUgZmlsdGVyaW5nIG91dCBudWxsIHJlc3VsdHNcbiAgICAgICAgLy8gTnVsbCByZXN1bHRzIGFyZSBqdXN0IGFic2VudCBmcm9tIHRoZSBjYWNoZS5cbiAgICAgICAgY29uc3QgY2FjaGVkUmVzdWx0cyA9IHJlc3VsdHNcbiAgICAgICAgICAgIC5tYXAoKHJlc3VsdCwgaW5kZXgpID0+ICh7IHJlc3VsdCwgcnVuTWFuYWdlcjogcnVuTWFuYWdlcnM/LltpbmRleF0gfSkpXG4gICAgICAgICAgICAuZmlsdGVyKCh7IHJlc3VsdCB9KSA9PiAocmVzdWx0LnN0YXR1cyA9PT0gXCJmdWxmaWxsZWRcIiAmJiByZXN1bHQudmFsdWUgIT0gbnVsbCkgfHxcbiAgICAgICAgICAgIHJlc3VsdC5zdGF0dXMgPT09IFwicmVqZWN0ZWRcIik7XG4gICAgICAgIC8vIEhhbmRsZSByZXN1bHRzIGFuZCBjYWxsIHJ1biBtYW5hZ2Vyc1xuICAgICAgICBjb25zdCBnZW5lcmF0aW9ucyA9IFtdO1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChjYWNoZWRSZXN1bHRzLm1hcChhc3luYyAoeyByZXN1bHQ6IHByb21pc2VSZXN1bHQsIHJ1bk1hbmFnZXIgfSwgaSkgPT4ge1xuICAgICAgICAgICAgaWYgKHByb21pc2VSZXN1bHQuc3RhdHVzID09PSBcImZ1bGZpbGxlZFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gcHJvbWlzZVJlc3VsdC52YWx1ZTtcbiAgICAgICAgICAgICAgICBnZW5lcmF0aW9uc1tpXSA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVMTE1OZXdUb2tlbihyZXN1bHRbMF0udGV4dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBydW5NYW5hZ2VyPy5oYW5kbGVMTE1FbmQoe1xuICAgICAgICAgICAgICAgICAgICBnZW5lcmF0aW9uczogW3Jlc3VsdF0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBzdGF0dXMgPT09IFwicmVqZWN0ZWRcIlxuICAgICAgICAgICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUxMTUVycm9yKHByb21pc2VSZXN1bHQucmVhc29uKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocHJvbWlzZVJlc3VsdC5yZWFzb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IHtcbiAgICAgICAgICAgIGdlbmVyYXRpb25zLFxuICAgICAgICAgICAgbWlzc2luZ1Byb21wdEluZGljZXMsXG4gICAgICAgIH07XG4gICAgICAgIC8vIFRoaXMgZGVmaW5lcyBSVU5fS0VZIGFzIGEgbm9uLWVudW1lcmFibGUgcHJvcGVydHkgb24gdGhlIG91dHB1dCBvYmplY3RcbiAgICAgICAgLy8gc28gdGhhdCBpdCBpcyBub3Qgc2VyaWFsaXplZCB3aGVuIHRoZSBvdXRwdXQgaXMgc3RyaW5naWZpZWQsIGFuZCBzbyB0aGF0XG4gICAgICAgIC8vIGl0IGlzbnQgaW5jbHVkZWQgd2hlbiBsaXN0aW5nIHRoZSBrZXlzIG9mIHRoZSBvdXRwdXQgb2JqZWN0LlxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob3V0cHV0LCBSVU5fS0VZLCB7XG4gICAgICAgICAgICB2YWx1ZTogcnVuTWFuYWdlcnNcbiAgICAgICAgICAgICAgICA/IHsgcnVuSWRzOiBydW5NYW5hZ2Vycz8ubWFwKChtYW5hZ2VyKSA9PiBtYW5hZ2VyLnJ1bklkKSB9XG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSdW4gdGhlIExMTSBvbiB0aGUgZ2l2ZW4gcHJvbXB0cyBhbmQgaW5wdXQsIGhhbmRsaW5nIGNhY2hpbmcuXG4gICAgICovXG4gICAgYXN5bmMgZ2VuZXJhdGUocHJvbXB0cywgb3B0aW9ucywgY2FsbGJhY2tzKSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShwcm9tcHRzKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXJndW1lbnQgJ3Byb21wdHMnIGlzIGV4cGVjdGVkIHRvIGJlIGEgc3RyaW5nW11cIik7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHBhcnNlZE9wdGlvbnM7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnMpKSB7XG4gICAgICAgICAgICBwYXJzZWRPcHRpb25zID0geyBzdG9wOiBvcHRpb25zIH07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBwYXJzZWRPcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBbcnVubmFibGVDb25maWcsIGNhbGxPcHRpb25zXSA9IHRoaXMuX3NlcGFyYXRlUnVubmFibGVDb25maWdGcm9tQ2FsbE9wdGlvbnMocGFyc2VkT3B0aW9ucyk7XG4gICAgICAgIHJ1bm5hYmxlQ29uZmlnLmNhbGxiYWNrcyA9IHJ1bm5hYmxlQ29uZmlnLmNhbGxiYWNrcyA/PyBjYWxsYmFja3M7XG4gICAgICAgIGlmICghdGhpcy5jYWNoZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dlbmVyYXRlVW5jYWNoZWQocHJvbXB0cywgY2FsbE9wdGlvbnMsIHJ1bm5hYmxlQ29uZmlnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IGNhY2hlIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCBsbG1TdHJpbmdLZXkgPSB0aGlzLl9nZXRTZXJpYWxpemVkQ2FjaGVLZXlQYXJhbWV0ZXJzRm9yQ2FsbChjYWxsT3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHsgZ2VuZXJhdGlvbnMsIG1pc3NpbmdQcm9tcHRJbmRpY2VzIH0gPSBhd2FpdCB0aGlzLl9nZW5lcmF0ZUNhY2hlZCh7XG4gICAgICAgICAgICBwcm9tcHRzLFxuICAgICAgICAgICAgY2FjaGUsXG4gICAgICAgICAgICBsbG1TdHJpbmdLZXksXG4gICAgICAgICAgICBwYXJzZWRPcHRpb25zOiBjYWxsT3B0aW9ucyxcbiAgICAgICAgICAgIGhhbmRsZWRPcHRpb25zOiBydW5uYWJsZUNvbmZpZyxcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBsbG1PdXRwdXQgPSB7fTtcbiAgICAgICAgaWYgKG1pc3NpbmdQcm9tcHRJbmRpY2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCB0aGlzLl9nZW5lcmF0ZVVuY2FjaGVkKG1pc3NpbmdQcm9tcHRJbmRpY2VzLm1hcCgoaSkgPT4gcHJvbXB0c1tpXSksIGNhbGxPcHRpb25zLCBydW5uYWJsZUNvbmZpZyk7XG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChyZXN1bHRzLmdlbmVyYXRpb25zLm1hcChhc3luYyAoZ2VuZXJhdGlvbiwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9tcHRJbmRleCA9IG1pc3NpbmdQcm9tcHRJbmRpY2VzW2luZGV4XTtcbiAgICAgICAgICAgICAgICBnZW5lcmF0aW9uc1twcm9tcHRJbmRleF0gPSBnZW5lcmF0aW9uO1xuICAgICAgICAgICAgICAgIHJldHVybiBjYWNoZS51cGRhdGUocHJvbXB0c1twcm9tcHRJbmRleF0sIGxsbVN0cmluZ0tleSwgZ2VuZXJhdGlvbik7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBsbG1PdXRwdXQgPSByZXN1bHRzLmxsbU91dHB1dCA/PyB7fTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBnZW5lcmF0aW9ucywgbGxtT3V0cHV0IH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSAuaW52b2tlKCkgaW5zdGVhZC4gV2lsbCBiZSByZW1vdmVkIGluIDAuMi4wLlxuICAgICAqIENvbnZlbmllbmNlIHdyYXBwZXIgZm9yIHtAbGluayBnZW5lcmF0ZX0gdGhhdCB0YWtlcyBpbiBhIHNpbmdsZSBzdHJpbmcgcHJvbXB0IGFuZCByZXR1cm5zIGEgc2luZ2xlIHN0cmluZyBvdXRwdXQuXG4gICAgICovXG4gICAgYXN5bmMgY2FsbChwcm9tcHQsIG9wdGlvbnMsIGNhbGxiYWNrcykge1xuICAgICAgICBjb25zdCB7IGdlbmVyYXRpb25zIH0gPSBhd2FpdCB0aGlzLmdlbmVyYXRlKFtwcm9tcHRdLCBvcHRpb25zLCBjYWxsYmFja3MpO1xuICAgICAgICByZXR1cm4gZ2VuZXJhdGlvbnNbMF1bMF0udGV4dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIC5pbnZva2UoKSBpbnN0ZWFkLiBXaWxsIGJlIHJlbW92ZWQgaW4gMC4yLjAuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBzaW1pbGFyIHRvIGBjYWxsYCwgYnV0IGl0J3MgdXNlZCBmb3IgbWFraW5nIHByZWRpY3Rpb25zXG4gICAgICogYmFzZWQgb24gdGhlIGlucHV0IHRleHQuXG4gICAgICogQHBhcmFtIHRleHQgSW5wdXQgdGV4dCBmb3IgdGhlIHByZWRpY3Rpb24uXG4gICAgICogQHBhcmFtIG9wdGlvbnMgT3B0aW9ucyBmb3IgdGhlIExMTSBjYWxsLlxuICAgICAqIEBwYXJhbSBjYWxsYmFja3MgQ2FsbGJhY2tzIGZvciB0aGUgTExNIGNhbGwuXG4gICAgICogQHJldHVybnMgQSBwcmVkaWN0aW9uIGJhc2VkIG9uIHRoZSBpbnB1dCB0ZXh0LlxuICAgICAqL1xuICAgIGFzeW5jIHByZWRpY3QodGV4dCwgb3B0aW9ucywgY2FsbGJhY2tzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGwodGV4dCwgb3B0aW9ucywgY2FsbGJhY2tzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgVXNlIC5pbnZva2UoKSBpbnN0ZWFkLiBXaWxsIGJlIHJlbW92ZWQgaW4gMC4yLjAuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCB0YWtlcyBhIGxpc3Qgb2YgbWVzc2FnZXMsIG9wdGlvbnMsIGFuZCBjYWxsYmFja3MsIGFuZFxuICAgICAqIHJldHVybnMgYSBwcmVkaWN0ZWQgbWVzc2FnZS5cbiAgICAgKiBAcGFyYW0gbWVzc2FnZXMgQSBsaXN0IG9mIG1lc3NhZ2VzIGZvciB0aGUgcHJlZGljdGlvbi5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25zIGZvciB0aGUgTExNIGNhbGwuXG4gICAgICogQHBhcmFtIGNhbGxiYWNrcyBDYWxsYmFja3MgZm9yIHRoZSBMTE0gY2FsbC5cbiAgICAgKiBAcmV0dXJucyBBIHByZWRpY3RlZCBtZXNzYWdlIGJhc2VkIG9uIHRoZSBsaXN0IG9mIG1lc3NhZ2VzLlxuICAgICAqL1xuICAgIGFzeW5jIHByZWRpY3RNZXNzYWdlcyhtZXNzYWdlcywgb3B0aW9ucywgY2FsbGJhY2tzKSB7XG4gICAgICAgIGNvbnN0IHRleHQgPSBnZXRCdWZmZXJTdHJpbmcobWVzc2FnZXMpO1xuICAgICAgICBjb25zdCBwcmVkaWN0aW9uID0gYXdhaXQgdGhpcy5jYWxsKHRleHQsIG9wdGlvbnMsIGNhbGxiYWNrcyk7XG4gICAgICAgIHJldHVybiBuZXcgQUlNZXNzYWdlKHByZWRpY3Rpb24pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGlkZW50aWZ5aW5nIHBhcmFtZXRlcnMgb2YgdGhlIExMTS5cbiAgICAgKi9cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIF9pZGVudGlmeWluZ1BhcmFtcygpIHtcbiAgICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAqIFJldHVybiBhIGpzb24tbGlrZSBvYmplY3QgcmVwcmVzZW50aW5nIHRoaXMgTExNLlxuICAgICAqL1xuICAgIHNlcmlhbGl6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnRoaXMuX2lkZW50aWZ5aW5nUGFyYW1zKCksXG4gICAgICAgICAgICBfdHlwZTogdGhpcy5fbGxtVHlwZSgpLFxuICAgICAgICAgICAgX21vZGVsOiB0aGlzLl9tb2RlbFR5cGUoKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgX21vZGVsVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiYmFzZV9sbG1cIjtcbiAgICB9XG59XG4vKipcbiAqIExMTSBjbGFzcyB0aGF0IHByb3ZpZGVzIGEgc2ltcGxlciBpbnRlcmZhY2UgdG8gc3ViY2xhc3MgdGhhbiB7QGxpbmsgQmFzZUxMTX0uXG4gKlxuICogUmVxdWlyZXMgb25seSBpbXBsZW1lbnRpbmcgYSBzaW1wbGVyIHtAbGluayBfY2FsbH0gbWV0aG9kIGluc3RlYWQgb2Yge0BsaW5rIF9nZW5lcmF0ZX0uXG4gKlxuICogQGF1Z21lbnRzIEJhc2VMTE1cbiAqL1xuZXhwb3J0IGNsYXNzIExMTSBleHRlbmRzIEJhc2VMTE0ge1xuICAgIGFzeW5jIF9nZW5lcmF0ZShwcm9tcHRzLCBvcHRpb25zLCBydW5NYW5hZ2VyKSB7XG4gICAgICAgIGNvbnN0IGdlbmVyYXRpb25zID0gYXdhaXQgUHJvbWlzZS5hbGwocHJvbXB0cy5tYXAoKHByb21wdCwgcHJvbXB0SW5kZXgpID0+IHRoaXMuX2NhbGwocHJvbXB0LCB7IC4uLm9wdGlvbnMsIHByb21wdEluZGV4IH0sIHJ1bk1hbmFnZXIpLnRoZW4oKHRleHQpID0+IFt7IHRleHQgfV0pKSk7XG4gICAgICAgIHJldHVybiB7IGdlbmVyYXRpb25zIH07XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkFJTWVzc2FnZSIsImdldEJ1ZmZlclN0cmluZyIsIlJVTl9LRVkiLCJHZW5lcmF0aW9uQ2h1bmsiLCJDYWxsYmFja01hbmFnZXIiLCJCYXNlTGFuZ3VhZ2VNb2RlbCIsIkJhc2VMTE0iLCJjb25zdHJ1Y3RvciIsImNvbmN1cnJlbmN5IiwicmVzdCIsIm1heENvbmN1cnJlbmN5IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsIl9sbG1UeXBlIiwiaW52b2tlIiwiaW5wdXQiLCJvcHRpb25zIiwicHJvbXB0VmFsdWUiLCJfY29udmVydElucHV0VG9Qcm9tcHRWYWx1ZSIsInJlc3VsdCIsImdlbmVyYXRlUHJvbXB0IiwiY2FsbGJhY2tzIiwiZ2VuZXJhdGlvbnMiLCJ0ZXh0IiwiX3N0cmVhbVJlc3BvbnNlQ2h1bmtzIiwiX2lucHV0IiwiX29wdGlvbnMiLCJfcnVuTWFuYWdlciIsIkVycm9yIiwiX3NlcGFyYXRlUnVubmFibGVDb25maWdGcm9tQ2FsbE9wdGlvbnMiLCJydW5uYWJsZUNvbmZpZyIsImNhbGxPcHRpb25zIiwidGltZW91dCIsInNpZ25hbCIsIkFib3J0U2lnbmFsIiwiX3N0cmVhbUl0ZXJhdG9yIiwicHJvdG90eXBlIiwicHJvbXB0IiwiY2FsbGJhY2tNYW5hZ2VyXyIsImNvbmZpZ3VyZSIsInRhZ3MiLCJtZXRhZGF0YSIsInZlcmJvc2UiLCJleHRyYSIsImludm9jYXRpb25fcGFyYW1zIiwiaW52b2NhdGlvblBhcmFtcyIsImJhdGNoX3NpemUiLCJydW5NYW5hZ2VycyIsImhhbmRsZUxMTVN0YXJ0IiwidG9KU09OIiwidG9TdHJpbmciLCJ1bmRlZmluZWQiLCJydW5OYW1lIiwiZ2VuZXJhdGlvbiIsImNodW5rIiwiY29uY2F0IiwiZXJyIiwiUHJvbWlzZSIsImFsbCIsIm1hcCIsInJ1bk1hbmFnZXIiLCJoYW5kbGVMTE1FcnJvciIsImhhbmRsZUxMTUVuZCIsInByb21wdFZhbHVlcyIsInByb21wdHMiLCJnZW5lcmF0ZSIsIl9mbGF0dGVuTExNUmVzdWx0IiwibGxtUmVzdWx0IiwibGxtUmVzdWx0cyIsImkiLCJsZW5ndGgiLCJnZW5MaXN0IiwicHVzaCIsImxsbU91dHB1dCIsInRva2VuVXNhZ2UiLCJfZ2VuZXJhdGVVbmNhY2hlZCIsInBhcnNlZE9wdGlvbnMiLCJoYW5kbGVkT3B0aW9ucyIsIm91dHB1dCIsIl9nZW5lcmF0ZSIsImZsYXR0ZW5lZE91dHB1dHMiLCJydW5JZHMiLCJtYW5hZ2VyIiwicnVuSWQiLCJfZ2VuZXJhdGVDYWNoZWQiLCJjYWNoZSIsImxsbVN0cmluZ0tleSIsImNhY2hlZCIsIm1pc3NpbmdQcm9tcHRJbmRpY2VzIiwicmVzdWx0cyIsImFsbFNldHRsZWQiLCJpbmRleCIsImxvb2t1cCIsImNhY2hlZFJlc3VsdHMiLCJmaWx0ZXIiLCJzdGF0dXMiLCJwcm9taXNlUmVzdWx0IiwiaGFuZGxlTExNTmV3VG9rZW4iLCJyZWFzb24iLCJyZWplY3QiLCJBcnJheSIsImlzQXJyYXkiLCJzdG9wIiwiX2dldFNlcmlhbGl6ZWRDYWNoZUtleVBhcmFtZXRlcnNGb3JDYWxsIiwicHJvbXB0SW5kZXgiLCJ1cGRhdGUiLCJjYWxsIiwicHJlZGljdCIsInByZWRpY3RNZXNzYWdlcyIsIm1lc3NhZ2VzIiwicHJlZGljdGlvbiIsIl9pZGVudGlmeWluZ1BhcmFtcyIsInNlcmlhbGl6ZSIsIl90eXBlIiwiX21vZGVsIiwiX21vZGVsVHlwZSIsIkxMTSIsIl9jYWxsIiwidGhlbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/language_models/llms.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/load/map_keys.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/load/map_keys.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   keyFromJson: () => (/* binding */ keyFromJson),\n/* harmony export */   keyToJson: () => (/* binding */ keyToJson),\n/* harmony export */   mapKeys: () => (/* binding */ mapKeys)\n/* harmony export */ });\n/* harmony import */ var decamelize__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! decamelize */ \"(rsc)/./node_modules/decamelize/index.js\");\n/* harmony import */ var camelcase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! camelcase */ \"(rsc)/./node_modules/@langchain/core/node_modules/camelcase/index.js\");\n\n\nfunction keyToJson(key, map) {\n    return map?.[key] || decamelize__WEBPACK_IMPORTED_MODULE_0__(key);\n}\nfunction keyFromJson(key, map) {\n    return map?.[key] || camelcase__WEBPACK_IMPORTED_MODULE_1__(key);\n}\nfunction mapKeys(fields, mapper, map) {\n    const mapped = {};\n    for(const key in fields){\n        if (Object.hasOwn(fields, key)) {\n            mapped[mapper(key, map)] = fields[key];\n        }\n    }\n    return mapped;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbG9hZC9tYXBfa2V5cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFtQztBQUNEO0FBQzNCLFNBQVNFLFVBQVVDLEdBQUcsRUFBRUMsR0FBRztJQUM5QixPQUFPQSxLQUFLLENBQUNELElBQUksSUFBSUgsdUNBQVNBLENBQUNHO0FBQ25DO0FBQ08sU0FBU0UsWUFBWUYsR0FBRyxFQUFFQyxHQUFHO0lBQ2hDLE9BQU9BLEtBQUssQ0FBQ0QsSUFBSSxJQUFJRixzQ0FBU0EsQ0FBQ0U7QUFDbkM7QUFDTyxTQUFTRyxRQUFRQyxNQUFNLEVBQUVDLE1BQU0sRUFBRUosR0FBRztJQUN2QyxNQUFNSyxTQUFTLENBQUM7SUFDaEIsSUFBSyxNQUFNTixPQUFPSSxPQUFRO1FBQ3RCLElBQUlHLE9BQU9DLE1BQU0sQ0FBQ0osUUFBUUosTUFBTTtZQUM1Qk0sTUFBTSxDQUFDRCxPQUFPTCxLQUFLQyxLQUFLLEdBQUdHLE1BQU0sQ0FBQ0osSUFBSTtRQUMxQztJQUNKO0lBQ0EsT0FBT007QUFDWCIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLWZvcm0tYnVpbGRlci10dXRvcmlhbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9sb2FkL21hcF9rZXlzLmpzPzBmNDMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHNuYWtlQ2FzZSBmcm9tIFwiZGVjYW1lbGl6ZVwiO1xuaW1wb3J0IGNhbWVsQ2FzZSBmcm9tIFwiY2FtZWxjYXNlXCI7XG5leHBvcnQgZnVuY3Rpb24ga2V5VG9Kc29uKGtleSwgbWFwKSB7XG4gICAgcmV0dXJuIG1hcD8uW2tleV0gfHwgc25ha2VDYXNlKGtleSk7XG59XG5leHBvcnQgZnVuY3Rpb24ga2V5RnJvbUpzb24oa2V5LCBtYXApIHtcbiAgICByZXR1cm4gbWFwPy5ba2V5XSB8fCBjYW1lbENhc2Uoa2V5KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBtYXBLZXlzKGZpZWxkcywgbWFwcGVyLCBtYXApIHtcbiAgICBjb25zdCBtYXBwZWQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBmaWVsZHMpIHtcbiAgICAgICAgaWYgKE9iamVjdC5oYXNPd24oZmllbGRzLCBrZXkpKSB7XG4gICAgICAgICAgICBtYXBwZWRbbWFwcGVyKGtleSwgbWFwKV0gPSBmaWVsZHNba2V5XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbWFwcGVkO1xufVxuIl0sIm5hbWVzIjpbInNuYWtlQ2FzZSIsImNhbWVsQ2FzZSIsImtleVRvSnNvbiIsImtleSIsIm1hcCIsImtleUZyb21Kc29uIiwibWFwS2V5cyIsImZpZWxkcyIsIm1hcHBlciIsIm1hcHBlZCIsIk9iamVjdCIsImhhc093biJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/load/map_keys.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/load/serializable.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/load/serializable.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Serializable: () => (/* binding */ Serializable),\n/* harmony export */   get_lc_unique_name: () => (/* binding */ get_lc_unique_name)\n/* harmony export */ });\n/* harmony import */ var _map_keys_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./map_keys.js */ \"(rsc)/./node_modules/@langchain/core/dist/load/map_keys.js\");\n\nfunction shallowCopy(obj) {\n    return Array.isArray(obj) ? [\n        ...obj\n    ] : {\n        ...obj\n    };\n}\nfunction replaceSecrets(root, secretsMap) {\n    const result = shallowCopy(root);\n    for (const [path, secretId] of Object.entries(secretsMap)){\n        const [last, ...partsReverse] = path.split(\".\").reverse();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let current = result;\n        for (const part of partsReverse.reverse()){\n            if (current[part] === undefined) {\n                break;\n            }\n            current[part] = shallowCopy(current[part]);\n            current = current[part];\n        }\n        if (current[last] !== undefined) {\n            current[last] = {\n                lc: 1,\n                type: \"secret\",\n                id: [\n                    secretId\n                ]\n            };\n        }\n    }\n    return result;\n}\n/**\n * Get a unique name for the module, rather than parent class implementations.\n * Should not be subclassed, subclass lc_name above instead.\n */ function get_lc_unique_name(// eslint-disable-next-line @typescript-eslint/no-use-before-define\nserializableClass) {\n    // \"super\" here would refer to the parent class of Serializable,\n    // when we want the parent class of the module actually calling this method.\n    const parentClass = Object.getPrototypeOf(serializableClass);\n    const lcNameIsSubclassed = typeof serializableClass.lc_name === \"function\" && (typeof parentClass.lc_name !== \"function\" || serializableClass.lc_name() !== parentClass.lc_name());\n    if (lcNameIsSubclassed) {\n        return serializableClass.lc_name();\n    } else {\n        return serializableClass.name;\n    }\n}\nclass Serializable {\n    /**\n     * The name of the serializable. Override to provide an alias or\n     * to preserve the serialized module name in minified environments.\n     *\n     * Implemented as a static method to support loading logic.\n     */ static lc_name() {\n        return this.name;\n    }\n    /**\n     * The final serialized identifier for the module.\n     */ get lc_id() {\n        return [\n            ...this.lc_namespace,\n            get_lc_unique_name(this.constructor)\n        ];\n    }\n    /**\n     * A map of secrets, which will be omitted from serialization.\n     * Keys are paths to the secret in constructor args, e.g. \"foo.bar.baz\".\n     * Values are the secret ids, which will be used when deserializing.\n     */ get lc_secrets() {\n        return undefined;\n    }\n    /**\n     * A map of additional attributes to merge with constructor args.\n     * Keys are the attribute names, e.g. \"foo\".\n     * Values are the attribute values, which will be serialized.\n     * These attributes need to be accepted by the constructor as arguments.\n     */ get lc_attributes() {\n        return undefined;\n    }\n    /**\n     * A map of aliases for constructor args.\n     * Keys are the attribute names, e.g. \"foo\".\n     * Values are the alias that will replace the key in serialization.\n     * This is used to eg. make argument names match Python.\n     */ get lc_aliases() {\n        return undefined;\n    }\n    constructor(kwargs, ..._args){\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"lc_kwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.lc_kwargs = kwargs || {};\n    }\n    toJSON() {\n        if (!this.lc_serializable) {\n            return this.toJSONNotImplemented();\n        }\n        if (// eslint-disable-next-line no-instanceof/no-instanceof\n        this.lc_kwargs instanceof Serializable || typeof this.lc_kwargs !== \"object\" || Array.isArray(this.lc_kwargs)) {\n            // We do not support serialization of classes with arg not a POJO\n            // I'm aware the check above isn't as strict as it could be\n            return this.toJSONNotImplemented();\n        }\n        const aliases = {};\n        const secrets = {};\n        const kwargs = Object.keys(this.lc_kwargs).reduce((acc, key)=>{\n            acc[key] = key in this ? this[key] : this.lc_kwargs[key];\n            return acc;\n        }, {});\n        // get secrets, attributes and aliases from all superclasses\n        for(// eslint-disable-next-line @typescript-eslint/no-this-alias\n        let current = Object.getPrototypeOf(this); current; current = Object.getPrototypeOf(current)){\n            Object.assign(aliases, Reflect.get(current, \"lc_aliases\", this));\n            Object.assign(secrets, Reflect.get(current, \"lc_secrets\", this));\n            Object.assign(kwargs, Reflect.get(current, \"lc_attributes\", this));\n        }\n        // include all secrets used, even if not in kwargs,\n        // will be replaced with sentinel value in replaceSecrets\n        Object.keys(secrets).forEach((keyPath)=>{\n            // eslint-disable-next-line @typescript-eslint/no-this-alias, @typescript-eslint/no-explicit-any\n            let read = this;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            let write = kwargs;\n            const [last, ...partsReverse] = keyPath.split(\".\").reverse();\n            for (const key of partsReverse.reverse()){\n                if (!(key in read) || read[key] === undefined) return;\n                if (!(key in write) || write[key] === undefined) {\n                    if (typeof read[key] === \"object\" && read[key] != null) {\n                        write[key] = {};\n                    } else if (Array.isArray(read[key])) {\n                        write[key] = [];\n                    }\n                }\n                read = read[key];\n                write = write[key];\n            }\n            if (last in read && read[last] !== undefined) {\n                write[last] = write[last] || read[last];\n            }\n        });\n        return {\n            lc: 1,\n            type: \"constructor\",\n            id: this.lc_id,\n            kwargs: (0,_map_keys_js__WEBPACK_IMPORTED_MODULE_0__.mapKeys)(Object.keys(secrets).length ? replaceSecrets(kwargs, secrets) : kwargs, _map_keys_js__WEBPACK_IMPORTED_MODULE_0__.keyToJson, aliases)\n        };\n    }\n    toJSONNotImplemented() {\n        return {\n            lc: 1,\n            type: \"not_implemented\",\n            id: this.lc_id\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbG9hZC9zZXJpYWxpemFibGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQW1EO0FBQ25ELFNBQVNFLFlBQVlDLEdBQUc7SUFDcEIsT0FBT0MsTUFBTUMsT0FBTyxDQUFDRixPQUFPO1dBQUlBO0tBQUksR0FBRztRQUFFLEdBQUdBLEdBQUc7SUFBQztBQUNwRDtBQUNBLFNBQVNHLGVBQWVDLElBQUksRUFBRUMsVUFBVTtJQUNwQyxNQUFNQyxTQUFTUCxZQUFZSztJQUMzQixLQUFLLE1BQU0sQ0FBQ0csTUFBTUMsU0FBUyxJQUFJQyxPQUFPQyxPQUFPLENBQUNMLFlBQWE7UUFDdkQsTUFBTSxDQUFDTSxNQUFNLEdBQUdDLGFBQWEsR0FBR0wsS0FBS00sS0FBSyxDQUFDLEtBQUtDLE9BQU87UUFDdkQsOERBQThEO1FBQzlELElBQUlDLFVBQVVUO1FBQ2QsS0FBSyxNQUFNVSxRQUFRSixhQUFhRSxPQUFPLEdBQUk7WUFDdkMsSUFBSUMsT0FBTyxDQUFDQyxLQUFLLEtBQUtDLFdBQVc7Z0JBQzdCO1lBQ0o7WUFDQUYsT0FBTyxDQUFDQyxLQUFLLEdBQUdqQixZQUFZZ0IsT0FBTyxDQUFDQyxLQUFLO1lBQ3pDRCxVQUFVQSxPQUFPLENBQUNDLEtBQUs7UUFDM0I7UUFDQSxJQUFJRCxPQUFPLENBQUNKLEtBQUssS0FBS00sV0FBVztZQUM3QkYsT0FBTyxDQUFDSixLQUFLLEdBQUc7Z0JBQ1pPLElBQUk7Z0JBQ0pDLE1BQU07Z0JBQ05DLElBQUk7b0JBQUNaO2lCQUFTO1lBQ2xCO1FBQ0o7SUFDSjtJQUNBLE9BQU9GO0FBQ1g7QUFDQTs7O0NBR0MsR0FDTSxTQUFTZSxtQkFDaEIsbUVBQW1FO0FBQ25FQyxpQkFBaUI7SUFDYixnRUFBZ0U7SUFDaEUsNEVBQTRFO0lBQzVFLE1BQU1DLGNBQWNkLE9BQU9lLGNBQWMsQ0FBQ0Y7SUFDMUMsTUFBTUcscUJBQXFCLE9BQU9ILGtCQUFrQkksT0FBTyxLQUFL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YUUsT0FBTyxHQUFJO2dCQUN0QyxJQUFJLENBQUVxQyxDQUFBQSxPQUFPTSxJQUFHLEtBQU1BLElBQUksQ0FBQ04sSUFBSSxLQUFLbEMsV0FDaEM7Z0JBQ0osSUFBSSxDQUFFa0MsQ0FBQUEsT0FBT08sS0FBSSxLQUFNQSxLQUFLLENBQUNQLElBQUksS0FBS2xDLFdBQVc7b0JBQzdDLElBQUksT0FBT3dDLElBQUksQ0FBQ04sSUFBSSxLQUFLLFlBQVlNLElBQUksQ0FBQ04sSUFBSSxJQUFJLE1BQU07d0JBQ3BETyxLQUFLLENBQUNQLElBQUksR0FBRyxDQUFDO29CQUNsQixPQUNLLElBQUlsRCxNQUFNQyxPQUFPLENBQUN1RCxJQUFJLENBQUNOLElBQUksR0FBRzt3QkFDL0JPLEtBQUssQ0FBQ1AsSUFBSSxHQUFHLEVBQUU7b0JBQ25CO2dCQUNKO2dCQUNBTSxPQUFPQSxJQUFJLENBQUNOLElBQUk7Z0JBQ2hCTyxRQUFRQSxLQUFLLENBQUNQLElBQUk7WUFDdEI7WUFDQSxJQUFJeEMsUUFBUThDLFFBQVFBLElBQUksQ0FBQzlDLEtBQUssS0FBS00sV0FBVztnQkFDMUN5QyxLQUFLLENBQUMvQyxLQUFLLEdBQUcrQyxLQUFLLENBQUMvQyxLQUFLLElBQUk4QyxJQUFJLENBQUM5QyxLQUFLO1lBQzNDO1FBQ0o7UUFDQSxPQUFPO1lBQ0hPLElBQUk7WUFDSkMsTUFBTTtZQUNOQyxJQUFJLElBQUksQ0FBQ1MsS0FBSztZQUNkTSxRQUFRckMscURBQU9BLENBQUNXLE9BQU91QyxJQUFJLENBQUNELFNBQVNZLE1BQU0sR0FBR3hELGVBQWVnQyxRQUFRWSxXQUFXWixRQUFRdEMsbURBQVNBLEVBQUVpRDtRQUN2RztJQUNKO0lBQ0FELHVCQUF1QjtRQUNuQixPQUFPO1lBQ0gzQixJQUFJO1lBQ0pDLE1BQU07WUFDTkMsSUFBSSxJQUFJLENBQUNTLEtBQUs7UUFDbEI7SUFDSjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L2xvYWQvc2VyaWFsaXphYmxlLmpzP2VlMmUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsga2V5VG9Kc29uLCBtYXBLZXlzIH0gZnJvbSBcIi4vbWFwX2tleXMuanNcIjtcbmZ1bmN0aW9uIHNoYWxsb3dDb3B5KG9iaikge1xuICAgIHJldHVybiBBcnJheS5pc0FycmF5KG9iaikgPyBbLi4ub2JqXSA6IHsgLi4ub2JqIH07XG59XG5mdW5jdGlvbiByZXBsYWNlU2VjcmV0cyhyb290LCBzZWNyZXRzTWFwKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gc2hhbGxvd0NvcHkocm9vdCk7XG4gICAgZm9yIChjb25zdCBbcGF0aCwgc2VjcmV0SWRdIG9mIE9iamVjdC5lbnRyaWVzKHNlY3JldHNNYXApKSB7XG4gICAgICAgIGNvbnN0IFtsYXN0LCAuLi5wYXJ0c1JldmVyc2VdID0gcGF0aC5zcGxpdChcIi5cIikucmV2ZXJzZSgpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBsZXQgY3VycmVudCA9IHJlc3VsdDtcbiAgICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIHBhcnRzUmV2ZXJzZS5yZXZlcnNlKCkpIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50W3BhcnRdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnRbcGFydF0gPSBzaGFsbG93Q29weShjdXJyZW50W3BhcnRdKTtcbiAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50W3BhcnRdO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjdXJyZW50W2xhc3RdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGN1cnJlbnRbbGFzdF0gPSB7XG4gICAgICAgICAgICAgICAgbGM6IDEsXG4gICAgICAgICAgICAgICAgdHlwZTogXCJzZWNyZXRcIixcbiAgICAgICAgICAgICAgICBpZDogW3NlY3JldElkXSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8qKlxuICogR2V0IGEgdW5pcXVlIG5hbWUgZm9yIHRoZSBtb2R1bGUsIHJhdGhlciB0aGFuIHBhcmVudCBjbGFzcyBpbXBsZW1lbnRhdGlvbnMuXG4gKiBTaG91bGQgbm90IGJlIHN1YmNsYXNzZWQsIHN1YmNsYXNzIGxjX25hbWUgYWJvdmUgaW5zdGVhZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldF9sY191bmlxdWVfbmFtZShcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbnNlcmlhbGl6YWJsZUNsYXNzKSB7XG4gICAgLy8gXCJzdXBlclwiIGhlcmUgd291bGQgcmVmZXIgdG8gdGhlIHBhcmVudCBjbGFzcyBvZiBTZXJpYWxpemFibGUsXG4gICAgLy8gd2hlbiB3ZSB3YW50IHRoZSBwYXJlbnQgY2xhc3Mgb2YgdGhlIG1vZHVsZSBhY3R1YWxseSBjYWxsaW5nIHRoaXMgbWV0aG9kLlxuICAgIGNvbnN0IHBhcmVudENsYXNzID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHNlcmlhbGl6YWJsZUNsYXNzKTtcbiAgICBjb25zdCBsY05hbWVJc1N1YmNsYXNzZWQgPSB0eXBlb2Ygc2VyaWFsaXphYmxlQ2xhc3MubGNfbmFtZSA9PT0gXCJmdW5jdGlvblwiICYmXG4gICAgICAgICh0eXBlb2YgcGFyZW50Q2xhc3MubGNfbmFtZSAhPT0gXCJmdW5jdGlvblwiIHx8XG4gICAgICAgICAgICBzZXJpYWxpemFibGVDbGFzcy5sY19uYW1lKCkgIT09IHBhcmVudENsYXNzLmxjX25hbWUoKSk7XG4gICAgaWYgKGxjTmFtZUlzU3ViY2xhc3NlZCkge1xuICAgICAgICByZXR1cm4gc2VyaWFsaXphYmxlQ2xhc3MubGNfbmFtZSgpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHNlcmlhbGl6YWJsZUNsYXNzLm5hbWU7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFNlcmlhbGl6YWJsZSB7XG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIHNlcmlhbGl6YWJsZS4gT3ZlcnJpZGUgdG8gcHJvdmlkZSBhbiBhbGlhcyBvclxuICAgICAqIHRvIHByZXNlcnZlIHRoZSBzZXJpYWxpemVkIG1vZHVsZSBuYW1lIGluIG1pbmlmaWVkIGVudmlyb25tZW50cy5cbiAgICAgKlxuICAgICAqIEltcGxlbWVudGVkIGFzIGEgc3RhdGljIG1ldGhvZCB0byBzdXBwb3J0IGxvYWRpbmcgbG9naWMuXG4gICAgICovXG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5hbWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBmaW5hbCBzZXJpYWxpemVkIGlkZW50aWZpZXIgZm9yIHRoZSBtb2R1bGUuXG4gICAgICovXG4gICAgZ2V0IGxjX2lkKCkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgLi4udGhpcy5sY19uYW1lc3BhY2UsXG4gICAgICAgICAgICBnZXRfbGNfdW5pcXVlX25hbWUodGhpcy5jb25zdHJ1Y3RvciksXG4gICAgICAgIF07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgbWFwIG9mIHNlY3JldHMsIHdoaWNoIHdpbGwgYmUgb21pdHRlZCBmcm9tIHNlcmlhbGl6YXRpb24uXG4gICAgICogS2V5cyBhcmUgcGF0aHMgdG8gdGhlIHNlY3JldCBpbiBjb25zdHJ1Y3RvciBhcmdzLCBlLmcuIFwiZm9vLmJhci5iYXpcIi5cbiAgICAgKiBWYWx1ZXMgYXJlIHRoZSBzZWNyZXQgaWRzLCB3aGljaCB3aWxsIGJlIHVzZWQgd2hlbiBkZXNlcmlhbGl6aW5nLlxuICAgICAqL1xuICAgIGdldCBsY19zZWNyZXRzKCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIG1hcCBvZiBhZGRpdGlvbmFsIGF0dHJpYnV0ZXMgdG8gbWVyZ2Ugd2l0aCBjb25zdHJ1Y3RvciBhcmdzLlxuICAgICAqIEtleXMgYXJlIHRoZSBhdHRyaWJ1dGUgbmFtZXMsIGUuZy4gXCJmb29cIi5cbiAgICAgKiBWYWx1ZXMgYXJlIHRoZSBhdHRyaWJ1dGUgdmFsdWVzLCB3aGljaCB3aWxsIGJlIHNlcmlhbGl6ZWQuXG4gICAgICogVGhlc2UgYXR0cmlidXRlcyBuZWVkIHRvIGJlIGFjY2VwdGVkIGJ5IHRoZSBjb25zdHJ1Y3RvciBhcyBhcmd1bWVudHMuXG4gICAgICovXG4gICAgZ2V0IGxjX2F0dHJpYnV0ZXMoKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgbWFwIG9mIGFsaWFzZXMgZm9yIGNvbnN0cnVjdG9yIGFyZ3MuXG4gICAgICogS2V5cyBhcmUgdGhlIGF0dHJpYnV0ZSBuYW1lcywgZS5nLiBcImZvb1wiLlxuICAgICAqIFZhbHVlcyBhcmUgdGhlIGFsaWFzIHRoYXQgd2lsbCByZXBsYWNlIHRoZSBrZXkgaW4gc2VyaWFsaXphdGlvbi5cbiAgICAgKiBUaGlzIGlzIHVzZWQgdG8gZWcuIG1ha2UgYXJndW1lbnQgbmFtZXMgbWF0Y2ggUHl0aG9uLlxuICAgICAqL1xuICAgIGdldCBsY19hbGlhc2VzKCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBjb25zdHJ1Y3Rvcihrd2FyZ3MsIC4uLl9hcmdzKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX2t3YXJnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmxjX2t3YXJncyA9IGt3YXJncyB8fCB7fTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICBpZiAoIXRoaXMubGNfc2VyaWFsaXphYmxlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0pTT05Ob3RJbXBsZW1lbnRlZCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWluc3RhbmNlb2Yvbm8taW5zdGFuY2VvZlxuICAgICAgICB0aGlzLmxjX2t3YXJncyBpbnN0YW5jZW9mIFNlcmlhbGl6YWJsZSB8fFxuICAgICAgICAgICAgdHlwZW9mIHRoaXMubGNfa3dhcmdzICE9PSBcIm9iamVjdFwiIHx8XG4gICAgICAgICAgICBBcnJheS5pc0FycmF5KHRoaXMubGNfa3dhcmdzKSkge1xuICAgICAgICAgICAgLy8gV2UgZG8gbm90IHN1cHBvcnQgc2VyaWFsaXphdGlvbiBvZiBjbGFzc2VzIHdpdGggYXJnIG5vdCBhIFBPSk9cbiAgICAgICAgICAgIC8vIEknbSBhd2FyZSB0aGUgY2hlY2sgYWJvdmUgaXNuJ3QgYXMgc3RyaWN0IGFzIGl0IGNvdWxkIGJlXG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0pTT05Ob3RJbXBsZW1lbnRlZCgpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFsaWFzZXMgPSB7fTtcbiAgICAgICAgY29uc3Qgc2VjcmV0cyA9IHt9O1xuICAgICAgICBjb25zdCBrd2FyZ3MgPSBPYmplY3Qua2V5cyh0aGlzLmxjX2t3YXJncykucmVkdWNlKChhY2MsIGtleSkgPT4ge1xuICAgICAgICAgICAgYWNjW2tleV0gPSBrZXkgaW4gdGhpcyA/IHRoaXNba2V5XSA6IHRoaXMubGNfa3dhcmdzW2tleV07XG4gICAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9LCB7fSk7XG4gICAgICAgIC8vIGdldCBzZWNyZXRzLCBhdHRyaWJ1dGVzIGFuZCBhbGlhc2VzIGZyb20gYWxsIHN1cGVyY2xhc3Nlc1xuICAgICAgICBmb3IgKFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXRoaXMtYWxpYXNcbiAgICAgICAgbGV0IGN1cnJlbnQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcyk7IGN1cnJlbnQ7IGN1cnJlbnQgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoY3VycmVudCkpIHtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oYWxpYXNlcywgUmVmbGVjdC5nZXQoY3VycmVudCwgXCJsY19hbGlhc2VzXCIsIHRoaXMpKTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oc2VjcmV0cywgUmVmbGVjdC5nZXQoY3VycmVudCwgXCJsY19zZWNyZXRzXCIsIHRoaXMpKTtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oa3dhcmdzLCBSZWZsZWN0LmdldChjdXJyZW50LCBcImxjX2F0dHJpYnV0ZXNcIiwgdGhpcykpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGluY2x1ZGUgYWxsIHNlY3JldHMgdXNlZCwgZXZlbiBpZiBub3QgaW4ga3dhcmdzLFxuICAgICAgICAvLyB3aWxsIGJlIHJlcGxhY2VkIHdpdGggc2VudGluZWwgdmFsdWUgaW4gcmVwbGFjZVNlY3JldHNcbiAgICAgICAgT2JqZWN0LmtleXMoc2VjcmV0cykuZm9yRWFjaCgoa2V5UGF0aCkgPT4ge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby10aGlzLWFsaWFzLCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICBsZXQgcmVhZCA9IHRoaXM7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgbGV0IHdyaXRlID0ga3dhcmdzO1xuICAgICAgICAgICAgY29uc3QgW2xhc3QsIC4uLnBhcnRzUmV2ZXJzZV0gPSBrZXlQYXRoLnNwbGl0KFwiLlwiKS5yZXZlcnNlKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBwYXJ0c1JldmVyc2UucmV2ZXJzZSgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIHJlYWQpIHx8IHJlYWRba2V5XSA9PT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIHdyaXRlKSB8fCB3cml0ZVtrZXldID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZWFkW2tleV0gPT09IFwib2JqZWN0XCIgJiYgcmVhZFtrZXldICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlW2tleV0gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHJlYWRba2V5XSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRlW2tleV0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZWFkID0gcmVhZFtrZXldO1xuICAgICAgICAgICAgICAgIHdyaXRlID0gd3JpdGVba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChsYXN0IGluIHJlYWQgJiYgcmVhZFtsYXN0XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgd3JpdGVbbGFzdF0gPSB3cml0ZVtsYXN0XSB8fCByZWFkW2xhc3RdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxjOiAxLFxuICAgICAgICAgICAgdHlwZTogXCJjb25zdHJ1Y3RvclwiLFxuICAgICAgICAgICAgaWQ6IHRoaXMubGNfaWQsXG4gICAgICAgICAgICBrd2FyZ3M6IG1hcEtleXMoT2JqZWN0LmtleXMoc2VjcmV0cykubGVuZ3RoID8gcmVwbGFjZVNlY3JldHMoa3dhcmdzLCBzZWNyZXRzKSA6IGt3YXJncywga2V5VG9Kc29uLCBhbGlhc2VzKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgdG9KU09OTm90SW1wbGVtZW50ZWQoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBsYzogMSxcbiAgICAgICAgICAgIHR5cGU6IFwibm90X2ltcGxlbWVudGVkXCIsXG4gICAgICAgICAgICBpZDogdGhpcy5sY19pZCxcbiAgICAgICAgfTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsia2V5VG9Kc29uIiwibWFwS2V5cyIsInNoYWxsb3dDb3B5Iiwib2JqIiwiQXJyYXkiLCJpc0FycmF5IiwicmVwbGFjZVNlY3JldHMiLCJyb290Iiwic2VjcmV0c01hcCIsInJlc3VsdCIsInBhdGgiLCJzZWNyZXRJZCIsIk9iamVjdCIsImVudHJpZXMiLCJsYXN0IiwicGFydHNSZXZlcnNlIiwic3BsaXQiLCJyZXZlcnNlIiwiY3VycmVudCIsInBhcnQiLCJ1bmRlZmluZWQiLCJsYyIsInR5cGUiLCJpZCIsImdldF9sY191bmlxdWVfbmFtZSIsInNlcmlhbGl6YWJsZUNsYXNzIiwicGFyZW50Q2xhc3MiLCJnZXRQcm90b3R5cGVPZiIsImxjTmFtZUlzU3ViY2xhc3NlZCIsImxjX25hbWUiLCJuYW1lIiwiU2VyaWFsaXphYmxlIiwibGNfaWQiLCJsY19uYW1lc3BhY2UiLCJjb25zdHJ1Y3RvciIsImxjX3NlY3JldHMiLCJsY19hdHRyaWJ1dGVzIiwibGNfYWxpYXNlcyIsImt3YXJncyIsIl9hcmdzIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImxjX2t3YXJncyIsInRvSlNPTiIsImxjX3NlcmlhbGl6YWJsZSIsInRvSlNPTk5vdEltcGxlbWVudGVkIiwiYWxpYXNlcyIsInNlY3JldHMiLCJrZXlzIiwicmVkdWNlIiwiYWNjIiwia2V5IiwiYXNzaWduIiwiUmVmbGVjdCIsImdldCIsImZvckVhY2giLCJrZXlQYXRoIiwicmVhZCIsIndyaXRlIiwibGVuZ3RoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/load/serializable.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/messages/index.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/messages/index.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AIMessage: () => (/* binding */ AIMessage),\n/* harmony export */   AIMessageChunk: () => (/* binding */ AIMessageChunk),\n/* harmony export */   BaseMessage: () => (/* binding */ BaseMessage),\n/* harmony export */   BaseMessageChunk: () => (/* binding */ BaseMessageChunk),\n/* harmony export */   ChatMessage: () => (/* binding */ ChatMessage),\n/* harmony export */   ChatMessageChunk: () => (/* binding */ ChatMessageChunk),\n/* harmony export */   FunctionMessage: () => (/* binding */ FunctionMessage),\n/* harmony export */   FunctionMessageChunk: () => (/* binding */ FunctionMessageChunk),\n/* harmony export */   HumanMessage: () => (/* binding */ HumanMessage),\n/* harmony export */   HumanMessageChunk: () => (/* binding */ HumanMessageChunk),\n/* harmony export */   SystemMessage: () => (/* binding */ SystemMessage),\n/* harmony export */   SystemMessageChunk: () => (/* binding */ SystemMessageChunk),\n/* harmony export */   ToolMessage: () => (/* binding */ ToolMessage),\n/* harmony export */   ToolMessageChunk: () => (/* binding */ ToolMessageChunk),\n/* harmony export */   coerceMessageLikeToMessage: () => (/* binding */ coerceMessageLikeToMessage),\n/* harmony export */   getBufferString: () => (/* binding */ getBufferString),\n/* harmony export */   isBaseMessage: () => (/* binding */ isBaseMessage),\n/* harmony export */   isBaseMessageChunk: () => (/* binding */ isBaseMessageChunk),\n/* harmony export */   mapChatMessagesToStoredMessages: () => (/* binding */ mapChatMessagesToStoredMessages),\n/* harmony export */   mapStoredMessageToChatMessage: () => (/* binding */ mapStoredMessageToChatMessage),\n/* harmony export */   mapStoredMessagesToChatMessages: () => (/* binding */ mapStoredMessagesToChatMessages)\n/* harmony export */ });\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../load/serializable.js */ \"(rsc)/./node_modules/@langchain/core/dist/load/serializable.js\");\n\nfunction mergeContent(firstContent, secondContent) {\n    // If first content is a string\n    if (typeof firstContent === \"string\") {\n        if (typeof secondContent === \"string\") {\n            return firstContent + secondContent;\n        } else {\n            return [\n                {\n                    type: \"text\",\n                    text: firstContent\n                },\n                ...secondContent\n            ];\n        }\n    // If both are arrays\n    } else if (Array.isArray(secondContent)) {\n        return [\n            ...firstContent,\n            ...secondContent\n        ];\n    // If the first content is a list and second is a string\n    } else {\n        // Otherwise, add the second content as a new element of the list\n        return [\n            ...firstContent,\n            {\n                type: \"text\",\n                text: secondContent\n            }\n        ];\n    }\n}\n/**\n * Base class for all types of messages in a conversation. It includes\n * properties like `content`, `name`, and `additional_kwargs`. It also\n * includes methods like `toDict()` and `_getType()`.\n */ class BaseMessage extends _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.Serializable {\n    get lc_aliases() {\n        // exclude snake case conversion to pascal case\n        return {\n            additional_kwargs: \"additional_kwargs\",\n            response_metadata: \"response_metadata\"\n        };\n    }\n    /**\n     * @deprecated\n     * Use {@link BaseMessage.content} instead.\n     */ get text() {\n        return typeof this.content === \"string\" ? this.content : \"\";\n    }\n    constructor(fields, /** @deprecated */ kwargs){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                content: fields,\n                additional_kwargs: kwargs,\n                response_metadata: {}\n            };\n        }\n        // Make sure the default value for additional_kwargs is passed into super() for serialization\n        if (!fields.additional_kwargs) {\n            // eslint-disable-next-line no-param-reassign\n            fields.additional_kwargs = {};\n        }\n        if (!fields.response_metadata) {\n            // eslint-disable-next-line no-param-reassign\n            fields.response_metadata = {};\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"messages\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        /** The content of the message. */ Object.defineProperty(this, \"content\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** The name of the message sender in a multi-user chat. */ Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** Additional keyword arguments */ Object.defineProperty(this, \"additional_kwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** Response metadata. For example: response headers, logprobs, token counts. */ Object.defineProperty(this, \"response_metadata\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.name = fields.name;\n        this.content = fields.content;\n        this.additional_kwargs = fields.additional_kwargs;\n        this.response_metadata = fields.response_metadata;\n    }\n    toDict() {\n        return {\n            type: this._getType(),\n            data: this.toJSON().kwargs\n        };\n    }\n    toChunk() {\n        const type = this._getType();\n        if (type === \"human\") {\n            // eslint-disable-next-line @typescript-eslint/no-use-before-define\n            return new HumanMessageChunk({\n                ...this\n            });\n        } else if (type === \"ai\") {\n            // eslint-disable-next-line @typescript-eslint/no-use-before-define\n            return new AIMessageChunk({\n                ...this\n            });\n        } else if (type === \"system\") {\n            // eslint-disable-next-line @typescript-eslint/no-use-before-define\n            return new SystemMessageChunk({\n                ...this\n            });\n        } else if (type === \"function\") {\n            // eslint-disable-next-line @typescript-eslint/no-use-before-define\n            return new FunctionMessageChunk({\n                ...this\n            });\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        } else if (ChatMessage.isInstance(this)) {\n            // eslint-disable-next-line @typescript-eslint/no-use-before-define\n            return new ChatMessageChunk({\n                ...this\n            });\n        } else {\n            throw new Error(\"Unknown message type.\");\n        }\n    }\n}\nfunction isOpenAIToolCallArray(value) {\n    return Array.isArray(value) && value.every((v)=>typeof v.index === \"number\");\n}\nfunction _mergeDicts(// eslint-disable-next-line @typescript-eslint/no-explicit-any\nleft, // eslint-disable-next-line @typescript-eslint/no-explicit-any\nright) {\n    const merged = {\n        ...left\n    };\n    for (const [key, value] of Object.entries(right)){\n        if (merged[key] == null) {\n            merged[key] = value;\n        } else if (value == null) {\n            continue;\n        } else if (typeof merged[key] !== typeof value || Array.isArray(merged[key]) !== Array.isArray(value)) {\n            throw new Error(`field[${key}] already exists in the message chunk, but with a different type.`);\n        } else if (typeof merged[key] === \"string\") {\n            merged[key] = merged[key] + value;\n        } else if (!Array.isArray(merged[key]) && typeof merged[key] === \"object\") {\n            merged[key] = _mergeDicts(merged[key], value);\n        } else if (key === \"tool_calls\" && isOpenAIToolCallArray(merged[key]) && isOpenAIToolCallArray(value)) {\n            for (const toolCall of value){\n                if (merged[key]?.[toolCall.index] !== undefined) {\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    merged[key] = merged[key]?.map((value, i)=>{\n                        if (i !== toolCall.index) {\n                            return value;\n                        }\n                        return {\n                            ...value,\n                            ...toolCall,\n                            function: {\n                                name: toolCall.function.name ?? value.function.name,\n                                arguments: (value.function.arguments ?? \"\") + (toolCall.function.arguments ?? \"\")\n                            }\n                        };\n                    });\n                } else {\n                    merged[key][toolCall.index] = toolCall;\n                }\n            }\n        } else if (Array.isArray(merged[key])) {\n            merged[key] = merged[key].concat(value);\n        } else if (merged[key] === value) {\n            continue;\n        } else {\n            console.warn(`field[${key}] already exists in this message chunk and value has unsupported type.`);\n        }\n    }\n    return merged;\n}\n/**\n * Represents a chunk of a message, which can be concatenated with other\n * message chunks. It includes a method `_merge_kwargs_dict()` for merging\n * additional keyword arguments from another `BaseMessageChunk` into this\n * one. It also overrides the `__add__()` method to support concatenation\n * of `BaseMessageChunk` instances.\n */ class BaseMessageChunk extends BaseMessage {\n}\n/**\n * Represents a human message in a conversation.\n */ class HumanMessage extends BaseMessage {\n    static lc_name() {\n        return \"HumanMessage\";\n    }\n    _getType() {\n        return \"human\";\n    }\n}\n/**\n * Represents a chunk of a human message, which can be concatenated with\n * other human message chunks.\n */ class HumanMessageChunk extends BaseMessageChunk {\n    static lc_name() {\n        return \"HumanMessageChunk\";\n    }\n    _getType() {\n        return \"human\";\n    }\n    concat(chunk) {\n        return new HumanMessageChunk({\n            content: mergeContent(this.content, chunk.content),\n            additional_kwargs: _mergeDicts(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: _mergeDicts(this.response_metadata, chunk.response_metadata)\n        });\n    }\n}\n/**\n * Represents an AI message in a conversation.\n */ class AIMessage extends BaseMessage {\n    static lc_name() {\n        return \"AIMessage\";\n    }\n    _getType() {\n        return \"ai\";\n    }\n}\n/**\n * Represents a chunk of an AI message, which can be concatenated with\n * other AI message chunks.\n */ class AIMessageChunk extends BaseMessageChunk {\n    static lc_name() {\n        return \"AIMessageChunk\";\n    }\n    _getType() {\n        return \"ai\";\n    }\n    concat(chunk) {\n        return new AIMessageChunk({\n            content: mergeContent(this.content, chunk.content),\n            additional_kwargs: _mergeDicts(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: _mergeDicts(this.response_metadata, chunk.response_metadata)\n        });\n    }\n}\n/**\n * Represents a system message in a conversation.\n */ class SystemMessage extends BaseMessage {\n    static lc_name() {\n        return \"SystemMessage\";\n    }\n    _getType() {\n        return \"system\";\n    }\n}\n/**\n * Represents a chunk of a system message, which can be concatenated with\n * other system message chunks.\n */ class SystemMessageChunk extends BaseMessageChunk {\n    static lc_name() {\n        return \"SystemMessageChunk\";\n    }\n    _getType() {\n        return \"system\";\n    }\n    concat(chunk) {\n        return new SystemMessageChunk({\n            content: mergeContent(this.content, chunk.content),\n            additional_kwargs: _mergeDicts(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: _mergeDicts(this.response_metadata, chunk.response_metadata)\n        });\n    }\n}\n/**\n * Represents a function message in a conversation.\n */ class FunctionMessage extends BaseMessage {\n    static lc_name() {\n        return \"FunctionMessage\";\n    }\n    constructor(fields, /** @deprecated */ name){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign, @typescript-eslint/no-non-null-assertion\n            fields = {\n                content: fields,\n                name: name\n            };\n        }\n        super(fields);\n    }\n    _getType() {\n        return \"function\";\n    }\n}\n/**\n * Represents a chunk of a function message, which can be concatenated\n * with other function message chunks.\n */ class FunctionMessageChunk extends BaseMessageChunk {\n    static lc_name() {\n        return \"FunctionMessageChunk\";\n    }\n    _getType() {\n        return \"function\";\n    }\n    concat(chunk) {\n        return new FunctionMessageChunk({\n            content: mergeContent(this.content, chunk.content),\n            additional_kwargs: _mergeDicts(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: _mergeDicts(this.response_metadata, chunk.response_metadata),\n            name: this.name ?? \"\"\n        });\n    }\n}\n/**\n * Represents a tool message in a conversation.\n */ class ToolMessage extends BaseMessage {\n    static lc_name() {\n        return \"ToolMessage\";\n    }\n    get lc_aliases() {\n        // exclude snake case conversion to pascal case\n        return {\n            tool_call_id: \"tool_call_id\"\n        };\n    }\n    constructor(fields, tool_call_id, name){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign, @typescript-eslint/no-non-null-assertion\n            fields = {\n                content: fields,\n                name,\n                tool_call_id: tool_call_id\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"tool_call_id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.tool_call_id = fields.tool_call_id;\n    }\n    _getType() {\n        return \"tool\";\n    }\n    static isInstance(message) {\n        return message._getType() === \"tool\";\n    }\n}\n/**\n * Represents a chunk of a tool message, which can be concatenated\n * with other tool message chunks.\n */ class ToolMessageChunk extends BaseMessageChunk {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"tool_call_id\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.tool_call_id = fields.tool_call_id;\n    }\n    static lc_name() {\n        return \"ToolMessageChunk\";\n    }\n    _getType() {\n        return \"tool\";\n    }\n    concat(chunk) {\n        return new ToolMessageChunk({\n            content: mergeContent(this.content, chunk.content),\n            additional_kwargs: _mergeDicts(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: _mergeDicts(this.response_metadata, chunk.response_metadata),\n            tool_call_id: this.tool_call_id\n        });\n    }\n}\n/**\n * Represents a chat message in a conversation.\n */ class ChatMessage extends BaseMessage {\n    static lc_name() {\n        return \"ChatMessage\";\n    }\n    static _chatMessageClass() {\n        return ChatMessage;\n    }\n    constructor(fields, role){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign, @typescript-eslint/no-non-null-assertion\n            fields = {\n                content: fields,\n                role: role\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"role\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.role = fields.role;\n    }\n    _getType() {\n        return \"generic\";\n    }\n    static isInstance(message) {\n        return message._getType() === \"generic\";\n    }\n}\nfunction isBaseMessage(messageLike) {\n    return typeof messageLike?._getType === \"function\";\n}\nfunction isBaseMessageChunk(messageLike) {\n    return isBaseMessage(messageLike) && typeof messageLike.concat === \"function\";\n}\nfunction coerceMessageLikeToMessage(messageLike) {\n    if (typeof messageLike === \"string\") {\n        return new HumanMessage(messageLike);\n    } else if (isBaseMessage(messageLike)) {\n        return messageLike;\n    }\n    const [type, content] = messageLike;\n    if (type === \"human\" || type === \"user\") {\n        return new HumanMessage({\n            content\n        });\n    } else if (type === \"ai\" || type === \"assistant\") {\n        return new AIMessage({\n            content\n        });\n    } else if (type === \"system\") {\n        return new SystemMessage({\n            content\n        });\n    } else {\n        throw new Error(`Unable to coerce message from array: only human, AI, or system message coercion is currently supported.`);\n    }\n}\n/**\n * Represents a chunk of a chat message, which can be concatenated with\n * other chat message chunks.\n */ class ChatMessageChunk extends BaseMessageChunk {\n    static lc_name() {\n        return \"ChatMessageChunk\";\n    }\n    constructor(fields, role){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign, @typescript-eslint/no-non-null-assertion\n            fields = {\n                content: fields,\n                role: role\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"role\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.role = fields.role;\n    }\n    _getType() {\n        return \"generic\";\n    }\n    concat(chunk) {\n        return new ChatMessageChunk({\n            content: mergeContent(this.content, chunk.content),\n            additional_kwargs: _mergeDicts(this.additional_kwargs, chunk.additional_kwargs),\n            response_metadata: _mergeDicts(this.response_metadata, chunk.response_metadata),\n            role: this.role\n        });\n    }\n}\n/**\n * This function is used by memory classes to get a string representation\n * of the chat message history, based on the message content and role.\n */ function getBufferString(messages, humanPrefix = \"Human\", aiPrefix = \"AI\") {\n    const string_messages = [];\n    for (const m of messages){\n        let role;\n        if (m._getType() === \"human\") {\n            role = humanPrefix;\n        } else if (m._getType() === \"ai\") {\n            role = aiPrefix;\n        } else if (m._getType() === \"system\") {\n            role = \"System\";\n        } else if (m._getType() === \"function\") {\n            role = \"Function\";\n        } else if (m._getType() === \"tool\") {\n            role = \"Tool\";\n        } else if (m._getType() === \"generic\") {\n            role = m.role;\n        } else {\n            throw new Error(`Got unsupported message type: ${m._getType()}`);\n        }\n        const nameStr = m.name ? `${m.name}, ` : \"\";\n        string_messages.push(`${role}: ${nameStr}${m.content}`);\n    }\n    return string_messages.join(\"\\n\");\n}\n/**\n * Maps messages from an older format (V1) to the current `StoredMessage`\n * format. If the message is already in the `StoredMessage` format, it is\n * returned as is. Otherwise, it transforms the V1 message into a\n * `StoredMessage`. This function is important for maintaining\n * compatibility with older message formats.\n */ function mapV1MessageToStoredMessage(message) {\n    // TODO: Remove this mapper when we deprecate the old message format.\n    if (message.data !== undefined) {\n        return message;\n    } else {\n        const v1Message = message;\n        return {\n            type: v1Message.type,\n            data: {\n                content: v1Message.text,\n                role: v1Message.role,\n                name: undefined,\n                tool_call_id: undefined\n            }\n        };\n    }\n}\nfunction mapStoredMessageToChatMessage(message) {\n    const storedMessage = mapV1MessageToStoredMessage(message);\n    switch(storedMessage.type){\n        case \"human\":\n            return new HumanMessage(storedMessage.data);\n        case \"ai\":\n            return new AIMessage(storedMessage.data);\n        case \"system\":\n            return new SystemMessage(storedMessage.data);\n        case \"function\":\n            if (storedMessage.data.name === undefined) {\n                throw new Error(\"Name must be defined for function messages\");\n            }\n            return new FunctionMessage(storedMessage.data);\n        case \"tool\":\n            if (storedMessage.data.tool_call_id === undefined) {\n                throw new Error(\"Tool call ID must be defined for tool messages\");\n            }\n            return new ToolMessage(storedMessage.data);\n        case \"chat\":\n            {\n                if (storedMessage.data.role === undefined) {\n                    throw new Error(\"Role must be defined for chat messages\");\n                }\n                return new ChatMessage(storedMessage.data);\n            }\n        default:\n            throw new Error(`Got unexpected type: ${storedMessage.type}`);\n    }\n}\n/**\n * Transforms an array of `StoredMessage` instances into an array of\n * `BaseMessage` instances. It uses the `mapV1MessageToStoredMessage`\n * function to ensure all messages are in the `StoredMessage` format, then\n * creates new instances of the appropriate `BaseMessage` subclass based\n * on the type of each message. This function is used to prepare stored\n * messages for use in a chat context.\n */ function mapStoredMessagesToChatMessages(messages) {\n    return messages.map(mapStoredMessageToChatMessage);\n}\n/**\n * Transforms an array of `BaseMessage` instances into an array of\n * `StoredMessage` instances. It does this by calling the `toDict` method\n * on each `BaseMessage`, which returns a `StoredMessage`. This function\n * is used to prepare chat messages for storage.\n */ function mapChatMessagesToStoredMessages(messages) {\n    return messages.map((message)=>message.toDict());\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvbWVzc2FnZXMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF1RDtBQUN2RCxTQUFTQyxhQUFhQyxZQUFZLEVBQUVDLGFBQWE7SUFDN0MsK0JBQStCO0lBQy9CLElBQUksT0FBT0QsaUJBQWlCLFVBQVU7UUFDbEMsSUFBSSxPQUFPQyxrQkFBa0IsVUFBVTtZQUNuQyxPQUFPRCxlQUFlQztRQUMxQixPQUNLO1lBQ0QsT0FBTztnQkFBQztvQkFBRUMsTUFBTTtvQkFBUUMsTUFBTUg7Z0JBQWE7bUJBQU1DO2FBQWM7UUFDbkU7SUFDQSxxQkFBcUI7SUFDekIsT0FDSyxJQUFJRyxNQUFNQyxPQUFPLENBQUNKLGdCQUFnQjtRQUNuQyxPQUFPO2VBQUlEO2VBQWlCQztTQUFjO0lBQzFDLHdEQUF3RDtJQUM1RCxPQUNLO1FBQ0QsaUVBQWlFO1FBQ2pFLE9BQU87ZUFBSUQ7WUFBYztnQkFBRUUsTUFBTTtnQkFBUUMsTUFBTUY7WUFBYztTQUFFO0lBQ25FO0FBQ0o7QUFDQTs7OztDQUlDLEdBQ00sTUFBTUssb0JBQW9CUiwrREFBWUE7SUFDekMsSUFBSVMsYUFBYTtRQUNiLCtDQUErQztRQUMvQyxPQUFPO1lBQ0hDLG1CQUFtQjtZQUNuQkMsbUJBQW1CO1FBQ3ZCO0lBQ0o7SUFDQTs7O0tBR0MsR0FDRCxJQUFJTixPQUFPO1FBQ1AsT0FBTyxPQUFPLElBQUksQ0FBQ08sT0FBTyxLQUFLLFdBQVcsSUFBSSxDQUFDQSxPQUFPLEdBQUc7SUFDN0Q7SUFDQUMsWUFBWUMsTUFBTSxFQUNsQixnQkFBZ0IsR0FDaEJDLE1BQU0sQ0FBRTtRQUNKLElBQUksT0FBT0QsV0FBVyxVQUFVO1lBQzVCLDZDQUE2QztZQUM3Q0EsU0FBUztnQkFDTEYsU0FBU0U7Z0JBQ1RKLG1CQUFtQks7Z0JBQ25CSixtQkFBbUIsQ0FBQztZQUN4QjtRQUNKO1FBQ0EsNkZBQTZGO1FBQzdGLElB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LWZvcm0tYnVpbGRlci10dXRvcmlhbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9tZXNzYWdlcy9pbmRleC5qcz9iMWM4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNlcmlhbGl6YWJsZSB9IGZyb20gXCIuLi9sb2FkL3NlcmlhbGl6YWJsZS5qc1wiO1xuZnVuY3Rpb24gbWVyZ2VDb250ZW50KGZpcnN0Q29udGVudCwgc2Vjb25kQ29udGVudCkge1xuICAgIC8vIElmIGZpcnN0IGNvbnRlbnQgaXMgYSBzdHJpbmdcbiAgICBpZiAodHlwZW9mIGZpcnN0Q29udGVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBpZiAodHlwZW9mIHNlY29uZENvbnRlbnQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBmaXJzdENvbnRlbnQgKyBzZWNvbmRDb250ZW50O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFt7IHR5cGU6IFwidGV4dFwiLCB0ZXh0OiBmaXJzdENvbnRlbnQgfSwgLi4uc2Vjb25kQ29udGVudF07XG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgYm90aCBhcmUgYXJyYXlzXG4gICAgfVxuICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoc2Vjb25kQ29udGVudCkpIHtcbiAgICAgICAgcmV0dXJuIFsuLi5maXJzdENvbnRlbnQsIC4uLnNlY29uZENvbnRlbnRdO1xuICAgICAgICAvLyBJZiB0aGUgZmlyc3QgY29udGVudCBpcyBhIGxpc3QgYW5kIHNlY29uZCBpcyBhIHN0cmluZ1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gT3RoZXJ3aXNlLCBhZGQgdGhlIHNlY29uZCBjb250ZW50IGFzIGEgbmV3IGVsZW1lbnQgb2YgdGhlIGxpc3RcbiAgICAgICAgcmV0dXJuIFsuLi5maXJzdENvbnRlbnQsIHsgdHlwZTogXCJ0ZXh0XCIsIHRleHQ6IHNlY29uZENvbnRlbnQgfV07XG4gICAgfVxufVxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBhbGwgdHlwZXMgb2YgbWVzc2FnZXMgaW4gYSBjb252ZXJzYXRpb24uIEl0IGluY2x1ZGVzXG4gKiBwcm9wZXJ0aWVzIGxpa2UgYGNvbnRlbnRgLCBgbmFtZWAsIGFuZCBgYWRkaXRpb25hbF9rd2FyZ3NgLiBJdCBhbHNvXG4gKiBpbmNsdWRlcyBtZXRob2RzIGxpa2UgYHRvRGljdCgpYCBhbmQgYF9nZXRUeXBlKClgLlxuICovXG5leHBvcnQgY2xhc3MgQmFzZU1lc3NhZ2UgZXh0ZW5kcyBTZXJpYWxpemFibGUge1xuICAgIGdldCBsY19hbGlhc2VzKCkge1xuICAgICAgICAvLyBleGNsdWRlIHNuYWtlIGNhc2UgY29udmVyc2lvbiB0byBwYXNjYWwgY2FzZVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3M6IFwiYWRkaXRpb25hbF9rd2FyZ3NcIixcbiAgICAgICAgICAgIHJlc3BvbnNlX21ldGFkYXRhOiBcInJlc3BvbnNlX21ldGFkYXRhXCIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkXG4gICAgICogVXNlIHtAbGluayBCYXNlTWVzc2FnZS5jb250ZW50fSBpbnN0ZWFkLlxuICAgICAqL1xuICAgIGdldCB0ZXh0KCkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHRoaXMuY29udGVudCA9PT0gXCJzdHJpbmdcIiA/IHRoaXMuY29udGVudCA6IFwiXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcywgXG4gICAgLyoqIEBkZXByZWNhdGVkICovXG4gICAga3dhcmdzKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZmllbGRzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGZpZWxkcyA9IHtcbiAgICAgICAgICAgICAgICBjb250ZW50OiBmaWVsZHMsXG4gICAgICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3M6IGt3YXJncyxcbiAgICAgICAgICAgICAgICByZXNwb25zZV9tZXRhZGF0YToge30sXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0aGUgZGVmYXVsdCB2YWx1ZSBmb3IgYWRkaXRpb25hbF9rd2FyZ3MgaXMgcGFzc2VkIGludG8gc3VwZXIoKSBmb3Igc2VyaWFsaXphdGlvblxuICAgICAgICBpZiAoIWZpZWxkcy5hZGRpdGlvbmFsX2t3YXJncykge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgICBmaWVsZHMuYWRkaXRpb25hbF9rd2FyZ3MgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWZpZWxkcy5yZXNwb25zZV9tZXRhZGF0YSkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgICBmaWVsZHMucmVzcG9uc2VfbWV0YWRhdGEgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwibWVzc2FnZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgLyoqIFRoZSBjb250ZW50IG9mIHRoZSBtZXNzYWdlLiAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjb250ZW50XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIC8qKiBUaGUgbmFtZSBvZiB0aGUgbWVzc2FnZSBzZW5kZXIgaW4gYSBtdWx0aS11c2VyIGNoYXQuICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgLyoqIEFkZGl0aW9uYWwga2V5d29yZCBhcmd1bWVudHMgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYWRkaXRpb25hbF9rd2FyZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgLyoqIFJlc3BvbnNlIG1ldGFkYXRhLiBGb3IgZXhhbXBsZTogcmVzcG9uc2UgaGVhZGVycywgbG9ncHJvYnMsIHRva2VuIGNvdW50cy4gKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicmVzcG9uc2VfbWV0YWRhdGFcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5uYW1lID0gZmllbGRzLm5hbWU7XG4gICAgICAgIHRoaXMuY29udGVudCA9IGZpZWxkcy5jb250ZW50O1xuICAgICAgICB0aGlzLmFkZGl0aW9uYWxfa3dhcmdzID0gZmllbGRzLmFkZGl0aW9uYWxfa3dhcmdzO1xuICAgICAgICB0aGlzLnJlc3BvbnNlX21ldGFkYXRhID0gZmllbGRzLnJlc3BvbnNlX21ldGFkYXRhO1xuICAgIH1cbiAgICB0b0RpY3QoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiB0aGlzLl9nZXRUeXBlKCksXG4gICAgICAgICAgICBkYXRhOiB0aGlzLnRvSlNPTigpXG4gICAgICAgICAgICAgICAgLmt3YXJncyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgdG9DaHVuaygpIHtcbiAgICAgICAgY29uc3QgdHlwZSA9IHRoaXMuX2dldFR5cGUoKTtcbiAgICAgICAgaWYgKHR5cGUgPT09IFwiaHVtYW5cIikge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBIdW1hbk1lc3NhZ2VDaHVuayh7IC4uLnRoaXMgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gXCJhaVwiKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgICAgICByZXR1cm4gbmV3IEFJTWVzc2FnZUNodW5rKHsgLi4udGhpcyB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlID09PSBcInN5c3RlbVwiKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgICAgICByZXR1cm4gbmV3IFN5c3RlbU1lc3NhZ2VDaHVuayh7IC4uLnRoaXMgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgICAgICByZXR1cm4gbmV3IEZ1bmN0aW9uTWVzc2FnZUNodW5rKHsgLi4udGhpcyB9KTtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChDaGF0TWVzc2FnZS5pc0luc3RhbmNlKHRoaXMpKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgICAgICByZXR1cm4gbmV3IENoYXRNZXNzYWdlQ2h1bmsoeyAuLi50aGlzIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBtZXNzYWdlIHR5cGUuXCIpO1xuICAgICAgICB9XG4gICAgfVxufVxuZnVuY3Rpb24gaXNPcGVuQUlUb29sQ2FsbEFycmF5KHZhbHVlKSB7XG4gICAgcmV0dXJuIChBcnJheS5pc0FycmF5KHZhbHVlKSAmJlxuICAgICAgICB2YWx1ZS5ldmVyeSgodikgPT4gdHlwZW9mIHYuaW5kZXggPT09IFwibnVtYmVyXCIpKTtcbn1cbmZ1bmN0aW9uIF9tZXJnZURpY3RzKFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmxlZnQsIFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbnJpZ2h0XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuKSB7XG4gICAgY29uc3QgbWVyZ2VkID0geyAuLi5sZWZ0IH07XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocmlnaHQpKSB7XG4gICAgICAgIGlmIChtZXJnZWRba2V5XSA9PSBudWxsKSB7XG4gICAgICAgICAgICBtZXJnZWRba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBtZXJnZWRba2V5XSAhPT0gdHlwZW9mIHZhbHVlIHx8XG4gICAgICAgICAgICBBcnJheS5pc0FycmF5KG1lcmdlZFtrZXldKSAhPT0gQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgZmllbGRbJHtrZXl9XSBhbHJlYWR5IGV4aXN0cyBpbiB0aGUgbWVzc2FnZSBjaHVuaywgYnV0IHdpdGggYSBkaWZmZXJlbnQgdHlwZS5gKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgbWVyZ2VkW2tleV0gPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIG1lcmdlZFtrZXldID0gbWVyZ2VkW2tleV0gKyB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghQXJyYXkuaXNBcnJheShtZXJnZWRba2V5XSkgJiYgdHlwZW9mIG1lcmdlZFtrZXldID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICBtZXJnZWRba2V5XSA9IF9tZXJnZURpY3RzKG1lcmdlZFtrZXldLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoa2V5ID09PSBcInRvb2xfY2FsbHNcIiAmJlxuICAgICAgICAgICAgaXNPcGVuQUlUb29sQ2FsbEFycmF5KG1lcmdlZFtrZXldKSAmJlxuICAgICAgICAgICAgaXNPcGVuQUlUb29sQ2FsbEFycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB0b29sQ2FsbCBvZiB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmIChtZXJnZWRba2V5XT8uW3Rvb2xDYWxsLmluZGV4XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgIG1lcmdlZFtrZXldID0gbWVyZ2VkW2tleV0/Lm1hcCgodmFsdWUsIGkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICE9PSB0b29sQ2FsbC5pbmRleCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4udmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4udG9vbENhbGwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb246IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogdG9vbENhbGwuZnVuY3Rpb24ubmFtZSA/PyB2YWx1ZS5mdW5jdGlvbi5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHM6ICh2YWx1ZS5mdW5jdGlvbi5hcmd1bWVudHMgPz8gXCJcIikgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRvb2xDYWxsLmZ1bmN0aW9uLmFyZ3VtZW50cyA/PyBcIlwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtZXJnZWRba2V5XVt0b29sQ2FsbC5pbmRleF0gPSB0b29sQ2FsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShtZXJnZWRba2V5XSkpIHtcbiAgICAgICAgICAgIG1lcmdlZFtrZXldID0gbWVyZ2VkW2tleV0uY29uY2F0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtZXJnZWRba2V5XSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGBmaWVsZFske2tleX1dIGFscmVhZHkgZXhpc3RzIGluIHRoaXMgbWVzc2FnZSBjaHVuayBhbmQgdmFsdWUgaGFzIHVuc3VwcG9ydGVkIHR5cGUuYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lcmdlZDtcbn1cbi8qKlxuICogUmVwcmVzZW50cyBhIGNodW5rIG9mIGEgbWVzc2FnZSwgd2hpY2ggY2FuIGJlIGNvbmNhdGVuYXRlZCB3aXRoIG90aGVyXG4gKiBtZXNzYWdlIGNodW5rcy4gSXQgaW5jbHVkZXMgYSBtZXRob2QgYF9tZXJnZV9rd2FyZ3NfZGljdCgpYCBmb3IgbWVyZ2luZ1xuICogYWRkaXRpb25hbCBrZXl3b3JkIGFyZ3VtZW50cyBmcm9tIGFub3RoZXIgYEJhc2VNZXNzYWdlQ2h1bmtgIGludG8gdGhpc1xuICogb25lLiBJdCBhbHNvIG92ZXJyaWRlcyB0aGUgYF9fYWRkX18oKWAgbWV0aG9kIHRvIHN1cHBvcnQgY29uY2F0ZW5hdGlvblxuICogb2YgYEJhc2VNZXNzYWdlQ2h1bmtgIGluc3RhbmNlcy5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VNZXNzYWdlQ2h1bmsgZXh0ZW5kcyBCYXNlTWVzc2FnZSB7XG59XG4vKipcbiAqIFJlcHJlc2VudHMgYSBodW1hbiBtZXNzYWdlIGluIGEgY29udmVyc2F0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgSHVtYW5NZXNzYWdlIGV4dGVuZHMgQmFzZU1lc3NhZ2Uge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJIdW1hbk1lc3NhZ2VcIjtcbiAgICB9XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImh1bWFuXCI7XG4gICAgfVxufVxuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2h1bmsgb2YgYSBodW1hbiBtZXNzYWdlLCB3aGljaCBjYW4gYmUgY29uY2F0ZW5hdGVkIHdpdGhcbiAqIG90aGVyIGh1bWFuIG1lc3NhZ2UgY2h1bmtzLlxuICovXG5leHBvcnQgY2xhc3MgSHVtYW5NZXNzYWdlQ2h1bmsgZXh0ZW5kcyBCYXNlTWVzc2FnZUNodW5rIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiSHVtYW5NZXNzYWdlQ2h1bmtcIjtcbiAgICB9XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImh1bWFuXCI7XG4gICAgfVxuICAgIGNvbmNhdChjaHVuaykge1xuICAgICAgICByZXR1cm4gbmV3IEh1bWFuTWVzc2FnZUNodW5rKHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IG1lcmdlQ29udGVudCh0aGlzLmNvbnRlbnQsIGNodW5rLmNvbnRlbnQpLFxuICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3M6IF9tZXJnZURpY3RzKHRoaXMuYWRkaXRpb25hbF9rd2FyZ3MsIGNodW5rLmFkZGl0aW9uYWxfa3dhcmdzKSxcbiAgICAgICAgICAgIHJlc3BvbnNlX21ldGFkYXRhOiBfbWVyZ2VEaWN0cyh0aGlzLnJlc3BvbnNlX21ldGFkYXRhLCBjaHVuay5yZXNwb25zZV9tZXRhZGF0YSksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8qKlxuICogUmVwcmVzZW50cyBhbiBBSSBtZXNzYWdlIGluIGEgY29udmVyc2F0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgQUlNZXNzYWdlIGV4dGVuZHMgQmFzZU1lc3NhZ2Uge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJBSU1lc3NhZ2VcIjtcbiAgICB9XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImFpXCI7XG4gICAgfVxufVxuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2h1bmsgb2YgYW4gQUkgbWVzc2FnZSwgd2hpY2ggY2FuIGJlIGNvbmNhdGVuYXRlZCB3aXRoXG4gKiBvdGhlciBBSSBtZXNzYWdlIGNodW5rcy5cbiAqL1xuZXhwb3J0IGNsYXNzIEFJTWVzc2FnZUNodW5rIGV4dGVuZHMgQmFzZU1lc3NhZ2VDaHVuayB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkFJTWVzc2FnZUNodW5rXCI7XG4gICAgfVxuICAgIF9nZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJhaVwiO1xuICAgIH1cbiAgICBjb25jYXQoY2h1bmspIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBSU1lc3NhZ2VDaHVuayh7XG4gICAgICAgICAgICBjb250ZW50OiBtZXJnZUNvbnRlbnQodGhpcy5jb250ZW50LCBjaHVuay5jb250ZW50KSxcbiAgICAgICAgICAgIGFkZGl0aW9uYWxfa3dhcmdzOiBfbWVyZ2VEaWN0cyh0aGlzLmFkZGl0aW9uYWxfa3dhcmdzLCBjaHVuay5hZGRpdGlvbmFsX2t3YXJncyksXG4gICAgICAgICAgICByZXNwb25zZV9tZXRhZGF0YTogX21lcmdlRGljdHModGhpcy5yZXNwb25zZV9tZXRhZGF0YSwgY2h1bmsucmVzcG9uc2VfbWV0YWRhdGEpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4vKipcbiAqIFJlcHJlc2VudHMgYSBzeXN0ZW0gbWVzc2FnZSBpbiBhIGNvbnZlcnNhdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIFN5c3RlbU1lc3NhZ2UgZXh0ZW5kcyBCYXNlTWVzc2FnZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlN5c3RlbU1lc3NhZ2VcIjtcbiAgICB9XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcInN5c3RlbVwiO1xuICAgIH1cbn1cbi8qKlxuICogUmVwcmVzZW50cyBhIGNodW5rIG9mIGEgc3lzdGVtIG1lc3NhZ2UsIHdoaWNoIGNhbiBiZSBjb25jYXRlbmF0ZWQgd2l0aFxuICogb3RoZXIgc3lzdGVtIG1lc3NhZ2UgY2h1bmtzLlxuICovXG5leHBvcnQgY2xhc3MgU3lzdGVtTWVzc2FnZUNodW5rIGV4dGVuZHMgQmFzZU1lc3NhZ2VDaHVuayB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlN5c3RlbU1lc3NhZ2VDaHVua1wiO1xuICAgIH1cbiAgICBfZ2V0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwic3lzdGVtXCI7XG4gICAgfVxuICAgIGNvbmNhdChjaHVuaykge1xuICAgICAgICByZXR1cm4gbmV3IFN5c3RlbU1lc3NhZ2VDaHVuayh7XG4gICAgICAgICAgICBjb250ZW50OiBtZXJnZUNvbnRlbnQodGhpcy5jb250ZW50LCBjaHVuay5jb250ZW50KSxcbiAgICAgICAgICAgIGFkZGl0aW9uYWxfa3dhcmdzOiBfbWVyZ2VEaWN0cyh0aGlzLmFkZGl0aW9uYWxfa3dhcmdzLCBjaHVuay5hZGRpdGlvbmFsX2t3YXJncyksXG4gICAgICAgICAgICByZXNwb25zZV9tZXRhZGF0YTogX21lcmdlRGljdHModGhpcy5yZXNwb25zZV9tZXRhZGF0YSwgY2h1bmsucmVzcG9uc2VfbWV0YWRhdGEpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4vKipcbiAqIFJlcHJlc2VudHMgYSBmdW5jdGlvbiBtZXNzYWdlIGluIGEgY29udmVyc2F0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgRnVuY3Rpb25NZXNzYWdlIGV4dGVuZHMgQmFzZU1lc3NhZ2Uge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJGdW5jdGlvbk1lc3NhZ2VcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzLCBcbiAgICAvKiogQGRlcHJlY2F0ZWQgKi9cbiAgICBuYW1lKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZmllbGRzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ24sIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgIGZpZWxkcyA9IHsgY29udGVudDogZmllbGRzLCBuYW1lOiBuYW1lIH07XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICB9XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImZ1bmN0aW9uXCI7XG4gICAgfVxufVxuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2h1bmsgb2YgYSBmdW5jdGlvbiBtZXNzYWdlLCB3aGljaCBjYW4gYmUgY29uY2F0ZW5hdGVkXG4gKiB3aXRoIG90aGVyIGZ1bmN0aW9uIG1lc3NhZ2UgY2h1bmtzLlxuICovXG5leHBvcnQgY2xhc3MgRnVuY3Rpb25NZXNzYWdlQ2h1bmsgZXh0ZW5kcyBCYXNlTWVzc2FnZUNodW5rIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiRnVuY3Rpb25NZXNzYWdlQ2h1bmtcIjtcbiAgICB9XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImZ1bmN0aW9uXCI7XG4gICAgfVxuICAgIGNvbmNhdChjaHVuaykge1xuICAgICAgICByZXR1cm4gbmV3IEZ1bmN0aW9uTWVzc2FnZUNodW5rKHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IG1lcmdlQ29udGVudCh0aGlzLmNvbnRlbnQsIGNodW5rLmNvbnRlbnQpLFxuICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3M6IF9tZXJnZURpY3RzKHRoaXMuYWRkaXRpb25hbF9rd2FyZ3MsIGNodW5rLmFkZGl0aW9uYWxfa3dhcmdzKSxcbiAgICAgICAgICAgIHJlc3BvbnNlX21ldGFkYXRhOiBfbWVyZ2VEaWN0cyh0aGlzLnJlc3BvbnNlX21ldGFkYXRhLCBjaHVuay5yZXNwb25zZV9tZXRhZGF0YSksXG4gICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUgPz8gXCJcIixcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLyoqXG4gKiBSZXByZXNlbnRzIGEgdG9vbCBtZXNzYWdlIGluIGEgY29udmVyc2F0aW9uLlxuICovXG5leHBvcnQgY2xhc3MgVG9vbE1lc3NhZ2UgZXh0ZW5kcyBCYXNlTWVzc2FnZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlRvb2xNZXNzYWdlXCI7XG4gICAgfVxuICAgIGdldCBsY19hbGlhc2VzKCkge1xuICAgICAgICAvLyBleGNsdWRlIHNuYWtlIGNhc2UgY29udmVyc2lvbiB0byBwYXNjYWwgY2FzZVxuICAgICAgICByZXR1cm4geyB0b29sX2NhbGxfaWQ6IFwidG9vbF9jYWxsX2lkXCIgfTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzLCB0b29sX2NhbGxfaWQsIG5hbWUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBmaWVsZHMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnbiwgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICAgICAgZmllbGRzID0geyBjb250ZW50OiBmaWVsZHMsIG5hbWUsIHRvb2xfY2FsbF9pZDogdG9vbF9jYWxsX2lkIH07XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidG9vbF9jYWxsX2lkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudG9vbF9jYWxsX2lkID0gZmllbGRzLnRvb2xfY2FsbF9pZDtcbiAgICB9XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcInRvb2xcIjtcbiAgICB9XG4gICAgc3RhdGljIGlzSW5zdGFuY2UobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gbWVzc2FnZS5fZ2V0VHlwZSgpID09PSBcInRvb2xcIjtcbiAgICB9XG59XG4vKipcbiAqIFJlcHJlc2VudHMgYSBjaHVuayBvZiBhIHRvb2wgbWVzc2FnZSwgd2hpY2ggY2FuIGJlIGNvbmNhdGVuYXRlZFxuICogd2l0aCBvdGhlciB0b29sIG1lc3NhZ2UgY2h1bmtzLlxuICovXG5leHBvcnQgY2xhc3MgVG9vbE1lc3NhZ2VDaHVuayBleHRlbmRzIEJhc2VNZXNzYWdlQ2h1bmsge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0b29sX2NhbGxfaWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy50b29sX2NhbGxfaWQgPSBmaWVsZHMudG9vbF9jYWxsX2lkO1xuICAgIH1cbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiVG9vbE1lc3NhZ2VDaHVua1wiO1xuICAgIH1cbiAgICBfZ2V0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwidG9vbFwiO1xuICAgIH1cbiAgICBjb25jYXQoY2h1bmspIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUb29sTWVzc2FnZUNodW5rKHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IG1lcmdlQ29udGVudCh0aGlzLmNvbnRlbnQsIGNodW5rLmNvbnRlbnQpLFxuICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3M6IF9tZXJnZURpY3RzKHRoaXMuYWRkaXRpb25hbF9rd2FyZ3MsIGNodW5rLmFkZGl0aW9uYWxfa3dhcmdzKSxcbiAgICAgICAgICAgIHJlc3BvbnNlX21ldGFkYXRhOiBfbWVyZ2VEaWN0cyh0aGlzLnJlc3BvbnNlX21ldGFkYXRhLCBjaHVuay5yZXNwb25zZV9tZXRhZGF0YSksXG4gICAgICAgICAgICB0b29sX2NhbGxfaWQ6IHRoaXMudG9vbF9jYWxsX2lkLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4vKipcbiAqIFJlcHJlc2VudHMgYSBjaGF0IG1lc3NhZ2UgaW4gYSBjb252ZXJzYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBDaGF0TWVzc2FnZSBleHRlbmRzIEJhc2VNZXNzYWdlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiQ2hhdE1lc3NhZ2VcIjtcbiAgICB9XG4gICAgc3RhdGljIF9jaGF0TWVzc2FnZUNsYXNzKCkge1xuICAgICAgICByZXR1cm4gQ2hhdE1lc3NhZ2U7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcywgcm9sZSkge1xuICAgICAgICBpZiAodHlwZW9mIGZpZWxkcyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduLCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgICAgICBmaWVsZHMgPSB7IGNvbnRlbnQ6IGZpZWxkcywgcm9sZTogcm9sZSB9O1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJvbGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5yb2xlID0gZmllbGRzLnJvbGU7XG4gICAgfVxuICAgIF9nZXRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJnZW5lcmljXCI7XG4gICAgfVxuICAgIHN0YXRpYyBpc0luc3RhbmNlKG1lc3NhZ2UpIHtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2UuX2dldFR5cGUoKSA9PT0gXCJnZW5lcmljXCI7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQmFzZU1lc3NhZ2UobWVzc2FnZUxpa2UpIHtcbiAgICByZXR1cm4gdHlwZW9mIG1lc3NhZ2VMaWtlPy5fZ2V0VHlwZSA9PT0gXCJmdW5jdGlvblwiO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzQmFzZU1lc3NhZ2VDaHVuayhtZXNzYWdlTGlrZSkge1xuICAgIHJldHVybiAoaXNCYXNlTWVzc2FnZShtZXNzYWdlTGlrZSkgJiZcbiAgICAgICAgdHlwZW9mIG1lc3NhZ2VMaWtlLmNvbmNhdCA9PT0gXCJmdW5jdGlvblwiKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBjb2VyY2VNZXNzYWdlTGlrZVRvTWVzc2FnZShtZXNzYWdlTGlrZSkge1xuICAgIGlmICh0eXBlb2YgbWVzc2FnZUxpa2UgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBIdW1hbk1lc3NhZ2UobWVzc2FnZUxpa2UpO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0Jhc2VNZXNzYWdlKG1lc3NhZ2VMaWtlKSkge1xuICAgICAgICByZXR1cm4gbWVzc2FnZUxpa2U7XG4gICAgfVxuICAgIGNvbnN0IFt0eXBlLCBjb250ZW50XSA9IG1lc3NhZ2VMaWtlO1xuICAgIGlmICh0eXBlID09PSBcImh1bWFuXCIgfHwgdHlwZSA9PT0gXCJ1c2VyXCIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBIdW1hbk1lc3NhZ2UoeyBjb250ZW50IH0pO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlID09PSBcImFpXCIgfHwgdHlwZSA9PT0gXCJhc3Npc3RhbnRcIikge1xuICAgICAgICByZXR1cm4gbmV3IEFJTWVzc2FnZSh7IGNvbnRlbnQgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgPT09IFwic3lzdGVtXCIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTeXN0ZW1NZXNzYWdlKHsgY29udGVudCB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIGNvZXJjZSBtZXNzYWdlIGZyb20gYXJyYXk6IG9ubHkgaHVtYW4sIEFJLCBvciBzeXN0ZW0gbWVzc2FnZSBjb2VyY2lvbiBpcyBjdXJyZW50bHkgc3VwcG9ydGVkLmApO1xuICAgIH1cbn1cbi8qKlxuICogUmVwcmVzZW50cyBhIGNodW5rIG9mIGEgY2hhdCBtZXNzYWdlLCB3aGljaCBjYW4gYmUgY29uY2F0ZW5hdGVkIHdpdGhcbiAqIG90aGVyIGNoYXQgbWVzc2FnZSBjaHVua3MuXG4gKi9cbmV4cG9ydCBjbGFzcyBDaGF0TWVzc2FnZUNodW5rIGV4dGVuZHMgQmFzZU1lc3NhZ2VDaHVuayB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkNoYXRNZXNzYWdlQ2h1bmtcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzLCByb2xlKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZmllbGRzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ24sIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgIGZpZWxkcyA9IHsgY29udGVudDogZmllbGRzLCByb2xlOiByb2xlIH07XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicm9sZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnJvbGUgPSBmaWVsZHMucm9sZTtcbiAgICB9XG4gICAgX2dldFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImdlbmVyaWNcIjtcbiAgICB9XG4gICAgY29uY2F0KGNodW5rKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ2hhdE1lc3NhZ2VDaHVuayh7XG4gICAgICAgICAgICBjb250ZW50OiBtZXJnZUNvbnRlbnQodGhpcy5jb250ZW50LCBjaHVuay5jb250ZW50KSxcbiAgICAgICAgICAgIGFkZGl0aW9uYWxfa3dhcmdzOiBfbWVyZ2VEaWN0cyh0aGlzLmFkZGl0aW9uYWxfa3dhcmdzLCBjaHVuay5hZGRpdGlvbmFsX2t3YXJncyksXG4gICAgICAgICAgICByZXNwb25zZV9tZXRhZGF0YTogX21lcmdlRGljdHModGhpcy5yZXNwb25zZV9tZXRhZGF0YSwgY2h1bmsucmVzcG9uc2VfbWV0YWRhdGEpLFxuICAgICAgICAgICAgcm9sZTogdGhpcy5yb2xlLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCBieSBtZW1vcnkgY2xhc3NlcyB0byBnZXQgYSBzdHJpbmcgcmVwcmVzZW50YXRpb25cbiAqIG9mIHRoZSBjaGF0IG1lc3NhZ2UgaGlzdG9yeSwgYmFzZWQgb24gdGhlIG1lc3NhZ2UgY29udGVudCBhbmQgcm9sZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEJ1ZmZlclN0cmluZyhtZXNzYWdlcywgaHVtYW5QcmVmaXggPSBcIkh1bWFuXCIsIGFpUHJlZml4ID0gXCJBSVwiKSB7XG4gICAgY29uc3Qgc3RyaW5nX21lc3NhZ2VzID0gW107XG4gICAgZm9yIChjb25zdCBtIG9mIG1lc3NhZ2VzKSB7XG4gICAgICAgIGxldCByb2xlO1xuICAgICAgICBpZiAobS5fZ2V0VHlwZSgpID09PSBcImh1bWFuXCIpIHtcbiAgICAgICAgICAgIHJvbGUgPSBodW1hblByZWZpeDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChtLl9nZXRUeXBlKCkgPT09IFwiYWlcIikge1xuICAgICAgICAgICAgcm9sZSA9IGFpUHJlZml4O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG0uX2dldFR5cGUoKSA9PT0gXCJzeXN0ZW1cIikge1xuICAgICAgICAgICAgcm9sZSA9IFwiU3lzdGVtXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobS5fZ2V0VHlwZSgpID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIHJvbGUgPSBcIkZ1bmN0aW9uXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobS5fZ2V0VHlwZSgpID09PSBcInRvb2xcIikge1xuICAgICAgICAgICAgcm9sZSA9IFwiVG9vbFwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG0uX2dldFR5cGUoKSA9PT0gXCJnZW5lcmljXCIpIHtcbiAgICAgICAgICAgIHJvbGUgPSBtLnJvbGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEdvdCB1bnN1cHBvcnRlZCBtZXNzYWdlIHR5cGU6ICR7bS5fZ2V0VHlwZSgpfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5hbWVTdHIgPSBtLm5hbWUgPyBgJHttLm5hbWV9LCBgIDogXCJcIjtcbiAgICAgICAgc3RyaW5nX21lc3NhZ2VzLnB1c2goYCR7cm9sZX06ICR7bmFtZVN0cn0ke20uY29udGVudH1gKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0cmluZ19tZXNzYWdlcy5qb2luKFwiXFxuXCIpO1xufVxuLyoqXG4gKiBNYXBzIG1lc3NhZ2VzIGZyb20gYW4gb2xkZXIgZm9ybWF0IChWMSkgdG8gdGhlIGN1cnJlbnQgYFN0b3JlZE1lc3NhZ2VgXG4gKiBmb3JtYXQuIElmIHRoZSBtZXNzYWdlIGlzIGFscmVhZHkgaW4gdGhlIGBTdG9yZWRNZXNzYWdlYCBmb3JtYXQsIGl0IGlzXG4gKiByZXR1cm5lZCBhcyBpcy4gT3RoZXJ3aXNlLCBpdCB0cmFuc2Zvcm1zIHRoZSBWMSBtZXNzYWdlIGludG8gYVxuICogYFN0b3JlZE1lc3NhZ2VgLiBUaGlzIGZ1bmN0aW9uIGlzIGltcG9ydGFudCBmb3IgbWFpbnRhaW5pbmdcbiAqIGNvbXBhdGliaWxpdHkgd2l0aCBvbGRlciBtZXNzYWdlIGZvcm1hdHMuXG4gKi9cbmZ1bmN0aW9uIG1hcFYxTWVzc2FnZVRvU3RvcmVkTWVzc2FnZShtZXNzYWdlKSB7XG4gICAgLy8gVE9ETzogUmVtb3ZlIHRoaXMgbWFwcGVyIHdoZW4gd2UgZGVwcmVjYXRlIHRoZSBvbGQgbWVzc2FnZSBmb3JtYXQuXG4gICAgaWYgKG1lc3NhZ2UuZGF0YSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgdjFNZXNzYWdlID0gbWVzc2FnZTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IHYxTWVzc2FnZS50eXBlLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHYxTWVzc2FnZS50ZXh0LFxuICAgICAgICAgICAgICAgIHJvbGU6IHYxTWVzc2FnZS5yb2xlLFxuICAgICAgICAgICAgICAgIG5hbWU6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICB0b29sX2NhbGxfaWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIG1hcFN0b3JlZE1lc3NhZ2VUb0NoYXRNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICBjb25zdCBzdG9yZWRNZXNzYWdlID0gbWFwVjFNZXNzYWdlVG9TdG9yZWRNZXNzYWdlKG1lc3NhZ2UpO1xuICAgIHN3aXRjaCAoc3RvcmVkTWVzc2FnZS50eXBlKSB7XG4gICAgICAgIGNhc2UgXCJodW1hblwiOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBIdW1hbk1lc3NhZ2Uoc3RvcmVkTWVzc2FnZS5kYXRhKTtcbiAgICAgICAgY2FzZSBcImFpXCI6XG4gICAgICAgICAgICByZXR1cm4gbmV3IEFJTWVzc2FnZShzdG9yZWRNZXNzYWdlLmRhdGEpO1xuICAgICAgICBjYXNlIFwic3lzdGVtXCI6XG4gICAgICAgICAgICByZXR1cm4gbmV3IFN5c3RlbU1lc3NhZ2Uoc3RvcmVkTWVzc2FnZS5kYXRhKTtcbiAgICAgICAgY2FzZSBcImZ1bmN0aW9uXCI6XG4gICAgICAgICAgICBpZiAoc3RvcmVkTWVzc2FnZS5kYXRhLm5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5hbWUgbXVzdCBiZSBkZWZpbmVkIGZvciBmdW5jdGlvbiBtZXNzYWdlc1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgRnVuY3Rpb25NZXNzYWdlKHN0b3JlZE1lc3NhZ2UuZGF0YSk7XG4gICAgICAgIGNhc2UgXCJ0b29sXCI6XG4gICAgICAgICAgICBpZiAoc3RvcmVkTWVzc2FnZS5kYXRhLnRvb2xfY2FsbF9pZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVG9vbCBjYWxsIElEIG11c3QgYmUgZGVmaW5lZCBmb3IgdG9vbCBtZXNzYWdlc1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgVG9vbE1lc3NhZ2Uoc3RvcmVkTWVzc2FnZS5kYXRhKTtcbiAgICAgICAgY2FzZSBcImNoYXRcIjoge1xuICAgICAgICAgICAgaWYgKHN0b3JlZE1lc3NhZ2UuZGF0YS5yb2xlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSb2xlIG11c3QgYmUgZGVmaW5lZCBmb3IgY2hhdCBtZXNzYWdlc1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2hhdE1lc3NhZ2Uoc3RvcmVkTWVzc2FnZS5kYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBHb3QgdW5leHBlY3RlZCB0eXBlOiAke3N0b3JlZE1lc3NhZ2UudHlwZX1gKTtcbiAgICB9XG59XG4vKipcbiAqIFRyYW5zZm9ybXMgYW4gYXJyYXkgb2YgYFN0b3JlZE1lc3NhZ2VgIGluc3RhbmNlcyBpbnRvIGFuIGFycmF5IG9mXG4gKiBgQmFzZU1lc3NhZ2VgIGluc3RhbmNlcy4gSXQgdXNlcyB0aGUgYG1hcFYxTWVzc2FnZVRvU3RvcmVkTWVzc2FnZWBcbiAqIGZ1bmN0aW9uIHRvIGVuc3VyZSBhbGwgbWVzc2FnZXMgYXJlIGluIHRoZSBgU3RvcmVkTWVzc2FnZWAgZm9ybWF0LCB0aGVuXG4gKiBjcmVhdGVzIG5ldyBpbnN0YW5jZXMgb2YgdGhlIGFwcHJvcHJpYXRlIGBCYXNlTWVzc2FnZWAgc3ViY2xhc3MgYmFzZWRcbiAqIG9uIHRoZSB0eXBlIG9mIGVhY2ggbWVzc2FnZS4gVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIHByZXBhcmUgc3RvcmVkXG4gKiBtZXNzYWdlcyBmb3IgdXNlIGluIGEgY2hhdCBjb250ZXh0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gbWFwU3RvcmVkTWVzc2FnZXNUb0NoYXRNZXNzYWdlcyhtZXNzYWdlcykge1xuICAgIHJldHVybiBtZXNzYWdlcy5tYXAobWFwU3RvcmVkTWVzc2FnZVRvQ2hhdE1lc3NhZ2UpO1xufVxuLyoqXG4gKiBUcmFuc2Zvcm1zIGFuIGFycmF5IG9mIGBCYXNlTWVzc2FnZWAgaW5zdGFuY2VzIGludG8gYW4gYXJyYXkgb2ZcbiAqIGBTdG9yZWRNZXNzYWdlYCBpbnN0YW5jZXMuIEl0IGRvZXMgdGhpcyBieSBjYWxsaW5nIHRoZSBgdG9EaWN0YCBtZXRob2RcbiAqIG9uIGVhY2ggYEJhc2VNZXNzYWdlYCwgd2hpY2ggcmV0dXJucyBhIGBTdG9yZWRNZXNzYWdlYC4gVGhpcyBmdW5jdGlvblxuICogaXMgdXNlZCB0byBwcmVwYXJlIGNoYXQgbWVzc2FnZXMgZm9yIHN0b3JhZ2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXBDaGF0TWVzc2FnZXNUb1N0b3JlZE1lc3NhZ2VzKG1lc3NhZ2VzKSB7XG4gICAgcmV0dXJuIG1lc3NhZ2VzLm1hcCgobWVzc2FnZSkgPT4gbWVzc2FnZS50b0RpY3QoKSk7XG59XG4iXSwibmFtZXMiOlsiU2VyaWFsaXphYmxlIiwibWVyZ2VDb250ZW50IiwiZmlyc3RDb250ZW50Iiwic2Vjb25kQ29udGVudCIsInR5cGUiLCJ0ZXh0IiwiQXJyYXkiLCJpc0FycmF5IiwiQmFzZU1lc3NhZ2UiLCJsY19hbGlhc2VzIiwiYWRkaXRpb25hbF9rd2FyZ3MiLCJyZXNwb25zZV9tZXRhZGF0YSIsImNvbnRlbnQiLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsImt3YXJncyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJuYW1lIiwidG9EaWN0IiwiX2dldFR5cGUiLCJkYXRhIiwidG9KU09OIiwidG9DaHVuayIsIkh1bWFuTWVzc2FnZUNodW5rIiwiQUlNZXNzYWdlQ2h1bmsiLCJTeXN0ZW1NZXNzYWdlQ2h1bmsiLCJGdW5jdGlvbk1lc3NhZ2VDaHVuayIsIkNoYXRNZXNzYWdlIiwiaXNJbnN0YW5jZSIsIkNoYXRNZXNzYWdlQ2h1bmsiLCJFcnJvciIsImlzT3BlbkFJVG9vbENhbGxBcnJheSIsImV2ZXJ5IiwidiIsImluZGV4IiwiX21lcmdlRGljdHMiLCJsZWZ0IiwicmlnaHQiLCJtZXJnZWQiLCJrZXkiLCJlbnRyaWVzIiwidG9vbENhbGwiLCJ1bmRlZmluZWQiLCJtYXAiLCJpIiwiZnVuY3Rpb24iLCJhcmd1bWVudHMiLCJjb25jYXQiLCJjb25zb2xlIiwid2FybiIsIkJhc2VNZXNzYWdlQ2h1bmsiLCJIdW1hbk1lc3NhZ2UiLCJsY19uYW1lIiwiY2h1bmsiLCJBSU1lc3NhZ2UiLCJTeXN0ZW1NZXNzYWdlIiwiRnVuY3Rpb25NZXNzYWdlIiwiVG9vbE1lc3NhZ2UiLCJ0b29sX2NhbGxfaWQiLCJtZXNzYWdlIiwiVG9vbE1lc3NhZ2VDaHVuayIsIl9jaGF0TWVzc2FnZUNsYXNzIiwicm9sZSIsImlzQmFzZU1lc3NhZ2UiLCJtZXNzYWdlTGlrZSIsImlzQmFzZU1lc3NhZ2VDaHVuayIsImNvZXJjZU1lc3NhZ2VMaWtlVG9NZXNzYWdlIiwiZ2V0QnVmZmVyU3RyaW5nIiwibWVzc2FnZXMiLCJodW1hblByZWZpeCIsImFpUHJlZml4Iiwic3RyaW5nX21lc3NhZ2VzIiwibSIsIm5hbWVTdHIiLCJwdXNoIiwiam9pbiIsIm1hcFYxTWVzc2FnZVRvU3RvcmVkTWVzc2FnZSIsInYxTWVzc2FnZSIsIm1hcFN0b3JlZE1lc3NhZ2VUb0NoYXRNZXNzYWdlIiwic3RvcmVkTWVzc2FnZSIsIm1hcFN0b3JlZE1lc3NhZ2VzVG9DaGF0TWVzc2FnZXMiLCJtYXBDaGF0TWVzc2FnZXNUb1N0b3JlZE1lc3NhZ2VzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/messages/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/output_parsers/base.js":
/*!******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/base.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseLLMOutputParser: () => (/* binding */ BaseLLMOutputParser),\n/* harmony export */   BaseOutputParser: () => (/* binding */ BaseOutputParser),\n/* harmony export */   OutputParserException: () => (/* binding */ OutputParserException)\n/* harmony export */ });\n/* harmony import */ var _runnables_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runnables/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/index.js\");\n\n/**\n * Abstract base class for parsing the output of a Large Language Model\n * (LLM) call. It provides methods for parsing the result of an LLM call\n * and invoking the parser with a given input.\n */ class BaseLLMOutputParser extends _runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.Runnable {\n    /**\n     * Parses the result of an LLM call with a given prompt. By default, it\n     * simply calls `parseResult`.\n     * @param generations The generations from an LLM call.\n     * @param _prompt The prompt used in the LLM call.\n     * @param callbacks Optional callbacks.\n     * @returns A promise of the parsed output.\n     */ parseResultWithPrompt(generations, _prompt, callbacks) {\n        return this.parseResult(generations, callbacks);\n    }\n    _baseMessageToString(message) {\n        return typeof message.content === \"string\" ? message.content : this._baseMessageContentToString(message.content);\n    }\n    _baseMessageContentToString(content) {\n        return JSON.stringify(content);\n    }\n    /**\n     * Calls the parser with a given input and optional configuration options.\n     * If the input is a string, it creates a generation with the input as\n     * text and calls `parseResult`. If the input is a `BaseMessage`, it\n     * creates a generation with the input as a message and the content of the\n     * input as text, and then calls `parseResult`.\n     * @param input The input to the parser, which can be a string or a `BaseMessage`.\n     * @param options Optional configuration options.\n     * @returns A promise of the parsed output.\n     */ async invoke(input, options) {\n        if (typeof input === \"string\") {\n            return this._callWithConfig(async (input)=>this.parseResult([\n                    {\n                        text: input\n                    }\n                ]), input, {\n                ...options,\n                runType: \"parser\"\n            });\n        } else {\n            return this._callWithConfig(async (input)=>this.parseResult([\n                    {\n                        message: input,\n                        text: this._baseMessageToString(input)\n                    }\n                ]), input, {\n                ...options,\n                runType: \"parser\"\n            });\n        }\n    }\n}\n/**\n * Class to parse the output of an LLM call.\n */ class BaseOutputParser extends BaseLLMOutputParser {\n    parseResult(generations, callbacks) {\n        return this.parse(generations[0].text, callbacks);\n    }\n    async parseWithPrompt(text, _prompt, callbacks) {\n        return this.parse(text, callbacks);\n    }\n    /**\n     * Return the string type key uniquely identifying this class of parser\n     */ _type() {\n        throw new Error(\"_type not implemented\");\n    }\n}\n/**\n * Exception that output parsers should raise to signify a parsing error.\n *\n * This exists to differentiate parsing errors from other code or execution errors\n * that also may arise inside the output parser. OutputParserExceptions will be\n * available to catch and handle in ways to fix the parsing error, while other\n * errors will be raised.\n *\n * @param message - The error that's being re-raised or an error message.\n * @param llmOutput - String model output which is error-ing.\n * @param observation - String explanation of error which can be passed to a\n *     model to try and remediate the issue.\n * @param sendToLLM - Whether to send the observation and llm_output back to an Agent\n *     after an OutputParserException has been raised. This gives the underlying\n *     model driving the agent the context that the previous output was improperly\n *     structured, in the hopes that it will update the output to the correct\n *     format.\n */ class OutputParserException extends Error {\n    constructor(message, llmOutput, observation, sendToLLM = false){\n        super(message);\n        Object.defineProperty(this, \"llmOutput\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"observation\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"sendToLLM\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.llmOutput = llmOutput;\n        this.observation = observation;\n        this.sendToLLM = sendToLLM;\n        if (sendToLLM) {\n            if (observation === undefined || llmOutput === undefined) {\n                throw new Error(\"Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true\");\n            }\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvYmFzZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWlEO0FBQ2pEOzs7O0NBSUMsR0FDTSxNQUFNQyw0QkFBNEJELHlEQUFRQTtJQUM3Qzs7Ozs7OztLQU9DLEdBQ0RFLHNCQUFzQkMsV0FBVyxFQUFFQyxPQUFPLEVBQUVDLFNBQVMsRUFBRTtRQUNuRCxPQUFPLElBQUksQ0FBQ0MsV0FBVyxDQUFDSCxhQUFhRTtJQUN6QztJQUNBRSxxQkFBcUJDLE9BQU8sRUFBRTtRQUMxQixPQUFPLE9BQU9BLFFBQVFDLE9BQU8sS0FBSyxXQUM1QkQsUUFBUUMsT0FBTyxHQUNmLElBQUksQ0FBQ0MsMkJBQTJCLENBQUNGLFFBQVFDLE9BQU87SUFDMUQ7SUFDQUMsNEJBQTRCRCxPQUFPLEVBQUU7UUFDakMsT0FBT0UsS0FBS0MsU0FBUyxDQUFDSDtJQUMxQjtJQUNBOzs7Ozs7Ozs7S0FTQyxHQUNELE1BQU1JLE9BQU9DLEtBQUssRUFBRUMsT0FBTyxFQUFFO1FBQ3pCLElBQUksT0FBT0QsVUFBVSxVQUFVO1lBQzNCLE9BQU8sSUFBSSxDQUFDRSxlQUFlLENBQUMsT0FBT0YsUUFBVSxJQUFJLENBQUNSLFdBQVcsQ0FBQztvQkFBQzt3QkFBRVcsTUFBTUg7b0JBQU07aUJBQUUsR0FBR0EsT0FBTztnQkFBRSxHQUFHQyxPQUFPO2dCQUFFRyxTQUFTO1lBQVM7UUFDN0gsT0FDSztZQUNELE9BQU8sSUFBSSxDQUFDRixlQUFlLENBQUMsT0FBT0YsUUFBVSxJQUFJLENBQUNSLFdBQVcsQ0FBQztvQkFDMUQ7d0JBQ0lFLFNBQVNNO3dCQUNURyxNQUFNLElBQUksQ0FBQ1Ysb0JBQW9CLENBQUNPO29CQUNwQztpQkFDSCxHQUFHQSxPQUFPO2dCQUFFLEdBQUdDLE9BQU87Z0JBQUVHLFNBQVM7WUFBUztRQUMvQztJQUNKO0FBQ0o7QUFDQTs7Q0FFQyxHQUNNLE1BQU1DLHlCQUF5QmxCO0lBQ2xDSyxZQUFZSCxXQUFXLEVBQUVFLFNBQVMsRUFBRTtRQUNoQyxPQUFPLElBQUksQ0FBQ2UsS0FBSyxDQUFDakIsV0FBVyxDQUFDLEVBQUUsQ0FBQ2MsSUFBSSxFQUFFWjtJQUMzQztJQUNBLE1BQU1nQixnQkFBZ0JKLElBQUksRUFBRWIsT0FBTyxFQUFFQyxTQUFTLEVBQUU7UUFDNUMsT0FBTyxJQUFJLENBQUNlLEtBQUssQ0FBQ0gsTUFBTVo7SUFDNUI7SUFDQTs7S0FFQyxHQUNEaUIsUUFBUTtRQUNKLE1BQU0sSUFBSUMsTUFBTTtJQUNwQjtBQUNKO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7O0NBaUJDLEdBQ00sTUFBTUMsOEJBQThCRDtJQUN2Q0UsWUFBWWpCLE9BQU8sRUFBRWtCLFNBQVMsRUFBRUMsV0FBVyxFQUFFQyxZQUFZLEtBQUssQ0FBRTtRQUM1RCxLQUFLLENBQUNwQjtRQUNOcUIsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxhQUFhO1lBQ3JDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxlQUFlO1lBQ3ZDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxhQUFhO1lBQ3JDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNSLFNBQVMsR0FBR0E7UUFDakIsSUFBSSxDQUFDQyxXQUFXLEdBQUdBO1FBQ25CLElBQUksQ0FBQ0MsU0FBUyxHQUFHQTtRQUNqQixJQUFJQSxXQUFXO1lBQ1gsSUFBSUQsZ0JBQWdCUSxhQUFhVCxjQUFjUyxXQUFXO2dCQUN0RCxNQUFNLElBQUlaLE1BQU07WUFDcEI7UUFDSjtJQUNKO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1mb3JtLWJ1aWxkZXItdHV0b3JpYWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvYmFzZS5qcz81YmNkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJ1bm5hYmxlIH0gZnJvbSBcIi4uL3J1bm5hYmxlcy9pbmRleC5qc1wiO1xuLyoqXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzIGZvciBwYXJzaW5nIHRoZSBvdXRwdXQgb2YgYSBMYXJnZSBMYW5ndWFnZSBNb2RlbFxuICogKExMTSkgY2FsbC4gSXQgcHJvdmlkZXMgbWV0aG9kcyBmb3IgcGFyc2luZyB0aGUgcmVzdWx0IG9mIGFuIExMTSBjYWxsXG4gKiBhbmQgaW52b2tpbmcgdGhlIHBhcnNlciB3aXRoIGEgZ2l2ZW4gaW5wdXQuXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlTExNT3V0cHV0UGFyc2VyIGV4dGVuZHMgUnVubmFibGUge1xuICAgIC8qKlxuICAgICAqIFBhcnNlcyB0aGUgcmVzdWx0IG9mIGFuIExMTSBjYWxsIHdpdGggYSBnaXZlbiBwcm9tcHQuIEJ5IGRlZmF1bHQsIGl0XG4gICAgICogc2ltcGx5IGNhbGxzIGBwYXJzZVJlc3VsdGAuXG4gICAgICogQHBhcmFtIGdlbmVyYXRpb25zIFRoZSBnZW5lcmF0aW9ucyBmcm9tIGFuIExMTSBjYWxsLlxuICAgICAqIEBwYXJhbSBfcHJvbXB0IFRoZSBwcm9tcHQgdXNlZCBpbiB0aGUgTExNIGNhbGwuXG4gICAgICogQHBhcmFtIGNhbGxiYWNrcyBPcHRpb25hbCBjYWxsYmFja3MuXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIG9mIHRoZSBwYXJzZWQgb3V0cHV0LlxuICAgICAqL1xuICAgIHBhcnNlUmVzdWx0V2l0aFByb21wdChnZW5lcmF0aW9ucywgX3Byb21wdCwgY2FsbGJhY2tzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcnNlUmVzdWx0KGdlbmVyYXRpb25zLCBjYWxsYmFja3MpO1xuICAgIH1cbiAgICBfYmFzZU1lc3NhZ2VUb1N0cmluZyhtZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgbWVzc2FnZS5jb250ZW50ID09PSBcInN0cmluZ1wiXG4gICAgICAgICAgICA/IG1lc3NhZ2UuY29udGVudFxuICAgICAgICAgICAgOiB0aGlzLl9iYXNlTWVzc2FnZUNvbnRlbnRUb1N0cmluZyhtZXNzYWdlLmNvbnRlbnQpO1xuICAgIH1cbiAgICBfYmFzZU1lc3NhZ2VDb250ZW50VG9TdHJpbmcoY29udGVudCkge1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoY29udGVudCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxzIHRoZSBwYXJzZXIgd2l0aCBhIGdpdmVuIGlucHV0IGFuZCBvcHRpb25hbCBjb25maWd1cmF0aW9uIG9wdGlvbnMuXG4gICAgICogSWYgdGhlIGlucHV0IGlzIGEgc3RyaW5nLCBpdCBjcmVhdGVzIGEgZ2VuZXJhdGlvbiB3aXRoIHRoZSBpbnB1dCBhc1xuICAgICAqIHRleHQgYW5kIGNhbGxzIGBwYXJzZVJlc3VsdGAuIElmIHRoZSBpbnB1dCBpcyBhIGBCYXNlTWVzc2FnZWAsIGl0XG4gICAgICogY3JlYXRlcyBhIGdlbmVyYXRpb24gd2l0aCB0aGUgaW5wdXQgYXMgYSBtZXNzYWdlIGFuZCB0aGUgY29udGVudCBvZiB0aGVcbiAgICAgKiBpbnB1dCBhcyB0ZXh0LCBhbmQgdGhlbiBjYWxscyBgcGFyc2VSZXN1bHRgLlxuICAgICAqIEBwYXJhbSBpbnB1dCBUaGUgaW5wdXQgdG8gdGhlIHBhcnNlciwgd2hpY2ggY2FuIGJlIGEgc3RyaW5nIG9yIGEgYEJhc2VNZXNzYWdlYC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25hbCBjb25maWd1cmF0aW9uIG9wdGlvbnMuXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIG9mIHRoZSBwYXJzZWQgb3V0cHV0LlxuICAgICAqL1xuICAgIGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2FsbFdpdGhDb25maWcoYXN5bmMgKGlucHV0KSA9PiB0aGlzLnBhcnNlUmVzdWx0KFt7IHRleHQ6IGlucHV0IH1dKSwgaW5wdXQsIHsgLi4ub3B0aW9ucywgcnVuVHlwZTogXCJwYXJzZXJcIiB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jYWxsV2l0aENvbmZpZyhhc3luYyAoaW5wdXQpID0+IHRoaXMucGFyc2VSZXN1bHQoW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogaW5wdXQsXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IHRoaXMuX2Jhc2VNZXNzYWdlVG9TdHJpbmcoaW5wdXQpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdKSwgaW5wdXQsIHsgLi4ub3B0aW9ucywgcnVuVHlwZTogXCJwYXJzZXJcIiB9KTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8qKlxuICogQ2xhc3MgdG8gcGFyc2UgdGhlIG91dHB1dCBvZiBhbiBMTE0gY2FsbC5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VPdXRwdXRQYXJzZXIgZXh0ZW5kcyBCYXNlTExNT3V0cHV0UGFyc2VyIHtcbiAgICBwYXJzZVJlc3VsdChnZW5lcmF0aW9ucywgY2FsbGJhY2tzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhcnNlKGdlbmVyYXRpb25zWzBdLnRleHQsIGNhbGxiYWNrcyk7XG4gICAgfVxuICAgIGFzeW5jIHBhcnNlV2l0aFByb21wdCh0ZXh0LCBfcHJvbXB0LCBjYWxsYmFja3MpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2UodGV4dCwgY2FsbGJhY2tzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBzdHJpbmcgdHlwZSBrZXkgdW5pcXVlbHkgaWRlbnRpZnlpbmcgdGhpcyBjbGFzcyBvZiBwYXJzZXJcbiAgICAgKi9cbiAgICBfdHlwZSgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiX3R5cGUgbm90IGltcGxlbWVudGVkXCIpO1xuICAgIH1cbn1cbi8qKlxuICogRXhjZXB0aW9uIHRoYXQgb3V0cHV0IHBhcnNlcnMgc2hvdWxkIHJhaXNlIHRvIHNpZ25pZnkgYSBwYXJzaW5nIGVycm9yLlxuICpcbiAqIFRoaXMgZXhpc3RzIHRvIGRpZmZlcmVudGlhdGUgcGFyc2luZyBlcnJvcnMgZnJvbSBvdGhlciBjb2RlIG9yIGV4ZWN1dGlvbiBlcnJvcnNcbiAqIHRoYXQgYWxzbyBtYXkgYXJpc2UgaW5zaWRlIHRoZSBvdXRwdXQgcGFyc2VyLiBPdXRwdXRQYXJzZXJFeGNlcHRpb25zIHdpbGwgYmVcbiAqIGF2YWlsYWJsZSB0byBjYXRjaCBhbmQgaGFuZGxlIGluIHdheXMgdG8gZml4IHRoZSBwYXJzaW5nIGVycm9yLCB3aGlsZSBvdGhlclxuICogZXJyb3JzIHdpbGwgYmUgcmFpc2VkLlxuICpcbiAqIEBwYXJhbSBtZXNzYWdlIC0gVGhlIGVycm9yIHRoYXQncyBiZWluZyByZS1yYWlzZWQgb3IgYW4gZXJyb3IgbWVzc2FnZS5cbiAqIEBwYXJhbSBsbG1PdXRwdXQgLSBTdHJpbmcgbW9kZWwgb3V0cHV0IHdoaWNoIGlzIGVycm9yLWluZy5cbiAqIEBwYXJhbSBvYnNlcnZhdGlvbiAtIFN0cmluZyBleHBsYW5hdGlvbiBvZiBlcnJvciB3aGljaCBjYW4gYmUgcGFzc2VkIHRvIGFcbiAqICAgICBtb2RlbCB0byB0cnkgYW5kIHJlbWVkaWF0ZSB0aGUgaXNzdWUuXG4gKiBAcGFyYW0gc2VuZFRvTExNIC0gV2hldGhlciB0byBzZW5kIHRoZSBvYnNlcnZhdGlvbiBhbmQgbGxtX291dHB1dCBiYWNrIHRvIGFuIEFnZW50XG4gKiAgICAgYWZ0ZXIgYW4gT3V0cHV0UGFyc2VyRXhjZXB0aW9uIGhhcyBiZWVuIHJhaXNlZC4gVGhpcyBnaXZlcyB0aGUgdW5kZXJseWluZ1xuICogICAgIG1vZGVsIGRyaXZpbmcgdGhlIGFnZW50IHRoZSBjb250ZXh0IHRoYXQgdGhlIHByZXZpb3VzIG91dHB1dCB3YXMgaW1wcm9wZXJseVxuICogICAgIHN0cnVjdHVyZWQsIGluIHRoZSBob3BlcyB0aGF0IGl0IHdpbGwgdXBkYXRlIHRoZSBvdXRwdXQgdG8gdGhlIGNvcnJlY3RcbiAqICAgICBmb3JtYXQuXG4gKi9cbmV4cG9ydCBjbGFzcyBPdXRwdXRQYXJzZXJFeGNlcHRpb24gZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgbGxtT3V0cHV0LCBvYnNlcnZhdGlvbiwgc2VuZFRvTExNID0gZmFsc2UpIHtcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxsbU91dHB1dFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvYnNlcnZhdGlvblwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzZW5kVG9MTE1cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5sbG1PdXRwdXQgPSBsbG1PdXRwdXQ7XG4gICAgICAgIHRoaXMub2JzZXJ2YXRpb24gPSBvYnNlcnZhdGlvbjtcbiAgICAgICAgdGhpcy5zZW5kVG9MTE0gPSBzZW5kVG9MTE07XG4gICAgICAgIGlmIChzZW5kVG9MTE0pIHtcbiAgICAgICAgICAgIGlmIChvYnNlcnZhdGlvbiA9PT0gdW5kZWZpbmVkIHx8IGxsbU91dHB1dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXJndW1lbnRzICdvYnNlcnZhdGlvbicgJiAnbGxtT3V0cHV0JyBhcmUgcmVxdWlyZWQgaWYgJ3NlbmRUb0xsbScgaXMgdHJ1ZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJSdW5uYWJsZSIsIkJhc2VMTE1PdXRwdXRQYXJzZXIiLCJwYXJzZVJlc3VsdFdpdGhQcm9tcHQiLCJnZW5lcmF0aW9ucyIsIl9wcm9tcHQiLCJjYWxsYmFja3MiLCJwYXJzZVJlc3VsdCIsIl9iYXNlTWVzc2FnZVRvU3RyaW5nIiwibWVzc2FnZSIsImNvbnRlbnQiLCJfYmFzZU1lc3NhZ2VDb250ZW50VG9TdHJpbmciLCJKU09OIiwic3RyaW5naWZ5IiwiaW52b2tlIiwiaW5wdXQiLCJvcHRpb25zIiwiX2NhbGxXaXRoQ29uZmlnIiwidGV4dCIsInJ1blR5cGUiLCJCYXNlT3V0cHV0UGFyc2VyIiwicGFyc2UiLCJwYXJzZVdpdGhQcm9tcHQiLCJfdHlwZSIsIkVycm9yIiwiT3V0cHV0UGFyc2VyRXhjZXB0aW9uIiwiY29uc3RydWN0b3IiLCJsbG1PdXRwdXQiLCJvYnNlcnZhdGlvbiIsInNlbmRUb0xMTSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJ1bmRlZmluZWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/output_parsers/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/output_parsers/bytes.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/bytes.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BytesOutputParser: () => (/* binding */ BytesOutputParser)\n/* harmony export */ });\n/* harmony import */ var _transform_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./transform.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/transform.js\");\n\n/**\n * OutputParser that parses LLMResult into the top likely string and\n * encodes it into bytes.\n */ class BytesOutputParser extends _transform_js__WEBPACK_IMPORTED_MODULE_0__.BaseTransformOutputParser {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"output_parsers\",\n                \"bytes\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"textEncoder\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new TextEncoder()\n        });\n    }\n    static lc_name() {\n        return \"BytesOutputParser\";\n    }\n    parse(text) {\n        return Promise.resolve(this.textEncoder.encode(text));\n    }\n    getFormatInstructions() {\n        return \"\";\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvYnl0ZXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBMkQ7QUFDM0Q7OztDQUdDLEdBQ00sTUFBTUMsMEJBQTBCRCxvRUFBeUJBO0lBQzVERSxhQUFjO1FBQ1YsS0FBSyxJQUFJQztRQUNUQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztnQkFBQztnQkFBa0I7Z0JBQWtCO2FBQVE7UUFDeEQ7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxtQkFBbUI7WUFDM0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGVBQWU7WUFDdkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sSUFBSUM7UUFDZjtJQUNKO0lBQ0EsT0FBT0MsVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBQyxNQUFNQyxJQUFJLEVBQUU7UUFDUixPQUFPQyxRQUFRQyxPQUFPLENBQUMsSUFBSSxDQUFDQyxXQUFXLENBQUNDLE1BQU0sQ0FBQ0o7SUFDbkQ7SUFDQUssd0JBQXdCO1FBQ3BCLE9BQU87SUFDWDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L291dHB1dF9wYXJzZXJzL2J5dGVzLmpzPzUyZTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzZVRyYW5zZm9ybU91dHB1dFBhcnNlciB9IGZyb20gXCIuL3RyYW5zZm9ybS5qc1wiO1xuLyoqXG4gKiBPdXRwdXRQYXJzZXIgdGhhdCBwYXJzZXMgTExNUmVzdWx0IGludG8gdGhlIHRvcCBsaWtlbHkgc3RyaW5nIGFuZFxuICogZW5jb2RlcyBpdCBpbnRvIGJ5dGVzLlxuICovXG5leHBvcnQgY2xhc3MgQnl0ZXNPdXRwdXRQYXJzZXIgZXh0ZW5kcyBCYXNlVHJhbnNmb3JtT3V0cHV0UGFyc2VyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcIm91dHB1dF9wYXJzZXJzXCIsIFwiYnl0ZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidGV4dEVuY29kZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IG5ldyBUZXh0RW5jb2RlcigpXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiQnl0ZXNPdXRwdXRQYXJzZXJcIjtcbiAgICB9XG4gICAgcGFyc2UodGV4dCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMudGV4dEVuY29kZXIuZW5jb2RlKHRleHQpKTtcbiAgICB9XG4gICAgZ2V0Rm9ybWF0SW5zdHJ1Y3Rpb25zKCkge1xuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiQmFzZVRyYW5zZm9ybU91dHB1dFBhcnNlciIsIkJ5dGVzT3V0cHV0UGFyc2VyIiwiY29uc3RydWN0b3IiLCJhcmd1bWVudHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiVGV4dEVuY29kZXIiLCJsY19uYW1lIiwicGFyc2UiLCJ0ZXh0IiwiUHJvbWlzZSIsInJlc29sdmUiLCJ0ZXh0RW5jb2RlciIsImVuY29kZSIsImdldEZvcm1hdEluc3RydWN0aW9ucyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/output_parsers/bytes.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/output_parsers/index.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/index.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsymmetricStructuredOutputParser: () => (/* reexport safe */ _structured_js__WEBPACK_IMPORTED_MODULE_4__.AsymmetricStructuredOutputParser),\n/* harmony export */   BaseCumulativeTransformOutputParser: () => (/* reexport safe */ _transform_js__WEBPACK_IMPORTED_MODULE_5__.BaseCumulativeTransformOutputParser),\n/* harmony export */   BaseLLMOutputParser: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseLLMOutputParser),\n/* harmony export */   BaseOutputParser: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseOutputParser),\n/* harmony export */   BaseTransformOutputParser: () => (/* reexport safe */ _transform_js__WEBPACK_IMPORTED_MODULE_5__.BaseTransformOutputParser),\n/* harmony export */   BytesOutputParser: () => (/* reexport safe */ _bytes_js__WEBPACK_IMPORTED_MODULE_1__.BytesOutputParser),\n/* harmony export */   CommaSeparatedListOutputParser: () => (/* reexport safe */ _list_js__WEBPACK_IMPORTED_MODULE_2__.CommaSeparatedListOutputParser),\n/* harmony export */   CustomListOutputParser: () => (/* reexport safe */ _list_js__WEBPACK_IMPORTED_MODULE_2__.CustomListOutputParser),\n/* harmony export */   JsonMarkdownStructuredOutputParser: () => (/* reexport safe */ _structured_js__WEBPACK_IMPORTED_MODULE_4__.JsonMarkdownStructuredOutputParser),\n/* harmony export */   JsonOutputParser: () => (/* reexport safe */ _json_js__WEBPACK_IMPORTED_MODULE_6__.JsonOutputParser),\n/* harmony export */   ListOutputParser: () => (/* reexport safe */ _list_js__WEBPACK_IMPORTED_MODULE_2__.ListOutputParser),\n/* harmony export */   MarkdownListOutputParser: () => (/* reexport safe */ _list_js__WEBPACK_IMPORTED_MODULE_2__.MarkdownListOutputParser),\n/* harmony export */   NumberedListOutputParser: () => (/* reexport safe */ _list_js__WEBPACK_IMPORTED_MODULE_2__.NumberedListOutputParser),\n/* harmony export */   OutputParserException: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.OutputParserException),\n/* harmony export */   StringOutputParser: () => (/* reexport safe */ _string_js__WEBPACK_IMPORTED_MODULE_3__.StringOutputParser),\n/* harmony export */   StructuredOutputParser: () => (/* reexport safe */ _structured_js__WEBPACK_IMPORTED_MODULE_4__.StructuredOutputParser),\n/* harmony export */   XMLOutputParser: () => (/* reexport safe */ _xml_js__WEBPACK_IMPORTED_MODULE_7__.XMLOutputParser),\n/* harmony export */   XML_FORMAT_INSTRUCTIONS: () => (/* reexport safe */ _xml_js__WEBPACK_IMPORTED_MODULE_7__.XML_FORMAT_INSTRUCTIONS),\n/* harmony export */   parseJsonMarkdown: () => (/* reexport safe */ _json_js__WEBPACK_IMPORTED_MODULE_6__.parseJsonMarkdown),\n/* harmony export */   parsePartialJson: () => (/* reexport safe */ _json_js__WEBPACK_IMPORTED_MODULE_6__.parsePartialJson),\n/* harmony export */   parseXMLMarkdown: () => (/* reexport safe */ _xml_js__WEBPACK_IMPORTED_MODULE_7__.parseXMLMarkdown)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/base.js\");\n/* harmony import */ var _bytes_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./bytes.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/bytes.js\");\n/* harmony import */ var _list_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./list.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/list.js\");\n/* harmony import */ var _string_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./string.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/string.js\");\n/* harmony import */ var _structured_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./structured.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/structured.js\");\n/* harmony import */ var _transform_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./transform.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/transform.js\");\n/* harmony import */ var _json_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./json.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/json.js\");\n/* harmony import */ var _xml_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./xml.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/xml.js\");\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBMEI7QUFDQztBQUNEO0FBQ0U7QUFDSTtBQUNEO0FBQ0w7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLWZvcm0tYnVpbGRlci10dXRvcmlhbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9vdXRwdXRfcGFyc2Vycy9pbmRleC5qcz8zYTY2Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gXCIuL2Jhc2UuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2J5dGVzLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9saXN0LmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9zdHJpbmcuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3N0cnVjdHVyZWQuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3RyYW5zZm9ybS5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vanNvbi5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4veG1sLmpzXCI7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/output_parsers/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/output_parsers/json.js":
/*!******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/json.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsonOutputParser: () => (/* binding */ JsonOutputParser),\n/* harmony export */   parseJsonMarkdown: () => (/* binding */ parseJsonMarkdown),\n/* harmony export */   parsePartialJson: () => (/* binding */ parsePartialJson)\n/* harmony export */ });\n/* harmony import */ var _transform_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./transform.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/transform.js\");\n/* harmony import */ var _utils_json_patch_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/json_patch.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/json_patch.js\");\n\n\n/**\n * Class for parsing the output of an LLM into a JSON object.\n */ class JsonOutputParser extends _transform_js__WEBPACK_IMPORTED_MODULE_0__.BaseCumulativeTransformOutputParser {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"output_parsers\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n    }\n    static lc_name() {\n        return \"JsonOutputParser\";\n    }\n    _diff(prev, next) {\n        if (!next) {\n            return undefined;\n        }\n        if (!prev) {\n            return [\n                {\n                    op: \"replace\",\n                    path: \"\",\n                    value: next\n                }\n            ];\n        }\n        return (0,_utils_json_patch_js__WEBPACK_IMPORTED_MODULE_1__.compare)(prev, next);\n    }\n    // This should actually return Partial<T>, but there's no way\n    // to specify emitted chunks as instances separate from the main output type.\n    async parsePartialResult(generations) {\n        return parseJsonMarkdown(generations[0].text);\n    }\n    async parse(text) {\n        return parseJsonMarkdown(text, JSON.parse);\n    }\n    getFormatInstructions() {\n        return \"\";\n    }\n}\nfunction parseJsonMarkdown(s, parser = parsePartialJson) {\n    // eslint-disable-next-line no-param-reassign\n    s = s.trim();\n    const match = /```(json)?(.*)```/s.exec(s);\n    if (!match) {\n        return parser(s);\n    } else {\n        return parser(match[2]);\n    }\n}\n// Adapted from https://github.com/KillianLucas/open-interpreter/blob/main/interpreter/core/llm/utils/parse_partial_json.py\n// MIT License\nfunction parsePartialJson(s) {\n    // If the input is undefined, return null to indicate failure.\n    if (typeof s === \"undefined\") {\n        return null;\n    }\n    // Attempt to parse the string as-is.\n    try {\n        return JSON.parse(s);\n    } catch (error) {\n    // Pass\n    }\n    // Initialize variables.\n    let new_s = \"\";\n    const stack = [];\n    let isInsideString = false;\n    let escaped = false;\n    // Process each character in the string one at a time.\n    for (let char of s){\n        if (isInsideString) {\n            if (char === '\"' && !escaped) {\n                isInsideString = false;\n            } else if (char === \"\\n\" && !escaped) {\n                char = \"\\\\n\"; // Replace the newline character with the escape sequence.\n            } else if (char === \"\\\\\") {\n                escaped = !escaped;\n            } else {\n                escaped = false;\n            }\n        } else {\n            if (char === '\"') {\n                isInsideString = true;\n                escaped = false;\n            } else if (char === \"{\") {\n                stack.push(\"}\");\n            } else if (char === \"[\") {\n                stack.push(\"]\");\n            } else if (char === \"}\" || char === \"]\") {\n                if (stack && stack[stack.length - 1] === char) {\n                    stack.pop();\n                } else {\n                    // Mismatched closing character; the input is malformed.\n                    return null;\n                }\n            }\n        }\n        // Append the processed character to the new string.\n        new_s += char;\n    }\n    // If we're still inside a string at the end of processing,\n    // we need to close the string.\n    if (isInsideString) {\n        new_s += '\"';\n    }\n    // Close any remaining open structures in the reverse order that they were opened.\n    for(let i = stack.length - 1; i >= 0; i -= 1){\n        new_s += stack[i];\n    }\n    // Attempt to parse the modified string as JSON.\n    try {\n        return JSON.parse(new_s);\n    } catch (error) {\n        // If we still can't parse the string as JSON, return null to indicate failure.\n        return null;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvanNvbi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFxRTtBQUNwQjtBQUNqRDs7Q0FFQyxHQUNNLE1BQU1FLHlCQUF5QkYsOEVBQW1DQTtJQUNyRUcsYUFBYztRQUNWLEtBQUssSUFBSUM7UUFDVEMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87Z0JBQUM7Z0JBQWtCO2FBQWlCO1FBQy9DO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CO1lBQzNDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7SUFDSjtJQUNBLE9BQU9DLFVBQVU7UUFDYixPQUFPO0lBQ1g7SUFDQUMsTUFBTUMsSUFBSSxFQUFFQyxJQUFJLEVBQUU7UUFDZCxJQUFJLENBQUNBLE1BQU07WUFDUCxPQUFPQztRQUNYO1FBQ0EsSUFBSSxDQUFDRixNQUFNO1lBQ1AsT0FBTztnQkFBQztvQkFBRUcsSUFBSTtvQkFBV0MsTUFBTTtvQkFBSVAsT0FBT0k7Z0JBQUs7YUFBRTtRQUNyRDtRQUNBLE9BQU9iLDZEQUFPQSxDQUFDWSxNQUFNQztJQUN6QjtJQUNBLDZEQUE2RDtJQUM3RCw2RUFBNkU7SUFDN0UsTUFBTUksbUJBQW1CQyxXQUFXLEVBQUU7UUFDbEMsT0FBT0Msa0JBQWtCRCxXQUFXLENBQUMsRUFBRSxDQUFDRSxJQUFJO0lBQ2hEO0lBQ0EsTUFBTUMsTUFBTUQsSUFBSSxFQUFFO1FBQ2QsT0FBT0Qsa0JBQWtCQyxNQUFNRSxLQUFLRCxLQUFLO0lBQzdDO0lBQ0FFLHdCQUF3QjtRQUNwQixPQUFPO0lBQ1g7QUFDSjtBQUNPLFNBQVNKLGtCQUFrQkssQ0FBQyxFQUFFQyxTQUFTQyxnQkFBZ0I7SUFDMUQsNkNBQTZDO0lBQzdDRixJQUFJQSxFQUFFRyxJQUFJO0lBQ1YsTUFBTUMsUUFBUSxxQkFBcUJDLElBQUksQ0FBQ0w7SUFDeEMsSUFBSSxDQUFDSSxPQUFPO1FBQ1IsT0FBT0gsT0FBT0Q7SUFDbEIsT0FDSztRQUNELE9BQU9DLE9BQU9HLEtBQUssQ0FBQyxFQUFFO0lBQzFCO0FBQ0o7QUFDQSwySEFBMkg7QUFDM0gsY0FBYztBQUNQLFNBQVNGLGlCQUFpQkYsQ0FBQztJQUM5Qiw4REFBOEQ7SUFDOUQsSUFBSSxPQUFPQSxNQUFNLGFBQWE7UUFDMUIsT0FBTztJQUNYO0lBQ0EscUNBQXFDO0lBQ3JDLElBQUk7UUFDQSxPQUFPRixLQUFLRCxLQUFLLENBQUNHO0lBQ3RCLEVBQ0EsT0FBT00sT0FBTztJQUNWLE9BQU87SUFDWDtJQUNBLHdCQUF3QjtJQUN4QixJQUFJQyxRQUFRO0lBQ1osTUFBTUMsUUFBUSxFQUFFO0lBQ2hCLElBQUlDLGlCQUFpQjtJQUNyQixJQUFJQyxVQUFVO0lBQ2Qsc0RBQXNEO0lBQ3RELEtBQUssSUFBSUMsUUFBUVgsRUFBRztRQUNoQixJQUFJUyxnQkFBZ0I7WUFDaEIsSUFBSUUsU0FBUyxPQUFPLENBQUNELFNBQVM7Z0JBQzFCRCxpQkFBaUI7WUFDckIsT0FDSyxJQUFJRSxTQUFTLFFBQVEsQ0FBQ0QsU0FBUztnQkFDaENDLE9BQU8sT0FBTywwREFBMEQ7WUFDNUUsT0FDSyxJQUFJQSxTQUFTLE1BQU07Z0JBQ3BCRCxVQUFVLENBQUNBO1lBQ2YsT0FDSztnQkFDREEsVUFBVTtZQUNkO1FBQ0osT0FDSztZQUNELElBQUlDLFNBQVMsS0FBSztnQkFDZEYsaUJBQWlCO2dCQUNqQkMsVUFBVTtZQUNkLE9BQ0ssSUFBSUMsU0FBUyxLQUFLO2dCQUNuQkgsTUFBTUksSUFBSSxDQUFDO1lBQ2YsT0FDSyxJQUFJRCxTQUFTLEtBQUs7Z0JBQ25CSCxNQUFNSSxJQUFJLENBQUM7WUFDZixPQUNLLElBQUlELFNBQVMsT0FBT0EsU0FBUyxLQUFLO2dCQUNuQyxJQUFJSCxTQUFTQSxLQUFLLENBQUNBLE1BQU1LLE1BQU0sR0FBRyxFQUFFLEtBQUtGLE1BQU07b0JBQzNDSCxNQUFNTSxHQUFHO2dCQUNiLE9BQ0s7b0JBQ0Qsd0RBQXdEO29CQUN4RCxPQUFPO2dCQUNYO1lBQ0o7UUFDSjtRQUNBLG9EQUFvRDtRQUNwRFAsU0FBU0k7SUFDYjtJQUNBLDJEQUEyRDtJQUMzRCwrQkFBK0I7SUFDL0IsSUFBSUYsZ0JBQWdCO1FBQ2hCRixTQUFTO0lBQ2I7SUFDQSxrRkFBa0Y7SUFDbEYsSUFBSyxJQUFJUSxJQUFJUCxNQUFNSyxNQUFNLEdBQUcsR0FBR0UsS0FBSyxHQUFHQSxLQUFLLEVBQUc7UUFDM0NSLFNBQVNDLEtBQUssQ0FBQ08sRUFBRTtJQUNyQjtJQUNBLGdEQUFnRDtJQUNoRCxJQUFJO1FBQ0EsT0FBT2pCLEtBQUtELEtBQUssQ0FBQ1U7SUFDdEIsRUFDQSxPQUFPRCxPQUFPO1FBQ1YsK0VBQStFO1FBQy9FLE9BQU87SUFDWDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L291dHB1dF9wYXJzZXJzL2pzb24uanM/YWJhMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlQ3VtdWxhdGl2ZVRyYW5zZm9ybU91dHB1dFBhcnNlciB9IGZyb20gXCIuL3RyYW5zZm9ybS5qc1wiO1xuaW1wb3J0IHsgY29tcGFyZSB9IGZyb20gXCIuLi91dGlscy9qc29uX3BhdGNoLmpzXCI7XG4vKipcbiAqIENsYXNzIGZvciBwYXJzaW5nIHRoZSBvdXRwdXQgb2YgYW4gTExNIGludG8gYSBKU09OIG9iamVjdC5cbiAqL1xuZXhwb3J0IGNsYXNzIEpzb25PdXRwdXRQYXJzZXIgZXh0ZW5kcyBCYXNlQ3VtdWxhdGl2ZVRyYW5zZm9ybU91dHB1dFBhcnNlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJvdXRwdXRfcGFyc2Vyc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiSnNvbk91dHB1dFBhcnNlclwiO1xuICAgIH1cbiAgICBfZGlmZihwcmV2LCBuZXh0KSB7XG4gICAgICAgIGlmICghbmV4dCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXByZXYpIHtcbiAgICAgICAgICAgIHJldHVybiBbeyBvcDogXCJyZXBsYWNlXCIsIHBhdGg6IFwiXCIsIHZhbHVlOiBuZXh0IH1dO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb21wYXJlKHByZXYsIG5leHQpO1xuICAgIH1cbiAgICAvLyBUaGlzIHNob3VsZCBhY3R1YWxseSByZXR1cm4gUGFydGlhbDxUPiwgYnV0IHRoZXJlJ3Mgbm8gd2F5XG4gICAgLy8gdG8gc3BlY2lmeSBlbWl0dGVkIGNodW5rcyBhcyBpbnN0YW5jZXMgc2VwYXJhdGUgZnJvbSB0aGUgbWFpbiBvdXRwdXQgdHlwZS5cbiAgICBhc3luYyBwYXJzZVBhcnRpYWxSZXN1bHQoZ2VuZXJhdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlSnNvbk1hcmtkb3duKGdlbmVyYXRpb25zWzBdLnRleHQpO1xuICAgIH1cbiAgICBhc3luYyBwYXJzZSh0ZXh0KSB7XG4gICAgICAgIHJldHVybiBwYXJzZUpzb25NYXJrZG93bih0ZXh0LCBKU09OLnBhcnNlKTtcbiAgICB9XG4gICAgZ2V0Rm9ybWF0SW5zdHJ1Y3Rpb25zKCkge1xuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gcGFyc2VKc29uTWFya2Rvd24ocywgcGFyc2VyID0gcGFyc2VQYXJ0aWFsSnNvbikge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgIHMgPSBzLnRyaW0oKTtcbiAgICBjb25zdCBtYXRjaCA9IC9gYGAoanNvbik/KC4qKWBgYC9zLmV4ZWMocyk7XG4gICAgaWYgKCFtYXRjaCkge1xuICAgICAgICByZXR1cm4gcGFyc2VyKHMpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlcihtYXRjaFsyXSk7XG4gICAgfVxufVxuLy8gQWRhcHRlZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9LaWxsaWFuTHVjYXMvb3Blbi1pbnRlcnByZXRlci9ibG9iL21haW4vaW50ZXJwcmV0ZXIvY29yZS9sbG0vdXRpbHMvcGFyc2VfcGFydGlhbF9qc29uLnB5XG4vLyBNSVQgTGljZW5zZVxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlUGFydGlhbEpzb24ocykge1xuICAgIC8vIElmIHRoZSBpbnB1dCBpcyB1bmRlZmluZWQsIHJldHVybiBudWxsIHRvIGluZGljYXRlIGZhaWx1cmUuXG4gICAgaWYgKHR5cGVvZiBzID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvLyBBdHRlbXB0IHRvIHBhcnNlIHRoZSBzdHJpbmcgYXMtaXMuXG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2Uocyk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBQYXNzXG4gICAgfVxuICAgIC8vIEluaXRpYWxpemUgdmFyaWFibGVzLlxuICAgIGxldCBuZXdfcyA9IFwiXCI7XG4gICAgY29uc3Qgc3RhY2sgPSBbXTtcbiAgICBsZXQgaXNJbnNpZGVTdHJpbmcgPSBmYWxzZTtcbiAgICBsZXQgZXNjYXBlZCA9IGZhbHNlO1xuICAgIC8vIFByb2Nlc3MgZWFjaCBjaGFyYWN0ZXIgaW4gdGhlIHN0cmluZyBvbmUgYXQgYSB0aW1lLlxuICAgIGZvciAobGV0IGNoYXIgb2Ygcykge1xuICAgICAgICBpZiAoaXNJbnNpZGVTdHJpbmcpIHtcbiAgICAgICAgICAgIGlmIChjaGFyID09PSAnXCInICYmICFlc2NhcGVkKSB7XG4gICAgICAgICAgICAgICAgaXNJbnNpZGVTdHJpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoYXIgPT09IFwiXFxuXCIgJiYgIWVzY2FwZWQpIHtcbiAgICAgICAgICAgICAgICBjaGFyID0gXCJcXFxcblwiOyAvLyBSZXBsYWNlIHRoZSBuZXdsaW5lIGNoYXJhY3RlciB3aXRoIHRoZSBlc2NhcGUgc2VxdWVuY2UuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGFyID09PSBcIlxcXFxcIikge1xuICAgICAgICAgICAgICAgIGVzY2FwZWQgPSAhZXNjYXBlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVzY2FwZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChjaGFyID09PSAnXCInKSB7XG4gICAgICAgICAgICAgICAgaXNJbnNpZGVTdHJpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGVzY2FwZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNoYXIgPT09IFwie1wiKSB7XG4gICAgICAgICAgICAgICAgc3RhY2sucHVzaChcIn1cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjaGFyID09PSBcIltcIikge1xuICAgICAgICAgICAgICAgIHN0YWNrLnB1c2goXCJdXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2hhciA9PT0gXCJ9XCIgfHwgY2hhciA9PT0gXCJdXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhY2sgJiYgc3RhY2tbc3RhY2subGVuZ3RoIC0gMV0gPT09IGNoYXIpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhY2sucG9wKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBNaXNtYXRjaGVkIGNsb3NpbmcgY2hhcmFjdGVyOyB0aGUgaW5wdXQgaXMgbWFsZm9ybWVkLlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gQXBwZW5kIHRoZSBwcm9jZXNzZWQgY2hhcmFjdGVyIHRvIHRoZSBuZXcgc3RyaW5nLlxuICAgICAgICBuZXdfcyArPSBjaGFyO1xuICAgIH1cbiAgICAvLyBJZiB3ZSdyZSBzdGlsbCBpbnNpZGUgYSBzdHJpbmcgYXQgdGhlIGVuZCBvZiBwcm9jZXNzaW5nLFxuICAgIC8vIHdlIG5lZWQgdG8gY2xvc2UgdGhlIHN0cmluZy5cbiAgICBpZiAoaXNJbnNpZGVTdHJpbmcpIHtcbiAgICAgICAgbmV3X3MgKz0gJ1wiJztcbiAgICB9XG4gICAgLy8gQ2xvc2UgYW55IHJlbWFpbmluZyBvcGVuIHN0cnVjdHVyZXMgaW4gdGhlIHJldmVyc2Ugb3JkZXIgdGhhdCB0aGV5IHdlcmUgb3BlbmVkLlxuICAgIGZvciAobGV0IGkgPSBzdGFjay5sZW5ndGggLSAxOyBpID49IDA7IGkgLT0gMSkge1xuICAgICAgICBuZXdfcyArPSBzdGFja1tpXTtcbiAgICB9XG4gICAgLy8gQXR0ZW1wdCB0byBwYXJzZSB0aGUgbW9kaWZpZWQgc3RyaW5nIGFzIEpTT04uXG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UobmV3X3MpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gSWYgd2Ugc3RpbGwgY2FuJ3QgcGFyc2UgdGhlIHN0cmluZyBhcyBKU09OLCByZXR1cm4gbnVsbCB0byBpbmRpY2F0ZSBmYWlsdXJlLlxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiQmFzZUN1bXVsYXRpdmVUcmFuc2Zvcm1PdXRwdXRQYXJzZXIiLCJjb21wYXJlIiwiSnNvbk91dHB1dFBhcnNlciIsImNvbnN0cnVjdG9yIiwiYXJndW1lbnRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImxjX25hbWUiLCJfZGlmZiIsInByZXYiLCJuZXh0IiwidW5kZWZpbmVkIiwib3AiLCJwYXRoIiwicGFyc2VQYXJ0aWFsUmVzdWx0IiwiZ2VuZXJhdGlvbnMiLCJwYXJzZUpzb25NYXJrZG93biIsInRleHQiLCJwYXJzZSIsIkpTT04iLCJnZXRGb3JtYXRJbnN0cnVjdGlvbnMiLCJzIiwicGFyc2VyIiwicGFyc2VQYXJ0aWFsSnNvbiIsInRyaW0iLCJtYXRjaCIsImV4ZWMiLCJlcnJvciIsIm5ld19zIiwic3RhY2siLCJpc0luc2lkZVN0cmluZyIsImVzY2FwZWQiLCJjaGFyIiwicHVzaCIsImxlbmd0aCIsInBvcCIsImkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/output_parsers/json.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/output_parsers/list.js":
/*!******************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/list.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CommaSeparatedListOutputParser: () => (/* binding */ CommaSeparatedListOutputParser),\n/* harmony export */   CustomListOutputParser: () => (/* binding */ CustomListOutputParser),\n/* harmony export */   ListOutputParser: () => (/* binding */ ListOutputParser),\n/* harmony export */   MarkdownListOutputParser: () => (/* binding */ MarkdownListOutputParser),\n/* harmony export */   NumberedListOutputParser: () => (/* binding */ NumberedListOutputParser)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/base.js\");\n/* harmony import */ var _transform_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./transform.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/transform.js\");\n\n\n/**\n * Class to parse the output of an LLM call to a list.\n * @augments BaseOutputParser\n */ class ListOutputParser extends _transform_js__WEBPACK_IMPORTED_MODULE_1__.BaseTransformOutputParser {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"re\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n    }\n    async *_transform(inputGenerator) {\n        let buffer = \"\";\n        for await (const input of inputGenerator){\n            if (typeof input === \"string\") {\n                // add current chunk to buffer\n                buffer += input;\n            } else {\n                // extract message content and add to buffer\n                buffer += input.content;\n            }\n            // get parts in buffer\n            if (!this.re) {\n                const parts = await this.parse(buffer);\n                if (parts.length > 1) {\n                    // if there are multiple parts, yield all but the last one\n                    for (const part of parts.slice(0, -1)){\n                        yield [\n                            part\n                        ];\n                    }\n                    // keep the last part in the buffer\n                    buffer = parts[parts.length - 1];\n                }\n            } else {\n                // if there is a regex, get all matches\n                const matches = [\n                    ...buffer.matchAll(this.re)\n                ];\n                if (matches.length > 1) {\n                    let doneIdx = 0;\n                    // if there are multiple matches, yield all but the last one\n                    for (const match of matches.slice(0, -1)){\n                        yield [\n                            match[1]\n                        ];\n                        doneIdx += (match.index ?? 0) + match[0].length;\n                    }\n                    // keep the last match in the buffer\n                    buffer = buffer.slice(doneIdx);\n                }\n            }\n        }\n        // yield the last part\n        for (const part of (await this.parse(buffer))){\n            yield [\n                part\n            ];\n        }\n    }\n}\n/**\n * Class to parse the output of an LLM call as a comma-separated list.\n * @augments ListOutputParser\n */ class CommaSeparatedListOutputParser extends ListOutputParser {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"output_parsers\",\n                \"list\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n    }\n    static lc_name() {\n        return \"CommaSeparatedListOutputParser\";\n    }\n    /**\n     * Parses the given text into an array of strings, using a comma as the\n     * separator. If the parsing fails, throws an OutputParserException.\n     * @param text The text to parse.\n     * @returns An array of strings obtained by splitting the input text at each comma.\n     */ async parse(text) {\n        try {\n            return text.trim().split(\",\").map((s)=>s.trim());\n        } catch (e) {\n            throw new _base_js__WEBPACK_IMPORTED_MODULE_0__.OutputParserException(`Could not parse output: ${text}`, text);\n        }\n    }\n    /**\n     * Provides instructions on the expected format of the response for the\n     * CommaSeparatedListOutputParser.\n     * @returns A string containing instructions on the expected format of the response.\n     */ getFormatInstructions() {\n        return `Your response should be a list of comma separated values, eg: \\`foo, bar, baz\\``;\n    }\n}\n/**\n * Class to parse the output of an LLM call to a list with a specific length and separator.\n * @augments ListOutputParser\n */ class CustomListOutputParser extends ListOutputParser {\n    constructor({ length, separator }){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"output_parsers\",\n                \"list\"\n            ]\n        });\n        Object.defineProperty(this, \"length\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"separator\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.length = length;\n        this.separator = separator || \",\";\n    }\n    /**\n     * Parses the given text into an array of strings, using the specified\n     * separator. If the parsing fails or the number of items in the list\n     * doesn't match the expected length, throws an OutputParserException.\n     * @param text The text to parse.\n     * @returns An array of strings obtained by splitting the input text at each occurrence of the specified separator.\n     */ async parse(text) {\n        try {\n            const items = text.trim().split(this.separator).map((s)=>s.trim());\n            if (this.length !== undefined && items.length !== this.length) {\n                throw new _base_js__WEBPACK_IMPORTED_MODULE_0__.OutputParserException(`Incorrect number of items. Expected ${this.length}, got ${items.length}.`);\n            }\n            return items;\n        } catch (e) {\n            if (Object.getPrototypeOf(e) === _base_js__WEBPACK_IMPORTED_MODULE_0__.OutputParserException.prototype) {\n                throw e;\n            }\n            throw new _base_js__WEBPACK_IMPORTED_MODULE_0__.OutputParserException(`Could not parse output: ${text}`);\n        }\n    }\n    /**\n     * Provides instructions on the expected format of the response for the\n     * CustomListOutputParser, including the number of items and the\n     * separator.\n     * @returns A string containing instructions on the expected format of the response.\n     */ getFormatInstructions() {\n        return `Your response should be a list of ${this.length === undefined ? \"\" : `${this.length} `}items separated by \"${this.separator}\" (eg: \\`foo${this.separator} bar${this.separator} baz\\`)`;\n    }\n}\nclass NumberedListOutputParser extends ListOutputParser {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"output_parsers\",\n                \"list\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"re\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: /\\d+\\.\\s([^\\n]+)/g\n        });\n    }\n    static lc_name() {\n        return \"NumberedListOutputParser\";\n    }\n    getFormatInstructions() {\n        return `Your response should be a numbered list with each item on a new line. For example: \\n\\n1. foo\\n\\n2. bar\\n\\n3. baz`;\n    }\n    async parse(text) {\n        return [\n            ...text.matchAll(this.re) ?? []\n        ].map((m)=>m[1]);\n    }\n}\nclass MarkdownListOutputParser extends ListOutputParser {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"output_parsers\",\n                \"list\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"re\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: /^\\s*[-*]\\s([^\\n]+)$/gm\n        });\n    }\n    static lc_name() {\n        return \"NumberedListOutputParser\";\n    }\n    getFormatInstructions() {\n        return `Your response should be a numbered list with each item on a new line. For example: \\n\\n1. foo\\n\\n2. bar\\n\\n3. baz`;\n    }\n    async parse(text) {\n        return [\n            ...text.matchAll(this.re) ?? []\n        ].map((m)=>m[1]);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvbGlzdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQWtEO0FBQ1M7QUFDM0Q7OztDQUdDLEdBQ00sTUFBTUUseUJBQXlCRCxvRUFBeUJBO0lBQzNERSxhQUFjO1FBQ1YsS0FBSyxJQUFJQztRQUNUQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLE1BQU07WUFDOUJDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtJQUNKO0lBQ0EsT0FBT0MsV0FBV0MsY0FBYyxFQUFFO1FBQzlCLElBQUlDLFNBQVM7UUFDYixXQUFXLE1BQU1DLFNBQVNGLGVBQWdCO1lBQ3RDLElBQUksT0FBT0UsVUFBVSxVQUFVO2dCQUMzQiw4QkFBOEI7Z0JBQzlCRCxVQUFVQztZQUNkLE9BQ0s7Z0JBQ0QsNENBQTRDO2dCQUM1Q0QsVUFBVUMsTUFBTUMsT0FBTztZQUMzQjtZQUNBLHNCQUFzQjtZQUN0QixJQUFJLENBQUMsSUFBSSxDQUFDQyxFQUFFLEVBQUU7Z0JBQ1YsTUFBTUMsUUFBUSxNQUFNLElBQUksQ0FBQ0MsS0FBSyxDQUFDTDtnQkFDL0IsSUFBSUksTUFBTUUsTUFBTSxHQUFHLEdBQUc7b0JBQ2xCLDBEQUEwRDtvQkFDMUQsS0FBSyxNQUFNQyxRQUFRSCxNQUFNSSxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUk7d0JBQ25DLE1BQU07NEJBQUNEO3lCQUFLO29CQUNoQjtvQkFDQSxtQ0FBbUM7b0JBQ25DUCxTQUFTSSxLQUFLLENBQUNBLE1BQU1FLE1BQU0sR0FBRyxFQUFFO2dCQUNwQztZQUNKLE9BQ0s7Z0JBQ0QsdUNBQXVDO2dCQUN2QyxNQUFNRyxVQUFVO3VCQUFJVCxPQUFPVSxRQUFRLENBQUMsSUFBSSxDQUFDUCxFQUFFO2lCQUFFO2dCQUM3QyxJQUFJTSxRQUFRSCxNQUFNLEdBQUcsR0FBRztvQkFDcEIsSUFBSUssVUFBVTtv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QUFFLENBQUNnQixHQUFHLENBQUMsQ0FBQ1csSUFBTUEsQ0FBQyxDQUFDLEVBQUU7SUFDOUQ7QUFDSjtBQUNPLE1BQU1DLGlDQUFpQzFDO0lBQzFDQyxhQUFjO1FBQ1YsS0FBSyxJQUFJQztRQUNUQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztnQkFBQztnQkFBa0I7Z0JBQWtCO2FBQU87UUFDdkQ7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxtQkFBbUI7WUFDM0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLE1BQU07WUFDOUJDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtJQUNKO0lBQ0EsT0FBT2tCLFVBQVU7UUFDYixPQUFPO0lBQ1g7SUFDQU8sd0JBQXdCO1FBQ3BCLE9BQU8sQ0FBQyxpSEFBaUgsQ0FBQztJQUM5SDtJQUNBLE1BQU1qQixNQUFNVyxJQUFJLEVBQUU7UUFDZCxPQUFPO2VBQUtBLEtBQUtOLFFBQVEsQ0FBQyxJQUFJLENBQUNQLEVBQUUsS0FBSyxFQUFFO1NBQUUsQ0FBQ2dCLEdBQUcsQ0FBQyxDQUFDVyxJQUFNQSxDQUFDLENBQUMsRUFBRTtJQUM5RDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L291dHB1dF9wYXJzZXJzL2xpc3QuanM/YTk0NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBPdXRwdXRQYXJzZXJFeGNlcHRpb24gfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBCYXNlVHJhbnNmb3JtT3V0cHV0UGFyc2VyIH0gZnJvbSBcIi4vdHJhbnNmb3JtLmpzXCI7XG4vKipcbiAqIENsYXNzIHRvIHBhcnNlIHRoZSBvdXRwdXQgb2YgYW4gTExNIGNhbGwgdG8gYSBsaXN0LlxuICogQGF1Z21lbnRzIEJhc2VPdXRwdXRQYXJzZXJcbiAqL1xuZXhwb3J0IGNsYXNzIExpc3RPdXRwdXRQYXJzZXIgZXh0ZW5kcyBCYXNlVHJhbnNmb3JtT3V0cHV0UGFyc2VyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicmVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgKl90cmFuc2Zvcm0oaW5wdXRHZW5lcmF0b3IpIHtcbiAgICAgICAgbGV0IGJ1ZmZlciA9IFwiXCI7XG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgaW5wdXQgb2YgaW5wdXRHZW5lcmF0b3IpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAvLyBhZGQgY3VycmVudCBjaHVuayB0byBidWZmZXJcbiAgICAgICAgICAgICAgICBidWZmZXIgKz0gaW5wdXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBleHRyYWN0IG1lc3NhZ2UgY29udGVudCBhbmQgYWRkIHRvIGJ1ZmZlclxuICAgICAgICAgICAgICAgIGJ1ZmZlciArPSBpbnB1dC5jb250ZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZ2V0IHBhcnRzIGluIGJ1ZmZlclxuICAgICAgICAgICAgaWYgKCF0aGlzLnJlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBhd2FpdCB0aGlzLnBhcnNlKGJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlcmUgYXJlIG11bHRpcGxlIHBhcnRzLCB5aWVsZCBhbGwgYnV0IHRoZSBsYXN0IG9uZVxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgcGFydHMuc2xpY2UoMCwgLTEpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCBbcGFydF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8ga2VlcCB0aGUgbGFzdCBwYXJ0IGluIHRoZSBidWZmZXJcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyID0gcGFydHNbcGFydHMubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgYSByZWdleCwgZ2V0IGFsbCBtYXRjaGVzXG4gICAgICAgICAgICAgICAgY29uc3QgbWF0Y2hlcyA9IFsuLi5idWZmZXIubWF0Y2hBbGwodGhpcy5yZSldO1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRvbmVJZHggPSAwO1xuICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgbWF0Y2hlcywgeWllbGQgYWxsIGJ1dCB0aGUgbGFzdCBvbmVcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBtYXRjaCBvZiBtYXRjaGVzLnNsaWNlKDAsIC0xKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgW21hdGNoWzFdXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvbmVJZHggKz0gKG1hdGNoLmluZGV4ID8/IDApICsgbWF0Y2hbMF0ubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIGtlZXAgdGhlIGxhc3QgbWF0Y2ggaW4gdGhlIGJ1ZmZlclxuICAgICAgICAgICAgICAgICAgICBidWZmZXIgPSBidWZmZXIuc2xpY2UoZG9uZUlkeCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHlpZWxkIHRoZSBsYXN0IHBhcnRcbiAgICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIGF3YWl0IHRoaXMucGFyc2UoYnVmZmVyKSkge1xuICAgICAgICAgICAgeWllbGQgW3BhcnRdO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBDbGFzcyB0byBwYXJzZSB0aGUgb3V0cHV0IG9mIGFuIExMTSBjYWxsIGFzIGEgY29tbWEtc2VwYXJhdGVkIGxpc3QuXG4gKiBAYXVnbWVudHMgTGlzdE91dHB1dFBhcnNlclxuICovXG5leHBvcnQgY2xhc3MgQ29tbWFTZXBhcmF0ZWRMaXN0T3V0cHV0UGFyc2VyIGV4dGVuZHMgTGlzdE91dHB1dFBhcnNlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJvdXRwdXRfcGFyc2Vyc1wiLCBcImxpc3RcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkNvbW1hU2VwYXJhdGVkTGlzdE91dHB1dFBhcnNlclwiO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgdGhlIGdpdmVuIHRleHQgaW50byBhbiBhcnJheSBvZiBzdHJpbmdzLCB1c2luZyBhIGNvbW1hIGFzIHRoZVxuICAgICAqIHNlcGFyYXRvci4gSWYgdGhlIHBhcnNpbmcgZmFpbHMsIHRocm93cyBhbiBPdXRwdXRQYXJzZXJFeGNlcHRpb24uXG4gICAgICogQHBhcmFtIHRleHQgVGhlIHRleHQgdG8gcGFyc2UuXG4gICAgICogQHJldHVybnMgQW4gYXJyYXkgb2Ygc3RyaW5ncyBvYnRhaW5lZCBieSBzcGxpdHRpbmcgdGhlIGlucHV0IHRleHQgYXQgZWFjaCBjb21tYS5cbiAgICAgKi9cbiAgICBhc3luYyBwYXJzZSh0ZXh0KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gdGV4dFxuICAgICAgICAgICAgICAgIC50cmltKClcbiAgICAgICAgICAgICAgICAuc3BsaXQoXCIsXCIpXG4gICAgICAgICAgICAgICAgLm1hcCgocykgPT4gcy50cmltKCkpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT3V0cHV0UGFyc2VyRXhjZXB0aW9uKGBDb3VsZCBub3QgcGFyc2Ugb3V0cHV0OiAke3RleHR9YCwgdGV4dCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJvdmlkZXMgaW5zdHJ1Y3Rpb25zIG9uIHRoZSBleHBlY3RlZCBmb3JtYXQgb2YgdGhlIHJlc3BvbnNlIGZvciB0aGVcbiAgICAgKiBDb21tYVNlcGFyYXRlZExpc3RPdXRwdXRQYXJzZXIuXG4gICAgICogQHJldHVybnMgQSBzdHJpbmcgY29udGFpbmluZyBpbnN0cnVjdGlvbnMgb24gdGhlIGV4cGVjdGVkIGZvcm1hdCBvZiB0aGUgcmVzcG9uc2UuXG4gICAgICovXG4gICAgZ2V0Rm9ybWF0SW5zdHJ1Y3Rpb25zKCkge1xuICAgICAgICByZXR1cm4gYFlvdXIgcmVzcG9uc2Ugc2hvdWxkIGJlIGEgbGlzdCBvZiBjb21tYSBzZXBhcmF0ZWQgdmFsdWVzLCBlZzogXFxgZm9vLCBiYXIsIGJhelxcYGA7XG4gICAgfVxufVxuLyoqXG4gKiBDbGFzcyB0byBwYXJzZSB0aGUgb3V0cHV0IG9mIGFuIExMTSBjYWxsIHRvIGEgbGlzdCB3aXRoIGEgc3BlY2lmaWMgbGVuZ3RoIGFuZCBzZXBhcmF0b3IuXG4gKiBAYXVnbWVudHMgTGlzdE91dHB1dFBhcnNlclxuICovXG5leHBvcnQgY2xhc3MgQ3VzdG9tTGlzdE91dHB1dFBhcnNlciBleHRlbmRzIExpc3RPdXRwdXRQYXJzZXIge1xuICAgIGNvbnN0cnVjdG9yKHsgbGVuZ3RoLCBzZXBhcmF0b3IgfSkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwib3V0cHV0X3BhcnNlcnNcIiwgXCJsaXN0XCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsZW5ndGhcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic2VwYXJhdG9yXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gbGVuZ3RoO1xuICAgICAgICB0aGlzLnNlcGFyYXRvciA9IHNlcGFyYXRvciB8fCBcIixcIjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIHRoZSBnaXZlbiB0ZXh0IGludG8gYW4gYXJyYXkgb2Ygc3RyaW5ncywgdXNpbmcgdGhlIHNwZWNpZmllZFxuICAgICAqIHNlcGFyYXRvci4gSWYgdGhlIHBhcnNpbmcgZmFpbHMgb3IgdGhlIG51bWJlciBvZiBpdGVtcyBpbiB0aGUgbGlzdFxuICAgICAqIGRvZXNuJ3QgbWF0Y2ggdGhlIGV4cGVjdGVkIGxlbmd0aCwgdGhyb3dzIGFuIE91dHB1dFBhcnNlckV4Y2VwdGlvbi5cbiAgICAgKiBAcGFyYW0gdGV4dCBUaGUgdGV4dCB0byBwYXJzZS5cbiAgICAgKiBAcmV0dXJucyBBbiBhcnJheSBvZiBzdHJpbmdzIG9idGFpbmVkIGJ5IHNwbGl0dGluZyB0aGUgaW5wdXQgdGV4dCBhdCBlYWNoIG9jY3VycmVuY2Ugb2YgdGhlIHNwZWNpZmllZCBzZXBhcmF0b3IuXG4gICAgICovXG4gICAgYXN5bmMgcGFyc2UodGV4dCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgaXRlbXMgPSB0ZXh0XG4gICAgICAgICAgICAgICAgLnRyaW0oKVxuICAgICAgICAgICAgICAgIC5zcGxpdCh0aGlzLnNlcGFyYXRvcilcbiAgICAgICAgICAgICAgICAubWFwKChzKSA9PiBzLnRyaW0oKSk7XG4gICAgICAgICAgICBpZiAodGhpcy5sZW5ndGggIT09IHVuZGVmaW5lZCAmJiBpdGVtcy5sZW5ndGggIT09IHRoaXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IE91dHB1dFBhcnNlckV4Y2VwdGlvbihgSW5jb3JyZWN0IG51bWJlciBvZiBpdGVtcy4gRXhwZWN0ZWQgJHt0aGlzLmxlbmd0aH0sIGdvdCAke2l0ZW1zLmxlbmd0aH0uYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaXRlbXM7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkgPT09IE91dHB1dFBhcnNlckV4Y2VwdGlvbi5wcm90b3R5cGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgbmV3IE91dHB1dFBhcnNlckV4Y2VwdGlvbihgQ291bGQgbm90IHBhcnNlIG91dHB1dDogJHt0ZXh0fWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByb3ZpZGVzIGluc3RydWN0aW9ucyBvbiB0aGUgZXhwZWN0ZWQgZm9ybWF0IG9mIHRoZSByZXNwb25zZSBmb3IgdGhlXG4gICAgICogQ3VzdG9tTGlzdE91dHB1dFBhcnNlciwgaW5jbHVkaW5nIHRoZSBudW1iZXIgb2YgaXRlbXMgYW5kIHRoZVxuICAgICAqIHNlcGFyYXRvci5cbiAgICAgKiBAcmV0dXJucyBBIHN0cmluZyBjb250YWluaW5nIGluc3RydWN0aW9ucyBvbiB0aGUgZXhwZWN0ZWQgZm9ybWF0IG9mIHRoZSByZXNwb25zZS5cbiAgICAgKi9cbiAgICBnZXRGb3JtYXRJbnN0cnVjdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiBgWW91ciByZXNwb25zZSBzaG91bGQgYmUgYSBsaXN0IG9mICR7dGhpcy5sZW5ndGggPT09IHVuZGVmaW5lZCA/IFwiXCIgOiBgJHt0aGlzLmxlbmd0aH0gYH1pdGVtcyBzZXBhcmF0ZWQgYnkgXCIke3RoaXMuc2VwYXJhdG9yfVwiIChlZzogXFxgZm9vJHt0aGlzLnNlcGFyYXRvcn0gYmFyJHt0aGlzLnNlcGFyYXRvcn0gYmF6XFxgKWA7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE51bWJlcmVkTGlzdE91dHB1dFBhcnNlciBleHRlbmRzIExpc3RPdXRwdXRQYXJzZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwib3V0cHV0X3BhcnNlcnNcIiwgXCJsaXN0XCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiAvXFxkK1xcLlxccyhbXlxcbl0rKS9nXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiTnVtYmVyZWRMaXN0T3V0cHV0UGFyc2VyXCI7XG4gICAgfVxuICAgIGdldEZvcm1hdEluc3RydWN0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIGBZb3VyIHJlc3BvbnNlIHNob3VsZCBiZSBhIG51bWJlcmVkIGxpc3Qgd2l0aCBlYWNoIGl0ZW0gb24gYSBuZXcgbGluZS4gRm9yIGV4YW1wbGU6IFxcblxcbjEuIGZvb1xcblxcbjIuIGJhclxcblxcbjMuIGJhemA7XG4gICAgfVxuICAgIGFzeW5jIHBhcnNlKHRleHQpIHtcbiAgICAgICAgcmV0dXJuIFsuLi4odGV4dC5tYXRjaEFsbCh0aGlzLnJlKSA/PyBbXSldLm1hcCgobSkgPT4gbVsxXSk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIE1hcmtkb3duTGlzdE91dHB1dFBhcnNlciBleHRlbmRzIExpc3RPdXRwdXRQYXJzZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwib3V0cHV0X3BhcnNlcnNcIiwgXCJsaXN0XCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiAvXlxccypbLSpdXFxzKFteXFxuXSspJC9nbVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIk51bWJlcmVkTGlzdE91dHB1dFBhcnNlclwiO1xuICAgIH1cbiAgICBnZXRGb3JtYXRJbnN0cnVjdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiBgWW91ciByZXNwb25zZSBzaG91bGQgYmUgYSBudW1iZXJlZCBsaXN0IHdpdGggZWFjaCBpdGVtIG9uIGEgbmV3IGxpbmUuIEZvciBleGFtcGxlOiBcXG5cXG4xLiBmb29cXG5cXG4yLiBiYXJcXG5cXG4zLiBiYXpgO1xuICAgIH1cbiAgICBhc3luYyBwYXJzZSh0ZXh0KSB7XG4gICAgICAgIHJldHVybiBbLi4uKHRleHQubWF0Y2hBbGwodGhpcy5yZSkgPz8gW10pXS5tYXAoKG0pID0+IG1bMV0pO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJPdXRwdXRQYXJzZXJFeGNlcHRpb24iLCJCYXNlVHJhbnNmb3JtT3V0cHV0UGFyc2VyIiwiTGlzdE91dHB1dFBhcnNlciIsImNvbnN0cnVjdG9yIiwiYXJndW1lbnRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsIl90cmFuc2Zvcm0iLCJpbnB1dEdlbmVyYXRvciIsImJ1ZmZlciIsImlucHV0IiwiY29udGVudCIsInJlIiwicGFydHMiLCJwYXJzZSIsImxlbmd0aCIsInBhcnQiLCJzbGljZSIsIm1hdGNoZXMiLCJtYXRjaEFsbCIsImRvbmVJZHgiLCJtYXRjaCIsImluZGV4IiwiQ29tbWFTZXBhcmF0ZWRMaXN0T3V0cHV0UGFyc2VyIiwibGNfbmFtZSIsInRleHQiLCJ0cmltIiwic3BsaXQiLCJtYXAiLCJzIiwiZSIsImdldEZvcm1hdEluc3RydWN0aW9ucyIsIkN1c3RvbUxpc3RPdXRwdXRQYXJzZXIiLCJzZXBhcmF0b3IiLCJpdGVtcyIsInVuZGVmaW5lZCIsImdldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiTnVtYmVyZWRMaXN0T3V0cHV0UGFyc2VyIiwibSIsIk1hcmtkb3duTGlzdE91dHB1dFBhcnNlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/output_parsers/list.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/output_parsers/string.js":
/*!********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/string.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StringOutputParser: () => (/* binding */ StringOutputParser)\n/* harmony export */ });\n/* harmony import */ var _transform_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./transform.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/transform.js\");\n\n/**\n * OutputParser that parses LLMResult into the top likely string.\n * @example\n * ```typescript\n * const promptTemplate = PromptTemplate.fromTemplate(\n *   \"Tell me a joke about {topic}\",\n * );\n *\n * const chain = RunnableSequence.from([\n *   promptTemplate,\n *   new ChatOpenAI({}),\n *   new StringOutputParser(),\n * ]);\n *\n * const result = await chain.invoke({ topic: \"bears\" });\n * console.log(\"What do you call a bear with no teeth? A gummy bear!\");\n * ```\n */ class StringOutputParser extends _transform_js__WEBPACK_IMPORTED_MODULE_0__.BaseTransformOutputParser {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"output_parsers\",\n                \"string\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n    }\n    static lc_name() {\n        return \"StrOutputParser\";\n    }\n    /**\n     * Parses a string output from an LLM call. This method is meant to be\n     * implemented by subclasses to define how a string output from an LLM\n     * should be parsed.\n     * @param text The string output from an LLM call.\n     * @param callbacks Optional callbacks.\n     * @returns A promise of the parsed output.\n     */ parse(text) {\n        return Promise.resolve(text);\n    }\n    getFormatInstructions() {\n        return \"\";\n    }\n    _textContentToString(content) {\n        return content.text;\n    }\n    _imageUrlContentToString(_content) {\n        throw new Error(`Cannot coerce a multimodal \"image_url\" message part into a string.`);\n    }\n    _messageContentComplexToString(content) {\n        switch(content.type){\n            case \"text\":\n                return this._textContentToString(content);\n            case \"image_url\":\n                return this._imageUrlContentToString(content);\n            default:\n                throw new Error(// eslint-disable-next-line @typescript-eslint/no-explicit-any\n                `Cannot coerce \"${content.type}\" message part into a string.`);\n        }\n    }\n    _baseMessageContentToString(content) {\n        return content.reduce((acc, item)=>acc + this._messageContentComplexToString(item), \"\");\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvc3RyaW5nLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTJEO0FBQzNEOzs7Ozs7Ozs7Ozs7Ozs7OztDQWlCQyxHQUNNLE1BQU1DLDJCQUEyQkQsb0VBQXlCQTtJQUM3REUsYUFBYztRQUNWLEtBQUssSUFBSUM7UUFDVEMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87Z0JBQUM7Z0JBQWtCO2dCQUFrQjthQUFTO1FBQ3pEO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CO1lBQzNDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7SUFDSjtJQUNBLE9BQU9DLFVBQVU7UUFDYixPQUFPO0lBQ1g7SUFDQTs7Ozs7OztLQU9DLEdBQ0RDLE1BQU1DLElBQUksRUFBRTtRQUNSLE9BQU9DLFFBQVFDLE9BQU8sQ0FBQ0Y7SUFDM0I7SUFDQUcsd0JBQXdCO1FBQ3BCLE9BQU87SUFDWDtJQUNBQyxxQkFBcUJDLE9BQU8sRUFBRTtRQUMxQixPQUFPQSxRQUFRTCxJQUFJO0lBQ3ZCO0lBQ0FNLHlCQUF5QkMsUUFBUSxFQUFFO1FBQy9CLE1BQU0sSUFBSUMsTUFBTSxDQUFDLGtFQUFrRSxDQUFDO0lBQ3hGO0lBQ0FDLCtCQUErQkosT0FBTyxFQUFFO1FBQ3BDLE9BQVFBLFFBQVFLLElBQUk7WUFDaEIsS0FBSztnQkFDRCxPQUFPLElBQUksQ0FBQ04sb0JBQW9CLENBQUNDO1lBQ3JDLEtBQUs7Z0JBQ0QsT0FBTyxJQUFJLENBQUNDLHdCQUF3QixDQUFDRDtZQUN6QztnQkFDSSxNQUFNLElBQUlHLE1BQ1YsOERBQThEO2dCQUM5RCxDQUFDLGVBQWUsRUFBRUgsUUFBUUssSUFBSSxDQUFDLDZCQUE2QixDQUFDO1FBQ3JFO0lBQ0o7SUFDQUMsNEJBQTRCTixPQUFPLEVBQUU7UUFDakMsT0FBT0EsUUFBUU8sTUFBTSxDQUFDLENBQUNDLEtBQUtDLE9BQVNELE1BQU0sSUFBSSxDQUFDSiw4QkFBOEIsQ0FBQ0ssT0FBTztJQUMxRjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L291dHB1dF9wYXJzZXJzL3N0cmluZy5qcz82YjI5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VUcmFuc2Zvcm1PdXRwdXRQYXJzZXIgfSBmcm9tIFwiLi90cmFuc2Zvcm0uanNcIjtcbi8qKlxuICogT3V0cHV0UGFyc2VyIHRoYXQgcGFyc2VzIExMTVJlc3VsdCBpbnRvIHRoZSB0b3AgbGlrZWx5IHN0cmluZy5cbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBwcm9tcHRUZW1wbGF0ZSA9IFByb21wdFRlbXBsYXRlLmZyb21UZW1wbGF0ZShcbiAqICAgXCJUZWxsIG1lIGEgam9rZSBhYm91dCB7dG9waWN9XCIsXG4gKiApO1xuICpcbiAqIGNvbnN0IGNoYWluID0gUnVubmFibGVTZXF1ZW5jZS5mcm9tKFtcbiAqICAgcHJvbXB0VGVtcGxhdGUsXG4gKiAgIG5ldyBDaGF0T3BlbkFJKHt9KSxcbiAqICAgbmV3IFN0cmluZ091dHB1dFBhcnNlcigpLFxuICogXSk7XG4gKlxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgY2hhaW4uaW52b2tlKHsgdG9waWM6IFwiYmVhcnNcIiB9KTtcbiAqIGNvbnNvbGUubG9nKFwiV2hhdCBkbyB5b3UgY2FsbCBhIGJlYXIgd2l0aCBubyB0ZWV0aD8gQSBndW1teSBiZWFyIVwiKTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgU3RyaW5nT3V0cHV0UGFyc2VyIGV4dGVuZHMgQmFzZVRyYW5zZm9ybU91dHB1dFBhcnNlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJvdXRwdXRfcGFyc2Vyc1wiLCBcInN0cmluZ1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiU3RyT3V0cHV0UGFyc2VyXCI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIHN0cmluZyBvdXRwdXQgZnJvbSBhbiBMTE0gY2FsbC4gVGhpcyBtZXRob2QgaXMgbWVhbnQgdG8gYmVcbiAgICAgKiBpbXBsZW1lbnRlZCBieSBzdWJjbGFzc2VzIHRvIGRlZmluZSBob3cgYSBzdHJpbmcgb3V0cHV0IGZyb20gYW4gTExNXG4gICAgICogc2hvdWxkIGJlIHBhcnNlZC5cbiAgICAgKiBAcGFyYW0gdGV4dCBUaGUgc3RyaW5nIG91dHB1dCBmcm9tIGFuIExMTSBjYWxsLlxuICAgICAqIEBwYXJhbSBjYWxsYmFja3MgT3B0aW9uYWwgY2FsbGJhY2tzLlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSBvZiB0aGUgcGFyc2VkIG91dHB1dC5cbiAgICAgKi9cbiAgICBwYXJzZSh0ZXh0KSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGV4dCk7XG4gICAgfVxuICAgIGdldEZvcm1hdEluc3RydWN0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxuICAgIF90ZXh0Q29udGVudFRvU3RyaW5nKGNvbnRlbnQpIHtcbiAgICAgICAgcmV0dXJuIGNvbnRlbnQudGV4dDtcbiAgICB9XG4gICAgX2ltYWdlVXJsQ29udGVudFRvU3RyaW5nKF9jb250ZW50KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGNvZXJjZSBhIG11bHRpbW9kYWwgXCJpbWFnZV91cmxcIiBtZXNzYWdlIHBhcnQgaW50byBhIHN0cmluZy5gKTtcbiAgICB9XG4gICAgX21lc3NhZ2VDb250ZW50Q29tcGxleFRvU3RyaW5nKGNvbnRlbnQpIHtcbiAgICAgICAgc3dpdGNoIChjb250ZW50LnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJ0ZXh0XCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RleHRDb250ZW50VG9TdHJpbmcoY29udGVudCk7XG4gICAgICAgICAgICBjYXNlIFwiaW1hZ2VfdXJsXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ltYWdlVXJsQ29udGVudFRvU3RyaW5nKGNvbnRlbnQpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICBgQ2Fubm90IGNvZXJjZSBcIiR7Y29udGVudC50eXBlfVwiIG1lc3NhZ2UgcGFydCBpbnRvIGEgc3RyaW5nLmApO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9iYXNlTWVzc2FnZUNvbnRlbnRUb1N0cmluZyhjb250ZW50KSB7XG4gICAgICAgIHJldHVybiBjb250ZW50LnJlZHVjZSgoYWNjLCBpdGVtKSA9PiBhY2MgKyB0aGlzLl9tZXNzYWdlQ29udGVudENvbXBsZXhUb1N0cmluZyhpdGVtKSwgXCJcIik7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkJhc2VUcmFuc2Zvcm1PdXRwdXRQYXJzZXIiLCJTdHJpbmdPdXRwdXRQYXJzZXIiLCJjb25zdHJ1Y3RvciIsImFyZ3VtZW50cyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJsY19uYW1lIiwicGFyc2UiLCJ0ZXh0IiwiUHJvbWlzZSIsInJlc29sdmUiLCJnZXRGb3JtYXRJbnN0cnVjdGlvbnMiLCJfdGV4dENvbnRlbnRUb1N0cmluZyIsImNvbnRlbnQiLCJfaW1hZ2VVcmxDb250ZW50VG9TdHJpbmciLCJfY29udGVudCIsIkVycm9yIiwiX21lc3NhZ2VDb250ZW50Q29tcGxleFRvU3RyaW5nIiwidHlwZSIsIl9iYXNlTWVzc2FnZUNvbnRlbnRUb1N0cmluZyIsInJlZHVjZSIsImFjYyIsIml0ZW0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/output_parsers/string.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/output_parsers/structured.js":
/*!************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/structured.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsymmetricStructuredOutputParser: () => (/* binding */ AsymmetricStructuredOutputParser),\n/* harmony export */   JsonMarkdownStructuredOutputParser: () => (/* binding */ JsonMarkdownStructuredOutputParser),\n/* harmony export */   StructuredOutputParser: () => (/* binding */ StructuredOutputParser)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/lib/index.mjs\");\n/* harmony import */ var zod_to_json_schema__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod-to-json-schema */ \"(rsc)/./node_modules/zod-to-json-schema/dist/esm/index.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/base.js\");\n\n\n\nclass StructuredOutputParser extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseOutputParser {\n    static lc_name() {\n        return \"StructuredOutputParser\";\n    }\n    toJSON() {\n        return this.toJSONNotImplemented();\n    }\n    constructor(schema){\n        super(schema);\n        Object.defineProperty(this, \"schema\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: schema\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain\",\n                \"output_parsers\",\n                \"structured\"\n            ]\n        });\n    }\n    /**\n     * Creates a new StructuredOutputParser from a Zod schema.\n     * @param schema The Zod schema which the output should match\n     * @returns A new instance of StructuredOutputParser.\n     */ static fromZodSchema(schema) {\n        return new this(schema);\n    }\n    /**\n     * Creates a new StructuredOutputParser from a set of names and\n     * descriptions.\n     * @param schemas An object where each key is a name and each value is a description\n     * @returns A new instance of StructuredOutputParser.\n     */ static fromNamesAndDescriptions(schemas) {\n        const zodSchema = zod__WEBPACK_IMPORTED_MODULE_2__.z.object(Object.fromEntries(Object.entries(schemas).map(([name, description])=>[\n                name,\n                zod__WEBPACK_IMPORTED_MODULE_2__.z.string().describe(description)\n            ])));\n        return new this(zodSchema);\n    }\n    /**\n     * Returns a markdown code snippet with a JSON object formatted according\n     * to the schema.\n     * @param options Optional. The options for formatting the instructions\n     * @returns A markdown code snippet with a JSON object formatted according to the schema.\n     */ getFormatInstructions() {\n        return `You must format your output as a JSON value that adheres to a given \"JSON Schema\" instance.\n\n\"JSON Schema\" is a declarative language that allows you to annotate and validate JSON documents.\n\nFor example, the example \"JSON Schema\" instance {{\"properties\": {{\"foo\": {{\"description\": \"a list of test words\", \"type\": \"array\", \"items\": {{\"type\": \"string\"}}}}}}, \"required\": [\"foo\"]}}}}\nwould match an object with one required property, \"foo\". The \"type\" property specifies \"foo\" must be an \"array\", and the \"description\" property semantically describes it as \"a list of test words\". The items within \"foo\" must be strings.\nThus, the object {{\"foo\": [\"bar\", \"baz\"]}} is a well-formatted instance of this example \"JSON Schema\". The object {{\"properties\": {{\"foo\": [\"bar\", \"baz\"]}}}} is not well-formatted.\n\nYour output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!\n\nHere is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:\n\\`\\`\\`json\n${JSON.stringify((0,zod_to_json_schema__WEBPACK_IMPORTED_MODULE_0__.zodToJsonSchema)(this.schema))}\n\\`\\`\\`\n`;\n    }\n    /**\n     * Parses the given text according to the schema.\n     * @param text The text to parse\n     * @returns The parsed output.\n     */ async parse(text) {\n        try {\n            const json = text.includes(\"```\") ? text.trim().split(/```(?:json)?/)[1] : text.trim();\n            return await this.schema.parseAsync(JSON.parse(json));\n        } catch (e) {\n            throw new _base_js__WEBPACK_IMPORTED_MODULE_1__.OutputParserException(`Failed to parse. Text: \"${text}\". Error: ${e}`, text);\n        }\n    }\n}\n/**\n * A specific type of `StructuredOutputParser` that parses JSON data\n * formatted as a markdown code snippet.\n */ class JsonMarkdownStructuredOutputParser extends StructuredOutputParser {\n    static lc_name() {\n        return \"JsonMarkdownStructuredOutputParser\";\n    }\n    getFormatInstructions(options) {\n        const interpolationDepth = options?.interpolationDepth ?? 1;\n        if (interpolationDepth < 1) {\n            throw new Error(\"f string interpolation depth must be at least 1\");\n        }\n        return `Return a markdown code snippet with a JSON object formatted to look like:\\n\\`\\`\\`json\\n${this._schemaToInstruction((0,zod_to_json_schema__WEBPACK_IMPORTED_MODULE_0__.zodToJsonSchema)(this.schema)).replaceAll(\"{\", \"{\".repeat(interpolationDepth)).replaceAll(\"}\", \"}\".repeat(interpolationDepth))}\\n\\`\\`\\``;\n    }\n    _schemaToInstruction(schemaInput, indent = 2) {\n        const schema = schemaInput;\n        if (\"type\" in schema) {\n            let nullable = false;\n            let type;\n            if (Array.isArray(schema.type)) {\n                const nullIdx = schema.type.findIndex((type)=>type === \"null\");\n                if (nullIdx !== -1) {\n                    nullable = true;\n                    schema.type.splice(nullIdx, 1);\n                }\n                type = schema.type.join(\" | \");\n            } else {\n                type = schema.type;\n            }\n            if (schema.type === \"object\" && schema.properties) {\n                const description = schema.description ? ` // ${schema.description}` : \"\";\n                const properties = Object.entries(schema.properties).map(([key, value])=>{\n                    const isOptional = schema.required?.includes(key) ? \"\" : \" (optional)\";\n                    return `${\" \".repeat(indent)}\"${key}\": ${this._schemaToInstruction(value, indent + 2)}${isOptional}`;\n                }).join(\"\\n\");\n                return `{\\n${properties}\\n${\" \".repeat(indent - 2)}}${description}`;\n            }\n            if (schema.type === \"array\" && schema.items) {\n                const description = schema.description ? ` // ${schema.description}` : \"\";\n                return `array[\\n${\" \".repeat(indent)}${this._schemaToInstruction(schema.items, indent + 2)}\\n${\" \".repeat(indent - 2)}] ${description}`;\n            }\n            const isNullable = nullable ? \" (nullable)\" : \"\";\n            const description = schema.description ? ` // ${schema.description}` : \"\";\n            return `${type}${description}${isNullable}`;\n        }\n        if (\"anyOf\" in schema) {\n            return schema.anyOf.map((s)=>this._schemaToInstruction(s, indent)).join(`\\n${\" \".repeat(indent - 2)}`);\n        }\n        throw new Error(\"unsupported schema type\");\n    }\n    static fromZodSchema(schema) {\n        return new this(schema);\n    }\n    static fromNamesAndDescriptions(schemas) {\n        const zodSchema = zod__WEBPACK_IMPORTED_MODULE_2__.z.object(Object.fromEntries(Object.entries(schemas).map(([name, description])=>[\n                name,\n                zod__WEBPACK_IMPORTED_MODULE_2__.z.string().describe(description)\n            ])));\n        return new this(zodSchema);\n    }\n}\n/**\n * A type of `StructuredOutputParser` that handles asymmetric input and\n * output schemas.\n */ class AsymmetricStructuredOutputParser extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseOutputParser {\n    constructor({ inputSchema }){\n        super(...arguments);\n        Object.defineProperty(this, \"structuredInputParser\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.structuredInputParser = new JsonMarkdownStructuredOutputParser(inputSchema);\n    }\n    async parse(text) {\n        let parsedInput;\n        try {\n            parsedInput = await this.structuredInputParser.parse(text);\n        } catch (e) {\n            throw new _base_js__WEBPACK_IMPORTED_MODULE_1__.OutputParserException(`Failed to parse. Text: \"${text}\". Error: ${e}`, text);\n        }\n        return this.outputProcessor(parsedInput);\n    }\n    getFormatInstructions() {\n        return this.structuredInputParser.getFormatInstructions();\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvc3RydWN0dXJlZC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBd0I7QUFDOEI7QUFDZTtBQUM5RCxNQUFNSSwrQkFBK0JGLHNEQUFnQkE7SUFDeEQsT0FBT0csVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBQyxTQUFTO1FBQ0wsT0FBTyxJQUFJLENBQUNDLG9CQUFvQjtJQUNwQztJQUNBQyxZQUFZQyxNQUFNLENBQUU7UUFDaEIsS0FBSyxDQUFDQTtRQUNOQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVU7WUFDbENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU9OO1FBQ1g7UUFDQUMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87Z0JBQUM7Z0JBQWE7Z0JBQWtCO2FBQWE7UUFDeEQ7SUFDSjtJQUNBOzs7O0tBSUMsR0FDRCxPQUFPQyxjQUFjUCxNQUFNLEVBQUU7UUFDekIsT0FBTyxJQUFJLElBQUksQ0FBQ0E7SUFDcEI7SUFDQTs7Ozs7S0FLQyxHQUNELE9BQU9RLHlCQUF5QkMsT0FBTyxFQUFFO1FBQ3JDLE1BQU1DLFlBQVluQixrQ0FBQ0EsQ0FBQ29CLE1BQU0sQ0FBQ1YsT0FBT1csV0FBVyxDQUFDWCxPQUFPWSxPQUFPLENBQUNKLFNBQVNLLEdBQUcsQ0FBQyxDQUFDLENBQUNDLE1BQU1DLFlBQVksR0FBSztnQkFBQ0Q7Z0JBQU14QixrQ0FBQ0EsQ0FBQzBCLE1BQU0sR0FBR0MsUUFBUSxDQUFDRjthQUFhO1FBQzNJLE9BQU8sSUFBSSxJQUFJLENBQUNOO0lBQ3BCO0lBQ0E7Ozs7O0tBS0MsR0FDRFMsd0JBQXdCO1FBQ3BCLE9BQU8sQ0FBQzs7Ozs7Ozs7Ozs7O0FBWWhCLEVBQUVDLEtBQUtDLFNBQVMsQ0FBQzdCLG1FQUFlQSxDQUFDLElBQUksQ0FBQ1EsTUFBTSxHQUFHOztBQUUvQyxDQUFDO0lBQ0c7SUFDQTs7OztLQUlDLEdBQ0QsTUFBTXNCLE1BQU1DLElBQUksRUFBRTtRQUNkLElBQUk7WUFDQSxNQUFNQyxPQUFPRCxLQUFLRSxRQUFRLENBQUMsU0FDckJGLEtBQUtHLElBQUksR0FBR0MsS0FBSyxDQUFDLGVBQWUsQ0FBQyxFQUFFLEdBQ3BDSixLQUFLRyxJQUFJO1lBQ2YsT0FBTyxNQUFNLElBQUksQ0FBQzFCLE1BQU0sQ0FBQzRCLFVBQVUsQ0FBQ1IsS0FBS0UsS0FBSyxDQUFDRTtRQUNuRCxFQUNBLE9BQU9LLEdBQUc7WUFDTixNQUFNLElBQUluQywyREFBcUJBLENBQUMsQ0FBQyx3QkFBd0IsRUFBRTZCLEtBQUssVUFBVSxFQUFFTSxFQUFFLENBQUMsRUFBRU47UUFDckY7SUFDSjtBQUNKO0FBQ0E7OztDQUdDLEdBQ00sTUFBTU8sMkNBQTJDbkM7SUFDcEQsT0FBT0MsVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBdUIsc0JBQXNCWSxPQUFPLEVBQUU7UUFDM0IsTUFBTUMscUJBQXFCRCxTQUFTQyxzQkFBc0I7UUFDMUQsSUFBSUEscUJBQXFCLEdBQUc7WUFDeEIsTUFBTSxJQUFJQyxNQUFNO1FBQ3BCO1FBQ0EsT0FBTyxDQUFDLHVGQUF1RixFQUFFLElBQUksQ0FBQ0Msb0JBQW9CLENBQUMxQyxtRUFBZUEsQ0FBQyxJQUFJLENBQUNRLE1BQU0sR0FDakptQyxVQUFVLENBQUMsS0FBSyxJQUFJQyxNQUFNLENBQUNKLHFCQUMzQkcsVUFBVSxDQUFDLEtBQUssSUFBSUMsTUFBTSxDQUFDSixxQkFBcUIsUUFBUSxDQUFDO0lBQ2xFO0lBQ0FFLHFCQUFxQkcsV0FBVyxFQUFFQyxTQUFTLENBQUMsRUFBRTtRQUMxQyxNQUFNdEMsU0FBU3FDO1FBQ2YsSUFBSSxVQUFVckMsUUFBUTtZQUNsQixJQUFJdUMsV0FBVztZQUNmLElBQUlDO1lBQ0osSUFBSUMsTUFBTUMsT0FBTyxDQUFDMUMsT0FBT3dDLElBQUksR0FBRztnQkFDNUIsTUFBTUcsVUFBVTNDLE9BQU93QyxJQUFJLENBQUNJLFNBQVMsQ0FBQyxDQUFDSixPQUFTQSxTQUFTO2dCQUN6RCxJQUFJRyxZQUFZLENBQUMsR0FBRztvQkFDaEJKLFdBQVc7b0JBQ1h2QyxPQUFPd0MsSUFBSSxDQUFDSyxNQUFNLENBQUNGLFNBQVM7Z0JBQ2hDO2dCQUNBSCxPQUFPeEMsT0FBT3dDLElBQUksQ0FBQ00sSUFBSSxDQUFDO1lBQzVCLE9BQ0s7Z0JBQ0ROLE9BQU94QyxPQUFPd0MsSUFBSTtZQUN0QjtZQUNBLElBQUl4QyxPQUFPd0MsSUFBSSxLQUFLLFlBQVl4QyxPQUFPK0MsVUFBVSxFQUFFO2dCQUMvQyxNQUFNL0IsY0FBY2hCLE9BQU9nQixXQUFXLEdBQ2hDLENBQUMsSUFBSSxFQUFFaEIsT0FBT2dCLFdBQVcsQ0FBQyxDQUFDLEdBQzNCO2dCQUNOLE1BQU0rQixhQUFhOUMsT0FBT1ksT0FBTyxDQUFDYixPQUFPK0MsVUFBVSxFQUM5Q2pDLEdBQUcsQ0FBQyxDQUFDLENBQUNrQyxLQUFLMUMsTUFBTTtvQkFDbEIsTUFBTTJDLGFBQWFqRCxPQUFPa0QsUUFBUSxFQUFFekIsU0FBU3VCLE9BQ3ZDLEtBQ0E7b0JBQ04sT0FBTyxDQUFDLEVBQUUsSUFBSVosTUFBTSxDQUFDRSxRQUFRLENBQUMsRUFBRVUsSUFBSSxHQUFHLEVBQUUsSUFBSSxDQUFDZCxvQkFBb0IsQ0FBQzVCLE9BQU9nQyxTQUFTLEdBQUcsRUFBRVcsV0FBVyxDQUFDO2dCQUN4RyxHQUNLSCxJQUFJLENBQUM7Z0JBQ1YsT0FBTyxDQUFDLEdBQUcsRUFBRUMsV0FBVyxFQUFFLEVBQUUsSUFBSVgsTUFBTSxDQUFDRSxTQUFTLEdBQUcsQ0FBQyxFQUFFdEIsWUFBWSxDQUFDO1lBQ3ZFO1lBQ0EsSUFBSWhCLE9BQU93QyxJQUFJLEtBQUssV0FBV3hDLE9BQU9tRCxLQUFLLEVBQUU7Z0JBQ3pDLE1BQU1uQyxjQUFjaEIsT0FBT2dCLFdBQVcsR0FDaEMsQ0FBQyxJQUFJLEVBQUVoQixPQUFPZ0IsV0FBVyxDQUFDLENBQUMsR0FDM0I7Z0JBQ04sT0FBTyxDQUFDLFFBQVEsRUFBRSxJQUFJb0IsTUFBTSxDQUFDRSxRQUFRLEVBQUUsSUFBSSxDQUFDSixvQkFBb0IsQ0FBQ2xDLE9BQU9tRCxLQUFLLEVBQUViLFNBQVMsR0FBRyxFQUFFLEVBQUUsSUFBSUYsTUFBTSxDQUFDRSxTQUFTLEdBQUcsRUFBRSxFQUFFdEIsWUFBWSxDQUFDO1lBQzNJO1lBQ0EsTUFBTW9DLGFBQWFiLFdBQVcsZ0JBQWdCO1lBQzlDLE1BQU12QixjQUFjaEIsT0FBT2dCLFdBQVcsR0FBRyxDQUFDLElBQUksRUFBRWhCLE9BQU9nQixXQUFXLENBQUMsQ0FBQyxHQUFHO1lBQ3ZFLE9BQU8sQ0FBQyxFQUFFd0IsS0FBSyxFQUFFeEIsWUFBWSxFQUFFb0MsV0FBVyxDQUFDO1FBQy9DO1FBQ0EsSUFBSSxXQUFXcEQsUUFBUTtZQUNuQixPQUFPQSxPQUFPcUQsS0FBSyxDQUNkdkMsR0FBRyxDQUFDLENBQUN3QyxJQUFNLElBQUksQ0FBQ3BCLG9CQUFvQixDQUFDb0IsR0FBR2hCLFNBQ3hDUSxJQUFJLENBQUMsQ0FBQyxFQUFFLEVBQUUsSUFBSVYsTUFBTSxDQUFDRSxTQUFTLEdBQUcsQ0FBQztRQUMzQztRQUNBLE1BQU0sSUFBSUwsTUFBTTtJQUNwQjtJQUNBLE9BQU8xQixjQUFjUCxNQUFNLEVBQUU7UUFDekIsT0FBTyxJQUFJLElBQUksQ0FBQ0E7SUFDcEI7SUFDQSxPQUFPUSx5QkFBeUJDLE9BQU8sRUFBRTtRQUNyQyxNQUFNQyxZQUFZbkIsa0NBQUNBLENBQUNvQixNQUFNLENBQUNWLE9BQU9XLFdBQVcsQ0FBQ1gsT0FBT1ksT0FBTyxDQUFDSixTQUFTSyxHQUFHLENBQUMsQ0FBQyxDQUFDQyxNQUFNQyxZQUFZLEdBQUs7Z0JBQUNEO2dCQUFNeEIsa0NBQUNBLENBQUMwQixNQUFNLEdBQUdDLFFBQVEsQ0FBQ0Y7YUFBYTtRQUMzSSxPQUFPLElBQUksSUFBSSxDQUFDTjtJQUNwQjtBQUNKO0FBQ0E7OztDQUdDLEdBQ00sTUFBTTZDLHlDQUF5QzlELHNEQUFnQkE7SUFDbEVNLFlBQVksRUFBRXlELFdBQVcsRUFBRSxDQUFFO1FBQ3pCLEtBQUssSUFBSUM7UUFDVHhELE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUseUJBQXlCO1lBQ2pEQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNvRCxxQkFBcUIsR0FBRyxJQUFJNUIsbUNBQW1DMEI7SUFDeEU7SUFDQSxNQUFNbEMsTUFBTUMsSUFBSSxFQUFFO1FBQ2QsSUFBSW9DO1FBQ0osSUFBSTtZQUNBQSxjQUFjLE1BQU0sSUFBSSxDQUFDRCxxQkFBcUIsQ0FBQ3BDLEtBQUssQ0FBQ0M7UUFDekQsRUFDQSxPQUFPTSxHQUFHO1lBQ04sTUFBTSxJQUFJbkMsMkRBQXFCQSxDQUFDLENBQUMsd0JBQXdCLEVBQUU2QixLQUFLLFVBQVUsRUFBRU0sRUFBRSxDQUFDLEVBQUVOO1FBQ3JGO1FBQ0EsT0FBTyxJQUFJLENBQUNxQyxlQUFlLENBQUNEO0lBQ2hDO0lBQ0F4Qyx3QkFBd0I7UUFDcEIsT0FBTyxJQUFJLENBQUN1QyxxQkFBcUIsQ0FBQ3ZDLHFCQUFxQjtJQUMzRDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L291dHB1dF9wYXJzZXJzL3N0cnVjdHVyZWQuanM/NGY1MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB6IH0gZnJvbSBcInpvZFwiO1xuaW1wb3J0IHsgem9kVG9Kc29uU2NoZW1hLCB9IGZyb20gXCJ6b2QtdG8tanNvbi1zY2hlbWFcIjtcbmltcG9ydCB7IEJhc2VPdXRwdXRQYXJzZXIsIE91dHB1dFBhcnNlckV4Y2VwdGlvbiwgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5leHBvcnQgY2xhc3MgU3RydWN0dXJlZE91dHB1dFBhcnNlciBleHRlbmRzIEJhc2VPdXRwdXRQYXJzZXIge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJTdHJ1Y3R1cmVkT3V0cHV0UGFyc2VyXCI7XG4gICAgfVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9KU09OTm90SW1wbGVtZW50ZWQoKTtcbiAgICB9XG4gICAgY29uc3RydWN0b3Ioc2NoZW1hKSB7XG4gICAgICAgIHN1cGVyKHNjaGVtYSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNjaGVtYVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogc2NoZW1hXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpblwiLCBcIm91dHB1dF9wYXJzZXJzXCIsIFwic3RydWN0dXJlZFwiXVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBTdHJ1Y3R1cmVkT3V0cHV0UGFyc2VyIGZyb20gYSBab2Qgc2NoZW1hLlxuICAgICAqIEBwYXJhbSBzY2hlbWEgVGhlIFpvZCBzY2hlbWEgd2hpY2ggdGhlIG91dHB1dCBzaG91bGQgbWF0Y2hcbiAgICAgKiBAcmV0dXJucyBBIG5ldyBpbnN0YW5jZSBvZiBTdHJ1Y3R1cmVkT3V0cHV0UGFyc2VyLlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tWm9kU2NoZW1hKHNjaGVtYSkge1xuICAgICAgICByZXR1cm4gbmV3IHRoaXMoc2NoZW1hKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBTdHJ1Y3R1cmVkT3V0cHV0UGFyc2VyIGZyb20gYSBzZXQgb2YgbmFtZXMgYW5kXG4gICAgICogZGVzY3JpcHRpb25zLlxuICAgICAqIEBwYXJhbSBzY2hlbWFzIEFuIG9iamVjdCB3aGVyZSBlYWNoIGtleSBpcyBhIG5hbWUgYW5kIGVhY2ggdmFsdWUgaXMgYSBkZXNjcmlwdGlvblxuICAgICAqIEByZXR1cm5zIEEgbmV3IGluc3RhbmNlIG9mIFN0cnVjdHVyZWRPdXRwdXRQYXJzZXIuXG4gICAgICovXG4gICAgc3RhdGljIGZyb21OYW1lc0FuZERlc2NyaXB0aW9ucyhzY2hlbWFzKSB7XG4gICAgICAgIGNvbnN0IHpvZFNjaGVtYSA9IHoub2JqZWN0KE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhzY2hlbWFzKS5tYXAoKFtuYW1lLCBkZXNjcmlwdGlvbl0pID0+IFtuYW1lLCB6LnN0cmluZygpLmRlc2NyaWJlKGRlc2NyaXB0aW9uKV0pKSk7XG4gICAgICAgIHJldHVybiBuZXcgdGhpcyh6b2RTY2hlbWEpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbWFya2Rvd24gY29kZSBzbmlwcGV0IHdpdGggYSBKU09OIG9iamVjdCBmb3JtYXR0ZWQgYWNjb3JkaW5nXG4gICAgICogdG8gdGhlIHNjaGVtYS5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25hbC4gVGhlIG9wdGlvbnMgZm9yIGZvcm1hdHRpbmcgdGhlIGluc3RydWN0aW9uc1xuICAgICAqIEByZXR1cm5zIEEgbWFya2Rvd24gY29kZSBzbmlwcGV0IHdpdGggYSBKU09OIG9iamVjdCBmb3JtYXR0ZWQgYWNjb3JkaW5nIHRvIHRoZSBzY2hlbWEuXG4gICAgICovXG4gICAgZ2V0Rm9ybWF0SW5zdHJ1Y3Rpb25zKCkge1xuICAgICAgICByZXR1cm4gYFlvdSBtdXN0IGZvcm1hdCB5b3VyIG91dHB1dCBhcyBhIEpTT04gdmFsdWUgdGhhdCBhZGhlcmVzIHRvIGEgZ2l2ZW4gXCJKU09OIFNjaGVtYVwiIGluc3RhbmNlLlxuXG5cIkpTT04gU2NoZW1hXCIgaXMgYSBkZWNsYXJhdGl2ZSBsYW5ndWFnZSB0aGF0IGFsbG93cyB5b3UgdG8gYW5ub3RhdGUgYW5kIHZhbGlkYXRlIEpTT04gZG9jdW1lbnRzLlxuXG5Gb3IgZXhhbXBsZSwgdGhlIGV4YW1wbGUgXCJKU09OIFNjaGVtYVwiIGluc3RhbmNlIHt7XCJwcm9wZXJ0aWVzXCI6IHt7XCJmb29cIjoge3tcImRlc2NyaXB0aW9uXCI6IFwiYSBsaXN0IG9mIHRlc3Qgd29yZHNcIiwgXCJ0eXBlXCI6IFwiYXJyYXlcIiwgXCJpdGVtc1wiOiB7e1widHlwZVwiOiBcInN0cmluZ1wifX19fX19LCBcInJlcXVpcmVkXCI6IFtcImZvb1wiXX19fX1cbndvdWxkIG1hdGNoIGFuIG9iamVjdCB3aXRoIG9uZSByZXF1aXJlZCBwcm9wZXJ0eSwgXCJmb29cIi4gVGhlIFwidHlwZVwiIHByb3BlcnR5IHNwZWNpZmllcyBcImZvb1wiIG11c3QgYmUgYW4gXCJhcnJheVwiLCBhbmQgdGhlIFwiZGVzY3JpcHRpb25cIiBwcm9wZXJ0eSBzZW1hbnRpY2FsbHkgZGVzY3JpYmVzIGl0IGFzIFwiYSBsaXN0IG9mIHRlc3Qgd29yZHNcIi4gVGhlIGl0ZW1zIHdpdGhpbiBcImZvb1wiIG11c3QgYmUgc3RyaW5ncy5cblRodXMsIHRoZSBvYmplY3Qge3tcImZvb1wiOiBbXCJiYXJcIiwgXCJiYXpcIl19fSBpcyBhIHdlbGwtZm9ybWF0dGVkIGluc3RhbmNlIG9mIHRoaXMgZXhhbXBsZSBcIkpTT04gU2NoZW1hXCIuIFRoZSBvYmplY3Qge3tcInByb3BlcnRpZXNcIjoge3tcImZvb1wiOiBbXCJiYXJcIiwgXCJiYXpcIl19fX19IGlzIG5vdCB3ZWxsLWZvcm1hdHRlZC5cblxuWW91ciBvdXRwdXQgd2lsbCBiZSBwYXJzZWQgYW5kIHR5cGUtY2hlY2tlZCBhY2NvcmRpbmcgdG8gdGhlIHByb3ZpZGVkIHNjaGVtYSBpbnN0YW5jZSwgc28gbWFrZSBzdXJlIGFsbCBmaWVsZHMgaW4geW91ciBvdXRwdXQgbWF0Y2ggdGhlIHNjaGVtYSBleGFjdGx5IGFuZCB0aGVyZSBhcmUgbm8gdHJhaWxpbmcgY29tbWFzIVxuXG5IZXJlIGlzIHRoZSBKU09OIFNjaGVtYSBpbnN0YW5jZSB5b3VyIG91dHB1dCBtdXN0IGFkaGVyZSB0by4gSW5jbHVkZSB0aGUgZW5jbG9zaW5nIG1hcmtkb3duIGNvZGVibG9jazpcblxcYFxcYFxcYGpzb25cbiR7SlNPTi5zdHJpbmdpZnkoem9kVG9Kc29uU2NoZW1hKHRoaXMuc2NoZW1hKSl9XG5cXGBcXGBcXGBcbmA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyB0aGUgZ2l2ZW4gdGV4dCBhY2NvcmRpbmcgdG8gdGhlIHNjaGVtYS5cbiAgICAgKiBAcGFyYW0gdGV4dCBUaGUgdGV4dCB0byBwYXJzZVxuICAgICAqIEByZXR1cm5zIFRoZSBwYXJzZWQgb3V0cHV0LlxuICAgICAqL1xuICAgIGFzeW5jIHBhcnNlKHRleHQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGpzb24gPSB0ZXh0LmluY2x1ZGVzKFwiYGBgXCIpXG4gICAgICAgICAgICAgICAgPyB0ZXh0LnRyaW0oKS5zcGxpdCgvYGBgKD86anNvbik/LylbMV1cbiAgICAgICAgICAgICAgICA6IHRleHQudHJpbSgpO1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuc2NoZW1hLnBhcnNlQXN5bmMoSlNPTi5wYXJzZShqc29uKSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBPdXRwdXRQYXJzZXJFeGNlcHRpb24oYEZhaWxlZCB0byBwYXJzZS4gVGV4dDogXCIke3RleHR9XCIuIEVycm9yOiAke2V9YCwgdGV4dCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIEEgc3BlY2lmaWMgdHlwZSBvZiBgU3RydWN0dXJlZE91dHB1dFBhcnNlcmAgdGhhdCBwYXJzZXMgSlNPTiBkYXRhXG4gKiBmb3JtYXR0ZWQgYXMgYSBtYXJrZG93biBjb2RlIHNuaXBwZXQuXG4gKi9cbmV4cG9ydCBjbGFzcyBKc29uTWFya2Rvd25TdHJ1Y3R1cmVkT3V0cHV0UGFyc2VyIGV4dGVuZHMgU3RydWN0dXJlZE91dHB1dFBhcnNlciB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkpzb25NYXJrZG93blN0cnVjdHVyZWRPdXRwdXRQYXJzZXJcIjtcbiAgICB9XG4gICAgZ2V0Rm9ybWF0SW5zdHJ1Y3Rpb25zKG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgaW50ZXJwb2xhdGlvbkRlcHRoID0gb3B0aW9ucz8uaW50ZXJwb2xhdGlvbkRlcHRoID8/IDE7XG4gICAgICAgIGlmIChpbnRlcnBvbGF0aW9uRGVwdGggPCAxKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJmIHN0cmluZyBpbnRlcnBvbGF0aW9uIGRlcHRoIG11c3QgYmUgYXQgbGVhc3QgMVwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYFJldHVybiBhIG1hcmtkb3duIGNvZGUgc25pcHBldCB3aXRoIGEgSlNPTiBvYmplY3QgZm9ybWF0dGVkIHRvIGxvb2sgbGlrZTpcXG5cXGBcXGBcXGBqc29uXFxuJHt0aGlzLl9zY2hlbWFUb0luc3RydWN0aW9uKHpvZFRvSnNvblNjaGVtYSh0aGlzLnNjaGVtYSkpXG4gICAgICAgICAgICAucmVwbGFjZUFsbChcIntcIiwgXCJ7XCIucmVwZWF0KGludGVycG9sYXRpb25EZXB0aCkpXG4gICAgICAgICAgICAucmVwbGFjZUFsbChcIn1cIiwgXCJ9XCIucmVwZWF0KGludGVycG9sYXRpb25EZXB0aCkpfVxcblxcYFxcYFxcYGA7XG4gICAgfVxuICAgIF9zY2hlbWFUb0luc3RydWN0aW9uKHNjaGVtYUlucHV0LCBpbmRlbnQgPSAyKSB7XG4gICAgICAgIGNvbnN0IHNjaGVtYSA9IHNjaGVtYUlucHV0O1xuICAgICAgICBpZiAoXCJ0eXBlXCIgaW4gc2NoZW1hKSB7XG4gICAgICAgICAgICBsZXQgbnVsbGFibGUgPSBmYWxzZTtcbiAgICAgICAgICAgIGxldCB0eXBlO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc2NoZW1hLnR5cGUpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbnVsbElkeCA9IHNjaGVtYS50eXBlLmZpbmRJbmRleCgodHlwZSkgPT4gdHlwZSA9PT0gXCJudWxsXCIpO1xuICAgICAgICAgICAgICAgIGlmIChudWxsSWR4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBudWxsYWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHNjaGVtYS50eXBlLnNwbGljZShudWxsSWR4LCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdHlwZSA9IHNjaGVtYS50eXBlLmpvaW4oXCIgfCBcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0eXBlID0gc2NoZW1hLnR5cGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2NoZW1hLnR5cGUgPT09IFwib2JqZWN0XCIgJiYgc2NoZW1hLnByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IHNjaGVtYS5kZXNjcmlwdGlvblxuICAgICAgICAgICAgICAgICAgICA/IGAgLy8gJHtzY2hlbWEuZGVzY3JpcHRpb259YFxuICAgICAgICAgICAgICAgICAgICA6IFwiXCI7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvcGVydGllcyA9IE9iamVjdC5lbnRyaWVzKHNjaGVtYS5wcm9wZXJ0aWVzKVxuICAgICAgICAgICAgICAgICAgICAubWFwKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNPcHRpb25hbCA9IHNjaGVtYS5yZXF1aXJlZD8uaW5jbHVkZXMoa2V5KVxuICAgICAgICAgICAgICAgICAgICAgICAgPyBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICA6IFwiIChvcHRpb25hbClcIjtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGAke1wiIFwiLnJlcGVhdChpbmRlbnQpfVwiJHtrZXl9XCI6ICR7dGhpcy5fc2NoZW1hVG9JbnN0cnVjdGlvbih2YWx1ZSwgaW5kZW50ICsgMil9JHtpc09wdGlvbmFsfWA7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmpvaW4oXCJcXG5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGB7XFxuJHtwcm9wZXJ0aWVzfVxcbiR7XCIgXCIucmVwZWF0KGluZGVudCAtIDIpfX0ke2Rlc2NyaXB0aW9ufWA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2NoZW1hLnR5cGUgPT09IFwiYXJyYXlcIiAmJiBzY2hlbWEuaXRlbXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IHNjaGVtYS5kZXNjcmlwdGlvblxuICAgICAgICAgICAgICAgICAgICA/IGAgLy8gJHtzY2hlbWEuZGVzY3JpcHRpb259YFxuICAgICAgICAgICAgICAgICAgICA6IFwiXCI7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGBhcnJheVtcXG4ke1wiIFwiLnJlcGVhdChpbmRlbnQpfSR7dGhpcy5fc2NoZW1hVG9JbnN0cnVjdGlvbihzY2hlbWEuaXRlbXMsIGluZGVudCArIDIpfVxcbiR7XCIgXCIucmVwZWF0KGluZGVudCAtIDIpfV0gJHtkZXNjcmlwdGlvbn1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgaXNOdWxsYWJsZSA9IG51bGxhYmxlID8gXCIgKG51bGxhYmxlKVwiIDogXCJcIjtcbiAgICAgICAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gc2NoZW1hLmRlc2NyaXB0aW9uID8gYCAvLyAke3NjaGVtYS5kZXNjcmlwdGlvbn1gIDogXCJcIjtcbiAgICAgICAgICAgIHJldHVybiBgJHt0eXBlfSR7ZGVzY3JpcHRpb259JHtpc051bGxhYmxlfWA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFwiYW55T2ZcIiBpbiBzY2hlbWEpIHtcbiAgICAgICAgICAgIHJldHVybiBzY2hlbWEuYW55T2ZcbiAgICAgICAgICAgICAgICAubWFwKChzKSA9PiB0aGlzLl9zY2hlbWFUb0luc3RydWN0aW9uKHMsIGluZGVudCkpXG4gICAgICAgICAgICAgICAgLmpvaW4oYFxcbiR7XCIgXCIucmVwZWF0KGluZGVudCAtIDIpfWApO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcInVuc3VwcG9ydGVkIHNjaGVtYSB0eXBlXCIpO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVpvZFNjaGVtYShzY2hlbWEpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB0aGlzKHNjaGVtYSk7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tTmFtZXNBbmREZXNjcmlwdGlvbnMoc2NoZW1hcykge1xuICAgICAgICBjb25zdCB6b2RTY2hlbWEgPSB6Lm9iamVjdChPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMoc2NoZW1hcykubWFwKChbbmFtZSwgZGVzY3JpcHRpb25dKSA9PiBbbmFtZSwgei5zdHJpbmcoKS5kZXNjcmliZShkZXNjcmlwdGlvbildKSkpO1xuICAgICAgICByZXR1cm4gbmV3IHRoaXMoem9kU2NoZW1hKTtcbiAgICB9XG59XG4vKipcbiAqIEEgdHlwZSBvZiBgU3RydWN0dXJlZE91dHB1dFBhcnNlcmAgdGhhdCBoYW5kbGVzIGFzeW1tZXRyaWMgaW5wdXQgYW5kXG4gKiBvdXRwdXQgc2NoZW1hcy5cbiAqL1xuZXhwb3J0IGNsYXNzIEFzeW1tZXRyaWNTdHJ1Y3R1cmVkT3V0cHV0UGFyc2VyIGV4dGVuZHMgQmFzZU91dHB1dFBhcnNlciB7XG4gICAgY29uc3RydWN0b3IoeyBpbnB1dFNjaGVtYSB9KSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInN0cnVjdHVyZWRJbnB1dFBhcnNlclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnN0cnVjdHVyZWRJbnB1dFBhcnNlciA9IG5ldyBKc29uTWFya2Rvd25TdHJ1Y3R1cmVkT3V0cHV0UGFyc2VyKGlucHV0U2NoZW1hKTtcbiAgICB9XG4gICAgYXN5bmMgcGFyc2UodGV4dCkge1xuICAgICAgICBsZXQgcGFyc2VkSW5wdXQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBwYXJzZWRJbnB1dCA9IGF3YWl0IHRoaXMuc3RydWN0dXJlZElucHV0UGFyc2VyLnBhcnNlKHRleHQpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT3V0cHV0UGFyc2VyRXhjZXB0aW9uKGBGYWlsZWQgdG8gcGFyc2UuIFRleHQ6IFwiJHt0ZXh0fVwiLiBFcnJvcjogJHtlfWAsIHRleHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm91dHB1dFByb2Nlc3NvcihwYXJzZWRJbnB1dCk7XG4gICAgfVxuICAgIGdldEZvcm1hdEluc3RydWN0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RydWN0dXJlZElucHV0UGFyc2VyLmdldEZvcm1hdEluc3RydWN0aW9ucygpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJ6Iiwiem9kVG9Kc29uU2NoZW1hIiwiQmFzZU91dHB1dFBhcnNlciIsIk91dHB1dFBhcnNlckV4Y2VwdGlvbiIsIlN0cnVjdHVyZWRPdXRwdXRQYXJzZXIiLCJsY19uYW1lIiwidG9KU09OIiwidG9KU09OTm90SW1wbGVtZW50ZWQiLCJjb25zdHJ1Y3RvciIsInNjaGVtYSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJmcm9tWm9kU2NoZW1hIiwiZnJvbU5hbWVzQW5kRGVzY3JpcHRpb25zIiwic2NoZW1hcyIsInpvZFNjaGVtYSIsIm9iamVjdCIsImZyb21FbnRyaWVzIiwiZW50cmllcyIsIm1hcCIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsInN0cmluZyIsImRlc2NyaWJlIiwiZ2V0Rm9ybWF0SW5zdHJ1Y3Rpb25zIiwiSlNPTiIsInN0cmluZ2lmeSIsInBhcnNlIiwidGV4dCIsImpzb24iLCJpbmNsdWRlcyIsInRyaW0iLCJzcGxpdCIsInBhcnNlQXN5bmMiLCJlIiwiSnNvbk1hcmtkb3duU3RydWN0dXJlZE91dHB1dFBhcnNlciIsIm9wdGlvbnMiLCJpbnRlcnBvbGF0aW9uRGVwdGgiLCJFcnJvciIsIl9zY2hlbWFUb0luc3RydWN0aW9uIiwicmVwbGFjZUFsbCIsInJlcGVhdCIsInNjaGVtYUlucHV0IiwiaW5kZW50IiwibnVsbGFibGUiLCJ0eXBlIiwiQXJyYXkiLCJpc0FycmF5IiwibnVsbElkeCIsImZpbmRJbmRleCIsInNwbGljZSIsImpvaW4iLCJwcm9wZXJ0aWVzIiwia2V5IiwiaXNPcHRpb25hbCIsInJlcXVpcmVkIiwiaXRlbXMiLCJpc051bGxhYmxlIiwiYW55T2YiLCJzIiwiQXN5bW1ldHJpY1N0cnVjdHVyZWRPdXRwdXRQYXJzZXIiLCJpbnB1dFNjaGVtYSIsImFyZ3VtZW50cyIsInN0cnVjdHVyZWRJbnB1dFBhcnNlciIsInBhcnNlZElucHV0Iiwib3V0cHV0UHJvY2Vzc29yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/output_parsers/structured.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/output_parsers/transform.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/transform.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseCumulativeTransformOutputParser: () => (/* binding */ BaseCumulativeTransformOutputParser),\n/* harmony export */   BaseTransformOutputParser: () => (/* binding */ BaseTransformOutputParser)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/base.js\");\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../messages/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/index.js\");\n/* harmony import */ var _outputs_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../outputs.js */ \"(rsc)/./node_modules/@langchain/core/dist/outputs.js\");\n/* harmony import */ var _utils_cfworker_json_schema_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/@cfworker/json-schema/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/index.js\");\n\n\n\n\n/**\n * Class to parse the output of an LLM call that also allows streaming inputs.\n */ class BaseTransformOutputParser extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseOutputParser {\n    async *_transform(inputGenerator) {\n        for await (const chunk of inputGenerator){\n            if (typeof chunk === \"string\") {\n                yield this.parseResult([\n                    {\n                        text: chunk\n                    }\n                ]);\n            } else {\n                yield this.parseResult([\n                    {\n                        message: chunk,\n                        text: this._baseMessageToString(chunk)\n                    }\n                ]);\n            }\n        }\n    }\n    /**\n     * Transforms an asynchronous generator of input into an asynchronous\n     * generator of parsed output.\n     * @param inputGenerator An asynchronous generator of input.\n     * @param options A configuration object.\n     * @returns An asynchronous generator of parsed output.\n     */ async *transform(inputGenerator, options) {\n        yield* this._transformStreamWithConfig(inputGenerator, this._transform.bind(this), {\n            ...options,\n            runType: \"parser\"\n        });\n    }\n}\n/**\n * A base class for output parsers that can handle streaming input. It\n * extends the `BaseTransformOutputParser` class and provides a method for\n * converting parsed outputs into a diff format.\n */ class BaseCumulativeTransformOutputParser extends BaseTransformOutputParser {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"diff\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        this.diff = fields?.diff ?? this.diff;\n    }\n    async *_transform(inputGenerator) {\n        let prevParsed;\n        let accGen;\n        for await (const chunk of inputGenerator){\n            if (typeof chunk !== \"string\" && typeof chunk.content !== \"string\") {\n                throw new Error(\"Cannot handle non-string output.\");\n            }\n            let chunkGen;\n            if ((0,_messages_index_js__WEBPACK_IMPORTED_MODULE_1__.isBaseMessageChunk)(chunk)) {\n                if (typeof chunk.content !== \"string\") {\n                    throw new Error(\"Cannot handle non-string message output.\");\n                }\n                chunkGen = new _outputs_js__WEBPACK_IMPORTED_MODULE_2__.ChatGenerationChunk({\n                    message: chunk,\n                    text: chunk.content\n                });\n            } else if ((0,_messages_index_js__WEBPACK_IMPORTED_MODULE_1__.isBaseMessage)(chunk)) {\n                if (typeof chunk.content !== \"string\") {\n                    throw new Error(\"Cannot handle non-string message output.\");\n                }\n                chunkGen = new _outputs_js__WEBPACK_IMPORTED_MODULE_2__.ChatGenerationChunk({\n                    message: chunk.toChunk(),\n                    text: chunk.content\n                });\n            } else {\n                chunkGen = new _outputs_js__WEBPACK_IMPORTED_MODULE_2__.GenerationChunk({\n                    text: chunk\n                });\n            }\n            if (accGen === undefined) {\n                accGen = chunkGen;\n            } else {\n                accGen = accGen.concat(chunkGen);\n            }\n            const parsed = await this.parsePartialResult([\n                accGen\n            ]);\n            if (parsed !== undefined && parsed !== null && !(0,_utils_cfworker_json_schema_index_js__WEBPACK_IMPORTED_MODULE_3__.deepCompareStrict)(parsed, prevParsed)) {\n                if (this.diff) {\n                    yield this._diff(prevParsed, parsed);\n                } else {\n                    yield parsed;\n                }\n                prevParsed = parsed;\n            }\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMvdHJhbnNmb3JtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUE2QztBQUM2QjtBQUNKO0FBQ007QUFDNUU7O0NBRUMsR0FDTSxNQUFNTSxrQ0FBa0NOLHNEQUFnQkE7SUFDM0QsT0FBT08sV0FBV0MsY0FBYyxFQUFFO1FBQzlCLFdBQVcsTUFBTUMsU0FBU0QsZUFBZ0I7WUFDdEMsSUFBSSxPQUFPQyxVQUFVLFVBQVU7Z0JBQzNCLE1BQU0sSUFBSSxDQUFDQyxXQUFXLENBQUM7b0JBQUM7d0JBQUVDLE1BQU1GO29CQUFNO2lCQUFFO1lBQzVDLE9BQ0s7Z0JBQ0QsTUFBTSxJQUFJLENBQUNDLFdBQVcsQ0FBQztvQkFDbkI7d0JBQ0lFLFNBQVNIO3dCQUNURSxNQUFNLElBQUksQ0FBQ0Usb0JBQW9CLENBQUNKO29CQUNwQztpQkFDSDtZQUNMO1FBQ0o7SUFDSjtJQUNBOzs7Ozs7S0FNQyxHQUNELE9BQU9LLFVBQVVOLGNBQWMsRUFBRU8sT0FBTyxFQUFFO1FBQ3RDLE9BQU8sSUFBSSxDQUFDQywwQkFBMEIsQ0FBQ1IsZ0JBQWdCLElBQUksQ0FBQ0QsVUFBVSxDQUFDVSxJQUFJLENBQUMsSUFBSSxHQUFHO1lBQy9FLEdBQUdGLE9BQU87WUFDVkcsU0FBUztRQUNiO0lBQ0o7QUFDSjtBQUNBOzs7O0NBSUMsR0FDTSxNQUFNQyw0Q0FBNENiO0lBQ3JEYyxZQUFZQyxNQUFNLENBQUU7UUFDaEIsS0FBSyxDQUFDQTtRQUNOQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBLElBQUksQ0FBQ0MsSUFBSSxHQUFHUCxRQUFRTyxRQUFRLElBQUksQ0FBQ0EsSUFBSTtJQUN6QztJQUNBLE9BQU9yQixXQUFXQyxjQUFjLEVBQUU7UUFDOUIsSUFBSXFCO1FBQ0osSUFBSUM7UUFDSixXQUFXLE1BQU1yQixTQUFTRCxlQUFnQjtZQUN0QyxJQUFJLE9BQU9DLFVBQVUsWUFBWSxPQUFPQSxNQUFNc0IsT0FBTyxLQUFLLFVBQVU7Z0JBQ2hFLE1BQU0sSUFBSUMsTUFBTTtZQUNwQjtZQUNBLElBQUlDO1lBQ0osSUFBSS9CLHNFQUFrQkEsQ0FBQ08sUUFBUTtnQkFDM0IsSUFBSSxPQUFPQSxNQUFNc0IsT0FBTyxLQUFLLFVBQVU7b0JBQ25DLE1BQU0sSUFBSUMsTUFBTTtnQkFDcEI7Z0JBQ0FDLFdBQVcsSUFBSTdCLDREQUFtQkEsQ0FBQztvQkFDL0JRLFNBQVNIO29CQUNURSxNQUFNRixNQUFNc0IsT0FBTztnQkFDdkI7WUFDSixPQUNLLElBQUk5QixpRUFBYUEsQ0FBQ1EsUUFBUTtnQkFDM0IsSUFBSSxPQUFPQSxNQUFNc0IsT0FBTyxLQUFLLFVBQVU7b0JBQ25DLE1BQU0sSUFBSUMsTUFBTTtnQkFDcEI7Z0JBQ0FDLFdBQVcsSUFBSTdCLDREQUFtQkEsQ0FBQztvQkFDL0JRLFNBQVNILE1BQU15QixPQUFPO29CQUN0QnZCLE1BQU1GLE1BQU1zQixPQUFPO2dCQUN2QjtZQUNKLE9BQ0s7Z0JBQ0RFLFdBQVcsSUFBSTlCLHdEQUFlQSxDQUFDO29CQUFFUSxNQUFNRjtnQkFBTTtZQUNqRDtZQUNBLElBQUlxQixXQUFXSyxXQUFXO2dCQUN0QkwsU0FBU0c7WUFDYixPQUNLO2dCQUNESCxTQUFTQSxPQUFPTSxNQUFNLENBQUNIO1lBQzNCO1lBQ0EsTUFBTUksU0FBUyxNQUFNLElBQUksQ0FBQ0Msa0JBQWtCLENBQUM7Z0JBQUNSO2FBQU87WUFDckQsSUFBSU8sV0FBV0YsYUFDWEUsV0FBVyxRQUNYLENBQUNoQyx1RkFBaUJBLENBQUNnQyxRQUFRUixhQUFhO2dCQUN4QyxJQUFJLElBQUksQ0FBQ0QsSUFBSSxFQUFFO29CQUNYLE1BQU0sSUFBSSxDQUFDVyxLQUFLLENBQUNWLFlBQVlRO2dCQUNqQyxPQUNLO29CQUNELE1BQU1BO2dCQUNWO2dCQUNBUixhQUFhUTtZQUNqQjtRQUNKO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLWZvcm0tYnVpbGRlci10dXRvcmlhbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9vdXRwdXRfcGFyc2Vycy90cmFuc2Zvcm0uanM/ZjE1NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlT3V0cHV0UGFyc2VyIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgaXNCYXNlTWVzc2FnZSwgaXNCYXNlTWVzc2FnZUNodW5rLCB9IGZyb20gXCIuLi9tZXNzYWdlcy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgR2VuZXJhdGlvbkNodW5rLCBDaGF0R2VuZXJhdGlvbkNodW5rLCB9IGZyb20gXCIuLi9vdXRwdXRzLmpzXCI7XG5pbXBvcnQgeyBkZWVwQ29tcGFyZVN0cmljdCB9IGZyb20gXCIuLi91dGlscy9AY2Z3b3JrZXIvanNvbi1zY2hlbWEvaW5kZXguanNcIjtcbi8qKlxuICogQ2xhc3MgdG8gcGFyc2UgdGhlIG91dHB1dCBvZiBhbiBMTE0gY2FsbCB0aGF0IGFsc28gYWxsb3dzIHN0cmVhbWluZyBpbnB1dHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlVHJhbnNmb3JtT3V0cHV0UGFyc2VyIGV4dGVuZHMgQmFzZU91dHB1dFBhcnNlciB7XG4gICAgYXN5bmMgKl90cmFuc2Zvcm0oaW5wdXRHZW5lcmF0b3IpIHtcbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBpbnB1dEdlbmVyYXRvcikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjaHVuayA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIHlpZWxkIHRoaXMucGFyc2VSZXN1bHQoW3sgdGV4dDogY2h1bmsgfV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgeWllbGQgdGhpcy5wYXJzZVJlc3VsdChbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNodW5rLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogdGhpcy5fYmFzZU1lc3NhZ2VUb1N0cmluZyhjaHVuayksXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJhbnNmb3JtcyBhbiBhc3luY2hyb25vdXMgZ2VuZXJhdG9yIG9mIGlucHV0IGludG8gYW4gYXN5bmNocm9ub3VzXG4gICAgICogZ2VuZXJhdG9yIG9mIHBhcnNlZCBvdXRwdXQuXG4gICAgICogQHBhcmFtIGlucHV0R2VuZXJhdG9yIEFuIGFzeW5jaHJvbm91cyBnZW5lcmF0b3Igb2YgaW5wdXQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgQSBjb25maWd1cmF0aW9uIG9iamVjdC5cbiAgICAgKiBAcmV0dXJucyBBbiBhc3luY2hyb25vdXMgZ2VuZXJhdG9yIG9mIHBhcnNlZCBvdXRwdXQuXG4gICAgICovXG4gICAgYXN5bmMgKnRyYW5zZm9ybShpbnB1dEdlbmVyYXRvciwgb3B0aW9ucykge1xuICAgICAgICB5aWVsZCogdGhpcy5fdHJhbnNmb3JtU3RyZWFtV2l0aENvbmZpZyhpbnB1dEdlbmVyYXRvciwgdGhpcy5fdHJhbnNmb3JtLmJpbmQodGhpcyksIHtcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICBydW5UeXBlOiBcInBhcnNlclwiLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4vKipcbiAqIEEgYmFzZSBjbGFzcyBmb3Igb3V0cHV0IHBhcnNlcnMgdGhhdCBjYW4gaGFuZGxlIHN0cmVhbWluZyBpbnB1dC4gSXRcbiAqIGV4dGVuZHMgdGhlIGBCYXNlVHJhbnNmb3JtT3V0cHV0UGFyc2VyYCBjbGFzcyBhbmQgcHJvdmlkZXMgYSBtZXRob2QgZm9yXG4gKiBjb252ZXJ0aW5nIHBhcnNlZCBvdXRwdXRzIGludG8gYSBkaWZmIGZvcm1hdC5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VDdW11bGF0aXZlVHJhbnNmb3JtT3V0cHV0UGFyc2VyIGV4dGVuZHMgQmFzZVRyYW5zZm9ybU91dHB1dFBhcnNlciB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImRpZmZcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmRpZmYgPSBmaWVsZHM/LmRpZmYgPz8gdGhpcy5kaWZmO1xuICAgIH1cbiAgICBhc3luYyAqX3RyYW5zZm9ybShpbnB1dEdlbmVyYXRvcikge1xuICAgICAgICBsZXQgcHJldlBhcnNlZDtcbiAgICAgICAgbGV0IGFjY0dlbjtcbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBpbnB1dEdlbmVyYXRvcikge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBjaHVuayAhPT0gXCJzdHJpbmdcIiAmJiB0eXBlb2YgY2h1bmsuY29udGVudCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBoYW5kbGUgbm9uLXN0cmluZyBvdXRwdXQuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGNodW5rR2VuO1xuICAgICAgICAgICAgaWYgKGlzQmFzZU1lc3NhZ2VDaHVuayhjaHVuaykpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNodW5rLmNvbnRlbnQgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGhhbmRsZSBub24tc3RyaW5nIG1lc3NhZ2Ugb3V0cHV0LlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2h1bmtHZW4gPSBuZXcgQ2hhdEdlbmVyYXRpb25DaHVuayh7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNodW5rLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBjaHVuay5jb250ZW50LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNCYXNlTWVzc2FnZShjaHVuaykpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNodW5rLmNvbnRlbnQgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGhhbmRsZSBub24tc3RyaW5nIG1lc3NhZ2Ugb3V0cHV0LlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2h1bmtHZW4gPSBuZXcgQ2hhdEdlbmVyYXRpb25DaHVuayh7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGNodW5rLnRvQ2h1bmsoKSxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogY2h1bmsuY29udGVudCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNodW5rR2VuID0gbmV3IEdlbmVyYXRpb25DaHVuayh7IHRleHQ6IGNodW5rIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFjY0dlbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgYWNjR2VuID0gY2h1bmtHZW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBhY2NHZW4gPSBhY2NHZW4uY29uY2F0KGNodW5rR2VuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IGF3YWl0IHRoaXMucGFyc2VQYXJ0aWFsUmVzdWx0KFthY2NHZW5dKTtcbiAgICAgICAgICAgIGlmIChwYXJzZWQgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgIHBhcnNlZCAhPT0gbnVsbCAmJlxuICAgICAgICAgICAgICAgICFkZWVwQ29tcGFyZVN0cmljdChwYXJzZWQsIHByZXZQYXJzZWQpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGlmZikge1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCB0aGlzLl9kaWZmKHByZXZQYXJzZWQsIHBhcnNlZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCBwYXJzZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHByZXZQYXJzZWQgPSBwYXJzZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4iXSwibmFtZXMiOlsiQmFzZU91dHB1dFBhcnNlciIsImlzQmFzZU1lc3NhZ2UiLCJpc0Jhc2VNZXNzYWdlQ2h1bmsiLCJHZW5lcmF0aW9uQ2h1bmsiLCJDaGF0R2VuZXJhdGlvbkNodW5rIiwiZGVlcENvbXBhcmVTdHJpY3QiLCJCYXNlVHJhbnNmb3JtT3V0cHV0UGFyc2VyIiwiX3RyYW5zZm9ybSIsImlucHV0R2VuZXJhdG9yIiwiY2h1bmsiLCJwYXJzZVJlc3VsdCIsInRleHQiLCJtZXNzYWdlIiwiX2Jhc2VNZXNzYWdlVG9TdHJpbmciLCJ0cmFuc2Zvcm0iLCJvcHRpb25zIiwiX3RyYW5zZm9ybVN0cmVhbVdpdGhDb25maWciLCJiaW5kIiwicnVuVHlwZSIsIkJhc2VDdW11bGF0aXZlVHJhbnNmb3JtT3V0cHV0UGFyc2VyIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiZGlmZiIsInByZXZQYXJzZWQiLCJhY2NHZW4iLCJjb250ZW50IiwiRXJyb3IiLCJjaHVua0dlbiIsInRvQ2h1bmsiLCJ1bmRlZmluZWQiLCJjb25jYXQiLCJwYXJzZWQiLCJwYXJzZVBhcnRpYWxSZXN1bHQiLCJfZGlmZiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/output_parsers/transform.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/output_parsers/xml.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/output_parsers/xml.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   XMLOutputParser: () => (/* binding */ XMLOutputParser),\n/* harmony export */   XML_FORMAT_INSTRUCTIONS: () => (/* binding */ XML_FORMAT_INSTRUCTIONS),\n/* harmony export */   parseXMLMarkdown: () => (/* binding */ parseXMLMarkdown)\n/* harmony export */ });\n/* harmony import */ var _transform_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./transform.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/transform.js\");\n/* harmony import */ var _utils_json_patch_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/json_patch.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/json_patch.js\");\n/* harmony import */ var _utils_sax_js_sax_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/sax-js/sax.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/sax-js/sax.js\");\n\n\n\nconst XML_FORMAT_INSTRUCTIONS = `The output should be formatted as a XML file.\n1. Output should conform to the tags below. \n2. If tags are not given, make them on your own.\n3. Remember to always open and close all the tags.\n\nAs an example, for the tags [\"foo\", \"bar\", \"baz\"]:\n1. String \"<foo>\\n   <bar>\\n      <baz></baz>\\n   </bar>\\n</foo>\" is a well-formatted instance of the schema. \n2. String \"<foo>\\n   <bar>\\n   </foo>\" is a badly-formatted instance.\n3. String \"<foo>\\n   <tag>\\n   </tag>\\n</foo>\" is a badly-formatted instance.\n\nHere are the output tags:\n\\`\\`\\`\n{tags}\n\\`\\`\\``;\nclass XMLOutputParser extends _transform_js__WEBPACK_IMPORTED_MODULE_0__.BaseCumulativeTransformOutputParser {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"tags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"output_parsers\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        this.tags = fields?.tags;\n    }\n    static lc_name() {\n        return \"XMLOutputParser\";\n    }\n    _diff(prev, next) {\n        if (!next) {\n            return undefined;\n        }\n        if (!prev) {\n            return [\n                {\n                    op: \"replace\",\n                    path: \"\",\n                    value: next\n                }\n            ];\n        }\n        return (0,_utils_json_patch_js__WEBPACK_IMPORTED_MODULE_1__.compare)(prev, next);\n    }\n    async parsePartialResult(generations) {\n        return parseXMLMarkdown(generations[0].text);\n    }\n    async parse(text) {\n        return parseXMLMarkdown(text);\n    }\n    getFormatInstructions() {\n        const withTags = !!(this.tags && this.tags.length > 0);\n        return withTags ? XML_FORMAT_INSTRUCTIONS.replace(\"{tags}\", this.tags?.join(\", \") ?? \"\") : XML_FORMAT_INSTRUCTIONS;\n    }\n}\nconst strip = (text)=>text.split(\"\\n\").map((line)=>line.replace(/^\\s+/, \"\")).join(\"\\n\").trim();\nconst parseParsedResult = (input)=>{\n    if (Object.keys(input).length === 0) {\n        return {};\n    }\n    const result = {};\n    if (input.children.length > 0) {\n        result[input.name] = input.children.map(parseParsedResult);\n        return result;\n    } else {\n        result[input.name] = input.text ?? undefined;\n        return result;\n    }\n};\nfunction parseXMLMarkdown(s) {\n    const cleanedString = strip(s);\n    const parser = _utils_sax_js_sax_js__WEBPACK_IMPORTED_MODULE_2__.sax.parser(true);\n    let parsedResult = {};\n    const elementStack = [];\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    parser.onopentag = (node)=>{\n        const element = {\n            name: node.name,\n            attributes: node.attributes,\n            children: [],\n            text: \"\",\n            isSelfClosing: node.isSelfClosing\n        };\n        if (elementStack.length > 0) {\n            const parentElement = elementStack[elementStack.length - 1];\n            parentElement.children.push(element);\n        } else {\n            parsedResult = element;\n        }\n        if (!node.isSelfClosing) {\n            elementStack.push(element);\n        }\n    };\n    parser.onclosetag = ()=>{\n        if (elementStack.length > 0) {\n            const lastElement = elementStack.pop();\n            if (elementStack.length === 0 && lastElement) {\n                parsedResult = lastElement;\n            }\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    parser.ontext = (text)=>{\n        if (elementStack.length > 0) {\n            const currentElement = elementStack[elementStack.length - 1];\n            currentElement.text += text;\n        }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    parser.onattribute = (attr)=>{\n        if (elementStack.length > 0) {\n            const currentElement = elementStack[elementStack.length - 1];\n            currentElement.attributes[attr.name] = attr.value;\n        }\n    };\n    // Try to find XML string within triple backticks.\n    const match = /```(xml)?(.*)```/s.exec(cleanedString);\n    const xmlString = match ? match[2] : cleanedString;\n    parser.write(xmlString).close();\n    // Remove the XML declaration if present\n    if (parsedResult && parsedResult.name === \"?xml\") {\n        parsedResult = parsedResult.children[0];\n    }\n    return parseParsedResult(parsedResult);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0X3BhcnNlcnMveG1sLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFzRTtBQUNyQjtBQUNKO0FBQ3RDLE1BQU1HLDBCQUEwQixDQUFDOzs7Ozs7Ozs7Ozs7O01BYWxDLENBQUMsQ0FBQztBQUNELE1BQU1DLHdCQUF3QkosOEVBQW1DQTtJQUNwRUssWUFBWUMsTUFBTSxDQUFFO1FBQ2hCLEtBQUssQ0FBQ0E7UUFDTkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxRQUFRO1lBQ2hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87Z0JBQUM7Z0JBQWtCO2FBQWlCO1FBQy9DO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CO1lBQzNDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQSxJQUFJLENBQUNDLElBQUksR0FBR1AsUUFBUU87SUFDeEI7SUFDQSxPQUFPQyxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FDLE1BQU1DLElBQUksRUFBRUMsSUFBSSxFQUFFO1FBQ2QsSUFBSSxDQUFDQSxNQUFNO1lBQ1AsT0FBT0M7UUFDWDtRQUNBLElBQUksQ0FBQ0YsTUFBTTtZQUNQLE9BQU87Z0JBQUM7b0JBQUVHLElBQUk7b0JBQVdDLE1BQU07b0JBQUlSLE9BQU9LO2dCQUFLO2FBQUU7UUFDckQ7UUFDQSxPQUFPaEIsNkRBQU9BLENBQUNlLE1BQU1DO0lBQ3pCO0lBQ0EsTUFBTUksbUJBQW1CQyxXQUFXLEVBQUU7UUFDbEMsT0FBT0MsaUJBQWlCRCxXQUFXLENBQUMsRUFBRSxDQUFDRSxJQUFJO0lBQy9DO0lBQ0EsTUFBTUMsTUFBTUQs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S0FBSyxDQUFDLEVBQUUsR0FBR2xCO0lBQ3JDQyxPQUFPb0IsS0FBSyxDQUFDRCxXQUFXRSxLQUFLO0lBQzdCLHdDQUF3QztJQUN4QyxJQUFJcEIsZ0JBQWdCQSxhQUFhSixJQUFJLEtBQUssUUFBUTtRQUM5Q0ksZUFBZUEsYUFBYUwsUUFBUSxDQUFDLEVBQUU7SUFDM0M7SUFDQSxPQUFPSixrQkFBa0JTO0FBQzdCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L291dHB1dF9wYXJzZXJzL3htbC5qcz9kZDQzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VDdW11bGF0aXZlVHJhbnNmb3JtT3V0cHV0UGFyc2VyLCB9IGZyb20gXCIuL3RyYW5zZm9ybS5qc1wiO1xuaW1wb3J0IHsgY29tcGFyZSB9IGZyb20gXCIuLi91dGlscy9qc29uX3BhdGNoLmpzXCI7XG5pbXBvcnQgeyBzYXggfSBmcm9tIFwiLi4vdXRpbHMvc2F4LWpzL3NheC5qc1wiO1xuZXhwb3J0IGNvbnN0IFhNTF9GT1JNQVRfSU5TVFJVQ1RJT05TID0gYFRoZSBvdXRwdXQgc2hvdWxkIGJlIGZvcm1hdHRlZCBhcyBhIFhNTCBmaWxlLlxuMS4gT3V0cHV0IHNob3VsZCBjb25mb3JtIHRvIHRoZSB0YWdzIGJlbG93LiBcbjIuIElmIHRhZ3MgYXJlIG5vdCBnaXZlbiwgbWFrZSB0aGVtIG9uIHlvdXIgb3duLlxuMy4gUmVtZW1iZXIgdG8gYWx3YXlzIG9wZW4gYW5kIGNsb3NlIGFsbCB0aGUgdGFncy5cblxuQXMgYW4gZXhhbXBsZSwgZm9yIHRoZSB0YWdzIFtcImZvb1wiLCBcImJhclwiLCBcImJhelwiXTpcbjEuIFN0cmluZyBcIjxmb28+XFxuICAgPGJhcj5cXG4gICAgICA8YmF6PjwvYmF6PlxcbiAgIDwvYmFyPlxcbjwvZm9vPlwiIGlzIGEgd2VsbC1mb3JtYXR0ZWQgaW5zdGFuY2Ugb2YgdGhlIHNjaGVtYS4gXG4yLiBTdHJpbmcgXCI8Zm9vPlxcbiAgIDxiYXI+XFxuICAgPC9mb28+XCIgaXMgYSBiYWRseS1mb3JtYXR0ZWQgaW5zdGFuY2UuXG4zLiBTdHJpbmcgXCI8Zm9vPlxcbiAgIDx0YWc+XFxuICAgPC90YWc+XFxuPC9mb28+XCIgaXMgYSBiYWRseS1mb3JtYXR0ZWQgaW5zdGFuY2UuXG5cbkhlcmUgYXJlIHRoZSBvdXRwdXQgdGFnczpcblxcYFxcYFxcYFxue3RhZ3N9XG5cXGBcXGBcXGBgO1xuZXhwb3J0IGNsYXNzIFhNTE91dHB1dFBhcnNlciBleHRlbmRzIEJhc2VDdW11bGF0aXZlVHJhbnNmb3JtT3V0cHV0UGFyc2VyIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidGFnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwib3V0cHV0X3BhcnNlcnNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy50YWdzID0gZmllbGRzPy50YWdzO1xuICAgIH1cbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiWE1MT3V0cHV0UGFyc2VyXCI7XG4gICAgfVxuICAgIF9kaWZmKHByZXYsIG5leHQpIHtcbiAgICAgICAgaWYgKCFuZXh0KSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIGlmICghcHJldikge1xuICAgICAgICAgICAgcmV0dXJuIFt7IG9wOiBcInJlcGxhY2VcIiwgcGF0aDogXCJcIiwgdmFsdWU6IG5leHQgfV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbXBhcmUocHJldiwgbmV4dCk7XG4gICAgfVxuICAgIGFzeW5jIHBhcnNlUGFydGlhbFJlc3VsdChnZW5lcmF0aW9ucykge1xuICAgICAgICByZXR1cm4gcGFyc2VYTUxNYXJrZG93bihnZW5lcmF0aW9uc1swXS50ZXh0KTtcbiAgICB9XG4gICAgYXN5bmMgcGFyc2UodGV4dCkge1xuICAgICAgICByZXR1cm4gcGFyc2VYTUxNYXJrZG93bih0ZXh0KTtcbiAgICB9XG4gICAgZ2V0Rm9ybWF0SW5zdHJ1Y3Rpb25zKCkge1xuICAgICAgICBjb25zdCB3aXRoVGFncyA9ICEhKHRoaXMudGFncyAmJiB0aGlzLnRhZ3MubGVuZ3RoID4gMCk7XG4gICAgICAgIHJldHVybiB3aXRoVGFnc1xuICAgICAgICAgICAgPyBYTUxfRk9STUFUX0lOU1RSVUNUSU9OUy5yZXBsYWNlKFwie3RhZ3N9XCIsIHRoaXMudGFncz8uam9pbihcIiwgXCIpID8/IFwiXCIpXG4gICAgICAgICAgICA6IFhNTF9GT1JNQVRfSU5TVFJVQ1RJT05TO1xuICAgIH1cbn1cbmNvbnN0IHN0cmlwID0gKHRleHQpID0+IHRleHRcbiAgICAuc3BsaXQoXCJcXG5cIilcbiAgICAubWFwKChsaW5lKSA9PiBsaW5lLnJlcGxhY2UoL15cXHMrLywgXCJcIikpXG4gICAgLmpvaW4oXCJcXG5cIilcbiAgICAudHJpbSgpO1xuY29uc3QgcGFyc2VQYXJzZWRSZXN1bHQgPSAoaW5wdXQpID0+IHtcbiAgICBpZiAoT2JqZWN0LmtleXMoaW5wdXQpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuICAgIGlmIChpbnB1dC5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJlc3VsdFtpbnB1dC5uYW1lXSA9IGlucHV0LmNoaWxkcmVuLm1hcChwYXJzZVBhcnNlZFJlc3VsdCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXN1bHRbaW5wdXQubmFtZV0gPSBpbnB1dC50ZXh0ID8/IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG59O1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlWE1MTWFya2Rvd24ocykge1xuICAgIGNvbnN0IGNsZWFuZWRTdHJpbmcgPSBzdHJpcChzKTtcbiAgICBjb25zdCBwYXJzZXIgPSBzYXgucGFyc2VyKHRydWUpO1xuICAgIGxldCBwYXJzZWRSZXN1bHQgPSB7fTtcbiAgICBjb25zdCBlbGVtZW50U3RhY2sgPSBbXTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHBhcnNlci5vbm9wZW50YWcgPSAobm9kZSkgPT4ge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0ge1xuICAgICAgICAgICAgbmFtZTogbm9kZS5uYW1lLFxuICAgICAgICAgICAgYXR0cmlidXRlczogbm9kZS5hdHRyaWJ1dGVzLFxuICAgICAgICAgICAgY2hpbGRyZW46IFtdLFxuICAgICAgICAgICAgdGV4dDogXCJcIixcbiAgICAgICAgICAgIGlzU2VsZkNsb3Npbmc6IG5vZGUuaXNTZWxmQ2xvc2luZyxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGVsZW1lbnRTdGFjay5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBwYXJlbnRFbGVtZW50ID0gZWxlbWVudFN0YWNrW2VsZW1lbnRTdGFjay5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIHBhcmVudEVsZW1lbnQuY2hpbGRyZW4ucHVzaChlbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHBhcnNlZFJlc3VsdCA9IGVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFub2RlLmlzU2VsZkNsb3NpbmcpIHtcbiAgICAgICAgICAgIGVsZW1lbnRTdGFjay5wdXNoKGVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBwYXJzZXIub25jbG9zZXRhZyA9ICgpID0+IHtcbiAgICAgICAgaWYgKGVsZW1lbnRTdGFjay5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBsYXN0RWxlbWVudCA9IGVsZW1lbnRTdGFjay5wb3AoKTtcbiAgICAgICAgICAgIGlmIChlbGVtZW50U3RhY2subGVuZ3RoID09PSAwICYmIGxhc3RFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgcGFyc2VkUmVzdWx0ID0gbGFzdEVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgcGFyc2VyLm9udGV4dCA9ICh0ZXh0KSA9PiB7XG4gICAgICAgIGlmIChlbGVtZW50U3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudEVsZW1lbnQgPSBlbGVtZW50U3RhY2tbZWxlbWVudFN0YWNrLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgY3VycmVudEVsZW1lbnQudGV4dCArPSB0ZXh0O1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHBhcnNlci5vbmF0dHJpYnV0ZSA9IChhdHRyKSA9PiB7XG4gICAgICAgIGlmIChlbGVtZW50U3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudEVsZW1lbnQgPSBlbGVtZW50U3RhY2tbZWxlbWVudFN0YWNrLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgY3VycmVudEVsZW1lbnQuYXR0cmlidXRlc1thdHRyLm5hbWVdID0gYXR0ci52YWx1ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgLy8gVHJ5IHRvIGZpbmQgWE1MIHN0cmluZyB3aXRoaW4gdHJpcGxlIGJhY2t0aWNrcy5cbiAgICBjb25zdCBtYXRjaCA9IC9gYGAoeG1sKT8oLiopYGBgL3MuZXhlYyhjbGVhbmVkU3RyaW5nKTtcbiAgICBjb25zdCB4bWxTdHJpbmcgPSBtYXRjaCA/IG1hdGNoWzJdIDogY2xlYW5lZFN0cmluZztcbiAgICBwYXJzZXIud3JpdGUoeG1sU3RyaW5nKS5jbG9zZSgpO1xuICAgIC8vIFJlbW92ZSB0aGUgWE1MIGRlY2xhcmF0aW9uIGlmIHByZXNlbnRcbiAgICBpZiAocGFyc2VkUmVzdWx0ICYmIHBhcnNlZFJlc3VsdC5uYW1lID09PSBcIj94bWxcIikge1xuICAgICAgICBwYXJzZWRSZXN1bHQgPSBwYXJzZWRSZXN1bHQuY2hpbGRyZW5bMF07XG4gICAgfVxuICAgIHJldHVybiBwYXJzZVBhcnNlZFJlc3VsdChwYXJzZWRSZXN1bHQpO1xufVxuIl0sIm5hbWVzIjpbIkJhc2VDdW11bGF0aXZlVHJhbnNmb3JtT3V0cHV0UGFyc2VyIiwiY29tcGFyZSIsInNheCIsIlhNTF9GT1JNQVRfSU5TVFJVQ1RJT05TIiwiWE1MT3V0cHV0UGFyc2VyIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwidGFncyIsImxjX25hbWUiLCJfZGlmZiIsInByZXYiLCJuZXh0IiwidW5kZWZpbmVkIiwib3AiLCJwYXRoIiwicGFyc2VQYXJ0aWFsUmVzdWx0IiwiZ2VuZXJhdGlvbnMiLCJwYXJzZVhNTE1hcmtkb3duIiwidGV4dCIsInBhcnNlIiwiZ2V0Rm9ybWF0SW5zdHJ1Y3Rpb25zIiwid2l0aFRhZ3MiLCJsZW5ndGgiLCJyZXBsYWNlIiwiam9pbiIsInN0cmlwIiwic3BsaXQiLCJtYXAiLCJsaW5lIiwidHJpbSIsInBhcnNlUGFyc2VkUmVzdWx0IiwiaW5wdXQiLCJrZXlzIiwicmVzdWx0IiwiY2hpbGRyZW4iLCJuYW1lIiwicyIsImNsZWFuZWRTdHJpbmciLCJwYXJzZXIiLCJwYXJzZWRSZXN1bHQiLCJlbGVtZW50U3RhY2siLCJvbm9wZW50YWciLCJub2RlIiwiZWxlbWVudCIsImF0dHJpYnV0ZXMiLCJpc1NlbGZDbG9zaW5nIiwicGFyZW50RWxlbWVudCIsInB1c2giLCJvbmNsb3NldGFnIiwibGFzdEVsZW1lbnQiLCJwb3AiLCJvbnRleHQiLCJjdXJyZW50RWxlbWVudCIsIm9uYXR0cmlidXRlIiwiYXR0ciIsIm1hdGNoIiwiZXhlYyIsInhtbFN0cmluZyIsIndyaXRlIiwiY2xvc2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/output_parsers/xml.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/outputs.js":
/*!******************************************************!*\
  !*** ./node_modules/@langchain/core/dist/outputs.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatGenerationChunk: () => (/* binding */ ChatGenerationChunk),\n/* harmony export */   GenerationChunk: () => (/* binding */ GenerationChunk),\n/* harmony export */   RUN_KEY: () => (/* binding */ RUN_KEY)\n/* harmony export */ });\nconst RUN_KEY = \"__run\";\n/**\n * Chunk of a single generation. Used for streaming.\n */ class GenerationChunk {\n    constructor(fields){\n        Object.defineProperty(this, \"text\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"generationInfo\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.text = fields.text;\n        this.generationInfo = fields.generationInfo;\n    }\n    concat(chunk) {\n        return new GenerationChunk({\n            text: this.text + chunk.text,\n            generationInfo: {\n                ...this.generationInfo,\n                ...chunk.generationInfo\n            }\n        });\n    }\n}\nclass ChatGenerationChunk extends GenerationChunk {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"message\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.message = fields.message;\n    }\n    concat(chunk) {\n        return new ChatGenerationChunk({\n            text: this.text + chunk.text,\n            generationInfo: {\n                ...this.generationInfo,\n                ...chunk.generationInfo\n            },\n            message: this.message.concat(chunk.message)\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvb3V0cHV0cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBTyxNQUFNQSxVQUFVLFFBQVE7QUFDL0I7O0NBRUMsR0FDTSxNQUFNQztJQUNUQyxZQUFZQyxNQUFNLENBQUU7UUFDaEJDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtZQUNoQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsOERBQThEO1FBQzlETCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGtCQUFrQjtZQUMxQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDQyxJQUFJLEdBQUdQLE9BQU9PLElBQUk7UUFDdkIsSUFBSSxDQUFDQyxjQUFjLEdBQUdSLE9BQU9RLGNBQWM7SUFDL0M7SUFDQUMsT0FBT0MsS0FBSyxFQUFFO1FBQ1YsT0FBTyxJQUFJWixnQkFBZ0I7WUFDdkJTLE1BQU0sSUFBSSxDQUFDQSxJQUFJLEdBQUdHLE1BQU1ILElBQUk7WUFDNUJDLGdCQUFnQjtnQkFDWixHQUFHLElBQUksQ0FBQ0EsY0FBYztnQkFDdEIsR0FBR0UsTUFBTUYsY0FBYztZQUMzQjtRQUNKO0lBQ0o7QUFDSjtBQUNPLE1BQU1HLDRCQUE0QmI7SUFDckNDLFlBQVlDLE1BQU0sQ0FBRTtRQUNoQixLQUFLLENBQUNBO1FBQ05DLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsV0FBVztZQUNuQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDTSxPQUFPLEdBQUdaLE9BQU9ZLE9BQU87SUFDakM7SUFDQUgsT0FBT0MsS0FBSyxFQUFFO1FBQ1YsT0FBTyxJQUFJQyxvQkFBb0I7WUFDM0JKLE1BQU0sSUFBSSxDQUFDQSxJQUFJLEdBQUdHLE1BQU1ILElBQUk7WUFDNUJDLGdCQUFnQjtnQkFDWixHQUFHLElBQUksQ0FBQ0EsY0FBYztnQkFDdEIsR0FBR0UsTUFBTUYsY0FBYztZQUMzQjtZQUNBSSxTQUFTLElBQUksQ0FBQ0EsT0FBTyxDQUFDSCxNQUFNLENBQUNDLE1BQU1FLE9BQU87UUFDOUM7SUFDSjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L291dHB1dHMuanM/ZDc4MCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgUlVOX0tFWSA9IFwiX19ydW5cIjtcbi8qKlxuICogQ2h1bmsgb2YgYSBzaW5nbGUgZ2VuZXJhdGlvbi4gVXNlZCBmb3Igc3RyZWFtaW5nLlxuICovXG5leHBvcnQgY2xhc3MgR2VuZXJhdGlvbkNodW5rIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidGV4dFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJnZW5lcmF0aW9uSW5mb1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnRleHQgPSBmaWVsZHMudGV4dDtcbiAgICAgICAgdGhpcy5nZW5lcmF0aW9uSW5mbyA9IGZpZWxkcy5nZW5lcmF0aW9uSW5mbztcbiAgICB9XG4gICAgY29uY2F0KGNodW5rKSB7XG4gICAgICAgIHJldHVybiBuZXcgR2VuZXJhdGlvbkNodW5rKHtcbiAgICAgICAgICAgIHRleHQ6IHRoaXMudGV4dCArIGNodW5rLnRleHQsXG4gICAgICAgICAgICBnZW5lcmF0aW9uSW5mbzoge1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuZ2VuZXJhdGlvbkluZm8sXG4gICAgICAgICAgICAgICAgLi4uY2h1bmsuZ2VuZXJhdGlvbkluZm8sXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgQ2hhdEdlbmVyYXRpb25DaHVuayBleHRlbmRzIEdlbmVyYXRpb25DaHVuayB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1lc3NhZ2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gZmllbGRzLm1lc3NhZ2U7XG4gICAgfVxuICAgIGNvbmNhdChjaHVuaykge1xuICAgICAgICByZXR1cm4gbmV3IENoYXRHZW5lcmF0aW9uQ2h1bmsoe1xuICAgICAgICAgICAgdGV4dDogdGhpcy50ZXh0ICsgY2h1bmsudGV4dCxcbiAgICAgICAgICAgIGdlbmVyYXRpb25JbmZvOiB7XG4gICAgICAgICAgICAgICAgLi4udGhpcy5nZW5lcmF0aW9uSW5mbyxcbiAgICAgICAgICAgICAgICAuLi5jaHVuay5nZW5lcmF0aW9uSW5mbyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtZXNzYWdlOiB0aGlzLm1lc3NhZ2UuY29uY2F0KGNodW5rLm1lc3NhZ2UpLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiUlVOX0tFWSIsIkdlbmVyYXRpb25DaHVuayIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsInRleHQiLCJnZW5lcmF0aW9uSW5mbyIsImNvbmNhdCIsImNodW5rIiwiQ2hhdEdlbmVyYXRpb25DaHVuayIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/outputs.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/prompt_values.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompt_values.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BasePromptValue: () => (/* binding */ BasePromptValue),\n/* harmony export */   ChatPromptValue: () => (/* binding */ ChatPromptValue),\n/* harmony export */   ImagePromptValue: () => (/* binding */ ImagePromptValue),\n/* harmony export */   StringPromptValue: () => (/* binding */ StringPromptValue)\n/* harmony export */ });\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./load/serializable.js */ \"(rsc)/./node_modules/@langchain/core/dist/load/serializable.js\");\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./messages/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/index.js\");\n\n\n/**\n * Base PromptValue class. All prompt values should extend this class.\n */ class BasePromptValue extends _load_serializable_js__WEBPACK_IMPORTED_MODULE_0__.Serializable {\n}\n/**\n * Represents a prompt value as a string. It extends the BasePromptValue\n * class and overrides the toString and toChatMessages methods.\n */ class StringPromptValue extends BasePromptValue {\n    static lc_name() {\n        return \"StringPromptValue\";\n    }\n    constructor(value){\n        super({\n            value\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"prompt_values\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"value\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.value = value;\n    }\n    toString() {\n        return this.value;\n    }\n    toChatMessages() {\n        return [\n            new _messages_index_js__WEBPACK_IMPORTED_MODULE_1__.HumanMessage(this.value)\n        ];\n    }\n}\n/**\n * Class that represents a chat prompt value. It extends the\n * BasePromptValue and includes an array of BaseMessage instances.\n */ class ChatPromptValue extends BasePromptValue {\n    static lc_name() {\n        return \"ChatPromptValue\";\n    }\n    constructor(fields){\n        if (Array.isArray(fields)) {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                messages: fields\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"prompt_values\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"messages\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.messages = fields.messages;\n    }\n    toString() {\n        return (0,_messages_index_js__WEBPACK_IMPORTED_MODULE_1__.getBufferString)(this.messages);\n    }\n    toChatMessages() {\n        return this.messages;\n    }\n}\n/**\n * Class that represents an image prompt value. It extends the\n * BasePromptValue and includes an ImageURL instance.\n */ class ImagePromptValue extends BasePromptValue {\n    static lc_name() {\n        return \"ImagePromptValue\";\n    }\n    constructor(fields){\n        if (!(\"imageUrl\" in fields)) {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                imageUrl: fields\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"prompt_values\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"imageUrl\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        /** @ignore */ Object.defineProperty(this, \"value\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.imageUrl = fields.imageUrl;\n    }\n    toString() {\n        return this.imageUrl.url;\n    }\n    toChatMessages() {\n        return [\n            new _messages_index_js__WEBPACK_IMPORTED_MODULE_1__.HumanMessage({\n                content: [\n                    {\n                        type: \"image_url\",\n                        image_url: {\n                            detail: this.imageUrl.detail,\n                            url: this.imageUrl.url\n                        }\n                    }\n                ]\n            })\n        ];\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0X3ZhbHVlcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBc0Q7QUFDZTtBQUNyRTs7Q0FFQyxHQUNNLE1BQU1HLHdCQUF3QkgsK0RBQVlBO0FBQ2pEO0FBQ0E7OztDQUdDLEdBQ00sTUFBTUksMEJBQTBCRDtJQUNuQyxPQUFPRSxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FDLFlBQVlDLEtBQUssQ0FBRTtRQUNmLEtBQUssQ0FBQztZQUFFQTtRQUFNO1FBQ2RDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWTCxPQUFPO2dCQUFDO2dCQUFrQjthQUFnQjtRQUM5QztRQUNBQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG1CQUFtQjtZQUMzQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkwsT0FBTztRQUNYO1FBQ0FDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsU0FBUztZQUNqQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkwsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDQSxLQUFLLEdBQUdBO0lBQ2pCO0lBQ0FNLFdBQVc7UUFDUCxPQUFPLElBQUksQ0FBQ04sS0FBSztJQUNyQjtJQUNBTyxpQkFBaUI7UUFDYixPQUFPO1lBQUMsSUFBSWIsNERBQVlBLENBQUMsSUFBSSxDQUFDTSxLQUFLO1NBQUU7SUFDekM7QUFDSjtBQUNBOzs7Q0FHQyxHQUNNLE1BQU1RLHdCQUF3Qlo7SUFDakMsT0FBT0UsVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBQyxZQUFZVSxNQUFNLENBQUU7UUFDaEIsSUFBSUMsTUFBTUMsT0FBTyxDQUFDRixTQUFTO1lBQ3ZCLDZDQUE2QztZQUM3Q0EsU0FBUztnQkFBRUcsVUFBVUg7WUFBTztRQUNoQztRQUNBLEtBQUssQ0FBQ0E7UUFDTlIsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZMLE9BQU87Z0JBQUM7Z0JBQWtCO2FBQWdCO1FBQzlDO1FBQ0FDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CO1lBQzNDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWTCxPQUFPO1FBQ1g7UUFDQUMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxZQUFZO1lBQ3BDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWTCxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNZLFFBQVEsR0FBR0gsT0FBT0csUUFBUTtJQUNuQztJQUNBTixXQUFXO1FBQ1AsT0FBT1gsbUVBQWVBLENBQUMsSUFBSSxDQUFDaUIsUUFBUTtJQUN4QztJQUNBTCxpQkFBaUI7UUFDYixPQUFPLElBQUksQ0FBQ0ssUUFBUTtJQUN4QjtBQUNKO0FBQ0E7OztDQUdDLEdBQ00sTUFBTUMseUJBQXlCakI7SUFDbEMsT0FBT0UsVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBQyxZQUFZVSxNQUFNLENBQUU7UUFDaEIsSUFBSSxDQUFFLGVBQWNBLE1BQUssR0FBSTtZQUN6Qiw2Q0FBNkM7WUFDN0NBLFNBQVM7Z0JBQUVLLFVBQVVMO1lBQU87UUFDaEM7UUFDQSxLQUFLLENBQUNBO1FBQ05SLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWTCxPQUFPO2dCQUFDO2dCQUFrQjthQUFnQjtRQUM5QztRQUNBQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG1CQUFtQjtZQUMzQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkwsT0FBTztRQUNYO1FBQ0FDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkwsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsWUFBWSxHQUNaQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFNBQVM7WUFDakNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZMLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ2MsUUFBUSxHQUFHTCxPQUFPSyxRQUFRO0lBQ25DO0lBQ0FSLFdBQVc7UUFDUCxPQUFPLElBQUksQ0FBQ1EsUUFBUSxDQUFDQyxHQUFHO0lBQzVCO0lBQ0FSLGlCQUFpQjtRQUNiLE9BQU87WUFDSCxJQUFJYiw0REFBWUEsQ0FBQztnQkFDYnNCLFNBQVM7b0JBQ0w7d0JBQ0lDLE1BQU07d0JBQ05DLFdBQVc7NEJBQ1BDLFFBQVEsSUFBSSxDQUFDTCxRQUFRLENBQUNLLE1BQU07NEJBQzVCSixLQUFLLElBQUksQ0FBQ0QsUUFBUSxDQUFDQyxHQUFHO3dCQUMxQjtvQkFDSjtpQkFDSDtZQUNMO1NBQ0g7SUFDTDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3Byb21wdF92YWx1ZXMuanM/MDMyMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTZXJpYWxpemFibGUgfSBmcm9tIFwiLi9sb2FkL3NlcmlhbGl6YWJsZS5qc1wiO1xuaW1wb3J0IHsgSHVtYW5NZXNzYWdlLCBnZXRCdWZmZXJTdHJpbmcsIH0gZnJvbSBcIi4vbWVzc2FnZXMvaW5kZXguanNcIjtcbi8qKlxuICogQmFzZSBQcm9tcHRWYWx1ZSBjbGFzcy4gQWxsIHByb21wdCB2YWx1ZXMgc2hvdWxkIGV4dGVuZCB0aGlzIGNsYXNzLlxuICovXG5leHBvcnQgY2xhc3MgQmFzZVByb21wdFZhbHVlIGV4dGVuZHMgU2VyaWFsaXphYmxlIHtcbn1cbi8qKlxuICogUmVwcmVzZW50cyBhIHByb21wdCB2YWx1ZSBhcyBhIHN0cmluZy4gSXQgZXh0ZW5kcyB0aGUgQmFzZVByb21wdFZhbHVlXG4gKiBjbGFzcyBhbmQgb3ZlcnJpZGVzIHRoZSB0b1N0cmluZyBhbmQgdG9DaGF0TWVzc2FnZXMgbWV0aG9kcy5cbiAqL1xuZXhwb3J0IGNsYXNzIFN0cmluZ1Byb21wdFZhbHVlIGV4dGVuZHMgQmFzZVByb21wdFZhbHVlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiU3RyaW5nUHJvbXB0VmFsdWVcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IodmFsdWUpIHtcbiAgICAgICAgc3VwZXIoeyB2YWx1ZSB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInByb21wdF92YWx1ZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidmFsdWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWU7XG4gICAgfVxuICAgIHRvQ2hhdE1lc3NhZ2VzKCkge1xuICAgICAgICByZXR1cm4gW25ldyBIdW1hbk1lc3NhZ2UodGhpcy52YWx1ZSldO1xuICAgIH1cbn1cbi8qKlxuICogQ2xhc3MgdGhhdCByZXByZXNlbnRzIGEgY2hhdCBwcm9tcHQgdmFsdWUuIEl0IGV4dGVuZHMgdGhlXG4gKiBCYXNlUHJvbXB0VmFsdWUgYW5kIGluY2x1ZGVzIGFuIGFycmF5IG9mIEJhc2VNZXNzYWdlIGluc3RhbmNlcy5cbiAqL1xuZXhwb3J0IGNsYXNzIENoYXRQcm9tcHRWYWx1ZSBleHRlbmRzIEJhc2VQcm9tcHRWYWx1ZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkNoYXRQcm9tcHRWYWx1ZVwiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZmllbGRzKSkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgICBmaWVsZHMgPSB7IG1lc3NhZ2VzOiBmaWVsZHMgfTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwicHJvbXB0X3ZhbHVlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtZXNzYWdlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm1lc3NhZ2VzID0gZmllbGRzLm1lc3NhZ2VzO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIGdldEJ1ZmZlclN0cmluZyh0aGlzLm1lc3NhZ2VzKTtcbiAgICB9XG4gICAgdG9DaGF0TWVzc2FnZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1lc3NhZ2VzO1xuICAgIH1cbn1cbi8qKlxuICogQ2xhc3MgdGhhdCByZXByZXNlbnRzIGFuIGltYWdlIHByb21wdCB2YWx1ZS4gSXQgZXh0ZW5kcyB0aGVcbiAqIEJhc2VQcm9tcHRWYWx1ZSBhbmQgaW5jbHVkZXMgYW4gSW1hZ2VVUkwgaW5zdGFuY2UuXG4gKi9cbmV4cG9ydCBjbGFzcyBJbWFnZVByb21wdFZhbHVlIGV4dGVuZHMgQmFzZVByb21wdFZhbHVlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiSW1hZ2VQcm9tcHRWYWx1ZVwiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgaWYgKCEoXCJpbWFnZVVybFwiIGluIGZpZWxkcykpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICAgICAgZmllbGRzID0geyBpbWFnZVVybDogZmllbGRzIH07XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInByb21wdF92YWx1ZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW1hZ2VVcmxcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgLyoqIEBpZ25vcmUgKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidmFsdWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5pbWFnZVVybCA9IGZpZWxkcy5pbWFnZVVybDtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmltYWdlVXJsLnVybDtcbiAgICB9XG4gICAgdG9DaGF0TWVzc2FnZXMoKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBuZXcgSHVtYW5NZXNzYWdlKHtcbiAgICAgICAgICAgICAgICBjb250ZW50OiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiaW1hZ2VfdXJsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbWFnZV91cmw6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IHRoaXMuaW1hZ2VVcmwuZGV0YWlsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogdGhpcy5pbWFnZVVybC51cmwsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgXTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiU2VyaWFsaXphYmxlIiwiSHVtYW5NZXNzYWdlIiwiZ2V0QnVmZmVyU3RyaW5nIiwiQmFzZVByb21wdFZhbHVlIiwiU3RyaW5nUHJvbXB0VmFsdWUiLCJsY19uYW1lIiwiY29uc3RydWN0b3IiLCJ2YWx1ZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidG9TdHJpbmciLCJ0b0NoYXRNZXNzYWdlcyIsIkNoYXRQcm9tcHRWYWx1ZSIsImZpZWxkcyIsIkFycmF5IiwiaXNBcnJheSIsIm1lc3NhZ2VzIiwiSW1hZ2VQcm9tcHRWYWx1ZSIsImltYWdlVXJsIiwidXJsIiwiY29udGVudCIsInR5cGUiLCJpbWFnZV91cmwiLCJkZXRhaWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/prompt_values.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/prompts/base.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompts/base.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BasePromptTemplate: () => (/* binding */ BasePromptTemplate)\n/* harmony export */ });\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../runnables/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n// Default generic \"any\" values are for backwards compatibility.\n// Replace with \"string\" when we are comfortable with a breaking change.\n\n/**\n * Base class for prompt templates. Exposes a format method that returns a\n * string prompt given a set of input values.\n */ class BasePromptTemplate extends _runnables_base_js__WEBPACK_IMPORTED_MODULE_0__.Runnable {\n    get lc_attributes() {\n        return {\n            partialVariables: undefined\n        };\n    }\n    constructor(input){\n        super(input);\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"prompts\",\n                this._getPromptType()\n            ]\n        });\n        Object.defineProperty(this, \"inputVariables\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"outputParser\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"partialVariables\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        const { inputVariables } = input;\n        if (inputVariables.includes(\"stop\")) {\n            throw new Error(\"Cannot have an input variable named 'stop', as it is used internally, please rename.\");\n        }\n        Object.assign(this, input);\n    }\n    /**\n     * Merges partial variables and user variables.\n     * @param userVariables The user variables to merge with the partial variables.\n     * @returns A Promise that resolves to an object containing the merged variables.\n     */ async mergePartialAndUserVariables(userVariables) {\n        const partialVariables = this.partialVariables ?? {};\n        const partialValues = {};\n        for (const [key, value] of Object.entries(partialVariables)){\n            if (typeof value === \"string\") {\n                partialValues[key] = value;\n            } else {\n                partialValues[key] = await value();\n            }\n        }\n        const allKwargs = {\n            ...partialValues,\n            ...userVariables\n        };\n        return allKwargs;\n    }\n    /**\n     * Invokes the prompt template with the given input and options.\n     * @param input The input to invoke the prompt template with.\n     * @param options Optional configuration for the callback.\n     * @returns A Promise that resolves to the output of the prompt template.\n     */ async invoke(input, options) {\n        return this._callWithConfig((input)=>this.formatPromptValue(input), input, {\n            ...options,\n            runType: \"prompt\"\n        });\n    }\n    /**\n     * Return a json-like object representing this prompt template.\n     * @deprecated\n     */ serialize() {\n        throw new Error(\"Use .toJSON() instead\");\n    }\n    /**\n     * @deprecated\n     * Load a prompt template from a json-like object describing it.\n     *\n     * @remarks\n     * Deserializing needs to be async because templates (e.g. {@link FewShotPromptTemplate}) can\n     * reference remote resources that we read asynchronously with a web\n     * request.\n     */ static async deserialize(data) {\n        switch(data._type){\n            case \"prompt\":\n                {\n                    const { PromptTemplate } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ./prompt.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/prompt.js\"));\n                    return PromptTemplate.deserialize(data);\n                }\n            case undefined:\n                {\n                    const { PromptTemplate } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ./prompt.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/prompt.js\"));\n                    return PromptTemplate.deserialize({\n                        ...data,\n                        _type: \"prompt\"\n                    });\n                }\n            case \"few_shot\":\n                {\n                    const { FewShotPromptTemplate } = await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ./few_shot.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/few_shot.js\"));\n                    return FewShotPromptTemplate.deserialize(data);\n                }\n            default:\n                throw new Error(`Invalid prompt type in config: ${data._type}`);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9iYXNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsZ0VBQWdFO0FBQ2hFLHdFQUF3RTtBQUN4QjtBQUNoRDs7O0NBR0MsR0FDTSxNQUFNQywyQkFBMkJELHdEQUFRQTtJQUM1QyxJQUFJRSxnQkFBZ0I7UUFDaEIsT0FBTztZQUNIQyxrQkFBa0JDO1FBQ3RCO0lBQ0o7SUFDQUMsWUFBWUMsS0FBSyxDQUFFO1FBQ2YsS0FBSyxDQUFDQTtRQUNOQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG1CQUFtQjtZQUMzQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO2dCQUFDO2dCQUFrQjtnQkFBVyxJQUFJLENBQUNDLGNBQWM7YUFBRztRQUMvRDtRQUNBTixPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGtCQUFrQjtZQUMxQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxvQkFBb0I7WUFDNUNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLE1BQU0sRUFBRUUsY0FBYyxFQUFFLEdBQUdSO1FBQzNCLElBQUlRLGVBQWVDLFFBQVEsQ0FBQyxTQUFTO1lBQ2pDLE1BQU0sSUFBSUMsTUFBTTtRQUNwQjtRQUNBVCxPQUFPVSxNQUFNLENBQUMsSUFBSSxFQUFFWDtJQUN4QjtJQUNBOzs7O0tBSUMsR0FDRCxNQUFNWSw2QkFBNkJDLGFBQWEsRUFBRTtRQUM5QyxNQUFNaEIsbUJBQW1CLElBQUksQ0FBQ0EsZ0JBQWdCLElBQUksQ0FBQztRQUNuRCxNQUFNaUIsZ0JBQWdCLENBQUM7UUFDdkIsS0FBSyxNQUFNLENBQUNDLEtBQUtULE1BQU0sSUFBSUwsT0FBT2UsT0FBTyxDQUFDbkIsa0JBQW1CO1lBQ3pELElBQUksT0FBT1MsVUFBVSxVQUFVO2dCQUMzQlEsYUFBYSxDQUFDQyxJQUFJLEdBQUdUO1lBQ3pCLE9BQ0s7Z0JBQ0RRLGFBQWEsQ0FBQ0MsSUFBSSxHQUFHLE1BQU1UO1lBQy9CO1FBQ0o7UUFDQSxNQUFNVyxZQUFZO1lBQ2QsR0FBR0gsYUFBYTtZQUNoQixHQUFHRCxhQUFhO1FBQ3BCO1FBQ0EsT0FBT0k7SUFDWDtJQUNBOzs7OztLQUtDLEdBQ0QsTUFBTUMsT0FBT2xCLEtBQUssRUFBRW1CLE9BQU8sRUFBRTtRQUN6QixPQUFPLElBQUksQ0FBQ0MsZUFBZSxDQUFDLENBQUNwQixRQUFVLElBQUksQ0FBQ3FCLGlCQUFpQixDQUFDckIsUUFBUUEsT0FBTztZQUFFLEdBQUdtQixPQUFPO1lBQUVHLFNBQVM7UUFBUztJQUNqSDtJQUNBOzs7S0FHQyxHQUNEQyxZQUFZO1FBQ1IsTUFBTSxJQUFJYixNQUFNO0lBQ3BCO0lBQ0E7Ozs7Ozs7O0tBUUMsR0FDRCxhQUFhYyxZQUFZQyxJQUFJLEVBQUU7UUFDM0IsT0FBUUEsS0FBS0MsS0FBSztZQUNkLEtBQUs7Z0JBQVU7b0JBQ1gsTUFBTSxFQUFFQyxjQUFjLEVBQUUsR0FBRyxNQUFNLHNLQUFxQjtvQkFDdEQsT0FBT0EsZUFBZUgsV0FBVyxDQUFDQztnQkFDdEM7WUFDQSxLQUFLM0I7Z0JBQVc7b0JBQ1osTUFBTSxFQUFFNkIsY0FBYyxFQUFFLEdBQUcsTUFBTSxzS0FBcUI7b0JBQ3RELE9BQU9BLGVBQWVILFdBQVcsQ0FBQzt3QkFBRSxHQUFHQyxJQUFJO3dCQUFFQyxPQUFPO29CQUFTO2dCQUNqRTtZQUNBLEtBQUs7Z0JBQVk7b0JBQ2IsTUFBTSxFQUFFRSxxQkFBcUIsRUFBRSxHQUFHLE1BQU0sMEtBQXVCO29CQUMvRCxPQUFPQSxzQkFBc0JKLFdBQVcsQ0FBQ0M7Z0JBQzdDO1lBQ0E7Z0JBQ0ksTUFBTSxJQUFJZixNQUFNLENBQUMsK0JBQStCLEVBQUVlLEtBQUtDLEtBQUssQ0FBQyxDQUFDO1FBQ3RFO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLWZvcm0tYnVpbGRlci10dXRvcmlhbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9wcm9tcHRzL2Jhc2UuanM/YjhhMCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBEZWZhdWx0IGdlbmVyaWMgXCJhbnlcIiB2YWx1ZXMgYXJlIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS5cbi8vIFJlcGxhY2Ugd2l0aCBcInN0cmluZ1wiIHdoZW4gd2UgYXJlIGNvbWZvcnRhYmxlIHdpdGggYSBicmVha2luZyBjaGFuZ2UuXG5pbXBvcnQgeyBSdW5uYWJsZSB9IGZyb20gXCIuLi9ydW5uYWJsZXMvYmFzZS5qc1wiO1xuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBwcm9tcHQgdGVtcGxhdGVzLiBFeHBvc2VzIGEgZm9ybWF0IG1ldGhvZCB0aGF0IHJldHVybnMgYVxuICogc3RyaW5nIHByb21wdCBnaXZlbiBhIHNldCBvZiBpbnB1dCB2YWx1ZXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlUHJvbXB0VGVtcGxhdGUgZXh0ZW5kcyBSdW5uYWJsZSB7XG4gICAgZ2V0IGxjX2F0dHJpYnV0ZXMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwYXJ0aWFsVmFyaWFibGVzOiB1bmRlZmluZWQsIC8vIHB5dGhvbiBkb2Vzbid0IHN1cHBvcnQgdGhpcyB5ZXRcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoaW5wdXQpIHtcbiAgICAgICAgc3VwZXIoaW5wdXQpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJwcm9tcHRzXCIsIHRoaXMuX2dldFByb21wdFR5cGUoKV1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImlucHV0VmFyaWFibGVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm91dHB1dFBhcnNlclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJwYXJ0aWFsVmFyaWFibGVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHsgaW5wdXRWYXJpYWJsZXMgfSA9IGlucHV0O1xuICAgICAgICBpZiAoaW5wdXRWYXJpYWJsZXMuaW5jbHVkZXMoXCJzdG9wXCIpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgaGF2ZSBhbiBpbnB1dCB2YXJpYWJsZSBuYW1lZCAnc3RvcCcsIGFzIGl0IGlzIHVzZWQgaW50ZXJuYWxseSwgcGxlYXNlIHJlbmFtZS5cIik7XG4gICAgICAgIH1cbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCBpbnB1dCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1lcmdlcyBwYXJ0aWFsIHZhcmlhYmxlcyBhbmQgdXNlciB2YXJpYWJsZXMuXG4gICAgICogQHBhcmFtIHVzZXJWYXJpYWJsZXMgVGhlIHVzZXIgdmFyaWFibGVzIHRvIG1lcmdlIHdpdGggdGhlIHBhcnRpYWwgdmFyaWFibGVzLlxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIGFuIG9iamVjdCBjb250YWluaW5nIHRoZSBtZXJnZWQgdmFyaWFibGVzLlxuICAgICAqL1xuICAgIGFzeW5jIG1lcmdlUGFydGlhbEFuZFVzZXJWYXJpYWJsZXModXNlclZhcmlhYmxlcykge1xuICAgICAgICBjb25zdCBwYXJ0aWFsVmFyaWFibGVzID0gdGhpcy5wYXJ0aWFsVmFyaWFibGVzID8/IHt9O1xuICAgICAgICBjb25zdCBwYXJ0aWFsVmFsdWVzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHBhcnRpYWxWYXJpYWJsZXMpKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgcGFydGlhbFZhbHVlc1trZXldID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYXJ0aWFsVmFsdWVzW2tleV0gPSBhd2FpdCB2YWx1ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFsbEt3YXJncyA9IHtcbiAgICAgICAgICAgIC4uLnBhcnRpYWxWYWx1ZXMsXG4gICAgICAgICAgICAuLi51c2VyVmFyaWFibGVzLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gYWxsS3dhcmdzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnZva2VzIHRoZSBwcm9tcHQgdGVtcGxhdGUgd2l0aCB0aGUgZ2l2ZW4gaW5wdXQgYW5kIG9wdGlvbnMuXG4gICAgICogQHBhcmFtIGlucHV0IFRoZSBpbnB1dCB0byBpbnZva2UgdGhlIHByb21wdCB0ZW1wbGF0ZSB3aXRoLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBjYWxsYmFjay5cbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgb3V0cHV0IG9mIHRoZSBwcm9tcHQgdGVtcGxhdGUuXG4gICAgICovXG4gICAgYXN5bmMgaW52b2tlKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWxsV2l0aENvbmZpZygoaW5wdXQpID0+IHRoaXMuZm9ybWF0UHJvbXB0VmFsdWUoaW5wdXQpLCBpbnB1dCwgeyAuLi5vcHRpb25zLCBydW5UeXBlOiBcInByb21wdFwiIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gYSBqc29uLWxpa2Ugb2JqZWN0IHJlcHJlc2VudGluZyB0aGlzIHByb21wdCB0ZW1wbGF0ZS5cbiAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAqL1xuICAgIHNlcmlhbGl6ZSgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVXNlIC50b0pTT04oKSBpbnN0ZWFkXCIpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAqIExvYWQgYSBwcm9tcHQgdGVtcGxhdGUgZnJvbSBhIGpzb24tbGlrZSBvYmplY3QgZGVzY3JpYmluZyBpdC5cbiAgICAgKlxuICAgICAqIEByZW1hcmtzXG4gICAgICogRGVzZXJpYWxpemluZyBuZWVkcyB0byBiZSBhc3luYyBiZWNhdXNlIHRlbXBsYXRlcyAoZS5nLiB7QGxpbmsgRmV3U2hvdFByb21wdFRlbXBsYXRlfSkgY2FuXG4gICAgICogcmVmZXJlbmNlIHJlbW90ZSByZXNvdXJjZXMgdGhhdCB3ZSByZWFkIGFzeW5jaHJvbm91c2x5IHdpdGggYSB3ZWJcbiAgICAgKiByZXF1ZXN0LlxuICAgICAqL1xuICAgIHN0YXRpYyBhc3luYyBkZXNlcmlhbGl6ZShkYXRhKSB7XG4gICAgICAgIHN3aXRjaCAoZGF0YS5fdHlwZSkge1xuICAgICAgICAgICAgY2FzZSBcInByb21wdFwiOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBQcm9tcHRUZW1wbGF0ZSB9ID0gYXdhaXQgaW1wb3J0KFwiLi9wcm9tcHQuanNcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21wdFRlbXBsYXRlLmRlc2VyaWFsaXplKGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSB1bmRlZmluZWQ6IHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IFByb21wdFRlbXBsYXRlIH0gPSBhd2FpdCBpbXBvcnQoXCIuL3Byb21wdC5qc1wiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbXB0VGVtcGxhdGUuZGVzZXJpYWxpemUoeyAuLi5kYXRhLCBfdHlwZTogXCJwcm9tcHRcIiB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgXCJmZXdfc2hvdFwiOiB7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBGZXdTaG90UHJvbXB0VGVtcGxhdGUgfSA9IGF3YWl0IGltcG9ydChcIi4vZmV3X3Nob3QuanNcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEZld1Nob3RQcm9tcHRUZW1wbGF0ZS5kZXNlcmlhbGl6ZShkYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHByb21wdCB0eXBlIGluIGNvbmZpZzogJHtkYXRhLl90eXBlfWApO1xuICAgICAgICB9XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIlJ1bm5hYmxlIiwiQmFzZVByb21wdFRlbXBsYXRlIiwibGNfYXR0cmlidXRlcyIsInBhcnRpYWxWYXJpYWJsZXMiLCJ1bmRlZmluZWQiLCJjb25zdHJ1Y3RvciIsImlucHV0IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsIl9nZXRQcm9tcHRUeXBlIiwiaW5wdXRWYXJpYWJsZXMiLCJpbmNsdWRlcyIsIkVycm9yIiwiYXNzaWduIiwibWVyZ2VQYXJ0aWFsQW5kVXNlclZhcmlhYmxlcyIsInVzZXJWYXJpYWJsZXMiLCJwYXJ0aWFsVmFsdWVzIiwia2V5IiwiZW50cmllcyIsImFsbEt3YXJncyIsImludm9rZSIsIm9wdGlvbnMiLCJfY2FsbFdpdGhDb25maWciLCJmb3JtYXRQcm9tcHRWYWx1ZSIsInJ1blR5cGUiLCJzZXJpYWxpemUiLCJkZXNlcmlhbGl6ZSIsImRhdGEiLCJfdHlwZSIsIlByb21wdFRlbXBsYXRlIiwiRmV3U2hvdFByb21wdFRlbXBsYXRlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/prompts/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/prompts/chat.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompts/chat.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AIMessagePromptTemplate: () => (/* binding */ AIMessagePromptTemplate),\n/* harmony export */   BaseChatPromptTemplate: () => (/* binding */ BaseChatPromptTemplate),\n/* harmony export */   BaseMessagePromptTemplate: () => (/* binding */ BaseMessagePromptTemplate),\n/* harmony export */   BaseMessageStringPromptTemplate: () => (/* binding */ BaseMessageStringPromptTemplate),\n/* harmony export */   ChatMessagePromptTemplate: () => (/* binding */ ChatMessagePromptTemplate),\n/* harmony export */   ChatPromptTemplate: () => (/* binding */ ChatPromptTemplate),\n/* harmony export */   HumanMessagePromptTemplate: () => (/* binding */ HumanMessagePromptTemplate),\n/* harmony export */   MessagesPlaceholder: () => (/* binding */ MessagesPlaceholder),\n/* harmony export */   SystemMessagePromptTemplate: () => (/* binding */ SystemMessagePromptTemplate)\n/* harmony export */ });\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../messages/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/index.js\");\n/* harmony import */ var _prompt_values_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../prompt_values.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompt_values.js\");\n/* harmony import */ var _runnables_base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../runnables/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n/* harmony import */ var _string_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./string.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/string.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/base.js\");\n/* harmony import */ var _prompt_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./prompt.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/prompt.js\");\n/* harmony import */ var _image_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./image.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/image.js\");\n/* harmony import */ var _template_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./template.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/template.js\");\n// Default generic \"any\" values are for backwards compatibility.\n// Replace with \"string\" when we are comfortable with a breaking change.\n\n\n\n\n\n\n\n\n/**\n * Abstract class that serves as a base for creating message prompt\n * templates. It defines how to format messages for different roles in a\n * conversation.\n */ class BaseMessagePromptTemplate extends _runnables_base_js__WEBPACK_IMPORTED_MODULE_2__.Runnable {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"prompts\",\n                \"chat\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n    }\n    /**\n     * Calls the formatMessages method with the provided input and options.\n     * @param input Input for the formatMessages method\n     * @param options Optional BaseCallbackConfig\n     * @returns Formatted output messages\n     */ async invoke(input, options) {\n        return this._callWithConfig((input)=>this.formatMessages(input), input, {\n            ...options,\n            runType: \"prompt\"\n        });\n    }\n}\n/**\n * Class that represents a placeholder for messages in a chat prompt. It\n * extends the BaseMessagePromptTemplate.\n */ class MessagesPlaceholder extends BaseMessagePromptTemplate {\n    static lc_name() {\n        return \"MessagesPlaceholder\";\n    }\n    constructor(fields){\n        if (typeof fields === \"string\") {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                variableName: fields\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"variableName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"optional\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.variableName = fields.variableName;\n        this.optional = fields.optional ?? false;\n    }\n    get inputVariables() {\n        return [\n            this.variableName\n        ];\n    }\n    validateInputOrThrow(input, variableName) {\n        if (this.optional && !input) {\n            return false;\n        } else if (!input) {\n            const error = new Error(`Error: Field \"${variableName}\" in prompt uses a MessagesPlaceholder, which expects an array of BaseMessages as an input value. Received: undefined`);\n            error.name = \"InputFormatError\";\n            throw error;\n        }\n        let isInputBaseMessage = false;\n        if (Array.isArray(input)) {\n            isInputBaseMessage = input.every((message)=>(0,_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessage)(message));\n        } else {\n            isInputBaseMessage = (0,_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessage)(input);\n        }\n        if (!isInputBaseMessage) {\n            const readableInput = typeof input === \"string\" ? input : JSON.stringify(input, null, 2);\n            const error = new Error(`Error: Field \"${variableName}\" in prompt uses a MessagesPlaceholder, which expects an array of BaseMessages as an input value. Received: ${readableInput}`);\n            error.name = \"InputFormatError\";\n            throw error;\n        }\n        return true;\n    }\n    async formatMessages(values) {\n        this.validateInputOrThrow(values[this.variableName], this.variableName);\n        return values[this.variableName] ?? [];\n    }\n}\n/**\n * Abstract class that serves as a base for creating message string prompt\n * templates. It extends the BaseMessagePromptTemplate.\n */ class BaseMessageStringPromptTemplate extends BaseMessagePromptTemplate {\n    constructor(fields){\n        if (!(\"prompt\" in fields)) {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                prompt: fields\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"prompt\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.prompt = fields.prompt;\n    }\n    get inputVariables() {\n        return this.prompt.inputVariables;\n    }\n    async formatMessages(values) {\n        return [\n            await this.format(values)\n        ];\n    }\n}\n/**\n * Abstract class that serves as a base for creating chat prompt\n * templates. It extends the BasePromptTemplate.\n */ class BaseChatPromptTemplate extends _base_js__WEBPACK_IMPORTED_MODULE_4__.BasePromptTemplate {\n    constructor(input){\n        super(input);\n    }\n    async format(values) {\n        return (await this.formatPromptValue(values)).toString();\n    }\n    async formatPromptValue(values) {\n        const resultMessages = await this.formatMessages(values);\n        return new _prompt_values_js__WEBPACK_IMPORTED_MODULE_1__.ChatPromptValue(resultMessages);\n    }\n}\n/**\n * Class that represents a chat message prompt template. It extends the\n * BaseMessageStringPromptTemplate.\n */ class ChatMessagePromptTemplate extends BaseMessageStringPromptTemplate {\n    static lc_name() {\n        return \"ChatMessagePromptTemplate\";\n    }\n    constructor(fields, role){\n        if (!(\"prompt\" in fields)) {\n            // eslint-disable-next-line no-param-reassign, @typescript-eslint/no-non-null-assertion\n            fields = {\n                prompt: fields,\n                role: role\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"role\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.role = fields.role;\n    }\n    async format(values) {\n        return new _messages_index_js__WEBPACK_IMPORTED_MODULE_0__.ChatMessage(await this.prompt.format(values), this.role);\n    }\n    static fromTemplate(template, role) {\n        return new this(_prompt_js__WEBPACK_IMPORTED_MODULE_5__.PromptTemplate.fromTemplate(template), role);\n    }\n}\nclass _StringImageMessagePromptTemplate extends BaseMessagePromptTemplate {\n    static _messageClass() {\n        throw new Error(\"Can not invoke _messageClass from inside _StringImageMessagePromptTemplate\");\n    }\n    constructor(/** @TODO When we come up with a better way to type prompt templates, fix this */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    fields, additionalOptions){\n        if (!(\"prompt\" in fields)) {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                prompt: fields\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"prompts\",\n                \"chat\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"inputVariables\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        Object.defineProperty(this, \"additionalOptions\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"prompt\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"messageClass\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        // ChatMessage contains role field, others don't.\n        // Because of this, we have a separate class property for ChatMessage.\n        Object.defineProperty(this, \"chatMessageClass\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.prompt = fields.prompt;\n        if (Array.isArray(this.prompt)) {\n            let inputVariables = [];\n            this.prompt.forEach((prompt)=>{\n                if (\"inputVariables\" in prompt) {\n                    inputVariables = inputVariables.concat(prompt.inputVariables);\n                }\n            });\n            this.inputVariables = inputVariables;\n        } else {\n            this.inputVariables = this.prompt.inputVariables;\n        }\n        this.additionalOptions = additionalOptions ?? this.additionalOptions;\n    }\n    createMessage(content) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const constructor = this.constructor;\n        if (constructor._messageClass()) {\n            const MsgClass = constructor._messageClass();\n            return new MsgClass({\n                content\n            });\n        } else if (constructor.chatMessageClass) {\n            const MsgClass = constructor.chatMessageClass();\n            // Assuming ChatMessage constructor also takes a content argument\n            return new MsgClass({\n                content,\n                role: this.getRoleFromMessageClass(MsgClass.lc_name())\n            });\n        } else {\n            throw new Error(\"No message class defined\");\n        }\n    }\n    getRoleFromMessageClass(name) {\n        switch(name){\n            case \"HumanMessage\":\n                return \"human\";\n            case \"AIMessage\":\n                return \"ai\";\n            case \"SystemMessage\":\n                return \"system\";\n            case \"ChatMessage\":\n                return \"chat\";\n            default:\n                throw new Error(\"Invalid message class name\");\n        }\n    }\n    static fromTemplate(template, additionalOptions) {\n        if (typeof template === \"string\") {\n            return new this(_prompt_js__WEBPACK_IMPORTED_MODULE_5__.PromptTemplate.fromTemplate(template));\n        }\n        const prompt = [];\n        for (const item of template){\n            if (typeof item === \"string\" || typeof item === \"object\" && \"text\" in item) {\n                let text = \"\";\n                if (typeof item === \"string\") {\n                    text = item;\n                } else if (typeof item.text === \"string\") {\n                    text = item.text ?? \"\";\n                }\n                prompt.push(_prompt_js__WEBPACK_IMPORTED_MODULE_5__.PromptTemplate.fromTemplate(text));\n            } else if (typeof item === \"object\" && \"image_url\" in item) {\n                let imgTemplate = item.image_url ?? \"\";\n                let imgTemplateObject;\n                let inputVariables = [];\n                if (typeof imgTemplate === \"string\") {\n                    const parsedTemplate = (0,_template_js__WEBPACK_IMPORTED_MODULE_7__.parseFString)(imgTemplate);\n                    const variables = parsedTemplate.flatMap((item)=>item.type === \"variable\" ? [\n                            item.name\n                        ] : []);\n                    if ((variables?.length ?? 0) > 0) {\n                        if (variables.length > 1) {\n                            throw new Error(`Only one format variable allowed per image template.\\nGot: ${variables}\\nFrom: ${imgTemplate}`);\n                        }\n                        inputVariables = [\n                            variables[0]\n                        ];\n                    } else {\n                        inputVariables = [];\n                    }\n                    imgTemplate = {\n                        url: imgTemplate\n                    };\n                    imgTemplateObject = new _image_js__WEBPACK_IMPORTED_MODULE_6__.ImagePromptTemplate({\n                        template: imgTemplate,\n                        inputVariables\n                    });\n                } else if (typeof imgTemplate === \"object\") {\n                    if (\"url\" in imgTemplate) {\n                        const parsedTemplate = (0,_template_js__WEBPACK_IMPORTED_MODULE_7__.parseFString)(imgTemplate.url);\n                        inputVariables = parsedTemplate.flatMap((item)=>item.type === \"variable\" ? [\n                                item.name\n                            ] : []);\n                    } else {\n                        inputVariables = [];\n                    }\n                    imgTemplateObject = new _image_js__WEBPACK_IMPORTED_MODULE_6__.ImagePromptTemplate({\n                        template: imgTemplate,\n                        inputVariables\n                    });\n                } else {\n                    throw new Error(\"Invalid image template\");\n                }\n                prompt.push(imgTemplateObject);\n            }\n        }\n        return new this({\n            prompt,\n            additionalOptions\n        });\n    }\n    async format(input) {\n        // eslint-disable-next-line no-instanceof/no-instanceof\n        if (this.prompt instanceof _string_js__WEBPACK_IMPORTED_MODULE_3__.BaseStringPromptTemplate) {\n            const text = await this.prompt.format(input);\n            return this.createMessage(text);\n        } else {\n            const content = [];\n            for (const prompt of this.prompt){\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                let inputs = {};\n                if (!(\"inputVariables\" in prompt)) {\n                    throw new Error(`Prompt ${prompt} does not have inputVariables defined.`);\n                }\n                for (const item of prompt.inputVariables){\n                    if (!inputs) {\n                        inputs = {\n                            [item]: input[item]\n                        };\n                    }\n                    inputs = {\n                        ...inputs,\n                        [item]: input[item]\n                    };\n                }\n                // eslint-disable-next-line no-instanceof/no-instanceof\n                if (prompt instanceof _string_js__WEBPACK_IMPORTED_MODULE_3__.BaseStringPromptTemplate) {\n                    const formatted = await prompt.format(inputs);\n                    content.push({\n                        type: \"text\",\n                        text: formatted\n                    });\n                /** @TODO replace this */ // eslint-disable-next-line no-instanceof/no-instanceof\n                } else if (prompt instanceof _image_js__WEBPACK_IMPORTED_MODULE_6__.ImagePromptTemplate) {\n                    const formatted = await prompt.format(inputs);\n                    content.push({\n                        type: \"image_url\",\n                        image_url: formatted\n                    });\n                }\n            }\n            return this.createMessage(content);\n        }\n    }\n    async formatMessages(values) {\n        return [\n            await this.format(values)\n        ];\n    }\n}\n/**\n * Class that represents a human message prompt template. It extends the\n * BaseMessageStringPromptTemplate.\n * @example\n * ```typescript\n * const message = HumanMessagePromptTemplate.fromTemplate(\"{text}\");\n * const formatted = await message.format({ text: \"Hello world!\" });\n *\n * const chatPrompt = ChatPromptTemplate.fromMessages([message]);\n * const formattedChatPrompt = await chatPrompt.invoke({\n *   text: \"Hello world!\",\n * });\n * ```\n */ class HumanMessagePromptTemplate extends _StringImageMessagePromptTemplate {\n    static _messageClass() {\n        return _messages_index_js__WEBPACK_IMPORTED_MODULE_0__.HumanMessage;\n    }\n    static lc_name() {\n        return \"HumanMessagePromptTemplate\";\n    }\n}\n/**\n * Class that represents an AI message prompt template. It extends the\n * BaseMessageStringPromptTemplate.\n */ class AIMessagePromptTemplate extends _StringImageMessagePromptTemplate {\n    static _messageClass() {\n        return _messages_index_js__WEBPACK_IMPORTED_MODULE_0__.AIMessage;\n    }\n    static lc_name() {\n        return \"AIMessagePromptTemplate\";\n    }\n}\n/**\n * Class that represents a system message prompt template. It extends the\n * BaseMessageStringPromptTemplate.\n * @example\n * ```typescript\n * const message = SystemMessagePromptTemplate.fromTemplate(\"{text}\");\n * const formatted = await message.format({ text: \"Hello world!\" });\n *\n * const chatPrompt = ChatPromptTemplate.fromMessages([message]);\n * const formattedChatPrompt = await chatPrompt.invoke({\n *   text: \"Hello world!\",\n * });\n * ```\n */ class SystemMessagePromptTemplate extends _StringImageMessagePromptTemplate {\n    static _messageClass() {\n        return _messages_index_js__WEBPACK_IMPORTED_MODULE_0__.SystemMessage;\n    }\n    static lc_name() {\n        return \"SystemMessagePromptTemplate\";\n    }\n}\nfunction _isBaseMessagePromptTemplate(baseMessagePromptTemplateLike) {\n    return typeof baseMessagePromptTemplateLike.formatMessages === \"function\";\n}\nfunction _coerceMessagePromptTemplateLike(messagePromptTemplateLike) {\n    if (_isBaseMessagePromptTemplate(messagePromptTemplateLike) || (0,_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessage)(messagePromptTemplateLike)) {\n        return messagePromptTemplateLike;\n    }\n    const message = (0,_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.coerceMessageLikeToMessage)(messagePromptTemplateLike);\n    if (message._getType() === \"human\") {\n        return HumanMessagePromptTemplate.fromTemplate(message.content);\n    } else if (message._getType() === \"ai\") {\n        return AIMessagePromptTemplate.fromTemplate(message.content);\n    } else if (message._getType() === \"system\") {\n        return SystemMessagePromptTemplate.fromTemplate(message.content);\n    } else if (_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.ChatMessage.isInstance(message)) {\n        return ChatMessagePromptTemplate.fromTemplate(message.content, message.role);\n    } else {\n        throw new Error(`Could not coerce message prompt template from input. Received message type: \"${message._getType()}\".`);\n    }\n}\nfunction isMessagesPlaceholder(x) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return x.constructor.lc_name() === \"MessagesPlaceholder\";\n}\n/**\n * Class that represents a chat prompt. It extends the\n * BaseChatPromptTemplate and uses an array of BaseMessagePromptTemplate\n * instances to format a series of messages for a conversation.\n * @example\n * ```typescript\n * const message = SystemMessagePromptTemplate.fromTemplate(\"{text}\");\n * const chatPrompt = ChatPromptTemplate.fromMessages([\n *   [\"ai\", \"You are a helpful assistant.\"],\n *   message,\n * ]);\n * const formattedChatPrompt = await chatPrompt.invoke({\n *   text: \"Hello world!\",\n * });\n * ```\n */ class ChatPromptTemplate extends BaseChatPromptTemplate {\n    static lc_name() {\n        return \"ChatPromptTemplate\";\n    }\n    get lc_aliases() {\n        return {\n            promptMessages: \"messages\"\n        };\n    }\n    constructor(input){\n        super(input);\n        Object.defineProperty(this, \"promptMessages\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"validateTemplate\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.assign(this, input);\n        if (this.validateTemplate) {\n            const inputVariablesMessages = new Set();\n            for (const promptMessage of this.promptMessages){\n                // eslint-disable-next-line no-instanceof/no-instanceof\n                if (promptMessage instanceof _messages_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage) continue;\n                for (const inputVariable of promptMessage.inputVariables){\n                    inputVariablesMessages.add(inputVariable);\n                }\n            }\n            const totalInputVariables = this.inputVariables;\n            const inputVariablesInstance = new Set(this.partialVariables ? totalInputVariables.concat(Object.keys(this.partialVariables)) : totalInputVariables);\n            const difference = new Set([\n                ...inputVariablesInstance\n            ].filter((x)=>!inputVariablesMessages.has(x)));\n            if (difference.size > 0) {\n                throw new Error(`Input variables \\`${[\n                    ...difference\n                ]}\\` are not used in any of the prompt messages.`);\n            }\n            const otherDifference = new Set([\n                ...inputVariablesMessages\n            ].filter((x)=>!inputVariablesInstance.has(x)));\n            if (otherDifference.size > 0) {\n                throw new Error(`Input variables \\`${[\n                    ...otherDifference\n                ]}\\` are used in prompt messages but not in the prompt template.`);\n            }\n        }\n    }\n    _getPromptType() {\n        return \"chat\";\n    }\n    async _parseImagePrompts(message, inputValues) {\n        if (typeof message.content === \"string\") {\n            return message;\n        }\n        const formattedMessageContent = await Promise.all(message.content.map(async (item)=>{\n            if (item.type !== \"image_url\") {\n                return item;\n            }\n            let imageUrl = \"\";\n            if (typeof item.image_url === \"string\") {\n                imageUrl = item.image_url;\n            } else {\n                imageUrl = item.image_url.url;\n            }\n            const promptTemplatePlaceholder = _prompt_js__WEBPACK_IMPORTED_MODULE_5__.PromptTemplate.fromTemplate(imageUrl);\n            const formattedUrl = await promptTemplatePlaceholder.format(inputValues);\n            if (typeof item.image_url !== \"string\" && \"url\" in item.image_url) {\n                // eslint-disable-next-line no-param-reassign\n                item.image_url.url = formattedUrl;\n            } else {\n                // eslint-disable-next-line no-param-reassign\n                item.image_url = formattedUrl;\n            }\n            return item;\n        }));\n        // eslint-disable-next-line no-param-reassign\n        message.content = formattedMessageContent;\n        return message;\n    }\n    async formatMessages(values) {\n        const allValues = await this.mergePartialAndUserVariables(values);\n        let resultMessages = [];\n        for (const promptMessage of this.promptMessages){\n            // eslint-disable-next-line no-instanceof/no-instanceof\n            if (promptMessage instanceof _messages_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage) {\n                resultMessages.push(await this._parseImagePrompts(promptMessage, allValues));\n            } else {\n                const inputValues = promptMessage.inputVariables.reduce((acc, inputVariable)=>{\n                    if (!(inputVariable in allValues) && !(isMessagesPlaceholder(promptMessage) && promptMessage.optional)) {\n                        throw new Error(`Missing value for input variable \\`${inputVariable.toString()}\\``);\n                    }\n                    acc[inputVariable] = allValues[inputVariable];\n                    return acc;\n                }, {});\n                const message = await promptMessage.formatMessages(inputValues);\n                resultMessages = resultMessages.concat(message);\n            }\n        }\n        return resultMessages;\n    }\n    async partial(values) {\n        // This is implemented in a way it doesn't require making\n        // BaseMessagePromptTemplate aware of .partial()\n        const newInputVariables = this.inputVariables.filter((iv)=>!(iv in values));\n        const newPartialVariables = {\n            ...this.partialVariables ?? {},\n            ...values\n        };\n        const promptDict = {\n            ...this,\n            inputVariables: newInputVariables,\n            partialVariables: newPartialVariables\n        };\n        return new ChatPromptTemplate(promptDict);\n    }\n    /**\n     * Load prompt template from a template f-string\n     */ static fromTemplate(template) {\n        const prompt = _prompt_js__WEBPACK_IMPORTED_MODULE_5__.PromptTemplate.fromTemplate(template);\n        const humanTemplate = new HumanMessagePromptTemplate({\n            prompt\n        });\n        return this.fromMessages([\n            humanTemplate\n        ]);\n    }\n    /**\n     * Create a chat model-specific prompt from individual chat messages\n     * or message-like tuples.\n     * @param promptMessages Messages to be passed to the chat model\n     * @returns A new ChatPromptTemplate\n     */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static fromMessages(promptMessages) {\n        const flattenedMessages = promptMessages.reduce((acc, promptMessage)=>acc.concat(// eslint-disable-next-line no-instanceof/no-instanceof\n            promptMessage instanceof ChatPromptTemplate ? promptMessage.promptMessages : [\n                _coerceMessagePromptTemplateLike(promptMessage)\n            ]), []);\n        const flattenedPartialVariables = promptMessages.reduce((acc, promptMessage)=>// eslint-disable-next-line no-instanceof/no-instanceof\n            promptMessage instanceof ChatPromptTemplate ? Object.assign(acc, promptMessage.partialVariables) : acc, Object.create(null));\n        const inputVariables = new Set();\n        for (const promptMessage of flattenedMessages){\n            // eslint-disable-next-line no-instanceof/no-instanceof\n            if (promptMessage instanceof _messages_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage) continue;\n            for (const inputVariable of promptMessage.inputVariables){\n                if (inputVariable in flattenedPartialVariables) {\n                    continue;\n                }\n                inputVariables.add(inputVariable);\n            }\n        }\n        return new ChatPromptTemplate({\n            inputVariables: [\n                ...inputVariables\n            ],\n            promptMessages: flattenedMessages,\n            partialVariables: flattenedPartialVariables\n        });\n    }\n    /** @deprecated Renamed to .fromMessages */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static fromPromptMessages(promptMessages) {\n        return this.fromMessages(promptMessages);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9jaGF0LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsZ0VBQWdFO0FBQ2hFLHdFQUF3RTtBQUM0RTtBQUM3RjtBQUNQO0FBQ087QUFDUDtBQUNIO0FBQ0k7QUFDSjtBQUM3Qzs7OztDQUlDLEdBQ00sTUFBTWMsa0NBQWtDTix3REFBUUE7SUFDbkRPLGFBQWM7UUFDVixLQUFLLElBQUlDO1FBQ1RDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO2dCQUFDO2dCQUFrQjtnQkFBVzthQUFPO1FBQ2hEO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CO1lBQzNDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7SUFDSjtJQUNBOzs7OztLQUtDLEdBQ0QsTUFBTUMsT0FBT0MsS0FBSyxFQUFFQyxPQUFPLEVBQUU7UUFDekIsT0FBTyxJQUFJLENBQUNDLGVBQWUsQ0FBQyxDQUFDRixRQUFVLElBQUksQ0FBQ0csY0FBYyxDQUFDSCxRQUFRQSxPQUFPO1lBQUUsR0FBR0MsT0FBTztZQUFFRyxTQUFTO1FBQVM7SUFDOUc7QUFDSjtBQUNBOzs7Q0FHQyxHQUNNLE1BQU1DLDRCQUE0QmY7SUFDckMsT0FBT2dCLFVBQVU7UUFDYixPQUFPO0lBQ1g7SUFDQWYsWUFBWWdCLE1BQU0sQ0FBRTtRQUNoQixJQUFJLE9BQU9BLFdBQVcsVUFBVTtZQUM1Qiw2Q0FBNkM7WUFDN0NBLFNBQVM7Z0JBQUVDLGNBQWNEO1lBQU87UUFDcEM7UUFDQSxLQUFLLENBQUNBO1FBQ05kLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7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LGNBQWMsRUFBRTtRQUN0QyxPQUFPLElBQUksQ0FBQ3FDLFlBQVksQ0FBQ3JDO0lBQzdCO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1mb3JtLWJ1aWxkZXItdHV0b3JpYWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9jaGF0LmpzPzczMDIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gRGVmYXVsdCBnZW5lcmljIFwiYW55XCIgdmFsdWVzIGFyZSBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG4vLyBSZXBsYWNlIHdpdGggXCJzdHJpbmdcIiB3aGVuIHdlIGFyZSBjb21mb3J0YWJsZSB3aXRoIGEgYnJlYWtpbmcgY2hhbmdlLlxuaW1wb3J0IHsgQUlNZXNzYWdlLCBIdW1hbk1lc3NhZ2UsIFN5c3RlbU1lc3NhZ2UsIEJhc2VNZXNzYWdlLCBDaGF0TWVzc2FnZSwgY29lcmNlTWVzc2FnZUxpa2VUb01lc3NhZ2UsIGlzQmFzZU1lc3NhZ2UsIH0gZnJvbSBcIi4uL21lc3NhZ2VzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBDaGF0UHJvbXB0VmFsdWUsIH0gZnJvbSBcIi4uL3Byb21wdF92YWx1ZXMuanNcIjtcbmltcG9ydCB7IFJ1bm5hYmxlIH0gZnJvbSBcIi4uL3J1bm5hYmxlcy9iYXNlLmpzXCI7XG5pbXBvcnQgeyBCYXNlU3RyaW5nUHJvbXB0VGVtcGxhdGUgfSBmcm9tIFwiLi9zdHJpbmcuanNcIjtcbmltcG9ydCB7IEJhc2VQcm9tcHRUZW1wbGF0ZSwgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBQcm9tcHRUZW1wbGF0ZSB9IGZyb20gXCIuL3Byb21wdC5qc1wiO1xuaW1wb3J0IHsgSW1hZ2VQcm9tcHRUZW1wbGF0ZSB9IGZyb20gXCIuL2ltYWdlLmpzXCI7XG5pbXBvcnQgeyBwYXJzZUZTdHJpbmcgfSBmcm9tIFwiLi90ZW1wbGF0ZS5qc1wiO1xuLyoqXG4gKiBBYnN0cmFjdCBjbGFzcyB0aGF0IHNlcnZlcyBhcyBhIGJhc2UgZm9yIGNyZWF0aW5nIG1lc3NhZ2UgcHJvbXB0XG4gKiB0ZW1wbGF0ZXMuIEl0IGRlZmluZXMgaG93IHRvIGZvcm1hdCBtZXNzYWdlcyBmb3IgZGlmZmVyZW50IHJvbGVzIGluIGFcbiAqIGNvbnZlcnNhdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIEJhc2VNZXNzYWdlUHJvbXB0VGVtcGxhdGUgZXh0ZW5kcyBSdW5uYWJsZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJwcm9tcHRzXCIsIFwiY2hhdFwiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxscyB0aGUgZm9ybWF0TWVzc2FnZXMgbWV0aG9kIHdpdGggdGhlIHByb3ZpZGVkIGlucHV0IGFuZCBvcHRpb25zLlxuICAgICAqIEBwYXJhbSBpbnB1dCBJbnB1dCBmb3IgdGhlIGZvcm1hdE1lc3NhZ2VzIG1ldGhvZFxuICAgICAqIEBwYXJhbSBvcHRpb25zIE9wdGlvbmFsIEJhc2VDYWxsYmFja0NvbmZpZ1xuICAgICAqIEByZXR1cm5zIEZvcm1hdHRlZCBvdXRwdXQgbWVzc2FnZXNcbiAgICAgKi9cbiAgICBhc3luYyBpbnZva2UoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbGxXaXRoQ29uZmlnKChpbnB1dCkgPT4gdGhpcy5mb3JtYXRNZXNzYWdlcyhpbnB1dCksIGlucHV0LCB7IC4uLm9wdGlvbnMsIHJ1blR5cGU6IFwicHJvbXB0XCIgfSk7XG4gICAgfVxufVxuLyoqXG4gKiBDbGFzcyB0aGF0IHJlcHJlc2VudHMgYSBwbGFjZWhvbGRlciBmb3IgbWVzc2FnZXMgaW4gYSBjaGF0IHByb21wdC4gSXRcbiAqIGV4dGVuZHMgdGhlIEJhc2VNZXNzYWdlUHJvbXB0VGVtcGxhdGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBNZXNzYWdlc1BsYWNlaG9sZGVyIGV4dGVuZHMgQmFzZU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIk1lc3NhZ2VzUGxhY2Vob2xkZXJcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIGlmICh0eXBlb2YgZmllbGRzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGZpZWxkcyA9IHsgdmFyaWFibGVOYW1lOiBmaWVsZHMgfTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ2YXJpYWJsZU5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwib3B0aW9uYWxcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy52YXJpYWJsZU5hbWUgPSBmaWVsZHMudmFyaWFibGVOYW1lO1xuICAgICAgICB0aGlzLm9wdGlvbmFsID0gZmllbGRzLm9wdGlvbmFsID8/IGZhbHNlO1xuICAgIH1cbiAgICBnZXQgaW5wdXRWYXJpYWJsZXMoKSB7XG4gICAgICAgIHJldHVybiBbdGhpcy52YXJpYWJsZU5hbWVdO1xuICAgIH1cbiAgICB2YWxpZGF0ZUlucHV0T3JUaHJvdyhpbnB1dCwgdmFyaWFibGVOYW1lKSB7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbmFsICYmICFpbnB1dCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFpbnB1dCkge1xuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoYEVycm9yOiBGaWVsZCBcIiR7dmFyaWFibGVOYW1lfVwiIGluIHByb21wdCB1c2VzIGEgTWVzc2FnZXNQbGFjZWhvbGRlciwgd2hpY2ggZXhwZWN0cyBhbiBhcnJheSBvZiBCYXNlTWVzc2FnZXMgYXMgYW4gaW5wdXQgdmFsdWUuIFJlY2VpdmVkOiB1bmRlZmluZWRgKTtcbiAgICAgICAgICAgIGVycm9yLm5hbWUgPSBcIklucHV0Rm9ybWF0RXJyb3JcIjtcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGxldCBpc0lucHV0QmFzZU1lc3NhZ2UgPSBmYWxzZTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG4gICAgICAgICAgICBpc0lucHV0QmFzZU1lc3NhZ2UgPSBpbnB1dC5ldmVyeSgobWVzc2FnZSkgPT4gaXNCYXNlTWVzc2FnZShtZXNzYWdlKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpc0lucHV0QmFzZU1lc3NhZ2UgPSBpc0Jhc2VNZXNzYWdlKGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWlzSW5wdXRCYXNlTWVzc2FnZSkge1xuICAgICAgICAgICAgY29uc3QgcmVhZGFibGVJbnB1dCA9IHR5cGVvZiBpbnB1dCA9PT0gXCJzdHJpbmdcIiA/IGlucHV0IDogSlNPTi5zdHJpbmdpZnkoaW5wdXQsIG51bGwsIDIpO1xuICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoYEVycm9yOiBGaWVsZCBcIiR7dmFyaWFibGVOYW1lfVwiIGluIHByb21wdCB1c2VzIGEgTWVzc2FnZXNQbGFjZWhvbGRlciwgd2hpY2ggZXhwZWN0cyBhbiBhcnJheSBvZiBCYXNlTWVzc2FnZXMgYXMgYW4gaW5wdXQgdmFsdWUuIFJlY2VpdmVkOiAke3JlYWRhYmxlSW5wdXR9YCk7XG4gICAgICAgICAgICBlcnJvci5uYW1lID0gXCJJbnB1dEZvcm1hdEVycm9yXCI7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgYXN5bmMgZm9ybWF0TWVzc2FnZXModmFsdWVzKSB7XG4gICAgICAgIHRoaXMudmFsaWRhdGVJbnB1dE9yVGhyb3codmFsdWVzW3RoaXMudmFyaWFibGVOYW1lXSwgdGhpcy52YXJpYWJsZU5hbWUpO1xuICAgICAgICByZXR1cm4gdmFsdWVzW3RoaXMudmFyaWFibGVOYW1lXSA/PyBbXTtcbiAgICB9XG59XG4vKipcbiAqIEFic3RyYWN0IGNsYXNzIHRoYXQgc2VydmVzIGFzIGEgYmFzZSBmb3IgY3JlYXRpbmcgbWVzc2FnZSBzdHJpbmcgcHJvbXB0XG4gKiB0ZW1wbGF0ZXMuIEl0IGV4dGVuZHMgdGhlIEJhc2VNZXNzYWdlUHJvbXB0VGVtcGxhdGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlTWVzc2FnZVN0cmluZ1Byb21wdFRlbXBsYXRlIGV4dGVuZHMgQmFzZU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZSB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIGlmICghKFwicHJvbXB0XCIgaW4gZmllbGRzKSkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgICBmaWVsZHMgPSB7IHByb21wdDogZmllbGRzIH07XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicHJvbXB0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucHJvbXB0ID0gZmllbGRzLnByb21wdDtcbiAgICB9XG4gICAgZ2V0IGlucHV0VmFyaWFibGVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9tcHQuaW5wdXRWYXJpYWJsZXM7XG4gICAgfVxuICAgIGFzeW5jIGZvcm1hdE1lc3NhZ2VzKHZhbHVlcykge1xuICAgICAgICByZXR1cm4gW2F3YWl0IHRoaXMuZm9ybWF0KHZhbHVlcyldO1xuICAgIH1cbn1cbi8qKlxuICogQWJzdHJhY3QgY2xhc3MgdGhhdCBzZXJ2ZXMgYXMgYSBiYXNlIGZvciBjcmVhdGluZyBjaGF0IHByb21wdFxuICogdGVtcGxhdGVzLiBJdCBleHRlbmRzIHRoZSBCYXNlUHJvbXB0VGVtcGxhdGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlQ2hhdFByb21wdFRlbXBsYXRlIGV4dGVuZHMgQmFzZVByb21wdFRlbXBsYXRlIHtcbiAgICBjb25zdHJ1Y3RvcihpbnB1dCkge1xuICAgICAgICBzdXBlcihpbnB1dCk7XG4gICAgfVxuICAgIGFzeW5jIGZvcm1hdCh2YWx1ZXMpIHtcbiAgICAgICAgcmV0dXJuIChhd2FpdCB0aGlzLmZvcm1hdFByb21wdFZhbHVlKHZhbHVlcykpLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIGFzeW5jIGZvcm1hdFByb21wdFZhbHVlKHZhbHVlcykge1xuICAgICAgICBjb25zdCByZXN1bHRNZXNzYWdlcyA9IGF3YWl0IHRoaXMuZm9ybWF0TWVzc2FnZXModmFsdWVzKTtcbiAgICAgICAgcmV0dXJuIG5ldyBDaGF0UHJvbXB0VmFsdWUocmVzdWx0TWVzc2FnZXMpO1xuICAgIH1cbn1cbi8qKlxuICogQ2xhc3MgdGhhdCByZXByZXNlbnRzIGEgY2hhdCBtZXNzYWdlIHByb21wdCB0ZW1wbGF0ZS4gSXQgZXh0ZW5kcyB0aGVcbiAqIEJhc2VNZXNzYWdlU3RyaW5nUHJvbXB0VGVtcGxhdGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBDaGF0TWVzc2FnZVByb21wdFRlbXBsYXRlIGV4dGVuZHMgQmFzZU1lc3NhZ2VTdHJpbmdQcm9tcHRUZW1wbGF0ZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkNoYXRNZXNzYWdlUHJvbXB0VGVtcGxhdGVcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzLCByb2xlKSB7XG4gICAgICAgIGlmICghKFwicHJvbXB0XCIgaW4gZmllbGRzKSkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduLCBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgICAgICBmaWVsZHMgPSB7IHByb21wdDogZmllbGRzLCByb2xlOiByb2xlIH07XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicm9sZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnJvbGUgPSBmaWVsZHMucm9sZTtcbiAgICB9XG4gICAgYXN5bmMgZm9ybWF0KHZhbHVlcykge1xuICAgICAgICByZXR1cm4gbmV3IENoYXRNZXNzYWdlKGF3YWl0IHRoaXMucHJvbXB0LmZvcm1hdCh2YWx1ZXMpLCB0aGlzLnJvbGUpO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVRlbXBsYXRlKHRlbXBsYXRlLCByb2xlKSB7XG4gICAgICAgIHJldHVybiBuZXcgdGhpcyhQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUodGVtcGxhdGUpLCByb2xlKTtcbiAgICB9XG59XG5jbGFzcyBfU3RyaW5nSW1hZ2VNZXNzYWdlUHJvbXB0VGVtcGxhdGUgZXh0ZW5kcyBCYXNlTWVzc2FnZVByb21wdFRlbXBsYXRlIHtcbiAgICBzdGF0aWMgX21lc3NhZ2VDbGFzcygpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FuIG5vdCBpbnZva2UgX21lc3NhZ2VDbGFzcyBmcm9tIGluc2lkZSBfU3RyaW5nSW1hZ2VNZXNzYWdlUHJvbXB0VGVtcGxhdGVcIik7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBAVE9ETyBXaGVuIHdlIGNvbWUgdXAgd2l0aCBhIGJldHRlciB3YXkgdG8gdHlwZSBwcm9tcHQgdGVtcGxhdGVzLCBmaXggdGhpcyAqL1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgZmllbGRzLCBhZGRpdGlvbmFsT3B0aW9ucykge1xuICAgICAgICBpZiAoIShcInByb21wdFwiIGluIGZpZWxkcykpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICAgICAgZmllbGRzID0geyBwcm9tcHQ6IGZpZWxkcyB9O1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJwcm9tcHRzXCIsIFwiY2hhdFwiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbnB1dFZhcmlhYmxlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW11cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImFkZGl0aW9uYWxPcHRpb25zXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB7fVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicHJvbXB0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1lc3NhZ2VDbGFzc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBDaGF0TWVzc2FnZSBjb250YWlucyByb2xlIGZpZWxkLCBvdGhlcnMgZG9uJ3QuXG4gICAgICAgIC8vIEJlY2F1c2Ugb2YgdGhpcywgd2UgaGF2ZSBhIHNlcGFyYXRlIGNsYXNzIHByb3BlcnR5IGZvciBDaGF0TWVzc2FnZS5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2hhdE1lc3NhZ2VDbGFzc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnByb21wdCA9IGZpZWxkcy5wcm9tcHQ7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMucHJvbXB0KSkge1xuICAgICAgICAgICAgbGV0IGlucHV0VmFyaWFibGVzID0gW107XG4gICAgICAgICAgICB0aGlzLnByb21wdC5mb3JFYWNoKChwcm9tcHQpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoXCJpbnB1dFZhcmlhYmxlc1wiIGluIHByb21wdCkge1xuICAgICAgICAgICAgICAgICAgICBpbnB1dFZhcmlhYmxlcyA9IGlucHV0VmFyaWFibGVzLmNvbmNhdChwcm9tcHQuaW5wdXRWYXJpYWJsZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5pbnB1dFZhcmlhYmxlcyA9IGlucHV0VmFyaWFibGVzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pbnB1dFZhcmlhYmxlcyA9IHRoaXMucHJvbXB0LmlucHV0VmFyaWFibGVzO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWRkaXRpb25hbE9wdGlvbnMgPSBhZGRpdGlvbmFsT3B0aW9ucyA/PyB0aGlzLmFkZGl0aW9uYWxPcHRpb25zO1xuICAgIH1cbiAgICBjcmVhdGVNZXNzYWdlKGNvbnRlbnQpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgY29uc3QgY29uc3RydWN0b3IgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgICAgICBpZiAoY29uc3RydWN0b3IuX21lc3NhZ2VDbGFzcygpKSB7XG4gICAgICAgICAgICBjb25zdCBNc2dDbGFzcyA9IGNvbnN0cnVjdG9yLl9tZXNzYWdlQ2xhc3MoKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTXNnQ2xhc3MoeyBjb250ZW50IH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNvbnN0cnVjdG9yLmNoYXRNZXNzYWdlQ2xhc3MpIHtcbiAgICAgICAgICAgIGNvbnN0IE1zZ0NsYXNzID0gY29uc3RydWN0b3IuY2hhdE1lc3NhZ2VDbGFzcygpO1xuICAgICAgICAgICAgLy8gQXNzdW1pbmcgQ2hhdE1lc3NhZ2UgY29uc3RydWN0b3IgYWxzbyB0YWtlcyBhIGNvbnRlbnQgYXJndW1lbnRcbiAgICAgICAgICAgIHJldHVybiBuZXcgTXNnQ2xhc3Moe1xuICAgICAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgICAgICAgcm9sZTogdGhpcy5nZXRSb2xlRnJvbU1lc3NhZ2VDbGFzcyhNc2dDbGFzcy5sY19uYW1lKCkpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBtZXNzYWdlIGNsYXNzIGRlZmluZWRcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0Um9sZUZyb21NZXNzYWdlQ2xhc3MobmFtZSkge1xuICAgICAgICBzd2l0Y2ggKG5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJIdW1hbk1lc3NhZ2VcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJodW1hblwiO1xuICAgICAgICAgICAgY2FzZSBcIkFJTWVzc2FnZVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImFpXCI7XG4gICAgICAgICAgICBjYXNlIFwiU3lzdGVtTWVzc2FnZVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcInN5c3RlbVwiO1xuICAgICAgICAgICAgY2FzZSBcIkNoYXRNZXNzYWdlXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiY2hhdFwiO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIG1lc3NhZ2UgY2xhc3MgbmFtZVwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgZnJvbVRlbXBsYXRlKHRlbXBsYXRlLCBhZGRpdGlvbmFsT3B0aW9ucykge1xuICAgICAgICBpZiAodHlwZW9mIHRlbXBsYXRlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IHRoaXMoUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKHRlbXBsYXRlKSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJvbXB0ID0gW107XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiB0ZW1wbGF0ZSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtID09PSBcInN0cmluZ1wiIHx8XG4gICAgICAgICAgICAgICAgKHR5cGVvZiBpdGVtID09PSBcIm9iamVjdFwiICYmIFwidGV4dFwiIGluIGl0ZW0pKSB7XG4gICAgICAgICAgICAgICAgbGV0IHRleHQgPSBcIlwiO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gaXRlbTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGl0ZW0udGV4dCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gaXRlbS50ZXh0ID8/IFwiXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHByb21wdC5wdXNoKFByb21wdFRlbXBsYXRlLmZyb21UZW1wbGF0ZSh0ZXh0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgaXRlbSA9PT0gXCJvYmplY3RcIiAmJiBcImltYWdlX3VybFwiIGluIGl0ZW0pIHtcbiAgICAgICAgICAgICAgICBsZXQgaW1nVGVtcGxhdGUgPSBpdGVtLmltYWdlX3VybCA/PyBcIlwiO1xuICAgICAgICAgICAgICAgIGxldCBpbWdUZW1wbGF0ZU9iamVjdDtcbiAgICAgICAgICAgICAgICBsZXQgaW5wdXRWYXJpYWJsZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGltZ1RlbXBsYXRlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZFRlbXBsYXRlID0gcGFyc2VGU3RyaW5nKGltZ1RlbXBsYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFyaWFibGVzID0gcGFyc2VkVGVtcGxhdGUuZmxhdE1hcCgoaXRlbSkgPT4gaXRlbS50eXBlID09PSBcInZhcmlhYmxlXCIgPyBbaXRlbS5uYW1lXSA6IFtdKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCh2YXJpYWJsZXM/Lmxlbmd0aCA/PyAwKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YXJpYWJsZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgT25seSBvbmUgZm9ybWF0IHZhcmlhYmxlIGFsbG93ZWQgcGVyIGltYWdlIHRlbXBsYXRlLlxcbkdvdDogJHt2YXJpYWJsZXN9XFxuRnJvbTogJHtpbWdUZW1wbGF0ZX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0VmFyaWFibGVzID0gW3ZhcmlhYmxlc1swXV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFZhcmlhYmxlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGltZ1RlbXBsYXRlID0geyB1cmw6IGltZ1RlbXBsYXRlIH07XG4gICAgICAgICAgICAgICAgICAgIGltZ1RlbXBsYXRlT2JqZWN0ID0gbmV3IEltYWdlUHJvbXB0VGVtcGxhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IGltZ1RlbXBsYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRWYXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgaW1nVGVtcGxhdGUgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFwidXJsXCIgaW4gaW1nVGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZFRlbXBsYXRlID0gcGFyc2VGU3RyaW5nKGltZ1RlbXBsYXRlLnVybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFZhcmlhYmxlcyA9IHBhcnNlZFRlbXBsYXRlLmZsYXRNYXAoKGl0ZW0pID0+IGl0ZW0udHlwZSA9PT0gXCJ2YXJpYWJsZVwiID8gW2l0ZW0ubmFtZV0gOiBbXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFZhcmlhYmxlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGltZ1RlbXBsYXRlT2JqZWN0ID0gbmV3IEltYWdlUHJvbXB0VGVtcGxhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IGltZ1RlbXBsYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRWYXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBpbWFnZSB0ZW1wbGF0ZVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcHJvbXB0LnB1c2goaW1nVGVtcGxhdGVPYmplY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgdGhpcyh7IHByb21wdCwgYWRkaXRpb25hbE9wdGlvbnMgfSk7XG4gICAgfVxuICAgIGFzeW5jIGZvcm1hdChpbnB1dCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgIGlmICh0aGlzLnByb21wdCBpbnN0YW5jZW9mIEJhc2VTdHJpbmdQcm9tcHRUZW1wbGF0ZSkge1xuICAgICAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IHRoaXMucHJvbXB0LmZvcm1hdChpbnB1dCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVNZXNzYWdlKHRleHQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBwcm9tcHQgb2YgdGhpcy5wcm9tcHQpIHtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgICAgIGxldCBpbnB1dHMgPSB7fTtcbiAgICAgICAgICAgICAgICBpZiAoIShcImlucHV0VmFyaWFibGVzXCIgaW4gcHJvbXB0KSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFByb21wdCAke3Byb21wdH0gZG9lcyBub3QgaGF2ZSBpbnB1dFZhcmlhYmxlcyBkZWZpbmVkLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgcHJvbXB0LmlucHV0VmFyaWFibGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaW5wdXRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dHMgPSB7IFtpdGVtXTogaW5wdXRbaXRlbV0gfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpbnB1dHMgPSB7IC4uLmlucHV0cywgW2l0ZW1dOiBpbnB1dFtpdGVtXSB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgICAgICAgICAgaWYgKHByb21wdCBpbnN0YW5jZW9mIEJhc2VTdHJpbmdQcm9tcHRUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmb3JtYXR0ZWQgPSBhd2FpdCBwcm9tcHQuZm9ybWF0KGlucHV0cyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQucHVzaCh7IHR5cGU6IFwidGV4dFwiLCB0ZXh0OiBmb3JtYXR0ZWQgfSk7XG4gICAgICAgICAgICAgICAgICAgIC8qKiBAVE9ETyByZXBsYWNlIHRoaXMgKi9cbiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWluc3RhbmNlb2Yvbm8taW5zdGFuY2VvZlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChwcm9tcHQgaW5zdGFuY2VvZiBJbWFnZVByb21wdFRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvcm1hdHRlZCA9IGF3YWl0IHByb21wdC5mb3JtYXQoaW5wdXRzKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudC5wdXNoKHsgdHlwZTogXCJpbWFnZV91cmxcIiwgaW1hZ2VfdXJsOiBmb3JtYXR0ZWQgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlTWVzc2FnZShjb250ZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBmb3JtYXRNZXNzYWdlcyh2YWx1ZXMpIHtcbiAgICAgICAgcmV0dXJuIFthd2FpdCB0aGlzLmZvcm1hdCh2YWx1ZXMpXTtcbiAgICB9XG59XG4vKipcbiAqIENsYXNzIHRoYXQgcmVwcmVzZW50cyBhIGh1bWFuIG1lc3NhZ2UgcHJvbXB0IHRlbXBsYXRlLiBJdCBleHRlbmRzIHRoZVxuICogQmFzZU1lc3NhZ2VTdHJpbmdQcm9tcHRUZW1wbGF0ZS5cbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBtZXNzYWdlID0gSHVtYW5NZXNzYWdlUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKFwie3RleHR9XCIpO1xuICogY29uc3QgZm9ybWF0dGVkID0gYXdhaXQgbWVzc2FnZS5mb3JtYXQoeyB0ZXh0OiBcIkhlbGxvIHdvcmxkIVwiIH0pO1xuICpcbiAqIGNvbnN0IGNoYXRQcm9tcHQgPSBDaGF0UHJvbXB0VGVtcGxhdGUuZnJvbU1lc3NhZ2VzKFttZXNzYWdlXSk7XG4gKiBjb25zdCBmb3JtYXR0ZWRDaGF0UHJvbXB0ID0gYXdhaXQgY2hhdFByb21wdC5pbnZva2Uoe1xuICogICB0ZXh0OiBcIkhlbGxvIHdvcmxkIVwiLFxuICogfSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIEh1bWFuTWVzc2FnZVByb21wdFRlbXBsYXRlIGV4dGVuZHMgX1N0cmluZ0ltYWdlTWVzc2FnZVByb21wdFRlbXBsYXRlIHtcbiAgICBzdGF0aWMgX21lc3NhZ2VDbGFzcygpIHtcbiAgICAgICAgcmV0dXJuIEh1bWFuTWVzc2FnZTtcbiAgICB9XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkh1bWFuTWVzc2FnZVByb21wdFRlbXBsYXRlXCI7XG4gICAgfVxufVxuLyoqXG4gKiBDbGFzcyB0aGF0IHJlcHJlc2VudHMgYW4gQUkgbWVzc2FnZSBwcm9tcHQgdGVtcGxhdGUuIEl0IGV4dGVuZHMgdGhlXG4gKiBCYXNlTWVzc2FnZVN0cmluZ1Byb21wdFRlbXBsYXRlLlxuICovXG5leHBvcnQgY2xhc3MgQUlNZXNzYWdlUHJvbXB0VGVtcGxhdGUgZXh0ZW5kcyBfU3RyaW5nSW1hZ2VNZXNzYWdlUHJvbXB0VGVtcGxhdGUge1xuICAgIHN0YXRpYyBfbWVzc2FnZUNsYXNzKCkge1xuICAgICAgICByZXR1cm4gQUlNZXNzYWdlO1xuICAgIH1cbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiQUlNZXNzYWdlUHJvbXB0VGVtcGxhdGVcIjtcbiAgICB9XG59XG4vKipcbiAqIENsYXNzIHRoYXQgcmVwcmVzZW50cyBhIHN5c3RlbSBtZXNzYWdlIHByb21wdCB0ZW1wbGF0ZS4gSXQgZXh0ZW5kcyB0aGVcbiAqIEJhc2VNZXNzYWdlU3RyaW5nUHJvbXB0VGVtcGxhdGUuXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgbWVzc2FnZSA9IFN5c3RlbU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUoXCJ7dGV4dH1cIik7XG4gKiBjb25zdCBmb3JtYXR0ZWQgPSBhd2FpdCBtZXNzYWdlLmZvcm1hdCh7IHRleHQ6IFwiSGVsbG8gd29ybGQhXCIgfSk7XG4gKlxuICogY29uc3QgY2hhdFByb21wdCA9IENoYXRQcm9tcHRUZW1wbGF0ZS5mcm9tTWVzc2FnZXMoW21lc3NhZ2VdKTtcbiAqIGNvbnN0IGZvcm1hdHRlZENoYXRQcm9tcHQgPSBhd2FpdCBjaGF0UHJvbXB0Lmludm9rZSh7XG4gKiAgIHRleHQ6IFwiSGVsbG8gd29ybGQhXCIsXG4gKiB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgU3lzdGVtTWVzc2FnZVByb21wdFRlbXBsYXRlIGV4dGVuZHMgX1N0cmluZ0ltYWdlTWVzc2FnZVByb21wdFRlbXBsYXRlIHtcbiAgICBzdGF0aWMgX21lc3NhZ2VDbGFzcygpIHtcbiAgICAgICAgcmV0dXJuIFN5c3RlbU1lc3NhZ2U7XG4gICAgfVxuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJTeXN0ZW1NZXNzYWdlUHJvbXB0VGVtcGxhdGVcIjtcbiAgICB9XG59XG5mdW5jdGlvbiBfaXNCYXNlTWVzc2FnZVByb21wdFRlbXBsYXRlKGJhc2VNZXNzYWdlUHJvbXB0VGVtcGxhdGVMaWtlKSB7XG4gICAgcmV0dXJuICh0eXBlb2YgYmFzZU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZUxpa2VcbiAgICAgICAgLmZvcm1hdE1lc3NhZ2VzID09PSBcImZ1bmN0aW9uXCIpO1xufVxuZnVuY3Rpb24gX2NvZXJjZU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZUxpa2UobWVzc2FnZVByb21wdFRlbXBsYXRlTGlrZSkge1xuICAgIGlmIChfaXNCYXNlTWVzc2FnZVByb21wdFRlbXBsYXRlKG1lc3NhZ2VQcm9tcHRUZW1wbGF0ZUxpa2UpIHx8XG4gICAgICAgIGlzQmFzZU1lc3NhZ2UobWVzc2FnZVByb21wdFRlbXBsYXRlTGlrZSkpIHtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VQcm9tcHRUZW1wbGF0ZUxpa2U7XG4gICAgfVxuICAgIGNvbnN0IG1lc3NhZ2UgPSBjb2VyY2VNZXNzYWdlTGlrZVRvTWVzc2FnZShtZXNzYWdlUHJvbXB0VGVtcGxhdGVMaWtlKTtcbiAgICBpZiAobWVzc2FnZS5fZ2V0VHlwZSgpID09PSBcImh1bWFuXCIpIHtcbiAgICAgICAgcmV0dXJuIEh1bWFuTWVzc2FnZVByb21wdFRlbXBsYXRlLmZyb21UZW1wbGF0ZShtZXNzYWdlLmNvbnRlbnQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChtZXNzYWdlLl9nZXRUeXBlKCkgPT09IFwiYWlcIikge1xuICAgICAgICByZXR1cm4gQUlNZXNzYWdlUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKG1lc3NhZ2UuY29udGVudCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKG1lc3NhZ2UuX2dldFR5cGUoKSA9PT0gXCJzeXN0ZW1cIikge1xuICAgICAgICByZXR1cm4gU3lzdGVtTWVzc2FnZVByb21wdFRlbXBsYXRlLmZyb21UZW1wbGF0ZShtZXNzYWdlLmNvbnRlbnQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChDaGF0TWVzc2FnZS5pc0luc3RhbmNlKG1lc3NhZ2UpKSB7XG4gICAgICAgIHJldHVybiBDaGF0TWVzc2FnZVByb21wdFRlbXBsYXRlLmZyb21UZW1wbGF0ZShtZXNzYWdlLmNvbnRlbnQsIG1lc3NhZ2Uucm9sZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBjb2VyY2UgbWVzc2FnZSBwcm9tcHQgdGVtcGxhdGUgZnJvbSBpbnB1dC4gUmVjZWl2ZWQgbWVzc2FnZSB0eXBlOiBcIiR7bWVzc2FnZS5fZ2V0VHlwZSgpfVwiLmApO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGlzTWVzc2FnZXNQbGFjZWhvbGRlcih4KSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICByZXR1cm4geC5jb25zdHJ1Y3Rvci5sY19uYW1lKCkgPT09IFwiTWVzc2FnZXNQbGFjZWhvbGRlclwiO1xufVxuLyoqXG4gKiBDbGFzcyB0aGF0IHJlcHJlc2VudHMgYSBjaGF0IHByb21wdC4gSXQgZXh0ZW5kcyB0aGVcbiAqIEJhc2VDaGF0UHJvbXB0VGVtcGxhdGUgYW5kIHVzZXMgYW4gYXJyYXkgb2YgQmFzZU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZVxuICogaW5zdGFuY2VzIHRvIGZvcm1hdCBhIHNlcmllcyBvZiBtZXNzYWdlcyBmb3IgYSBjb252ZXJzYXRpb24uXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgbWVzc2FnZSA9IFN5c3RlbU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUoXCJ7dGV4dH1cIik7XG4gKiBjb25zdCBjaGF0UHJvbXB0ID0gQ2hhdFByb21wdFRlbXBsYXRlLmZyb21NZXNzYWdlcyhbXG4gKiAgIFtcImFpXCIsIFwiWW91IGFyZSBhIGhlbHBmdWwgYXNzaXN0YW50LlwiXSxcbiAqICAgbWVzc2FnZSxcbiAqIF0pO1xuICogY29uc3QgZm9ybWF0dGVkQ2hhdFByb21wdCA9IGF3YWl0IGNoYXRQcm9tcHQuaW52b2tlKHtcbiAqICAgdGV4dDogXCJIZWxsbyB3b3JsZCFcIixcbiAqIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBDaGF0UHJvbXB0VGVtcGxhdGUgZXh0ZW5kcyBCYXNlQ2hhdFByb21wdFRlbXBsYXRlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiQ2hhdFByb21wdFRlbXBsYXRlXCI7XG4gICAgfVxuICAgIGdldCBsY19hbGlhc2VzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcHJvbXB0TWVzc2FnZXM6IFwibWVzc2FnZXNcIixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoaW5wdXQpIHtcbiAgICAgICAgc3VwZXIoaW5wdXQpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJwcm9tcHRNZXNzYWdlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ2YWxpZGF0ZVRlbXBsYXRlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMsIGlucHV0KTtcbiAgICAgICAgaWYgKHRoaXMudmFsaWRhdGVUZW1wbGF0ZSkge1xuICAgICAgICAgICAgY29uc3QgaW5wdXRWYXJpYWJsZXNNZXNzYWdlcyA9IG5ldyBTZXQoKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcHJvbXB0TWVzc2FnZSBvZiB0aGlzLnByb21wdE1lc3NhZ2VzKSB7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWluc3RhbmNlb2Yvbm8taW5zdGFuY2VvZlxuICAgICAgICAgICAgICAgIGlmIChwcm9tcHRNZXNzYWdlIGluc3RhbmNlb2YgQmFzZU1lc3NhZ2UpXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaW5wdXRWYXJpYWJsZSBvZiBwcm9tcHRNZXNzYWdlLmlucHV0VmFyaWFibGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0VmFyaWFibGVzTWVzc2FnZXMuYWRkKGlucHV0VmFyaWFibGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHRvdGFsSW5wdXRWYXJpYWJsZXMgPSB0aGlzLmlucHV0VmFyaWFibGVzO1xuICAgICAgICAgICAgY29uc3QgaW5wdXRWYXJpYWJsZXNJbnN0YW5jZSA9IG5ldyBTZXQodGhpcy5wYXJ0aWFsVmFyaWFibGVzXG4gICAgICAgICAgICAgICAgPyB0b3RhbElucHV0VmFyaWFibGVzLmNvbmNhdChPYmplY3Qua2V5cyh0aGlzLnBhcnRpYWxWYXJpYWJsZXMpKVxuICAgICAgICAgICAgICAgIDogdG90YWxJbnB1dFZhcmlhYmxlcyk7XG4gICAgICAgICAgICBjb25zdCBkaWZmZXJlbmNlID0gbmV3IFNldChbLi4uaW5wdXRWYXJpYWJsZXNJbnN0YW5jZV0uZmlsdGVyKCh4KSA9PiAhaW5wdXRWYXJpYWJsZXNNZXNzYWdlcy5oYXMoeCkpKTtcbiAgICAgICAgICAgIGlmIChkaWZmZXJlbmNlLnNpemUgPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnB1dCB2YXJpYWJsZXMgXFxgJHtbXG4gICAgICAgICAgICAgICAgICAgIC4uLmRpZmZlcmVuY2UsXG4gICAgICAgICAgICAgICAgXX1cXGAgYXJlIG5vdCB1c2VkIGluIGFueSBvZiB0aGUgcHJvbXB0IG1lc3NhZ2VzLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgb3RoZXJEaWZmZXJlbmNlID0gbmV3IFNldChbLi4uaW5wdXRWYXJpYWJsZXNNZXNzYWdlc10uZmlsdGVyKCh4KSA9PiAhaW5wdXRWYXJpYWJsZXNJbnN0YW5jZS5oYXMoeCkpKTtcbiAgICAgICAgICAgIGlmIChvdGhlckRpZmZlcmVuY2Uuc2l6ZSA+IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYElucHV0IHZhcmlhYmxlcyBcXGAke1tcbiAgICAgICAgICAgICAgICAgICAgLi4ub3RoZXJEaWZmZXJlbmNlLFxuICAgICAgICAgICAgICAgIF19XFxgIGFyZSB1c2VkIGluIHByb21wdCBtZXNzYWdlcyBidXQgbm90IGluIHRoZSBwcm9tcHQgdGVtcGxhdGUuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgX2dldFByb21wdFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImNoYXRcIjtcbiAgICB9XG4gICAgYXN5bmMgX3BhcnNlSW1hZ2VQcm9tcHRzKG1lc3NhZ2UsIGlucHV0VmFsdWVzKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbWVzc2FnZS5jb250ZW50ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmb3JtYXR0ZWRNZXNzYWdlQ29udGVudCA9IGF3YWl0IFByb21pc2UuYWxsKG1lc3NhZ2UuY29udGVudC5tYXAoYXN5bmMgKGl0ZW0pID0+IHtcbiAgICAgICAgICAgIGlmIChpdGVtLnR5cGUgIT09IFwiaW1hZ2VfdXJsXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBpbWFnZVVybCA9IFwiXCI7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0uaW1hZ2VfdXJsID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgaW1hZ2VVcmwgPSBpdGVtLmltYWdlX3VybDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGltYWdlVXJsID0gaXRlbS5pbWFnZV91cmwudXJsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcHJvbXB0VGVtcGxhdGVQbGFjZWhvbGRlciA9IFByb21wdFRlbXBsYXRlLmZyb21UZW1wbGF0ZShpbWFnZVVybCk7XG4gICAgICAgICAgICBjb25zdCBmb3JtYXR0ZWRVcmwgPSBhd2FpdCBwcm9tcHRUZW1wbGF0ZVBsYWNlaG9sZGVyLmZvcm1hdChpbnB1dFZhbHVlcyk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGl0ZW0uaW1hZ2VfdXJsICE9PSBcInN0cmluZ1wiICYmIFwidXJsXCIgaW4gaXRlbS5pbWFnZV91cmwpIHtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgICAgICBpdGVtLmltYWdlX3VybC51cmwgPSBmb3JtYXR0ZWRVcmw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgICAgICBpdGVtLmltYWdlX3VybCA9IGZvcm1hdHRlZFVybDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpdGVtO1xuICAgICAgICB9KSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICBtZXNzYWdlLmNvbnRlbnQgPSBmb3JtYXR0ZWRNZXNzYWdlQ29udGVudDtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG4gICAgfVxuICAgIGFzeW5jIGZvcm1hdE1lc3NhZ2VzKHZhbHVlcykge1xuICAgICAgICBjb25zdCBhbGxWYWx1ZXMgPSBhd2FpdCB0aGlzLm1lcmdlUGFydGlhbEFuZFVzZXJWYXJpYWJsZXModmFsdWVzKTtcbiAgICAgICAgbGV0IHJlc3VsdE1lc3NhZ2VzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgcHJvbXB0TWVzc2FnZSBvZiB0aGlzLnByb21wdE1lc3NhZ2VzKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgICAgICBpZiAocHJvbXB0TWVzc2FnZSBpbnN0YW5jZW9mIEJhc2VNZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0TWVzc2FnZXMucHVzaChhd2FpdCB0aGlzLl9wYXJzZUltYWdlUHJvbXB0cyhwcm9tcHRNZXNzYWdlLCBhbGxWYWx1ZXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0VmFsdWVzID0gcHJvbXB0TWVzc2FnZS5pbnB1dFZhcmlhYmxlcy5yZWR1Y2UoKGFjYywgaW5wdXRWYXJpYWJsZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShpbnB1dFZhcmlhYmxlIGluIGFsbFZhbHVlcykgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICEoaXNNZXNzYWdlc1BsYWNlaG9sZGVyKHByb21wdE1lc3NhZ2UpICYmIHByb21wdE1lc3NhZ2Uub3B0aW9uYWwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgdmFsdWUgZm9yIGlucHV0IHZhcmlhYmxlIFxcYCR7aW5wdXRWYXJpYWJsZS50b1N0cmluZygpfVxcYGApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGFjY1tpbnB1dFZhcmlhYmxlXSA9IGFsbFZhbHVlc1tpbnB1dFZhcmlhYmxlXTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgICAgICAgICAgICB9LCB7fSk7XG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHByb21wdE1lc3NhZ2UuZm9ybWF0TWVzc2FnZXMoaW5wdXRWYWx1ZXMpO1xuICAgICAgICAgICAgICAgIHJlc3VsdE1lc3NhZ2VzID0gcmVzdWx0TWVzc2FnZXMuY29uY2F0KG1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHRNZXNzYWdlcztcbiAgICB9XG4gICAgYXN5bmMgcGFydGlhbCh2YWx1ZXMpIHtcbiAgICAgICAgLy8gVGhpcyBpcyBpbXBsZW1lbnRlZCBpbiBhIHdheSBpdCBkb2Vzbid0IHJlcXVpcmUgbWFraW5nXG4gICAgICAgIC8vIEJhc2VNZXNzYWdlUHJvbXB0VGVtcGxhdGUgYXdhcmUgb2YgLnBhcnRpYWwoKVxuICAgICAgICBjb25zdCBuZXdJbnB1dFZhcmlhYmxlcyA9IHRoaXMuaW5wdXRWYXJpYWJsZXMuZmlsdGVyKChpdikgPT4gIShpdiBpbiB2YWx1ZXMpKTtcbiAgICAgICAgY29uc3QgbmV3UGFydGlhbFZhcmlhYmxlcyA9IHtcbiAgICAgICAgICAgIC4uLih0aGlzLnBhcnRpYWxWYXJpYWJsZXMgPz8ge30pLFxuICAgICAgICAgICAgLi4udmFsdWVzLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBwcm9tcHREaWN0ID0ge1xuICAgICAgICAgICAgLi4udGhpcyxcbiAgICAgICAgICAgIGlucHV0VmFyaWFibGVzOiBuZXdJbnB1dFZhcmlhYmxlcyxcbiAgICAgICAgICAgIHBhcnRpYWxWYXJpYWJsZXM6IG5ld1BhcnRpYWxWYXJpYWJsZXMsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBuZXcgQ2hhdFByb21wdFRlbXBsYXRlKHByb21wdERpY3QpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2FkIHByb21wdCB0ZW1wbGF0ZSBmcm9tIGEgdGVtcGxhdGUgZi1zdHJpbmdcbiAgICAgKi9cbiAgICBzdGF0aWMgZnJvbVRlbXBsYXRlKHRlbXBsYXRlKSB7XG4gICAgICAgIGNvbnN0IHByb21wdCA9IFByb21wdFRlbXBsYXRlLmZyb21UZW1wbGF0ZSh0ZW1wbGF0ZSk7XG4gICAgICAgIGNvbnN0IGh1bWFuVGVtcGxhdGUgPSBuZXcgSHVtYW5NZXNzYWdlUHJvbXB0VGVtcGxhdGUoeyBwcm9tcHQgfSk7XG4gICAgICAgIHJldHVybiB0aGlzLmZyb21NZXNzYWdlcyhbaHVtYW5UZW1wbGF0ZV0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBjaGF0IG1vZGVsLXNwZWNpZmljIHByb21wdCBmcm9tIGluZGl2aWR1YWwgY2hhdCBtZXNzYWdlc1xuICAgICAqIG9yIG1lc3NhZ2UtbGlrZSB0dXBsZXMuXG4gICAgICogQHBhcmFtIHByb21wdE1lc3NhZ2VzIE1lc3NhZ2VzIHRvIGJlIHBhc3NlZCB0byB0aGUgY2hhdCBtb2RlbFxuICAgICAqIEByZXR1cm5zIEEgbmV3IENoYXRQcm9tcHRUZW1wbGF0ZVxuICAgICAqL1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgc3RhdGljIGZyb21NZXNzYWdlcyhwcm9tcHRNZXNzYWdlcykge1xuICAgICAgICBjb25zdCBmbGF0dGVuZWRNZXNzYWdlcyA9IHByb21wdE1lc3NhZ2VzLnJlZHVjZSgoYWNjLCBwcm9tcHRNZXNzYWdlKSA9PiBhY2MuY29uY2F0KFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgIHByb21wdE1lc3NhZ2UgaW5zdGFuY2VvZiBDaGF0UHJvbXB0VGVtcGxhdGVcbiAgICAgICAgICAgID8gcHJvbXB0TWVzc2FnZS5wcm9tcHRNZXNzYWdlc1xuICAgICAgICAgICAgOiBbX2NvZXJjZU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZUxpa2UocHJvbXB0TWVzc2FnZSldKSwgW10pO1xuICAgICAgICBjb25zdCBmbGF0dGVuZWRQYXJ0aWFsVmFyaWFibGVzID0gcHJvbXB0TWVzc2FnZXMucmVkdWNlKChhY2MsIHByb21wdE1lc3NhZ2UpID0+IFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgIHByb21wdE1lc3NhZ2UgaW5zdGFuY2VvZiBDaGF0UHJvbXB0VGVtcGxhdGVcbiAgICAgICAgICAgID8gT2JqZWN0LmFzc2lnbihhY2MsIHByb21wdE1lc3NhZ2UucGFydGlhbFZhcmlhYmxlcylcbiAgICAgICAgICAgIDogYWNjLCBPYmplY3QuY3JlYXRlKG51bGwpKTtcbiAgICAgICAgY29uc3QgaW5wdXRWYXJpYWJsZXMgPSBuZXcgU2V0KCk7XG4gICAgICAgIGZvciAoY29uc3QgcHJvbXB0TWVzc2FnZSBvZiBmbGF0dGVuZWRNZXNzYWdlcykge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWluc3RhbmNlb2Yvbm8taW5zdGFuY2VvZlxuICAgICAgICAgICAgaWYgKHByb21wdE1lc3NhZ2UgaW5zdGFuY2VvZiBCYXNlTWVzc2FnZSlcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaW5wdXRWYXJpYWJsZSBvZiBwcm9tcHRNZXNzYWdlLmlucHV0VmFyaWFibGVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0VmFyaWFibGUgaW4gZmxhdHRlbmVkUGFydGlhbFZhcmlhYmxlcykge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW5wdXRWYXJpYWJsZXMuYWRkKGlucHV0VmFyaWFibGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgQ2hhdFByb21wdFRlbXBsYXRlKHtcbiAgICAgICAgICAgIGlucHV0VmFyaWFibGVzOiBbLi4uaW5wdXRWYXJpYWJsZXNdLFxuICAgICAgICAgICAgcHJvbXB0TWVzc2FnZXM6IGZsYXR0ZW5lZE1lc3NhZ2VzLFxuICAgICAgICAgICAgcGFydGlhbFZhcmlhYmxlczogZmxhdHRlbmVkUGFydGlhbFZhcmlhYmxlcyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKiBAZGVwcmVjYXRlZCBSZW5hbWVkIHRvIC5mcm9tTWVzc2FnZXMgKi9cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHN0YXRpYyBmcm9tUHJvbXB0TWVzc2FnZXMocHJvbXB0TWVzc2FnZXMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZnJvbU1lc3NhZ2VzKHByb21wdE1lc3NhZ2VzKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiQUlNZXNzYWdlIiwiSHVtYW5NZXNzYWdlIiwiU3lzdGVtTWVzc2FnZSIsIkJhc2VNZXNzYWdlIiwiQ2hhdE1lc3NhZ2UiLCJjb2VyY2VNZXNzYWdlTGlrZVRvTWVzc2FnZSIsImlzQmFzZU1lc3NhZ2UiLCJDaGF0UHJvbXB0VmFsdWUiLCJSdW5uYWJsZSIsIkJhc2VTdHJpbmdQcm9tcHRUZW1wbGF0ZSIsIkJhc2VQcm9tcHRUZW1wbGF0ZSIsIlByb21wdFRlbXBsYXRlIiwiSW1hZ2VQcm9tcHRUZW1wbGF0ZSIsInBhcnNlRlN0cmluZyIsIkJhc2VNZXNzYWdlUHJvbXB0VGVtcGxhdGUiLCJjb25zdHJ1Y3RvciIsImFyZ3VtZW50cyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJpbnZva2UiLCJpbnB1dCIsIm9wdGlvbnMiLCJfY2FsbFdpdGhDb25maWciLCJmb3JtYXRNZXNzYWdlcyIsInJ1blR5cGUiLCJNZXNzYWdlc1BsYWNlaG9sZGVyIiwibGNfbmFtZSIsImZpZWxkcyIsInZhcmlhYmxlTmFtZSIsIm9wdGlvbmFsIiwiaW5wdXRWYXJpYWJsZXMiLCJ2YWxpZGF0ZUlucHV0T3JUaHJvdyIsImVycm9yIiwiRXJyb3IiLCJuYW1lIiwiaXNJbnB1dEJhc2VNZXNzYWdlIiwiQXJyYXkiLCJpc0FycmF5IiwiZXZlcnkiLCJtZXNzYWdlIiwicmVhZGFibGVJbnB1dCIsIkpTT04iLCJzdHJpbmdpZnkiLCJ2YWx1ZXMiLCJCYXNlTWVzc2FnZVN0cmluZ1Byb21wdFRlbXBsYXRlIiwicHJvbXB0IiwiZm9ybWF0IiwiQmFzZUNoYXRQcm9tcHRUZW1wbGF0ZSIsImZvcm1hdFByb21wdFZhbHVlIiwidG9TdHJpbmciLCJyZXN1bHRNZXNzYWdlcyIsIkNoYXRNZXNzYWdlUHJvbXB0VGVtcGxhdGUiLCJyb2xlIiwiZnJvbVRlbXBsYXRlIiwidGVtcGxhdGUiLCJfU3RyaW5nSW1hZ2VNZXNzYWdlUHJvbXB0VGVtcGxhdGUiLCJfbWVzc2FnZUNsYXNzIiwiYWRkaXRpb25hbE9wdGlvbnMiLCJmb3JFYWNoIiwiY29uY2F0IiwiY3JlYXRlTWVzc2FnZSIsImNvbnRlbnQiLCJNc2dDbGFzcyIsImNoYXRNZXNzYWdlQ2xhc3MiLCJnZXRSb2xlRnJvbU1lc3NhZ2VDbGFzcyIsIml0ZW0iLCJ0ZXh0IiwicHVzaCIsImltZ1RlbXBsYXRlIiwiaW1hZ2VfdXJsIiwiaW1nVGVtcGxhdGVPYmplY3QiLCJwYXJzZWRUZW1wbGF0ZSIsInZhcmlhYmxlcyIsImZsYXRNYXAiLCJ0eXBlIiwibGVuZ3RoIiwidXJsIiwiaW5wdXRzIiwiZm9ybWF0dGVkIiwiSHVtYW5NZXNzYWdlUHJvbXB0VGVtcGxhdGUiLCJBSU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZSIsIlN5c3RlbU1lc3NhZ2VQcm9tcHRUZW1wbGF0ZSIsIl9pc0Jhc2VNZXNzYWdlUHJvbXB0VGVtcGxhdGUiLCJiYXNlTWVzc2FnZVByb21wdFRlbXBsYXRlTGlrZSIsIl9jb2VyY2VNZXNzYWdlUHJvbXB0VGVtcGxhdGVMaWtlIiwibWVzc2FnZVByb21wdFRlbXBsYXRlTGlrZSIsIl9nZXRUeXBlIiwiaXNJbnN0YW5jZSIsImlzTWVzc2FnZXNQbGFjZWhvbGRlciIsIngiLCJDaGF0UHJvbXB0VGVtcGxhdGUiLCJsY19hbGlhc2VzIiwicHJvbXB0TWVzc2FnZXMiLCJhc3NpZ24iLCJ2YWxpZGF0ZVRlbXBsYXRlIiwiaW5wdXRWYXJpYWJsZXNNZXNzYWdlcyIsIlNldCIsInByb21wdE1lc3NhZ2UiLCJpbnB1dFZhcmlhYmxlIiwiYWRkIiwidG90YWxJbnB1dFZhcmlhYmxlcyIsImlucHV0VmFyaWFibGVzSW5zdGFuY2UiLCJwYXJ0aWFsVmFyaWFibGVzIiwia2V5cyIsImRpZmZlcmVuY2UiLCJmaWx0ZXIiLCJoYXMiLCJzaXplIiwib3RoZXJEaWZmZXJlbmNlIiwiX2dldFByb21wdFR5cGUiLCJfcGFyc2VJbWFnZVByb21wdHMiLCJpbnB1dFZhbHVlcyIsImZvcm1hdHRlZE1lc3NhZ2VDb250ZW50IiwiUHJvbWlzZSIsImFsbCIsIm1hcCIsImltYWdlVXJsIiwicHJvbXB0VGVtcGxhdGVQbGFjZWhvbGRlciIsImZvcm1hdHRlZFVybCIsImFsbFZhbHVlcyIsIm1lcmdlUGFydGlhbEFuZFVzZXJWYXJpYWJsZXMiLCJyZWR1Y2UiLCJhY2MiLCJwYXJ0aWFsIiwibmV3SW5wdXRWYXJpYWJsZXMiLCJpdiIsIm5ld1BhcnRpYWxWYXJpYWJsZXMiLCJwcm9tcHREaWN0IiwiaHVtYW5UZW1wbGF0ZSIsImZyb21NZXNzYWdlcyIsImZsYXR0ZW5lZE1lc3NhZ2VzIiwiZmxhdHRlbmVkUGFydGlhbFZhcmlhYmxlcyIsImNyZWF0ZSIsImZyb21Qcm9tcHRNZXNzYWdlcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/prompts/chat.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/prompts/few_shot.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompts/few_shot.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FewShotChatMessagePromptTemplate: () => (/* binding */ FewShotChatMessagePromptTemplate),\n/* harmony export */   FewShotPromptTemplate: () => (/* binding */ FewShotPromptTemplate)\n/* harmony export */ });\n/* harmony import */ var _string_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./string.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/string.js\");\n/* harmony import */ var _template_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./template.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/template.js\");\n/* harmony import */ var _prompt_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./prompt.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/prompt.js\");\n/* harmony import */ var _chat_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./chat.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/chat.js\");\n\n\n\n\n/**\n * Prompt template that contains few-shot examples.\n * @augments BasePromptTemplate\n * @augments FewShotPromptTemplateInput\n * @example\n * ```typescript\n * const examplePrompt = PromptTemplate.fromTemplate(\n *   \"Input: {input}\\nOutput: {output}\",\n * );\n *\n * const exampleSelector = await SemanticSimilarityExampleSelector.fromExamples(\n *   [\n *     { input: \"happy\", output: \"sad\" },\n *     { input: \"tall\", output: \"short\" },\n *     { input: \"energetic\", output: \"lethargic\" },\n *     { input: \"sunny\", output: \"gloomy\" },\n *     { input: \"windy\", output: \"calm\" },\n *   ],\n *   new OpenAIEmbeddings(),\n *   HNSWLib,\n *   { k: 1 },\n * );\n *\n * const dynamicPrompt = new FewShotPromptTemplate({\n *   exampleSelector,\n *   examplePrompt,\n *   prefix: \"Give the antonym of every input\",\n *   suffix: \"Input: {adjective}\\nOutput:\",\n *   inputVariables: [\"adjective\"],\n * });\n *\n * // Format the dynamic prompt with the input 'rainy'\n * console.log(await dynamicPrompt.format({ adjective: \"rainy\" }));\n *\n * ```\n */ class FewShotPromptTemplate extends _string_js__WEBPACK_IMPORTED_MODULE_0__.BaseStringPromptTemplate {\n    constructor(input){\n        super(input);\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"examples\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"exampleSelector\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"examplePrompt\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"suffix\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"\"\n        });\n        Object.defineProperty(this, \"exampleSeparator\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"\\n\\n\"\n        });\n        Object.defineProperty(this, \"prefix\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"\"\n        });\n        Object.defineProperty(this, \"templateFormat\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"f-string\"\n        });\n        Object.defineProperty(this, \"validateTemplate\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.assign(this, input);\n        if (this.examples !== undefined && this.exampleSelector !== undefined) {\n            throw new Error(\"Only one of 'examples' and 'example_selector' should be provided\");\n        }\n        if (this.examples === undefined && this.exampleSelector === undefined) {\n            throw new Error(\"One of 'examples' and 'example_selector' should be provided\");\n        }\n        if (this.validateTemplate) {\n            let totalInputVariables = this.inputVariables;\n            if (this.partialVariables) {\n                totalInputVariables = totalInputVariables.concat(Object.keys(this.partialVariables));\n            }\n            (0,_template_js__WEBPACK_IMPORTED_MODULE_1__.checkValidTemplate)(this.prefix + this.suffix, this.templateFormat, totalInputVariables);\n        }\n    }\n    _getPromptType() {\n        return \"few_shot\";\n    }\n    static lc_name() {\n        return \"FewShotPromptTemplate\";\n    }\n    async getExamples(inputVariables) {\n        if (this.examples !== undefined) {\n            return this.examples;\n        }\n        if (this.exampleSelector !== undefined) {\n            return this.exampleSelector.selectExamples(inputVariables);\n        }\n        throw new Error(\"One of 'examples' and 'example_selector' should be provided\");\n    }\n    async partial(values) {\n        const newInputVariables = this.inputVariables.filter((iv)=>!(iv in values));\n        const newPartialVariables = {\n            ...this.partialVariables ?? {},\n            ...values\n        };\n        const promptDict = {\n            ...this,\n            inputVariables: newInputVariables,\n            partialVariables: newPartialVariables\n        };\n        return new FewShotPromptTemplate(promptDict);\n    }\n    /**\n     * Formats the prompt with the given values.\n     * @param values The values to format the prompt with.\n     * @returns A promise that resolves to a string representing the formatted prompt.\n     */ async format(values) {\n        const allValues = await this.mergePartialAndUserVariables(values);\n        const examples = await this.getExamples(allValues);\n        const exampleStrings = await Promise.all(examples.map((example)=>this.examplePrompt.format(example)));\n        const template = [\n            this.prefix,\n            ...exampleStrings,\n            this.suffix\n        ].join(this.exampleSeparator);\n        return (0,_template_js__WEBPACK_IMPORTED_MODULE_1__.renderTemplate)(template, this.templateFormat, allValues);\n    }\n    serialize() {\n        if (this.exampleSelector || !this.examples) {\n            throw new Error(\"Serializing an example selector is not currently supported\");\n        }\n        if (this.outputParser !== undefined) {\n            throw new Error(\"Serializing an output parser is not currently supported\");\n        }\n        return {\n            _type: this._getPromptType(),\n            input_variables: this.inputVariables,\n            example_prompt: this.examplePrompt.serialize(),\n            example_separator: this.exampleSeparator,\n            suffix: this.suffix,\n            prefix: this.prefix,\n            template_format: this.templateFormat,\n            examples: this.examples\n        };\n    }\n    static async deserialize(data) {\n        const { example_prompt } = data;\n        if (!example_prompt) {\n            throw new Error(\"Missing example prompt\");\n        }\n        const examplePrompt = await _prompt_js__WEBPACK_IMPORTED_MODULE_2__.PromptTemplate.deserialize(example_prompt);\n        let examples;\n        if (Array.isArray(data.examples)) {\n            examples = data.examples;\n        } else {\n            throw new Error(\"Invalid examples format. Only list or string are supported.\");\n        }\n        return new FewShotPromptTemplate({\n            inputVariables: data.input_variables,\n            examplePrompt,\n            examples,\n            exampleSeparator: data.example_separator,\n            prefix: data.prefix,\n            suffix: data.suffix,\n            templateFormat: data.template_format\n        });\n    }\n}\n/**\n * Chat prompt template that contains few-shot examples.\n * @augments BasePromptTemplateInput\n * @augments FewShotChatMessagePromptTemplateInput\n */ class FewShotChatMessagePromptTemplate extends _chat_js__WEBPACK_IMPORTED_MODULE_3__.BaseChatPromptTemplate {\n    _getPromptType() {\n        return \"few_shot_chat\";\n    }\n    static lc_name() {\n        return \"FewShotChatMessagePromptTemplate\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"examples\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"exampleSelector\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"examplePrompt\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"suffix\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"\"\n        });\n        Object.defineProperty(this, \"exampleSeparator\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"\\n\\n\"\n        });\n        Object.defineProperty(this, \"prefix\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"\"\n        });\n        Object.defineProperty(this, \"templateFormat\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"f-string\"\n        });\n        Object.defineProperty(this, \"validateTemplate\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        this.examples = fields.examples;\n        this.examplePrompt = fields.examplePrompt;\n        this.exampleSeparator = fields.exampleSeparator ?? \"\\n\\n\";\n        this.exampleSelector = fields.exampleSelector;\n        this.prefix = fields.prefix ?? \"\";\n        this.suffix = fields.suffix ?? \"\";\n        this.templateFormat = fields.templateFormat ?? \"f-string\";\n        this.validateTemplate = fields.validateTemplate ?? true;\n        if (this.examples !== undefined && this.exampleSelector !== undefined) {\n            throw new Error(\"Only one of 'examples' and 'example_selector' should be provided\");\n        }\n        if (this.examples === undefined && this.exampleSelector === undefined) {\n            throw new Error(\"One of 'examples' and 'example_selector' should be provided\");\n        }\n        if (this.validateTemplate) {\n            let totalInputVariables = this.inputVariables;\n            if (this.partialVariables) {\n                totalInputVariables = totalInputVariables.concat(Object.keys(this.partialVariables));\n            }\n            (0,_template_js__WEBPACK_IMPORTED_MODULE_1__.checkValidTemplate)(this.prefix + this.suffix, this.templateFormat, totalInputVariables);\n        }\n    }\n    async getExamples(inputVariables) {\n        if (this.examples !== undefined) {\n            return this.examples;\n        }\n        if (this.exampleSelector !== undefined) {\n            return this.exampleSelector.selectExamples(inputVariables);\n        }\n        throw new Error(\"One of 'examples' and 'example_selector' should be provided\");\n    }\n    /**\n     * Formats the list of values and returns a list of formatted messages.\n     * @param values The values to format the prompt with.\n     * @returns A promise that resolves to a string representing the formatted prompt.\n     */ async formatMessages(values) {\n        const allValues = await this.mergePartialAndUserVariables(values);\n        let examples = await this.getExamples(allValues);\n        examples = examples.map((example)=>{\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            const result = {};\n            this.examplePrompt.inputVariables.forEach((inputVariable)=>{\n                result[inputVariable] = example[inputVariable];\n            });\n            return result;\n        });\n        const messages = [];\n        for (const example of examples){\n            const exampleMessages = await this.examplePrompt.formatMessages(example);\n            messages.push(...exampleMessages);\n        }\n        return messages;\n    }\n    /**\n     * Formats the prompt with the given values.\n     * @param values The values to format the prompt with.\n     * @returns A promise that resolves to a string representing the formatted prompt.\n     */ async format(values) {\n        const allValues = await this.mergePartialAndUserVariables(values);\n        const examples = await this.getExamples(allValues);\n        const exampleMessages = await Promise.all(examples.map((example)=>this.examplePrompt.formatMessages(example)));\n        const exampleStrings = exampleMessages.flat().map((message)=>message.content);\n        const template = [\n            this.prefix,\n            ...exampleStrings,\n            this.suffix\n        ].join(this.exampleSeparator);\n        return (0,_template_js__WEBPACK_IMPORTED_MODULE_1__.renderTemplate)(template, this.templateFormat, allValues);\n    }\n    /**\n     * Partially formats the prompt with the given values.\n     * @param values The values to partially format the prompt with.\n     * @returns A promise that resolves to an instance of `FewShotChatMessagePromptTemplate` with the given values partially formatted.\n     */ async partial(values) {\n        const newInputVariables = this.inputVariables.filter((variable)=>!(variable in values));\n        const newPartialVariables = {\n            ...this.partialVariables ?? {},\n            ...values\n        };\n        const promptDict = {\n            ...this,\n            inputVariables: newInputVariables,\n            partialVariables: newPartialVariables\n        };\n        return new FewShotChatMessagePromptTemplate(promptDict);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9mZXdfc2hvdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBdUQ7QUFDYTtBQUN2QjtBQUNPO0FBQ3BEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQW1DQyxHQUNNLE1BQU1LLDhCQUE4QkwsZ0VBQXdCQTtJQUMvRE0sWUFBWUMsS0FBSyxDQUFFO1FBQ2YsS0FBSyxDQUFDQTtRQUNOQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG1CQUFtQjtZQUMzQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CO1lBQzNDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxpQkFBaUI7WUFDekNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVU7WUFDbENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG9CQUFvQjtZQUM1Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsVUFBVTtZQUNsQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJ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LENBQUN1QixJQUFJLENBQUMsSUFBSSxDQUFDQyxnQkFBZ0I7UUFDekYsT0FBT2hELDREQUFjQSxDQUFDOEMsVUFBVSxJQUFJLENBQUNyQixjQUFjLEVBQUVhO0lBQ3pEO0lBQ0E7Ozs7S0FJQyxHQUNELE1BQU1SLFFBQVFDLE1BQU0sRUFBRTtRQUNsQixNQUFNQyxvQkFBb0IsSUFBSSxDQUFDYixjQUFjLENBQUNjLE1BQU0sQ0FBQyxDQUFDdUMsV0FBYSxDQUFFQSxDQUFBQSxZQUFZekMsTUFBSztRQUN0RixNQUFNSSxzQkFBc0I7WUFDeEIsR0FBSSxJQUFJLENBQUNmLGdCQUFnQixJQUFJLENBQUMsQ0FBQztZQUMvQixHQUFHVyxNQUFNO1FBQ2I7UUFDQSxNQUFNSyxhQUFhO1lBQ2YsR0FBRyxJQUFJO1lBQ1BqQixnQkFBZ0JhO1lBQ2hCWixrQkFBa0JlO1FBQ3RCO1FBQ0EsT0FBTyxJQUFJeUIsaUNBQWlDeEI7SUFDaEQ7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLWZvcm0tYnVpbGRlci10dXRvcmlhbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9wcm9tcHRzL2Zld19zaG90LmpzPzljNGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzZVN0cmluZ1Byb21wdFRlbXBsYXRlIH0gZnJvbSBcIi4vc3RyaW5nLmpzXCI7XG5pbXBvcnQgeyBjaGVja1ZhbGlkVGVtcGxhdGUsIHJlbmRlclRlbXBsYXRlLCB9IGZyb20gXCIuL3RlbXBsYXRlLmpzXCI7XG5pbXBvcnQgeyBQcm9tcHRUZW1wbGF0ZSB9IGZyb20gXCIuL3Byb21wdC5qc1wiO1xuaW1wb3J0IHsgQmFzZUNoYXRQcm9tcHRUZW1wbGF0ZSwgfSBmcm9tIFwiLi9jaGF0LmpzXCI7XG4vKipcbiAqIFByb21wdCB0ZW1wbGF0ZSB0aGF0IGNvbnRhaW5zIGZldy1zaG90IGV4YW1wbGVzLlxuICogQGF1Z21lbnRzIEJhc2VQcm9tcHRUZW1wbGF0ZVxuICogQGF1Z21lbnRzIEZld1Nob3RQcm9tcHRUZW1wbGF0ZUlucHV0XG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgZXhhbXBsZVByb21wdCA9IFByb21wdFRlbXBsYXRlLmZyb21UZW1wbGF0ZShcbiAqICAgXCJJbnB1dDoge2lucHV0fVxcbk91dHB1dDoge291dHB1dH1cIixcbiAqICk7XG4gKlxuICogY29uc3QgZXhhbXBsZVNlbGVjdG9yID0gYXdhaXQgU2VtYW50aWNTaW1pbGFyaXR5RXhhbXBsZVNlbGVjdG9yLmZyb21FeGFtcGxlcyhcbiAqICAgW1xuICogICAgIHsgaW5wdXQ6IFwiaGFwcHlcIiwgb3V0cHV0OiBcInNhZFwiIH0sXG4gKiAgICAgeyBpbnB1dDogXCJ0YWxsXCIsIG91dHB1dDogXCJzaG9ydFwiIH0sXG4gKiAgICAgeyBpbnB1dDogXCJlbmVyZ2V0aWNcIiwgb3V0cHV0OiBcImxldGhhcmdpY1wiIH0sXG4gKiAgICAgeyBpbnB1dDogXCJzdW5ueVwiLCBvdXRwdXQ6IFwiZ2xvb215XCIgfSxcbiAqICAgICB7IGlucHV0OiBcIndpbmR5XCIsIG91dHB1dDogXCJjYWxtXCIgfSxcbiAqICAgXSxcbiAqICAgbmV3IE9wZW5BSUVtYmVkZGluZ3MoKSxcbiAqICAgSE5TV0xpYixcbiAqICAgeyBrOiAxIH0sXG4gKiApO1xuICpcbiAqIGNvbnN0IGR5bmFtaWNQcm9tcHQgPSBuZXcgRmV3U2hvdFByb21wdFRlbXBsYXRlKHtcbiAqICAgZXhhbXBsZVNlbGVjdG9yLFxuICogICBleGFtcGxlUHJvbXB0LFxuICogICBwcmVmaXg6IFwiR2l2ZSB0aGUgYW50b255bSBvZiBldmVyeSBpbnB1dFwiLFxuICogICBzdWZmaXg6IFwiSW5wdXQ6IHthZGplY3RpdmV9XFxuT3V0cHV0OlwiLFxuICogICBpbnB1dFZhcmlhYmxlczogW1wiYWRqZWN0aXZlXCJdLFxuICogfSk7XG4gKlxuICogLy8gRm9ybWF0IHRoZSBkeW5hbWljIHByb21wdCB3aXRoIHRoZSBpbnB1dCAncmFpbnknXG4gKiBjb25zb2xlLmxvZyhhd2FpdCBkeW5hbWljUHJvbXB0LmZvcm1hdCh7IGFkamVjdGl2ZTogXCJyYWlueVwiIH0pKTtcbiAqXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIEZld1Nob3RQcm9tcHRUZW1wbGF0ZSBleHRlbmRzIEJhc2VTdHJpbmdQcm9tcHRUZW1wbGF0ZSB7XG4gICAgY29uc3RydWN0b3IoaW5wdXQpIHtcbiAgICAgICAgc3VwZXIoaW5wdXQpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJleGFtcGxlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJleGFtcGxlU2VsZWN0b3JcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZXhhbXBsZVByb21wdFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdWZmaXhcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwiXCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImV4YW1wbGVTZXBhcmF0b3JcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwiXFxuXFxuXCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInByZWZpeFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJcIlxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidGVtcGxhdGVGb3JtYXRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwiZi1zdHJpbmdcIlxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidmFsaWRhdGVUZW1wbGF0ZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCBpbnB1dCk7XG4gICAgICAgIGlmICh0aGlzLmV4YW1wbGVzICE9PSB1bmRlZmluZWQgJiYgdGhpcy5leGFtcGxlU2VsZWN0b3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT25seSBvbmUgb2YgJ2V4YW1wbGVzJyBhbmQgJ2V4YW1wbGVfc2VsZWN0b3InIHNob3VsZCBiZSBwcm92aWRlZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5leGFtcGxlcyA9PT0gdW5kZWZpbmVkICYmIHRoaXMuZXhhbXBsZVNlbGVjdG9yID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk9uZSBvZiAnZXhhbXBsZXMnIGFuZCAnZXhhbXBsZV9zZWxlY3Rvcicgc2hvdWxkIGJlIHByb3ZpZGVkXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnZhbGlkYXRlVGVtcGxhdGUpIHtcbiAgICAgICAgICAgIGxldCB0b3RhbElucHV0VmFyaWFibGVzID0gdGhpcy5pbnB1dFZhcmlhYmxlcztcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcnRpYWxWYXJpYWJsZXMpIHtcbiAgICAgICAgICAgICAgICB0b3RhbElucHV0VmFyaWFibGVzID0gdG90YWxJbnB1dFZhcmlhYmxlcy5jb25jYXQoT2JqZWN0LmtleXModGhpcy5wYXJ0aWFsVmFyaWFibGVzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaGVja1ZhbGlkVGVtcGxhdGUodGhpcy5wcmVmaXggKyB0aGlzLnN1ZmZpeCwgdGhpcy50ZW1wbGF0ZUZvcm1hdCwgdG90YWxJbnB1dFZhcmlhYmxlcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX2dldFByb21wdFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImZld19zaG90XCI7XG4gICAgfVxuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJGZXdTaG90UHJvbXB0VGVtcGxhdGVcIjtcbiAgICB9XG4gICAgYXN5bmMgZ2V0RXhhbXBsZXMoaW5wdXRWYXJpYWJsZXMpIHtcbiAgICAgICAgaWYgKHRoaXMuZXhhbXBsZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXhhbXBsZXM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZXhhbXBsZVNlbGVjdG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmV4YW1wbGVTZWxlY3Rvci5zZWxlY3RFeGFtcGxlcyhpbnB1dFZhcmlhYmxlcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT25lIG9mICdleGFtcGxlcycgYW5kICdleGFtcGxlX3NlbGVjdG9yJyBzaG91bGQgYmUgcHJvdmlkZWRcIik7XG4gICAgfVxuICAgIGFzeW5jIHBhcnRpYWwodmFsdWVzKSB7XG4gICAgICAgIGNvbnN0IG5ld0lucHV0VmFyaWFibGVzID0gdGhpcy5pbnB1dFZhcmlhYmxlcy5maWx0ZXIoKGl2KSA9PiAhKGl2IGluIHZhbHVlcykpO1xuICAgICAgICBjb25zdCBuZXdQYXJ0aWFsVmFyaWFibGVzID0ge1xuICAgICAgICAgICAgLi4uKHRoaXMucGFydGlhbFZhcmlhYmxlcyA/PyB7fSksXG4gICAgICAgICAgICAuLi52YWx1ZXMsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHByb21wdERpY3QgPSB7XG4gICAgICAgICAgICAuLi50aGlzLFxuICAgICAgICAgICAgaW5wdXRWYXJpYWJsZXM6IG5ld0lucHV0VmFyaWFibGVzLFxuICAgICAgICAgICAgcGFydGlhbFZhcmlhYmxlczogbmV3UGFydGlhbFZhcmlhYmxlcyxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIG5ldyBGZXdTaG90UHJvbXB0VGVtcGxhdGUocHJvbXB0RGljdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvcm1hdHMgdGhlIHByb21wdCB3aXRoIHRoZSBnaXZlbiB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHZhbHVlcyBUaGUgdmFsdWVzIHRvIGZvcm1hdCB0aGUgcHJvbXB0IHdpdGguXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBmb3JtYXR0ZWQgcHJvbXB0LlxuICAgICAqL1xuICAgIGFzeW5jIGZvcm1hdCh2YWx1ZXMpIHtcbiAgICAgICAgY29uc3QgYWxsVmFsdWVzID0gYXdhaXQgdGhpcy5tZXJnZVBhcnRpYWxBbmRVc2VyVmFyaWFibGVzKHZhbHVlcyk7XG4gICAgICAgIGNvbnN0IGV4YW1wbGVzID0gYXdhaXQgdGhpcy5nZXRFeGFtcGxlcyhhbGxWYWx1ZXMpO1xuICAgICAgICBjb25zdCBleGFtcGxlU3RyaW5ncyA9IGF3YWl0IFByb21pc2UuYWxsKGV4YW1wbGVzLm1hcCgoZXhhbXBsZSkgPT4gdGhpcy5leGFtcGxlUHJvbXB0LmZvcm1hdChleGFtcGxlKSkpO1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IFt0aGlzLnByZWZpeCwgLi4uZXhhbXBsZVN0cmluZ3MsIHRoaXMuc3VmZml4XS5qb2luKHRoaXMuZXhhbXBsZVNlcGFyYXRvcik7XG4gICAgICAgIHJldHVybiByZW5kZXJUZW1wbGF0ZSh0ZW1wbGF0ZSwgdGhpcy50ZW1wbGF0ZUZvcm1hdCwgYWxsVmFsdWVzKTtcbiAgICB9XG4gICAgc2VyaWFsaXplKCkge1xuICAgICAgICBpZiAodGhpcy5leGFtcGxlU2VsZWN0b3IgfHwgIXRoaXMuZXhhbXBsZXMpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNlcmlhbGl6aW5nIGFuIGV4YW1wbGUgc2VsZWN0b3IgaXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMub3V0cHV0UGFyc2VyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNlcmlhbGl6aW5nIGFuIG91dHB1dCBwYXJzZXIgaXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIF90eXBlOiB0aGlzLl9nZXRQcm9tcHRUeXBlKCksXG4gICAgICAgICAgICBpbnB1dF92YXJpYWJsZXM6IHRoaXMuaW5wdXRWYXJpYWJsZXMsXG4gICAgICAgICAgICBleGFtcGxlX3Byb21wdDogdGhpcy5leGFtcGxlUHJvbXB0LnNlcmlhbGl6ZSgpLFxuICAgICAgICAgICAgZXhhbXBsZV9zZXBhcmF0b3I6IHRoaXMuZXhhbXBsZVNlcGFyYXRvcixcbiAgICAgICAgICAgIHN1ZmZpeDogdGhpcy5zdWZmaXgsXG4gICAgICAgICAgICBwcmVmaXg6IHRoaXMucHJlZml4LFxuICAgICAgICAgICAgdGVtcGxhdGVfZm9ybWF0OiB0aGlzLnRlbXBsYXRlRm9ybWF0LFxuICAgICAgICAgICAgZXhhbXBsZXM6IHRoaXMuZXhhbXBsZXMsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHN0YXRpYyBhc3luYyBkZXNlcmlhbGl6ZShkYXRhKSB7XG4gICAgICAgIGNvbnN0IHsgZXhhbXBsZV9wcm9tcHQgfSA9IGRhdGE7XG4gICAgICAgIGlmICghZXhhbXBsZV9wcm9tcHQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1pc3NpbmcgZXhhbXBsZSBwcm9tcHRcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZXhhbXBsZVByb21wdCA9IGF3YWl0IFByb21wdFRlbXBsYXRlLmRlc2VyaWFsaXplKGV4YW1wbGVfcHJvbXB0KTtcbiAgICAgICAgbGV0IGV4YW1wbGVzO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkYXRhLmV4YW1wbGVzKSkge1xuICAgICAgICAgICAgZXhhbXBsZXMgPSBkYXRhLmV4YW1wbGVzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBleGFtcGxlcyBmb3JtYXQuIE9ubHkgbGlzdCBvciBzdHJpbmcgYXJlIHN1cHBvcnRlZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBGZXdTaG90UHJvbXB0VGVtcGxhdGUoe1xuICAgICAgICAgICAgaW5wdXRWYXJpYWJsZXM6IGRhdGEuaW5wdXRfdmFyaWFibGVzLFxuICAgICAgICAgICAgZXhhbXBsZVByb21wdCxcbiAgICAgICAgICAgIGV4YW1wbGVzLFxuICAgICAgICAgICAgZXhhbXBsZVNlcGFyYXRvcjogZGF0YS5leGFtcGxlX3NlcGFyYXRvcixcbiAgICAgICAgICAgIHByZWZpeDogZGF0YS5wcmVmaXgsXG4gICAgICAgICAgICBzdWZmaXg6IGRhdGEuc3VmZml4LFxuICAgICAgICAgICAgdGVtcGxhdGVGb3JtYXQ6IGRhdGEudGVtcGxhdGVfZm9ybWF0LFxuICAgICAgICB9KTtcbiAgICB9XG59XG4vKipcbiAqIENoYXQgcHJvbXB0IHRlbXBsYXRlIHRoYXQgY29udGFpbnMgZmV3LXNob3QgZXhhbXBsZXMuXG4gKiBAYXVnbWVudHMgQmFzZVByb21wdFRlbXBsYXRlSW5wdXRcbiAqIEBhdWdtZW50cyBGZXdTaG90Q2hhdE1lc3NhZ2VQcm9tcHRUZW1wbGF0ZUlucHV0XG4gKi9cbmV4cG9ydCBjbGFzcyBGZXdTaG90Q2hhdE1lc3NhZ2VQcm9tcHRUZW1wbGF0ZSBleHRlbmRzIEJhc2VDaGF0UHJvbXB0VGVtcGxhdGUge1xuICAgIF9nZXRQcm9tcHRUeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJmZXdfc2hvdF9jaGF0XCI7XG4gICAgfVxuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJGZXdTaG90Q2hhdE1lc3NhZ2VQcm9tcHRUZW1wbGF0ZVwiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJleGFtcGxlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJleGFtcGxlU2VsZWN0b3JcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZXhhbXBsZVByb21wdFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdWZmaXhcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwiXCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImV4YW1wbGVTZXBhcmF0b3JcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwiXFxuXFxuXCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInByZWZpeFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJcIlxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidGVtcGxhdGVGb3JtYXRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwiZi1zdHJpbmdcIlxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidmFsaWRhdGVUZW1wbGF0ZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5leGFtcGxlcyA9IGZpZWxkcy5leGFtcGxlcztcbiAgICAgICAgdGhpcy5leGFtcGxlUHJvbXB0ID0gZmllbGRzLmV4YW1wbGVQcm9tcHQ7XG4gICAgICAgIHRoaXMuZXhhbXBsZVNlcGFyYXRvciA9IGZpZWxkcy5leGFtcGxlU2VwYXJhdG9yID8/IFwiXFxuXFxuXCI7XG4gICAgICAgIHRoaXMuZXhhbXBsZVNlbGVjdG9yID0gZmllbGRzLmV4YW1wbGVTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5wcmVmaXggPSBmaWVsZHMucHJlZml4ID8/IFwiXCI7XG4gICAgICAgIHRoaXMuc3VmZml4ID0gZmllbGRzLnN1ZmZpeCA/PyBcIlwiO1xuICAgICAgICB0aGlzLnRlbXBsYXRlRm9ybWF0ID0gZmllbGRzLnRlbXBsYXRlRm9ybWF0ID8/IFwiZi1zdHJpbmdcIjtcbiAgICAgICAgdGhpcy52YWxpZGF0ZVRlbXBsYXRlID0gZmllbGRzLnZhbGlkYXRlVGVtcGxhdGUgPz8gdHJ1ZTtcbiAgICAgICAgaWYgKHRoaXMuZXhhbXBsZXMgIT09IHVuZGVmaW5lZCAmJiB0aGlzLmV4YW1wbGVTZWxlY3RvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJPbmx5IG9uZSBvZiAnZXhhbXBsZXMnIGFuZCAnZXhhbXBsZV9zZWxlY3Rvcicgc2hvdWxkIGJlIHByb3ZpZGVkXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmV4YW1wbGVzID09PSB1bmRlZmluZWQgJiYgdGhpcy5leGFtcGxlU2VsZWN0b3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT25lIG9mICdleGFtcGxlcycgYW5kICdleGFtcGxlX3NlbGVjdG9yJyBzaG91bGQgYmUgcHJvdmlkZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudmFsaWRhdGVUZW1wbGF0ZSkge1xuICAgICAgICAgICAgbGV0IHRvdGFsSW5wdXRWYXJpYWJsZXMgPSB0aGlzLmlucHV0VmFyaWFibGVzO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFydGlhbFZhcmlhYmxlcykge1xuICAgICAgICAgICAgICAgIHRvdGFsSW5wdXRWYXJpYWJsZXMgPSB0b3RhbElucHV0VmFyaWFibGVzLmNvbmNhdChPYmplY3Qua2V5cyh0aGlzLnBhcnRpYWxWYXJpYWJsZXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNoZWNrVmFsaWRUZW1wbGF0ZSh0aGlzLnByZWZpeCArIHRoaXMuc3VmZml4LCB0aGlzLnRlbXBsYXRlRm9ybWF0LCB0b3RhbElucHV0VmFyaWFibGVzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBnZXRFeGFtcGxlcyhpbnB1dFZhcmlhYmxlcykge1xuICAgICAgICBpZiAodGhpcy5leGFtcGxlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5leGFtcGxlcztcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5leGFtcGxlU2VsZWN0b3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZXhhbXBsZVNlbGVjdG9yLnNlbGVjdEV4YW1wbGVzKGlucHV0VmFyaWFibGVzKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJPbmUgb2YgJ2V4YW1wbGVzJyBhbmQgJ2V4YW1wbGVfc2VsZWN0b3InIHNob3VsZCBiZSBwcm92aWRlZFwiKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9ybWF0cyB0aGUgbGlzdCBvZiB2YWx1ZXMgYW5kIHJldHVybnMgYSBsaXN0IG9mIGZvcm1hdHRlZCBtZXNzYWdlcy5cbiAgICAgKiBAcGFyYW0gdmFsdWVzIFRoZSB2YWx1ZXMgdG8gZm9ybWF0IHRoZSBwcm9tcHQgd2l0aC5cbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIGZvcm1hdHRlZCBwcm9tcHQuXG4gICAgICovXG4gICAgYXN5bmMgZm9ybWF0TWVzc2FnZXModmFsdWVzKSB7XG4gICAgICAgIGNvbnN0IGFsbFZhbHVlcyA9IGF3YWl0IHRoaXMubWVyZ2VQYXJ0aWFsQW5kVXNlclZhcmlhYmxlcyh2YWx1ZXMpO1xuICAgICAgICBsZXQgZXhhbXBsZXMgPSBhd2FpdCB0aGlzLmdldEV4YW1wbGVzKGFsbFZhbHVlcyk7XG4gICAgICAgIGV4YW1wbGVzID0gZXhhbXBsZXMubWFwKChleGFtcGxlKSA9PiB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgICAgICAgICB0aGlzLmV4YW1wbGVQcm9tcHQuaW5wdXRWYXJpYWJsZXMuZm9yRWFjaCgoaW5wdXRWYXJpYWJsZSkgPT4ge1xuICAgICAgICAgICAgICAgIHJlc3VsdFtpbnB1dFZhcmlhYmxlXSA9IGV4YW1wbGVbaW5wdXRWYXJpYWJsZV07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBtZXNzYWdlcyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGV4YW1wbGUgb2YgZXhhbXBsZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4YW1wbGVNZXNzYWdlcyA9IGF3YWl0IHRoaXMuZXhhbXBsZVByb21wdC5mb3JtYXRNZXNzYWdlcyhleGFtcGxlKTtcbiAgICAgICAgICAgIG1lc3NhZ2VzLnB1c2goLi4uZXhhbXBsZU1lc3NhZ2VzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWVzc2FnZXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvcm1hdHMgdGhlIHByb21wdCB3aXRoIHRoZSBnaXZlbiB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHZhbHVlcyBUaGUgdmFsdWVzIHRvIGZvcm1hdCB0aGUgcHJvbXB0IHdpdGguXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBmb3JtYXR0ZWQgcHJvbXB0LlxuICAgICAqL1xuICAgIGFzeW5jIGZvcm1hdCh2YWx1ZXMpIHtcbiAgICAgICAgY29uc3QgYWxsVmFsdWVzID0gYXdhaXQgdGhpcy5tZXJnZVBhcnRpYWxBbmRVc2VyVmFyaWFibGVzKHZhbHVlcyk7XG4gICAgICAgIGNvbnN0IGV4YW1wbGVzID0gYXdhaXQgdGhpcy5nZXRFeGFtcGxlcyhhbGxWYWx1ZXMpO1xuICAgICAgICBjb25zdCBleGFtcGxlTWVzc2FnZXMgPSBhd2FpdCBQcm9taXNlLmFsbChleGFtcGxlcy5tYXAoKGV4YW1wbGUpID0+IHRoaXMuZXhhbXBsZVByb21wdC5mb3JtYXRNZXNzYWdlcyhleGFtcGxlKSkpO1xuICAgICAgICBjb25zdCBleGFtcGxlU3RyaW5ncyA9IGV4YW1wbGVNZXNzYWdlc1xuICAgICAgICAgICAgLmZsYXQoKVxuICAgICAgICAgICAgLm1hcCgobWVzc2FnZSkgPT4gbWVzc2FnZS5jb250ZW50KTtcbiAgICAgICAgY29uc3QgdGVtcGxhdGUgPSBbdGhpcy5wcmVmaXgsIC4uLmV4YW1wbGVTdHJpbmdzLCB0aGlzLnN1ZmZpeF0uam9pbih0aGlzLmV4YW1wbGVTZXBhcmF0b3IpO1xuICAgICAgICByZXR1cm4gcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHRoaXMudGVtcGxhdGVGb3JtYXQsIGFsbFZhbHVlcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnRpYWxseSBmb3JtYXRzIHRoZSBwcm9tcHQgd2l0aCB0aGUgZ2l2ZW4gdmFsdWVzLlxuICAgICAqIEBwYXJhbSB2YWx1ZXMgVGhlIHZhbHVlcyB0byBwYXJ0aWFsbHkgZm9ybWF0IHRoZSBwcm9tcHQgd2l0aC5cbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhbiBpbnN0YW5jZSBvZiBgRmV3U2hvdENoYXRNZXNzYWdlUHJvbXB0VGVtcGxhdGVgIHdpdGggdGhlIGdpdmVuIHZhbHVlcyBwYXJ0aWFsbHkgZm9ybWF0dGVkLlxuICAgICAqL1xuICAgIGFzeW5jIHBhcnRpYWwodmFsdWVzKSB7XG4gICAgICAgIGNvbnN0IG5ld0lucHV0VmFyaWFibGVzID0gdGhpcy5pbnB1dFZhcmlhYmxlcy5maWx0ZXIoKHZhcmlhYmxlKSA9PiAhKHZhcmlhYmxlIGluIHZhbHVlcykpO1xuICAgICAgICBjb25zdCBuZXdQYXJ0aWFsVmFyaWFibGVzID0ge1xuICAgICAgICAgICAgLi4uKHRoaXMucGFydGlhbFZhcmlhYmxlcyA/PyB7fSksXG4gICAgICAgICAgICAuLi52YWx1ZXMsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHByb21wdERpY3QgPSB7XG4gICAgICAgICAgICAuLi50aGlzLFxuICAgICAgICAgICAgaW5wdXRWYXJpYWJsZXM6IG5ld0lucHV0VmFyaWFibGVzLFxuICAgICAgICAgICAgcGFydGlhbFZhcmlhYmxlczogbmV3UGFydGlhbFZhcmlhYmxlcyxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIG5ldyBGZXdTaG90Q2hhdE1lc3NhZ2VQcm9tcHRUZW1wbGF0ZShwcm9tcHREaWN0KTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiQmFzZVN0cmluZ1Byb21wdFRlbXBsYXRlIiwiY2hlY2tWYWxpZFRlbXBsYXRlIiwicmVuZGVyVGVtcGxhdGUiLCJQcm9tcHRUZW1wbGF0ZSIsIkJhc2VDaGF0UHJvbXB0VGVtcGxhdGUiLCJGZXdTaG90UHJvbXB0VGVtcGxhdGUiLCJjb25zdHJ1Y3RvciIsImlucHV0IiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImFzc2lnbiIsImV4YW1wbGVzIiwidW5kZWZpbmVkIiwiZXhhbXBsZVNlbGVjdG9yIiwiRXJyb3IiLCJ2YWxpZGF0ZVRlbXBsYXRlIiwidG90YWxJbnB1dFZhcmlhYmxlcyIsImlucHV0VmFyaWFibGVzIiwicGFydGlhbFZhcmlhYmxlcyIsImNvbmNhdCIsImtleXMiLCJwcmVmaXgiLCJzdWZmaXgiLCJ0ZW1wbGF0ZUZvcm1hdCIsIl9nZXRQcm9tcHRUeXBlIiwibGNfbmFtZSIsImdldEV4YW1wbGVzIiwic2VsZWN0RXhhbXBsZXMiLCJwYXJ0aWFsIiwidmFsdWVzIiwibmV3SW5wdXRWYXJpYWJsZXMiLCJmaWx0ZXIiLCJpdiIsIm5ld1BhcnRpYWxWYXJpYWJsZXMiLCJwcm9tcHREaWN0IiwiZm9ybWF0IiwiYWxsVmFsdWVzIiwibWVyZ2VQYXJ0aWFsQW5kVXNlclZhcmlhYmxlcyIsImV4YW1wbGVTdHJpbmdzIiwiUHJvbWlzZSIsImFsbCIsIm1hcCIsImV4YW1wbGUiLCJleGFtcGxlUHJvbXB0IiwidGVtcGxhdGUiLCJqb2luIiwiZXhhbXBsZVNlcGFyYXRvciIsInNlcmlhbGl6ZSIsIm91dHB1dFBhcnNlciIsIl90eXBlIiwiaW5wdXRfdmFyaWFibGVzIiwiZXhhbXBsZV9wcm9tcHQiLCJleGFtcGxlX3NlcGFyYXRvciIsInRlbXBsYXRlX2Zvcm1hdCIsImRlc2VyaWFsaXplIiwiZGF0YSIsIkFycmF5IiwiaXNBcnJheSIsIkZld1Nob3RDaGF0TWVzc2FnZVByb21wdFRlbXBsYXRlIiwiZmllbGRzIiwiZm9ybWF0TWVzc2FnZXMiLCJyZXN1bHQiLCJmb3JFYWNoIiwiaW5wdXRWYXJpYWJsZSIsIm1lc3NhZ2VzIiwiZXhhbXBsZU1lc3NhZ2VzIiwicHVzaCIsImZsYXQiLCJtZXNzYWdlIiwiY29udGVudCIsInZhcmlhYmxlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/prompts/few_shot.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/prompts/image.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompts/image.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ImagePromptTemplate: () => (/* binding */ ImagePromptTemplate)\n/* harmony export */ });\n/* harmony import */ var _prompt_values_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../prompt_values.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompt_values.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/base.js\");\n/* harmony import */ var _template_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./template.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/template.js\");\n\n\n\n/**\n * An image prompt template for a multimodal model.\n */ class ImagePromptTemplate extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BasePromptTemplate {\n    static lc_name() {\n        return \"ImagePromptTemplate\";\n    }\n    constructor(input){\n        super(input);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"prompts\",\n                \"image\"\n            ]\n        });\n        Object.defineProperty(this, \"template\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"templateFormat\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"f-string\"\n        });\n        Object.defineProperty(this, \"validateTemplate\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        this.template = input.template;\n        this.templateFormat = input.templateFormat ?? this.templateFormat;\n        this.validateTemplate = input.validateTemplate ?? this.validateTemplate;\n        if (this.validateTemplate) {\n            let totalInputVariables = this.inputVariables;\n            if (this.partialVariables) {\n                totalInputVariables = totalInputVariables.concat(Object.keys(this.partialVariables));\n            }\n            (0,_template_js__WEBPACK_IMPORTED_MODULE_2__.checkValidTemplate)([\n                {\n                    type: \"image_url\",\n                    image_url: this.template\n                }\n            ], this.templateFormat, totalInputVariables);\n        }\n    }\n    _getPromptType() {\n        return \"prompt\";\n    }\n    /**\n     * Partially applies values to the prompt template.\n     * @param values The values to be partially applied to the prompt template.\n     * @returns A new instance of ImagePromptTemplate with the partially applied values.\n     */ async partial(values) {\n        const newInputVariables = this.inputVariables.filter((iv)=>!(iv in values));\n        const newPartialVariables = {\n            ...this.partialVariables ?? {},\n            ...values\n        };\n        const promptDict = {\n            ...this,\n            inputVariables: newInputVariables,\n            partialVariables: newPartialVariables\n        };\n        return new ImagePromptTemplate(promptDict);\n    }\n    /**\n     * Formats the prompt template with the provided values.\n     * @param values The values to be used to format the prompt template.\n     * @returns A promise that resolves to a string which is the formatted prompt.\n     */ async format(values) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const formatted = {};\n        for (const [key, value] of Object.entries(this.template)){\n            if (typeof value === \"string\") {\n                formatted[key] = value.replace(/{([^{}]*)}/g, (match, group)=>{\n                    const replacement = values[group];\n                    return typeof replacement === \"string\" || typeof replacement === \"number\" ? String(replacement) : match;\n                });\n            } else {\n                formatted[key] = value;\n            }\n        }\n        const url = values.url || formatted.url;\n        const detail = values.detail || formatted.detail;\n        if (!url) {\n            throw new Error(\"Must provide either an image URL.\");\n        }\n        if (typeof url !== \"string\") {\n            throw new Error(\"url must be a string.\");\n        }\n        const output = {\n            url\n        };\n        if (detail) {\n            output.detail = detail;\n        }\n        return output;\n    }\n    /**\n     * Formats the prompt given the input values and returns a formatted\n     * prompt value.\n     * @param values The input values to format the prompt.\n     * @returns A Promise that resolves to a formatted prompt value.\n     */ async formatPromptValue(values) {\n        const formattedPrompt = await this.format(values);\n        return new _prompt_values_js__WEBPACK_IMPORTED_MODULE_0__.ImagePromptValue(formattedPrompt);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9pbWFnZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXVEO0FBQ1A7QUFDRztBQUNuRDs7Q0FFQyxHQUNNLE1BQU1HLDRCQUE0QkYsd0RBQWtCQTtJQUN2RCxPQUFPRyxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FDLFlBQVlDLEtBQUssQ0FBRTtRQUNmLEtBQUssQ0FBQ0E7UUFDTkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87Z0JBQUM7Z0JBQWtCO2dCQUFXO2FBQVE7UUFDakQ7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxZQUFZO1lBQ3BDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxrQkFBa0I7WUFDMUNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG9CQUFvQjtZQUM1Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0EsSUFBSSxDQUFDQyxRQUFRLEdBQUdQLE1BQU1PLFFBQVE7UUFDOUIsSUFBSSxDQUFDQyxjQUFjLEdBQUdSLE1BQU1RLGNBQWMsSUFBSSxJQUFJLENBQUNBLGNBQWM7UUFDakUsSUFBSSxDQUFDQyxnQkFBZ0IsR0FBR1QsTUFBTVMsZ0JBQWdCLElBQUksSUFBSSxDQUFDQSxnQkFBZ0I7UUFDdkUsSUFBSSxJQUFJLENBQUNBLGdCQUFnQixFQUFFO1lBQ3ZCLElBQUlDLHNCQUFzQixJQUFJLENBQUNDLGNBQWM7WUFDN0MsSUFBSSxJQUFJLENBQUNDLGdCQUFnQixFQUFFO2dCQUN2QkYsc0JBQXNCQSxvQkFBb0JHLE1BQU0sQ0FBQ1osT0FBT2EsSUFBSSxDQUFDLElBQUksQ0FBQ0YsZ0JBQWdCO1lBQ3RGO1lBQ0FoQixnRUFBa0JBLENBQUM7Z0JBQ2Y7b0JBQUVtQixNQUFNO29CQUFhQyxXQUFXLElBQUksQ0FBQ1QsUUFBUTtnQkFBQzthQUNqRCxFQUFFLElBQUksQ0FBQ0MsY0FBYyxFQUFFRTtRQUM1QjtJQUNKO0lBQ0FPLGlCQUFpQjtRQUNiLE9BQU87SUFDWDtJQUNBOzs7O0tBSUMsR0FDRCxNQUFNQyxRQUFRQyxNQUFNLEVBQUU7UUFDbEIsTUFBTUMsb0JBQW9CLElBQUksQ0FBQ1QsY0FBYyxDQUFDVSxNQUFNLENBQUMsQ0FBQ0MsS0FBTyxDQUFFQSxDQUFBQSxNQUFNSCxNQUFLO1FBQzFFLE1BQU1JLHNCQUFzQjtZQUN4QixHQUFJLElBQUksQ0FBQ1gsZ0JBQWdCLElBQUksQ0FBQyxDQUFDO1lBQy9CLEdBQUdPLE1BQU07UUFDYjtRQUNBLE1BQU1LLGFBQWE7WUFDZixHQUFHLElBQUk7WUFDUGIsZ0JBQWdCUztZQUNoQlIsa0JBQWtCVztRQUN0QjtRQUNBLE9BQU8sSUFBSTFCLG9CQUFvQjJCO0lBQ25DO0lBQ0E7Ozs7S0FJQyxHQUNELE1BQU1DLE9BQU9OLE1BQU0sRUFBRTtRQUNqQiw4REFBOEQ7UUFDOUQsTUFBTU8sWUFBWSxDQUFDO1FBQ25CLEtBQUssTUFBTSxDQUFDQyxLQUFLckIsTUFBTSxJQUFJTCxPQUFPMkIsT0FBTyxDQUFDLElBQUksQ0FBQ3JCLFFBQVEsRUFBRztZQUN0RCxJQUFJLE9BQU9ELFVBQVUsVUFBVTtnQkFDM0JvQixTQUFTLENBQUNDLElBQUksR0FBR3JCLE1BQU11QixPQUFPLENBQUMsZUFBZSxDQUFDQyxPQUFPQztvQkFDbEQsTUFBTUMsY0FBY2IsTUFBTSxDQUFDWSxNQUFNO29CQUNqQyxPQUFPLE9BQU9DLGdCQUFnQixZQUMxQixPQUFPQSxnQkFBZ0IsV0FDckJDLE9BQU9ELGVBQ1BGO2dCQUNWO1lBQ0osT0FDSztnQkFDREosU0FBUyxDQUFDQyxJQUFJLEdBQUdyQjtZQUNyQjtRQUNKO1FBQ0EsTUFBTTRCLE1BQU1mLE9BQU9lLEdBQUcsSUFBSVIsVUFBVVEsR0FBRztRQUN2QyxNQUFNQyxTQUFTaEIsT0FBT2dCLE1BQU0sSUFBSVQsVUFBVVMsTUFBTTtRQUNoRCxJQUFJLENBQUNELEtBQUs7WUFDTixNQUFNLElBQUlFLE1BQU07UUFDcEI7UUFDQSxJQUFJLE9BQU9GLFFBQVEsVUFBVTtZQUN6QixNQUFNLElBQUlFLE1BQU07UUFDcEI7UUFDQSxNQUFNQyxTQUFTO1lBQUVIO1FBQUk7UUFDckIsSUFBSUMsUUFBUTtZQUNSRSxPQUFPRixNQUFNLEdBQUdBO1FBQ3BCO1FBQ0EsT0FBT0U7SUFDWDtJQUNBOzs7OztLQUtDLEdBQ0QsTUFBTUMsa0JBQWtCbkIsTUFBTSxFQUFFO1FBQzVCLE1BQU1vQixrQkFBa0IsTUFBTSxJQUFJLENBQUNkLE1BQU0sQ0FBQ047UUFDMUMsT0FBTyxJQUFJekIsK0RBQWdCQSxDQUFDNkM7SUFDaEM7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLWZvcm0tYnVpbGRlci10dXRvcmlhbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9wcm9tcHRzL2ltYWdlLmpzP2U5ZmMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW1hZ2VQcm9tcHRWYWx1ZSB9IGZyb20gXCIuLi9wcm9tcHRfdmFsdWVzLmpzXCI7XG5pbXBvcnQgeyBCYXNlUHJvbXB0VGVtcGxhdGUsIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgY2hlY2tWYWxpZFRlbXBsYXRlIH0gZnJvbSBcIi4vdGVtcGxhdGUuanNcIjtcbi8qKlxuICogQW4gaW1hZ2UgcHJvbXB0IHRlbXBsYXRlIGZvciBhIG11bHRpbW9kYWwgbW9kZWwuXG4gKi9cbmV4cG9ydCBjbGFzcyBJbWFnZVByb21wdFRlbXBsYXRlIGV4dGVuZHMgQmFzZVByb21wdFRlbXBsYXRlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiSW1hZ2VQcm9tcHRUZW1wbGF0ZVwiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihpbnB1dCkge1xuICAgICAgICBzdXBlcihpbnB1dCk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJwcm9tcHRzXCIsIFwiaW1hZ2VcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRlbXBsYXRlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRlbXBsYXRlRm9ybWF0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcImYtc3RyaW5nXCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInZhbGlkYXRlVGVtcGxhdGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudGVtcGxhdGUgPSBpbnB1dC50ZW1wbGF0ZTtcbiAgICAgICAgdGhpcy50ZW1wbGF0ZUZvcm1hdCA9IGlucHV0LnRlbXBsYXRlRm9ybWF0ID8/IHRoaXMudGVtcGxhdGVGb3JtYXQ7XG4gICAgICAgIHRoaXMudmFsaWRhdGVUZW1wbGF0ZSA9IGlucHV0LnZhbGlkYXRlVGVtcGxhdGUgPz8gdGhpcy52YWxpZGF0ZVRlbXBsYXRlO1xuICAgICAgICBpZiAodGhpcy52YWxpZGF0ZVRlbXBsYXRlKSB7XG4gICAgICAgICAgICBsZXQgdG90YWxJbnB1dFZhcmlhYmxlcyA9IHRoaXMuaW5wdXRWYXJpYWJsZXM7XG4gICAgICAgICAgICBpZiAodGhpcy5wYXJ0aWFsVmFyaWFibGVzKSB7XG4gICAgICAgICAgICAgICAgdG90YWxJbnB1dFZhcmlhYmxlcyA9IHRvdGFsSW5wdXRWYXJpYWJsZXMuY29uY2F0KE9iamVjdC5rZXlzKHRoaXMucGFydGlhbFZhcmlhYmxlcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hlY2tWYWxpZFRlbXBsYXRlKFtcbiAgICAgICAgICAgICAgICB7IHR5cGU6IFwiaW1hZ2VfdXJsXCIsIGltYWdlX3VybDogdGhpcy50ZW1wbGF0ZSB9LFxuICAgICAgICAgICAgXSwgdGhpcy50ZW1wbGF0ZUZvcm1hdCwgdG90YWxJbnB1dFZhcmlhYmxlcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX2dldFByb21wdFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcInByb21wdFwiO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJ0aWFsbHkgYXBwbGllcyB2YWx1ZXMgdG8gdGhlIHByb21wdCB0ZW1wbGF0ZS5cbiAgICAgKiBAcGFyYW0gdmFsdWVzIFRoZSB2YWx1ZXMgdG8gYmUgcGFydGlhbGx5IGFwcGxpZWQgdG8gdGhlIHByb21wdCB0ZW1wbGF0ZS5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBpbnN0YW5jZSBvZiBJbWFnZVByb21wdFRlbXBsYXRlIHdpdGggdGhlIHBhcnRpYWxseSBhcHBsaWVkIHZhbHVlcy5cbiAgICAgKi9cbiAgICBhc3luYyBwYXJ0aWFsKHZhbHVlcykge1xuICAgICAgICBjb25zdCBuZXdJbnB1dFZhcmlhYmxlcyA9IHRoaXMuaW5wdXRWYXJpYWJsZXMuZmlsdGVyKChpdikgPT4gIShpdiBpbiB2YWx1ZXMpKTtcbiAgICAgICAgY29uc3QgbmV3UGFydGlhbFZhcmlhYmxlcyA9IHtcbiAgICAgICAgICAgIC4uLih0aGlzLnBhcnRpYWxWYXJpYWJsZXMgPz8ge30pLFxuICAgICAgICAgICAgLi4udmFsdWVzLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBwcm9tcHREaWN0ID0ge1xuICAgICAgICAgICAgLi4udGhpcyxcbiAgICAgICAgICAgIGlucHV0VmFyaWFibGVzOiBuZXdJbnB1dFZhcmlhYmxlcyxcbiAgICAgICAgICAgIHBhcnRpYWxWYXJpYWJsZXM6IG5ld1BhcnRpYWxWYXJpYWJsZXMsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBuZXcgSW1hZ2VQcm9tcHRUZW1wbGF0ZShwcm9tcHREaWN0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9ybWF0cyB0aGUgcHJvbXB0IHRlbXBsYXRlIHdpdGggdGhlIHByb3ZpZGVkIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gdmFsdWVzIFRoZSB2YWx1ZXMgdG8gYmUgdXNlZCB0byBmb3JtYXQgdGhlIHByb21wdCB0ZW1wbGF0ZS5cbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIHN0cmluZyB3aGljaCBpcyB0aGUgZm9ybWF0dGVkIHByb21wdC5cbiAgICAgKi9cbiAgICBhc3luYyBmb3JtYXQodmFsdWVzKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGNvbnN0IGZvcm1hdHRlZCA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLnRlbXBsYXRlKSkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFtrZXldID0gdmFsdWUucmVwbGFjZSgveyhbXnt9XSopfS9nLCAobWF0Y2gsIGdyb3VwKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcGxhY2VtZW50ID0gdmFsdWVzW2dyb3VwXTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiByZXBsYWNlbWVudCA9PT0gXCJzdHJpbmdcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mIHJlcGxhY2VtZW50ID09PSBcIm51bWJlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICA/IFN0cmluZyhyZXBsYWNlbWVudClcbiAgICAgICAgICAgICAgICAgICAgICAgIDogbWF0Y2g7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3JtYXR0ZWRba2V5XSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHVybCA9IHZhbHVlcy51cmwgfHwgZm9ybWF0dGVkLnVybDtcbiAgICAgICAgY29uc3QgZGV0YWlsID0gdmFsdWVzLmRldGFpbCB8fCBmb3JtYXR0ZWQuZGV0YWlsO1xuICAgICAgICBpZiAoIXVybCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTXVzdCBwcm92aWRlIGVpdGhlciBhbiBpbWFnZSBVUkwuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdXJsICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1cmwgbXVzdCBiZSBhIHN0cmluZy5cIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3V0cHV0ID0geyB1cmwgfTtcbiAgICAgICAgaWYgKGRldGFpbCkge1xuICAgICAgICAgICAgb3V0cHV0LmRldGFpbCA9IGRldGFpbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3JtYXRzIHRoZSBwcm9tcHQgZ2l2ZW4gdGhlIGlucHV0IHZhbHVlcyBhbmQgcmV0dXJucyBhIGZvcm1hdHRlZFxuICAgICAqIHByb21wdCB2YWx1ZS5cbiAgICAgKiBAcGFyYW0gdmFsdWVzIFRoZSBpbnB1dCB2YWx1ZXMgdG8gZm9ybWF0IHRoZSBwcm9tcHQuXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYSBmb3JtYXR0ZWQgcHJvbXB0IHZhbHVlLlxuICAgICAqL1xuICAgIGFzeW5jIGZvcm1hdFByb21wdFZhbHVlKHZhbHVlcykge1xuICAgICAgICBjb25zdCBmb3JtYXR0ZWRQcm9tcHQgPSBhd2FpdCB0aGlzLmZvcm1hdCh2YWx1ZXMpO1xuICAgICAgICByZXR1cm4gbmV3IEltYWdlUHJvbXB0VmFsdWUoZm9ybWF0dGVkUHJvbXB0KTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiSW1hZ2VQcm9tcHRWYWx1ZSIsIkJhc2VQcm9tcHRUZW1wbGF0ZSIsImNoZWNrVmFsaWRUZW1wbGF0ZSIsIkltYWdlUHJvbXB0VGVtcGxhdGUiLCJsY19uYW1lIiwiY29uc3RydWN0b3IiLCJpbnB1dCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJ0ZW1wbGF0ZSIsInRlbXBsYXRlRm9ybWF0IiwidmFsaWRhdGVUZW1wbGF0ZSIsInRvdGFsSW5wdXRWYXJpYWJsZXMiLCJpbnB1dFZhcmlhYmxlcyIsInBhcnRpYWxWYXJpYWJsZXMiLCJjb25jYXQiLCJrZXlzIiwidHlwZSIsImltYWdlX3VybCIsIl9nZXRQcm9tcHRUeXBlIiwicGFydGlhbCIsInZhbHVlcyIsIm5ld0lucHV0VmFyaWFibGVzIiwiZmlsdGVyIiwiaXYiLCJuZXdQYXJ0aWFsVmFyaWFibGVzIiwicHJvbXB0RGljdCIsImZvcm1hdCIsImZvcm1hdHRlZCIsImtleSIsImVudHJpZXMiLCJyZXBsYWNlIiwibWF0Y2giLCJncm91cCIsInJlcGxhY2VtZW50IiwiU3RyaW5nIiwidXJsIiwiZGV0YWlsIiwiRXJyb3IiLCJvdXRwdXQiLCJmb3JtYXRQcm9tcHRWYWx1ZSIsImZvcm1hdHRlZFByb21wdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/prompts/image.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/prompts/index.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompts/index.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AIMessagePromptTemplate: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_1__.AIMessagePromptTemplate),\n/* harmony export */   BaseChatPromptTemplate: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_1__.BaseChatPromptTemplate),\n/* harmony export */   BaseMessagePromptTemplate: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_1__.BaseMessagePromptTemplate),\n/* harmony export */   BaseMessageStringPromptTemplate: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_1__.BaseMessageStringPromptTemplate),\n/* harmony export */   BasePromptTemplate: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.BasePromptTemplate),\n/* harmony export */   BaseStringPromptTemplate: () => (/* reexport safe */ _string_js__WEBPACK_IMPORTED_MODULE_6__.BaseStringPromptTemplate),\n/* harmony export */   ChatMessagePromptTemplate: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_1__.ChatMessagePromptTemplate),\n/* harmony export */   ChatPromptTemplate: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_1__.ChatPromptTemplate),\n/* harmony export */   DEFAULT_FORMATTER_MAPPING: () => (/* reexport safe */ _template_js__WEBPACK_IMPORTED_MODULE_7__.DEFAULT_FORMATTER_MAPPING),\n/* harmony export */   DEFAULT_PARSER_MAPPING: () => (/* reexport safe */ _template_js__WEBPACK_IMPORTED_MODULE_7__.DEFAULT_PARSER_MAPPING),\n/* harmony export */   FewShotChatMessagePromptTemplate: () => (/* reexport safe */ _few_shot_js__WEBPACK_IMPORTED_MODULE_2__.FewShotChatMessagePromptTemplate),\n/* harmony export */   FewShotPromptTemplate: () => (/* reexport safe */ _few_shot_js__WEBPACK_IMPORTED_MODULE_2__.FewShotPromptTemplate),\n/* harmony export */   HumanMessagePromptTemplate: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_1__.HumanMessagePromptTemplate),\n/* harmony export */   ImagePromptTemplate: () => (/* reexport safe */ _image_js__WEBPACK_IMPORTED_MODULE_8__.ImagePromptTemplate),\n/* harmony export */   MessagesPlaceholder: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_1__.MessagesPlaceholder),\n/* harmony export */   PipelinePromptTemplate: () => (/* reexport safe */ _pipeline_js__WEBPACK_IMPORTED_MODULE_3__.PipelinePromptTemplate),\n/* harmony export */   PromptTemplate: () => (/* reexport safe */ _prompt_js__WEBPACK_IMPORTED_MODULE_4__.PromptTemplate),\n/* harmony export */   SystemMessagePromptTemplate: () => (/* reexport safe */ _chat_js__WEBPACK_IMPORTED_MODULE_1__.SystemMessagePromptTemplate),\n/* harmony export */   checkValidTemplate: () => (/* reexport safe */ _template_js__WEBPACK_IMPORTED_MODULE_7__.checkValidTemplate),\n/* harmony export */   interpolateFString: () => (/* reexport safe */ _template_js__WEBPACK_IMPORTED_MODULE_7__.interpolateFString),\n/* harmony export */   parseFString: () => (/* reexport safe */ _template_js__WEBPACK_IMPORTED_MODULE_7__.parseFString),\n/* harmony export */   parseTemplate: () => (/* reexport safe */ _template_js__WEBPACK_IMPORTED_MODULE_7__.parseTemplate),\n/* harmony export */   renderTemplate: () => (/* reexport safe */ _template_js__WEBPACK_IMPORTED_MODULE_7__.renderTemplate)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/base.js\");\n/* harmony import */ var _chat_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chat.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/chat.js\");\n/* harmony import */ var _few_shot_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./few_shot.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/few_shot.js\");\n/* harmony import */ var _pipeline_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pipeline.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/pipeline.js\");\n/* harmony import */ var _prompt_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./prompt.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/prompt.js\");\n/* harmony import */ var _serde_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./serde.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/serde.js\");\n/* harmony import */ var _string_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./string.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/string.js\");\n/* harmony import */ var _template_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./template.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/template.js\");\n/* harmony import */ var _image_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./image.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/image.js\");\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUEwQjtBQUNBO0FBQ0k7QUFDQTtBQUNGO0FBQ0Q7QUFDQztBQUNFO0FBQ0giLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1mb3JtLWJ1aWxkZXItdHV0b3JpYWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9pbmRleC5qcz9kMjI5Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gXCIuL2Jhc2UuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2NoYXQuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2Zld19zaG90LmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9waXBlbGluZS5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vcHJvbXB0LmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9zZXJkZS5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vc3RyaW5nLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi90ZW1wbGF0ZS5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vaW1hZ2UuanNcIjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/prompts/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/prompts/pipeline.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompts/pipeline.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PipelinePromptTemplate: () => (/* binding */ PipelinePromptTemplate)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/base.js\");\n/* harmony import */ var _chat_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chat.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/chat.js\");\n\n\n/**\n * Class that handles a sequence of prompts, each of which may require\n * different input variables. Includes methods for formatting these\n * prompts, extracting required input values, and handling partial\n * prompts.\n * @example\n * ```typescript\n * const composedPrompt = new PipelinePromptTemplate({\n *   pipelinePrompts: [\n *     {\n *       name: \"introduction\",\n *       prompt: PromptTemplate.fromTemplate(`You are impersonating {person}.`),\n *     },\n *     {\n *       name: \"example\",\n *       prompt: PromptTemplate.fromTemplate(\n *         `Here's an example of an interaction:\n * Q: {example_q}\n * A: {example_a}`,\n *       ),\n *     },\n *     {\n *       name: \"start\",\n *       prompt: PromptTemplate.fromTemplate(\n *         `Now, do this for real!\n * Q: {input}\n * A:`,\n *       ),\n *     },\n *   ],\n *   finalPrompt: PromptTemplate.fromTemplate(\n *     `{introduction}\n * {example}\n * {start}`,\n *   ),\n * });\n *\n * const formattedPrompt = await composedPrompt.format({\n *   person: \"Elon Musk\",\n *   example_q: `What's your favorite car?`,\n *   example_a: \"Tesla\",\n *   input: `What's your favorite social media site?`,\n * });\n * ```\n */ class PipelinePromptTemplate extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BasePromptTemplate {\n    static lc_name() {\n        return \"PipelinePromptTemplate\";\n    }\n    constructor(input){\n        super({\n            ...input,\n            inputVariables: []\n        });\n        Object.defineProperty(this, \"pipelinePrompts\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"finalPrompt\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.pipelinePrompts = input.pipelinePrompts;\n        this.finalPrompt = input.finalPrompt;\n        this.inputVariables = this.computeInputValues();\n    }\n    /**\n     * Computes the input values required by the pipeline prompts.\n     * @returns Array of input values required by the pipeline prompts.\n     */ computeInputValues() {\n        const intermediateValues = this.pipelinePrompts.map((pipelinePrompt)=>pipelinePrompt.name);\n        const inputValues = this.pipelinePrompts.map((pipelinePrompt)=>pipelinePrompt.prompt.inputVariables.filter((inputValue)=>!intermediateValues.includes(inputValue))).flat();\n        return [\n            ...new Set(inputValues)\n        ];\n    }\n    static extractRequiredInputValues(allValues, requiredValueNames) {\n        return requiredValueNames.reduce((requiredValues, valueName)=>{\n            // eslint-disable-next-line no-param-reassign\n            requiredValues[valueName] = allValues[valueName];\n            return requiredValues;\n        }, {});\n    }\n    /**\n     * Formats the pipeline prompts based on the provided input values.\n     * @param values Input values to format the pipeline prompts.\n     * @returns Promise that resolves with the formatted input values.\n     */ async formatPipelinePrompts(values) {\n        const allValues = await this.mergePartialAndUserVariables(values);\n        for (const { name: pipelinePromptName, prompt: pipelinePrompt } of this.pipelinePrompts){\n            const pipelinePromptInputValues = PipelinePromptTemplate.extractRequiredInputValues(allValues, pipelinePrompt.inputVariables);\n            // eslint-disable-next-line no-instanceof/no-instanceof\n            if (pipelinePrompt instanceof _chat_js__WEBPACK_IMPORTED_MODULE_1__.ChatPromptTemplate) {\n                allValues[pipelinePromptName] = await pipelinePrompt.formatMessages(pipelinePromptInputValues);\n            } else {\n                allValues[pipelinePromptName] = await pipelinePrompt.format(pipelinePromptInputValues);\n            }\n        }\n        return PipelinePromptTemplate.extractRequiredInputValues(allValues, this.finalPrompt.inputVariables);\n    }\n    /**\n     * Formats the final prompt value based on the provided input values.\n     * @param values Input values to format the final prompt value.\n     * @returns Promise that resolves with the formatted final prompt value.\n     */ async formatPromptValue(values) {\n        return this.finalPrompt.formatPromptValue(await this.formatPipelinePrompts(values));\n    }\n    async format(values) {\n        return this.finalPrompt.format(await this.formatPipelinePrompts(values));\n    }\n    /**\n     * Handles partial prompts, which are prompts that have been partially\n     * filled with input values.\n     * @param values Partial input values.\n     * @returns Promise that resolves with a new PipelinePromptTemplate instance with updated input variables.\n     */ async partial(values) {\n        const promptDict = {\n            ...this\n        };\n        promptDict.inputVariables = this.inputVariables.filter((iv)=>!(iv in values));\n        promptDict.partialVariables = {\n            ...this.partialVariables ?? {},\n            ...values\n        };\n        return new PipelinePromptTemplate(promptDict);\n    }\n    serialize() {\n        throw new Error(\"Not implemented.\");\n    }\n    _getPromptType() {\n        return \"pipeline\";\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9waXBlbGluZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBK0M7QUFDQTtBQUMvQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0E0Q0MsR0FDTSxNQUFNRSwrQkFBK0JGLHdEQUFrQkE7SUFDMUQsT0FBT0csVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBQyxZQUFZQyxLQUFLLENBQUU7UUFDZixLQUFLLENBQUM7WUFBRSxHQUFHQSxLQUFLO1lBQUVDLGdCQUFnQixFQUFFO1FBQUM7UUFDckNDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CO1lBQzNDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxlQUFlO1lBQ3ZDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNDLGVBQWUsR0FBR1IsTUFBTVEsZUFBZTtRQUM1QyxJQUFJLENBQUNDLFdBQVcsR0FBR1QsTUFBTVMsV0FBVztRQUNwQyxJQUFJLENBQUNSLGNBQWMsR0FBRyxJQUFJLENBQUNTLGtCQUFrQjtJQUNqRDtJQUNBOzs7S0FHQyxHQUNEQSxxQkFBcUI7UUFDakIsTUFBTUMscUJBQXFCLElBQUksQ0FBQ0gsZUFBZSxDQUFDSSxHQUFHLENBQUMsQ0FBQ0MsaUJBQW1CQSxlQUFlQyxJQUFJO1FBQzNGLE1BQU1DLGNBQWMsSUFBSSxDQUFDUCxlQUFlLENBQ25DSSxHQUFHLENBQUMsQ0FBQ0MsaUJBQW1CQSxlQUFlRyxNQUFNLENBQUNmLGNBQWMsQ0FBQ2dCLE1BQU0sQ0FBQyxDQUFDQyxhQUFlLENBQUNQLG1CQUFtQlEsUUFBUSxDQUFDRCxjQUNqSEUsSUFBSTtRQUNULE9BQU87ZUFBSSxJQUFJQyxJQUFJTjtTQUFhO0lBQ3BDO0lBQ0EsT0FBT08sMkJBQTJCQyxTQUFTLEVBQUVDLGtCQUFrQixFQUFFO1FBQzdELE9BQU9BLG1CQUFtQkMsTUFBTSxDQUFDLENBQUNDLGdCQUFnQkM7WUFDOUMsNkNBQTZDO1lBQzdDRCxjQUFjLENBQUNDLFVBQVUsR0FBR0osU0FBUyxDQUFDSSxVQUFVO1lBQ2hELE9BQU9EO1FBQ1gsR0FBRyxDQUFDO0lBQ1I7SUFDQTs7OztLQUlDLEdBQ0QsTUFBTUUsc0JBQXNCQyxNQUFNLEVBQUU7UUFDaEMsTUFBTU4sWUFBWSxNQUFNLElBQUksQ0FBQ08sNEJBQTRCLENBQUNEO1FBQzFELEtBQUssTUFBTSxFQUFFZixNQUFNaUIsa0JBQWtCLEVBQUVmLFFBQVFILGNBQWMsRUFBRSxJQUFJLElBQUksQ0FDbEVMLGVBQWUsQ0FBRTtZQUNsQixNQUFNd0IsNEJBQTRCbkMsdUJBQXVCeUIsMEJBQTBCLENBQUNDLFdBQVdWLGVBQWVaLGNBQWM7WUFDNUgsdURBQXVEO1lBQ3ZELElBQUlZLDBCQUEwQmpCLHdEQUFrQkEsRUFBRTtnQkFDOUMyQixTQUFTLENBQUNRLG1CQUFtQixHQUFHLE1BQU1sQixlQUFlb0IsY0FBYyxDQUFDRDtZQUN4RSxPQUNLO2dCQUNEVCxTQUFTLENBQUNRLG1CQUFtQixHQUFHLE1BQU1sQixlQUFlcUIsTUFBTSxDQUFDRjtZQUNoRTtRQUNKO1FBQ0EsT0FBT25DLHVCQUF1QnlCLDBCQUEwQixDQUFDQyxXQUFXLElBQUksQ0FBQ2QsV0FBVyxDQUFDUixjQUFjO0lBQ3ZHO0lBQ0E7Ozs7S0FJQyxHQUNELE1BQU1rQyxrQkFBa0JOLE1BQU0sRUFBRTtRQUM1QixPQUFPLElBQUksQ0FBQ3BCLFdBQVcsQ0FBQzBCLGlCQUFpQixDQUFDLE1BQU0sSUFBSSxDQUFDUCxxQkFBcUIsQ0FBQ0M7SUFDL0U7SUFDQSxNQUFNSyxPQUFPTCxNQUFNLEVBQUU7UUFDakIsT0FBTyxJQUFJLENBQUNwQixXQUFXLENBQUN5QixNQUFNLENBQUMsTUFBTSxJQUFJLENBQUNOLHFCQUFxQixDQUFDQztJQUNwRTtJQUNBOzs7OztLQUtDLEdBQ0QsTUFBTU8sUUFBUVAsTUFBTSxFQUFFO1FBQ2xCLE1BQU1RLGFBQWE7WUFBRSxHQUFHLElBQUk7UUFBQztRQUM3QkEsV0FBV3BDLGNBQWMsR0FBRyxJQUFJLENBQUNBLGNBQWMsQ0FBQ2dCLE1BQU0sQ0FBQyxDQUFDcUIsS0FBTyxDQUFFQSxDQUFBQSxNQUFNVCxNQUFLO1FBQzVFUSxXQUFXRSxnQkFBZ0IsR0FBRztZQUMxQixHQUFJLElBQUksQ0FBQ0EsZ0JBQWdCLElBQUksQ0FBQyxDQUFDO1lBQy9CLEdBQUdWLE1BQU07UUFDYjtRQUNBLE9BQU8sSUFBSWhDLHVCQUF1QndDO0lBQ3RDO0lBQ0FHLFlBQVk7UUFDUixNQUFNLElBQUlDLE1BQU07SUFDcEI7SUFDQUMsaUJBQWlCO1FBQ2IsT0FBTztJQUNYO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1mb3JtLWJ1aWxkZXItdHV0b3JpYWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9waXBlbGluZS5qcz83MWJkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VQcm9tcHRUZW1wbGF0ZSB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmltcG9ydCB7IENoYXRQcm9tcHRUZW1wbGF0ZSB9IGZyb20gXCIuL2NoYXQuanNcIjtcbi8qKlxuICogQ2xhc3MgdGhhdCBoYW5kbGVzIGEgc2VxdWVuY2Ugb2YgcHJvbXB0cywgZWFjaCBvZiB3aGljaCBtYXkgcmVxdWlyZVxuICogZGlmZmVyZW50IGlucHV0IHZhcmlhYmxlcy4gSW5jbHVkZXMgbWV0aG9kcyBmb3IgZm9ybWF0dGluZyB0aGVzZVxuICogcHJvbXB0cywgZXh0cmFjdGluZyByZXF1aXJlZCBpbnB1dCB2YWx1ZXMsIGFuZCBoYW5kbGluZyBwYXJ0aWFsXG4gKiBwcm9tcHRzLlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IGNvbXBvc2VkUHJvbXB0ID0gbmV3IFBpcGVsaW5lUHJvbXB0VGVtcGxhdGUoe1xuICogICBwaXBlbGluZVByb21wdHM6IFtcbiAqICAgICB7XG4gKiAgICAgICBuYW1lOiBcImludHJvZHVjdGlvblwiLFxuICogICAgICAgcHJvbXB0OiBQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUoYFlvdSBhcmUgaW1wZXJzb25hdGluZyB7cGVyc29ufS5gKSxcbiAqICAgICB9LFxuICogICAgIHtcbiAqICAgICAgIG5hbWU6IFwiZXhhbXBsZVwiLFxuICogICAgICAgcHJvbXB0OiBQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUoXG4gKiAgICAgICAgIGBIZXJlJ3MgYW4gZXhhbXBsZSBvZiBhbiBpbnRlcmFjdGlvbjpcbiAqIFE6IHtleGFtcGxlX3F9XG4gKiBBOiB7ZXhhbXBsZV9hfWAsXG4gKiAgICAgICApLFxuICogICAgIH0sXG4gKiAgICAge1xuICogICAgICAgbmFtZTogXCJzdGFydFwiLFxuICogICAgICAgcHJvbXB0OiBQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUoXG4gKiAgICAgICAgIGBOb3csIGRvIHRoaXMgZm9yIHJlYWwhXG4gKiBROiB7aW5wdXR9XG4gKiBBOmAsXG4gKiAgICAgICApLFxuICogICAgIH0sXG4gKiAgIF0sXG4gKiAgIGZpbmFsUHJvbXB0OiBQcm9tcHRUZW1wbGF0ZS5mcm9tVGVtcGxhdGUoXG4gKiAgICAgYHtpbnRyb2R1Y3Rpb259XG4gKiB7ZXhhbXBsZX1cbiAqIHtzdGFydH1gLFxuICogICApLFxuICogfSk7XG4gKlxuICogY29uc3QgZm9ybWF0dGVkUHJvbXB0ID0gYXdhaXQgY29tcG9zZWRQcm9tcHQuZm9ybWF0KHtcbiAqICAgcGVyc29uOiBcIkVsb24gTXVza1wiLFxuICogICBleGFtcGxlX3E6IGBXaGF0J3MgeW91ciBmYXZvcml0ZSBjYXI/YCxcbiAqICAgZXhhbXBsZV9hOiBcIlRlc2xhXCIsXG4gKiAgIGlucHV0OiBgV2hhdCdzIHlvdXIgZmF2b3JpdGUgc29jaWFsIG1lZGlhIHNpdGU/YCxcbiAqIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBQaXBlbGluZVByb21wdFRlbXBsYXRlIGV4dGVuZHMgQmFzZVByb21wdFRlbXBsYXRlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiUGlwZWxpbmVQcm9tcHRUZW1wbGF0ZVwiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihpbnB1dCkge1xuICAgICAgICBzdXBlcih7IC4uLmlucHV0LCBpbnB1dFZhcmlhYmxlczogW10gfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInBpcGVsaW5lUHJvbXB0c1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJmaW5hbFByb21wdFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnBpcGVsaW5lUHJvbXB0cyA9IGlucHV0LnBpcGVsaW5lUHJvbXB0cztcbiAgICAgICAgdGhpcy5maW5hbFByb21wdCA9IGlucHV0LmZpbmFsUHJvbXB0O1xuICAgICAgICB0aGlzLmlucHV0VmFyaWFibGVzID0gdGhpcy5jb21wdXRlSW5wdXRWYWx1ZXMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tcHV0ZXMgdGhlIGlucHV0IHZhbHVlcyByZXF1aXJlZCBieSB0aGUgcGlwZWxpbmUgcHJvbXB0cy5cbiAgICAgKiBAcmV0dXJucyBBcnJheSBvZiBpbnB1dCB2YWx1ZXMgcmVxdWlyZWQgYnkgdGhlIHBpcGVsaW5lIHByb21wdHMuXG4gICAgICovXG4gICAgY29tcHV0ZUlucHV0VmFsdWVzKCkge1xuICAgICAgICBjb25zdCBpbnRlcm1lZGlhdGVWYWx1ZXMgPSB0aGlzLnBpcGVsaW5lUHJvbXB0cy5tYXAoKHBpcGVsaW5lUHJvbXB0KSA9PiBwaXBlbGluZVByb21wdC5uYW1lKTtcbiAgICAgICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB0aGlzLnBpcGVsaW5lUHJvbXB0c1xuICAgICAgICAgICAgLm1hcCgocGlwZWxpbmVQcm9tcHQpID0+IHBpcGVsaW5lUHJvbXB0LnByb21wdC5pbnB1dFZhcmlhYmxlcy5maWx0ZXIoKGlucHV0VmFsdWUpID0+ICFpbnRlcm1lZGlhdGVWYWx1ZXMuaW5jbHVkZXMoaW5wdXRWYWx1ZSkpKVxuICAgICAgICAgICAgLmZsYXQoKTtcbiAgICAgICAgcmV0dXJuIFsuLi5uZXcgU2V0KGlucHV0VmFsdWVzKV07XG4gICAgfVxuICAgIHN0YXRpYyBleHRyYWN0UmVxdWlyZWRJbnB1dFZhbHVlcyhhbGxWYWx1ZXMsIHJlcXVpcmVkVmFsdWVOYW1lcykge1xuICAgICAgICByZXR1cm4gcmVxdWlyZWRWYWx1ZU5hbWVzLnJlZHVjZSgocmVxdWlyZWRWYWx1ZXMsIHZhbHVlTmFtZSkgPT4ge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgICAgICAgICByZXF1aXJlZFZhbHVlc1t2YWx1ZU5hbWVdID0gYWxsVmFsdWVzW3ZhbHVlTmFtZV07XG4gICAgICAgICAgICByZXR1cm4gcmVxdWlyZWRWYWx1ZXM7XG4gICAgICAgIH0sIHt9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9ybWF0cyB0aGUgcGlwZWxpbmUgcHJvbXB0cyBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgaW5wdXQgdmFsdWVzLlxuICAgICAqIEBwYXJhbSB2YWx1ZXMgSW5wdXQgdmFsdWVzIHRvIGZvcm1hdCB0aGUgcGlwZWxpbmUgcHJvbXB0cy5cbiAgICAgKiBAcmV0dXJucyBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgZm9ybWF0dGVkIGlucHV0IHZhbHVlcy5cbiAgICAgKi9cbiAgICBhc3luYyBmb3JtYXRQaXBlbGluZVByb21wdHModmFsdWVzKSB7XG4gICAgICAgIGNvbnN0IGFsbFZhbHVlcyA9IGF3YWl0IHRoaXMubWVyZ2VQYXJ0aWFsQW5kVXNlclZhcmlhYmxlcyh2YWx1ZXMpO1xuICAgICAgICBmb3IgKGNvbnN0IHsgbmFtZTogcGlwZWxpbmVQcm9tcHROYW1lLCBwcm9tcHQ6IHBpcGVsaW5lUHJvbXB0IH0gb2YgdGhpc1xuICAgICAgICAgICAgLnBpcGVsaW5lUHJvbXB0cykge1xuICAgICAgICAgICAgY29uc3QgcGlwZWxpbmVQcm9tcHRJbnB1dFZhbHVlcyA9IFBpcGVsaW5lUHJvbXB0VGVtcGxhdGUuZXh0cmFjdFJlcXVpcmVkSW5wdXRWYWx1ZXMoYWxsVmFsdWVzLCBwaXBlbGluZVByb21wdC5pbnB1dFZhcmlhYmxlcyk7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgICAgICBpZiAocGlwZWxpbmVQcm9tcHQgaW5zdGFuY2VvZiBDaGF0UHJvbXB0VGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICBhbGxWYWx1ZXNbcGlwZWxpbmVQcm9tcHROYW1lXSA9IGF3YWl0IHBpcGVsaW5lUHJvbXB0LmZvcm1hdE1lc3NhZ2VzKHBpcGVsaW5lUHJvbXB0SW5wdXRWYWx1ZXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYWxsVmFsdWVzW3BpcGVsaW5lUHJvbXB0TmFtZV0gPSBhd2FpdCBwaXBlbGluZVByb21wdC5mb3JtYXQocGlwZWxpbmVQcm9tcHRJbnB1dFZhbHVlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFBpcGVsaW5lUHJvbXB0VGVtcGxhdGUuZXh0cmFjdFJlcXVpcmVkSW5wdXRWYWx1ZXMoYWxsVmFsdWVzLCB0aGlzLmZpbmFsUHJvbXB0LmlucHV0VmFyaWFibGVzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9ybWF0cyB0aGUgZmluYWwgcHJvbXB0IHZhbHVlIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBpbnB1dCB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHZhbHVlcyBJbnB1dCB2YWx1ZXMgdG8gZm9ybWF0IHRoZSBmaW5hbCBwcm9tcHQgdmFsdWUuXG4gICAgICogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIGZvcm1hdHRlZCBmaW5hbCBwcm9tcHQgdmFsdWUuXG4gICAgICovXG4gICAgYXN5bmMgZm9ybWF0UHJvbXB0VmFsdWUodmFsdWVzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbmFsUHJvbXB0LmZvcm1hdFByb21wdFZhbHVlKGF3YWl0IHRoaXMuZm9ybWF0UGlwZWxpbmVQcm9tcHRzKHZhbHVlcykpO1xuICAgIH1cbiAgICBhc3luYyBmb3JtYXQodmFsdWVzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpbmFsUHJvbXB0LmZvcm1hdChhd2FpdCB0aGlzLmZvcm1hdFBpcGVsaW5lUHJvbXB0cyh2YWx1ZXMpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlcyBwYXJ0aWFsIHByb21wdHMsIHdoaWNoIGFyZSBwcm9tcHRzIHRoYXQgaGF2ZSBiZWVuIHBhcnRpYWxseVxuICAgICAqIGZpbGxlZCB3aXRoIGlucHV0IHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gdmFsdWVzIFBhcnRpYWwgaW5wdXQgdmFsdWVzLlxuICAgICAqIEByZXR1cm5zIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIGEgbmV3IFBpcGVsaW5lUHJvbXB0VGVtcGxhdGUgaW5zdGFuY2Ugd2l0aCB1cGRhdGVkIGlucHV0IHZhcmlhYmxlcy5cbiAgICAgKi9cbiAgICBhc3luYyBwYXJ0aWFsKHZhbHVlcykge1xuICAgICAgICBjb25zdCBwcm9tcHREaWN0ID0geyAuLi50aGlzIH07XG4gICAgICAgIHByb21wdERpY3QuaW5wdXRWYXJpYWJsZXMgPSB0aGlzLmlucHV0VmFyaWFibGVzLmZpbHRlcigoaXYpID0+ICEoaXYgaW4gdmFsdWVzKSk7XG4gICAgICAgIHByb21wdERpY3QucGFydGlhbFZhcmlhYmxlcyA9IHtcbiAgICAgICAgICAgIC4uLih0aGlzLnBhcnRpYWxWYXJpYWJsZXMgPz8ge30pLFxuICAgICAgICAgICAgLi4udmFsdWVzLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gbmV3IFBpcGVsaW5lUHJvbXB0VGVtcGxhdGUocHJvbXB0RGljdCk7XG4gICAgfVxuICAgIHNlcmlhbGl6ZSgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkLlwiKTtcbiAgICB9XG4gICAgX2dldFByb21wdFR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcInBpcGVsaW5lXCI7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkJhc2VQcm9tcHRUZW1wbGF0ZSIsIkNoYXRQcm9tcHRUZW1wbGF0ZSIsIlBpcGVsaW5lUHJvbXB0VGVtcGxhdGUiLCJsY19uYW1lIiwiY29uc3RydWN0b3IiLCJpbnB1dCIsImlucHV0VmFyaWFibGVzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsInBpcGVsaW5lUHJvbXB0cyIsImZpbmFsUHJvbXB0IiwiY29tcHV0ZUlucHV0VmFsdWVzIiwiaW50ZXJtZWRpYXRlVmFsdWVzIiwibWFwIiwicGlwZWxpbmVQcm9tcHQiLCJuYW1lIiwiaW5wdXRWYWx1ZXMiLCJwcm9tcHQiLCJmaWx0ZXIiLCJpbnB1dFZhbHVlIiwiaW5jbHVkZXMiLCJmbGF0IiwiU2V0IiwiZXh0cmFjdFJlcXVpcmVkSW5wdXRWYWx1ZXMiLCJhbGxWYWx1ZXMiLCJyZXF1aXJlZFZhbHVlTmFtZXMiLCJyZWR1Y2UiLCJyZXF1aXJlZFZhbHVlcyIsInZhbHVlTmFtZSIsImZvcm1hdFBpcGVsaW5lUHJvbXB0cyIsInZhbHVlcyIsIm1lcmdlUGFydGlhbEFuZFVzZXJWYXJpYWJsZXMiLCJwaXBlbGluZVByb21wdE5hbWUiLCJwaXBlbGluZVByb21wdElucHV0VmFsdWVzIiwiZm9ybWF0TWVzc2FnZXMiLCJmb3JtYXQiLCJmb3JtYXRQcm9tcHRWYWx1ZSIsInBhcnRpYWwiLCJwcm9tcHREaWN0IiwiaXYiLCJwYXJ0aWFsVmFyaWFibGVzIiwic2VyaWFsaXplIiwiRXJyb3IiLCJfZ2V0UHJvbXB0VHlwZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/prompts/pipeline.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/prompts/prompt.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompts/prompt.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PromptTemplate: () => (/* binding */ PromptTemplate)\n/* harmony export */ });\n/* harmony import */ var _string_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./string.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/string.js\");\n/* harmony import */ var _template_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./template.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/template.js\");\n// Default generic \"any\" values are for backwards compatibility.\n// Replace with \"string\" when we are comfortable with a breaking change.\n\n\n/**\n * Schema to represent a basic prompt for an LLM.\n * @augments BasePromptTemplate\n * @augments PromptTemplateInput\n *\n * @example\n * ```ts\n * import { PromptTemplate } from \"langchain/prompts\";\n *\n * const prompt = new PromptTemplate({\n *   inputVariables: [\"foo\"],\n *   template: \"Say {foo}\",\n * });\n * ```\n */ class PromptTemplate extends _string_js__WEBPACK_IMPORTED_MODULE_0__.BaseStringPromptTemplate {\n    static lc_name() {\n        return \"PromptTemplate\";\n    }\n    constructor(input){\n        super(input);\n        Object.defineProperty(this, \"template\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"templateFormat\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"f-string\"\n        });\n        Object.defineProperty(this, \"validateTemplate\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.assign(this, input);\n        if (this.validateTemplate) {\n            let totalInputVariables = this.inputVariables;\n            if (this.partialVariables) {\n                totalInputVariables = totalInputVariables.concat(Object.keys(this.partialVariables));\n            }\n            (0,_template_js__WEBPACK_IMPORTED_MODULE_1__.checkValidTemplate)(this.template, this.templateFormat, totalInputVariables);\n        }\n    }\n    _getPromptType() {\n        return \"prompt\";\n    }\n    /**\n     * Formats the prompt template with the provided values.\n     * @param values The values to be used to format the prompt template.\n     * @returns A promise that resolves to a string which is the formatted prompt.\n     */ async format(values) {\n        const allValues = await this.mergePartialAndUserVariables(values);\n        return (0,_template_js__WEBPACK_IMPORTED_MODULE_1__.renderTemplate)(this.template, this.templateFormat, allValues);\n    }\n    /**\n     * Take examples in list format with prefix and suffix to create a prompt.\n     *\n     * Intended to be used a a way to dynamically create a prompt from examples.\n     *\n     * @param examples - List of examples to use in the prompt.\n     * @param suffix - String to go after the list of examples. Should generally set up the user's input.\n     * @param inputVariables - A list of variable names the final prompt template will expect\n     * @param exampleSeparator - The separator to use in between examples\n     * @param prefix - String that should go before any examples. Generally includes examples.\n     *\n     * @returns The final prompt template generated.\n     */ static fromExamples(examples, suffix, inputVariables, exampleSeparator = \"\\n\\n\", prefix = \"\") {\n        const template = [\n            prefix,\n            ...examples,\n            suffix\n        ].join(exampleSeparator);\n        return new PromptTemplate({\n            inputVariables,\n            template\n        });\n    }\n    /**\n     * Load prompt template from a template f-string\n     */ static fromTemplate(template, { templateFormat = \"f-string\", ...rest } = {}) {\n        const names = new Set();\n        (0,_template_js__WEBPACK_IMPORTED_MODULE_1__.parseTemplate)(template, templateFormat).forEach((node)=>{\n            if (node.type === \"variable\") {\n                names.add(node.name);\n            }\n        });\n        return new PromptTemplate({\n            // Rely on extracted types\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            inputVariables: [\n                ...names\n            ],\n            templateFormat,\n            template,\n            ...rest\n        });\n    }\n    /**\n     * Partially applies values to the prompt template.\n     * @param values The values to be partially applied to the prompt template.\n     * @returns A new instance of PromptTemplate with the partially applied values.\n     */ async partial(values) {\n        const newInputVariables = this.inputVariables.filter((iv)=>!(iv in values));\n        const newPartialVariables = {\n            ...this.partialVariables ?? {},\n            ...values\n        };\n        const promptDict = {\n            ...this,\n            inputVariables: newInputVariables,\n            partialVariables: newPartialVariables\n        };\n        return new PromptTemplate(promptDict);\n    }\n    serialize() {\n        if (this.outputParser !== undefined) {\n            throw new Error(\"Cannot serialize a prompt template with an output parser\");\n        }\n        return {\n            _type: this._getPromptType(),\n            input_variables: this.inputVariables,\n            template: this.template,\n            template_format: this.templateFormat\n        };\n    }\n    static async deserialize(data) {\n        if (!data.template) {\n            throw new Error(\"Prompt template must have a template\");\n        }\n        const res = new PromptTemplate({\n            inputVariables: data.input_variables,\n            template: data.template,\n            templateFormat: data.template_format\n        });\n        return res;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9wcm9tcHQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsZ0VBQWdFO0FBQ2hFLHdFQUF3RTtBQUNqQjtBQUM0QjtBQUNuRjs7Ozs7Ozs7Ozs7Ozs7Q0FjQyxHQUNNLE1BQU1JLHVCQUF1QkosZ0VBQXdCQTtJQUN4RCxPQUFPSyxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FDLFlBQVlDLEtBQUssQ0FBRTtRQUNmLEtBQUssQ0FBQ0E7UUFDTkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxZQUFZO1lBQ3BDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxrQkFBa0I7WUFDMUNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG9CQUFvQjtZQUM1Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9NLE1BQU0sQ0FBQyxJQUFJLEVBQUVQO1FBQ3BCLElBQUksSUFBSSxDQUFDUSxnQkFBZ0IsRUFBRTtZQUN2QixJQUFJQyxzQkFBc0IsSUFBSSxDQUFDQyxjQUFjO1lBQzdDLElBQUksSUFBSSxDQUFDQyxnQkFBZ0IsRUFBRTtnQkFDdkJGLHNCQUFzQkEsb0JBQW9CRyxNQUFNLENBQUNYLE9BQU9ZLElBQUksQ0FBQyxJQUFJLENBQUNGLGdCQUFnQjtZQUN0RjtZQUNBakIsZ0VBQWtCQSxDQUFDLElBQUksQ0FBQ29CLFFBQVEsRUFBRSxJQUFJLENBQUNDLGNBQWMsRUFBRU47UUFDM0Q7SUFDSjtJQUNBTyxpQkFBaUI7UUFDYixPQUFPO0lBQ1g7SUFDQTs7OztLQUlDLEdBQ0QsTUFBTUMsT0FBT0MsTUFBTSxFQUFFO1FBQ2pCLE1BQU1DLFlBQVksTUFBTSxJQUFJLENBQUNDLDRCQUE0QixDQUFDRjtRQUMxRCxPQUFPdEIsNERBQWNBLENBQUMsSUFBSSxDQUFDa0IsUUFBUSxFQUFFLElBQUksQ0FBQ0MsY0FBYyxFQUFFSTtJQUM5RDtJQUNBOzs7Ozs7Ozs7Ozs7S0FZQyxHQUNELE9BQU9FLGFBQWFDLFFBQVEsRUFBRUMsTUFBTSxFQUFFYixjQUFjLEVBQUVjLG1CQUFtQixNQUFNLEVBQUVDLFNBQVMsRUFBRSxFQUFFO1FBQzFGLE1BQU1YLFdBQVc7WUFBQ1c7ZUFBV0g7WUFBVUM7U0FBTyxDQUFDRyxJQUFJLENBQUNGO1FBQ3BELE9BQU8sSUFBSTNCLGVBQWU7WUFDdEJhO1lBQ0FJO1FBQ0o7SUFDSjtJQUNBOztLQUVDLEdBQ0QsT0FBT2EsYUFBYWIsUUFBUSxFQUFFLEVBQUVDLGlCQUFpQixVQUFVLEVBQUUsR0FBR2EsTUFBTSxHQUFHLENBQUMsQ0FBQyxFQUFFO1FBQ3pFLE1BQU1DLFFBQVEsSUFBSUM7UUFDbEJuQywyREFBYUEsQ0FBQ21CLFVBQVVDLGdCQUFnQmdCLE9BQU8sQ0FBQyxDQUFDQztZQUM3QyxJQUFJQSxLQUFLQyxJQUFJLEtBQUssWUFBWTtnQkFDMUJKLE1BQU1LLEdBQUcsQ0FBQ0YsS0FBS0csSUFBSTtZQUN2QjtRQUNKO1FBQ0EsT0FBTyxJQUFJdEMsZUFBZTtZQUN0QiwwQkFBMEI7WUFDMUIsOERBQThEO1lBQzlEYSxnQkFBZ0I7bUJBQUltQjthQUFNO1lBQzFCZDtZQUNBRDtZQUNBLEdBQUdjLElBQUk7UUFDWDtJQUNKO0lBQ0E7Ozs7S0FJQyxHQUNELE1BQU1RLFFBQVFsQixNQUFNLEVBQUU7UUFDbEIsTUFBTW1CLG9CQUFvQixJQUFJLENBQUMzQixjQUFjLENBQUM0QixNQUFNLENBQUMsQ0FBQ0MsS0FBTyxDQUFFQSxDQUFBQSxNQUFNckIsTUFBSztRQUMxRSxNQUFNc0Isc0JBQXNCO1lBQ3hCLEdBQUksSUFBSSxDQUFDN0IsZ0JBQWdCLElBQUksQ0FBQyxDQUFDO1lBQy9CLEdBQUdPLE1BQU07UUFDYjtRQUNBLE1BQU11QixhQUFhO1lBQ2YsR0FBRyxJQUFJO1lBQ1AvQixnQkFBZ0IyQjtZQUNoQjFCLGtCQUFrQjZCO1FBQ3RCO1FBQ0EsT0FBTyxJQUFJM0MsZUFBZTRDO0lBQzlCO0lBQ0FDLFlBQVk7UUFDUixJQUFJLElBQUksQ0FBQ0MsWUFBWSxLQUFLQyxXQUFXO1lBQ2pDLE1BQU0sSUFBSUMsTUFBTTtRQUNwQjtRQUNBLE9BQU87WUFDSEMsT0FBTyxJQUFJLENBQUM5QixjQUFjO1lBQzFCK0IsaUJBQWlCLElBQUksQ0FBQ3JDLGNBQWM7WUFDcENJLFVBQVUsSUFBSSxDQUFDQSxRQUFRO1lBQ3ZCa0MsaUJBQWlCLElBQUksQ0FBQ2pDLGNBQWM7UUFDeEM7SUFDSjtJQUNBLGFBQWFrQyxZQUFZQyxJQUFJLEVBQUU7UUFDM0IsSUFBSSxDQUFDQSxLQUFLcEMsUUFBUSxFQUFFO1lBQ2hCLE1BQU0sSUFBSStCLE1BQU07UUFDcEI7UUFDQSxNQUFNTSxNQUFNLElBQUl0RCxlQUFlO1lBQzNCYSxnQkFBZ0J3QyxLQUFLSCxlQUFlO1lBQ3BDakMsVUFBVW9DLEtBQUtwQyxRQUFRO1lBQ3ZCQyxnQkFBZ0JtQyxLQUFLRixlQUFlO1FBQ3hDO1FBQ0EsT0FBT0c7SUFDWDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3Byb21wdHMvcHJvbXB0LmpzPzMwMTYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gRGVmYXVsdCBnZW5lcmljIFwiYW55XCIgdmFsdWVzIGFyZSBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG4vLyBSZXBsYWNlIHdpdGggXCJzdHJpbmdcIiB3aGVuIHdlIGFyZSBjb21mb3J0YWJsZSB3aXRoIGEgYnJlYWtpbmcgY2hhbmdlLlxuaW1wb3J0IHsgQmFzZVN0cmluZ1Byb21wdFRlbXBsYXRlIH0gZnJvbSBcIi4vc3RyaW5nLmpzXCI7XG5pbXBvcnQgeyBjaGVja1ZhbGlkVGVtcGxhdGUsIHBhcnNlVGVtcGxhdGUsIHJlbmRlclRlbXBsYXRlLCB9IGZyb20gXCIuL3RlbXBsYXRlLmpzXCI7XG4vKipcbiAqIFNjaGVtYSB0byByZXByZXNlbnQgYSBiYXNpYyBwcm9tcHQgZm9yIGFuIExMTS5cbiAqIEBhdWdtZW50cyBCYXNlUHJvbXB0VGVtcGxhdGVcbiAqIEBhdWdtZW50cyBQcm9tcHRUZW1wbGF0ZUlucHV0XG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBQcm9tcHRUZW1wbGF0ZSB9IGZyb20gXCJsYW5nY2hhaW4vcHJvbXB0c1wiO1xuICpcbiAqIGNvbnN0IHByb21wdCA9IG5ldyBQcm9tcHRUZW1wbGF0ZSh7XG4gKiAgIGlucHV0VmFyaWFibGVzOiBbXCJmb29cIl0sXG4gKiAgIHRlbXBsYXRlOiBcIlNheSB7Zm9vfVwiLFxuICogfSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFByb21wdFRlbXBsYXRlIGV4dGVuZHMgQmFzZVN0cmluZ1Byb21wdFRlbXBsYXRlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiUHJvbXB0VGVtcGxhdGVcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoaW5wdXQpIHtcbiAgICAgICAgc3VwZXIoaW5wdXQpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0ZW1wbGF0ZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0ZW1wbGF0ZUZvcm1hdFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJmLXN0cmluZ1wiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ2YWxpZGF0ZVRlbXBsYXRlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMsIGlucHV0KTtcbiAgICAgICAgaWYgKHRoaXMudmFsaWRhdGVUZW1wbGF0ZSkge1xuICAgICAgICAgICAgbGV0IHRvdGFsSW5wdXRWYXJpYWJsZXMgPSB0aGlzLmlucHV0VmFyaWFibGVzO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFydGlhbFZhcmlhYmxlcykge1xuICAgICAgICAgICAgICAgIHRvdGFsSW5wdXRWYXJpYWJsZXMgPSB0b3RhbElucHV0VmFyaWFibGVzLmNvbmNhdChPYmplY3Qua2V5cyh0aGlzLnBhcnRpYWxWYXJpYWJsZXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNoZWNrVmFsaWRUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzLnRlbXBsYXRlRm9ybWF0LCB0b3RhbElucHV0VmFyaWFibGVzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfZ2V0UHJvbXB0VHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwicHJvbXB0XCI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvcm1hdHMgdGhlIHByb21wdCB0ZW1wbGF0ZSB3aXRoIHRoZSBwcm92aWRlZCB2YWx1ZXMuXG4gICAgICogQHBhcmFtIHZhbHVlcyBUaGUgdmFsdWVzIHRvIGJlIHVzZWQgdG8gZm9ybWF0IHRoZSBwcm9tcHQgdGVtcGxhdGUuXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYSBzdHJpbmcgd2hpY2ggaXMgdGhlIGZvcm1hdHRlZCBwcm9tcHQuXG4gICAgICovXG4gICAgYXN5bmMgZm9ybWF0KHZhbHVlcykge1xuICAgICAgICBjb25zdCBhbGxWYWx1ZXMgPSBhd2FpdCB0aGlzLm1lcmdlUGFydGlhbEFuZFVzZXJWYXJpYWJsZXModmFsdWVzKTtcbiAgICAgICAgcmV0dXJuIHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIHRoaXMudGVtcGxhdGVGb3JtYXQsIGFsbFZhbHVlcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRha2UgZXhhbXBsZXMgaW4gbGlzdCBmb3JtYXQgd2l0aCBwcmVmaXggYW5kIHN1ZmZpeCB0byBjcmVhdGUgYSBwcm9tcHQuXG4gICAgICpcbiAgICAgKiBJbnRlbmRlZCB0byBiZSB1c2VkIGEgYSB3YXkgdG8gZHluYW1pY2FsbHkgY3JlYXRlIGEgcHJvbXB0IGZyb20gZXhhbXBsZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZXhhbXBsZXMgLSBMaXN0IG9mIGV4YW1wbGVzIHRvIHVzZSBpbiB0aGUgcHJvbXB0LlxuICAgICAqIEBwYXJhbSBzdWZmaXggLSBTdHJpbmcgdG8gZ28gYWZ0ZXIgdGhlIGxpc3Qgb2YgZXhhbXBsZXMuIFNob3VsZCBnZW5lcmFsbHkgc2V0IHVwIHRoZSB1c2VyJ3MgaW5wdXQuXG4gICAgICogQHBhcmFtIGlucHV0VmFyaWFibGVzIC0gQSBsaXN0IG9mIHZhcmlhYmxlIG5hbWVzIHRoZSBmaW5hbCBwcm9tcHQgdGVtcGxhdGUgd2lsbCBleHBlY3RcbiAgICAgKiBAcGFyYW0gZXhhbXBsZVNlcGFyYXRvciAtIFRoZSBzZXBhcmF0b3IgdG8gdXNlIGluIGJldHdlZW4gZXhhbXBsZXNcbiAgICAgKiBAcGFyYW0gcHJlZml4IC0gU3RyaW5nIHRoYXQgc2hvdWxkIGdvIGJlZm9yZSBhbnkgZXhhbXBsZXMuIEdlbmVyYWxseSBpbmNsdWRlcyBleGFtcGxlcy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBmaW5hbCBwcm9tcHQgdGVtcGxhdGUgZ2VuZXJhdGVkLlxuICAgICAqL1xuICAgIHN0YXRpYyBmcm9tRXhhbXBsZXMoZXhhbXBsZXMsIHN1ZmZpeCwgaW5wdXRWYXJpYWJsZXMsIGV4YW1wbGVTZXBhcmF0b3IgPSBcIlxcblxcblwiLCBwcmVmaXggPSBcIlwiKSB7XG4gICAgICAgIGNvbnN0IHRlbXBsYXRlID0gW3ByZWZpeCwgLi4uZXhhbXBsZXMsIHN1ZmZpeF0uam9pbihleGFtcGxlU2VwYXJhdG9yKTtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9tcHRUZW1wbGF0ZSh7XG4gICAgICAgICAgICBpbnB1dFZhcmlhYmxlcyxcbiAgICAgICAgICAgIHRlbXBsYXRlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9hZCBwcm9tcHQgdGVtcGxhdGUgZnJvbSBhIHRlbXBsYXRlIGYtc3RyaW5nXG4gICAgICovXG4gICAgc3RhdGljIGZyb21UZW1wbGF0ZSh0ZW1wbGF0ZSwgeyB0ZW1wbGF0ZUZvcm1hdCA9IFwiZi1zdHJpbmdcIiwgLi4ucmVzdCB9ID0ge30pIHtcbiAgICAgICAgY29uc3QgbmFtZXMgPSBuZXcgU2V0KCk7XG4gICAgICAgIHBhcnNlVGVtcGxhdGUodGVtcGxhdGUsIHRlbXBsYXRlRm9ybWF0KS5mb3JFYWNoKChub2RlKSA9PiB7XG4gICAgICAgICAgICBpZiAobm9kZS50eXBlID09PSBcInZhcmlhYmxlXCIpIHtcbiAgICAgICAgICAgICAgICBuYW1lcy5hZGQobm9kZS5uYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbXB0VGVtcGxhdGUoe1xuICAgICAgICAgICAgLy8gUmVseSBvbiBleHRyYWN0ZWQgdHlwZXNcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICBpbnB1dFZhcmlhYmxlczogWy4uLm5hbWVzXSxcbiAgICAgICAgICAgIHRlbXBsYXRlRm9ybWF0LFxuICAgICAgICAgICAgdGVtcGxhdGUsXG4gICAgICAgICAgICAuLi5yZXN0LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFydGlhbGx5IGFwcGxpZXMgdmFsdWVzIHRvIHRoZSBwcm9tcHQgdGVtcGxhdGUuXG4gICAgICogQHBhcmFtIHZhbHVlcyBUaGUgdmFsdWVzIHRvIGJlIHBhcnRpYWxseSBhcHBsaWVkIHRvIHRoZSBwcm9tcHQgdGVtcGxhdGUuXG4gICAgICogQHJldHVybnMgQSBuZXcgaW5zdGFuY2Ugb2YgUHJvbXB0VGVtcGxhdGUgd2l0aCB0aGUgcGFydGlhbGx5IGFwcGxpZWQgdmFsdWVzLlxuICAgICAqL1xuICAgIGFzeW5jIHBhcnRpYWwodmFsdWVzKSB7XG4gICAgICAgIGNvbnN0IG5ld0lucHV0VmFyaWFibGVzID0gdGhpcy5pbnB1dFZhcmlhYmxlcy5maWx0ZXIoKGl2KSA9PiAhKGl2IGluIHZhbHVlcykpO1xuICAgICAgICBjb25zdCBuZXdQYXJ0aWFsVmFyaWFibGVzID0ge1xuICAgICAgICAgICAgLi4uKHRoaXMucGFydGlhbFZhcmlhYmxlcyA/PyB7fSksXG4gICAgICAgICAgICAuLi52YWx1ZXMsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHByb21wdERpY3QgPSB7XG4gICAgICAgICAgICAuLi50aGlzLFxuICAgICAgICAgICAgaW5wdXRWYXJpYWJsZXM6IG5ld0lucHV0VmFyaWFibGVzLFxuICAgICAgICAgICAgcGFydGlhbFZhcmlhYmxlczogbmV3UGFydGlhbFZhcmlhYmxlcyxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9tcHRUZW1wbGF0ZShwcm9tcHREaWN0KTtcbiAgICB9XG4gICAgc2VyaWFsaXplKCkge1xuICAgICAgICBpZiAodGhpcy5vdXRwdXRQYXJzZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IHNlcmlhbGl6ZSBhIHByb21wdCB0ZW1wbGF0ZSB3aXRoIGFuIG91dHB1dCBwYXJzZXJcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIF90eXBlOiB0aGlzLl9nZXRQcm9tcHRUeXBlKCksXG4gICAgICAgICAgICBpbnB1dF92YXJpYWJsZXM6IHRoaXMuaW5wdXRWYXJpYWJsZXMsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogdGhpcy50ZW1wbGF0ZSxcbiAgICAgICAgICAgIHRlbXBsYXRlX2Zvcm1hdDogdGhpcy50ZW1wbGF0ZUZvcm1hdCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgc3RhdGljIGFzeW5jIGRlc2VyaWFsaXplKGRhdGEpIHtcbiAgICAgICAgaWYgKCFkYXRhLnRlbXBsYXRlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQcm9tcHQgdGVtcGxhdGUgbXVzdCBoYXZlIGEgdGVtcGxhdGVcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzID0gbmV3IFByb21wdFRlbXBsYXRlKHtcbiAgICAgICAgICAgIGlucHV0VmFyaWFibGVzOiBkYXRhLmlucHV0X3ZhcmlhYmxlcyxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBkYXRhLnRlbXBsYXRlLFxuICAgICAgICAgICAgdGVtcGxhdGVGb3JtYXQ6IGRhdGEudGVtcGxhdGVfZm9ybWF0LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiQmFzZVN0cmluZ1Byb21wdFRlbXBsYXRlIiwiY2hlY2tWYWxpZFRlbXBsYXRlIiwicGFyc2VUZW1wbGF0ZSIsInJlbmRlclRlbXBsYXRlIiwiUHJvbXB0VGVtcGxhdGUiLCJsY19uYW1lIiwiY29uc3RydWN0b3IiLCJpbnB1dCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJhc3NpZ24iLCJ2YWxpZGF0ZVRlbXBsYXRlIiwidG90YWxJbnB1dFZhcmlhYmxlcyIsImlucHV0VmFyaWFibGVzIiwicGFydGlhbFZhcmlhYmxlcyIsImNvbmNhdCIsImtleXMiLCJ0ZW1wbGF0ZSIsInRlbXBsYXRlRm9ybWF0IiwiX2dldFByb21wdFR5cGUiLCJmb3JtYXQiLCJ2YWx1ZXMiLCJhbGxWYWx1ZXMiLCJtZXJnZVBhcnRpYWxBbmRVc2VyVmFyaWFibGVzIiwiZnJvbUV4YW1wbGVzIiwiZXhhbXBsZXMiLCJzdWZmaXgiLCJleGFtcGxlU2VwYXJhdG9yIiwicHJlZml4Iiwiam9pbiIsImZyb21UZW1wbGF0ZSIsInJlc3QiLCJuYW1lcyIsIlNldCIsImZvckVhY2giLCJub2RlIiwidHlwZSIsImFkZCIsIm5hbWUiLCJwYXJ0aWFsIiwibmV3SW5wdXRWYXJpYWJsZXMiLCJmaWx0ZXIiLCJpdiIsIm5ld1BhcnRpYWxWYXJpYWJsZXMiLCJwcm9tcHREaWN0Iiwic2VyaWFsaXplIiwib3V0cHV0UGFyc2VyIiwidW5kZWZpbmVkIiwiRXJyb3IiLCJfdHlwZSIsImlucHV0X3ZhcmlhYmxlcyIsInRlbXBsYXRlX2Zvcm1hdCIsImRlc2VyaWFsaXplIiwiZGF0YSIsInJlcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/prompts/prompt.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/prompts/serde.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompts/serde.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9zZXJkZS5qcyIsIm1hcHBpbmdzIjoiO0FBQVUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1mb3JtLWJ1aWxkZXItdHV0b3JpYWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9zZXJkZS5qcz8wNDY0Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB7fTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/prompts/serde.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/prompts/string.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompts/string.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseStringPromptTemplate: () => (/* binding */ BaseStringPromptTemplate)\n/* harmony export */ });\n/* harmony import */ var _prompt_values_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../prompt_values.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompt_values.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/base.js\");\n// Default generic \"any\" values are for backwards compatibility.\n// Replace with \"string\" when we are comfortable with a breaking change.\n\n\n/**\n * Base class for string prompt templates. It extends the\n * BasePromptTemplate class and overrides the formatPromptValue method to\n * return a StringPromptValue.\n */ class BaseStringPromptTemplate extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BasePromptTemplate {\n    /**\n     * Formats the prompt given the input values and returns a formatted\n     * prompt value.\n     * @param values The input values to format the prompt.\n     * @returns A Promise that resolves to a formatted prompt value.\n     */ async formatPromptValue(values) {\n        const formattedPrompt = await this.format(values);\n        return new _prompt_values_js__WEBPACK_IMPORTED_MODULE_0__.StringPromptValue(formattedPrompt);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy9zdHJpbmcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsZ0VBQWdFO0FBQ2hFLHdFQUF3RTtBQUNmO0FBQ1Y7QUFDL0M7Ozs7Q0FJQyxHQUNNLE1BQU1FLGlDQUFpQ0Qsd0RBQWtCQTtJQUM1RDs7Ozs7S0FLQyxHQUNELE1BQU1FLGtCQUFrQkMsTUFBTSxFQUFFO1FBQzVCLE1BQU1DLGtCQUFrQixNQUFNLElBQUksQ0FBQ0MsTUFBTSxDQUFDRjtRQUMxQyxPQUFPLElBQUlKLGdFQUFpQkEsQ0FBQ0s7SUFDakM7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLWZvcm0tYnVpbGRlci10dXRvcmlhbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9wcm9tcHRzL3N0cmluZy5qcz8wZDFhIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIERlZmF1bHQgZ2VuZXJpYyBcImFueVwiIHZhbHVlcyBhcmUgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxuLy8gUmVwbGFjZSB3aXRoIFwic3RyaW5nXCIgd2hlbiB3ZSBhcmUgY29tZm9ydGFibGUgd2l0aCBhIGJyZWFraW5nIGNoYW5nZS5cbmltcG9ydCB7IFN0cmluZ1Byb21wdFZhbHVlLCB9IGZyb20gXCIuLi9wcm9tcHRfdmFsdWVzLmpzXCI7XG5pbXBvcnQgeyBCYXNlUHJvbXB0VGVtcGxhdGUgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIHN0cmluZyBwcm9tcHQgdGVtcGxhdGVzLiBJdCBleHRlbmRzIHRoZVxuICogQmFzZVByb21wdFRlbXBsYXRlIGNsYXNzIGFuZCBvdmVycmlkZXMgdGhlIGZvcm1hdFByb21wdFZhbHVlIG1ldGhvZCB0b1xuICogcmV0dXJuIGEgU3RyaW5nUHJvbXB0VmFsdWUuXG4gKi9cbmV4cG9ydCBjbGFzcyBCYXNlU3RyaW5nUHJvbXB0VGVtcGxhdGUgZXh0ZW5kcyBCYXNlUHJvbXB0VGVtcGxhdGUge1xuICAgIC8qKlxuICAgICAqIEZvcm1hdHMgdGhlIHByb21wdCBnaXZlbiB0aGUgaW5wdXQgdmFsdWVzIGFuZCByZXR1cm5zIGEgZm9ybWF0dGVkXG4gICAgICogcHJvbXB0IHZhbHVlLlxuICAgICAqIEBwYXJhbSB2YWx1ZXMgVGhlIGlucHV0IHZhbHVlcyB0byBmb3JtYXQgdGhlIHByb21wdC5cbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhIGZvcm1hdHRlZCBwcm9tcHQgdmFsdWUuXG4gICAgICovXG4gICAgYXN5bmMgZm9ybWF0UHJvbXB0VmFsdWUodmFsdWVzKSB7XG4gICAgICAgIGNvbnN0IGZvcm1hdHRlZFByb21wdCA9IGF3YWl0IHRoaXMuZm9ybWF0KHZhbHVlcyk7XG4gICAgICAgIHJldHVybiBuZXcgU3RyaW5nUHJvbXB0VmFsdWUoZm9ybWF0dGVkUHJvbXB0KTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiU3RyaW5nUHJvbXB0VmFsdWUiLCJCYXNlUHJvbXB0VGVtcGxhdGUiLCJCYXNlU3RyaW5nUHJvbXB0VGVtcGxhdGUiLCJmb3JtYXRQcm9tcHRWYWx1ZSIsInZhbHVlcyIsImZvcm1hdHRlZFByb21wdCIsImZvcm1hdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/prompts/string.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/prompts/template.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/prompts/template.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_FORMATTER_MAPPING: () => (/* binding */ DEFAULT_FORMATTER_MAPPING),\n/* harmony export */   DEFAULT_PARSER_MAPPING: () => (/* binding */ DEFAULT_PARSER_MAPPING),\n/* harmony export */   checkValidTemplate: () => (/* binding */ checkValidTemplate),\n/* harmony export */   interpolateFString: () => (/* binding */ interpolateFString),\n/* harmony export */   parseFString: () => (/* binding */ parseFString),\n/* harmony export */   parseTemplate: () => (/* binding */ parseTemplate),\n/* harmony export */   renderTemplate: () => (/* binding */ renderTemplate)\n/* harmony export */ });\nconst parseFString = (template)=>{\n    // Core logic replicated from internals of pythons built in Formatter class.\n    // https://github.com/python/cpython/blob/135ec7cefbaffd516b77362ad2b2ad1025af462e/Objects/stringlib/unicode_format.h#L700-L706\n    const chars = template.split(\"\");\n    const nodes = [];\n    const nextBracket = (bracket, start)=>{\n        for(let i = start; i < chars.length; i += 1){\n            if (bracket.includes(chars[i])) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    let i = 0;\n    while(i < chars.length){\n        if (chars[i] === \"{\" && i + 1 < chars.length && chars[i + 1] === \"{\") {\n            nodes.push({\n                type: \"literal\",\n                text: \"{\"\n            });\n            i += 2;\n        } else if (chars[i] === \"}\" && i + 1 < chars.length && chars[i + 1] === \"}\") {\n            nodes.push({\n                type: \"literal\",\n                text: \"}\"\n            });\n            i += 2;\n        } else if (chars[i] === \"{\") {\n            const j = nextBracket(\"}\", i);\n            if (j < 0) {\n                throw new Error(\"Unclosed '{' in template.\");\n            }\n            nodes.push({\n                type: \"variable\",\n                name: chars.slice(i + 1, j).join(\"\")\n            });\n            i = j + 1;\n        } else if (chars[i] === \"}\") {\n            throw new Error(\"Single '}' in template.\");\n        } else {\n            const next = nextBracket(\"{}\", i);\n            const text = (next < 0 ? chars.slice(i) : chars.slice(i, next)).join(\"\");\n            nodes.push({\n                type: \"literal\",\n                text\n            });\n            i = next < 0 ? chars.length : next;\n        }\n    }\n    return nodes;\n};\nconst interpolateFString = (template, values)=>parseFString(template).reduce((res, node)=>{\n        if (node.type === \"variable\") {\n            if (node.name in values) {\n                return res + values[node.name];\n            }\n            throw new Error(`Missing value for input ${node.name}`);\n        }\n        return res + node.text;\n    }, \"\");\nconst DEFAULT_FORMATTER_MAPPING = {\n    \"f-string\": interpolateFString\n};\nconst DEFAULT_PARSER_MAPPING = {\n    \"f-string\": parseFString\n};\nconst renderTemplate = (template, templateFormat, inputValues)=>DEFAULT_FORMATTER_MAPPING[templateFormat](template, inputValues);\nconst parseTemplate = (template, templateFormat)=>DEFAULT_PARSER_MAPPING[templateFormat](template);\nconst checkValidTemplate = (template, templateFormat, inputVariables)=>{\n    if (!(templateFormat in DEFAULT_FORMATTER_MAPPING)) {\n        const validFormats = Object.keys(DEFAULT_FORMATTER_MAPPING);\n        throw new Error(`Invalid template format. Got \\`${templateFormat}\\`;\n                         should be one of ${validFormats}`);\n    }\n    try {\n        const dummyInputs = inputVariables.reduce((acc, v)=>{\n            acc[v] = \"foo\";\n            return acc;\n        }, {});\n        if (Array.isArray(template)) {\n            template.forEach((message)=>{\n                if (message.type === \"text\") {\n                    renderTemplate(message.text, templateFormat, dummyInputs);\n                } else if (message.type === \"image_url\") {\n                    if (typeof message.image_url === \"string\") {\n                        renderTemplate(message.image_url, templateFormat, dummyInputs);\n                    } else {\n                        const imageUrl = message.image_url.url;\n                        renderTemplate(imageUrl, templateFormat, dummyInputs);\n                    }\n                } else {\n                    throw new Error(`Invalid message template received. ${JSON.stringify(message, null, 2)}`);\n                }\n            });\n        } else {\n            renderTemplate(template, templateFormat, dummyInputs);\n        }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    } catch (e) {\n        throw new Error(`Invalid prompt schema: ${e.message}`);\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcHJvbXB0cy90ZW1wbGF0ZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQU8sTUFBTUEsZUFBZSxDQUFDQztJQUN6Qiw0RUFBNEU7SUFDNUUsK0hBQStIO0lBQy9ILE1BQU1DLFFBQVFELFNBQVNFLEtBQUssQ0FBQztJQUM3QixNQUFNQyxRQUFRLEVBQUU7SUFDaEIsTUFBTUMsY0FBYyxDQUFDQyxTQUFTQztRQUMxQixJQUFLLElBQUlDLElBQUlELE9BQU9DLElBQUlOLE1BQU1PLE1BQU0sRUFBRUQsS0FBSyxFQUFHO1lBQzFDLElBQUlGLFFBQVFJLFFBQVEsQ0FBQ1IsS0FBSyxDQUFDTSxFQUFFLEdBQUc7Z0JBQzVCLE9BQU9BO1lBQ1g7UUFDSjtRQUNBLE9BQU8sQ0FBQztJQUNaO0lBQ0EsSUFBSUEsSUFBSTtJQUNSLE1BQU9BLElBQUlOLE1BQU1PLE1BQU0sQ0FBRTtRQUNyQixJQUFJUCxLQUFLLENBQUNNLEVBQUUsS0FBSyxPQUFPQSxJQUFJLElBQUlOLE1BQU1PLE1BQU0sSUFBSVAsS0FBSyxDQUFDTSxJQUFJLEVBQUUsS0FBSyxLQUFLO1lBQ2xFSixNQUFNTyxJQUFJLENBQUM7Z0JBQUVDLE1BQU07Z0JBQVdDLE1BQU07WUFBSTtZQUN4Q0wsS0FBSztRQUNULE9BQ0ssSUFBSU4sS0FBSyxDQUFDTSxFQUFFLEtBQUssT0FDbEJBLElBQUksSUFBSU4sTUFBTU8sTUFBTSxJQUNwQlAsS0FBSyxDQUFDTSxJQUFJLEVBQUUsS0FBSyxLQUFLO1lBQ3RCSixNQUFNTyxJQUFJLENBQUM7Z0JBQUVDLE1BQU07Z0JBQVdDLE1BQU07WUFBSTtZQUN4Q0wsS0FBSztRQUNULE9BQ0ssSUFBSU4sS0FBSyxDQUFDTSxFQUFFLEtBQUssS0FBSztZQUN2QixNQUFNTSxJQUFJVCxZQUFZLEtBQUtHO1lBQzNCLElBQUlNLElBQUksR0FBRztnQkFDUCxNQUFNLElBQUlDLE1BQU07WUFDcEI7WUFDQVgs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T1ksR0FBRztRQUNOLE1BQU0sSUFBSWpDLE1BQU0sQ0FBQyx1QkFBdUIsRUFBRWlDLEVBQUVOLE9BQU8sQ0FBQyxDQUFDO0lBQ3pEO0FBQ0osRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLWZvcm0tYnVpbGRlci10dXRvcmlhbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9wcm9tcHRzL3RlbXBsYXRlLmpzPzZjNjIiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHBhcnNlRlN0cmluZyA9ICh0ZW1wbGF0ZSkgPT4ge1xuICAgIC8vIENvcmUgbG9naWMgcmVwbGljYXRlZCBmcm9tIGludGVybmFscyBvZiBweXRob25zIGJ1aWx0IGluIEZvcm1hdHRlciBjbGFzcy5cbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vcHl0aG9uL2NweXRob24vYmxvYi8xMzVlYzdjZWZiYWZmZDUxNmI3NzM2MmFkMmIyYWQxMDI1YWY0NjJlL09iamVjdHMvc3RyaW5nbGliL3VuaWNvZGVfZm9ybWF0LmgjTDcwMC1MNzA2XG4gICAgY29uc3QgY2hhcnMgPSB0ZW1wbGF0ZS5zcGxpdChcIlwiKTtcbiAgICBjb25zdCBub2RlcyA9IFtdO1xuICAgIGNvbnN0IG5leHRCcmFja2V0ID0gKGJyYWNrZXQsIHN0YXJ0KSA9PiB7XG4gICAgICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IGNoYXJzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBpZiAoYnJhY2tldC5pbmNsdWRlcyhjaGFyc1tpXSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgfTtcbiAgICBsZXQgaSA9IDA7XG4gICAgd2hpbGUgKGkgPCBjaGFycy5sZW5ndGgpIHtcbiAgICAgICAgaWYgKGNoYXJzW2ldID09PSBcIntcIiAmJiBpICsgMSA8IGNoYXJzLmxlbmd0aCAmJiBjaGFyc1tpICsgMV0gPT09IFwie1wiKSB7XG4gICAgICAgICAgICBub2Rlcy5wdXNoKHsgdHlwZTogXCJsaXRlcmFsXCIsIHRleHQ6IFwie1wiIH0pO1xuICAgICAgICAgICAgaSArPSAyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNoYXJzW2ldID09PSBcIn1cIiAmJlxuICAgICAgICAgICAgaSArIDEgPCBjaGFycy5sZW5ndGggJiZcbiAgICAgICAgICAgIGNoYXJzW2kgKyAxXSA9PT0gXCJ9XCIpIHtcbiAgICAgICAgICAgIG5vZGVzLnB1c2goeyB0eXBlOiBcImxpdGVyYWxcIiwgdGV4dDogXCJ9XCIgfSk7XG4gICAgICAgICAgICBpICs9IDI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY2hhcnNbaV0gPT09IFwie1wiKSB7XG4gICAgICAgICAgICBjb25zdCBqID0gbmV4dEJyYWNrZXQoXCJ9XCIsIGkpO1xuICAgICAgICAgICAgaWYgKGogPCAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5jbG9zZWQgJ3snIGluIHRlbXBsYXRlLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG5vZGVzLnB1c2goe1xuICAgICAgICAgICAgICAgIHR5cGU6IFwidmFyaWFibGVcIixcbiAgICAgICAgICAgICAgICBuYW1lOiBjaGFycy5zbGljZShpICsgMSwgaikuam9pbihcIlwiKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaSA9IGogKyAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNoYXJzW2ldID09PSBcIn1cIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2luZ2xlICd9JyBpbiB0ZW1wbGF0ZS5cIik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBuZXh0ID0gbmV4dEJyYWNrZXQoXCJ7fVwiLCBpKTtcbiAgICAgICAgICAgIGNvbnN0IHRleHQgPSAobmV4dCA8IDAgPyBjaGFycy5zbGljZShpKSA6IGNoYXJzLnNsaWNlKGksIG5leHQpKS5qb2luKFwiXCIpO1xuICAgICAgICAgICAgbm9kZXMucHVzaCh7IHR5cGU6IFwibGl0ZXJhbFwiLCB0ZXh0IH0pO1xuICAgICAgICAgICAgaSA9IG5leHQgPCAwID8gY2hhcnMubGVuZ3RoIDogbmV4dDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbm9kZXM7XG59O1xuZXhwb3J0IGNvbnN0IGludGVycG9sYXRlRlN0cmluZyA9ICh0ZW1wbGF0ZSwgdmFsdWVzKSA9PiBwYXJzZUZTdHJpbmcodGVtcGxhdGUpLnJlZHVjZSgocmVzLCBub2RlKSA9PiB7XG4gICAgaWYgKG5vZGUudHlwZSA9PT0gXCJ2YXJpYWJsZVwiKSB7XG4gICAgICAgIGlmIChub2RlLm5hbWUgaW4gdmFsdWVzKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzICsgdmFsdWVzW25vZGUubmFtZV07XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIHZhbHVlIGZvciBpbnB1dCAke25vZGUubmFtZX1gKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcyArIG5vZGUudGV4dDtcbn0sIFwiXCIpO1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfRk9STUFUVEVSX01BUFBJTkcgPSB7XG4gICAgXCJmLXN0cmluZ1wiOiBpbnRlcnBvbGF0ZUZTdHJpbmcsXG59O1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfUEFSU0VSX01BUFBJTkcgPSB7XG4gICAgXCJmLXN0cmluZ1wiOiBwYXJzZUZTdHJpbmcsXG59O1xuZXhwb3J0IGNvbnN0IHJlbmRlclRlbXBsYXRlID0gKHRlbXBsYXRlLCB0ZW1wbGF0ZUZvcm1hdCwgaW5wdXRWYWx1ZXMpID0+IERFRkFVTFRfRk9STUFUVEVSX01BUFBJTkdbdGVtcGxhdGVGb3JtYXRdKHRlbXBsYXRlLCBpbnB1dFZhbHVlcyk7XG5leHBvcnQgY29uc3QgcGFyc2VUZW1wbGF0ZSA9ICh0ZW1wbGF0ZSwgdGVtcGxhdGVGb3JtYXQpID0+IERFRkFVTFRfUEFSU0VSX01BUFBJTkdbdGVtcGxhdGVGb3JtYXRdKHRlbXBsYXRlKTtcbmV4cG9ydCBjb25zdCBjaGVja1ZhbGlkVGVtcGxhdGUgPSAodGVtcGxhdGUsIHRlbXBsYXRlRm9ybWF0LCBpbnB1dFZhcmlhYmxlcykgPT4ge1xuICAgIGlmICghKHRlbXBsYXRlRm9ybWF0IGluIERFRkFVTFRfRk9STUFUVEVSX01BUFBJTkcpKSB7XG4gICAgICAgIGNvbnN0IHZhbGlkRm9ybWF0cyA9IE9iamVjdC5rZXlzKERFRkFVTFRfRk9STUFUVEVSX01BUFBJTkcpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgdGVtcGxhdGUgZm9ybWF0LiBHb3QgXFxgJHt0ZW1wbGF0ZUZvcm1hdH1cXGA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgc2hvdWxkIGJlIG9uZSBvZiAke3ZhbGlkRm9ybWF0c31gKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZHVtbXlJbnB1dHMgPSBpbnB1dFZhcmlhYmxlcy5yZWR1Y2UoKGFjYywgdikgPT4ge1xuICAgICAgICAgICAgYWNjW3ZdID0gXCJmb29cIjtcbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH0sIHt9KTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGVtcGxhdGUpKSB7XG4gICAgICAgICAgICB0ZW1wbGF0ZS5mb3JFYWNoKChtZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2UudHlwZSA9PT0gXCJ0ZXh0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyVGVtcGxhdGUobWVzc2FnZS50ZXh0LCB0ZW1wbGF0ZUZvcm1hdCwgZHVtbXlJbnB1dHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChtZXNzYWdlLnR5cGUgPT09IFwiaW1hZ2VfdXJsXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXNzYWdlLmltYWdlX3VybCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyVGVtcGxhdGUobWVzc2FnZS5pbWFnZV91cmwsIHRlbXBsYXRlRm9ybWF0LCBkdW1teUlucHV0cyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbWFnZVVybCA9IG1lc3NhZ2UuaW1hZ2VfdXJsLnVybDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlclRlbXBsYXRlKGltYWdlVXJsLCB0ZW1wbGF0ZUZvcm1hdCwgZHVtbXlJbnB1dHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgbWVzc2FnZSB0ZW1wbGF0ZSByZWNlaXZlZC4gJHtKU09OLnN0cmluZ2lmeShtZXNzYWdlLCBudWxsLCAyKX1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB0ZW1wbGF0ZUZvcm1hdCwgZHVtbXlJbnB1dHMpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBwcm9tcHQgc2NoZW1hOiAke2UubWVzc2FnZX1gKTtcbiAgICB9XG59O1xuIl0sIm5hbWVzIjpbInBhcnNlRlN0cmluZyIsInRlbXBsYXRlIiwiY2hhcnMiLCJzcGxpdCIsIm5vZGVzIiwibmV4dEJyYWNrZXQiLCJicmFja2V0Iiwic3RhcnQiLCJpIiwibGVuZ3RoIiwiaW5jbHVkZXMiLCJwdXNoIiwidHlwZSIsInRleHQiLCJqIiwiRXJyb3IiLCJuYW1lIiwic2xpY2UiLCJqb2luIiwibmV4dCIsImludGVycG9sYXRlRlN0cmluZyIsInZhbHVlcyIsInJlZHVjZSIsInJlcyIsIm5vZGUiLCJERUZBVUxUX0ZPUk1BVFRFUl9NQVBQSU5HIiwiREVGQVVMVF9QQVJTRVJfTUFQUElORyIsInJlbmRlclRlbXBsYXRlIiwidGVtcGxhdGVGb3JtYXQiLCJpbnB1dFZhbHVlcyIsInBhcnNlVGVtcGxhdGUiLCJjaGVja1ZhbGlkVGVtcGxhdGUiLCJpbnB1dFZhcmlhYmxlcyIsInZhbGlkRm9ybWF0cyIsIk9iamVjdCIsImtleXMiLCJkdW1teUlucHV0cyIsImFjYyIsInYiLCJBcnJheSIsImlzQXJyYXkiLCJmb3JFYWNoIiwibWVzc2FnZSIsImltYWdlX3VybCIsImltYWdlVXJsIiwidXJsIiwiSlNPTiIsInN0cmluZ2lmeSIsImUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/prompts/template.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/base.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/base.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Runnable: () => (/* binding */ Runnable),\n/* harmony export */   RunnableAssign: () => (/* binding */ RunnableAssign),\n/* harmony export */   RunnableBinding: () => (/* binding */ RunnableBinding),\n/* harmony export */   RunnableEach: () => (/* binding */ RunnableEach),\n/* harmony export */   RunnableLambda: () => (/* binding */ RunnableLambda),\n/* harmony export */   RunnableMap: () => (/* binding */ RunnableMap),\n/* harmony export */   RunnableParallel: () => (/* binding */ RunnableParallel),\n/* harmony export */   RunnablePick: () => (/* binding */ RunnablePick),\n/* harmony export */   RunnableRetry: () => (/* binding */ RunnableRetry),\n/* harmony export */   RunnableSequence: () => (/* binding */ RunnableSequence),\n/* harmony export */   RunnableWithFallbacks: () => (/* binding */ RunnableWithFallbacks),\n/* harmony export */   _coerceToDict: () => (/* binding */ _coerceToDict),\n/* harmony export */   _coerceToRunnable: () => (/* binding */ _coerceToRunnable)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/lib/index.mjs\");\n/* harmony import */ var p_retry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! p-retry */ \"(rsc)/./node_modules/p-retry/index.js\");\n/* harmony import */ var _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../callbacks/manager.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/manager.js\");\n/* harmony import */ var _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../tracers/log_stream.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/log_stream.js\");\n/* harmony import */ var _load_serializable_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../load/serializable.js */ \"(rsc)/./node_modules/@langchain/core/dist/load/serializable.js\");\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/stream.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/stream.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./config.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/config.js\");\n/* harmony import */ var _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/async_caller.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/async_caller.js\");\n/* harmony import */ var _tracers_root_listener_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../tracers/root_listener.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/root_listener.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./utils.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/utils.js\");\n/* harmony import */ var _singletons_index_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../singletons/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/singletons/index.js\");\n/* harmony import */ var _graph_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./graph.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/graph.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _coerceToDict(value, defaultKey) {\n    return value && !Array.isArray(value) && // eslint-disable-next-line no-instanceof/no-instanceof\n    !(value instanceof Date) && typeof value === \"object\" ? value : {\n        [defaultKey]: value\n    };\n}\n/**\n * A Runnable is a generic unit of work that can be invoked, batched, streamed, and/or\n * transformed.\n */ class Runnable extends _load_serializable_js__WEBPACK_IMPORTED_MODULE_3__.Serializable {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"lc_runnable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n    }\n    getName(suffix) {\n        const name = // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.name ?? this.constructor.lc_name() ?? this.constructor.name;\n        return suffix ? `${name}${suffix}` : name;\n    }\n    /**\n     * Bind arguments to a Runnable, returning a new Runnable.\n     * @param kwargs\n     * @returns A new RunnableBinding that, when invoked, will apply the bound args.\n     */ bind(kwargs) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableBinding({\n            bound: this,\n            kwargs,\n            config: {}\n        });\n    }\n    /**\n     * Return a new Runnable that maps a list of inputs to a list of outputs,\n     * by calling invoke() with each input.\n     */ map() {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableEach({\n            bound: this\n        });\n    }\n    /**\n     * Add retry logic to an existing runnable.\n     * @param kwargs\n     * @returns A new RunnableRetry that, when invoked, will retry according to the parameters.\n     */ withRetry(fields) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableRetry({\n            bound: this,\n            kwargs: {},\n            config: {},\n            maxAttemptNumber: fields?.stopAfterAttempt,\n            ...fields\n        });\n    }\n    /**\n     * Bind config to a Runnable, returning a new Runnable.\n     * @param config New configuration parameters to attach to the new runnable.\n     * @returns A new RunnableBinding with a config matching what's passed.\n     */ withConfig(config) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableBinding({\n            bound: this,\n            config,\n            kwargs: {}\n        });\n    }\n    /**\n     * Create a new runnable from the current one that will try invoking\n     * other passed fallback runnables if the initial invocation fails.\n     * @param fields.fallbacks Other runnables to call if the runnable errors.\n     * @returns A new RunnableWithFallbacks.\n     */ withFallbacks(fields) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableWithFallbacks({\n            runnable: this,\n            fallbacks: fields.fallbacks\n        });\n    }\n    _getOptionsList(options, length = 0) {\n        if (Array.isArray(options)) {\n            if (options.length !== length) {\n                throw new Error(`Passed \"options\" must be an array with the same length as the inputs, but got ${options.length} options for ${length} inputs`);\n            }\n            return options.map(_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig);\n        }\n        return Array.from({\n            length\n        }, ()=>(0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options));\n    }\n    async batch(inputs, options, batchOptions) {\n        const configList = this._getOptionsList(options ?? {}, inputs.length);\n        const maxConcurrency = configList[0]?.maxConcurrency ?? batchOptions?.maxConcurrency;\n        const caller = new _utils_async_caller_js__WEBPACK_IMPORTED_MODULE_6__.AsyncCaller({\n            maxConcurrency,\n            onFailedAttempt: (e)=>{\n                throw e;\n            }\n        });\n        const batchCalls = inputs.map((input, i)=>caller.call(async ()=>{\n                try {\n                    const result = await this.invoke(input, configList[i]);\n                    return result;\n                } catch (e) {\n                    if (batchOptions?.returnExceptions) {\n                        return e;\n                    }\n                    throw e;\n                }\n            }));\n        return Promise.all(batchCalls);\n    }\n    /**\n     * Default streaming implementation.\n     * Subclasses should override this method if they support streaming output.\n     * @param input\n     * @param options\n     */ async *_streamIterator(input, options) {\n        yield this.invoke(input, options);\n    }\n    /**\n     * Stream output in chunks.\n     * @param input\n     * @param options\n     * @returns A readable stream that is also an iterable.\n     */ async stream(input, options) {\n        // Buffer the first streamed chunk to allow for initial errors\n        // to surface immediately.\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.AsyncGeneratorWithSetup(this._streamIterator(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options)));\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n    _separateRunnableConfigFromCallOptions(options = {}) {\n        const runnableConfig = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)({\n            callbacks: options.callbacks,\n            tags: options.tags,\n            metadata: options.metadata,\n            runName: options.runName,\n            configurable: options.configurable,\n            recursionLimit: options.recursionLimit,\n            maxConcurrency: options.maxConcurrency\n        });\n        const callOptions = {\n            ...options\n        };\n        delete callOptions.callbacks;\n        delete callOptions.tags;\n        delete callOptions.metadata;\n        delete callOptions.runName;\n        delete callOptions.configurable;\n        delete callOptions.recursionLimit;\n        delete callOptions.maxConcurrency;\n        return [\n            runnableConfig,\n            callOptions\n        ];\n    }\n    async _callWithConfig(func, input, options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.getCallbackManagerForConfig)(config);\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), undefined, config?.runType, undefined, undefined, config?.runName ?? this.getName());\n        let output;\n        try {\n            output = await func.call(this, input, config, runManager);\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(_coerceToDict(output, \"output\"));\n        return output;\n    }\n    /**\n     * Internal method that handles batching and configuration for a runnable\n     * It takes a function, input values, and optional configuration, and\n     * returns a promise that resolves to the output values.\n     * @param func The function to be executed for each input value.\n     * @param input The input values to be processed.\n     * @param config Optional configuration for the function execution.\n     * @returns A promise that resolves to the output values.\n     */ async _batchWithConfig(func, inputs, options, batchOptions) {\n        const optionsList = this._getOptionsList(options ?? {}, inputs.length);\n        const callbackManagers = await Promise.all(optionsList.map(_config_js__WEBPACK_IMPORTED_MODULE_5__.getCallbackManagerForConfig));\n        const runManagers = await Promise.all(callbackManagers.map((callbackManager, i)=>callbackManager?.handleChainStart(this.toJSON(), _coerceToDict(inputs[i], \"input\"), undefined, optionsList[i].runType, undefined, undefined, optionsList[i].runName ?? this.getName())));\n        let outputs;\n        try {\n            outputs = await func.call(this, inputs, optionsList, runManagers, batchOptions);\n        } catch (e) {\n            await Promise.all(runManagers.map((runManager)=>runManager?.handleChainError(e)));\n            throw e;\n        }\n        await Promise.all(runManagers.map((runManager)=>runManager?.handleChainEnd(_coerceToDict(outputs, \"output\"))));\n        return outputs;\n    }\n    /**\n     * Helper method to transform an Iterator of Input values into an Iterator of\n     * Output values, with callbacks.\n     * Use this to implement `stream()` or `transform()` in Runnable subclasses.\n     */ async *_transformStreamWithConfig(inputGenerator, transformer, options) {\n        let finalInput;\n        let finalInputSupported = true;\n        let finalOutput;\n        let finalOutputSupported = true;\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.getCallbackManagerForConfig)(config);\n        async function* wrapInputForTracing() {\n            for await (const chunk of inputGenerator){\n                if (finalInputSupported) {\n                    if (finalInput === undefined) {\n                        finalInput = chunk;\n                    } else {\n                        try {\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            finalInput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.concat)(finalInput, chunk);\n                        } catch  {\n                            finalInput = undefined;\n                            finalInputSupported = false;\n                        }\n                    }\n                }\n                yield chunk;\n            }\n        }\n        let runManager;\n        try {\n            const pipe = await (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.pipeGeneratorWithSetup)(transformer.bind(this), wrapInputForTracing(), async ()=>callbackManager_?.handleChainStart(this.toJSON(), {\n                    input: \"\"\n                }, undefined, config?.runType, undefined, undefined, config?.runName ?? this.getName()), config);\n            runManager = pipe.setup;\n            const isLogStreamHandler = (handler)=>handler.name === \"log_stream_tracer\";\n            const streamLogHandler = runManager?.handlers.find(isLogStreamHandler);\n            let iterator = pipe.output;\n            if (streamLogHandler !== undefined && runManager !== undefined) {\n                iterator = await streamLogHandler.tapOutputIterable(runManager.runId, pipe.output);\n            }\n            for await (const chunk of iterator){\n                yield chunk;\n                if (finalOutputSupported) {\n                    if (finalOutput === undefined) {\n                        finalOutput = chunk;\n                    } else {\n                        try {\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            finalOutput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.concat)(finalOutput, chunk);\n                        } catch  {\n                            finalOutput = undefined;\n                            finalOutputSupported = false;\n                        }\n                    }\n                }\n            }\n        } catch (e) {\n            await runManager?.handleChainError(e, undefined, undefined, undefined, {\n                inputs: _coerceToDict(finalInput, \"input\")\n            });\n            throw e;\n        }\n        await runManager?.handleChainEnd(finalOutput ?? {}, undefined, undefined, undefined, {\n            inputs: _coerceToDict(finalInput, \"input\")\n        });\n    }\n    getGraph(_) {\n        const graph = new _graph_js__WEBPACK_IMPORTED_MODULE_10__.Graph();\n        // TODO: Add input schema for runnables\n        const inputNode = graph.addNode({\n            name: `${this.getName()}Input`,\n            schema: zod__WEBPACK_IMPORTED_MODULE_11__.z.any()\n        });\n        const runnableNode = graph.addNode(this);\n        // TODO: Add output schemas for runnables\n        const outputNode = graph.addNode({\n            name: `${this.getName()}Output`,\n            schema: zod__WEBPACK_IMPORTED_MODULE_11__.z.any()\n        });\n        graph.addEdge(inputNode, runnableNode);\n        graph.addEdge(runnableNode, outputNode);\n        return graph;\n    }\n    /**\n     * Create a new runnable sequence that runs each individual runnable in series,\n     * piping the output of one runnable into another runnable or runnable-like.\n     * @param coerceable A runnable, function, or object whose values are functions or runnables.\n     * @returns A new runnable sequence.\n     */ pipe(coerceable) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableSequence({\n            first: this,\n            last: _coerceToRunnable(coerceable)\n        });\n    }\n    /**\n     * Pick keys from the dict output of this runnable. Returns a new runnable.\n     */ pick(keys) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return this.pipe(new RunnablePick(keys));\n    }\n    /**\n     * Assigns new fields to the dict output of this runnable. Returns a new runnable.\n     */ assign(mapping) {\n        return this.pipe(// eslint-disable-next-line @typescript-eslint/no-use-before-define\n        new RunnableAssign(// eslint-disable-next-line @typescript-eslint/no-use-before-define\n        new RunnableMap({\n            steps: mapping\n        })));\n    }\n    /**\n     * Default implementation of transform, which buffers input and then calls stream.\n     * Subclasses should override this method if they can start producing output while\n     * input is still being generated.\n     * @param generator\n     * @param options\n     */ async *transform(generator, options) {\n        let finalChunk;\n        for await (const chunk of generator){\n            if (finalChunk === undefined) {\n                finalChunk = chunk;\n            } else {\n                // Make a best effort to gather, for any type that supports concat.\n                // This method should throw an error if gathering fails.\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                finalChunk = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.concat)(finalChunk, chunk);\n            }\n        }\n        yield* this._streamIterator(finalChunk, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options));\n    }\n    /**\n     * Stream all output from a runnable, as reported to the callback system.\n     * This includes all inner runs of LLMs, Retrievers, Tools, etc.\n     * Output is streamed as Log objects, which include a list of\n     * jsonpatch ops that describe how the state of the run has changed in each\n     * step, and the final state of the run.\n     * The jsonpatch ops can be applied in order to construct state.\n     * @param input\n     * @param options\n     * @param streamOptions\n     */ async *streamLog(input, options, streamOptions) {\n        const logStreamCallbackHandler = new _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__.LogStreamCallbackHandler({\n            ...streamOptions,\n            autoClose: false,\n            _schemaFormat: \"original\"\n        });\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options);\n        yield* this._streamLog(input, logStreamCallbackHandler, config);\n    }\n    async *_streamLog(input, logStreamCallbackHandler, config) {\n        const { callbacks } = config;\n        if (callbacks === undefined) {\n            // eslint-disable-next-line no-param-reassign\n            config.callbacks = [\n                logStreamCallbackHandler\n            ];\n        } else if (Array.isArray(callbacks)) {\n            // eslint-disable-next-line no-param-reassign\n            config.callbacks = callbacks.concat([\n                logStreamCallbackHandler\n            ]);\n        } else {\n            const copiedCallbacks = callbacks.copy();\n            copiedCallbacks.inheritableHandlers.push(logStreamCallbackHandler);\n            // eslint-disable-next-line no-param-reassign\n            config.callbacks = copiedCallbacks;\n        }\n        const runnableStreamPromise = this.stream(input, config);\n        async function consumeRunnableStream() {\n            try {\n                const runnableStream = await runnableStreamPromise;\n                for await (const chunk of runnableStream){\n                    const patch = new _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__.RunLogPatch({\n                        ops: [\n                            {\n                                op: \"add\",\n                                path: \"/streamed_output/-\",\n                                value: chunk\n                            }\n                        ]\n                    });\n                    await logStreamCallbackHandler.writer.write(patch);\n                }\n            } finally{\n                await logStreamCallbackHandler.writer.close();\n            }\n        }\n        const runnableStreamConsumePromise = consumeRunnableStream();\n        try {\n            for await (const log of logStreamCallbackHandler){\n                yield log;\n            }\n        } finally{\n            await runnableStreamConsumePromise;\n        }\n    }\n    /**\n     * Generate a stream of events emitted by the internal steps of the runnable.\n     *\n     * Use to create an iterator over StreamEvents that provide real-time information\n     * about the progress of the runnable, including StreamEvents from intermediate\n     * results.\n     *\n     * A StreamEvent is a dictionary with the following schema:\n     *\n     * - `event`: string - Event names are of the format: on_[runnable_type]_(start|stream|end).\n     * - `name`: string - The name of the runnable that generated the event.\n     * - `run_id`: string - Randomly generated ID associated with the given execution of\n     *   the runnable that emitted the event. A child runnable that gets invoked as part of the execution of a\n     *   parent runnable is assigned its own unique ID.\n     * - `tags`: string[] - The tags of the runnable that generated the event.\n     * - `metadata`: Record<string, any> - The metadata of the runnable that generated the event.\n     * - `data`: Record<string, any>\n     *\n     * Below is a table that illustrates some events that might be emitted by various\n     * chains. Metadata fields have been omitted from the table for brevity.\n     * Chain definitions have been included after the table.\n     *\n     * | event                | name             | chunk                              | input                                         | output                                          |\n     * |----------------------|------------------|------------------------------------|-----------------------------------------------|-------------------------------------------------|\n     * | on_llm_start         | [model name]     |                                    | {'input': 'hello'}                            |                                                 |\n     * | on_llm_stream        | [model name]     | 'Hello' OR AIMessageChunk(\"hello\") |                                               |                                                 |\n     * | on_llm_end           | [model name]     |                                    | 'Hello human!'                                |\n     * | on_chain_start       | format_docs      |                                    |                                               |                                                 |\n     * | on_chain_stream      | format_docs      | \"hello world!, goodbye world!\"     |                                               |                                                 |\n     * | on_chain_end         | format_docs      |                                    | [Document(...)]                               | \"hello world!, goodbye world!\"                  |\n     * | on_tool_start        | some_tool        |                                    | {\"x\": 1, \"y\": \"2\"}                            |                                                 |\n     * | on_tool_stream       | some_tool        |   {\"x\": 1, \"y\": \"2\"}               |                                               |                                                 |\n     * | on_tool_end          | some_tool        |                                    |                                               | {\"x\": 1, \"y\": \"2\"}                              |\n     * | on_retriever_start   | [retriever name] |                                    | {\"query\": \"hello\"}                            |                                                 |\n     * | on_retriever_chunk   | [retriever name] |  {documents: [...]}                |                                               |                                                 |\n     * | on_retriever_end     | [retriever name] |                                    | {\"query\": \"hello\"}                            | {documents: [...]}                              |\n     * | on_prompt_start      | [template_name]  |                                    | {\"question\": \"hello\"}                         |                                                 |\n     * | on_prompt_end        | [template_name]  |                                    | {\"question\": \"hello\"}                         | ChatPromptValue(messages: [SystemMessage, ...]) |\n     */ async *streamEvents(input, options, streamOptions) {\n        if (options.version !== \"v1\") {\n            throw new Error(`Only version \"v1\" of the events schema is currently supported.`);\n        }\n        let runLog;\n        let hasEncounteredStartEvent = false;\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options);\n        const rootTags = config.tags ?? [];\n        const rootMetadata = config.metadata ?? {};\n        const rootName = config.runName ?? this.getName();\n        const logStreamCallbackHandler = new _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__.LogStreamCallbackHandler({\n            ...streamOptions,\n            autoClose: false,\n            _schemaFormat: \"streaming_events\"\n        });\n        const rootEventFilter = new _utils_js__WEBPACK_IMPORTED_MODULE_8__._RootEventFilter({\n            ...streamOptions\n        });\n        const logStream = this._streamLog(input, logStreamCallbackHandler, config);\n        for await (const log of logStream){\n            if (!runLog) {\n                runLog = _tracers_log_stream_js__WEBPACK_IMPORTED_MODULE_2__.RunLog.fromRunLogPatch(log);\n            } else {\n                runLog = runLog.concat(log);\n            }\n            if (runLog.state === undefined) {\n                throw new Error(`Internal error: \"streamEvents\" state is missing. Please open a bug report.`);\n            }\n            // Yield the start event for the root runnable if it hasn't been seen.\n            // The root run is never filtered out\n            if (!hasEncounteredStartEvent) {\n                hasEncounteredStartEvent = true;\n                const state = {\n                    ...runLog.state\n                };\n                const event = {\n                    run_id: state.id,\n                    event: `on_${state.type}_start`,\n                    name: rootName,\n                    tags: rootTags,\n                    metadata: rootMetadata,\n                    data: {\n                        input\n                    }\n                };\n                if (rootEventFilter.includeEvent(event, state.type)) {\n                    yield event;\n                }\n            }\n            const paths = log.ops.filter((op)=>op.path.startsWith(\"/logs/\")).map((op)=>op.path.split(\"/\")[2]);\n            const dedupedPaths = [\n                ...new Set(paths)\n            ];\n            for (const path of dedupedPaths){\n                let eventType;\n                let data = {};\n                const logEntry = runLog.state.logs[path];\n                if (logEntry.end_time === undefined) {\n                    if (logEntry.streamed_output.length > 0) {\n                        eventType = \"stream\";\n                    } else {\n                        eventType = \"start\";\n                    }\n                } else {\n                    eventType = \"end\";\n                }\n                if (eventType === \"start\") {\n                    // Include the inputs with the start event if they are available.\n                    // Usually they will NOT be available for components that operate\n                    // on streams, since those components stream the input and\n                    // don't know its final value until the end of the stream.\n                    if (logEntry.inputs !== undefined) {\n                        data.input = logEntry.inputs;\n                    }\n                } else if (eventType === \"end\") {\n                    if (logEntry.inputs !== undefined) {\n                        data.input = logEntry.inputs;\n                    }\n                    data.output = logEntry.final_output;\n                } else if (eventType === \"stream\") {\n                    const chunkCount = logEntry.streamed_output.length;\n                    if (chunkCount !== 1) {\n                        throw new Error(`Expected exactly one chunk of streamed output, got ${chunkCount} instead. Encountered in: \"${logEntry.name}\"`);\n                    }\n                    data = {\n                        chunk: logEntry.streamed_output[0]\n                    };\n                    // Clean up the stream, we don't need it anymore.\n                    // And this avoids duplicates as well!\n                    logEntry.streamed_output = [];\n                }\n                yield {\n                    event: `on_${logEntry.type}_${eventType}`,\n                    name: logEntry.name,\n                    run_id: logEntry.id,\n                    tags: logEntry.tags,\n                    metadata: logEntry.metadata,\n                    data\n                };\n            }\n            // Finally, we take care of the streaming output from the root chain\n            // if there is any.\n            const { state } = runLog;\n            if (state.streamed_output.length > 0) {\n                const chunkCount = state.streamed_output.length;\n                if (chunkCount !== 1) {\n                    throw new Error(`Expected exactly one chunk of streamed output, got ${chunkCount} instead. Encountered in: \"${state.name}\"`);\n                }\n                const data = {\n                    chunk: state.streamed_output[0]\n                };\n                // Clean up the stream, we don't need it anymore.\n                state.streamed_output = [];\n                const event = {\n                    event: `on_${state.type}_stream`,\n                    run_id: state.id,\n                    tags: rootTags,\n                    metadata: rootMetadata,\n                    name: rootName,\n                    data\n                };\n                if (rootEventFilter.includeEvent(event, state.type)) {\n                    yield event;\n                }\n            }\n        }\n        const state = runLog?.state;\n        if (state !== undefined) {\n            // Finally, yield the end event for the root runnable.\n            const event = {\n                event: `on_${state.type}_end`,\n                name: rootName,\n                run_id: state.id,\n                tags: rootTags,\n                metadata: rootMetadata,\n                data: {\n                    output: state.final_output\n                }\n            };\n            if (rootEventFilter.includeEvent(event, state.type)) yield event;\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static isRunnable(thing) {\n        return (0,_utils_js__WEBPACK_IMPORTED_MODULE_8__.isRunnableInterface)(thing);\n    }\n    /**\n     * Bind lifecycle listeners to a Runnable, returning a new Runnable.\n     * The Run object contains information about the run, including its id,\n     * type, input, output, error, startTime, endTime, and any tags or metadata\n     * added to the run.\n     *\n     * @param {Object} params - The object containing the callback functions.\n     * @param {(run: Run) => void} params.onStart - Called before the runnable starts running, with the Run object.\n     * @param {(run: Run) => void} params.onEnd - Called after the runnable finishes running, with the Run object.\n     * @param {(run: Run) => void} params.onError - Called if the runnable throws an error, with the Run object.\n     */ withListeners({ onStart, onEnd, onError }) {\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunnableBinding({\n            bound: this,\n            config: {},\n            configFactories: [\n                (config)=>({\n                        callbacks: [\n                            new _tracers_root_listener_js__WEBPACK_IMPORTED_MODULE_7__.RootListenersTracer({\n                                config,\n                                onStart,\n                                onEnd,\n                                onError\n                            })\n                        ]\n                    })\n            ]\n        });\n    }\n}\n/**\n * A runnable that delegates calls to another runnable with a set of kwargs.\n */ class RunnableBinding extends Runnable {\n    static lc_name() {\n        return \"RunnableBinding\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"bound\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"config\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"kwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"configFactories\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.bound = fields.bound;\n        this.kwargs = fields.kwargs;\n        this.config = fields.config;\n        this.configFactories = fields.configFactories;\n    }\n    getName(suffix) {\n        return this.bound.getName(suffix);\n    }\n    async _mergeConfig(...options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.mergeConfigs)(this.config, ...options);\n        return (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.mergeConfigs)(config, ...this.configFactories ? await Promise.all(this.configFactories.map(async (configFactory)=>await configFactory(config))) : []);\n    }\n    bind(kwargs) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return new this.constructor({\n            bound: this.bound,\n            kwargs: {\n                ...this.kwargs,\n                ...kwargs\n            },\n            config: this.config\n        });\n    }\n    withConfig(config) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return new this.constructor({\n            bound: this.bound,\n            kwargs: this.kwargs,\n            config: {\n                ...this.config,\n                ...config\n            }\n        });\n    }\n    withRetry(fields) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return new this.constructor({\n            bound: this.bound.withRetry(fields),\n            kwargs: this.kwargs,\n            config: this.config\n        });\n    }\n    async invoke(input, options) {\n        return this.bound.invoke(input, await this._mergeConfig(options, this.kwargs));\n    }\n    async batch(inputs, options, batchOptions) {\n        const mergedOptions = Array.isArray(options) ? await Promise.all(options.map(async (individualOption)=>this._mergeConfig(individualOption, this.kwargs))) : await this._mergeConfig(options, this.kwargs);\n        return this.bound.batch(inputs, mergedOptions, batchOptions);\n    }\n    async *_streamIterator(input, options) {\n        yield* this.bound._streamIterator(input, await this._mergeConfig(options, this.kwargs));\n    }\n    async stream(input, options) {\n        return this.bound.stream(input, await this._mergeConfig(options, this.kwargs));\n    }\n    async *transform(// eslint-disable-next-line @typescript-eslint/no-explicit-any\n    generator, options) {\n        yield* this.bound.transform(generator, await this._mergeConfig(options, this.kwargs));\n    }\n    async *streamEvents(input, options, streamOptions) {\n        yield* this.bound.streamEvents(input, {\n            ...await this._mergeConfig(options, this.kwargs),\n            version: options.version\n        }, streamOptions);\n    }\n    static isRunnableBinding(// eslint-disable-next-line @typescript-eslint/no-explicit-any\n    thing) {\n        return thing.bound && Runnable.isRunnable(thing.bound);\n    }\n    /**\n     * Bind lifecycle listeners to a Runnable, returning a new Runnable.\n     * The Run object contains information about the run, including its id,\n     * type, input, output, error, startTime, endTime, and any tags or metadata\n     * added to the run.\n     *\n     * @param {Object} params - The object containing the callback functions.\n     * @param {(run: Run) => void} params.onStart - Called before the runnable starts running, with the Run object.\n     * @param {(run: Run) => void} params.onEnd - Called after the runnable finishes running, with the Run object.\n     * @param {(run: Run) => void} params.onError - Called if the runnable throws an error, with the Run object.\n     */ withListeners({ onStart, onEnd, onError }) {\n        return new RunnableBinding({\n            bound: this.bound,\n            kwargs: this.kwargs,\n            config: this.config,\n            configFactories: [\n                (config)=>({\n                        callbacks: [\n                            new _tracers_root_listener_js__WEBPACK_IMPORTED_MODULE_7__.RootListenersTracer({\n                                config,\n                                onStart,\n                                onEnd,\n                                onError\n                            })\n                        ]\n                    })\n            ]\n        });\n    }\n}\n/**\n * A runnable that delegates calls to another runnable\n * with each element of the input sequence.\n */ class RunnableEach extends Runnable {\n    static lc_name() {\n        return \"RunnableEach\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"bound\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.bound = fields.bound;\n    }\n    /**\n     * Binds the runnable with the specified arguments.\n     * @param kwargs The arguments to bind the runnable with.\n     * @returns A new instance of the `RunnableEach` class that is bound with the specified arguments.\n     */ bind(kwargs) {\n        return new RunnableEach({\n            bound: this.bound.bind(kwargs)\n        });\n    }\n    /**\n     * Invokes the runnable with the specified input and configuration.\n     * @param input The input to invoke the runnable with.\n     * @param config The configuration to invoke the runnable with.\n     * @returns A promise that resolves to the output of the runnable.\n     */ async invoke(inputs, config) {\n        return this._callWithConfig(this._invoke, inputs, config);\n    }\n    /**\n     * A helper method that is used to invoke the runnable with the specified input and configuration.\n     * @param input The input to invoke the runnable with.\n     * @param config The configuration to invoke the runnable with.\n     * @returns A promise that resolves to the output of the runnable.\n     */ async _invoke(inputs, config, runManager) {\n        return this.bound.batch(inputs, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(config, {\n            callbacks: runManager?.getChild()\n        }));\n    }\n    /**\n     * Bind lifecycle listeners to a Runnable, returning a new Runnable.\n     * The Run object contains information about the run, including its id,\n     * type, input, output, error, startTime, endTime, and any tags or metadata\n     * added to the run.\n     *\n     * @param {Object} params - The object containing the callback functions.\n     * @param {(run: Run) => void} params.onStart - Called before the runnable starts running, with the Run object.\n     * @param {(run: Run) => void} params.onEnd - Called after the runnable finishes running, with the Run object.\n     * @param {(run: Run) => void} params.onError - Called if the runnable throws an error, with the Run object.\n     */ withListeners({ onStart, onEnd, onError }) {\n        return new RunnableEach({\n            bound: this.bound.withListeners({\n                onStart,\n                onEnd,\n                onError\n            })\n        });\n    }\n}\n/**\n * Base class for runnables that can be retried a\n * specified number of times.\n */ class RunnableRetry extends RunnableBinding {\n    static lc_name() {\n        return \"RunnableRetry\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"maxAttemptNumber\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 3\n        });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"onFailedAttempt\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: ()=>{}\n        });\n        this.maxAttemptNumber = fields.maxAttemptNumber ?? this.maxAttemptNumber;\n        this.onFailedAttempt = fields.onFailedAttempt ?? this.onFailedAttempt;\n    }\n    _patchConfigForRetry(attempt, config, runManager) {\n        const tag = attempt > 1 ? `retry:attempt:${attempt}` : undefined;\n        return (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(config, {\n            callbacks: runManager?.getChild(tag)\n        });\n    }\n    async _invoke(input, config, runManager) {\n        return p_retry__WEBPACK_IMPORTED_MODULE_0__((attemptNumber)=>super.invoke(input, this._patchConfigForRetry(attemptNumber, config, runManager)), {\n            onFailedAttempt: this.onFailedAttempt,\n            retries: Math.max(this.maxAttemptNumber - 1, 0),\n            randomize: true\n        });\n    }\n    /**\n     * Method that invokes the runnable with the specified input, run manager,\n     * and config. It handles the retry logic by catching any errors and\n     * recursively invoking itself with the updated config for the next retry\n     * attempt.\n     * @param input The input for the runnable.\n     * @param runManager The run manager for the runnable.\n     * @param config The config for the runnable.\n     * @returns A promise that resolves to the output of the runnable.\n     */ async invoke(input, config) {\n        return this._callWithConfig(this._invoke, input, config);\n    }\n    async _batch(inputs, configs, runManagers, batchOptions) {\n        const resultsMap = {};\n        try {\n            await p_retry__WEBPACK_IMPORTED_MODULE_0__(async (attemptNumber)=>{\n                const remainingIndexes = inputs.map((_, i)=>i).filter((i)=>resultsMap[i.toString()] === undefined || // eslint-disable-next-line no-instanceof/no-instanceof\n                    resultsMap[i.toString()] instanceof Error);\n                const remainingInputs = remainingIndexes.map((i)=>inputs[i]);\n                const patchedConfigs = remainingIndexes.map((i)=>this._patchConfigForRetry(attemptNumber, configs?.[i], runManagers?.[i]));\n                const results = await super.batch(remainingInputs, patchedConfigs, {\n                    ...batchOptions,\n                    returnExceptions: true\n                });\n                let firstException;\n                for(let i = 0; i < results.length; i += 1){\n                    const result = results[i];\n                    const resultMapIndex = remainingIndexes[i];\n                    // eslint-disable-next-line no-instanceof/no-instanceof\n                    if (result instanceof Error) {\n                        if (firstException === undefined) {\n                            firstException = result;\n                        }\n                    }\n                    resultsMap[resultMapIndex.toString()] = result;\n                }\n                if (firstException) {\n                    throw firstException;\n                }\n                return results;\n            }, {\n                onFailedAttempt: this.onFailedAttempt,\n                retries: Math.max(this.maxAttemptNumber - 1, 0),\n                randomize: true\n            });\n        } catch (e) {\n            if (batchOptions?.returnExceptions !== true) {\n                throw e;\n            }\n        }\n        return Object.keys(resultsMap).sort((a, b)=>parseInt(a, 10) - parseInt(b, 10)).map((key)=>resultsMap[parseInt(key, 10)]);\n    }\n    async batch(inputs, options, batchOptions) {\n        return this._batchWithConfig(this._batch.bind(this), inputs, options, batchOptions);\n    }\n}\n/**\n * A sequence of runnables, where the output of each is the input of the next.\n * @example\n * ```typescript\n * const promptTemplate = PromptTemplate.fromTemplate(\n *   \"Tell me a joke about {topic}\",\n * );\n * const chain = RunnableSequence.from([promptTemplate, new ChatOpenAI({})]);\n * const result = await chain.invoke({ topic: \"bears\" });\n * ```\n */ class RunnableSequence extends Runnable {\n    static lc_name() {\n        return \"RunnableSequence\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"first\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"middle\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        Object.defineProperty(this, \"last\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        this.first = fields.first;\n        this.middle = fields.middle ?? this.middle;\n        this.last = fields.last;\n        this.name = fields.name;\n    }\n    get steps() {\n        return [\n            this.first,\n            ...this.middle,\n            this.last\n        ];\n    }\n    async invoke(input, options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.getCallbackManagerForConfig)(config);\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), undefined, undefined, undefined, undefined, config?.runName);\n        let nextStepInput = input;\n        let finalOutput;\n        try {\n            const initialSteps = [\n                this.first,\n                ...this.middle\n            ];\n            for(let i = 0; i < initialSteps.length; i += 1){\n                const step = initialSteps[i];\n                nextStepInput = await step.invoke(nextStepInput, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(config, {\n                    callbacks: runManager?.getChild(`seq:step:${i + 1}`)\n                }));\n            }\n            // TypeScript can't detect that the last output of the sequence returns RunOutput, so call it out of the loop here\n            finalOutput = await this.last.invoke(nextStepInput, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(config, {\n                callbacks: runManager?.getChild(`seq:step:${this.steps.length}`)\n            }));\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(_coerceToDict(finalOutput, \"output\"));\n        return finalOutput;\n    }\n    async batch(inputs, options, batchOptions) {\n        const configList = this._getOptionsList(options ?? {}, inputs.length);\n        const callbackManagers = await Promise.all(configList.map(_config_js__WEBPACK_IMPORTED_MODULE_5__.getCallbackManagerForConfig));\n        const runManagers = await Promise.all(callbackManagers.map((callbackManager, i)=>callbackManager?.handleChainStart(this.toJSON(), _coerceToDict(inputs[i], \"input\"), undefined, undefined, undefined, undefined, configList[i].runName)));\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let nextStepInputs = inputs;\n        try {\n            for(let i = 0; i < this.steps.length; i += 1){\n                const step = this.steps[i];\n                nextStepInputs = await step.batch(nextStepInputs, runManagers.map((runManager, j)=>{\n                    const childRunManager = runManager?.getChild(`seq:step:${i + 1}`);\n                    return (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(configList[j], {\n                        callbacks: childRunManager\n                    });\n                }), batchOptions);\n            }\n        } catch (e) {\n            await Promise.all(runManagers.map((runManager)=>runManager?.handleChainError(e)));\n            throw e;\n        }\n        await Promise.all(runManagers.map((runManager)=>runManager?.handleChainEnd(_coerceToDict(nextStepInputs, \"output\"))));\n        return nextStepInputs;\n    }\n    async *_streamIterator(input, options) {\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.getCallbackManagerForConfig)(options);\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), undefined, undefined, undefined, undefined, options?.runName);\n        const steps = [\n            this.first,\n            ...this.middle,\n            this.last\n        ];\n        let concatSupported = true;\n        let finalOutput;\n        async function* inputGenerator() {\n            yield input;\n        }\n        try {\n            let finalGenerator = steps[0].transform(inputGenerator(), (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(options, {\n                callbacks: runManager?.getChild(`seq:step:1`)\n            }));\n            for(let i = 1; i < steps.length; i += 1){\n                const step = steps[i];\n                finalGenerator = await step.transform(finalGenerator, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(options, {\n                    callbacks: runManager?.getChild(`seq:step:${i + 1}`)\n                }));\n            }\n            for await (const chunk of finalGenerator){\n                yield chunk;\n                if (concatSupported) {\n                    if (finalOutput === undefined) {\n                        finalOutput = chunk;\n                    } else {\n                        try {\n                            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                            finalOutput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.concat)(finalOutput, chunk);\n                        } catch (e) {\n                            finalOutput = undefined;\n                            concatSupported = false;\n                        }\n                    }\n                }\n            }\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(_coerceToDict(finalOutput, \"output\"));\n    }\n    getGraph(config) {\n        const graph = new _graph_js__WEBPACK_IMPORTED_MODULE_10__.Graph();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let currentLastNode = null;\n        this.steps.forEach((step, index)=>{\n            const stepGraph = step.getGraph(config);\n            if (index !== 0) {\n                stepGraph.trimFirstNode();\n            }\n            if (index !== this.steps.length - 1) {\n                stepGraph.trimLastNode();\n            }\n            graph.extend(stepGraph);\n            const stepFirstNode = stepGraph.firstNode();\n            if (!stepFirstNode) {\n                throw new Error(`Runnable ${step} has no first node`);\n            }\n            if (currentLastNode) {\n                graph.addEdge(currentLastNode, stepFirstNode);\n            }\n            currentLastNode = stepGraph.lastNode();\n        });\n        return graph;\n    }\n    pipe(coerceable) {\n        if (RunnableSequence.isRunnableSequence(coerceable)) {\n            return new RunnableSequence({\n                first: this.first,\n                middle: this.middle.concat([\n                    this.last,\n                    coerceable.first,\n                    ...coerceable.middle\n                ]),\n                last: coerceable.last,\n                name: this.name ?? coerceable.name\n            });\n        } else {\n            return new RunnableSequence({\n                first: this.first,\n                middle: [\n                    ...this.middle,\n                    this.last\n                ],\n                last: _coerceToRunnable(coerceable),\n                name: this.name\n            });\n        }\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static isRunnableSequence(thing) {\n        return Array.isArray(thing.middle) && Runnable.isRunnable(thing);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static from([first, ...runnables], name) {\n        return new RunnableSequence({\n            first: _coerceToRunnable(first),\n            middle: runnables.slice(0, -1).map(_coerceToRunnable),\n            last: _coerceToRunnable(runnables[runnables.length - 1]),\n            name\n        });\n    }\n}\n/**\n * A runnable that runs a mapping of runnables in parallel,\n * and returns a mapping of their outputs.\n * @example\n * ```typescript\n * const mapChain = RunnableMap.from({\n *   joke: PromptTemplate.fromTemplate(\"Tell me a joke about {topic}\").pipe(\n *     new ChatAnthropic({}),\n *   ),\n *   poem: PromptTemplate.fromTemplate(\"write a 2-line poem about {topic}\").pipe(\n *     new ChatAnthropic({}),\n *   ),\n * });\n * const result = await mapChain.invoke({ topic: \"bear\" });\n * ```\n */ class RunnableMap extends Runnable {\n    static lc_name() {\n        return \"RunnableMap\";\n    }\n    getStepsKeys() {\n        return Object.keys(this.steps);\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"steps\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.steps = {};\n        for (const [key, value] of Object.entries(fields.steps)){\n            this.steps[key] = _coerceToRunnable(value);\n        }\n    }\n    static from(steps) {\n        return new RunnableMap({\n            steps\n        });\n    }\n    async invoke(input, options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.ensureConfig)(options);\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.getCallbackManagerForConfig)(config);\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), {\n            input\n        }, undefined, undefined, undefined, undefined, config?.runName);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const output = {};\n        try {\n            await Promise.all(Object.entries(this.steps).map(async ([key, runnable])=>{\n                output[key] = await runnable.invoke(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(config, {\n                    callbacks: runManager?.getChild(`map:key:${key}`)\n                }));\n            }));\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(output);\n        return output;\n    }\n    async *_transform(generator, runManager, options) {\n        // shallow copy steps to ignore changes while iterating\n        const steps = {\n            ...this.steps\n        };\n        // each step gets a copy of the input iterator\n        const inputCopies = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.atee)(generator, Object.keys(steps).length);\n        // start the first iteration of each output iterator\n        const tasks = new Map(Object.entries(steps).map(([key, runnable], i)=>{\n            const gen = runnable.transform(inputCopies[i], (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(options, {\n                callbacks: runManager?.getChild(`map:key:${key}`)\n            }));\n            return [\n                key,\n                gen.next().then((result)=>({\n                        key,\n                        gen,\n                        result\n                    }))\n            ];\n        }));\n        // yield chunks as they become available,\n        // starting new iterations as needed,\n        // until all iterators are done\n        while(tasks.size){\n            const { key, result, gen } = await Promise.race(tasks.values());\n            tasks.delete(key);\n            if (!result.done) {\n                yield {\n                    [key]: result.value\n                };\n                tasks.set(key, gen.next().then((result)=>({\n                        key,\n                        gen,\n                        result\n                    })));\n            }\n        }\n    }\n    transform(generator, options) {\n        return this._transformStreamWithConfig(generator, this._transform.bind(this), options);\n    }\n    async stream(input, options) {\n        async function* generator() {\n            yield input;\n        }\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.AsyncGeneratorWithSetup(this.transform(generator(), options));\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n}\n/**\n * A runnable that runs a callable.\n */ class RunnableLambda extends Runnable {\n    static lc_name() {\n        return \"RunnableLambda\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"func\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.func = fields.func;\n    }\n    static from(func) {\n        return new RunnableLambda({\n            func\n        });\n    }\n    async _invoke(input, config, runManager) {\n        return new Promise((resolve, reject)=>{\n            const childConfig = (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(config, {\n                callbacks: runManager?.getChild(),\n                recursionLimit: (config?.recursionLimit ?? _config_js__WEBPACK_IMPORTED_MODULE_5__.DEFAULT_RECURSION_LIMIT) - 1\n            });\n            void _singletons_index_js__WEBPACK_IMPORTED_MODULE_9__.AsyncLocalStorageProviderSingleton.getInstance().run(childConfig, async ()=>{\n                try {\n                    let output = await this.func(input, {\n                        ...childConfig,\n                        config: childConfig\n                    });\n                    if (output && Runnable.isRunnable(output)) {\n                        if (config?.recursionLimit === 0) {\n                            throw new Error(\"Recursion limit reached.\");\n                        }\n                        output = await output.invoke(input, {\n                            ...childConfig,\n                            recursionLimit: (childConfig.recursionLimit ?? _config_js__WEBPACK_IMPORTED_MODULE_5__.DEFAULT_RECURSION_LIMIT) - 1\n                        });\n                    }\n                    resolve(output);\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        });\n    }\n    async invoke(input, options) {\n        return this._callWithConfig(this._invoke, input, options);\n    }\n    async *_transform(generator, runManager, config) {\n        let finalChunk;\n        for await (const chunk of generator){\n            if (finalChunk === undefined) {\n                finalChunk = chunk;\n            } else {\n                // Make a best effort to gather, for any type that supports concat.\n                try {\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    finalChunk = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.concat)(finalChunk, chunk);\n                } catch (e) {\n                    finalChunk = chunk;\n                }\n            }\n        }\n        const output = await new Promise((resolve, reject)=>{\n            void _singletons_index_js__WEBPACK_IMPORTED_MODULE_9__.AsyncLocalStorageProviderSingleton.getInstance().run(config, async ()=>{\n                try {\n                    const res = await this.func(finalChunk, {\n                        ...config,\n                        config\n                    });\n                    resolve(res);\n                } catch (e) {\n                    reject(e);\n                }\n            });\n        });\n        if (output && Runnable.isRunnable(output)) {\n            if (config?.recursionLimit === 0) {\n                throw new Error(\"Recursion limit reached.\");\n            }\n            const stream = await output.stream(finalChunk, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(config, {\n                callbacks: runManager?.getChild(),\n                recursionLimit: (config?.recursionLimit ?? _config_js__WEBPACK_IMPORTED_MODULE_5__.DEFAULT_RECURSION_LIMIT) - 1\n            }));\n            for await (const chunk of stream){\n                yield chunk;\n            }\n        } else {\n            yield output;\n        }\n    }\n    transform(generator, options) {\n        return this._transformStreamWithConfig(generator, this._transform.bind(this), options);\n    }\n    async stream(input, options) {\n        async function* generator() {\n            yield input;\n        }\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.AsyncGeneratorWithSetup(this.transform(generator(), options));\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n}\nclass RunnableParallel extends RunnableMap {\n}\n/**\n * A Runnable that can fallback to other Runnables if it fails.\n */ class RunnableWithFallbacks extends Runnable {\n    static lc_name() {\n        return \"RunnableWithFallbacks\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"runnable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"fallbacks\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.runnable = fields.runnable;\n        this.fallbacks = fields.fallbacks;\n    }\n    *runnables() {\n        yield this.runnable;\n        for (const fallback of this.fallbacks){\n            yield fallback;\n        }\n    }\n    async invoke(input, options) {\n        const callbackManager_ = await _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_1__.CallbackManager.configure(options?.callbacks, undefined, options?.tags, undefined, options?.metadata);\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), _coerceToDict(input, \"input\"), undefined, undefined, undefined, undefined, options?.runName);\n        let firstError;\n        for (const runnable of this.runnables()){\n            try {\n                const output = await runnable.invoke(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(options, {\n                    callbacks: runManager?.getChild()\n                }));\n                await runManager?.handleChainEnd(_coerceToDict(output, \"output\"));\n                return output;\n            } catch (e) {\n                if (firstError === undefined) {\n                    firstError = e;\n                }\n            }\n        }\n        if (firstError === undefined) {\n            throw new Error(\"No error stored at end of fallback.\");\n        }\n        await runManager?.handleChainError(firstError);\n        throw firstError;\n    }\n    async batch(inputs, options, batchOptions) {\n        if (batchOptions?.returnExceptions) {\n            throw new Error(\"Not implemented.\");\n        }\n        const configList = this._getOptionsList(options ?? {}, inputs.length);\n        const callbackManagers = await Promise.all(configList.map((config)=>_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_1__.CallbackManager.configure(config?.callbacks, undefined, config?.tags, undefined, config?.metadata)));\n        const runManagers = await Promise.all(callbackManagers.map((callbackManager, i)=>callbackManager?.handleChainStart(this.toJSON(), _coerceToDict(inputs[i], \"input\"), undefined, undefined, undefined, undefined, configList[i].runName)));\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let firstError;\n        for (const runnable of this.runnables()){\n            try {\n                const outputs = await runnable.batch(inputs, runManagers.map((runManager, j)=>(0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(configList[j], {\n                        callbacks: runManager?.getChild()\n                    })), batchOptions);\n                await Promise.all(runManagers.map((runManager, i)=>runManager?.handleChainEnd(_coerceToDict(outputs[i], \"output\"))));\n                return outputs;\n            } catch (e) {\n                if (firstError === undefined) {\n                    firstError = e;\n                }\n            }\n        }\n        if (!firstError) {\n            throw new Error(\"No error stored at end of fallbacks.\");\n        }\n        await Promise.all(runManagers.map((runManager)=>runManager?.handleChainError(firstError)));\n        throw firstError;\n    }\n}\n// TODO: Figure out why the compiler needs help eliminating Error as a RunOutput type\nfunction _coerceToRunnable(coerceable) {\n    if (typeof coerceable === \"function\") {\n        return new RunnableLambda({\n            func: coerceable\n        });\n    } else if (Runnable.isRunnable(coerceable)) {\n        return coerceable;\n    } else if (!Array.isArray(coerceable) && typeof coerceable === \"object\") {\n        const runnables = {};\n        for (const [key, value] of Object.entries(coerceable)){\n            runnables[key] = _coerceToRunnable(value);\n        }\n        return new RunnableMap({\n            steps: runnables\n        });\n    } else {\n        throw new Error(`Expected a Runnable, function or object.\\nInstead got an unsupported type.`);\n    }\n}\n/**\n * A runnable that assigns key-value pairs to inputs of type `Record<string, unknown>`.\n */ class RunnableAssign extends Runnable {\n    static lc_name() {\n        return \"RunnableAssign\";\n    }\n    constructor(fields){\n        // eslint-disable-next-line no-instanceof/no-instanceof\n        if (fields instanceof RunnableMap) {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                mapper: fields\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"mapper\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.mapper = fields.mapper;\n    }\n    async invoke(input, options) {\n        const mapperResult = await this.mapper.invoke(input, options);\n        return {\n            ...input,\n            ...mapperResult\n        };\n    }\n    async *_transform(generator, runManager, options) {\n        // collect mapper keys\n        const mapperKeys = this.mapper.getStepsKeys();\n        // create two input gens, one for the mapper, one for the input\n        const [forPassthrough, forMapper] = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.atee)(generator);\n        // create mapper output gen\n        const mapperOutput = this.mapper.transform(forMapper, (0,_config_js__WEBPACK_IMPORTED_MODULE_5__.patchConfig)(options, {\n            callbacks: runManager?.getChild()\n        }));\n        // start the mapper\n        const firstMapperChunkPromise = mapperOutput.next();\n        // yield the passthrough\n        for await (const chunk of forPassthrough){\n            if (typeof chunk !== \"object\" || Array.isArray(chunk)) {\n                throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof chunk}`);\n            }\n            const filtered = Object.fromEntries(Object.entries(chunk).filter(([key])=>!mapperKeys.includes(key)));\n            if (Object.keys(filtered).length > 0) {\n                yield filtered;\n            }\n        }\n        // yield the mapper output\n        yield (await firstMapperChunkPromise).value;\n        for await (const chunk of mapperOutput){\n            yield chunk;\n        }\n    }\n    transform(generator, options) {\n        return this._transformStreamWithConfig(generator, this._transform.bind(this), options);\n    }\n    async stream(input, options) {\n        async function* generator() {\n            yield input;\n        }\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.AsyncGeneratorWithSetup(this.transform(generator(), options));\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n}\n/**\n * A runnable that assigns key-value pairs to inputs of type `Record<string, unknown>`.\n */ class RunnablePick extends Runnable {\n    static lc_name() {\n        return \"RunnablePick\";\n    }\n    constructor(fields){\n        if (typeof fields === \"string\" || Array.isArray(fields)) {\n            // eslint-disable-next-line no-param-reassign\n            fields = {\n                keys: fields\n            };\n        }\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"keys\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.keys = fields.keys;\n    }\n    async _pick(input) {\n        if (typeof this.keys === \"string\") {\n            return input[this.keys];\n        } else {\n            const picked = this.keys.map((key)=>[\n                    key,\n                    input[key]\n                ]).filter((v)=>v[1] !== undefined);\n            return picked.length === 0 ? undefined : Object.fromEntries(picked);\n        }\n    }\n    async invoke(input, options) {\n        return this._callWithConfig(this._pick.bind(this), input, options);\n    }\n    async *_transform(generator) {\n        for await (const chunk of generator){\n            const picked = await this._pick(chunk);\n            if (picked !== undefined) {\n                yield picked;\n            }\n        }\n    }\n    transform(generator, options) {\n        return this._transformStreamWithConfig(generator, this._transform.bind(this), options);\n    }\n    async stream(input, options) {\n        async function* generator() {\n            yield input;\n        }\n        const wrappedGenerator = new _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.AsyncGeneratorWithSetup(this.transform(generator(), options));\n        await wrappedGenerator.setup;\n        return _utils_stream_js__WEBPACK_IMPORTED_MODULE_4__.IterableReadableStream.fromAsyncGenerator(wrappedGenerator);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2Jhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF3QjtBQUNLO0FBQzhCO0FBQytCO0FBQ25DO0FBQ3FFO0FBQ0M7QUFDdEU7QUFDVztBQUNDO0FBQ1M7QUFDekM7QUFDbkMsOERBQThEO0FBQ3ZELFNBQVN1QixjQUFjQyxLQUFLLEVBQUVDLFVBQVU7SUFDM0MsT0FBT0QsU0FDSCxDQUFDRSxNQUFNQyxPQUFPLENBQUNILFVBQ2YsdURBQXVEO0lBQ3ZELENBQUVBLENBQUFBLGlCQUFpQkksSUFBRyxLQUN0QixPQUFPSixVQUFVLFdBQ2ZBLFFBQ0E7UUFBRSxDQUFDQyxXQUFXLEVBQUVEO0lBQU07QUFDaEM7QUFDQTs7O0NBR0MsR0FDTSxNQUFNSyxpQkFBaUJ2QiwrREFBWUE7SUFDdEN3QixhQUFjO1FBQ1YsS0FBSyxJQUFJQztRQUNUQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGVBQWU7WUFDdkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZaLE9BQU87UUFDWDtRQUNBUSxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZaLE9BQU8sS0FBSztRQUNoQjtJQUNKO0lBQ0FhLFFBQVFDLE1BQU0sRUFBRTtRQUNaLE1BQU1DLE9BQ04sOERBQThEO1FBQzlELElBQUksQ0FBQ0EsSUFBSSxJQUFJLElBQUksQ0FBQ1QsV0FBVyxDQUFDVSxPQUFPLE1BQU0sSUFBSSxDQUFDVixXQUFXLENBQUNTLElBQUk7UUFDaEUsT0FBT0QsU0FBUyxDQUFDLEVBQUVDLEtBQUssRUFBRUQsT0FBTyxDQUFDLEdBQUdDO0lBQ3pDO0lBQ0E7Ozs7S0FJQyxHQUNERSxLQUFLQyxNQUFNLEVBQUU7UUFDVCxtRUFBbUU7UUFDbkUsT0FBTyxJQUFJQyxnQkFBZ0I7WUFB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QUksQ0FBQ21ELDBCQUEwQixDQUFDMEMsV0FBVyxJQUFJLENBQUNtSCxVQUFVLENBQUNsTyxJQUFJLENBQUMsSUFBSSxHQUFHa0I7SUFDbEY7SUFDQSxNQUFNc0IsT0FBT1QsS0FBSyxFQUFFYixPQUFPLEVBQUU7UUFDekIsZ0JBQWdCNkY7WUFDWixNQUFNaEY7UUFDVjtRQUNBLE1BQU1VLG1CQUFtQixJQUFJdkUscUVBQXVCQSxDQUFDLElBQUksQ0FBQzRJLFNBQVMsQ0FBQ0MsYUFBYTdGO1FBQ2pGLE1BQU11QixpQkFBaUJDLEtBQUs7UUFDNUIsT0FBTzVFLG9FQUFzQkEsQ0FBQzZFLGtCQUFrQixDQUFDRjtJQUNyRDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3J1bm5hYmxlcy9iYXNlLmpzPzQ1NjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgeiB9IGZyb20gXCJ6b2RcIjtcbmltcG9ydCBwUmV0cnkgZnJvbSBcInAtcmV0cnlcIjtcbmltcG9ydCB7IENhbGxiYWNrTWFuYWdlciwgfSBmcm9tIFwiLi4vY2FsbGJhY2tzL21hbmFnZXIuanNcIjtcbmltcG9ydCB7IExvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlciwgUnVuTG9nLCBSdW5Mb2dQYXRjaCwgfSBmcm9tIFwiLi4vdHJhY2Vycy9sb2dfc3RyZWFtLmpzXCI7XG5pbXBvcnQgeyBTZXJpYWxpemFibGUgfSBmcm9tIFwiLi4vbG9hZC9zZXJpYWxpemFibGUuanNcIjtcbmltcG9ydCB7IEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0sIGNvbmNhdCwgYXRlZSwgcGlwZUdlbmVyYXRvcldpdGhTZXR1cCwgQXN5bmNHZW5lcmF0b3JXaXRoU2V0dXAsIH0gZnJvbSBcIi4uL3V0aWxzL3N0cmVhbS5qc1wiO1xuaW1wb3J0IHsgREVGQVVMVF9SRUNVUlNJT05fTElNSVQsIGVuc3VyZUNvbmZpZywgZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnLCBtZXJnZUNvbmZpZ3MsIHBhdGNoQ29uZmlnLCB9IGZyb20gXCIuL2NvbmZpZy5qc1wiO1xuaW1wb3J0IHsgQXN5bmNDYWxsZXIgfSBmcm9tIFwiLi4vdXRpbHMvYXN5bmNfY2FsbGVyLmpzXCI7XG5pbXBvcnQgeyBSb290TGlzdGVuZXJzVHJhY2VyIH0gZnJvbSBcIi4uL3RyYWNlcnMvcm9vdF9saXN0ZW5lci5qc1wiO1xuaW1wb3J0IHsgX1Jvb3RFdmVudEZpbHRlciwgaXNSdW5uYWJsZUludGVyZmFjZSB9IGZyb20gXCIuL3V0aWxzLmpzXCI7XG5pbXBvcnQgeyBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uIH0gZnJvbSBcIi4uL3NpbmdsZXRvbnMvaW5kZXguanNcIjtcbmltcG9ydCB7IEdyYXBoIH0gZnJvbSBcIi4vZ3JhcGguanNcIjtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5leHBvcnQgZnVuY3Rpb24gX2NvZXJjZVRvRGljdCh2YWx1ZSwgZGVmYXVsdEtleSkge1xuICAgIHJldHVybiB2YWx1ZSAmJlxuICAgICAgICAhQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiZcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWluc3RhbmNlb2Yvbm8taW5zdGFuY2VvZlxuICAgICAgICAhKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkgJiZcbiAgICAgICAgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiXG4gICAgICAgID8gdmFsdWVcbiAgICAgICAgOiB7IFtkZWZhdWx0S2V5XTogdmFsdWUgfTtcbn1cbi8qKlxuICogQSBSdW5uYWJsZSBpcyBhIGdlbmVyaWMgdW5pdCBvZiB3b3JrIHRoYXQgY2FuIGJlIGludm9rZWQsIGJhdGNoZWQsIHN0cmVhbWVkLCBhbmQvb3JcbiAqIHRyYW5zZm9ybWVkLlxuICovXG5leHBvcnQgY2xhc3MgUnVubmFibGUgZXh0ZW5kcyBTZXJpYWxpemFibGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19ydW5uYWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXROYW1lKHN1ZmZpeCkge1xuICAgICAgICBjb25zdCBuYW1lID0gXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHRoaXMubmFtZSA/PyB0aGlzLmNvbnN0cnVjdG9yLmxjX25hbWUoKSA/PyB0aGlzLmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgICAgIHJldHVybiBzdWZmaXggPyBgJHtuYW1lfSR7c3VmZml4fWAgOiBuYW1lO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCaW5kIGFyZ3VtZW50cyB0byBhIFJ1bm5hYmxlLCByZXR1cm5pbmcgYSBuZXcgUnVubmFibGUuXG4gICAgICogQHBhcmFtIGt3YXJnc1xuICAgICAqIEByZXR1cm5zIEEgbmV3IFJ1bm5hYmxlQmluZGluZyB0aGF0LCB3aGVuIGludm9rZWQsIHdpbGwgYXBwbHkgdGhlIGJvdW5kIGFyZ3MuXG4gICAgICovXG4gICAgYmluZChrd2FyZ3MpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlQmluZGluZyh7IGJvdW5kOiB0aGlzLCBrd2FyZ3MsIGNvbmZpZzoge30gfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybiBhIG5ldyBSdW5uYWJsZSB0aGF0IG1hcHMgYSBsaXN0IG9mIGlucHV0cyB0byBhIGxpc3Qgb2Ygb3V0cHV0cyxcbiAgICAgKiBieSBjYWxsaW5nIGludm9rZSgpIHdpdGggZWFjaCBpbnB1dC5cbiAgICAgKi9cbiAgICBtYXAoKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZUVhY2goeyBib3VuZDogdGhpcyB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkIHJldHJ5IGxvZ2ljIHRvIGFuIGV4aXN0aW5nIHJ1bm5hYmxlLlxuICAgICAqIEBwYXJhbSBrd2FyZ3NcbiAgICAgKiBAcmV0dXJucyBBIG5ldyBSdW5uYWJsZVJldHJ5IHRoYXQsIHdoZW4gaW52b2tlZCwgd2lsbCByZXRyeSBhY2NvcmRpbmcgdG8gdGhlIHBhcmFtZXRlcnMuXG4gICAgICovXG4gICAgd2l0aFJldHJ5KGZpZWxkcykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVSZXRyeSh7XG4gICAgICAgICAgICBib3VuZDogdGhpcyxcbiAgICAgICAgICAgIGt3YXJnczoge30sXG4gICAgICAgICAgICBjb25maWc6IHt9LFxuICAgICAgICAgICAgbWF4QXR0ZW1wdE51bWJlcjogZmllbGRzPy5zdG9wQWZ0ZXJBdHRlbXB0LFxuICAgICAgICAgICAgLi4uZmllbGRzLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQmluZCBjb25maWcgdG8gYSBSdW5uYWJsZSwgcmV0dXJuaW5nIGEgbmV3IFJ1bm5hYmxlLlxuICAgICAqIEBwYXJhbSBjb25maWcgTmV3IGNvbmZpZ3VyYXRpb24gcGFyYW1ldGVycyB0byBhdHRhY2ggdG8gdGhlIG5ldyBydW5uYWJsZS5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBSdW5uYWJsZUJpbmRpbmcgd2l0aCBhIGNvbmZpZyBtYXRjaGluZyB3aGF0J3MgcGFzc2VkLlxuICAgICAqL1xuICAgIHdpdGhDb25maWcoY29uZmlnKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZUJpbmRpbmcoe1xuICAgICAgICAgICAgYm91bmQ6IHRoaXMsXG4gICAgICAgICAgICBjb25maWcsXG4gICAgICAgICAgICBrd2FyZ3M6IHt9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IHJ1bm5hYmxlIGZyb20gdGhlIGN1cnJlbnQgb25lIHRoYXQgd2lsbCB0cnkgaW52b2tpbmdcbiAgICAgKiBvdGhlciBwYXNzZWQgZmFsbGJhY2sgcnVubmFibGVzIGlmIHRoZSBpbml0aWFsIGludm9jYXRpb24gZmFpbHMuXG4gICAgICogQHBhcmFtIGZpZWxkcy5mYWxsYmFja3MgT3RoZXIgcnVubmFibGVzIHRvIGNhbGwgaWYgdGhlIHJ1bm5hYmxlIGVycm9ycy5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBSdW5uYWJsZVdpdGhGYWxsYmFja3MuXG4gICAgICovXG4gICAgd2l0aEZhbGxiYWNrcyhmaWVsZHMpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlV2l0aEZhbGxiYWNrcyh7XG4gICAgICAgICAgICBydW5uYWJsZTogdGhpcyxcbiAgICAgICAgICAgIGZhbGxiYWNrczogZmllbGRzLmZhbGxiYWNrcyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9nZXRPcHRpb25zTGlzdChvcHRpb25zLCBsZW5ndGggPSAwKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG9wdGlvbnMpKSB7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5sZW5ndGggIT09IGxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgUGFzc2VkIFwib3B0aW9uc1wiIG11c3QgYmUgYW4gYXJyYXkgd2l0aCB0aGUgc2FtZSBsZW5ndGggYXMgdGhlIGlucHV0cywgYnV0IGdvdCAke29wdGlvbnMubGVuZ3RofSBvcHRpb25zIGZvciAke2xlbmd0aH0gaW5wdXRzYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3B0aW9ucy5tYXAoZW5zdXJlQ29uZmlnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aCB9LCAoKSA9PiBlbnN1cmVDb25maWcob3B0aW9ucykpO1xuICAgIH1cbiAgICBhc3luYyBiYXRjaChpbnB1dHMsIG9wdGlvbnMsIGJhdGNoT3B0aW9ucykge1xuICAgICAgICBjb25zdCBjb25maWdMaXN0ID0gdGhpcy5fZ2V0T3B0aW9uc0xpc3Qob3B0aW9ucyA/PyB7fSwgaW5wdXRzLmxlbmd0aCk7XG4gICAgICAgIGNvbnN0IG1heENvbmN1cnJlbmN5ID0gY29uZmlnTGlzdFswXT8ubWF4Q29uY3VycmVuY3kgPz8gYmF0Y2hPcHRpb25zPy5tYXhDb25jdXJyZW5jeTtcbiAgICAgICAgY29uc3QgY2FsbGVyID0gbmV3IEFzeW5jQ2FsbGVyKHtcbiAgICAgICAgICAgIG1heENvbmN1cnJlbmN5LFxuICAgICAgICAgICAgb25GYWlsZWRBdHRlbXB0OiAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgYmF0Y2hDYWxscyA9IGlucHV0cy5tYXAoKGlucHV0LCBpKSA9PiBjYWxsZXIuY2FsbChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuaW52b2tlKGlucHV0LCBjb25maWdMaXN0W2ldKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoYmF0Y2hPcHRpb25zPy5yZXR1cm5FeGNlcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChiYXRjaENhbGxzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVmYXVsdCBzdHJlYW1pbmcgaW1wbGVtZW50YXRpb24uXG4gICAgICogU3ViY2xhc3NlcyBzaG91bGQgb3ZlcnJpZGUgdGhpcyBtZXRob2QgaWYgdGhleSBzdXBwb3J0IHN0cmVhbWluZyBvdXRwdXQuXG4gICAgICogQHBhcmFtIGlucHV0XG4gICAgICogQHBhcmFtIG9wdGlvbnNcbiAgICAgKi9cbiAgICBhc3luYyAqX3N0cmVhbUl0ZXJhdG9yKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIHlpZWxkIHRoaXMuaW52b2tlKGlucHV0LCBvcHRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RyZWFtIG91dHB1dCBpbiBjaHVua3MuXG4gICAgICogQHBhcmFtIGlucHV0XG4gICAgICogQHBhcmFtIG9wdGlvbnNcbiAgICAgKiBAcmV0dXJucyBBIHJlYWRhYmxlIHN0cmVhbSB0aGF0IGlzIGFsc28gYW4gaXRlcmFibGUuXG4gICAgICovXG4gICAgYXN5bmMgc3RyZWFtKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIC8vIEJ1ZmZlciB0aGUgZmlyc3Qgc3RyZWFtZWQgY2h1bmsgdG8gYWxsb3cgZm9yIGluaXRpYWwgZXJyb3JzXG4gICAgICAgIC8vIHRvIHN1cmZhY2UgaW1tZWRpYXRlbHkuXG4gICAgICAgIGNvbnN0IHdyYXBwZWRHZW5lcmF0b3IgPSBuZXcgQXN5bmNHZW5lcmF0b3JXaXRoU2V0dXAodGhpcy5fc3RyZWFtSXRlcmF0b3IoaW5wdXQsIGVuc3VyZUNvbmZpZyhvcHRpb25zKSkpO1xuICAgICAgICBhd2FpdCB3cmFwcGVkR2VuZXJhdG9yLnNldHVwO1xuICAgICAgICByZXR1cm4gSXRlcmFibGVSZWFkYWJsZVN0cmVhbS5mcm9tQXN5bmNHZW5lcmF0b3Iod3JhcHBlZEdlbmVyYXRvcik7XG4gICAgfVxuICAgIF9zZXBhcmF0ZVJ1bm5hYmxlQ29uZmlnRnJvbUNhbGxPcHRpb25zKG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBjb25zdCBydW5uYWJsZUNvbmZpZyA9IGVuc3VyZUNvbmZpZyh7XG4gICAgICAgICAgICBjYWxsYmFja3M6IG9wdGlvbnMuY2FsbGJhY2tzLFxuICAgICAgICAgICAgdGFnczogb3B0aW9ucy50YWdzLFxuICAgICAgICAgICAgbWV0YWRhdGE6IG9wdGlvbnMubWV0YWRhdGEsXG4gICAgICAgICAgICBydW5OYW1lOiBvcHRpb25zLnJ1bk5hbWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IG9wdGlvbnMuY29uZmlndXJhYmxlLFxuICAgICAgICAgICAgcmVjdXJzaW9uTGltaXQ6IG9wdGlvbnMucmVjdXJzaW9uTGltaXQsXG4gICAgICAgICAgICBtYXhDb25jdXJyZW5jeTogb3B0aW9ucy5tYXhDb25jdXJyZW5jeSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGNhbGxPcHRpb25zID0geyAuLi5vcHRpb25zIH07XG4gICAgICAgIGRlbGV0ZSBjYWxsT3B0aW9ucy5jYWxsYmFja3M7XG4gICAgICAgIGRlbGV0ZSBjYWxsT3B0aW9ucy50YWdzO1xuICAgICAgICBkZWxldGUgY2FsbE9wdGlvbnMubWV0YWRhdGE7XG4gICAgICAgIGRlbGV0ZSBjYWxsT3B0aW9ucy5ydW5OYW1lO1xuICAgICAgICBkZWxldGUgY2FsbE9wdGlvbnMuY29uZmlndXJhYmxlO1xuICAgICAgICBkZWxldGUgY2FsbE9wdGlvbnMucmVjdXJzaW9uTGltaXQ7XG4gICAgICAgIGRlbGV0ZSBjYWxsT3B0aW9ucy5tYXhDb25jdXJyZW5jeTtcbiAgICAgICAgcmV0dXJuIFtydW5uYWJsZUNvbmZpZywgY2FsbE9wdGlvbnNdO1xuICAgIH1cbiAgICBhc3luYyBfY2FsbFdpdGhDb25maWcoZnVuYywgaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY29uZmlnID0gZW5zdXJlQ29uZmlnKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnKGNvbmZpZyk7XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXIgPSBhd2FpdCBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIF9jb2VyY2VUb0RpY3QoaW5wdXQsIFwiaW5wdXRcIiksIHVuZGVmaW5lZCwgY29uZmlnPy5ydW5UeXBlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY29uZmlnPy5ydW5OYW1lID8/IHRoaXMuZ2V0TmFtZSgpKTtcbiAgICAgICAgbGV0IG91dHB1dDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG91dHB1dCA9IGF3YWl0IGZ1bmMuY2FsbCh0aGlzLCBpbnB1dCwgY29uZmlnLCBydW5NYW5hZ2VyKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FcnJvcihlKTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FbmQoX2NvZXJjZVRvRGljdChvdXRwdXQsIFwib3V0cHV0XCIpKTtcbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgbWV0aG9kIHRoYXQgaGFuZGxlcyBiYXRjaGluZyBhbmQgY29uZmlndXJhdGlvbiBmb3IgYSBydW5uYWJsZVxuICAgICAqIEl0IHRha2VzIGEgZnVuY3Rpb24sIGlucHV0IHZhbHVlcywgYW5kIG9wdGlvbmFsIGNvbmZpZ3VyYXRpb24sIGFuZFxuICAgICAqIHJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIG91dHB1dCB2YWx1ZXMuXG4gICAgICogQHBhcmFtIGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGJlIGV4ZWN1dGVkIGZvciBlYWNoIGlucHV0IHZhbHVlLlxuICAgICAqIEBwYXJhbSBpbnB1dCBUaGUgaW5wdXQgdmFsdWVzIHRvIGJlIHByb2Nlc3NlZC5cbiAgICAgKiBAcGFyYW0gY29uZmlnIE9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBmdW5jdGlvbiBleGVjdXRpb24uXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIG91dHB1dCB2YWx1ZXMuXG4gICAgICovXG4gICAgYXN5bmMgX2JhdGNoV2l0aENvbmZpZyhmdW5jLCBpbnB1dHMsIG9wdGlvbnMsIGJhdGNoT3B0aW9ucykge1xuICAgICAgICBjb25zdCBvcHRpb25zTGlzdCA9IHRoaXMuX2dldE9wdGlvbnNMaXN0KG9wdGlvbnMgPz8ge30sIGlucHV0cy5sZW5ndGgpO1xuICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJzID0gYXdhaXQgUHJvbWlzZS5hbGwob3B0aW9uc0xpc3QubWFwKGdldENhbGxiYWNrTWFuYWdlckZvckNvbmZpZykpO1xuICAgICAgICBjb25zdCBydW5NYW5hZ2VycyA9IGF3YWl0IFByb21pc2UuYWxsKGNhbGxiYWNrTWFuYWdlcnMubWFwKChjYWxsYmFja01hbmFnZXIsIGkpID0+IGNhbGxiYWNrTWFuYWdlcj8uaGFuZGxlQ2hhaW5TdGFydCh0aGlzLnRvSlNPTigpLCBfY29lcmNlVG9EaWN0KGlucHV0c1tpXSwgXCJpbnB1dFwiKSwgdW5kZWZpbmVkLCBvcHRpb25zTGlzdFtpXS5ydW5UeXBlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgb3B0aW9uc0xpc3RbaV0ucnVuTmFtZSA/PyB0aGlzLmdldE5hbWUoKSkpKTtcbiAgICAgICAgbGV0IG91dHB1dHM7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBvdXRwdXRzID0gYXdhaXQgZnVuYy5jYWxsKHRoaXMsIGlucHV0cywgb3B0aW9uc0xpc3QsIHJ1bk1hbmFnZXJzLCBiYXRjaE9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChydW5NYW5hZ2Vycy5tYXAoKHJ1bk1hbmFnZXIpID0+IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRXJyb3IoZSkpKTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocnVuTWFuYWdlcnMubWFwKChydW5NYW5hZ2VyKSA9PiBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChfY29lcmNlVG9EaWN0KG91dHB1dHMsIFwib3V0cHV0XCIpKSkpO1xuICAgICAgICByZXR1cm4gb3V0cHV0cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGVscGVyIG1ldGhvZCB0byB0cmFuc2Zvcm0gYW4gSXRlcmF0b3Igb2YgSW5wdXQgdmFsdWVzIGludG8gYW4gSXRlcmF0b3Igb2ZcbiAgICAgKiBPdXRwdXQgdmFsdWVzLCB3aXRoIGNhbGxiYWNrcy5cbiAgICAgKiBVc2UgdGhpcyB0byBpbXBsZW1lbnQgYHN0cmVhbSgpYCBvciBgdHJhbnNmb3JtKClgIGluIFJ1bm5hYmxlIHN1YmNsYXNzZXMuXG4gICAgICovXG4gICAgYXN5bmMgKl90cmFuc2Zvcm1TdHJlYW1XaXRoQ29uZmlnKGlucHV0R2VuZXJhdG9yLCB0cmFuc2Zvcm1lciwgb3B0aW9ucykge1xuICAgICAgICBsZXQgZmluYWxJbnB1dDtcbiAgICAgICAgbGV0IGZpbmFsSW5wdXRTdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgICBsZXQgZmluYWxPdXRwdXQ7XG4gICAgICAgIGxldCBmaW5hbE91dHB1dFN1cHBvcnRlZCA9IHRydWU7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IGVuc3VyZUNvbmZpZyhvcHRpb25zKTtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tNYW5hZ2VyXyA9IGF3YWl0IGdldENhbGxiYWNrTWFuYWdlckZvckNvbmZpZyhjb25maWcpO1xuICAgICAgICBhc3luYyBmdW5jdGlvbiogd3JhcElucHV0Rm9yVHJhY2luZygpIHtcbiAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgaW5wdXRHZW5lcmF0b3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmluYWxJbnB1dFN1cHBvcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmluYWxJbnB1dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaW5hbElucHV0ID0gY2h1bms7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxJbnB1dCA9IGNvbmNhdChmaW5hbElucHV0LCBjaHVuayk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxJbnB1dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbElucHV0U3VwcG9ydGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgeWllbGQgY2h1bms7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHJ1bk1hbmFnZXI7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBwaXBlID0gYXdhaXQgcGlwZUdlbmVyYXRvcldpdGhTZXR1cCh0cmFuc2Zvcm1lci5iaW5kKHRoaXMpLCB3cmFwSW5wdXRGb3JUcmFjaW5nKCksIGFzeW5jICgpID0+IGNhbGxiYWNrTWFuYWdlcl8/LmhhbmRsZUNoYWluU3RhcnQodGhpcy50b0pTT04oKSwgeyBpbnB1dDogXCJcIiB9LCB1bmRlZmluZWQsIGNvbmZpZz8ucnVuVHlwZSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbmZpZz8ucnVuTmFtZSA/PyB0aGlzLmdldE5hbWUoKSksIGNvbmZpZyk7XG4gICAgICAgICAgICBydW5NYW5hZ2VyID0gcGlwZS5zZXR1cDtcbiAgICAgICAgICAgIGNvbnN0IGlzTG9nU3RyZWFtSGFuZGxlciA9IChoYW5kbGVyKSA9PiBoYW5kbGVyLm5hbWUgPT09IFwibG9nX3N0cmVhbV90cmFjZXJcIjtcbiAgICAgICAgICAgIGNvbnN0IHN0cmVhbUxvZ0hhbmRsZXIgPSBydW5NYW5hZ2VyPy5oYW5kbGVycy5maW5kKGlzTG9nU3RyZWFtSGFuZGxlcik7XG4gICAgICAgICAgICBsZXQgaXRlcmF0b3IgPSBwaXBlLm91dHB1dDtcbiAgICAgICAgICAgIGlmIChzdHJlYW1Mb2dIYW5kbGVyICE9PSB1bmRlZmluZWQgJiYgcnVuTWFuYWdlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaXRlcmF0b3IgPSBhd2FpdCBzdHJlYW1Mb2dIYW5kbGVyLnRhcE91dHB1dEl0ZXJhYmxlKHJ1bk1hbmFnZXIucnVuSWQsIHBpcGUub3V0cHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgaXRlcmF0b3IpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCBjaHVuaztcbiAgICAgICAgICAgICAgICBpZiAoZmluYWxPdXRwdXRTdXBwb3J0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbmFsT3V0cHV0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0ID0gY2h1bms7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxPdXRwdXQgPSBjb25jYXQoZmluYWxPdXRwdXQsIGNodW5rKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dFN1cHBvcnRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHtcbiAgICAgICAgICAgICAgICBpbnB1dHM6IF9jb2VyY2VUb0RpY3QoZmluYWxJbnB1dCwgXCJpbnB1dFwiKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChmaW5hbE91dHB1dCA/PyB7fSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgeyBpbnB1dHM6IF9jb2VyY2VUb0RpY3QoZmluYWxJbnB1dCwgXCJpbnB1dFwiKSB9KTtcbiAgICB9XG4gICAgZ2V0R3JhcGgoXykge1xuICAgICAgICBjb25zdCBncmFwaCA9IG5ldyBHcmFwaCgpO1xuICAgICAgICAvLyBUT0RPOiBBZGQgaW5wdXQgc2NoZW1hIGZvciBydW5uYWJsZXNcbiAgICAgICAgY29uc3QgaW5wdXROb2RlID0gZ3JhcGguYWRkTm9kZSh7XG4gICAgICAgICAgICBuYW1lOiBgJHt0aGlzLmdldE5hbWUoKX1JbnB1dGAsXG4gICAgICAgICAgICBzY2hlbWE6IHouYW55KCksXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBydW5uYWJsZU5vZGUgPSBncmFwaC5hZGROb2RlKHRoaXMpO1xuICAgICAgICAvLyBUT0RPOiBBZGQgb3V0cHV0IHNjaGVtYXMgZm9yIHJ1bm5hYmxlc1xuICAgICAgICBjb25zdCBvdXRwdXROb2RlID0gZ3JhcGguYWRkTm9kZSh7XG4gICAgICAgICAgICBuYW1lOiBgJHt0aGlzLmdldE5hbWUoKX1PdXRwdXRgLFxuICAgICAgICAgICAgc2NoZW1hOiB6LmFueSgpLFxuICAgICAgICB9KTtcbiAgICAgICAgZ3JhcGguYWRkRWRnZShpbnB1dE5vZGUsIHJ1bm5hYmxlTm9kZSk7XG4gICAgICAgIGdyYXBoLmFkZEVkZ2UocnVubmFibGVOb2RlLCBvdXRwdXROb2RlKTtcbiAgICAgICAgcmV0dXJuIGdyYXBoO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgcnVubmFibGUgc2VxdWVuY2UgdGhhdCBydW5zIGVhY2ggaW5kaXZpZHVhbCBydW5uYWJsZSBpbiBzZXJpZXMsXG4gICAgICogcGlwaW5nIHRoZSBvdXRwdXQgb2Ygb25lIHJ1bm5hYmxlIGludG8gYW5vdGhlciBydW5uYWJsZSBvciBydW5uYWJsZS1saWtlLlxuICAgICAqIEBwYXJhbSBjb2VyY2VhYmxlIEEgcnVubmFibGUsIGZ1bmN0aW9uLCBvciBvYmplY3Qgd2hvc2UgdmFsdWVzIGFyZSBmdW5jdGlvbnMgb3IgcnVubmFibGVzLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IHJ1bm5hYmxlIHNlcXVlbmNlLlxuICAgICAqL1xuICAgIHBpcGUoY29lcmNlYWJsZSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVTZXF1ZW5jZSh7XG4gICAgICAgICAgICBmaXJzdDogdGhpcyxcbiAgICAgICAgICAgIGxhc3Q6IF9jb2VyY2VUb1J1bm5hYmxlKGNvZXJjZWFibGUpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGljayBrZXlzIGZyb20gdGhlIGRpY3Qgb3V0cHV0IG9mIHRoaXMgcnVubmFibGUuIFJldHVybnMgYSBuZXcgcnVubmFibGUuXG4gICAgICovXG4gICAgcGljayhrZXlzKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgcmV0dXJuIHRoaXMucGlwZShuZXcgUnVubmFibGVQaWNrKGtleXMpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXNzaWducyBuZXcgZmllbGRzIHRvIHRoZSBkaWN0IG91dHB1dCBvZiB0aGlzIHJ1bm5hYmxlLiBSZXR1cm5zIGEgbmV3IHJ1bm5hYmxlLlxuICAgICAqL1xuICAgIGFzc2lnbihtYXBwaW5nKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBpcGUoXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdXNlLWJlZm9yZS1kZWZpbmVcbiAgICAgICAgbmV3IFJ1bm5hYmxlQXNzaWduKFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIG5ldyBSdW5uYWJsZU1hcCh7IHN0ZXBzOiBtYXBwaW5nIH0pKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlZmF1bHQgaW1wbGVtZW50YXRpb24gb2YgdHJhbnNmb3JtLCB3aGljaCBidWZmZXJzIGlucHV0IGFuZCB0aGVuIGNhbGxzIHN0cmVhbS5cbiAgICAgKiBTdWJjbGFzc2VzIHNob3VsZCBvdmVycmlkZSB0aGlzIG1ldGhvZCBpZiB0aGV5IGNhbiBzdGFydCBwcm9kdWNpbmcgb3V0cHV0IHdoaWxlXG4gICAgICogaW5wdXQgaXMgc3RpbGwgYmVpbmcgZ2VuZXJhdGVkLlxuICAgICAqIEBwYXJhbSBnZW5lcmF0b3JcbiAgICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgICAqL1xuICAgIGFzeW5jICp0cmFuc2Zvcm0oZ2VuZXJhdG9yLCBvcHRpb25zKSB7XG4gICAgICAgIGxldCBmaW5hbENodW5rO1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGdlbmVyYXRvcikge1xuICAgICAgICAgICAgaWYgKGZpbmFsQ2h1bmsgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGZpbmFsQ2h1bmsgPSBjaHVuaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIE1ha2UgYSBiZXN0IGVmZm9ydCB0byBnYXRoZXIsIGZvciBhbnkgdHlwZSB0aGF0IHN1cHBvcnRzIGNvbmNhdC5cbiAgICAgICAgICAgICAgICAvLyBUaGlzIG1ldGhvZCBzaG91bGQgdGhyb3cgYW4gZXJyb3IgaWYgZ2F0aGVyaW5nIGZhaWxzLlxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgZmluYWxDaHVuayA9IGNvbmNhdChmaW5hbENodW5rLCBjaHVuayk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgeWllbGQqIHRoaXMuX3N0cmVhbUl0ZXJhdG9yKGZpbmFsQ2h1bmssIGVuc3VyZUNvbmZpZyhvcHRpb25zKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0cmVhbSBhbGwgb3V0cHV0IGZyb20gYSBydW5uYWJsZSwgYXMgcmVwb3J0ZWQgdG8gdGhlIGNhbGxiYWNrIHN5c3RlbS5cbiAgICAgKiBUaGlzIGluY2x1ZGVzIGFsbCBpbm5lciBydW5zIG9mIExMTXMsIFJldHJpZXZlcnMsIFRvb2xzLCBldGMuXG4gICAgICogT3V0cHV0IGlzIHN0cmVhbWVkIGFzIExvZyBvYmplY3RzLCB3aGljaCBpbmNsdWRlIGEgbGlzdCBvZlxuICAgICAqIGpzb25wYXRjaCBvcHMgdGhhdCBkZXNjcmliZSBob3cgdGhlIHN0YXRlIG9mIHRoZSBydW4gaGFzIGNoYW5nZWQgaW4gZWFjaFxuICAgICAqIHN0ZXAsIGFuZCB0aGUgZmluYWwgc3RhdGUgb2YgdGhlIHJ1bi5cbiAgICAgKiBUaGUganNvbnBhdGNoIG9wcyBjYW4gYmUgYXBwbGllZCBpbiBvcmRlciB0byBjb25zdHJ1Y3Qgc3RhdGUuXG4gICAgICogQHBhcmFtIGlucHV0XG4gICAgICogQHBhcmFtIG9wdGlvbnNcbiAgICAgKiBAcGFyYW0gc3RyZWFtT3B0aW9uc1xuICAgICAqL1xuICAgIGFzeW5jICpzdHJlYW1Mb2coaW5wdXQsIG9wdGlvbnMsIHN0cmVhbU9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgbG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyID0gbmV3IExvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlcih7XG4gICAgICAgICAgICAuLi5zdHJlYW1PcHRpb25zLFxuICAgICAgICAgICAgYXV0b0Nsb3NlOiBmYWxzZSxcbiAgICAgICAgICAgIF9zY2hlbWFGb3JtYXQ6IFwib3JpZ2luYWxcIixcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IGVuc3VyZUNvbmZpZyhvcHRpb25zKTtcbiAgICAgICAgeWllbGQqIHRoaXMuX3N0cmVhbUxvZyhpbnB1dCwgbG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyLCBjb25maWcpO1xuICAgIH1cbiAgICBhc3luYyAqX3N0cmVhbUxvZyhpbnB1dCwgbG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyLCBjb25maWcpIHtcbiAgICAgICAgY29uc3QgeyBjYWxsYmFja3MgfSA9IGNvbmZpZztcbiAgICAgICAgaWYgKGNhbGxiYWNrcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGNvbmZpZy5jYWxsYmFja3MgPSBbbG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KGNhbGxiYWNrcykpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICAgICAgY29uZmlnLmNhbGxiYWNrcyA9IGNhbGxiYWNrcy5jb25jYXQoW2xvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlcl0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgY29waWVkQ2FsbGJhY2tzID0gY2FsbGJhY2tzLmNvcHkoKTtcbiAgICAgICAgICAgIGNvcGllZENhbGxiYWNrcy5pbmhlcml0YWJsZUhhbmRsZXJzLnB1c2gobG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyKTtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICAgICAgY29uZmlnLmNhbGxiYWNrcyA9IGNvcGllZENhbGxiYWNrcztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBydW5uYWJsZVN0cmVhbVByb21pc2UgPSB0aGlzLnN0cmVhbShpbnB1dCwgY29uZmlnKTtcbiAgICAgICAgYXN5bmMgZnVuY3Rpb24gY29uc3VtZVJ1bm5hYmxlU3RyZWFtKCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBydW5uYWJsZVN0cmVhbSA9IGF3YWl0IHJ1bm5hYmxlU3RyZWFtUHJvbWlzZTtcbiAgICAgICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHJ1bm5hYmxlU3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhdGNoID0gbmV3IFJ1bkxvZ1BhdGNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3A6IFwiYWRkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IFwiL3N0cmVhbWVkX291dHB1dC8tXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBjaHVuayxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGxvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlci53cml0ZXIud3JpdGUocGF0Y2gpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIGF3YWl0IGxvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlci53cml0ZXIuY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBydW5uYWJsZVN0cmVhbUNvbnN1bWVQcm9taXNlID0gY29uc3VtZVJ1bm5hYmxlU3RyZWFtKCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGxvZyBvZiBsb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCBsb2c7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICBhd2FpdCBydW5uYWJsZVN0cmVhbUNvbnN1bWVQcm9taXNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlIGEgc3RyZWFtIG9mIGV2ZW50cyBlbWl0dGVkIGJ5IHRoZSBpbnRlcm5hbCBzdGVwcyBvZiB0aGUgcnVubmFibGUuXG4gICAgICpcbiAgICAgKiBVc2UgdG8gY3JlYXRlIGFuIGl0ZXJhdG9yIG92ZXIgU3RyZWFtRXZlbnRzIHRoYXQgcHJvdmlkZSByZWFsLXRpbWUgaW5mb3JtYXRpb25cbiAgICAgKiBhYm91dCB0aGUgcHJvZ3Jlc3Mgb2YgdGhlIHJ1bm5hYmxlLCBpbmNsdWRpbmcgU3RyZWFtRXZlbnRzIGZyb20gaW50ZXJtZWRpYXRlXG4gICAgICogcmVzdWx0cy5cbiAgICAgKlxuICAgICAqIEEgU3RyZWFtRXZlbnQgaXMgYSBkaWN0aW9uYXJ5IHdpdGggdGhlIGZvbGxvd2luZyBzY2hlbWE6XG4gICAgICpcbiAgICAgKiAtIGBldmVudGA6IHN0cmluZyAtIEV2ZW50IG5hbWVzIGFyZSBvZiB0aGUgZm9ybWF0OiBvbl9bcnVubmFibGVfdHlwZV1fKHN0YXJ0fHN0cmVhbXxlbmQpLlxuICAgICAqIC0gYG5hbWVgOiBzdHJpbmcgLSBUaGUgbmFtZSBvZiB0aGUgcnVubmFibGUgdGhhdCBnZW5lcmF0ZWQgdGhlIGV2ZW50LlxuICAgICAqIC0gYHJ1bl9pZGA6IHN0cmluZyAtIFJhbmRvbWx5IGdlbmVyYXRlZCBJRCBhc3NvY2lhdGVkIHdpdGggdGhlIGdpdmVuIGV4ZWN1dGlvbiBvZlxuICAgICAqICAgdGhlIHJ1bm5hYmxlIHRoYXQgZW1pdHRlZCB0aGUgZXZlbnQuIEEgY2hpbGQgcnVubmFibGUgdGhhdCBnZXRzIGludm9rZWQgYXMgcGFydCBvZiB0aGUgZXhlY3V0aW9uIG9mIGFcbiAgICAgKiAgIHBhcmVudCBydW5uYWJsZSBpcyBhc3NpZ25lZCBpdHMgb3duIHVuaXF1ZSBJRC5cbiAgICAgKiAtIGB0YWdzYDogc3RyaW5nW10gLSBUaGUgdGFncyBvZiB0aGUgcnVubmFibGUgdGhhdCBnZW5lcmF0ZWQgdGhlIGV2ZW50LlxuICAgICAqIC0gYG1ldGFkYXRhYDogUmVjb3JkPHN0cmluZywgYW55PiAtIFRoZSBtZXRhZGF0YSBvZiB0aGUgcnVubmFibGUgdGhhdCBnZW5lcmF0ZWQgdGhlIGV2ZW50LlxuICAgICAqIC0gYGRhdGFgOiBSZWNvcmQ8c3RyaW5nLCBhbnk+XG4gICAgICpcbiAgICAgKiBCZWxvdyBpcyBhIHRhYmxlIHRoYXQgaWxsdXN0cmF0ZXMgc29tZSBldmVudHMgdGhhdCBtaWdodCBiZSBlbWl0dGVkIGJ5IHZhcmlvdXNcbiAgICAgKiBjaGFpbnMuIE1ldGFkYXRhIGZpZWxkcyBoYXZlIGJlZW4gb21pdHRlZCBmcm9tIHRoZSB0YWJsZSBmb3IgYnJldml0eS5cbiAgICAgKiBDaGFpbiBkZWZpbml0aW9ucyBoYXZlIGJlZW4gaW5jbHVkZWQgYWZ0ZXIgdGhlIHRhYmxlLlxuICAgICAqXG4gICAgICogfCBldmVudCAgICAgICAgICAgICAgICB8IG5hbWUgICAgICAgICAgICAgfCBjaHVuayAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgaW5wdXQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgb3V0cHV0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAqIHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXxcbiAgICAgKiB8IG9uX2xsbV9zdGFydCAgICAgICAgIHwgW21vZGVsIG5hbWVdICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB7J2lucHV0JzogJ2hlbGxvJ30gICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICogfCBvbl9sbG1fc3RyZWFtICAgICAgICB8IFttb2RlbCBuYW1lXSAgICAgfCAnSGVsbG8nIE9SIEFJTWVzc2FnZUNodW5rKFwiaGVsbG9cIikgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICogfCBvbl9sbG1fZW5kICAgICAgICAgICB8IFttb2RlbCBuYW1lXSAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgJ0hlbGxvIGh1bWFuIScgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICAgKiB8IG9uX2NoYWluX3N0YXJ0ICAgICAgIHwgZm9ybWF0X2RvY3MgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICogfCBvbl9jaGFpbl9zdHJlYW0gICAgICB8IGZvcm1hdF9kb2NzICAgICAgfCBcImhlbGxvIHdvcmxkISwgZ29vZGJ5ZSB3b3JsZCFcIiAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICogfCBvbl9jaGFpbl9lbmQgICAgICAgICB8IGZvcm1hdF9kb2NzICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgW0RvY3VtZW50KC4uLildICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgXCJoZWxsbyB3b3JsZCEsIGdvb2RieWUgd29ybGQhXCIgICAgICAgICAgICAgICAgICB8XG4gICAgICogfCBvbl90b29sX3N0YXJ0ICAgICAgICB8IHNvbWVfdG9vbCAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwge1wieFwiOiAxLCBcInlcIjogXCIyXCJ9ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAqIHwgb25fdG9vbF9zdHJlYW0gICAgICAgfCBzb21lX3Rvb2wgICAgICAgIHwgICB7XCJ4XCI6IDEsIFwieVwiOiBcIjJcIn0gICAgICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICAgKiB8IG9uX3Rvb2xfZW5kICAgICAgICAgIHwgc29tZV90b29sICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB7XCJ4XCI6IDEsIFwieVwiOiBcIjJcIn0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICogfCBvbl9yZXRyaWV2ZXJfc3RhcnQgICB8IFtyZXRyaWV2ZXIgbmFtZV0gfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwge1wicXVlcnlcIjogXCJoZWxsb1wifSAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICAgKiB8IG9uX3JldHJpZXZlcl9jaHVuayAgIHwgW3JldHJpZXZlciBuYW1lXSB8ICB7ZG9jdW1lbnRzOiBbLi4uXX0gICAgICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8XG4gICAgICogfCBvbl9yZXRyaWV2ZXJfZW5kICAgICB8IFtyZXRyaWV2ZXIgbmFtZV0gfCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwge1wicXVlcnlcIjogXCJoZWxsb1wifSAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHtkb2N1bWVudHM6IFsuLi5dfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHxcbiAgICAgKiB8IG9uX3Byb21wdF9zdGFydCAgICAgIHwgW3RlbXBsYXRlX25hbWVdICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfCB7XCJxdWVzdGlvblwiOiBcImhlbGxvXCJ9ICAgICAgICAgICAgICAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfFxuICAgICAqIHwgb25fcHJvbXB0X2VuZCAgICAgICAgfCBbdGVtcGxhdGVfbmFtZV0gIHwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IHtcInF1ZXN0aW9uXCI6IFwiaGVsbG9cIn0gICAgICAgICAgICAgICAgICAgICAgICAgfCBDaGF0UHJvbXB0VmFsdWUobWVzc2FnZXM6IFtTeXN0ZW1NZXNzYWdlLCAuLi5dKSB8XG4gICAgICovXG4gICAgYXN5bmMgKnN0cmVhbUV2ZW50cyhpbnB1dCwgb3B0aW9ucywgc3RyZWFtT3B0aW9ucykge1xuICAgICAgICBpZiAob3B0aW9ucy52ZXJzaW9uICE9PSBcInYxXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgT25seSB2ZXJzaW9uIFwidjFcIiBvZiB0aGUgZXZlbnRzIHNjaGVtYSBpcyBjdXJyZW50bHkgc3VwcG9ydGVkLmApO1xuICAgICAgICB9XG4gICAgICAgIGxldCBydW5Mb2c7XG4gICAgICAgIGxldCBoYXNFbmNvdW50ZXJlZFN0YXJ0RXZlbnQgPSBmYWxzZTtcbiAgICAgICAgY29uc3QgY29uZmlnID0gZW5zdXJlQ29uZmlnKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCByb290VGFncyA9IGNvbmZpZy50YWdzID8/IFtdO1xuICAgICAgICBjb25zdCByb290TWV0YWRhdGEgPSBjb25maWcubWV0YWRhdGEgPz8ge307XG4gICAgICAgIGNvbnN0IHJvb3ROYW1lID0gY29uZmlnLnJ1bk5hbWUgPz8gdGhpcy5nZXROYW1lKCk7XG4gICAgICAgIGNvbnN0IGxvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlciA9IG5ldyBMb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIoe1xuICAgICAgICAgICAgLi4uc3RyZWFtT3B0aW9ucyxcbiAgICAgICAgICAgIGF1dG9DbG9zZTogZmFsc2UsXG4gICAgICAgICAgICBfc2NoZW1hRm9ybWF0OiBcInN0cmVhbWluZ19ldmVudHNcIixcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHJvb3RFdmVudEZpbHRlciA9IG5ldyBfUm9vdEV2ZW50RmlsdGVyKHtcbiAgICAgICAgICAgIC4uLnN0cmVhbU9wdGlvbnMsXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBsb2dTdHJlYW0gPSB0aGlzLl9zdHJlYW1Mb2coaW5wdXQsIGxvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlciwgY29uZmlnKTtcbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBsb2cgb2YgbG9nU3RyZWFtKSB7XG4gICAgICAgICAgICBpZiAoIXJ1bkxvZykge1xuICAgICAgICAgICAgICAgIHJ1bkxvZyA9IFJ1bkxvZy5mcm9tUnVuTG9nUGF0Y2gobG9nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJ1bkxvZyA9IHJ1bkxvZy5jb25jYXQobG9nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChydW5Mb2cuc3RhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW50ZXJuYWwgZXJyb3I6IFwic3RyZWFtRXZlbnRzXCIgc3RhdGUgaXMgbWlzc2luZy4gUGxlYXNlIG9wZW4gYSBidWcgcmVwb3J0LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gWWllbGQgdGhlIHN0YXJ0IGV2ZW50IGZvciB0aGUgcm9vdCBydW5uYWJsZSBpZiBpdCBoYXNuJ3QgYmVlbiBzZWVuLlxuICAgICAgICAgICAgLy8gVGhlIHJvb3QgcnVuIGlzIG5ldmVyIGZpbHRlcmVkIG91dFxuICAgICAgICAgICAgaWYgKCFoYXNFbmNvdW50ZXJlZFN0YXJ0RXZlbnQpIHtcbiAgICAgICAgICAgICAgICBoYXNFbmNvdW50ZXJlZFN0YXJ0RXZlbnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXRlID0geyAuLi5ydW5Mb2cuc3RhdGUgfTtcbiAgICAgICAgICAgICAgICBjb25zdCBldmVudCA9IHtcbiAgICAgICAgICAgICAgICAgICAgcnVuX2lkOiBzdGF0ZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6IGBvbl8ke3N0YXRlLnR5cGV9X3N0YXJ0YCxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogcm9vdE5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHRhZ3M6IHJvb3RUYWdzLFxuICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YTogcm9vdE1ldGFkYXRhLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChyb290RXZlbnRGaWx0ZXIuaW5jbHVkZUV2ZW50KGV2ZW50LCBzdGF0ZS50eXBlKSkge1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCBldmVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwYXRocyA9IGxvZy5vcHNcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChvcCkgPT4gb3AucGF0aC5zdGFydHNXaXRoKFwiL2xvZ3MvXCIpKVxuICAgICAgICAgICAgICAgIC5tYXAoKG9wKSA9PiBvcC5wYXRoLnNwbGl0KFwiL1wiKVsyXSk7XG4gICAgICAgICAgICBjb25zdCBkZWR1cGVkUGF0aHMgPSBbLi4ubmV3IFNldChwYXRocyldO1xuICAgICAgICAgICAgZm9yIChjb25zdCBwYXRoIG9mIGRlZHVwZWRQYXRocykge1xuICAgICAgICAgICAgICAgIGxldCBldmVudFR5cGU7XG4gICAgICAgICAgICAgICAgbGV0IGRhdGEgPSB7fTtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2dFbnRyeSA9IHJ1bkxvZy5zdGF0ZS5sb2dzW3BhdGhdO1xuICAgICAgICAgICAgICAgIGlmIChsb2dFbnRyeS5lbmRfdGltZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsb2dFbnRyeS5zdHJlYW1lZF9vdXRwdXQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRUeXBlID0gXCJzdHJlYW1cIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50VHlwZSA9IFwic3RhcnRcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRUeXBlID0gXCJlbmRcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50VHlwZSA9PT0gXCJzdGFydFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEluY2x1ZGUgdGhlIGlucHV0cyB3aXRoIHRoZSBzdGFydCBldmVudCBpZiB0aGV5IGFyZSBhdmFpbGFibGUuXG4gICAgICAgICAgICAgICAgICAgIC8vIFVzdWFsbHkgdGhleSB3aWxsIE5PVCBiZSBhdmFpbGFibGUgZm9yIGNvbXBvbmVudHMgdGhhdCBvcGVyYXRlXG4gICAgICAgICAgICAgICAgICAgIC8vIG9uIHN0cmVhbXMsIHNpbmNlIHRob3NlIGNvbXBvbmVudHMgc3RyZWFtIHRoZSBpbnB1dCBhbmRcbiAgICAgICAgICAgICAgICAgICAgLy8gZG9uJ3Qga25vdyBpdHMgZmluYWwgdmFsdWUgdW50aWwgdGhlIGVuZCBvZiB0aGUgc3RyZWFtLlxuICAgICAgICAgICAgICAgICAgICBpZiAobG9nRW50cnkuaW5wdXRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuaW5wdXQgPSBsb2dFbnRyeS5pbnB1dHM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnRUeXBlID09PSBcImVuZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsb2dFbnRyeS5pbnB1dHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5pbnB1dCA9IGxvZ0VudHJ5LmlucHV0cztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBkYXRhLm91dHB1dCA9IGxvZ0VudHJ5LmZpbmFsX291dHB1dDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZXZlbnRUeXBlID09PSBcInN0cmVhbVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNodW5rQ291bnQgPSBsb2dFbnRyeS5zdHJlYW1lZF9vdXRwdXQubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2h1bmtDb3VudCAhPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBleGFjdGx5IG9uZSBjaHVuayBvZiBzdHJlYW1lZCBvdXRwdXQsIGdvdCAke2NodW5rQ291bnR9IGluc3RlYWQuIEVuY291bnRlcmVkIGluOiBcIiR7bG9nRW50cnkubmFtZX1cImApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSB7IGNodW5rOiBsb2dFbnRyeS5zdHJlYW1lZF9vdXRwdXRbMF0gfTtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIHN0cmVhbSwgd2UgZG9uJ3QgbmVlZCBpdCBhbnltb3JlLlxuICAgICAgICAgICAgICAgICAgICAvLyBBbmQgdGhpcyBhdm9pZHMgZHVwbGljYXRlcyBhcyB3ZWxsIVxuICAgICAgICAgICAgICAgICAgICBsb2dFbnRyeS5zdHJlYW1lZF9vdXRwdXQgPSBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgeWllbGQge1xuICAgICAgICAgICAgICAgICAgICBldmVudDogYG9uXyR7bG9nRW50cnkudHlwZX1fJHtldmVudFR5cGV9YCxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogbG9nRW50cnkubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgcnVuX2lkOiBsb2dFbnRyeS5pZCxcbiAgICAgICAgICAgICAgICAgICAgdGFnczogbG9nRW50cnkudGFncyxcbiAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGE6IGxvZ0VudHJ5Lm1ldGFkYXRhLFxuICAgICAgICAgICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBGaW5hbGx5LCB3ZSB0YWtlIGNhcmUgb2YgdGhlIHN0cmVhbWluZyBvdXRwdXQgZnJvbSB0aGUgcm9vdCBjaGFpblxuICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgYW55LlxuICAgICAgICAgICAgY29uc3QgeyBzdGF0ZSB9ID0gcnVuTG9nO1xuICAgICAgICAgICAgaWYgKHN0YXRlLnN0cmVhbWVkX291dHB1dC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2h1bmtDb3VudCA9IHN0YXRlLnN0cmVhbWVkX291dHB1dC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgaWYgKGNodW5rQ291bnQgIT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3RlZCBleGFjdGx5IG9uZSBjaHVuayBvZiBzdHJlYW1lZCBvdXRwdXQsIGdvdCAke2NodW5rQ291bnR9IGluc3RlYWQuIEVuY291bnRlcmVkIGluOiBcIiR7c3RhdGUubmFtZX1cImApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0geyBjaHVuazogc3RhdGUuc3RyZWFtZWRfb3V0cHV0WzBdIH07XG4gICAgICAgICAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIHN0cmVhbSwgd2UgZG9uJ3QgbmVlZCBpdCBhbnltb3JlLlxuICAgICAgICAgICAgICAgIHN0YXRlLnN0cmVhbWVkX291dHB1dCA9IFtdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0ge1xuICAgICAgICAgICAgICAgICAgICBldmVudDogYG9uXyR7c3RhdGUudHlwZX1fc3RyZWFtYCxcbiAgICAgICAgICAgICAgICAgICAgcnVuX2lkOiBzdGF0ZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgdGFnczogcm9vdFRhZ3MsXG4gICAgICAgICAgICAgICAgICAgIG1ldGFkYXRhOiByb290TWV0YWRhdGEsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHJvb3ROYW1lLFxuICAgICAgICAgICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKHJvb3RFdmVudEZpbHRlci5pbmNsdWRlRXZlbnQoZXZlbnQsIHN0YXRlLnR5cGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIGV2ZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGF0ZSA9IHJ1bkxvZz8uc3RhdGU7XG4gICAgICAgIGlmIChzdGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyBGaW5hbGx5LCB5aWVsZCB0aGUgZW5kIGV2ZW50IGZvciB0aGUgcm9vdCBydW5uYWJsZS5cbiAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0ge1xuICAgICAgICAgICAgICAgIGV2ZW50OiBgb25fJHtzdGF0ZS50eXBlfV9lbmRgLFxuICAgICAgICAgICAgICAgIG5hbWU6IHJvb3ROYW1lLFxuICAgICAgICAgICAgICAgIHJ1bl9pZDogc3RhdGUuaWQsXG4gICAgICAgICAgICAgICAgdGFnczogcm9vdFRhZ3MsXG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IHJvb3RNZXRhZGF0YSxcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dDogc3RhdGUuZmluYWxfb3V0cHV0LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHJvb3RFdmVudEZpbHRlci5pbmNsdWRlRXZlbnQoZXZlbnQsIHN0YXRlLnR5cGUpKVxuICAgICAgICAgICAgICAgIHlpZWxkIGV2ZW50O1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgc3RhdGljIGlzUnVubmFibGUodGhpbmcpIHtcbiAgICAgICAgcmV0dXJuIGlzUnVubmFibGVJbnRlcmZhY2UodGhpbmcpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCaW5kIGxpZmVjeWNsZSBsaXN0ZW5lcnMgdG8gYSBSdW5uYWJsZSwgcmV0dXJuaW5nIGEgbmV3IFJ1bm5hYmxlLlxuICAgICAqIFRoZSBSdW4gb2JqZWN0IGNvbnRhaW5zIGluZm9ybWF0aW9uIGFib3V0IHRoZSBydW4sIGluY2x1ZGluZyBpdHMgaWQsXG4gICAgICogdHlwZSwgaW5wdXQsIG91dHB1dCwgZXJyb3IsIHN0YXJ0VGltZSwgZW5kVGltZSwgYW5kIGFueSB0YWdzIG9yIG1ldGFkYXRhXG4gICAgICogYWRkZWQgdG8gdGhlIHJ1bi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgLSBUaGUgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGNhbGxiYWNrIGZ1bmN0aW9ucy5cbiAgICAgKiBAcGFyYW0geyhydW46IFJ1bikgPT4gdm9pZH0gcGFyYW1zLm9uU3RhcnQgLSBDYWxsZWQgYmVmb3JlIHRoZSBydW5uYWJsZSBzdGFydHMgcnVubmluZywgd2l0aCB0aGUgUnVuIG9iamVjdC5cbiAgICAgKiBAcGFyYW0geyhydW46IFJ1bikgPT4gdm9pZH0gcGFyYW1zLm9uRW5kIC0gQ2FsbGVkIGFmdGVyIHRoZSBydW5uYWJsZSBmaW5pc2hlcyBydW5uaW5nLCB3aXRoIHRoZSBSdW4gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7KHJ1bjogUnVuKSA9PiB2b2lkfSBwYXJhbXMub25FcnJvciAtIENhbGxlZCBpZiB0aGUgcnVubmFibGUgdGhyb3dzIGFuIGVycm9yLCB3aXRoIHRoZSBSdW4gb2JqZWN0LlxuICAgICAqL1xuICAgIHdpdGhMaXN0ZW5lcnMoeyBvblN0YXJ0LCBvbkVuZCwgb25FcnJvciwgfSkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVCaW5kaW5nKHtcbiAgICAgICAgICAgIGJvdW5kOiB0aGlzLFxuICAgICAgICAgICAgY29uZmlnOiB7fSxcbiAgICAgICAgICAgIGNvbmZpZ0ZhY3RvcmllczogW1xuICAgICAgICAgICAgICAgIChjb25maWcpID0+ICh7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFJvb3RMaXN0ZW5lcnNUcmFjZXIoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvblN0YXJ0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRW5kLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRXJyb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8qKlxuICogQSBydW5uYWJsZSB0aGF0IGRlbGVnYXRlcyBjYWxscyB0byBhbm90aGVyIHJ1bm5hYmxlIHdpdGggYSBzZXQgb2Yga3dhcmdzLlxuICovXG5leHBvcnQgY2xhc3MgUnVubmFibGVCaW5kaW5nIGV4dGVuZHMgUnVubmFibGUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJSdW5uYWJsZUJpbmRpbmdcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJydW5uYWJsZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYm91bmRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY29uZmlnXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImt3YXJnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjb25maWdGYWN0b3JpZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5ib3VuZCA9IGZpZWxkcy5ib3VuZDtcbiAgICAgICAgdGhpcy5rd2FyZ3MgPSBmaWVsZHMua3dhcmdzO1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGZpZWxkcy5jb25maWc7XG4gICAgICAgIHRoaXMuY29uZmlnRmFjdG9yaWVzID0gZmllbGRzLmNvbmZpZ0ZhY3RvcmllcztcbiAgICB9XG4gICAgZ2V0TmFtZShzdWZmaXgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYm91bmQuZ2V0TmFtZShzdWZmaXgpO1xuICAgIH1cbiAgICBhc3luYyBfbWVyZ2VDb25maWcoLi4ub3B0aW9ucykge1xuICAgICAgICBjb25zdCBjb25maWcgPSBtZXJnZUNvbmZpZ3ModGhpcy5jb25maWcsIC4uLm9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gbWVyZ2VDb25maWdzKGNvbmZpZywgLi4uKHRoaXMuY29uZmlnRmFjdG9yaWVzXG4gICAgICAgICAgICA/IGF3YWl0IFByb21pc2UuYWxsKHRoaXMuY29uZmlnRmFjdG9yaWVzLm1hcChhc3luYyAoY29uZmlnRmFjdG9yeSkgPT4gYXdhaXQgY29uZmlnRmFjdG9yeShjb25maWcpKSlcbiAgICAgICAgICAgIDogW10pKTtcbiAgICB9XG4gICAgYmluZChrd2FyZ3MpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgcmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHtcbiAgICAgICAgICAgIGJvdW5kOiB0aGlzLmJvdW5kLFxuICAgICAgICAgICAga3dhcmdzOiB7IC4uLnRoaXMua3dhcmdzLCAuLi5rd2FyZ3MgfSxcbiAgICAgICAgICAgIGNvbmZpZzogdGhpcy5jb25maWcsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICB3aXRoQ29uZmlnKGNvbmZpZykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3Ioe1xuICAgICAgICAgICAgYm91bmQ6IHRoaXMuYm91bmQsXG4gICAgICAgICAgICBrd2FyZ3M6IHRoaXMua3dhcmdzLFxuICAgICAgICAgICAgY29uZmlnOiB7IC4uLnRoaXMuY29uZmlnLCAuLi5jb25maWcgfSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHdpdGhSZXRyeShmaWVsZHMpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgcmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHtcbiAgICAgICAgICAgIGJvdW5kOiB0aGlzLmJvdW5kLndpdGhSZXRyeShmaWVsZHMpLFxuICAgICAgICAgICAga3dhcmdzOiB0aGlzLmt3YXJncyxcbiAgICAgICAgICAgIGNvbmZpZzogdGhpcy5jb25maWcsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBpbnZva2UoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYm91bmQuaW52b2tlKGlucHV0LCBhd2FpdCB0aGlzLl9tZXJnZUNvbmZpZyhvcHRpb25zLCB0aGlzLmt3YXJncykpO1xuICAgIH1cbiAgICBhc3luYyBiYXRjaChpbnB1dHMsIG9wdGlvbnMsIGJhdGNoT3B0aW9ucykge1xuICAgICAgICBjb25zdCBtZXJnZWRPcHRpb25zID0gQXJyYXkuaXNBcnJheShvcHRpb25zKVxuICAgICAgICAgICAgPyBhd2FpdCBQcm9taXNlLmFsbChvcHRpb25zLm1hcChhc3luYyAoaW5kaXZpZHVhbE9wdGlvbikgPT4gdGhpcy5fbWVyZ2VDb25maWcoaW5kaXZpZHVhbE9wdGlvbiwgdGhpcy5rd2FyZ3MpKSlcbiAgICAgICAgICAgIDogYXdhaXQgdGhpcy5fbWVyZ2VDb25maWcob3B0aW9ucywgdGhpcy5rd2FyZ3MpO1xuICAgICAgICByZXR1cm4gdGhpcy5ib3VuZC5iYXRjaChpbnB1dHMsIG1lcmdlZE9wdGlvbnMsIGJhdGNoT3B0aW9ucyk7XG4gICAgfVxuICAgIGFzeW5jICpfc3RyZWFtSXRlcmF0b3IoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgeWllbGQqIHRoaXMuYm91bmQuX3N0cmVhbUl0ZXJhdG9yKGlucHV0LCBhd2FpdCB0aGlzLl9tZXJnZUNvbmZpZyhvcHRpb25zLCB0aGlzLmt3YXJncykpO1xuICAgIH1cbiAgICBhc3luYyBzdHJlYW0oaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYm91bmQuc3RyZWFtKGlucHV0LCBhd2FpdCB0aGlzLl9tZXJnZUNvbmZpZyhvcHRpb25zLCB0aGlzLmt3YXJncykpO1xuICAgIH1cbiAgICBhc3luYyAqdHJhbnNmb3JtKFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgZ2VuZXJhdG9yLCBvcHRpb25zKSB7XG4gICAgICAgIHlpZWxkKiB0aGlzLmJvdW5kLnRyYW5zZm9ybShnZW5lcmF0b3IsIGF3YWl0IHRoaXMuX21lcmdlQ29uZmlnKG9wdGlvbnMsIHRoaXMua3dhcmdzKSk7XG4gICAgfVxuICAgIGFzeW5jICpzdHJlYW1FdmVudHMoaW5wdXQsIG9wdGlvbnMsIHN0cmVhbU9wdGlvbnMpIHtcbiAgICAgICAgeWllbGQqIHRoaXMuYm91bmQuc3RyZWFtRXZlbnRzKGlucHV0LCB7XG4gICAgICAgICAgICAuLi4oYXdhaXQgdGhpcy5fbWVyZ2VDb25maWcob3B0aW9ucywgdGhpcy5rd2FyZ3MpKSxcbiAgICAgICAgICAgIHZlcnNpb246IG9wdGlvbnMudmVyc2lvbixcbiAgICAgICAgfSwgc3RyZWFtT3B0aW9ucyk7XG4gICAgfVxuICAgIHN0YXRpYyBpc1J1bm5hYmxlQmluZGluZyhcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHRoaW5nXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICApIHtcbiAgICAgICAgcmV0dXJuIHRoaW5nLmJvdW5kICYmIFJ1bm5hYmxlLmlzUnVubmFibGUodGhpbmcuYm91bmQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCaW5kIGxpZmVjeWNsZSBsaXN0ZW5lcnMgdG8gYSBSdW5uYWJsZSwgcmV0dXJuaW5nIGEgbmV3IFJ1bm5hYmxlLlxuICAgICAqIFRoZSBSdW4gb2JqZWN0IGNvbnRhaW5zIGluZm9ybWF0aW9uIGFib3V0IHRoZSBydW4sIGluY2x1ZGluZyBpdHMgaWQsXG4gICAgICogdHlwZSwgaW5wdXQsIG91dHB1dCwgZXJyb3IsIHN0YXJ0VGltZSwgZW5kVGltZSwgYW5kIGFueSB0YWdzIG9yIG1ldGFkYXRhXG4gICAgICogYWRkZWQgdG8gdGhlIHJ1bi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgLSBUaGUgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGNhbGxiYWNrIGZ1bmN0aW9ucy5cbiAgICAgKiBAcGFyYW0geyhydW46IFJ1bikgPT4gdm9pZH0gcGFyYW1zLm9uU3RhcnQgLSBDYWxsZWQgYmVmb3JlIHRoZSBydW5uYWJsZSBzdGFydHMgcnVubmluZywgd2l0aCB0aGUgUnVuIG9iamVjdC5cbiAgICAgKiBAcGFyYW0geyhydW46IFJ1bikgPT4gdm9pZH0gcGFyYW1zLm9uRW5kIC0gQ2FsbGVkIGFmdGVyIHRoZSBydW5uYWJsZSBmaW5pc2hlcyBydW5uaW5nLCB3aXRoIHRoZSBSdW4gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7KHJ1bjogUnVuKSA9PiB2b2lkfSBwYXJhbXMub25FcnJvciAtIENhbGxlZCBpZiB0aGUgcnVubmFibGUgdGhyb3dzIGFuIGVycm9yLCB3aXRoIHRoZSBSdW4gb2JqZWN0LlxuICAgICAqL1xuICAgIHdpdGhMaXN0ZW5lcnMoeyBvblN0YXJ0LCBvbkVuZCwgb25FcnJvciwgfSkge1xuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlQmluZGluZyh7XG4gICAgICAgICAgICBib3VuZDogdGhpcy5ib3VuZCxcbiAgICAgICAgICAgIGt3YXJnczogdGhpcy5rd2FyZ3MsXG4gICAgICAgICAgICBjb25maWc6IHRoaXMuY29uZmlnLFxuICAgICAgICAgICAgY29uZmlnRmFjdG9yaWVzOiBbXG4gICAgICAgICAgICAgICAgKGNvbmZpZykgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgUm9vdExpc3RlbmVyc1RyYWNlcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uU3RhcnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25FbmQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25FcnJvcixcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLyoqXG4gKiBBIHJ1bm5hYmxlIHRoYXQgZGVsZWdhdGVzIGNhbGxzIHRvIGFub3RoZXIgcnVubmFibGVcbiAqIHdpdGggZWFjaCBlbGVtZW50IG9mIHRoZSBpbnB1dCBzZXF1ZW5jZS5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5hYmxlRWFjaCBleHRlbmRzIFJ1bm5hYmxlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiUnVubmFibGVFYWNoXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJydW5uYWJsZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImJvdW5kXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYm91bmQgPSBmaWVsZHMuYm91bmQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJpbmRzIHRoZSBydW5uYWJsZSB3aXRoIHRoZSBzcGVjaWZpZWQgYXJndW1lbnRzLlxuICAgICAqIEBwYXJhbSBrd2FyZ3MgVGhlIGFyZ3VtZW50cyB0byBiaW5kIHRoZSBydW5uYWJsZSB3aXRoLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IGluc3RhbmNlIG9mIHRoZSBgUnVubmFibGVFYWNoYCBjbGFzcyB0aGF0IGlzIGJvdW5kIHdpdGggdGhlIHNwZWNpZmllZCBhcmd1bWVudHMuXG4gICAgICovXG4gICAgYmluZChrd2FyZ3MpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZUVhY2goe1xuICAgICAgICAgICAgYm91bmQ6IHRoaXMuYm91bmQuYmluZChrd2FyZ3MpLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW52b2tlcyB0aGUgcnVubmFibGUgd2l0aCB0aGUgc3BlY2lmaWVkIGlucHV0IGFuZCBjb25maWd1cmF0aW9uLlxuICAgICAqIEBwYXJhbSBpbnB1dCBUaGUgaW5wdXQgdG8gaW52b2tlIHRoZSBydW5uYWJsZSB3aXRoLlxuICAgICAqIEBwYXJhbSBjb25maWcgVGhlIGNvbmZpZ3VyYXRpb24gdG8gaW52b2tlIHRoZSBydW5uYWJsZSB3aXRoLlxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRoZSBvdXRwdXQgb2YgdGhlIHJ1bm5hYmxlLlxuICAgICAqL1xuICAgIGFzeW5jIGludm9rZShpbnB1dHMsIGNvbmZpZykge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FsbFdpdGhDb25maWcodGhpcy5faW52b2tlLCBpbnB1dHMsIGNvbmZpZyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgaGVscGVyIG1ldGhvZCB0aGF0IGlzIHVzZWQgdG8gaW52b2tlIHRoZSBydW5uYWJsZSB3aXRoIHRoZSBzcGVjaWZpZWQgaW5wdXQgYW5kIGNvbmZpZ3VyYXRpb24uXG4gICAgICogQHBhcmFtIGlucHV0IFRoZSBpbnB1dCB0byBpbnZva2UgdGhlIHJ1bm5hYmxlIHdpdGguXG4gICAgICogQHBhcmFtIGNvbmZpZyBUaGUgY29uZmlndXJhdGlvbiB0byBpbnZva2UgdGhlIHJ1bm5hYmxlIHdpdGguXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIG91dHB1dCBvZiB0aGUgcnVubmFibGUuXG4gICAgICovXG4gICAgYXN5bmMgX2ludm9rZShpbnB1dHMsIGNvbmZpZywgcnVuTWFuYWdlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5ib3VuZC5iYXRjaChpbnB1dHMsIHBhdGNoQ29uZmlnKGNvbmZpZywgeyBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKCkgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCaW5kIGxpZmVjeWNsZSBsaXN0ZW5lcnMgdG8gYSBSdW5uYWJsZSwgcmV0dXJuaW5nIGEgbmV3IFJ1bm5hYmxlLlxuICAgICAqIFRoZSBSdW4gb2JqZWN0IGNvbnRhaW5zIGluZm9ybWF0aW9uIGFib3V0IHRoZSBydW4sIGluY2x1ZGluZyBpdHMgaWQsXG4gICAgICogdHlwZSwgaW5wdXQsIG91dHB1dCwgZXJyb3IsIHN0YXJ0VGltZSwgZW5kVGltZSwgYW5kIGFueSB0YWdzIG9yIG1ldGFkYXRhXG4gICAgICogYWRkZWQgdG8gdGhlIHJ1bi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgLSBUaGUgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGNhbGxiYWNrIGZ1bmN0aW9ucy5cbiAgICAgKiBAcGFyYW0geyhydW46IFJ1bikgPT4gdm9pZH0gcGFyYW1zLm9uU3RhcnQgLSBDYWxsZWQgYmVmb3JlIHRoZSBydW5uYWJsZSBzdGFydHMgcnVubmluZywgd2l0aCB0aGUgUnVuIG9iamVjdC5cbiAgICAgKiBAcGFyYW0geyhydW46IFJ1bikgPT4gdm9pZH0gcGFyYW1zLm9uRW5kIC0gQ2FsbGVkIGFmdGVyIHRoZSBydW5uYWJsZSBmaW5pc2hlcyBydW5uaW5nLCB3aXRoIHRoZSBSdW4gb2JqZWN0LlxuICAgICAqIEBwYXJhbSB7KHJ1bjogUnVuKSA9PiB2b2lkfSBwYXJhbXMub25FcnJvciAtIENhbGxlZCBpZiB0aGUgcnVubmFibGUgdGhyb3dzIGFuIGVycm9yLCB3aXRoIHRoZSBSdW4gb2JqZWN0LlxuICAgICAqL1xuICAgIHdpdGhMaXN0ZW5lcnMoeyBvblN0YXJ0LCBvbkVuZCwgb25FcnJvciwgfSkge1xuICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlRWFjaCh7XG4gICAgICAgICAgICBib3VuZDogdGhpcy5ib3VuZC53aXRoTGlzdGVuZXJzKHsgb25TdGFydCwgb25FbmQsIG9uRXJyb3IgfSksXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgcnVubmFibGVzIHRoYXQgY2FuIGJlIHJldHJpZWQgYVxuICogc3BlY2lmaWVkIG51bWJlciBvZiB0aW1lcy5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5hYmxlUmV0cnkgZXh0ZW5kcyBSdW5uYWJsZUJpbmRpbmcge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJSdW5uYWJsZVJldHJ5XCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwicnVubmFibGVzXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtYXhBdHRlbXB0TnVtYmVyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiAzXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvbkZhaWxlZEF0dGVtcHRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6ICgpID0+IHsgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5tYXhBdHRlbXB0TnVtYmVyID0gZmllbGRzLm1heEF0dGVtcHROdW1iZXIgPz8gdGhpcy5tYXhBdHRlbXB0TnVtYmVyO1xuICAgICAgICB0aGlzLm9uRmFpbGVkQXR0ZW1wdCA9IGZpZWxkcy5vbkZhaWxlZEF0dGVtcHQgPz8gdGhpcy5vbkZhaWxlZEF0dGVtcHQ7XG4gICAgfVxuICAgIF9wYXRjaENvbmZpZ0ZvclJldHJ5KGF0dGVtcHQsIGNvbmZpZywgcnVuTWFuYWdlcikge1xuICAgICAgICBjb25zdCB0YWcgPSBhdHRlbXB0ID4gMSA/IGByZXRyeTphdHRlbXB0OiR7YXR0ZW1wdH1gIDogdW5kZWZpbmVkO1xuICAgICAgICByZXR1cm4gcGF0Y2hDb25maWcoY29uZmlnLCB7IGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQodGFnKSB9KTtcbiAgICB9XG4gICAgYXN5bmMgX2ludm9rZShpbnB1dCwgY29uZmlnLCBydW5NYW5hZ2VyKSB7XG4gICAgICAgIHJldHVybiBwUmV0cnkoKGF0dGVtcHROdW1iZXIpID0+IHN1cGVyLmludm9rZShpbnB1dCwgdGhpcy5fcGF0Y2hDb25maWdGb3JSZXRyeShhdHRlbXB0TnVtYmVyLCBjb25maWcsIHJ1bk1hbmFnZXIpKSwge1xuICAgICAgICAgICAgb25GYWlsZWRBdHRlbXB0OiB0aGlzLm9uRmFpbGVkQXR0ZW1wdCxcbiAgICAgICAgICAgIHJldHJpZXM6IE1hdGgubWF4KHRoaXMubWF4QXR0ZW1wdE51bWJlciAtIDEsIDApLFxuICAgICAgICAgICAgcmFuZG9taXplOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHRoYXQgaW52b2tlcyB0aGUgcnVubmFibGUgd2l0aCB0aGUgc3BlY2lmaWVkIGlucHV0LCBydW4gbWFuYWdlcixcbiAgICAgKiBhbmQgY29uZmlnLiBJdCBoYW5kbGVzIHRoZSByZXRyeSBsb2dpYyBieSBjYXRjaGluZyBhbnkgZXJyb3JzIGFuZFxuICAgICAqIHJlY3Vyc2l2ZWx5IGludm9raW5nIGl0c2VsZiB3aXRoIHRoZSB1cGRhdGVkIGNvbmZpZyBmb3IgdGhlIG5leHQgcmV0cnlcbiAgICAgKiBhdHRlbXB0LlxuICAgICAqIEBwYXJhbSBpbnB1dCBUaGUgaW5wdXQgZm9yIHRoZSBydW5uYWJsZS5cbiAgICAgKiBAcGFyYW0gcnVuTWFuYWdlciBUaGUgcnVuIG1hbmFnZXIgZm9yIHRoZSBydW5uYWJsZS5cbiAgICAgKiBAcGFyYW0gY29uZmlnIFRoZSBjb25maWcgZm9yIHRoZSBydW5uYWJsZS5cbiAgICAgKiBAcmV0dXJucyBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB0byB0aGUgb3V0cHV0IG9mIHRoZSBydW5uYWJsZS5cbiAgICAgKi9cbiAgICBhc3luYyBpbnZva2UoaW5wdXQsIGNvbmZpZykge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FsbFdpdGhDb25maWcodGhpcy5faW52b2tlLCBpbnB1dCwgY29uZmlnKTtcbiAgICB9XG4gICAgYXN5bmMgX2JhdGNoKGlucHV0cywgY29uZmlncywgcnVuTWFuYWdlcnMsIGJhdGNoT3B0aW9ucykge1xuICAgICAgICBjb25zdCByZXN1bHRzTWFwID0ge307XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBwUmV0cnkoYXN5bmMgKGF0dGVtcHROdW1iZXIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZW1haW5pbmdJbmRleGVzID0gaW5wdXRzXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoKF8sIGkpID0+IGkpXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoKGkpID0+IHJlc3VsdHNNYXBbaS50b1N0cmluZygpXSA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1pbnN0YW5jZW9mL25vLWluc3RhbmNlb2ZcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0c01hcFtpLnRvU3RyaW5nKCldIGluc3RhbmNlb2YgRXJyb3IpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZ0lucHV0cyA9IHJlbWFpbmluZ0luZGV4ZXMubWFwKChpKSA9PiBpbnB1dHNbaV0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhdGNoZWRDb25maWdzID0gcmVtYWluaW5nSW5kZXhlcy5tYXAoKGkpID0+IHRoaXMuX3BhdGNoQ29uZmlnRm9yUmV0cnkoYXR0ZW1wdE51bWJlciwgY29uZmlncz8uW2ldLCBydW5NYW5hZ2Vycz8uW2ldKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHN1cGVyLmJhdGNoKHJlbWFpbmluZ0lucHV0cywgcGF0Y2hlZENvbmZpZ3MsIHtcbiAgICAgICAgICAgICAgICAgICAgLi4uYmF0Y2hPcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICByZXR1cm5FeGNlcHRpb25zOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGxldCBmaXJzdEV4Y2VwdGlvbjtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3VsdHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gcmVzdWx0c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0TWFwSW5kZXggPSByZW1haW5pbmdJbmRleGVzW2ldO1xuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW5zdGFuY2VvZi9uby1pbnN0YW5jZW9mXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpcnN0RXhjZXB0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXJzdEV4Y2VwdGlvbiA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXN1bHRzTWFwW3Jlc3VsdE1hcEluZGV4LnRvU3RyaW5nKCldID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZmlyc3RFeGNlcHRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZmlyc3RFeGNlcHRpb247XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIG9uRmFpbGVkQXR0ZW1wdDogdGhpcy5vbkZhaWxlZEF0dGVtcHQsXG4gICAgICAgICAgICAgICAgcmV0cmllczogTWF0aC5tYXgodGhpcy5tYXhBdHRlbXB0TnVtYmVyIC0gMSwgMCksXG4gICAgICAgICAgICAgICAgcmFuZG9taXplOiB0cnVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGlmIChiYXRjaE9wdGlvbnM/LnJldHVybkV4Y2VwdGlvbnMgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhyZXN1bHRzTWFwKVxuICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IHBhcnNlSW50KGEsIDEwKSAtIHBhcnNlSW50KGIsIDEwKSlcbiAgICAgICAgICAgIC5tYXAoKGtleSkgPT4gcmVzdWx0c01hcFtwYXJzZUludChrZXksIDEwKV0pO1xuICAgIH1cbiAgICBhc3luYyBiYXRjaChpbnB1dHMsIG9wdGlvbnMsIGJhdGNoT3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fYmF0Y2hXaXRoQ29uZmlnKHRoaXMuX2JhdGNoLmJpbmQodGhpcyksIGlucHV0cywgb3B0aW9ucywgYmF0Y2hPcHRpb25zKTtcbiAgICB9XG59XG4vKipcbiAqIEEgc2VxdWVuY2Ugb2YgcnVubmFibGVzLCB3aGVyZSB0aGUgb3V0cHV0IG9mIGVhY2ggaXMgdGhlIGlucHV0IG9mIHRoZSBuZXh0LlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IHByb21wdFRlbXBsYXRlID0gUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKFxuICogICBcIlRlbGwgbWUgYSBqb2tlIGFib3V0IHt0b3BpY31cIixcbiAqICk7XG4gKiBjb25zdCBjaGFpbiA9IFJ1bm5hYmxlU2VxdWVuY2UuZnJvbShbcHJvbXB0VGVtcGxhdGUsIG5ldyBDaGF0T3BlbkFJKHt9KV0pO1xuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgY2hhaW4uaW52b2tlKHsgdG9waWM6IFwiYmVhcnNcIiB9KTtcbiAqIGBgYFxuICovXG5leHBvcnQgY2xhc3MgUnVubmFibGVTZXF1ZW5jZSBleHRlbmRzIFJ1bm5hYmxlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiUnVubmFibGVTZXF1ZW5jZVwiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZmlyc3RcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibWlkZGxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGFzdFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJydW5uYWJsZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZmlyc3QgPSBmaWVsZHMuZmlyc3Q7XG4gICAgICAgIHRoaXMubWlkZGxlID0gZmllbGRzLm1pZGRsZSA/PyB0aGlzLm1pZGRsZTtcbiAgICAgICAgdGhpcy5sYXN0ID0gZmllbGRzLmxhc3Q7XG4gICAgICAgIHRoaXMubmFtZSA9IGZpZWxkcy5uYW1lO1xuICAgIH1cbiAgICBnZXQgc3RlcHMoKSB7XG4gICAgICAgIHJldHVybiBbdGhpcy5maXJzdCwgLi4udGhpcy5taWRkbGUsIHRoaXMubGFzdF07XG4gICAgfVxuICAgIGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlcl8gPSBhd2FpdCBnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcoY29uZmlnKTtcbiAgICAgICAgY29uc3QgcnVuTWFuYWdlciA9IGF3YWl0IGNhbGxiYWNrTWFuYWdlcl8/LmhhbmRsZUNoYWluU3RhcnQodGhpcy50b0pTT04oKSwgX2NvZXJjZVRvRGljdChpbnB1dCwgXCJpbnB1dFwiKSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjb25maWc/LnJ1bk5hbWUpO1xuICAgICAgICBsZXQgbmV4dFN0ZXBJbnB1dCA9IGlucHV0O1xuICAgICAgICBsZXQgZmluYWxPdXRwdXQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBpbml0aWFsU3RlcHMgPSBbdGhpcy5maXJzdCwgLi4udGhpcy5taWRkbGVdO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbml0aWFsU3RlcHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGVwID0gaW5pdGlhbFN0ZXBzW2ldO1xuICAgICAgICAgICAgICAgIG5leHRTdGVwSW5wdXQgPSBhd2FpdCBzdGVwLmludm9rZShuZXh0U3RlcElucHV0LCBwYXRjaENvbmZpZyhjb25maWcsIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZChgc2VxOnN0ZXA6JHtpICsgMX1gKSxcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUeXBlU2NyaXB0IGNhbid0IGRldGVjdCB0aGF0IHRoZSBsYXN0IG91dHB1dCBvZiB0aGUgc2VxdWVuY2UgcmV0dXJucyBSdW5PdXRwdXQsIHNvIGNhbGwgaXQgb3V0IG9mIHRoZSBsb29wIGhlcmVcbiAgICAgICAgICAgIGZpbmFsT3V0cHV0ID0gYXdhaXQgdGhpcy5sYXN0Lmludm9rZShuZXh0U3RlcElucHV0LCBwYXRjaENvbmZpZyhjb25maWcsIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKGBzZXE6c3RlcDoke3RoaXMuc3RlcHMubGVuZ3RofWApLFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGUpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChfY29lcmNlVG9EaWN0KGZpbmFsT3V0cHV0LCBcIm91dHB1dFwiKSk7XG4gICAgICAgIHJldHVybiBmaW5hbE91dHB1dDtcbiAgICB9XG4gICAgYXN5bmMgYmF0Y2goaW5wdXRzLCBvcHRpb25zLCBiYXRjaE9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY29uZmlnTGlzdCA9IHRoaXMuX2dldE9wdGlvbnNMaXN0KG9wdGlvbnMgPz8ge30sIGlucHV0cy5sZW5ndGgpO1xuICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJzID0gYXdhaXQgUHJvbWlzZS5hbGwoY29uZmlnTGlzdC5tYXAoZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnKSk7XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXJzID0gYXdhaXQgUHJvbWlzZS5hbGwoY2FsbGJhY2tNYW5hZ2Vycy5tYXAoKGNhbGxiYWNrTWFuYWdlciwgaSkgPT4gY2FsbGJhY2tNYW5hZ2VyPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIF9jb2VyY2VUb0RpY3QoaW5wdXRzW2ldLCBcImlucHV0XCIpLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbmZpZ0xpc3RbaV0ucnVuTmFtZSkpKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgbGV0IG5leHRTdGVwSW5wdXRzID0gaW5wdXRzO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnN0ZXBzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RlcCA9IHRoaXMuc3RlcHNbaV07XG4gICAgICAgICAgICAgICAgbmV4dFN0ZXBJbnB1dHMgPSBhd2FpdCBzdGVwLmJhdGNoKG5leHRTdGVwSW5wdXRzLCBydW5NYW5hZ2Vycy5tYXAoKHJ1bk1hbmFnZXIsIGopID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hpbGRSdW5NYW5hZ2VyID0gcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoYHNlcTpzdGVwOiR7aSArIDF9YCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXRjaENvbmZpZyhjb25maWdMaXN0W2pdLCB7IGNhbGxiYWNrczogY2hpbGRSdW5NYW5hZ2VyIH0pO1xuICAgICAgICAgICAgICAgIH0pLCBiYXRjaE9wdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChydW5NYW5hZ2Vycy5tYXAoKHJ1bk1hbmFnZXIpID0+IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRXJyb3IoZSkpKTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocnVuTWFuYWdlcnMubWFwKChydW5NYW5hZ2VyKSA9PiBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChfY29lcmNlVG9EaWN0KG5leHRTdGVwSW5wdXRzLCBcIm91dHB1dFwiKSkpKTtcbiAgICAgICAgcmV0dXJuIG5leHRTdGVwSW5wdXRzO1xuICAgIH1cbiAgICBhc3luYyAqX3N0cmVhbUl0ZXJhdG9yKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlcl8gPSBhd2FpdCBnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWcob3B0aW9ucyk7XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXIgPSBhd2FpdCBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIF9jb2VyY2VUb0RpY3QoaW5wdXQsIFwiaW5wdXRcIiksIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgb3B0aW9ucz8ucnVuTmFtZSk7XG4gICAgICAgIGNvbnN0IHN0ZXBzID0gW3RoaXMuZmlyc3QsIC4uLnRoaXMubWlkZGxlLCB0aGlzLmxhc3RdO1xuICAgICAgICBsZXQgY29uY2F0U3VwcG9ydGVkID0gdHJ1ZTtcbiAgICAgICAgbGV0IGZpbmFsT3V0cHV0O1xuICAgICAgICBhc3luYyBmdW5jdGlvbiogaW5wdXRHZW5lcmF0b3IoKSB7XG4gICAgICAgICAgICB5aWVsZCBpbnB1dDtcbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbGV0IGZpbmFsR2VuZXJhdG9yID0gc3RlcHNbMF0udHJhbnNmb3JtKGlucHV0R2VuZXJhdG9yKCksIHBhdGNoQ29uZmlnKG9wdGlvbnMsIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKGBzZXE6c3RlcDoxYCksXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHN0ZXBzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RlcCA9IHN0ZXBzW2ldO1xuICAgICAgICAgICAgICAgIGZpbmFsR2VuZXJhdG9yID0gYXdhaXQgc3RlcC50cmFuc2Zvcm0oZmluYWxHZW5lcmF0b3IsIHBhdGNoQ29uZmlnKG9wdGlvbnMsIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZChgc2VxOnN0ZXA6JHtpICsgMX1gKSxcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGZpbmFsR2VuZXJhdG9yKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgY2h1bms7XG4gICAgICAgICAgICAgICAgaWYgKGNvbmNhdFN1cHBvcnRlZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmluYWxPdXRwdXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxPdXRwdXQgPSBjaHVuaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IGNvbmNhdChmaW5hbE91dHB1dCwgY2h1bmspO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25jYXRTdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FcnJvcihlKTtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FbmQoX2NvZXJjZVRvRGljdChmaW5hbE91dHB1dCwgXCJvdXRwdXRcIikpO1xuICAgIH1cbiAgICBnZXRHcmFwaChjb25maWcpIHtcbiAgICAgICAgY29uc3QgZ3JhcGggPSBuZXcgR3JhcGgoKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgbGV0IGN1cnJlbnRMYXN0Tm9kZSA9IG51bGw7XG4gICAgICAgIHRoaXMuc3RlcHMuZm9yRWFjaCgoc3RlcCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN0ZXBHcmFwaCA9IHN0ZXAuZ2V0R3JhcGgoY29uZmlnKTtcbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gMCkge1xuICAgICAgICAgICAgICAgIHN0ZXBHcmFwaC50cmltRmlyc3ROb2RlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IHRoaXMuc3RlcHMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgIHN0ZXBHcmFwaC50cmltTGFzdE5vZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdyYXBoLmV4dGVuZChzdGVwR3JhcGgpO1xuICAgICAgICAgICAgY29uc3Qgc3RlcEZpcnN0Tm9kZSA9IHN0ZXBHcmFwaC5maXJzdE5vZGUoKTtcbiAgICAgICAgICAgIGlmICghc3RlcEZpcnN0Tm9kZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgUnVubmFibGUgJHtzdGVwfSBoYXMgbm8gZmlyc3Qgbm9kZWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGN1cnJlbnRMYXN0Tm9kZSkge1xuICAgICAgICAgICAgICAgIGdyYXBoLmFkZEVkZ2UoY3VycmVudExhc3ROb2RlLCBzdGVwRmlyc3ROb2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnRMYXN0Tm9kZSA9IHN0ZXBHcmFwaC5sYXN0Tm9kZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGdyYXBoO1xuICAgIH1cbiAgICBwaXBlKGNvZXJjZWFibGUpIHtcbiAgICAgICAgaWYgKFJ1bm5hYmxlU2VxdWVuY2UuaXNSdW5uYWJsZVNlcXVlbmNlKGNvZXJjZWFibGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFJ1bm5hYmxlU2VxdWVuY2Uoe1xuICAgICAgICAgICAgICAgIGZpcnN0OiB0aGlzLmZpcnN0LFxuICAgICAgICAgICAgICAgIG1pZGRsZTogdGhpcy5taWRkbGUuY29uY2F0KFtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0LFxuICAgICAgICAgICAgICAgICAgICBjb2VyY2VhYmxlLmZpcnN0LFxuICAgICAgICAgICAgICAgICAgICAuLi5jb2VyY2VhYmxlLm1pZGRsZSxcbiAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgICBsYXN0OiBjb2VyY2VhYmxlLmxhc3QsXG4gICAgICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lID8/IGNvZXJjZWFibGUubmFtZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZVNlcXVlbmNlKHtcbiAgICAgICAgICAgICAgICBmaXJzdDogdGhpcy5maXJzdCxcbiAgICAgICAgICAgICAgICBtaWRkbGU6IFsuLi50aGlzLm1pZGRsZSwgdGhpcy5sYXN0XSxcbiAgICAgICAgICAgICAgICBsYXN0OiBfY29lcmNlVG9SdW5uYWJsZShjb2VyY2VhYmxlKSxcbiAgICAgICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHN0YXRpYyBpc1J1bm5hYmxlU2VxdWVuY2UodGhpbmcpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkodGhpbmcubWlkZGxlKSAmJiBSdW5uYWJsZS5pc1J1bm5hYmxlKHRoaW5nKTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBzdGF0aWMgZnJvbShbZmlyc3QsIC4uLnJ1bm5hYmxlc10sIG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZVNlcXVlbmNlKHtcbiAgICAgICAgICAgIGZpcnN0OiBfY29lcmNlVG9SdW5uYWJsZShmaXJzdCksXG4gICAgICAgICAgICBtaWRkbGU6IHJ1bm5hYmxlcy5zbGljZSgwLCAtMSkubWFwKF9jb2VyY2VUb1J1bm5hYmxlKSxcbiAgICAgICAgICAgIGxhc3Q6IF9jb2VyY2VUb1J1bm5hYmxlKHJ1bm5hYmxlc1tydW5uYWJsZXMubGVuZ3RoIC0gMV0pLFxuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuLyoqXG4gKiBBIHJ1bm5hYmxlIHRoYXQgcnVucyBhIG1hcHBpbmcgb2YgcnVubmFibGVzIGluIHBhcmFsbGVsLFxuICogYW5kIHJldHVybnMgYSBtYXBwaW5nIG9mIHRoZWlyIG91dHB1dHMuXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgbWFwQ2hhaW4gPSBSdW5uYWJsZU1hcC5mcm9tKHtcbiAqICAgam9rZTogUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKFwiVGVsbCBtZSBhIGpva2UgYWJvdXQge3RvcGljfVwiKS5waXBlKFxuICogICAgIG5ldyBDaGF0QW50aHJvcGljKHt9KSxcbiAqICAgKSxcbiAqICAgcG9lbTogUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKFwid3JpdGUgYSAyLWxpbmUgcG9lbSBhYm91dCB7dG9waWN9XCIpLnBpcGUoXG4gKiAgICAgbmV3IENoYXRBbnRocm9waWMoe30pLFxuICogICApLFxuICogfSk7XG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBtYXBDaGFpbi5pbnZva2UoeyB0b3BpYzogXCJiZWFyXCIgfSk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5hYmxlTWFwIGV4dGVuZHMgUnVubmFibGUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJSdW5uYWJsZU1hcFwiO1xuICAgIH1cbiAgICBnZXRTdGVwc0tleXMoKSB7XG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLnN0ZXBzKTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJydW5uYWJsZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic3RlcHNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zdGVwcyA9IHt9O1xuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhmaWVsZHMuc3RlcHMpKSB7XG4gICAgICAgICAgICB0aGlzLnN0ZXBzW2tleV0gPSBfY29lcmNlVG9SdW5uYWJsZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGZyb20oc3RlcHMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZU1hcCh7IHN0ZXBzIH0pO1xuICAgIH1cbiAgICBhc3luYyBpbnZva2UoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY29uZmlnID0gZW5zdXJlQ29uZmlnKG9wdGlvbnMpO1xuICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnKGNvbmZpZyk7XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXIgPSBhd2FpdCBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIHtcbiAgICAgICAgICAgIGlucHV0LFxuICAgICAgICB9LCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIGNvbmZpZz8ucnVuTmFtZSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IHt9O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoT2JqZWN0LmVudHJpZXModGhpcy5zdGVwcykubWFwKGFzeW5jIChba2V5LCBydW5uYWJsZV0pID0+IHtcbiAgICAgICAgICAgICAgICBvdXRwdXRba2V5XSA9IGF3YWl0IHJ1bm5hYmxlLmludm9rZShpbnB1dCwgcGF0Y2hDb25maWcoY29uZmlnLCB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoYG1hcDprZXk6JHtrZXl9YCksXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVycm9yKGUpO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChvdXRwdXQpO1xuICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH1cbiAgICBhc3luYyAqX3RyYW5zZm9ybShnZW5lcmF0b3IsIHJ1bk1hbmFnZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgLy8gc2hhbGxvdyBjb3B5IHN0ZXBzIHRvIGlnbm9yZSBjaGFuZ2VzIHdoaWxlIGl0ZXJhdGluZ1xuICAgICAgICBjb25zdCBzdGVwcyA9IHsgLi4udGhpcy5zdGVwcyB9O1xuICAgICAgICAvLyBlYWNoIHN0ZXAgZ2V0cyBhIGNvcHkgb2YgdGhlIGlucHV0IGl0ZXJhdG9yXG4gICAgICAgIGNvbnN0IGlucHV0Q29waWVzID0gYXRlZShnZW5lcmF0b3IsIE9iamVjdC5rZXlzKHN0ZXBzKS5sZW5ndGgpO1xuICAgICAgICAvLyBzdGFydCB0aGUgZmlyc3QgaXRlcmF0aW9uIG9mIGVhY2ggb3V0cHV0IGl0ZXJhdG9yXG4gICAgICAgIGNvbnN0IHRhc2tzID0gbmV3IE1hcChPYmplY3QuZW50cmllcyhzdGVwcykubWFwKChba2V5LCBydW5uYWJsZV0sIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGdlbiA9IHJ1bm5hYmxlLnRyYW5zZm9ybShpbnB1dENvcGllc1tpXSwgcGF0Y2hDb25maWcob3B0aW9ucywge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoYG1hcDprZXk6JHtrZXl9YCksXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICByZXR1cm4gW2tleSwgZ2VuLm5leHQoKS50aGVuKChyZXN1bHQpID0+ICh7IGtleSwgZ2VuLCByZXN1bHQgfSkpXTtcbiAgICAgICAgfSkpO1xuICAgICAgICAvLyB5aWVsZCBjaHVua3MgYXMgdGhleSBiZWNvbWUgYXZhaWxhYmxlLFxuICAgICAgICAvLyBzdGFydGluZyBuZXcgaXRlcmF0aW9ucyBhcyBuZWVkZWQsXG4gICAgICAgIC8vIHVudGlsIGFsbCBpdGVyYXRvcnMgYXJlIGRvbmVcbiAgICAgICAgd2hpbGUgKHRhc2tzLnNpemUpIHtcbiAgICAgICAgICAgIGNvbnN0IHsga2V5LCByZXN1bHQsIGdlbiB9ID0gYXdhaXQgUHJvbWlzZS5yYWNlKHRhc2tzLnZhbHVlcygpKTtcbiAgICAgICAgICAgIHRhc2tzLmRlbGV0ZShrZXkpO1xuICAgICAgICAgICAgaWYgKCFyZXN1bHQuZG9uZSkge1xuICAgICAgICAgICAgICAgIHlpZWxkIHsgW2tleV06IHJlc3VsdC52YWx1ZSB9O1xuICAgICAgICAgICAgICAgIHRhc2tzLnNldChrZXksIGdlbi5uZXh0KCkudGhlbigocmVzdWx0KSA9PiAoeyBrZXksIGdlbiwgcmVzdWx0IH0pKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJhbnNmb3JtKGdlbmVyYXRvciwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNmb3JtU3RyZWFtV2l0aENvbmZpZyhnZW5lcmF0b3IsIHRoaXMuX3RyYW5zZm9ybS5iaW5kKHRoaXMpLCBvcHRpb25zKTtcbiAgICB9XG4gICAgYXN5bmMgc3RyZWFtKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uKiBnZW5lcmF0b3IoKSB7XG4gICAgICAgICAgICB5aWVsZCBpbnB1dDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB3cmFwcGVkR2VuZXJhdG9yID0gbmV3IEFzeW5jR2VuZXJhdG9yV2l0aFNldHVwKHRoaXMudHJhbnNmb3JtKGdlbmVyYXRvcigpLCBvcHRpb25zKSk7XG4gICAgICAgIGF3YWl0IHdyYXBwZWRHZW5lcmF0b3Iuc2V0dXA7XG4gICAgICAgIHJldHVybiBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtLmZyb21Bc3luY0dlbmVyYXRvcih3cmFwcGVkR2VuZXJhdG9yKTtcbiAgICB9XG59XG4vKipcbiAqIEEgcnVubmFibGUgdGhhdCBydW5zIGEgY2FsbGFibGUuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5uYWJsZUxhbWJkYSBleHRlbmRzIFJ1bm5hYmxlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiUnVubmFibGVMYW1iZGFcIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX25hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogW1wibGFuZ2NoYWluX2NvcmVcIiwgXCJydW5uYWJsZXNcIl1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImZ1bmNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5mdW5jID0gZmllbGRzLmZ1bmM7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tKGZ1bmMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZUxhbWJkYSh7XG4gICAgICAgICAgICBmdW5jLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgX2ludm9rZShpbnB1dCwgY29uZmlnLCBydW5NYW5hZ2VyKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjaGlsZENvbmZpZyA9IHBhdGNoQ29uZmlnKGNvbmZpZywge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoKSxcbiAgICAgICAgICAgICAgICByZWN1cnNpb25MaW1pdDogKGNvbmZpZz8ucmVjdXJzaW9uTGltaXQgPz8gREVGQVVMVF9SRUNVUlNJT05fTElNSVQpIC0gMSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdm9pZCBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uLmdldEluc3RhbmNlKCkucnVuKGNoaWxkQ29uZmlnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG91dHB1dCA9IGF3YWl0IHRoaXMuZnVuYyhpbnB1dCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY2hpbGRDb25maWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWc6IGNoaWxkQ29uZmlnLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG91dHB1dCAmJiBSdW5uYWJsZS5pc1J1bm5hYmxlKG91dHB1dCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25maWc/LnJlY3Vyc2lvbkxpbWl0ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUmVjdXJzaW9uIGxpbWl0IHJlYWNoZWQuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0ID0gYXdhaXQgb3V0cHV0Lmludm9rZShpbnB1dCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmNoaWxkQ29uZmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY3Vyc2lvbkxpbWl0OiAoY2hpbGRDb25maWcucmVjdXJzaW9uTGltaXQgPz8gREVGQVVMVF9SRUNVUlNJT05fTElNSVQpIC0gMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUob3V0cHV0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXN5bmMgaW52b2tlKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWxsV2l0aENvbmZpZyh0aGlzLl9pbnZva2UsIGlucHV0LCBvcHRpb25zKTtcbiAgICB9XG4gICAgYXN5bmMgKl90cmFuc2Zvcm0oZ2VuZXJhdG9yLCBydW5NYW5hZ2VyLCBjb25maWcpIHtcbiAgICAgICAgbGV0IGZpbmFsQ2h1bms7XG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgZ2VuZXJhdG9yKSB7XG4gICAgICAgICAgICBpZiAoZmluYWxDaHVuayA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZmluYWxDaHVuayA9IGNodW5rO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gTWFrZSBhIGJlc3QgZWZmb3J0IHRvIGdhdGhlciwgZm9yIGFueSB0eXBlIHRoYXQgc3VwcG9ydHMgY29uY2F0LlxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgIGZpbmFsQ2h1bmsgPSBjb25jYXQoZmluYWxDaHVuaywgY2h1bmspO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICBmaW5hbENodW5rID0gY2h1bms7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG91dHB1dCA9IGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHZvaWQgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbi5nZXRJbnN0YW5jZSgpLnJ1bihjb25maWcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmZ1bmMoZmluYWxDaHVuaywge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uY29uZmlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAob3V0cHV0ICYmIFJ1bm5hYmxlLmlzUnVubmFibGUob3V0cHV0KSkge1xuICAgICAgICAgICAgaWYgKGNvbmZpZz8ucmVjdXJzaW9uTGltaXQgPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJSZWN1cnNpb24gbGltaXQgcmVhY2hlZC5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzdHJlYW0gPSBhd2FpdCBvdXRwdXQuc3RyZWFtKGZpbmFsQ2h1bmssIHBhdGNoQ29uZmlnKGNvbmZpZywge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoKSxcbiAgICAgICAgICAgICAgICByZWN1cnNpb25MaW1pdDogKGNvbmZpZz8ucmVjdXJzaW9uTGltaXQgPz8gREVGQVVMVF9SRUNVUlNJT05fTElNSVQpIC0gMSxcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2Ygc3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgeWllbGQgY2h1bms7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB5aWVsZCBvdXRwdXQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJhbnNmb3JtKGdlbmVyYXRvciwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNmb3JtU3RyZWFtV2l0aENvbmZpZyhnZW5lcmF0b3IsIHRoaXMuX3RyYW5zZm9ybS5iaW5kKHRoaXMpLCBvcHRpb25zKTtcbiAgICB9XG4gICAgYXN5bmMgc3RyZWFtKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uKiBnZW5lcmF0b3IoKSB7XG4gICAgICAgICAgICB5aWVsZCBpbnB1dDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB3cmFwcGVkR2VuZXJhdG9yID0gbmV3IEFzeW5jR2VuZXJhdG9yV2l0aFNldHVwKHRoaXMudHJhbnNmb3JtKGdlbmVyYXRvcigpLCBvcHRpb25zKSk7XG4gICAgICAgIGF3YWl0IHdyYXBwZWRHZW5lcmF0b3Iuc2V0dXA7XG4gICAgICAgIHJldHVybiBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtLmZyb21Bc3luY0dlbmVyYXRvcih3cmFwcGVkR2VuZXJhdG9yKTtcbiAgICB9XG59XG5leHBvcnQgY2xhc3MgUnVubmFibGVQYXJhbGxlbCBleHRlbmRzIFJ1bm5hYmxlTWFwIHtcbn1cbi8qKlxuICogQSBSdW5uYWJsZSB0aGF0IGNhbiBmYWxsYmFjayB0byBvdGhlciBSdW5uYWJsZXMgaWYgaXQgZmFpbHMuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5uYWJsZVdpdGhGYWxsYmFja3MgZXh0ZW5kcyBSdW5uYWJsZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlJ1bm5hYmxlV2l0aEZhbGxiYWNrc1wiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInJ1bm5hYmxlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJydW5uYWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJmYWxsYmFja3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5ydW5uYWJsZSA9IGZpZWxkcy5ydW5uYWJsZTtcbiAgICAgICAgdGhpcy5mYWxsYmFja3MgPSBmaWVsZHMuZmFsbGJhY2tzO1xuICAgIH1cbiAgICAqcnVubmFibGVzKCkge1xuICAgICAgICB5aWVsZCB0aGlzLnJ1bm5hYmxlO1xuICAgICAgICBmb3IgKGNvbnN0IGZhbGxiYWNrIG9mIHRoaXMuZmFsbGJhY2tzKSB7XG4gICAgICAgICAgICB5aWVsZCBmYWxsYmFjaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3luYyBpbnZva2UoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgY2FsbGJhY2tNYW5hZ2VyXyA9IGF3YWl0IENhbGxiYWNrTWFuYWdlci5jb25maWd1cmUob3B0aW9ucz8uY2FsbGJhY2tzLCB1bmRlZmluZWQsIG9wdGlvbnM/LnRhZ3MsIHVuZGVmaW5lZCwgb3B0aW9ucz8ubWV0YWRhdGEpO1xuICAgICAgICBjb25zdCBydW5NYW5hZ2VyID0gYXdhaXQgY2FsbGJhY2tNYW5hZ2VyXz8uaGFuZGxlQ2hhaW5TdGFydCh0aGlzLnRvSlNPTigpLCBfY29lcmNlVG9EaWN0KGlucHV0LCBcImlucHV0XCIpLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIG9wdGlvbnM/LnJ1bk5hbWUpO1xuICAgICAgICBsZXQgZmlyc3RFcnJvcjtcbiAgICAgICAgZm9yIChjb25zdCBydW5uYWJsZSBvZiB0aGlzLnJ1bm5hYmxlcygpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dCA9IGF3YWl0IHJ1bm5hYmxlLmludm9rZShpbnB1dCwgcGF0Y2hDb25maWcob3B0aW9ucywgeyBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKCkgfSkpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRW5kKF9jb2VyY2VUb0RpY3Qob3V0cHV0LCBcIm91dHB1dFwiKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0RXJyb3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBmaXJzdEVycm9yID0gZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpcnN0RXJyb3IgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gZXJyb3Igc3RvcmVkIGF0IGVuZCBvZiBmYWxsYmFjay5cIik7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgcnVuTWFuYWdlcj8uaGFuZGxlQ2hhaW5FcnJvcihmaXJzdEVycm9yKTtcbiAgICAgICAgdGhyb3cgZmlyc3RFcnJvcjtcbiAgICB9XG4gICAgYXN5bmMgYmF0Y2goaW5wdXRzLCBvcHRpb25zLCBiYXRjaE9wdGlvbnMpIHtcbiAgICAgICAgaWYgKGJhdGNoT3B0aW9ucz8ucmV0dXJuRXhjZXB0aW9ucykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb25maWdMaXN0ID0gdGhpcy5fZ2V0T3B0aW9uc0xpc3Qob3B0aW9ucyA/PyB7fSwgaW5wdXRzLmxlbmd0aCk7XG4gICAgICAgIGNvbnN0IGNhbGxiYWNrTWFuYWdlcnMgPSBhd2FpdCBQcm9taXNlLmFsbChjb25maWdMaXN0Lm1hcCgoY29uZmlnKSA9PiBDYWxsYmFja01hbmFnZXIuY29uZmlndXJlKGNvbmZpZz8uY2FsbGJhY2tzLCB1bmRlZmluZWQsIGNvbmZpZz8udGFncywgdW5kZWZpbmVkLCBjb25maWc/Lm1ldGFkYXRhKSkpO1xuICAgICAgICBjb25zdCBydW5NYW5hZ2VycyA9IGF3YWl0IFByb21pc2UuYWxsKGNhbGxiYWNrTWFuYWdlcnMubWFwKChjYWxsYmFja01hbmFnZXIsIGkpID0+IGNhbGxiYWNrTWFuYWdlcj8uaGFuZGxlQ2hhaW5TdGFydCh0aGlzLnRvSlNPTigpLCBfY29lcmNlVG9EaWN0KGlucHV0c1tpXSwgXCJpbnB1dFwiKSwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjb25maWdMaXN0W2ldLnJ1bk5hbWUpKSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGxldCBmaXJzdEVycm9yO1xuICAgICAgICBmb3IgKGNvbnN0IHJ1bm5hYmxlIG9mIHRoaXMucnVubmFibGVzKCkpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3V0cHV0cyA9IGF3YWl0IHJ1bm5hYmxlLmJhdGNoKGlucHV0cywgcnVuTWFuYWdlcnMubWFwKChydW5NYW5hZ2VyLCBqKSA9PiBwYXRjaENvbmZpZyhjb25maWdMaXN0W2pdLCB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoKSxcbiAgICAgICAgICAgICAgICB9KSksIGJhdGNoT3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocnVuTWFuYWdlcnMubWFwKChydW5NYW5hZ2VyLCBpKSA9PiBydW5NYW5hZ2VyPy5oYW5kbGVDaGFpbkVuZChfY29lcmNlVG9EaWN0KG91dHB1dHNbaV0sIFwib3V0cHV0XCIpKSkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBvdXRwdXRzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmlyc3RFcnJvciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpcnN0RXJyb3IgPSBlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWZpcnN0RXJyb3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIGVycm9yIHN0b3JlZCBhdCBlbmQgb2YgZmFsbGJhY2tzLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChydW5NYW5hZ2Vycy5tYXAoKHJ1bk1hbmFnZXIpID0+IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRXJyb3IoZmlyc3RFcnJvcikpKTtcbiAgICAgICAgdGhyb3cgZmlyc3RFcnJvcjtcbiAgICB9XG59XG4vLyBUT0RPOiBGaWd1cmUgb3V0IHdoeSB0aGUgY29tcGlsZXIgbmVlZHMgaGVscCBlbGltaW5hdGluZyBFcnJvciBhcyBhIFJ1bk91dHB1dCB0eXBlXG5leHBvcnQgZnVuY3Rpb24gX2NvZXJjZVRvUnVubmFibGUoY29lcmNlYWJsZSkge1xuICAgIGlmICh0eXBlb2YgY29lcmNlYWJsZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVMYW1iZGEoeyBmdW5jOiBjb2VyY2VhYmxlIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChSdW5uYWJsZS5pc1J1bm5hYmxlKGNvZXJjZWFibGUpKSB7XG4gICAgICAgIHJldHVybiBjb2VyY2VhYmxlO1xuICAgIH1cbiAgICBlbHNlIGlmICghQXJyYXkuaXNBcnJheShjb2VyY2VhYmxlKSAmJiB0eXBlb2YgY29lcmNlYWJsZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICBjb25zdCBydW5uYWJsZXMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoY29lcmNlYWJsZSkpIHtcbiAgICAgICAgICAgIHJ1bm5hYmxlc1trZXldID0gX2NvZXJjZVRvUnVubmFibGUodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUnVubmFibGVNYXAoe1xuICAgICAgICAgICAgc3RlcHM6IHJ1bm5hYmxlcyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIGEgUnVubmFibGUsIGZ1bmN0aW9uIG9yIG9iamVjdC5cXG5JbnN0ZWFkIGdvdCBhbiB1bnN1cHBvcnRlZCB0eXBlLmApO1xuICAgIH1cbn1cbi8qKlxuICogQSBydW5uYWJsZSB0aGF0IGFzc2lnbnMga2V5LXZhbHVlIHBhaXJzIHRvIGlucHV0cyBvZiB0eXBlIGBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPmAuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5uYWJsZUFzc2lnbiBleHRlbmRzIFJ1bm5hYmxlIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiUnVubmFibGVBc3NpZ25cIjtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1pbnN0YW5jZW9mL25vLWluc3RhbmNlb2ZcbiAgICAgICAgaWYgKGZpZWxkcyBpbnN0YW5jZW9mIFJ1bm5hYmxlTWFwKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGZpZWxkcyA9IHsgbWFwcGVyOiBmaWVsZHMgfTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwicnVubmFibGVzXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1hcHBlclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm1hcHBlciA9IGZpZWxkcy5tYXBwZXI7XG4gICAgfVxuICAgIGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBtYXBwZXJSZXN1bHQgPSBhd2FpdCB0aGlzLm1hcHBlci5pbnZva2UoaW5wdXQsIG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4uaW5wdXQsXG4gICAgICAgICAgICAuLi5tYXBwZXJSZXN1bHQsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jICpfdHJhbnNmb3JtKGdlbmVyYXRvciwgcnVuTWFuYWdlciwgb3B0aW9ucykge1xuICAgICAgICAvLyBjb2xsZWN0IG1hcHBlciBrZXlzXG4gICAgICAgIGNvbnN0IG1hcHBlcktleXMgPSB0aGlzLm1hcHBlci5nZXRTdGVwc0tleXMoKTtcbiAgICAgICAgLy8gY3JlYXRlIHR3byBpbnB1dCBnZW5zLCBvbmUgZm9yIHRoZSBtYXBwZXIsIG9uZSBmb3IgdGhlIGlucHV0XG4gICAgICAgIGNvbnN0IFtmb3JQYXNzdGhyb3VnaCwgZm9yTWFwcGVyXSA9IGF0ZWUoZ2VuZXJhdG9yKTtcbiAgICAgICAgLy8gY3JlYXRlIG1hcHBlciBvdXRwdXQgZ2VuXG4gICAgICAgIGNvbnN0IG1hcHBlck91dHB1dCA9IHRoaXMubWFwcGVyLnRyYW5zZm9ybShmb3JNYXBwZXIsIHBhdGNoQ29uZmlnKG9wdGlvbnMsIHsgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZCgpIH0pKTtcbiAgICAgICAgLy8gc3RhcnQgdGhlIG1hcHBlclxuICAgICAgICBjb25zdCBmaXJzdE1hcHBlckNodW5rUHJvbWlzZSA9IG1hcHBlck91dHB1dC5uZXh0KCk7XG4gICAgICAgIC8vIHlpZWxkIHRoZSBwYXNzdGhyb3VnaFxuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGZvclBhc3N0aHJvdWdoKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGNodW5rICE9PSBcIm9iamVjdFwiIHx8IEFycmF5LmlzQXJyYXkoY2h1bmspKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBSdW5uYWJsZUFzc2lnbiBjYW4gb25seSBiZSB1c2VkIHdpdGggb2JqZWN0cyBhcyBpbnB1dCwgZ290ICR7dHlwZW9mIGNodW5rfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZmlsdGVyZWQgPSBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMoY2h1bmspLmZpbHRlcigoW2tleV0pID0+ICFtYXBwZXJLZXlzLmluY2x1ZGVzKGtleSkpKTtcbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhmaWx0ZXJlZCkubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHlpZWxkIGZpbHRlcmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHlpZWxkIHRoZSBtYXBwZXIgb3V0cHV0XG4gICAgICAgIHlpZWxkIChhd2FpdCBmaXJzdE1hcHBlckNodW5rUHJvbWlzZSkudmFsdWU7XG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgbWFwcGVyT3V0cHV0KSB7XG4gICAgICAgICAgICB5aWVsZCBjaHVuaztcbiAgICAgICAgfVxuICAgIH1cbiAgICB0cmFuc2Zvcm0oZ2VuZXJhdG9yLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc2Zvcm1TdHJlYW1XaXRoQ29uZmlnKGdlbmVyYXRvciwgdGhpcy5fdHJhbnNmb3JtLmJpbmQodGhpcyksIG9wdGlvbnMpO1xuICAgIH1cbiAgICBhc3luYyBzdHJlYW0oaW5wdXQsIG9wdGlvbnMpIHtcbiAgICAgICAgYXN5bmMgZnVuY3Rpb24qIGdlbmVyYXRvcigpIHtcbiAgICAgICAgICAgIHlpZWxkIGlucHV0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHdyYXBwZWRHZW5lcmF0b3IgPSBuZXcgQXN5bmNHZW5lcmF0b3JXaXRoU2V0dXAodGhpcy50cmFuc2Zvcm0oZ2VuZXJhdG9yKCksIG9wdGlvbnMpKTtcbiAgICAgICAgYXdhaXQgd3JhcHBlZEdlbmVyYXRvci5zZXR1cDtcbiAgICAgICAgcmV0dXJuIEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0uZnJvbUFzeW5jR2VuZXJhdG9yKHdyYXBwZWRHZW5lcmF0b3IpO1xuICAgIH1cbn1cbi8qKlxuICogQSBydW5uYWJsZSB0aGF0IGFzc2lnbnMga2V5LXZhbHVlIHBhaXJzIHRvIGlucHV0cyBvZiB0eXBlIGBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPmAuXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5uYWJsZVBpY2sgZXh0ZW5kcyBSdW5uYWJsZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlJ1bm5hYmxlUGlja1wiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBmaWVsZHMgPT09IFwic3RyaW5nXCIgfHwgQXJyYXkuaXNBcnJheShmaWVsZHMpKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGZpZWxkcyA9IHsga2V5czogZmllbGRzIH07XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInJ1bm5hYmxlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJrZXlzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMua2V5cyA9IGZpZWxkcy5rZXlzO1xuICAgIH1cbiAgICBhc3luYyBfcGljayhpbnB1dCkge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMua2V5cyA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIGlucHV0W3RoaXMua2V5c107XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBwaWNrZWQgPSB0aGlzLmtleXNcbiAgICAgICAgICAgICAgICAubWFwKChrZXkpID0+IFtrZXksIGlucHV0W2tleV1dKVxuICAgICAgICAgICAgICAgIC5maWx0ZXIoKHYpID0+IHZbMV0gIT09IHVuZGVmaW5lZCk7XG4gICAgICAgICAgICByZXR1cm4gcGlja2VkLmxlbmd0aCA9PT0gMCA/IHVuZGVmaW5lZCA6IE9iamVjdC5mcm9tRW50cmllcyhwaWNrZWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FsbFdpdGhDb25maWcodGhpcy5fcGljay5iaW5kKHRoaXMpLCBpbnB1dCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGFzeW5jICpfdHJhbnNmb3JtKGdlbmVyYXRvcikge1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGdlbmVyYXRvcikge1xuICAgICAgICAgICAgY29uc3QgcGlja2VkID0gYXdhaXQgdGhpcy5fcGljayhjaHVuayk7XG4gICAgICAgICAgICBpZiAocGlja2VkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCBwaWNrZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJhbnNmb3JtKGdlbmVyYXRvciwgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNmb3JtU3RyZWFtV2l0aENvbmZpZyhnZW5lcmF0b3IsIHRoaXMuX3RyYW5zZm9ybS5iaW5kKHRoaXMpLCBvcHRpb25zKTtcbiAgICB9XG4gICAgYXN5bmMgc3RyZWFtKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uKiBnZW5lcmF0b3IoKSB7XG4gICAgICAgICAgICB5aWVsZCBpbnB1dDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB3cmFwcGVkR2VuZXJhdG9yID0gbmV3IEFzeW5jR2VuZXJhdG9yV2l0aFNldHVwKHRoaXMudHJhbnNmb3JtKGdlbmVyYXRvcigpLCBvcHRpb25zKSk7XG4gICAgICAgIGF3YWl0IHdyYXBwZWRHZW5lcmF0b3Iuc2V0dXA7XG4gICAgICAgIHJldHVybiBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtLmZyb21Bc3luY0dlbmVyYXRvcih3cmFwcGVkR2VuZXJhdG9yKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsieiIsInBSZXRyeSIsIkNhbGxiYWNrTWFuYWdlciIsIkxvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlciIsIlJ1bkxvZyIsIlJ1bkxvZ1BhdGNoIiwiU2VyaWFsaXphYmxlIiwiSXRlcmFibGVSZWFkYWJsZVN0cmVhbSIsImNvbmNhdCIsImF0ZWUiLCJwaXBlR2VuZXJhdG9yV2l0aFNldHVwIiwiQXN5bmNHZW5lcmF0b3JXaXRoU2V0dXAiLCJERUZBVUxUX1JFQ1VSU0lPTl9MSU1JVCIsImVuc3VyZUNvbmZpZyIsImdldENhbGxiYWNrTWFuYWdlckZvckNvbmZpZyIsIm1lcmdlQ29uZmlncyIsInBhdGNoQ29uZmlnIiwiQXN5bmNDYWxsZXIiLCJSb290TGlzdGVuZXJzVHJhY2VyIiwiX1Jvb3RFdmVudEZpbHRlciIsImlzUnVubmFibGVJbnRlcmZhY2UiLCJBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uIiwiR3JhcGgiLCJfY29lcmNlVG9EaWN0IiwidmFsdWUiLCJkZWZhdWx0S2V5IiwiQXJyYXkiLCJpc0FycmF5IiwiRGF0ZSIsIlJ1bm5hYmxlIiwiY29uc3RydWN0b3IiLCJhcmd1bWVudHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImdldE5hbWUiLCJzdWZmaXgiLCJuYW1lIiwibGNfbmFtZSIsImJpbmQiLCJrd2FyZ3MiLCJSdW5uYWJsZUJpbmRpbmciLCJib3VuZCIsImNvbmZpZyIsIm1hcCIsIlJ1bm5hYmxlRWFjaCIsIndpdGhSZXRyeSIsImZpZWxkcyIsIlJ1bm5hYmxlUmV0cnkiLCJtYXhBdHRlbXB0TnVtYmVyIiwic3RvcEFmdGVyQXR0ZW1wdCIsIndpdGhDb25maWciLCJ3aXRoRmFsbGJhY2tzIiwiUnVubmFibGVXaXRoRmFsbGJhY2tzIiwicnVubmFibGUiLCJmYWxsYmFja3MiLCJfZ2V0T3B0aW9uc0xpc3QiLCJvcHRpb25zIiwibGVuZ3RoIiwiRXJyb3IiLCJmcm9tIiwiYmF0Y2giLCJpbnB1dHMiLCJiYXRjaE9wdGlvbnMiLCJjb25maWdMaXN0IiwibWF4Q29uY3VycmVuY3kiLCJjYWxsZXIiLCJvbkZhaWxlZEF0dGVtcHQiLCJlIiwiYmF0Y2hDYWxscyIsImlucHV0IiwiaSIsImNhbGwiLCJyZXN1bHQiLCJpbnZva2UiLCJyZXR1cm5FeGNlcHRpb25zIiwiUHJvbWlzZSIsImFsbCIsIl9zdHJlYW1JdGVyYXRvciIsInN0cmVhbSIsIndyYXBwZWRHZW5lcmF0b3IiLCJzZXR1cCIsImZyb21Bc3luY0dlbmVyYXRvciIsIl9zZXBhcmF0ZVJ1bm5hYmxlQ29uZmlnRnJvbUNhbGxPcHRpb25zIiwicnVubmFibGVDb25maWciLCJjYWxsYmFja3MiLCJ0YWdzIiwibWV0YWRhdGEiLCJydW5OYW1lIiwicmVjdXJzaW9uTGltaXQiLCJjYWxsT3B0aW9ucyIsIl9jYWxsV2l0aENvbmZpZyIsImZ1bmMiLCJjYWxsYmFja01hbmFnZXJfIiwicnVuTWFuYWdlciIsImhhbmRsZUNoYWluU3RhcnQiLCJ0b0pTT04iLCJ1bmRlZmluZWQiLCJydW5UeXBlIiwib3V0cHV0IiwiaGFuZGxlQ2hhaW5FcnJvciIsImhhbmRsZUNoYWluRW5kIiwiX2JhdGNoV2l0aENvbmZpZyIsIm9wdGlvbnNMaXN0IiwiY2FsbGJhY2tNYW5hZ2VycyIsInJ1bk1hbmFnZXJzIiwiY2FsbGJhY2tNYW5hZ2VyIiwib3V0cHV0cyIsIl90cmFuc2Zvcm1TdHJlYW1XaXRoQ29uZmlnIiwiaW5wdXRHZW5lcmF0b3IiLCJ0cmFuc2Zvcm1lciIsImZpbmFsSW5wdXQiLCJmaW5hbElucHV0U3VwcG9ydGVkIiwiZmluYWxPdXRwdXQiLCJmaW5hbE91dHB1dFN1cHBvcnRlZCIsIndyYXBJbnB1dEZvclRyYWNpbmciLCJjaHVuayIsInBpcGUiLCJpc0xvZ1N0cmVhbUhhbmRsZXIiLCJoYW5kbGVyIiwic3RyZWFtTG9nSGFuZGxlciIsImhhbmRsZXJzIiwiZmluZCIsIml0ZXJhdG9yIiwidGFwT3V0cHV0SXRlcmFibGUiLCJydW5JZCIsImdldEdyYXBoIiwiXyIsImdyYXBoIiwiaW5wdXROb2RlIiwiYWRkTm9kZSIsInNjaGVtYSIsImFueSIsInJ1bm5hYmxlTm9kZSIsIm91dHB1dE5vZGUiLCJhZGRFZGdlIiwiY29lcmNlYWJsZSIsIlJ1bm5hYmxlU2VxdWVuY2UiLCJmaXJzdCIsImxhc3QiLCJfY29lcmNlVG9SdW5uYWJsZSIsInBpY2siLCJrZXlzIiwiUnVubmFibGVQaWNrIiwiYXNzaWduIiwibWFwcGluZyIsIlJ1bm5hYmxlQXNzaWduIiwiUnVubmFibGVNYXAiLCJzdGVwcyIsInRyYW5zZm9ybSIsImdlbmVyYXRvciIsImZpbmFsQ2h1bmsiLCJzdHJlYW1Mb2ciLCJzdHJlYW1PcHRpb25zIiwibG9nU3RyZWFtQ2FsbGJhY2tIYW5kbGVyIiwiYXV0b0Nsb3NlIiwiX3NjaGVtYUZvcm1hdCIsIl9zdHJlYW1Mb2ciLCJjb3BpZWRDYWxsYmFja3MiLCJjb3B5IiwiaW5oZXJpdGFibGVIYW5kbGVycyIsInB1c2giLCJydW5uYWJsZVN0cmVhbVByb21pc2UiLCJjb25zdW1lUnVubmFibGVTdHJlYW0iLCJydW5uYWJsZVN0cmVhbSIsInBhdGNoIiwib3BzIiwib3AiLCJwYXRoIiwid3JpdGVyIiwid3JpdGUiLCJjbG9zZSIsInJ1bm5hYmxlU3RyZWFtQ29uc3VtZVByb21pc2UiLCJsb2ciLCJzdHJlYW1FdmVudHMiLCJ2ZXJzaW9uIiwicnVuTG9nIiwiaGFzRW5jb3VudGVyZWRTdGFydEV2ZW50Iiwicm9vdFRhZ3MiLCJyb290TWV0YWRhdGEiLCJyb290TmFtZSIsInJvb3RFdmVudEZpbHRlciIsImxvZ1N0cmVhbSIsImZyb21SdW5Mb2dQYXRjaCIsInN0YXRlIiwiZXZlbnQiLCJydW5faWQiLCJpZCIsInR5cGUiLCJkYXRhIiwiaW5jbHVkZUV2ZW50IiwicGF0aHMiLCJmaWx0ZXIiLCJzdGFydHNXaXRoIiwic3BsaXQiLCJkZWR1cGVkUGF0aHMiLCJTZXQiLCJldmVudFR5cGUiLCJsb2dFbnRyeSIsImxvZ3MiLCJlbmRfdGltZSIsInN0cmVhbWVkX291dHB1dCIsImZpbmFsX291dHB1dCIsImNodW5rQ291bnQiLCJpc1J1bm5hYmxlIiwidGhpbmciLCJ3aXRoTGlzdGVuZXJzIiwib25TdGFydCIsIm9uRW5kIiwib25FcnJvciIsImNvbmZpZ0ZhY3RvcmllcyIsIl9tZXJnZUNvbmZpZyIsImNvbmZpZ0ZhY3RvcnkiLCJtZXJnZWRPcHRpb25zIiwiaW5kaXZpZHVhbE9wdGlvbiIsImlzUnVubmFibGVCaW5kaW5nIiwiX2ludm9rZSIsImdldENoaWxkIiwiX3BhdGNoQ29uZmlnRm9yUmV0cnkiLCJhdHRlbXB0IiwidGFnIiwiYXR0ZW1wdE51bWJlciIsInJldHJpZXMiLCJNYXRoIiwibWF4IiwicmFuZG9taXplIiwiX2JhdGNoIiwiY29uZmlncyIsInJlc3VsdHNNYXAiLCJyZW1haW5pbmdJbmRleGVzIiwidG9TdHJpbmciLCJyZW1haW5pbmdJbnB1dHMiLCJwYXRjaGVkQ29uZmlncyIsInJlc3VsdHMiLCJmaXJzdEV4Y2VwdGlvbiIsInJlc3VsdE1hcEluZGV4Iiwic29ydCIsImEiLCJiIiwicGFyc2VJbnQiLCJrZXkiLCJtaWRkbGUiLCJuZXh0U3RlcElucHV0IiwiaW5pdGlhbFN0ZXBzIiwic3RlcCIsIm5leHRTdGVwSW5wdXRzIiwiaiIsImNoaWxkUnVuTWFuYWdlciIsImNvbmNhdFN1cHBvcnRlZCIsImZpbmFsR2VuZXJhdG9yIiwiY3VycmVudExhc3ROb2RlIiwiZm9yRWFjaCIsImluZGV4Iiwic3RlcEdyYXBoIiwidHJpbUZpcnN0Tm9kZSIsInRyaW1MYXN0Tm9kZSIsImV4dGVuZCIsInN0ZXBGaXJzdE5vZGUiLCJmaXJzdE5vZGUiLCJsYXN0Tm9kZSIsImlzUnVubmFibGVTZXF1ZW5jZSIsInJ1bm5hYmxlcyIsInNsaWNlIiwiZ2V0U3RlcHNLZXlzIiwiZW50cmllcyIsIl90cmFuc2Zvcm0iLCJpbnB1dENvcGllcyIsInRhc2tzIiwiTWFwIiwiZ2VuIiwibmV4dCIsInRoZW4iLCJzaXplIiwicmFjZSIsInZhbHVlcyIsImRlbGV0ZSIsImRvbmUiLCJzZXQiLCJSdW5uYWJsZUxhbWJkYSIsInJlc29sdmUiLCJyZWplY3QiLCJjaGlsZENvbmZpZyIsImdldEluc3RhbmNlIiwicnVuIiwicmVzIiwiUnVubmFibGVQYXJhbGxlbCIsImZhbGxiYWNrIiwiY29uZmlndXJlIiwiZmlyc3RFcnJvciIsIm1hcHBlciIsIm1hcHBlclJlc3VsdCIsIm1hcHBlcktleXMiLCJmb3JQYXNzdGhyb3VnaCIsImZvck1hcHBlciIsIm1hcHBlck91dHB1dCIsImZpcnN0TWFwcGVyQ2h1bmtQcm9taXNlIiwiZmlsdGVyZWQiLCJmcm9tRW50cmllcyIsImluY2x1ZGVzIiwiX3BpY2siLCJwaWNrZWQiLCJ2Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/branch.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/branch.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RunnableBranch: () => (/* binding */ RunnableBranch)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/config.js\");\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/stream.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/stream.js\");\n\n\n\n/**\n * Class that represents a runnable branch. The RunnableBranch is\n * initialized with an array of branches and a default branch. When invoked,\n * it evaluates the condition of each branch in order and executes the\n * corresponding branch if the condition is true. If none of the conditions\n * are true, it executes the default branch.\n * @example\n * ```typescript\n * const branch = RunnableBranch.from([\n *   [\n *     (x: { topic: string; question: string }) =>\n *       x.topic.toLowerCase().includes(\"anthropic\"),\n *     anthropicChain,\n *   ],\n *   [\n *     (x: { topic: string; question: string }) =>\n *       x.topic.toLowerCase().includes(\"langchain\"),\n *     langChainChain,\n *   ],\n *   generalChain,\n * ]);\n *\n * const fullChain = RunnableSequence.from([\n *   {\n *     topic: classificationChain,\n *     question: (input: { question: string }) => input.question,\n *   },\n *   branch,\n * ]);\n *\n * const result = await fullChain.invoke({\n *   question: \"how do I use LangChain?\",\n * });\n * ```\n */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\nclass RunnableBranch extends _base_js__WEBPACK_IMPORTED_MODULE_0__.Runnable {\n    static lc_name() {\n        return \"RunnableBranch\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"default\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"branches\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.branches = fields.branches;\n        this.default = fields.default;\n    }\n    /**\n     * Convenience method for instantiating a RunnableBranch from\n     * RunnableLikes (objects, functions, or Runnables).\n     *\n     * Each item in the input except for the last one should be a\n     * tuple with two items. The first is a \"condition\" RunnableLike that\n     * returns \"true\" if the second RunnableLike in the tuple should run.\n     *\n     * The final item in the input should be a RunnableLike that acts as a\n     * default branch if no other branches match.\n     *\n     * @example\n     * ```ts\n     * import { RunnableBranch } from \"@langchain/core/runnables\";\n     *\n     * const branch = RunnableBranch.from([\n     *   [(x: number) => x > 0, (x: number) => x + 1],\n     *   [(x: number) => x < 0, (x: number) => x - 1],\n     *   (x: number) => x\n     * ]);\n     * ```\n     * @param branches An array where the every item except the last is a tuple of [condition, runnable]\n     *   pairs. The last item is a default runnable which is invoked if no other condition matches.\n     * @returns A new RunnableBranch.\n     */ // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static from(branches) {\n        if (branches.length < 1) {\n            throw new Error(\"RunnableBranch requires at least one branch\");\n        }\n        const branchLikes = branches.slice(0, -1);\n        const coercedBranches = branchLikes.map(([condition, runnable])=>[\n                (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._coerceToRunnable)(condition),\n                (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._coerceToRunnable)(runnable)\n            ]);\n        const defaultBranch = (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._coerceToRunnable)(branches[branches.length - 1]);\n        return new this({\n            branches: coercedBranches,\n            default: defaultBranch\n        });\n    }\n    async _invoke(input, config, runManager) {\n        let result;\n        for(let i = 0; i < this.branches.length; i += 1){\n            const [condition, branchRunnable] = this.branches[i];\n            const conditionValue = await condition.invoke(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_1__.patchConfig)(config, {\n                callbacks: runManager?.getChild(`condition:${i + 1}`)\n            }));\n            if (conditionValue) {\n                result = await branchRunnable.invoke(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_1__.patchConfig)(config, {\n                    callbacks: runManager?.getChild(`branch:${i + 1}`)\n                }));\n                break;\n            }\n        }\n        if (!result) {\n            result = await this.default.invoke(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_1__.patchConfig)(config, {\n                callbacks: runManager?.getChild(\"branch:default\")\n            }));\n        }\n        return result;\n    }\n    async invoke(input, config = {}) {\n        return this._callWithConfig(this._invoke, input, config);\n    }\n    async *_streamIterator(input, config) {\n        const callbackManager_ = await (0,_config_js__WEBPACK_IMPORTED_MODULE_1__.getCallbackManagerForConfig)(config);\n        const runManager = await callbackManager_?.handleChainStart(this.toJSON(), (0,_base_js__WEBPACK_IMPORTED_MODULE_0__._coerceToDict)(input, \"input\"), undefined, undefined, undefined, undefined, config?.runName);\n        let finalOutput;\n        let finalOutputSupported = true;\n        let stream;\n        try {\n            for(let i = 0; i < this.branches.length; i += 1){\n                const [condition, branchRunnable] = this.branches[i];\n                const conditionValue = await condition.invoke(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_1__.patchConfig)(config, {\n                    callbacks: runManager?.getChild(`condition:${i + 1}`)\n                }));\n                if (conditionValue) {\n                    stream = await branchRunnable.stream(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_1__.patchConfig)(config, {\n                        callbacks: runManager?.getChild(`branch:${i + 1}`)\n                    }));\n                    for await (const chunk of stream){\n                        yield chunk;\n                        if (finalOutputSupported) {\n                            if (finalOutput === undefined) {\n                                finalOutput = chunk;\n                            } else {\n                                try {\n                                    finalOutput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_2__.concat)(finalOutput, chunk);\n                                } catch (e) {\n                                    finalOutput = undefined;\n                                    finalOutputSupported = false;\n                                }\n                            }\n                        }\n                    }\n                    break;\n                }\n            }\n            if (stream === undefined) {\n                stream = await this.default.stream(input, (0,_config_js__WEBPACK_IMPORTED_MODULE_1__.patchConfig)(config, {\n                    callbacks: runManager?.getChild(\"branch:default\")\n                }));\n                for await (const chunk of stream){\n                    yield chunk;\n                    if (finalOutputSupported) {\n                        if (finalOutput === undefined) {\n                            finalOutput = chunk;\n                        } else {\n                            try {\n                                finalOutput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_2__.concat)(finalOutput, chunk);\n                            } catch (e) {\n                                finalOutput = undefined;\n                                finalOutputSupported = false;\n                            }\n                        }\n                    }\n                }\n            }\n        } catch (e) {\n            await runManager?.handleChainError(e);\n            throw e;\n        }\n        await runManager?.handleChainEnd(finalOutput ?? {});\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2JyYW5jaC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXdFO0FBQ0E7QUFDNUI7QUFDNUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0FrQ0MsR0FDRCw4REFBOEQ7QUFDdkQsTUFBTU0sdUJBQXVCTiw4Q0FBUUE7SUFDeEMsT0FBT08sVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBQyxZQUFZQyxNQUFNLENBQUU7UUFDaEIsS0FBSyxDQUFDQTtRQUNOQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztnQkFBQztnQkFBa0I7YUFBWTtRQUMxQztRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG1CQUFtQjtZQUMzQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsV0FBVztZQUNuQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDQyxRQUFRLEdBQUdQLE9BQU9PLFFBQVE7UUFDL0IsSUFBSSxDQUFDQyxPQUFPLEdBQUdSLE9BQU9RLE9BQU87SUFDakM7SUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0tBd0JDLEdBQ0QsOERBQThEO0lBQzlELE9BQU9DLEtBQUtGLFFBQVEsRUFBRTtRQUNsQixJQUFJQSxTQUFTRyxNQUFNLEdBQUcsR0FBRztZQUNyQixNQUFNLElBQUlDLE1BQU07UUFDcEI7UUFDQSxNQUFNQyxjQUFjTCxTQUFTTSxL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STtvQ0FDQUgsY0FBY3pDLHdEQUFNQSxDQUFDeUMsYUFBYUc7Z0NBQ3RDLEVBQ0EsT0FBT0MsR0FBRztvQ0FDTkosY0FBY0Y7b0NBQ2RHLHVCQUF1QjtnQ0FDM0I7NEJBQ0o7d0JBQ0o7b0JBQ0o7b0JBQ0E7Z0JBQ0o7WUFDSjtZQUNBLElBQUlDLFdBQVdKLFdBQVc7Z0JBQ3RCSSxTQUFTLE1BQU0sSUFBSSxDQUFDL0IsT0FBTyxDQUFDK0IsTUFBTSxDQUFDbkIsT0FBT3pCLHVEQUFXQSxDQUFDMEIsUUFBUTtvQkFDMURPLFdBQVdOLFlBQVlPLFNBQVM7Z0JBQ3BDO2dCQUNBLFdBQVcsTUFBTVcsU0FBU0QsT0FBUTtvQkFDOUIsTUFBTUM7b0JBQ04sSUFBSUYsc0JBQXNCO3dCQUN0QixJQUFJRCxnQkFBZ0JGLFdBQVc7NEJBQzNCRSxjQUFjRzt3QkFDbEIsT0FDSzs0QkFDRCxJQUFJO2dDQUNBSCxjQUFjekMsd0RBQU1BLENBQUN5QyxhQUFhRzs0QkFDdEMsRUFDQSxPQUFPQyxHQUFHO2dDQUNOSixjQUFjRjtnQ0FDZEcsdUJBQXVCOzRCQUMzQjt3QkFDSjtvQkFDSjtnQkFDSjtZQUNKO1FBQ0osRUFDQSxPQUFPRyxHQUFHO1lBQ04sTUFBTW5CLFlBQVlvQixpQkFBaUJEO1lBQ25DLE1BQU1BO1FBQ1Y7UUFDQSxNQUFNbkIsWUFBWXFCLGVBQWVOLGVBQWUsQ0FBQztJQUNyRDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3J1bm5hYmxlcy9icmFuY2guanM/NDRhMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSdW5uYWJsZSwgX2NvZXJjZVRvRGljdCwgX2NvZXJjZVRvUnVubmFibGUsIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnLCBwYXRjaENvbmZpZywgfSBmcm9tIFwiLi9jb25maWcuanNcIjtcbmltcG9ydCB7IGNvbmNhdCB9IGZyb20gXCIuLi91dGlscy9zdHJlYW0uanNcIjtcbi8qKlxuICogQ2xhc3MgdGhhdCByZXByZXNlbnRzIGEgcnVubmFibGUgYnJhbmNoLiBUaGUgUnVubmFibGVCcmFuY2ggaXNcbiAqIGluaXRpYWxpemVkIHdpdGggYW4gYXJyYXkgb2YgYnJhbmNoZXMgYW5kIGEgZGVmYXVsdCBicmFuY2guIFdoZW4gaW52b2tlZCxcbiAqIGl0IGV2YWx1YXRlcyB0aGUgY29uZGl0aW9uIG9mIGVhY2ggYnJhbmNoIGluIG9yZGVyIGFuZCBleGVjdXRlcyB0aGVcbiAqIGNvcnJlc3BvbmRpbmcgYnJhbmNoIGlmIHRoZSBjb25kaXRpb24gaXMgdHJ1ZS4gSWYgbm9uZSBvZiB0aGUgY29uZGl0aW9uc1xuICogYXJlIHRydWUsIGl0IGV4ZWN1dGVzIHRoZSBkZWZhdWx0IGJyYW5jaC5cbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBicmFuY2ggPSBSdW5uYWJsZUJyYW5jaC5mcm9tKFtcbiAqICAgW1xuICogICAgICh4OiB7IHRvcGljOiBzdHJpbmc7IHF1ZXN0aW9uOiBzdHJpbmcgfSkgPT5cbiAqICAgICAgIHgudG9waWMudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImFudGhyb3BpY1wiKSxcbiAqICAgICBhbnRocm9waWNDaGFpbixcbiAqICAgXSxcbiAqICAgW1xuICogICAgICh4OiB7IHRvcGljOiBzdHJpbmc7IHF1ZXN0aW9uOiBzdHJpbmcgfSkgPT5cbiAqICAgICAgIHgudG9waWMudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcImxhbmdjaGFpblwiKSxcbiAqICAgICBsYW5nQ2hhaW5DaGFpbixcbiAqICAgXSxcbiAqICAgZ2VuZXJhbENoYWluLFxuICogXSk7XG4gKlxuICogY29uc3QgZnVsbENoYWluID0gUnVubmFibGVTZXF1ZW5jZS5mcm9tKFtcbiAqICAge1xuICogICAgIHRvcGljOiBjbGFzc2lmaWNhdGlvbkNoYWluLFxuICogICAgIHF1ZXN0aW9uOiAoaW5wdXQ6IHsgcXVlc3Rpb246IHN0cmluZyB9KSA9PiBpbnB1dC5xdWVzdGlvbixcbiAqICAgfSxcbiAqICAgYnJhbmNoLFxuICogXSk7XG4gKlxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZnVsbENoYWluLmludm9rZSh7XG4gKiAgIHF1ZXN0aW9uOiBcImhvdyBkbyBJIHVzZSBMYW5nQ2hhaW4/XCIsXG4gKiB9KTtcbiAqIGBgYFxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZXhwb3J0IGNsYXNzIFJ1bm5hYmxlQnJhbmNoIGV4dGVuZHMgUnVubmFibGUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJSdW5uYWJsZUJyYW5jaFwiO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfbmFtZXNwYWNlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBbXCJsYW5nY2hhaW5fY29yZVwiLCBcInJ1bm5hYmxlc1wiXVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJkZWZhdWx0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImJyYW5jaGVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuYnJhbmNoZXMgPSBmaWVsZHMuYnJhbmNoZXM7XG4gICAgICAgIHRoaXMuZGVmYXVsdCA9IGZpZWxkcy5kZWZhdWx0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZW5pZW5jZSBtZXRob2QgZm9yIGluc3RhbnRpYXRpbmcgYSBSdW5uYWJsZUJyYW5jaCBmcm9tXG4gICAgICogUnVubmFibGVMaWtlcyAob2JqZWN0cywgZnVuY3Rpb25zLCBvciBSdW5uYWJsZXMpLlxuICAgICAqXG4gICAgICogRWFjaCBpdGVtIGluIHRoZSBpbnB1dCBleGNlcHQgZm9yIHRoZSBsYXN0IG9uZSBzaG91bGQgYmUgYVxuICAgICAqIHR1cGxlIHdpdGggdHdvIGl0ZW1zLiBUaGUgZmlyc3QgaXMgYSBcImNvbmRpdGlvblwiIFJ1bm5hYmxlTGlrZSB0aGF0XG4gICAgICogcmV0dXJucyBcInRydWVcIiBpZiB0aGUgc2Vjb25kIFJ1bm5hYmxlTGlrZSBpbiB0aGUgdHVwbGUgc2hvdWxkIHJ1bi5cbiAgICAgKlxuICAgICAqIFRoZSBmaW5hbCBpdGVtIGluIHRoZSBpbnB1dCBzaG91bGQgYmUgYSBSdW5uYWJsZUxpa2UgdGhhdCBhY3RzIGFzIGFcbiAgICAgKiBkZWZhdWx0IGJyYW5jaCBpZiBubyBvdGhlciBicmFuY2hlcyBtYXRjaC5cbiAgICAgKlxuICAgICAqIEBleGFtcGxlXG4gICAgICogYGBgdHNcbiAgICAgKiBpbXBvcnQgeyBSdW5uYWJsZUJyYW5jaCB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvcnVubmFibGVzXCI7XG4gICAgICpcbiAgICAgKiBjb25zdCBicmFuY2ggPSBSdW5uYWJsZUJyYW5jaC5mcm9tKFtcbiAgICAgKiAgIFsoeDogbnVtYmVyKSA9PiB4ID4gMCwgKHg6IG51bWJlcikgPT4geCArIDFdLFxuICAgICAqICAgWyh4OiBudW1iZXIpID0+IHggPCAwLCAoeDogbnVtYmVyKSA9PiB4IC0gMV0sXG4gICAgICogICAoeDogbnVtYmVyKSA9PiB4XG4gICAgICogXSk7XG4gICAgICogYGBgXG4gICAgICogQHBhcmFtIGJyYW5jaGVzIEFuIGFycmF5IHdoZXJlIHRoZSBldmVyeSBpdGVtIGV4Y2VwdCB0aGUgbGFzdCBpcyBhIHR1cGxlIG9mIFtjb25kaXRpb24sIHJ1bm5hYmxlXVxuICAgICAqICAgcGFpcnMuIFRoZSBsYXN0IGl0ZW0gaXMgYSBkZWZhdWx0IHJ1bm5hYmxlIHdoaWNoIGlzIGludm9rZWQgaWYgbm8gb3RoZXIgY29uZGl0aW9uIG1hdGNoZXMuXG4gICAgICogQHJldHVybnMgQSBuZXcgUnVubmFibGVCcmFuY2guXG4gICAgICovXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBzdGF0aWMgZnJvbShicmFuY2hlcykge1xuICAgICAgICBpZiAoYnJhbmNoZXMubGVuZ3RoIDwgMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUnVubmFibGVCcmFuY2ggcmVxdWlyZXMgYXQgbGVhc3Qgb25lIGJyYW5jaFwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBicmFuY2hMaWtlcyA9IGJyYW5jaGVzLnNsaWNlKDAsIC0xKTtcbiAgICAgICAgY29uc3QgY29lcmNlZEJyYW5jaGVzID0gYnJhbmNoTGlrZXMubWFwKChbY29uZGl0aW9uLCBydW5uYWJsZV0pID0+IFtcbiAgICAgICAgICAgIF9jb2VyY2VUb1J1bm5hYmxlKGNvbmRpdGlvbiksXG4gICAgICAgICAgICBfY29lcmNlVG9SdW5uYWJsZShydW5uYWJsZSksXG4gICAgICAgIF0pO1xuICAgICAgICBjb25zdCBkZWZhdWx0QnJhbmNoID0gX2NvZXJjZVRvUnVubmFibGUoYnJhbmNoZXNbYnJhbmNoZXMubGVuZ3RoIC0gMV0pO1xuICAgICAgICByZXR1cm4gbmV3IHRoaXMoe1xuICAgICAgICAgICAgYnJhbmNoZXM6IGNvZXJjZWRCcmFuY2hlcyxcbiAgICAgICAgICAgIGRlZmF1bHQ6IGRlZmF1bHRCcmFuY2gsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBfaW52b2tlKGlucHV0LCBjb25maWcsIHJ1bk1hbmFnZXIpIHtcbiAgICAgICAgbGV0IHJlc3VsdDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmJyYW5jaGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCBbY29uZGl0aW9uLCBicmFuY2hSdW5uYWJsZV0gPSB0aGlzLmJyYW5jaGVzW2ldO1xuICAgICAgICAgICAgY29uc3QgY29uZGl0aW9uVmFsdWUgPSBhd2FpdCBjb25kaXRpb24uaW52b2tlKGlucHV0LCBwYXRjaENvbmZpZyhjb25maWcsIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKGBjb25kaXRpb246JHtpICsgMX1gKSxcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGlmIChjb25kaXRpb25WYWx1ZSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IGJyYW5jaFJ1bm5hYmxlLmludm9rZShpbnB1dCwgcGF0Y2hDb25maWcoY29uZmlnLCB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrczogcnVuTWFuYWdlcj8uZ2V0Q2hpbGQoYGJyYW5jaDoke2kgKyAxfWApLFxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy5kZWZhdWx0Lmludm9rZShpbnB1dCwgcGF0Y2hDb25maWcoY29uZmlnLCB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZChcImJyYW5jaDpkZWZhdWx0XCIpLFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGFzeW5jIGludm9rZShpbnB1dCwgY29uZmlnID0ge30pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbGxXaXRoQ29uZmlnKHRoaXMuX2ludm9rZSwgaW5wdXQsIGNvbmZpZyk7XG4gICAgfVxuICAgIGFzeW5jICpfc3RyZWFtSXRlcmF0b3IoaW5wdXQsIGNvbmZpZykge1xuICAgICAgICBjb25zdCBjYWxsYmFja01hbmFnZXJfID0gYXdhaXQgZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnKGNvbmZpZyk7XG4gICAgICAgIGNvbnN0IHJ1bk1hbmFnZXIgPSBhd2FpdCBjYWxsYmFja01hbmFnZXJfPy5oYW5kbGVDaGFpblN0YXJ0KHRoaXMudG9KU09OKCksIF9jb2VyY2VUb0RpY3QoaW5wdXQsIFwiaW5wdXRcIiksIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgY29uZmlnPy5ydW5OYW1lKTtcbiAgICAgICAgbGV0IGZpbmFsT3V0cHV0O1xuICAgICAgICBsZXQgZmluYWxPdXRwdXRTdXBwb3J0ZWQgPSB0cnVlO1xuICAgICAgICBsZXQgc3RyZWFtO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmJyYW5jaGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgW2NvbmRpdGlvbiwgYnJhbmNoUnVubmFibGVdID0gdGhpcy5icmFuY2hlc1tpXTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb25kaXRpb25WYWx1ZSA9IGF3YWl0IGNvbmRpdGlvbi5pbnZva2UoaW5wdXQsIHBhdGNoQ29uZmlnKGNvbmZpZywge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKGBjb25kaXRpb246JHtpICsgMX1gKSxcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbmRpdGlvblZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbSA9IGF3YWl0IGJyYW5jaFJ1bm5hYmxlLnN0cmVhbShpbnB1dCwgcGF0Y2hDb25maWcoY29uZmlnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFja3M6IHJ1bk1hbmFnZXI/LmdldENoaWxkKGBicmFuY2g6JHtpICsgMX1gKSxcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHN0cmVhbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgeWllbGQgY2h1bms7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmluYWxPdXRwdXRTdXBwb3J0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmluYWxPdXRwdXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IGNodW5rO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0ID0gY29uY2F0KGZpbmFsT3V0cHV0LCBjaHVuayk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxPdXRwdXRTdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3RyZWFtID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBzdHJlYW0gPSBhd2FpdCB0aGlzLmRlZmF1bHQuc3RyZWFtKGlucHV0LCBwYXRjaENvbmZpZyhjb25maWcsIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2tzOiBydW5NYW5hZ2VyPy5nZXRDaGlsZChcImJyYW5jaDpkZWZhdWx0XCIpLFxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHN0cmVhbSkge1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCBjaHVuaztcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbmFsT3V0cHV0U3VwcG9ydGVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmluYWxPdXRwdXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0ID0gY2h1bms7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IGNvbmNhdChmaW5hbE91dHB1dCwgY2h1bmspO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxPdXRwdXRTdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRXJyb3IoZSk7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHJ1bk1hbmFnZXI/LmhhbmRsZUNoYWluRW5kKGZpbmFsT3V0cHV0ID8/IHt9KTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiUnVubmFibGUiLCJfY29lcmNlVG9EaWN0IiwiX2NvZXJjZVRvUnVubmFibGUiLCJnZXRDYWxsYmFja01hbmFnZXJGb3JDb25maWciLCJwYXRjaENvbmZpZyIsImNvbmNhdCIsIlJ1bm5hYmxlQnJhbmNoIiwibGNfbmFtZSIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImJyYW5jaGVzIiwiZGVmYXVsdCIsImZyb20iLCJsZW5ndGgiLCJFcnJvciIsImJyYW5jaExpa2VzIiwic2xpY2UiLCJjb2VyY2VkQnJhbmNoZXMiLCJtYXAiLCJjb25kaXRpb24iLCJydW5uYWJsZSIsImRlZmF1bHRCcmFuY2giLCJfaW52b2tlIiwiaW5wdXQiLCJjb25maWciLCJydW5NYW5hZ2VyIiwicmVzdWx0IiwiaSIsImJyYW5jaFJ1bm5hYmxlIiwiY29uZGl0aW9uVmFsdWUiLCJpbnZva2UiLCJjYWxsYmFja3MiLCJnZXRDaGlsZCIsIl9jYWxsV2l0aENvbmZpZyIsIl9zdHJlYW1JdGVyYXRvciIsImNhbGxiYWNrTWFuYWdlcl8iLCJoYW5kbGVDaGFpblN0YXJ0IiwidG9KU09OIiwidW5kZWZpbmVkIiwicnVuTmFtZSIsImZpbmFsT3V0cHV0IiwiZmluYWxPdXRwdXRTdXBwb3J0ZWQiLCJzdHJlYW0iLCJjaHVuayIsImUiLCJoYW5kbGVDaGFpbkVycm9yIiwiaGFuZGxlQ2hhaW5FbmQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/branch.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/config.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/config.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DEFAULT_RECURSION_LIMIT: () => (/* binding */ DEFAULT_RECURSION_LIMIT),\n/* harmony export */   ensureConfig: () => (/* binding */ ensureConfig),\n/* harmony export */   getCallbackManagerForConfig: () => (/* binding */ getCallbackManagerForConfig),\n/* harmony export */   mergeConfigs: () => (/* binding */ mergeConfigs),\n/* harmony export */   patchConfig: () => (/* binding */ patchConfig)\n/* harmony export */ });\n/* harmony import */ var _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../callbacks/manager.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/manager.js\");\n/* harmony import */ var _singletons_index_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../singletons/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/singletons/index.js\");\n\n\nconst DEFAULT_RECURSION_LIMIT = 25;\nasync function getCallbackManagerForConfig(config) {\n    return _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.CallbackManager.configure(config?.callbacks, undefined, config?.tags, undefined, config?.metadata);\n}\nfunction mergeConfigs(...configs) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const copy = ensureConfig();\n    for (const options of configs.filter((c)=>!!c)){\n        for (const key of Object.keys(options)){\n            if (key === \"metadata\") {\n                copy[key] = {\n                    ...copy[key],\n                    ...options[key]\n                };\n            } else if (key === \"tags\") {\n                copy[key] = [\n                    ...new Set(copy[key].concat(options[key] ?? []))\n                ];\n            } else if (key === \"configurable\") {\n                copy[key] = {\n                    ...copy[key],\n                    ...options[key]\n                };\n            } else if (key === \"callbacks\") {\n                const baseCallbacks = copy.callbacks;\n                const providedCallbacks = options.callbacks;\n                // callbacks can be either undefined, Array<handler> or manager\n                // so merging two callbacks values has 6 cases\n                if (Array.isArray(providedCallbacks)) {\n                    if (!baseCallbacks) {\n                        copy.callbacks = providedCallbacks;\n                    } else if (Array.isArray(baseCallbacks)) {\n                        copy.callbacks = baseCallbacks.concat(providedCallbacks);\n                    } else {\n                        // baseCallbacks is a manager\n                        const manager = baseCallbacks.copy();\n                        for (const callback of providedCallbacks){\n                            manager.addHandler((0,_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.ensureHandler)(callback), true);\n                        }\n                        copy.callbacks = manager;\n                    }\n                } else if (providedCallbacks) {\n                    // providedCallbacks is a manager\n                    if (!baseCallbacks) {\n                        copy.callbacks = providedCallbacks;\n                    } else if (Array.isArray(baseCallbacks)) {\n                        const manager = providedCallbacks.copy();\n                        for (const callback of baseCallbacks){\n                            manager.addHandler((0,_callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.ensureHandler)(callback), true);\n                        }\n                        copy.callbacks = manager;\n                    } else {\n                        // baseCallbacks is also a manager\n                        copy.callbacks = new _callbacks_manager_js__WEBPACK_IMPORTED_MODULE_0__.CallbackManager(providedCallbacks._parentRunId, {\n                            handlers: baseCallbacks.handlers.concat(providedCallbacks.handlers),\n                            inheritableHandlers: baseCallbacks.inheritableHandlers.concat(providedCallbacks.inheritableHandlers),\n                            tags: Array.from(new Set(baseCallbacks.tags.concat(providedCallbacks.tags))),\n                            inheritableTags: Array.from(new Set(baseCallbacks.inheritableTags.concat(providedCallbacks.inheritableTags))),\n                            metadata: {\n                                ...baseCallbacks.metadata,\n                                ...providedCallbacks.metadata\n                            }\n                        });\n                    }\n                }\n            } else {\n                const typedKey = key;\n                copy[typedKey] = options[typedKey] ?? copy[typedKey];\n            }\n        }\n    }\n    return copy;\n}\nconst PRIMITIVES = new Set([\n    \"string\",\n    \"number\",\n    \"boolean\"\n]);\n/**\n * Ensure that a passed config is an object with all required keys present.\n */ function ensureConfig(config) {\n    const loadedConfig = config ?? _singletons_index_js__WEBPACK_IMPORTED_MODULE_1__.AsyncLocalStorageProviderSingleton.getInstance().getStore();\n    let empty = {\n        tags: [],\n        metadata: {},\n        callbacks: undefined,\n        recursionLimit: 25\n    };\n    if (loadedConfig) {\n        empty = {\n            ...empty,\n            ...loadedConfig\n        };\n    }\n    if (loadedConfig?.configurable) {\n        for (const key of Object.keys(loadedConfig.configurable)){\n            if (PRIMITIVES.has(typeof loadedConfig.configurable[key]) && !empty.metadata?.[key]) {\n                if (!empty.metadata) {\n                    empty.metadata = {};\n                }\n                empty.metadata[key] = loadedConfig.configurable[key];\n            }\n        }\n    }\n    return empty;\n}\n/**\n * Helper function that patches runnable configs with updated properties.\n */ function patchConfig(config = {}, { callbacks, maxConcurrency, recursionLimit, runName, configurable } = {}) {\n    const newConfig = ensureConfig(config);\n    if (callbacks !== undefined) {\n        /**\n         * If we're replacing callbacks we need to unset runName\n         * since that should apply only to the same run as the original callbacks\n         */ delete newConfig.runName;\n        newConfig.callbacks = callbacks;\n    }\n    if (recursionLimit !== undefined) {\n        newConfig.recursionLimit = recursionLimit;\n    }\n    if (maxConcurrency !== undefined) {\n        newConfig.maxConcurrency = maxConcurrency;\n    }\n    if (runName !== undefined) {\n        newConfig.runName = runName;\n    }\n    if (configurable !== undefined) {\n        newConfig.configurable = {\n            ...newConfig.configurable,\n            ...configurable\n        };\n    }\n    return newConfig;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2NvbmZpZy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTBFO0FBQ0U7QUFDckUsTUFBTUcsMEJBQTBCLEdBQUc7QUFDbkMsZUFBZUMsNEJBQTRCQyxNQUFNO0lBQ3BELE9BQU9MLGtFQUFlQSxDQUFDTSxTQUFTLENBQUNELFFBQVFFLFdBQVdDLFdBQVdILFFBQVFJLE1BQU1ELFdBQVdILFFBQVFLO0FBQ3BHO0FBQ08sU0FBU0MsYUFBYSxHQUFHQyxPQUFPO0lBQ25DLDhEQUE4RDtJQUM5RCxNQUFNQyxPQUFPQztJQUNiLEtBQUssTUFBTUMsV0FBV0gsUUFBUUksTUFBTSxDQUFDLENBQUNDLElBQU0sQ0FBQyxDQUFDQSxHQUFJO1FBQzlDLEtBQUssTUFBTUMsT0FBT0MsT0FBT0MsSUFBSSxDQUFDTCxTQUFVO1lBQ3BDLElBQUlHLFFBQVEsWUFBWTtnQkFDcEJMLElBQUksQ0FBQ0ssSUFBSSxHQUFHO29CQUFFLEdBQUdMLElBQUksQ0FBQ0ssSUFBSTtvQkFBRSxHQUFHSCxPQUFPLENBQUNHLElBQUk7Z0JBQUM7WUFDaEQsT0FDSyxJQUFJQSxRQUFRLFFBQVE7Z0JBQ3JCTCxJQUFJLENBQUNLLElBQUksR0FBRzt1QkFBSSxJQUFJRyxJQUFJUixJQUFJLENBQUNLLElBQUksQ0FBQ0ksTUFBTSxDQUFDUCxPQUFPLENBQUNHLElBQUksSUFBSSxFQUFFO2lCQUFHO1lBQ2xFLE9BQ0ssSUFBSUEsUUFBUSxnQkFBZ0I7Z0JBQzdCTCxJQUFJLENBQUNLLElBQUksR0FBRztvQkFBRSxHQUFHTCxJQUFJLENBQUNLLElBQUk7b0JBQUUsR0FBR0gsT0FBTyxDQUFDRyxJQUFJO2dCQUFDO1lBQ2hELE9BQ0ssSUFBSUEsUUFBUSxhQUFhO2dCQUMxQixNQUFNSyxnQkFBZ0JWLEtBQUtOLFNBQVM7Z0JBQ3BDLE1BQU1pQixvQkFBb0JULFFBQVFSLFNBQVM7Z0JBQzNDLCtEQUErRDtnQkFD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bUIsYUFBYUssWUFBWSxDQUFDeEIsSUFBSTtZQUN4RDtRQUNKO0lBQ0o7SUFDQSxPQUFPc0I7QUFDWDtBQUNBOztDQUVDLEdBQ00sU0FBU0ksWUFBWXZDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsRUFBRUUsU0FBUyxFQUFFc0MsY0FBYyxFQUFFSixjQUFjLEVBQUVLLE9BQU8sRUFBRUosWUFBWSxFQUFHLEdBQUcsQ0FBQyxDQUFDO0lBQy9HLE1BQU1LLFlBQVlqQyxhQUFhVDtJQUMvQixJQUFJRSxjQUFjQyxXQUFXO1FBQ3pCOzs7U0FHQyxHQUNELE9BQU91QyxVQUFVRCxPQUFPO1FBQ3hCQyxVQUFVeEMsU0FBUyxHQUFHQTtJQUMxQjtJQUNBLElBQUlrQyxtQkFBbUJqQyxXQUFXO1FBQzlCdUMsVUFBVU4sY0FBYyxHQUFHQTtJQUMvQjtJQUNBLElBQUlJLG1CQUFtQnJDLFdBQVc7UUFDOUJ1QyxVQUFVRixjQUFjLEdBQUdBO0lBQy9CO0lBQ0EsSUFBSUMsWUFBWXRDLFdBQVc7UUFDdkJ1QyxVQUFVRCxPQUFPLEdBQUdBO0lBQ3hCO0lBQ0EsSUFBSUosaUJBQWlCbEMsV0FBVztRQUM1QnVDLFVBQVVMLFlBQVksR0FBRztZQUFFLEdBQUdLLFVBQVVMLFlBQVk7WUFBRSxHQUFHQSxZQUFZO1FBQUM7SUFDMUU7SUFDQSxPQUFPSztBQUNYIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3J1bm5hYmxlcy9jb25maWcuanM/MjdlYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDYWxsYmFja01hbmFnZXIsIGVuc3VyZUhhbmRsZXIsIH0gZnJvbSBcIi4uL2NhbGxiYWNrcy9tYW5hZ2VyLmpzXCI7XG5pbXBvcnQgeyBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uIH0gZnJvbSBcIi4uL3NpbmdsZXRvbnMvaW5kZXguanNcIjtcbmV4cG9ydCBjb25zdCBERUZBVUxUX1JFQ1VSU0lPTl9MSU1JVCA9IDI1O1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENhbGxiYWNrTWFuYWdlckZvckNvbmZpZyhjb25maWcpIHtcbiAgICByZXR1cm4gQ2FsbGJhY2tNYW5hZ2VyLmNvbmZpZ3VyZShjb25maWc/LmNhbGxiYWNrcywgdW5kZWZpbmVkLCBjb25maWc/LnRhZ3MsIHVuZGVmaW5lZCwgY29uZmlnPy5tZXRhZGF0YSk7XG59XG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VDb25maWdzKC4uLmNvbmZpZ3MpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGNvbnN0IGNvcHkgPSBlbnN1cmVDb25maWcoKTtcbiAgICBmb3IgKGNvbnN0IG9wdGlvbnMgb2YgY29uZmlncy5maWx0ZXIoKGMpID0+ICEhYykpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMob3B0aW9ucykpIHtcbiAgICAgICAgICAgIGlmIChrZXkgPT09IFwibWV0YWRhdGFcIikge1xuICAgICAgICAgICAgICAgIGNvcHlba2V5XSA9IHsgLi4uY29weVtrZXldLCAuLi5vcHRpb25zW2tleV0gfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGtleSA9PT0gXCJ0YWdzXCIpIHtcbiAgICAgICAgICAgICAgICBjb3B5W2tleV0gPSBbLi4ubmV3IFNldChjb3B5W2tleV0uY29uY2F0KG9wdGlvbnNba2V5XSA/PyBbXSkpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGtleSA9PT0gXCJjb25maWd1cmFibGVcIikge1xuICAgICAgICAgICAgICAgIGNvcHlba2V5XSA9IHsgLi4uY29weVtrZXldLCAuLi5vcHRpb25zW2tleV0gfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGtleSA9PT0gXCJjYWxsYmFja3NcIikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VDYWxsYmFja3MgPSBjb3B5LmNhbGxiYWNrcztcbiAgICAgICAgICAgICAgICBjb25zdCBwcm92aWRlZENhbGxiYWNrcyA9IG9wdGlvbnMuY2FsbGJhY2tzO1xuICAgICAgICAgICAgICAgIC8vIGNhbGxiYWNrcyBjYW4gYmUgZWl0aGVyIHVuZGVmaW5lZCwgQXJyYXk8aGFuZGxlcj4gb3IgbWFuYWdlclxuICAgICAgICAgICAgICAgIC8vIHNvIG1lcmdpbmcgdHdvIGNhbGxiYWNrcyB2YWx1ZXMgaGFzIDYgY2FzZXNcbiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShwcm92aWRlZENhbGxiYWNrcykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFiYXNlQ2FsbGJhY2tzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3B5LmNhbGxiYWNrcyA9IHByb3ZpZGVkQ2FsbGJhY2tzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoYmFzZUNhbGxiYWNrcykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcHkuY2FsbGJhY2tzID0gYmFzZUNhbGxiYWNrcy5jb25jYXQocHJvdmlkZWRDYWxsYmFja3MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmFzZUNhbGxiYWNrcyBpcyBhIG1hbmFnZXJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hbmFnZXIgPSBiYXNlQ2FsbGJhY2tzLmNvcHkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY2FsbGJhY2sgb2YgcHJvdmlkZWRDYWxsYmFja3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYW5hZ2VyLmFkZEhhbmRsZXIoZW5zdXJlSGFuZGxlcihjYWxsYmFjayksIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY29weS5jYWxsYmFja3MgPSBtYW5hZ2VyO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHByb3ZpZGVkQ2FsbGJhY2tzKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHByb3ZpZGVkQ2FsbGJhY2tzIGlzIGEgbWFuYWdlclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWJhc2VDYWxsYmFja3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcHkuY2FsbGJhY2tzID0gcHJvdmlkZWRDYWxsYmFja3M7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShiYXNlQ2FsbGJhY2tzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFuYWdlciA9IHByb3ZpZGVkQ2FsbGJhY2tzLmNvcHkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY2FsbGJhY2sgb2YgYmFzZUNhbGxiYWNrcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hbmFnZXIuYWRkSGFuZGxlcihlbnN1cmVIYW5kbGVyKGNhbGxiYWNrKSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb3B5LmNhbGxiYWNrcyA9IG1hbmFnZXI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBiYXNlQ2FsbGJhY2tzIGlzIGFsc28gYSBtYW5hZ2VyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3B5LmNhbGxiYWNrcyA9IG5ldyBDYWxsYmFja01hbmFnZXIocHJvdmlkZWRDYWxsYmFja3MuX3BhcmVudFJ1bklkLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlcnM6IGJhc2VDYWxsYmFja3MuaGFuZGxlcnMuY29uY2F0KHByb3ZpZGVkQ2FsbGJhY2tzLmhhbmRsZXJzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmhlcml0YWJsZUhhbmRsZXJzOiBiYXNlQ2FsbGJhY2tzLmluaGVyaXRhYmxlSGFuZGxlcnMuY29uY2F0KHByb3ZpZGVkQ2FsbGJhY2tzLmluaGVyaXRhYmxlSGFuZGxlcnMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhZ3M6IEFycmF5LmZyb20obmV3IFNldChiYXNlQ2FsbGJhY2tzLnRhZ3MuY29uY2F0KHByb3ZpZGVkQ2FsbGJhY2tzLnRhZ3MpKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5oZXJpdGFibGVUYWdzOiBBcnJheS5mcm9tKG5ldyBTZXQoYmFzZUNhbGxiYWNrcy5pbmhlcml0YWJsZVRhZ3MuY29uY2F0KHByb3ZpZGVkQ2FsbGJhY2tzLmluaGVyaXRhYmxlVGFncykpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5iYXNlQ2FsbGJhY2tzLm1ldGFkYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5wcm92aWRlZENhbGxiYWNrcy5tZXRhZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0eXBlZEtleSA9IGtleTtcbiAgICAgICAgICAgICAgICBjb3B5W3R5cGVkS2V5XSA9IG9wdGlvbnNbdHlwZWRLZXldID8/IGNvcHlbdHlwZWRLZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjb3B5O1xufVxuY29uc3QgUFJJTUlUSVZFUyA9IG5ldyBTZXQoW1wic3RyaW5nXCIsIFwibnVtYmVyXCIsIFwiYm9vbGVhblwiXSk7XG4vKipcbiAqIEVuc3VyZSB0aGF0IGEgcGFzc2VkIGNvbmZpZyBpcyBhbiBvYmplY3Qgd2l0aCBhbGwgcmVxdWlyZWQga2V5cyBwcmVzZW50LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZW5zdXJlQ29uZmlnKGNvbmZpZykge1xuICAgIGNvbnN0IGxvYWRlZENvbmZpZyA9IGNvbmZpZyA/PyBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uLmdldEluc3RhbmNlKCkuZ2V0U3RvcmUoKTtcbiAgICBsZXQgZW1wdHkgPSB7XG4gICAgICAgIHRhZ3M6IFtdLFxuICAgICAgICBtZXRhZGF0YToge30sXG4gICAgICAgIGNhbGxiYWNrczogdW5kZWZpbmVkLFxuICAgICAgICByZWN1cnNpb25MaW1pdDogMjUsXG4gICAgfTtcbiAgICBpZiAobG9hZGVkQ29uZmlnKSB7XG4gICAgICAgIGVtcHR5ID0geyAuLi5lbXB0eSwgLi4ubG9hZGVkQ29uZmlnIH07XG4gICAgfVxuICAgIGlmIChsb2FkZWRDb25maWc/LmNvbmZpZ3VyYWJsZSkge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhsb2FkZWRDb25maWcuY29uZmlndXJhYmxlKSkge1xuICAgICAgICAgICAgaWYgKFBSSU1JVElWRVMuaGFzKHR5cGVvZiBsb2FkZWRDb25maWcuY29uZmlndXJhYmxlW2tleV0pICYmXG4gICAgICAgICAgICAgICAgIWVtcHR5Lm1ldGFkYXRhPy5ba2V5XSkge1xuICAgICAgICAgICAgICAgIGlmICghZW1wdHkubWV0YWRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgZW1wdHkubWV0YWRhdGEgPSB7fTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZW1wdHkubWV0YWRhdGFba2V5XSA9IGxvYWRlZENvbmZpZy5jb25maWd1cmFibGVba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZW1wdHk7XG59XG4vKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0aGF0IHBhdGNoZXMgcnVubmFibGUgY29uZmlncyB3aXRoIHVwZGF0ZWQgcHJvcGVydGllcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhdGNoQ29uZmlnKGNvbmZpZyA9IHt9LCB7IGNhbGxiYWNrcywgbWF4Q29uY3VycmVuY3ksIHJlY3Vyc2lvbkxpbWl0LCBydW5OYW1lLCBjb25maWd1cmFibGUsIH0gPSB7fSkge1xuICAgIGNvbnN0IG5ld0NvbmZpZyA9IGVuc3VyZUNvbmZpZyhjb25maWcpO1xuICAgIGlmIChjYWxsYmFja3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgd2UncmUgcmVwbGFjaW5nIGNhbGxiYWNrcyB3ZSBuZWVkIHRvIHVuc2V0IHJ1bk5hbWVcbiAgICAgICAgICogc2luY2UgdGhhdCBzaG91bGQgYXBwbHkgb25seSB0byB0aGUgc2FtZSBydW4gYXMgdGhlIG9yaWdpbmFsIGNhbGxiYWNrc1xuICAgICAgICAgKi9cbiAgICAgICAgZGVsZXRlIG5ld0NvbmZpZy5ydW5OYW1lO1xuICAgICAgICBuZXdDb25maWcuY2FsbGJhY2tzID0gY2FsbGJhY2tzO1xuICAgIH1cbiAgICBpZiAocmVjdXJzaW9uTGltaXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBuZXdDb25maWcucmVjdXJzaW9uTGltaXQgPSByZWN1cnNpb25MaW1pdDtcbiAgICB9XG4gICAgaWYgKG1heENvbmN1cnJlbmN5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbmV3Q29uZmlnLm1heENvbmN1cnJlbmN5ID0gbWF4Q29uY3VycmVuY3k7XG4gICAgfVxuICAgIGlmIChydW5OYW1lICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbmV3Q29uZmlnLnJ1bk5hbWUgPSBydW5OYW1lO1xuICAgIH1cbiAgICBpZiAoY29uZmlndXJhYmxlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbmV3Q29uZmlnLmNvbmZpZ3VyYWJsZSA9IHsgLi4ubmV3Q29uZmlnLmNvbmZpZ3VyYWJsZSwgLi4uY29uZmlndXJhYmxlIH07XG4gICAgfVxuICAgIHJldHVybiBuZXdDb25maWc7XG59XG4iXSwibmFtZXMiOlsiQ2FsbGJhY2tNYW5hZ2VyIiwiZW5zdXJlSGFuZGxlciIsIkFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXJTaW5nbGV0b24iLCJERUZBVUxUX1JFQ1VSU0lPTl9MSU1JVCIsImdldENhbGxiYWNrTWFuYWdlckZvckNvbmZpZyIsImNvbmZpZyIsImNvbmZpZ3VyZSIsImNhbGxiYWNrcyIsInVuZGVmaW5lZCIsInRhZ3MiLCJtZXRhZGF0YSIsIm1lcmdlQ29uZmlncyIsImNvbmZpZ3MiLCJjb3B5IiwiZW5zdXJlQ29uZmlnIiwib3B0aW9ucyIsImZpbHRlciIsImMiLCJrZXkiLCJPYmplY3QiLCJrZXlzIiwiU2V0IiwiY29uY2F0IiwiYmFzZUNhbGxiYWNrcyIsInByb3ZpZGVkQ2FsbGJhY2tzIiwiQXJyYXkiLCJpc0FycmF5IiwibWFuYWdlciIsImNhbGxiYWNrIiwiYWRkSGFuZGxlciIsIl9wYXJlbnRSdW5JZCIsImhhbmRsZXJzIiwiaW5oZXJpdGFibGVIYW5kbGVycyIsImZyb20iLCJpbmhlcml0YWJsZVRhZ3MiLCJ0eXBlZEtleSIsIlBSSU1JVElWRVMiLCJsb2FkZWRDb25maWciLCJnZXRJbnN0YW5jZSIsImdldFN0b3JlIiwiZW1wdHkiLCJyZWN1cnNpb25MaW1pdCIsImNvbmZpZ3VyYWJsZSIsImhhcyIsInBhdGNoQ29uZmlnIiwibWF4Q29uY3VycmVuY3kiLCJydW5OYW1lIiwibmV3Q29uZmlnIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/config.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/graph.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/graph.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Graph: () => (/* binding */ Graph),\n/* harmony export */   nodeDataStr: () => (/* binding */ nodeDataStr)\n/* harmony export */ });\n/* harmony import */ var zod_to_json_schema__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod-to-json-schema */ \"(rsc)/./node_modules/zod-to-json-schema/dist/esm/index.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/validate.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/utils.js\");\n\n\n\nconst MAX_DATA_DISPLAY_NAME_LENGTH = 42;\nfunction nodeDataStr(node) {\n    if (!(0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(node.id)) {\n        return node.id;\n    } else if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isRunnableInterface)(node.data)) {\n        try {\n            let data = node.data.toString();\n            if (data.startsWith(\"<\") || data[0] !== data[0].toUpperCase() || data.split(\"\\n\").length > 1) {\n                data = node.data.getName();\n            } else if (data.length > MAX_DATA_DISPLAY_NAME_LENGTH) {\n                data = `${data.substring(0, MAX_DATA_DISPLAY_NAME_LENGTH)}...`;\n            }\n            return data.startsWith(\"Runnable\") ? data.slice(\"Runnable\".length) : data;\n        } catch (error) {\n            return node.data.getName();\n        }\n    } else {\n        return node.data.name ?? \"UnknownSchema\";\n    }\n}\nfunction nodeDataJson(node) {\n    // if node.data is implements Runnable\n    if ((0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.isRunnableInterface)(node.data)) {\n        return {\n            type: \"runnable\",\n            data: {\n                id: node.data.lc_id,\n                name: node.data.getName()\n            }\n        };\n    } else {\n        return {\n            type: \"schema\",\n            data: {\n                ...(0,zod_to_json_schema__WEBPACK_IMPORTED_MODULE_0__.zodToJsonSchema)(node.data.schema),\n                title: node.data.name\n            }\n        };\n    }\n}\nclass Graph {\n    constructor(){\n        Object.defineProperty(this, \"nodes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"edges\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n    }\n    // Convert the graph to a JSON-serializable format.\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    toJSON() {\n        const stableNodeIds = {};\n        Object.values(this.nodes).forEach((node, i)=>{\n            stableNodeIds[node.id] = (0,uuid__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(node.id) ? i : node.id;\n        });\n        return {\n            nodes: Object.values(this.nodes).map((node)=>({\n                    id: stableNodeIds[node.id],\n                    ...nodeDataJson(node)\n                })),\n            edges: this.edges.map((edge)=>edge.data ? {\n                    source: stableNodeIds[edge.source],\n                    target: stableNodeIds[edge.target],\n                    data: edge.data\n                } : {\n                    source: stableNodeIds[edge.source],\n                    target: stableNodeIds[edge.target]\n                })\n        };\n    }\n    addNode(data, id) {\n        if (id !== undefined && this.nodes[id] !== undefined) {\n            throw new Error(`Node with id ${id} already exists`);\n        }\n        const nodeId = id || (0,uuid__WEBPACK_IMPORTED_MODULE_3__[\"default\"])();\n        const node = {\n            id: nodeId,\n            data\n        };\n        this.nodes[nodeId] = node;\n        return node;\n    }\n    removeNode(node) {\n        // Remove the node from the nodes map\n        delete this.nodes[node.id];\n        // Filter out edges connected to the node\n        this.edges = this.edges.filter((edge)=>edge.source !== node.id && edge.target !== node.id);\n    }\n    addEdge(source, target, data) {\n        if (this.nodes[source.id] === undefined) {\n            throw new Error(`Source node ${source.id} not in graph`);\n        }\n        if (this.nodes[target.id] === undefined) {\n            throw new Error(`Target node ${target.id} not in graph`);\n        }\n        const edge = {\n            source: source.id,\n            target: target.id,\n            data\n        };\n        this.edges.push(edge);\n        return edge;\n    }\n    firstNode() {\n        const targets = new Set(this.edges.map((edge)=>edge.target));\n        const found = [];\n        Object.values(this.nodes).forEach((node)=>{\n            if (!targets.has(node.id)) {\n                found.push(node);\n            }\n        });\n        return found[0];\n    }\n    lastNode() {\n        const sources = new Set(this.edges.map((edge)=>edge.source));\n        const found = [];\n        Object.values(this.nodes).forEach((node)=>{\n            if (!sources.has(node.id)) {\n                found.push(node);\n            }\n        });\n        return found[0];\n    }\n    extend(graph) {\n        // Add all nodes from the other graph, taking care to avoid duplicates\n        Object.entries(graph.nodes).forEach(([key, value])=>{\n            this.nodes[key] = value;\n        });\n        // Add all edges from the other graph\n        this.edges = [\n            ...this.edges,\n            ...graph.edges\n        ];\n    }\n    trimFirstNode() {\n        const firstNode = this.firstNode();\n        if (firstNode) {\n            const outgoingEdges = this.edges.filter((edge)=>edge.source === firstNode.id);\n            if (Object.keys(this.nodes).length === 1 || outgoingEdges.length === 1) {\n                this.removeNode(firstNode);\n            }\n        }\n    }\n    trimLastNode() {\n        const lastNode = this.lastNode();\n        if (lastNode) {\n            const incomingEdges = this.edges.filter((edge)=>edge.target === lastNode.id);\n            if (Object.keys(this.nodes).length === 1 || incomingEdges.length === 1) {\n                this.removeNode(lastNode);\n            }\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2dyYXBoLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFxRDtBQUNHO0FBQ1A7QUFDakQsTUFBTU0sK0JBQStCO0FBQzlCLFNBQVNDLFlBQVlDLElBQUk7SUFDNUIsSUFBSSxDQUFDSixnREFBTUEsQ0FBQ0ksS0FBS0MsRUFBRSxHQUFHO1FBQ2xCLE9BQU9ELEtBQUtDLEVBQUU7SUFDbEIsT0FDSyxJQUFJSiw4REFBbUJBLENBQUNHLEtBQUtFLElBQUksR0FBRztRQUNyQyxJQUFJO1lBQ0EsSUFBSUEsT0FBT0YsS0FBS0UsSUFBSSxDQUFDQyxRQUFRO1lBQzdCLElBQUlELEtBQUtFLFVBQVUsQ0FBQyxRQUNoQkYsSUFBSSxDQUFDLEVBQUUsS0FBS0EsSUFBSSxDQUFDLEVBQUUsQ0FBQ0csV0FBVyxNQUMvQkgsS0FBS0ksS0FBSyxDQUFDLE1BQU1DLE1BQU0sR0FBRyxHQUFHO2dCQUM3QkwsT0FBT0YsS0FBS0UsSUFBSSxDQUFDTSxPQUFPO1lBQzVCLE9BQ0ssSUFBSU4sS0FBS0ssTUFBTSxHQUFHVCw4QkFBOEI7Z0JBQ2pESSxPQUFPLENBQUMsRUFBRUEsS0FBS08sU0FBUyxDQUFDLEdBQUdYLDhCQUE4QixHQUFHLENBQUM7WUFDbEU7WUFDQSxPQUFPSSxLQUFLRSxVQUFVLENBQUMsY0FBY0YsS0FBS1EsS0FBSyxDQUFDLFdBQVdILE1BQU0sSUFBSUw7UUFDekUsRUFDQSxPQUFPUyxPQUFPO1lBQ1YsT0FBT1gsS0FBS0UsSUFBSSxDQUFDTSxPQUFPO1FBQzVCO0lBQ0osT0FDSztRQUNELE9BQU9SLEtBQUtFLElBQUksQ0FBQ1UsSUFBSSxJQUFJO0lBQzdCO0FBQ0o7QUFDQSxTQUFTQyxhQUFhYixJQUFJO0lBQ3RCLHNDQUFzQztJQUN0QyxJQUFJSCw4REFBbUJBLENBQUNHLEtBQUtFLElBQUksR0FBRztRQUNoQyxPQUFPO1lBQ0hZLE1BQU07WUFDTlosTUFBTTtnQkFD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YW5nY2hhaW4vY29yZS9kaXN0L3J1bm5hYmxlcy9ncmFwaC5qcz8zNDE4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHpvZFRvSnNvblNjaGVtYSB9IGZyb20gXCJ6b2QtdG8tanNvbi1zY2hlbWFcIjtcbmltcG9ydCB7IHY0IGFzIHV1aWR2NCwgdmFsaWRhdGUgYXMgaXNVdWlkIH0gZnJvbSBcInV1aWRcIjtcbmltcG9ydCB7IGlzUnVubmFibGVJbnRlcmZhY2UgfSBmcm9tIFwiLi91dGlscy5qc1wiO1xuY29uc3QgTUFYX0RBVEFfRElTUExBWV9OQU1FX0xFTkdUSCA9IDQyO1xuZXhwb3J0IGZ1bmN0aW9uIG5vZGVEYXRhU3RyKG5vZGUpIHtcbiAgICBpZiAoIWlzVXVpZChub2RlLmlkKSkge1xuICAgICAgICByZXR1cm4gbm9kZS5pZDtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNSdW5uYWJsZUludGVyZmFjZShub2RlLmRhdGEpKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsZXQgZGF0YSA9IG5vZGUuZGF0YS50b1N0cmluZygpO1xuICAgICAgICAgICAgaWYgKGRhdGEuc3RhcnRzV2l0aChcIjxcIikgfHxcbiAgICAgICAgICAgICAgICBkYXRhWzBdICE9PSBkYXRhWzBdLnRvVXBwZXJDYXNlKCkgfHxcbiAgICAgICAgICAgICAgICBkYXRhLnNwbGl0KFwiXFxuXCIpLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICBkYXRhID0gbm9kZS5kYXRhLmdldE5hbWUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGRhdGEubGVuZ3RoID4gTUFYX0RBVEFfRElTUExBWV9OQU1FX0xFTkdUSCkge1xuICAgICAgICAgICAgICAgIGRhdGEgPSBgJHtkYXRhLnN1YnN0cmluZygwLCBNQVhfREFUQV9ESVNQTEFZX05BTUVfTEVOR1RIKX0uLi5gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRhdGEuc3RhcnRzV2l0aChcIlJ1bm5hYmxlXCIpID8gZGF0YS5zbGljZShcIlJ1bm5hYmxlXCIubGVuZ3RoKSA6IGRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZS5kYXRhLmdldE5hbWUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5vZGUuZGF0YS5uYW1lID8/IFwiVW5rbm93blNjaGVtYVwiO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG5vZGVEYXRhSnNvbihub2RlKSB7XG4gICAgLy8gaWYgbm9kZS5kYXRhIGlzIGltcGxlbWVudHMgUnVubmFibGVcbiAgICBpZiAoaXNSdW5uYWJsZUludGVyZmFjZShub2RlLmRhdGEpKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBcInJ1bm5hYmxlXCIsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgaWQ6IG5vZGUuZGF0YS5sY19pZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBub2RlLmRhdGEuZ2V0TmFtZSgpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBcInNjaGVtYVwiLFxuICAgICAgICAgICAgZGF0YTogeyAuLi56b2RUb0pzb25TY2hlbWEobm9kZS5kYXRhLnNjaGVtYSksIHRpdGxlOiBub2RlLmRhdGEubmFtZSB9LFxuICAgICAgICB9O1xuICAgIH1cbn1cbmV4cG9ydCBjbGFzcyBHcmFwaCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5vZGVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB7fVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZWRnZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBDb252ZXJ0IHRoZSBncmFwaCB0byBhIEpTT04tc2VyaWFsaXphYmxlIGZvcm1hdC5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHRvSlNPTigpIHtcbiAgICAgICAgY29uc3Qgc3RhYmxlTm9kZUlkcyA9IHt9O1xuICAgICAgICBPYmplY3QudmFsdWVzKHRoaXMubm9kZXMpLmZvckVhY2goKG5vZGUsIGkpID0+IHtcbiAgICAgICAgICAgIHN0YWJsZU5vZGVJZHNbbm9kZS5pZF0gPSBpc1V1aWQobm9kZS5pZCkgPyBpIDogbm9kZS5pZDtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBub2RlczogT2JqZWN0LnZhbHVlcyh0aGlzLm5vZGVzKS5tYXAoKG5vZGUpID0+ICh7XG4gICAgICAgICAgICAgICAgaWQ6IHN0YWJsZU5vZGVJZHNbbm9kZS5pZF0sXG4gICAgICAgICAgICAgICAgLi4ubm9kZURhdGFKc29uKG5vZGUpLFxuICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgZWRnZXM6IHRoaXMuZWRnZXMubWFwKChlZGdlKSA9PiBlZGdlLmRhdGFcbiAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiBzdGFibGVOb2RlSWRzW2VkZ2Uuc291cmNlXSxcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBzdGFibGVOb2RlSWRzW2VkZ2UudGFyZ2V0XSxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogZWRnZS5kYXRhLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA6IHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlOiBzdGFibGVOb2RlSWRzW2VkZ2Uuc291cmNlXSxcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiBzdGFibGVOb2RlSWRzW2VkZ2UudGFyZ2V0XSxcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYWRkTm9kZShkYXRhLCBpZCkge1xuICAgICAgICBpZiAoaWQgIT09IHVuZGVmaW5lZCAmJiB0aGlzLm5vZGVzW2lkXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vZGUgd2l0aCBpZCAke2lkfSBhbHJlYWR5IGV4aXN0c2ApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5vZGVJZCA9IGlkIHx8IHV1aWR2NCgpO1xuICAgICAgICBjb25zdCBub2RlID0geyBpZDogbm9kZUlkLCBkYXRhIH07XG4gICAgICAgIHRoaXMubm9kZXNbbm9kZUlkXSA9IG5vZGU7XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH1cbiAgICByZW1vdmVOb2RlKG5vZGUpIHtcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBub2RlIGZyb20gdGhlIG5vZGVzIG1hcFxuICAgICAgICBkZWxldGUgdGhpcy5ub2Rlc1tub2RlLmlkXTtcbiAgICAgICAgLy8gRmlsdGVyIG91dCBlZGdlcyBjb25uZWN0ZWQgdG8gdGhlIG5vZGVcbiAgICAgICAgdGhpcy5lZGdlcyA9IHRoaXMuZWRnZXMuZmlsdGVyKChlZGdlKSA9PiBlZGdlLnNvdXJjZSAhPT0gbm9kZS5pZCAmJiBlZGdlLnRhcmdldCAhPT0gbm9kZS5pZCk7XG4gICAgfVxuICAgIGFkZEVkZ2Uoc291cmNlLCB0YXJnZXQsIGRhdGEpIHtcbiAgICAgICAgaWYgKHRoaXMubm9kZXNbc291cmNlLmlkXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFNvdXJjZSBub2RlICR7c291cmNlLmlkfSBub3QgaW4gZ3JhcGhgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5ub2Rlc1t0YXJnZXQuaWRdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVGFyZ2V0IG5vZGUgJHt0YXJnZXQuaWR9IG5vdCBpbiBncmFwaGApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVkZ2UgPSB7IHNvdXJjZTogc291cmNlLmlkLCB0YXJnZXQ6IHRhcmdldC5pZCwgZGF0YSB9O1xuICAgICAgICB0aGlzLmVkZ2VzLnB1c2goZWRnZSk7XG4gICAgICAgIHJldHVybiBlZGdlO1xuICAgIH1cbiAgICBmaXJzdE5vZGUoKSB7XG4gICAgICAgIGNvbnN0IHRhcmdldHMgPSBuZXcgU2V0KHRoaXMuZWRnZXMubWFwKChlZGdlKSA9PiBlZGdlLnRhcmdldCkpO1xuICAgICAgICBjb25zdCBmb3VuZCA9IFtdO1xuICAgICAgICBPYmplY3QudmFsdWVzKHRoaXMubm9kZXMpLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgICAgIGlmICghdGFyZ2V0cy5oYXMobm9kZS5pZCkpIHtcbiAgICAgICAgICAgICAgICBmb3VuZC5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZvdW5kWzBdO1xuICAgIH1cbiAgICBsYXN0Tm9kZSgpIHtcbiAgICAgICAgY29uc3Qgc291cmNlcyA9IG5ldyBTZXQodGhpcy5lZGdlcy5tYXAoKGVkZ2UpID0+IGVkZ2Uuc291cmNlKSk7XG4gICAgICAgIGNvbnN0IGZvdW5kID0gW107XG4gICAgICAgIE9iamVjdC52YWx1ZXModGhpcy5ub2RlcykuZm9yRWFjaCgobm9kZSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFzb3VyY2VzLmhhcyhub2RlLmlkKSkge1xuICAgICAgICAgICAgICAgIGZvdW5kLnB1c2gobm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZm91bmRbMF07XG4gICAgfVxuICAgIGV4dGVuZChncmFwaCkge1xuICAgICAgICAvLyBBZGQgYWxsIG5vZGVzIGZyb20gdGhlIG90aGVyIGdyYXBoLCB0YWtpbmcgY2FyZSB0byBhdm9pZCBkdXBsaWNhdGVzXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKGdyYXBoLm5vZGVzKS5mb3JFYWNoKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgICAgICAgIHRoaXMubm9kZXNba2V5XSA9IHZhbHVlO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gQWRkIGFsbCBlZGdlcyBmcm9tIHRoZSBvdGhlciBncmFwaFxuICAgICAgICB0aGlzLmVkZ2VzID0gWy4uLnRoaXMuZWRnZXMsIC4uLmdyYXBoLmVkZ2VzXTtcbiAgICB9XG4gICAgdHJpbUZpcnN0Tm9kZSgpIHtcbiAgICAgICAgY29uc3QgZmlyc3ROb2RlID0gdGhpcy5maXJzdE5vZGUoKTtcbiAgICAgICAgaWYgKGZpcnN0Tm9kZSkge1xuICAgICAgICAgICAgY29uc3Qgb3V0Z29pbmdFZGdlcyA9IHRoaXMuZWRnZXMuZmlsdGVyKChlZGdlKSA9PiBlZGdlLnNvdXJjZSA9PT0gZmlyc3ROb2RlLmlkKTtcbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLm5vZGVzKS5sZW5ndGggPT09IDEgfHwgb3V0Z29pbmdFZGdlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZU5vZGUoZmlyc3ROb2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICB0cmltTGFzdE5vZGUoKSB7XG4gICAgICAgIGNvbnN0IGxhc3ROb2RlID0gdGhpcy5sYXN0Tm9kZSgpO1xuICAgICAgICBpZiAobGFzdE5vZGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGluY29taW5nRWRnZXMgPSB0aGlzLmVkZ2VzLmZpbHRlcigoZWRnZSkgPT4gZWRnZS50YXJnZXQgPT09IGxhc3ROb2RlLmlkKTtcbiAgICAgICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLm5vZGVzKS5sZW5ndGggPT09IDEgfHwgaW5jb21pbmdFZGdlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZU5vZGUobGFzdE5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbInpvZFRvSnNvblNjaGVtYSIsInY0IiwidXVpZHY0IiwidmFsaWRhdGUiLCJpc1V1aWQiLCJpc1J1bm5hYmxlSW50ZXJmYWNlIiwiTUFYX0RBVEFfRElTUExBWV9OQU1FX0xFTkdUSCIsIm5vZGVEYXRhU3RyIiwibm9kZSIsImlkIiwiZGF0YSIsInRvU3RyaW5nIiwic3RhcnRzV2l0aCIsInRvVXBwZXJDYXNlIiwic3BsaXQiLCJsZW5ndGgiLCJnZXROYW1lIiwic3Vic3RyaW5nIiwic2xpY2UiLCJlcnJvciIsIm5hbWUiLCJub2RlRGF0YUpzb24iLCJ0eXBlIiwibGNfaWQiLCJzY2hlbWEiLCJ0aXRsZSIsIkdyYXBoIiwiY29uc3RydWN0b3IiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwidG9KU09OIiwic3RhYmxlTm9kZUlkcyIsInZhbHVlcyIsIm5vZGVzIiwiZm9yRWFjaCIsImkiLCJtYXAiLCJlZGdlcyIsImVkZ2UiLCJzb3VyY2UiLCJ0YXJnZXQiLCJhZGROb2RlIiwidW5kZWZpbmVkIiwiRXJyb3IiLCJub2RlSWQiLCJyZW1vdmVOb2RlIiwiZmlsdGVyIiwiYWRkRWRnZSIsInB1c2giLCJmaXJzdE5vZGUiLCJ0YXJnZXRzIiwiU2V0IiwiZm91bmQiLCJoYXMiLCJsYXN0Tm9kZSIsInNvdXJjZXMiLCJleHRlbmQiLCJncmFwaCIsImVudHJpZXMiLCJrZXkiLCJ0cmltRmlyc3ROb2RlIiwib3V0Z29pbmdFZGdlcyIsImtleXMiLCJ0cmltTGFzdE5vZGUiLCJpbmNvbWluZ0VkZ2VzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/graph.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/history.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/history.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RunnableWithMessageHistory: () => (/* binding */ RunnableWithMessageHistory)\n/* harmony export */ });\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../messages/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/index.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n/* harmony import */ var _passthrough_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./passthrough.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/passthrough.js\");\n\n\n\n/**\n * Wraps a LCEL chain and manages history. It appends input messages\n * and chain outputs as history, and adds the current history messages to\n * the chain input.\n * @example\n * ```typescript\n * // yarn add @langchain/anthropic @langchain/community @upstash/redis\n *\n * import {\n *   ChatPromptTemplate,\n *   MessagesPlaceholder,\n * } from \"@langchain/core/prompts\";\n * import { ChatAnthropic } from \"@langchain/anthropic\";\n * import { UpstashRedisChatMessageHistory } from \"@langchain/community/stores/message/upstash_redis\";\n * // For demos, you can also use an in-memory store:\n * // import { ChatMessageHistory } from \"langchain/stores/message/in_memory\";\n *\n * const prompt = ChatPromptTemplate.fromMessages([\n *   [\"system\", \"You're an assistant who's good at {ability}\"],\n *   new MessagesPlaceholder(\"history\"),\n *   [\"human\", \"{question}\"],\n * ]);\n *\n * const chain = prompt.pipe(new ChatAnthropic({}));\n *\n * const chainWithHistory = new RunnableWithMessageHistory({\n *   runnable: chain,\n *   getMessageHistory: (sessionId) =>\n *     new UpstashRedisChatMessageHistory({\n *       sessionId,\n *       config: {\n *         url: process.env.UPSTASH_REDIS_REST_URL!,\n *         token: process.env.UPSTASH_REDIS_REST_TOKEN!,\n *       },\n *     }),\n *   inputMessagesKey: \"question\",\n *   historyMessagesKey: \"history\",\n * });\n *\n * const result = await chainWithHistory.invoke(\n *   {\n *     ability: \"math\",\n *     question: \"What does cosine mean?\",\n *   },\n *   {\n *     configurable: {\n *       sessionId: \"some_string_identifying_a_user\",\n *     },\n *   }\n * );\n *\n * const result2 = await chainWithHistory.invoke(\n *   {\n *     ability: \"math\",\n *     question: \"What's its inverse?\",\n *   },\n *   {\n *     configurable: {\n *       sessionId: \"some_string_identifying_a_user\",\n *     },\n *   }\n * );\n * ```\n */ class RunnableWithMessageHistory extends _base_js__WEBPACK_IMPORTED_MODULE_1__.RunnableBinding {\n    constructor(fields){\n        let historyChain = new _base_js__WEBPACK_IMPORTED_MODULE_1__.RunnableLambda({\n            func: (input, options)=>this._enterHistory(input, options ?? {})\n        }).withConfig({\n            runName: \"loadHistory\"\n        });\n        const messagesKey = fields.historyMessagesKey ?? fields.inputMessagesKey;\n        if (messagesKey) {\n            historyChain = _passthrough_js__WEBPACK_IMPORTED_MODULE_2__.RunnablePassthrough.assign({\n                [messagesKey]: historyChain\n            }).withConfig({\n                runName: \"insertHistory\"\n            });\n        }\n        const bound = historyChain.pipe(fields.runnable.withListeners({\n            onEnd: (run, config)=>this._exitHistory(run, config ?? {})\n        })).withConfig({\n            runName: \"RunnableWithMessageHistory\"\n        });\n        const config = fields.config ?? {};\n        super({\n            ...fields,\n            config,\n            bound\n        });\n        Object.defineProperty(this, \"runnable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"inputMessagesKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"outputMessagesKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"historyMessagesKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"getMessageHistory\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.runnable = fields.runnable;\n        this.getMessageHistory = fields.getMessageHistory;\n        this.inputMessagesKey = fields.inputMessagesKey;\n        this.outputMessagesKey = fields.outputMessagesKey;\n        this.historyMessagesKey = fields.historyMessagesKey;\n    }\n    _getInputMessages(inputValue) {\n        if (typeof inputValue === \"string\") {\n            return [\n                new _messages_index_js__WEBPACK_IMPORTED_MODULE_0__.HumanMessage(inputValue)\n            ];\n        } else if (Array.isArray(inputValue)) {\n            return inputValue;\n        } else {\n            return [\n                inputValue\n            ];\n        }\n    }\n    _getOutputMessages(// eslint-disable-next-line @typescript-eslint/no-explicit-any\n    outputValue) {\n        let newOutputValue = outputValue;\n        if (!Array.isArray(outputValue) && !(0,_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessage)(outputValue) && typeof outputValue !== \"string\") {\n            newOutputValue = outputValue[this.outputMessagesKey ?? \"output\"];\n        }\n        if (typeof newOutputValue === \"string\") {\n            return [\n                new _messages_index_js__WEBPACK_IMPORTED_MODULE_0__.AIMessage(newOutputValue)\n            ];\n        } else if (Array.isArray(newOutputValue)) {\n            return newOutputValue;\n        } else if ((0,_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessage)(newOutputValue)) {\n            return [\n                newOutputValue\n            ];\n        }\n        throw new Error(`Expected a string, BaseMessage, or array of BaseMessages. Received: ${JSON.stringify(newOutputValue, null, 2)}`);\n    }\n    async _enterHistory(// eslint-disable-next-line @typescript-eslint/no-explicit-any\n    input, kwargs) {\n        const history = kwargs?.config?.configurable?.messageHistory;\n        if (this.historyMessagesKey) {\n            return history.getMessages();\n        }\n        const inputVal = input || (this.inputMessagesKey ? input[this.inputMessagesKey] : undefined);\n        const historyMessages = history ? await history.getMessages() : [];\n        const returnType = [\n            ...historyMessages,\n            ...this._getInputMessages(inputVal)\n        ];\n        return returnType;\n    }\n    async _exitHistory(run, config) {\n        const history = config.configurable?.messageHistory;\n        // Get input messages\n        const { inputs } = run;\n        const inputValue = inputs[this.inputMessagesKey ?? \"input\"];\n        const inputMessages = this._getInputMessages(inputValue);\n        // Get output messages\n        const outputValue = run.outputs;\n        if (!outputValue) {\n            throw new Error(`Output values from 'Run' undefined. Run: ${JSON.stringify(run, null, 2)}`);\n        }\n        const outputMessages = this._getOutputMessages(outputValue);\n        for await (const message of [\n            ...inputMessages,\n            ...outputMessages\n        ]){\n            await history.addMessage(message);\n        }\n    }\n    async _mergeConfig(...configs) {\n        const config = await super._mergeConfig(...configs);\n        // Extract sessionId\n        if (!config.configurable || !config.configurable.sessionId) {\n            const exampleInput = {\n                [this.inputMessagesKey ?? \"input\"]: \"foo\"\n            };\n            const exampleConfig = {\n                configurable: {\n                    sessionId: \"123\"\n                }\n            };\n            throw new Error(`sessionId is required. Pass it in as part of the config argument to .invoke() or .stream()\\n` + `eg. chain.invoke(${JSON.stringify(exampleInput)}, ${JSON.stringify(exampleConfig)})`);\n        }\n        // attach messageHistory\n        const { sessionId } = config.configurable;\n        config.configurable.messageHistory = await this.getMessageHistory(sessionId);\n        return config;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2hpc3RvcnkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUErRTtBQUNsQjtBQUNOO0FBQ3ZEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0ErREMsR0FDTSxNQUFNTSxtQ0FBbUNILHFEQUFlQTtJQUMzREksWUFBWUMsTUFBTSxDQUFFO1FBQ2hCLElBQUlDLGVBQWUsSUFBSUwsb0RBQWNBLENBQUM7WUFDbENNLE1BQU0sQ0FBQ0MsT0FBT0MsVUFBWSxJQUFJLENBQUNDLGFBQWEsQ0FBQ0YsT0FBT0MsV0FBVyxDQUFDO1FBQ3BFLEdBQUdFLFVBQVUsQ0FBQztZQUFFQyxTQUFTO1FBQWM7UUFDdkMsTUFBTUMsY0FBY1IsT0FBT1Msa0JBQWtCLElBQUlULE9BQU9VLGdCQUFnQjtRQUN4RSxJQUFJRixhQUFhO1lBQ2JQLGVBQWVKLGdFQUFtQkEsQ0FBQ2MsTUFBTSxDQUFDO2dCQUN0QyxDQUFDSCxZQUFZLEVBQUVQO1lBQ25CLEdBQUdLLFVBQVUsQ0FBQztnQkFBRUMsU0FBUztZQUFnQjtRQUM3QztRQUNBLE1BQU1LLFFBQVFYLGFBQ1RZLElBQUksQ0FBQ2IsT0FBT2MsUUFBUSxDQUFDQyxhQUFhLENBQUM7WUFDcENDLE9BQU8sQ0FBQ0MsS0FBS0MsU0FBVyxJQUFJLENBQUNDLFlBQVksQ0FBQ0YsS0FBS0MsVUFBVSxDQUFDO1FBQzlELElBQ0taLFVBQVUsQ0FBQztZQUFFQyxTQUFTO1FBQTZCO1FBQ3hELE1BQU1XLFNBQVNsQixPQUFPa0IsTUFBTSxJQUFJLENBQUM7UUFDakMsS0FBSyxDQUFDO1lBQ0YsR0FBR2xCLE1BQU07WUFDVGtCO1lBQ0FOO1FBQ0o7UUFDQVEsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxZQUFZO1lBQ3BDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxvQkFBb0I7WUFDNUNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLHFCQUFxQjtZQUM3Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsc0JBQXNCO1lBQzlDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxxQkFBcUI7WUFDN0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ1gsUUFBUSxHQUFHZCxPQUFPYyxRQUFRO1FBQy9CLElBQUksQ0FBQ1ksaUJBQWlCLEdBQUcxQixPQUFPMEIsaUJBQWlCO1FBQ2pELElBQUksQ0FBQ2hCLGdCQUFnQixHQUFHVixPQUFPVSxnQkFBZ0I7UUFDL0MsSUFBSSxDQUFDaUIsaUJBQWlCLEdBQUczQixPQUFPMkIsaUJBQWlCO1FBQ2pELElBQUksQ0FBQ2xCLGtCQUFrQixHQUFHVCxPQUFPUyxrQkFBa0I7SUFDdkQ7SUFDQW1CLGtCQUFrQkMsVUFBVSxFQUFFO1FBQzFCLElBQUksT0FBT0EsZUFBZSxVQUFVO1lBQ2hDLE9BQU87Z0JBQUMsSUFBSXBDLDREQUFZQSxDQUFDb0M7YUFBWTtRQUN6QyxPQUNLLElBQUlDLE1BQU1DLE9BQU8sQ0FBQ0YsYUFBYTtZQUNoQyxPQUFPQTtRQUNYLE9BQ0s7WUFDRCxPQUFPO2dCQUFDQTthQUFXO1FBQ3ZCO0lBQ0o7SUFDQUcsbUJBQ0EsOERBQThEO0lBQzlEQyxXQUFXLEVBQUU7UUFDVCxJQUFJQyxpQkFBaUJEO1FBQ3JCLElBQUksQ0FBQ0gsTUFBTUMsT0FBTyxDQUFDRSxnQkFDZixDQUFDdkMsaUVBQWFBLENBQUN1QyxnQkFDZixPQUFPQSxnQkFBZ0IsVUFBVTtZQUNqQ0MsaUJBQWlCRCxXQUFXLENBQUMsSUFBSSxDQUFDTixpQkFBaUIsSUFBSSxTQUFTO1FBQ3BFO1FBQ0EsSUFBSSxPQUFPTyxtQkFBbUIsVUFBVTtZQUNwQyxPQUFPO2dCQUFDLElBQUkxQyx5REFBU0EsQ0FBQzBDO2FBQWdCO1FBQzFDLE9BQ0ssSUFBSUosTUFBTUMsT0FBTyxDQUFDRyxpQkFBaUI7WUFDcEMsT0FBT0E7UUFDWCxPQUNLLElBQUl4QyxpRUFBYUEsQ0FBQ3dDLGlCQUFpQjtZQUNwQyxPQUFPO2dCQUFDQTthQUFlO1FBQzNCO1FBQ0EsTUFBTSxJQUFJQyxNQUFNLENBQUMsb0VBQW9FLEVBQUVDLEtBQUtDLFNBQVMsQ0FBQ0gsZ0JBQWdCLE1BQU0sR0FBRyxDQUFDO0lBQ3BJO0lBQ0EsTUFBTTdCLGNBQ04sOERBQThEO0lBQzlERixLQUFLLEVBQUVtQyxNQUFNLEVBQUU7UUFDWCxNQUFNQyxVQUFVRCxRQUFRcEIsUUFBUUssY0FBY2lCO1FBQzlDLElBQUksSUFBSSxDQUFDL0Isa0JBQWtCLEVBQUU7WUFDekIsT0FBTzhCLFFBQVFFLFdBQVc7UUFDOUI7UUFDQSxNQUFNQyxXQUFXdkMsU0FDWixLQUFJLENBQUNPLGdCQUFnQixHQUFHUCxLQUFLLENBQUMsSUFBSSxDQUFDTyxnQkFBZ0IsQ0FBQyxHQUFHaUMsU0FBUTtRQUNwRSxNQUFNQyxrQkFBa0JMLFVBQVUsTUFBTUEsUUFBUUUsV0FBVyxLQUFLLEVBQUU7UUFDbEUsTUFBTUksYUFBYTtlQUNaRDtlQUNBLElBQUksQ0FBQ2hCLGlCQUFpQixDQUFDYztTQUM3QjtRQUNELE9BQU9HO0lBQ1g7SUFDQSxNQUFNMUIsYUFBYUYsR0FBRyxFQUFFQyxNQUFNLEVBQUU7UUFDNUIsTUFBTXFCLFVBQVVyQixPQUFPSyxZQUFZLEVBQUVpQjtRQUNyQyxxQkFBcUI7UUFDckIsTUFBTSxFQUFFTSxNQUFNLEVBQUUsR0FBRzdCO1FBQ25CLE1BQU1ZLGFBQWFpQixNQUFNLENBQUMsSUFBSSxDQUFDcEMsZ0JBQWdCLElBQUksUUFBUTtRQUMzRCxNQUFNcUMsZ0JBQWdCLElBQUksQ0FBQ25CLGlCQUFpQixDQUFDQztRQUM3QyxzQkFBc0I7UUFDdEIsTUFBTUksY0FBY2hCLElBQUkrQixPQUFPO1FBQy9CLElBQUksQ0FBQ2YsYUFBYTtZQUNkLE1BQU0sSUFBSUUsTUFBTSxDQUFDLHlDQUF5QyxFQUFFQyxLQUFLQyxTQUFTLENBQUNwQixLQUFLLE1BQU0sR0FBRyxDQUFDO1FBQzlGO1FBQ0EsTUFBTWdDLGlCQUFpQixJQUFJLENBQUNqQixrQkFBa0IsQ0FBQ0M7UUFDL0MsV0FBVyxNQUFNaUIsV0FBVztlQUFJSDtlQUFrQkU7U0FBZSxDQUFFO1lBQy9ELE1BQU1WLFFBQVFZLFVBQVUsQ0FBQ0Q7UUFDN0I7SUFDSjtJQUNBLE1BQU1FLGFBQWEsR0FBR0MsT0FBTyxFQUFFO1FBQzNCLE1BQU1uQyxTQUFTLE1BQU0sS0FBSyxDQUFDa0MsZ0JBQWdCQztRQUMzQyxvQkFBb0I7UUFDcEIsSUFBSSxDQUFDbkMsT0FBT0ssWUFBWSxJQUFJLENBQUNMLE9BQU9LLFlBQVksQ0FBQytCLFNBQVMsRUFBRTtZQUN4RCxNQUFNQyxlQUFlO2dCQUNqQixDQUFDLElBQUksQ0FBQzdDLGdCQUFnQixJQUFJLFFBQVEsRUFBRTtZQUN4QztZQUNBLE1BQU04QyxnQkFBZ0I7Z0JBQUVqQyxjQUFjO29CQUFFK0IsV0FBVztnQkFBTTtZQUFFO1lBQzNELE1BQU0sSUFBSW5CLE1BQU0sQ0FBQyw0RkFBNEYsQ0FBQyxHQUMxRyxDQUFDLGlCQUFpQixFQUFFQyxLQUFLQyxTQUFTLENBQUNrQixjQUFjLEVBQUUsRUFBRW5CLEtBQUtDLFNBQVMsQ0FBQ21CLGVBQWUsQ0FBQyxDQUFDO1FBQzdGO1FBQ0Esd0JBQXdCO1FBQ3hCLE1BQU0sRUFBRUYsU0FBUyxFQUFFLEdBQUdwQyxPQUFPSyxZQUFZO1FBQ3pDTCxPQUFPSyxZQUFZLENBQUNpQixjQUFjLEdBQUcsTUFBTSxJQUFJLENBQUNkLGlCQUFpQixDQUFDNEI7UUFDbEUsT0FBT3BDO0lBQ1g7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLWZvcm0tYnVpbGRlci10dXRvcmlhbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9ydW5uYWJsZXMvaGlzdG9yeS5qcz9iYWZkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFJTWVzc2FnZSwgSHVtYW5NZXNzYWdlLCBpc0Jhc2VNZXNzYWdlLCB9IGZyb20gXCIuLi9tZXNzYWdlcy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgUnVubmFibGVCaW5kaW5nLCBSdW5uYWJsZUxhbWJkYSwgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5pbXBvcnQgeyBSdW5uYWJsZVBhc3N0aHJvdWdoIH0gZnJvbSBcIi4vcGFzc3Rocm91Z2guanNcIjtcbi8qKlxuICogV3JhcHMgYSBMQ0VMIGNoYWluIGFuZCBtYW5hZ2VzIGhpc3RvcnkuIEl0IGFwcGVuZHMgaW5wdXQgbWVzc2FnZXNcbiAqIGFuZCBjaGFpbiBvdXRwdXRzIGFzIGhpc3RvcnksIGFuZCBhZGRzIHRoZSBjdXJyZW50IGhpc3RvcnkgbWVzc2FnZXMgdG9cbiAqIHRoZSBjaGFpbiBpbnB1dC5cbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiAvLyB5YXJuIGFkZCBAbGFuZ2NoYWluL2FudGhyb3BpYyBAbGFuZ2NoYWluL2NvbW11bml0eSBAdXBzdGFzaC9yZWRpc1xuICpcbiAqIGltcG9ydCB7XG4gKiAgIENoYXRQcm9tcHRUZW1wbGF0ZSxcbiAqICAgTWVzc2FnZXNQbGFjZWhvbGRlcixcbiAqIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9wcm9tcHRzXCI7XG4gKiBpbXBvcnQgeyBDaGF0QW50aHJvcGljIH0gZnJvbSBcIkBsYW5nY2hhaW4vYW50aHJvcGljXCI7XG4gKiBpbXBvcnQgeyBVcHN0YXNoUmVkaXNDaGF0TWVzc2FnZUhpc3RvcnkgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb21tdW5pdHkvc3RvcmVzL21lc3NhZ2UvdXBzdGFzaF9yZWRpc1wiO1xuICogLy8gRm9yIGRlbW9zLCB5b3UgY2FuIGFsc28gdXNlIGFuIGluLW1lbW9yeSBzdG9yZTpcbiAqIC8vIGltcG9ydCB7IENoYXRNZXNzYWdlSGlzdG9yeSB9IGZyb20gXCJsYW5nY2hhaW4vc3RvcmVzL21lc3NhZ2UvaW5fbWVtb3J5XCI7XG4gKlxuICogY29uc3QgcHJvbXB0ID0gQ2hhdFByb21wdFRlbXBsYXRlLmZyb21NZXNzYWdlcyhbXG4gKiAgIFtcInN5c3RlbVwiLCBcIllvdSdyZSBhbiBhc3Npc3RhbnQgd2hvJ3MgZ29vZCBhdCB7YWJpbGl0eX1cIl0sXG4gKiAgIG5ldyBNZXNzYWdlc1BsYWNlaG9sZGVyKFwiaGlzdG9yeVwiKSxcbiAqICAgW1wiaHVtYW5cIiwgXCJ7cXVlc3Rpb259XCJdLFxuICogXSk7XG4gKlxuICogY29uc3QgY2hhaW4gPSBwcm9tcHQucGlwZShuZXcgQ2hhdEFudGhyb3BpYyh7fSkpO1xuICpcbiAqIGNvbnN0IGNoYWluV2l0aEhpc3RvcnkgPSBuZXcgUnVubmFibGVXaXRoTWVzc2FnZUhpc3Rvcnkoe1xuICogICBydW5uYWJsZTogY2hhaW4sXG4gKiAgIGdldE1lc3NhZ2VIaXN0b3J5OiAoc2Vzc2lvbklkKSA9PlxuICogICAgIG5ldyBVcHN0YXNoUmVkaXNDaGF0TWVzc2FnZUhpc3Rvcnkoe1xuICogICAgICAgc2Vzc2lvbklkLFxuICogICAgICAgY29uZmlnOiB7XG4gKiAgICAgICAgIHVybDogcHJvY2Vzcy5lbnYuVVBTVEFTSF9SRURJU19SRVNUX1VSTCEsXG4gKiAgICAgICAgIHRva2VuOiBwcm9jZXNzLmVudi5VUFNUQVNIX1JFRElTX1JFU1RfVE9LRU4hLFxuICogICAgICAgfSxcbiAqICAgICB9KSxcbiAqICAgaW5wdXRNZXNzYWdlc0tleTogXCJxdWVzdGlvblwiLFxuICogICBoaXN0b3J5TWVzc2FnZXNLZXk6IFwiaGlzdG9yeVwiLFxuICogfSk7XG4gKlxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgY2hhaW5XaXRoSGlzdG9yeS5pbnZva2UoXG4gKiAgIHtcbiAqICAgICBhYmlsaXR5OiBcIm1hdGhcIixcbiAqICAgICBxdWVzdGlvbjogXCJXaGF0IGRvZXMgY29zaW5lIG1lYW4/XCIsXG4gKiAgIH0sXG4gKiAgIHtcbiAqICAgICBjb25maWd1cmFibGU6IHtcbiAqICAgICAgIHNlc3Npb25JZDogXCJzb21lX3N0cmluZ19pZGVudGlmeWluZ19hX3VzZXJcIixcbiAqICAgICB9LFxuICogICB9XG4gKiApO1xuICpcbiAqIGNvbnN0IHJlc3VsdDIgPSBhd2FpdCBjaGFpbldpdGhIaXN0b3J5Lmludm9rZShcbiAqICAge1xuICogICAgIGFiaWxpdHk6IFwibWF0aFwiLFxuICogICAgIHF1ZXN0aW9uOiBcIldoYXQncyBpdHMgaW52ZXJzZT9cIixcbiAqICAgfSxcbiAqICAge1xuICogICAgIGNvbmZpZ3VyYWJsZToge1xuICogICAgICAgc2Vzc2lvbklkOiBcInNvbWVfc3RyaW5nX2lkZW50aWZ5aW5nX2FfdXNlclwiLFxuICogICAgIH0sXG4gKiAgIH1cbiAqICk7XG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5hYmxlV2l0aE1lc3NhZ2VIaXN0b3J5IGV4dGVuZHMgUnVubmFibGVCaW5kaW5nIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgbGV0IGhpc3RvcnlDaGFpbiA9IG5ldyBSdW5uYWJsZUxhbWJkYSh7XG4gICAgICAgICAgICBmdW5jOiAoaW5wdXQsIG9wdGlvbnMpID0+IHRoaXMuX2VudGVySGlzdG9yeShpbnB1dCwgb3B0aW9ucyA/PyB7fSksXG4gICAgICAgIH0pLndpdGhDb25maWcoeyBydW5OYW1lOiBcImxvYWRIaXN0b3J5XCIgfSk7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzS2V5ID0gZmllbGRzLmhpc3RvcnlNZXNzYWdlc0tleSA/PyBmaWVsZHMuaW5wdXRNZXNzYWdlc0tleTtcbiAgICAgICAgaWYgKG1lc3NhZ2VzS2V5KSB7XG4gICAgICAgICAgICBoaXN0b3J5Q2hhaW4gPSBSdW5uYWJsZVBhc3N0aHJvdWdoLmFzc2lnbih7XG4gICAgICAgICAgICAgICAgW21lc3NhZ2VzS2V5XTogaGlzdG9yeUNoYWluLFxuICAgICAgICAgICAgfSkud2l0aENvbmZpZyh7IHJ1bk5hbWU6IFwiaW5zZXJ0SGlzdG9yeVwiIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGJvdW5kID0gaGlzdG9yeUNoYWluXG4gICAgICAgICAgICAucGlwZShmaWVsZHMucnVubmFibGUud2l0aExpc3RlbmVycyh7XG4gICAgICAgICAgICBvbkVuZDogKHJ1biwgY29uZmlnKSA9PiB0aGlzLl9leGl0SGlzdG9yeShydW4sIGNvbmZpZyA/PyB7fSksXG4gICAgICAgIH0pKVxuICAgICAgICAgICAgLndpdGhDb25maWcoeyBydW5OYW1lOiBcIlJ1bm5hYmxlV2l0aE1lc3NhZ2VIaXN0b3J5XCIgfSk7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IGZpZWxkcy5jb25maWcgPz8ge307XG4gICAgICAgIHN1cGVyKHtcbiAgICAgICAgICAgIC4uLmZpZWxkcyxcbiAgICAgICAgICAgIGNvbmZpZyxcbiAgICAgICAgICAgIGJvdW5kLFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicnVubmFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5wdXRNZXNzYWdlc0tleVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvdXRwdXRNZXNzYWdlc0tleVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJoaXN0b3J5TWVzc2FnZXNLZXlcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZ2V0TWVzc2FnZUhpc3RvcnlcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5ydW5uYWJsZSA9IGZpZWxkcy5ydW5uYWJsZTtcbiAgICAgICAgdGhpcy5nZXRNZXNzYWdlSGlzdG9yeSA9IGZpZWxkcy5nZXRNZXNzYWdlSGlzdG9yeTtcbiAgICAgICAgdGhpcy5pbnB1dE1lc3NhZ2VzS2V5ID0gZmllbGRzLmlucHV0TWVzc2FnZXNLZXk7XG4gICAgICAgIHRoaXMub3V0cHV0TWVzc2FnZXNLZXkgPSBmaWVsZHMub3V0cHV0TWVzc2FnZXNLZXk7XG4gICAgICAgIHRoaXMuaGlzdG9yeU1lc3NhZ2VzS2V5ID0gZmllbGRzLmhpc3RvcnlNZXNzYWdlc0tleTtcbiAgICB9XG4gICAgX2dldElucHV0TWVzc2FnZXMoaW5wdXRWYWx1ZSkge1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0VmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBbbmV3IEh1bWFuTWVzc2FnZShpbnB1dFZhbHVlKV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShpbnB1dFZhbHVlKSkge1xuICAgICAgICAgICAgcmV0dXJuIGlucHV0VmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gW2lucHV0VmFsdWVdO1xuICAgICAgICB9XG4gICAgfVxuICAgIF9nZXRPdXRwdXRNZXNzYWdlcyhcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIG91dHB1dFZhbHVlKSB7XG4gICAgICAgIGxldCBuZXdPdXRwdXRWYWx1ZSA9IG91dHB1dFZhbHVlO1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkob3V0cHV0VmFsdWUpICYmXG4gICAgICAgICAgICAhaXNCYXNlTWVzc2FnZShvdXRwdXRWYWx1ZSkgJiZcbiAgICAgICAgICAgIHR5cGVvZiBvdXRwdXRWYWx1ZSAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgbmV3T3V0cHV0VmFsdWUgPSBvdXRwdXRWYWx1ZVt0aGlzLm91dHB1dE1lc3NhZ2VzS2V5ID8/IFwib3V0cHV0XCJdO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgbmV3T3V0cHV0VmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBbbmV3IEFJTWVzc2FnZShuZXdPdXRwdXRWYWx1ZSldO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkobmV3T3V0cHV0VmFsdWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3T3V0cHV0VmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaXNCYXNlTWVzc2FnZShuZXdPdXRwdXRWYWx1ZSkpIHtcbiAgICAgICAgICAgIHJldHVybiBbbmV3T3V0cHV0VmFsdWVdO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgYSBzdHJpbmcsIEJhc2VNZXNzYWdlLCBvciBhcnJheSBvZiBCYXNlTWVzc2FnZXMuIFJlY2VpdmVkOiAke0pTT04uc3RyaW5naWZ5KG5ld091dHB1dFZhbHVlLCBudWxsLCAyKX1gKTtcbiAgICB9XG4gICAgYXN5bmMgX2VudGVySGlzdG9yeShcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGlucHV0LCBrd2FyZ3MpIHtcbiAgICAgICAgY29uc3QgaGlzdG9yeSA9IGt3YXJncz8uY29uZmlnPy5jb25maWd1cmFibGU/Lm1lc3NhZ2VIaXN0b3J5O1xuICAgICAgICBpZiAodGhpcy5oaXN0b3J5TWVzc2FnZXNLZXkpIHtcbiAgICAgICAgICAgIHJldHVybiBoaXN0b3J5LmdldE1lc3NhZ2VzKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaW5wdXRWYWwgPSBpbnB1dCB8fFxuICAgICAgICAgICAgKHRoaXMuaW5wdXRNZXNzYWdlc0tleSA/IGlucHV0W3RoaXMuaW5wdXRNZXNzYWdlc0tleV0gOiB1bmRlZmluZWQpO1xuICAgICAgICBjb25zdCBoaXN0b3J5TWVzc2FnZXMgPSBoaXN0b3J5ID8gYXdhaXQgaGlzdG9yeS5nZXRNZXNzYWdlcygpIDogW107XG4gICAgICAgIGNvbnN0IHJldHVyblR5cGUgPSBbXG4gICAgICAgICAgICAuLi5oaXN0b3J5TWVzc2FnZXMsXG4gICAgICAgICAgICAuLi50aGlzLl9nZXRJbnB1dE1lc3NhZ2VzKGlucHV0VmFsKSxcbiAgICAgICAgXTtcbiAgICAgICAgcmV0dXJuIHJldHVyblR5cGU7XG4gICAgfVxuICAgIGFzeW5jIF9leGl0SGlzdG9yeShydW4sIGNvbmZpZykge1xuICAgICAgICBjb25zdCBoaXN0b3J5ID0gY29uZmlnLmNvbmZpZ3VyYWJsZT8ubWVzc2FnZUhpc3Rvcnk7XG4gICAgICAgIC8vIEdldCBpbnB1dCBtZXNzYWdlc1xuICAgICAgICBjb25zdCB7IGlucHV0cyB9ID0gcnVuO1xuICAgICAgICBjb25zdCBpbnB1dFZhbHVlID0gaW5wdXRzW3RoaXMuaW5wdXRNZXNzYWdlc0tleSA/PyBcImlucHV0XCJdO1xuICAgICAgICBjb25zdCBpbnB1dE1lc3NhZ2VzID0gdGhpcy5fZ2V0SW5wdXRNZXNzYWdlcyhpbnB1dFZhbHVlKTtcbiAgICAgICAgLy8gR2V0IG91dHB1dCBtZXNzYWdlc1xuICAgICAgICBjb25zdCBvdXRwdXRWYWx1ZSA9IHJ1bi5vdXRwdXRzO1xuICAgICAgICBpZiAoIW91dHB1dFZhbHVlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE91dHB1dCB2YWx1ZXMgZnJvbSAnUnVuJyB1bmRlZmluZWQuIFJ1bjogJHtKU09OLnN0cmluZ2lmeShydW4sIG51bGwsIDIpfWApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG91dHB1dE1lc3NhZ2VzID0gdGhpcy5fZ2V0T3V0cHV0TWVzc2FnZXMob3V0cHV0VmFsdWUpO1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IG1lc3NhZ2Ugb2YgWy4uLmlucHV0TWVzc2FnZXMsIC4uLm91dHB1dE1lc3NhZ2VzXSkge1xuICAgICAgICAgICAgYXdhaXQgaGlzdG9yeS5hZGRNZXNzYWdlKG1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIF9tZXJnZUNvbmZpZyguLi5jb25maWdzKSB7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IGF3YWl0IHN1cGVyLl9tZXJnZUNvbmZpZyguLi5jb25maWdzKTtcbiAgICAgICAgLy8gRXh0cmFjdCBzZXNzaW9uSWRcbiAgICAgICAgaWYgKCFjb25maWcuY29uZmlndXJhYmxlIHx8ICFjb25maWcuY29uZmlndXJhYmxlLnNlc3Npb25JZCkge1xuICAgICAgICAgICAgY29uc3QgZXhhbXBsZUlucHV0ID0ge1xuICAgICAgICAgICAgICAgIFt0aGlzLmlucHV0TWVzc2FnZXNLZXkgPz8gXCJpbnB1dFwiXTogXCJmb29cIixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBleGFtcGxlQ29uZmlnID0geyBjb25maWd1cmFibGU6IHsgc2Vzc2lvbklkOiBcIjEyM1wiIH0gfTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgc2Vzc2lvbklkIGlzIHJlcXVpcmVkLiBQYXNzIGl0IGluIGFzIHBhcnQgb2YgdGhlIGNvbmZpZyBhcmd1bWVudCB0byAuaW52b2tlKCkgb3IgLnN0cmVhbSgpXFxuYCArXG4gICAgICAgICAgICAgICAgYGVnLiBjaGFpbi5pbnZva2UoJHtKU09OLnN0cmluZ2lmeShleGFtcGxlSW5wdXQpfSwgJHtKU09OLnN0cmluZ2lmeShleGFtcGxlQ29uZmlnKX0pYCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gYXR0YWNoIG1lc3NhZ2VIaXN0b3J5XG4gICAgICAgIGNvbnN0IHsgc2Vzc2lvbklkIH0gPSBjb25maWcuY29uZmlndXJhYmxlO1xuICAgICAgICBjb25maWcuY29uZmlndXJhYmxlLm1lc3NhZ2VIaXN0b3J5ID0gYXdhaXQgdGhpcy5nZXRNZXNzYWdlSGlzdG9yeShzZXNzaW9uSWQpO1xuICAgICAgICByZXR1cm4gY29uZmlnO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJBSU1lc3NhZ2UiLCJIdW1hbk1lc3NhZ2UiLCJpc0Jhc2VNZXNzYWdlIiwiUnVubmFibGVCaW5kaW5nIiwiUnVubmFibGVMYW1iZGEiLCJSdW5uYWJsZVBhc3N0aHJvdWdoIiwiUnVubmFibGVXaXRoTWVzc2FnZUhpc3RvcnkiLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsImhpc3RvcnlDaGFpbiIsImZ1bmMiLCJpbnB1dCIsIm9wdGlvbnMiLCJfZW50ZXJIaXN0b3J5Iiwid2l0aENvbmZpZyIsInJ1bk5hbWUiLCJtZXNzYWdlc0tleSIsImhpc3RvcnlNZXNzYWdlc0tleSIsImlucHV0TWVzc2FnZXNLZXkiLCJhc3NpZ24iLCJib3VuZCIsInBpcGUiLCJydW5uYWJsZSIsIndpdGhMaXN0ZW5lcnMiLCJvbkVuZCIsInJ1biIsImNvbmZpZyIsIl9leGl0SGlzdG9yeSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJnZXRNZXNzYWdlSGlzdG9yeSIsIm91dHB1dE1lc3NhZ2VzS2V5IiwiX2dldElucHV0TWVzc2FnZXMiLCJpbnB1dFZhbHVlIiwiQXJyYXkiLCJpc0FycmF5IiwiX2dldE91dHB1dE1lc3NhZ2VzIiwib3V0cHV0VmFsdWUiLCJuZXdPdXRwdXRWYWx1ZSIsIkVycm9yIiwiSlNPTiIsInN0cmluZ2lmeSIsImt3YXJncyIsImhpc3RvcnkiLCJtZXNzYWdlSGlzdG9yeSIsImdldE1lc3NhZ2VzIiwiaW5wdXRWYWwiLCJ1bmRlZmluZWQiLCJoaXN0b3J5TWVzc2FnZXMiLCJyZXR1cm5UeXBlIiwiaW5wdXRzIiwiaW5wdXRNZXNzYWdlcyIsIm91dHB1dHMiLCJvdXRwdXRNZXNzYWdlcyIsIm1lc3NhZ2UiLCJhZGRNZXNzYWdlIiwiX21lcmdlQ29uZmlnIiwiY29uZmlncyIsInNlc3Npb25JZCIsImV4YW1wbGVJbnB1dCIsImV4YW1wbGVDb25maWciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/history.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/index.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/index.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RouterRunnable: () => (/* reexport safe */ _router_js__WEBPACK_IMPORTED_MODULE_3__.RouterRunnable),\n/* harmony export */   Runnable: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.Runnable),\n/* harmony export */   RunnableAssign: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.RunnableAssign),\n/* harmony export */   RunnableBinding: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.RunnableBinding),\n/* harmony export */   RunnableBranch: () => (/* reexport safe */ _branch_js__WEBPACK_IMPORTED_MODULE_4__.RunnableBranch),\n/* harmony export */   RunnableEach: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.RunnableEach),\n/* harmony export */   RunnableLambda: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.RunnableLambda),\n/* harmony export */   RunnableMap: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.RunnableMap),\n/* harmony export */   RunnableParallel: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.RunnableParallel),\n/* harmony export */   RunnablePassthrough: () => (/* reexport safe */ _passthrough_js__WEBPACK_IMPORTED_MODULE_2__.RunnablePassthrough),\n/* harmony export */   RunnablePick: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.RunnablePick),\n/* harmony export */   RunnableRetry: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.RunnableRetry),\n/* harmony export */   RunnableSequence: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.RunnableSequence),\n/* harmony export */   RunnableWithFallbacks: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__.RunnableWithFallbacks),\n/* harmony export */   RunnableWithMessageHistory: () => (/* reexport safe */ _history_js__WEBPACK_IMPORTED_MODULE_5__.RunnableWithMessageHistory),\n/* harmony export */   _coerceToRunnable: () => (/* reexport safe */ _base_js__WEBPACK_IMPORTED_MODULE_0__._coerceToRunnable),\n/* harmony export */   ensureConfig: () => (/* reexport safe */ _config_js__WEBPACK_IMPORTED_MODULE_1__.ensureConfig),\n/* harmony export */   getCallbackManagerForConfig: () => (/* reexport safe */ _config_js__WEBPACK_IMPORTED_MODULE_1__.getCallbackManagerForConfig),\n/* harmony export */   patchConfig: () => (/* reexport safe */ _config_js__WEBPACK_IMPORTED_MODULE_1__.patchConfig)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/config.js\");\n/* harmony import */ var _passthrough_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./passthrough.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/passthrough.js\");\n/* harmony import */ var _router_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./router.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/router.js\");\n/* harmony import */ var _branch_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./branch.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/branch.js\");\n/* harmony import */ var _history_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./history.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/history.js\");\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBNk47QUFDdkk7QUFDL0I7QUFDVjtBQUNBO0FBQ2MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1mb3JtLWJ1aWxkZXItdHV0b3JpYWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL2luZGV4LmpzPzU1NjQiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHsgUnVubmFibGUsIFJ1bm5hYmxlQmluZGluZywgUnVubmFibGVFYWNoLCBSdW5uYWJsZVJldHJ5LCBSdW5uYWJsZVNlcXVlbmNlLCBSdW5uYWJsZU1hcCwgUnVubmFibGVQYXJhbGxlbCwgUnVubmFibGVMYW1iZGEsIFJ1bm5hYmxlV2l0aEZhbGxiYWNrcywgUnVubmFibGVBc3NpZ24sIFJ1bm5hYmxlUGljaywgX2NvZXJjZVRvUnVubmFibGUsIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuZXhwb3J0IHsgZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnLCBwYXRjaENvbmZpZywgZW5zdXJlQ29uZmlnLCB9IGZyb20gXCIuL2NvbmZpZy5qc1wiO1xuZXhwb3J0IHsgUnVubmFibGVQYXNzdGhyb3VnaCB9IGZyb20gXCIuL3Bhc3N0aHJvdWdoLmpzXCI7XG5leHBvcnQgeyBSb3V0ZXJSdW5uYWJsZSB9IGZyb20gXCIuL3JvdXRlci5qc1wiO1xuZXhwb3J0IHsgUnVubmFibGVCcmFuY2ggfSBmcm9tIFwiLi9icmFuY2guanNcIjtcbmV4cG9ydCB7IFJ1bm5hYmxlV2l0aE1lc3NhZ2VIaXN0b3J5LCB9IGZyb20gXCIuL2hpc3RvcnkuanNcIjtcbiJdLCJuYW1lcyI6WyJSdW5uYWJsZSIsIlJ1bm5hYmxlQmluZGluZyIsIlJ1bm5hYmxlRWFjaCIsIlJ1bm5hYmxlUmV0cnkiLCJSdW5uYWJsZVNlcXVlbmNlIiwiUnVubmFibGVNYXAiLCJSdW5uYWJsZVBhcmFsbGVsIiwiUnVubmFibGVMYW1iZGEiLCJSdW5uYWJsZVdpdGhGYWxsYmFja3MiLCJSdW5uYWJsZUFzc2lnbiIsIlJ1bm5hYmxlUGljayIsIl9jb2VyY2VUb1J1bm5hYmxlIiwiZ2V0Q2FsbGJhY2tNYW5hZ2VyRm9yQ29uZmlnIiwicGF0Y2hDb25maWciLCJlbnN1cmVDb25maWciLCJSdW5uYWJsZVBhc3N0aHJvdWdoIiwiUm91dGVyUnVubmFibGUiLCJSdW5uYWJsZUJyYW5jaCIsIlJ1bm5hYmxlV2l0aE1lc3NhZ2VIaXN0b3J5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/passthrough.js":
/*!********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/passthrough.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RunnablePassthrough: () => (/* binding */ RunnablePassthrough)\n/* harmony export */ });\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/stream.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/stream.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./config.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/config.js\");\n\n\n\n/**\n * A runnable to passthrough inputs unchanged or with additional keys.\n *\n * This runnable behaves almost like the identity function, except that it\n * can be configured to add additional keys to the output, if the input is\n * an object.\n *\n * The example below demonstrates how to use `RunnablePassthrough to\n * passthrough the input from the `.invoke()`\n *\n * @example\n * ```typescript\n * const chain = RunnableSequence.from([\n *   {\n *     question: new RunnablePassthrough(),\n *     context: async () => loadContextFromStore(),\n *   },\n *   prompt,\n *   llm,\n *   outputParser,\n * ]);\n * const response = await chain.invoke(\n *   \"I can pass a single string instead of an object since I'm using `RunnablePassthrough`.\"\n * );\n * ```\n */ class RunnablePassthrough extends _base_js__WEBPACK_IMPORTED_MODULE_1__.Runnable {\n    static lc_name() {\n        return \"RunnablePassthrough\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"func\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        if (fields) {\n            this.func = fields.func;\n        }\n    }\n    async invoke(input, options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_2__.ensureConfig)(options);\n        if (this.func) {\n            await this.func(input, config);\n        }\n        return this._callWithConfig((input)=>Promise.resolve(input), input, config);\n    }\n    async *transform(generator, options) {\n        const config = (0,_config_js__WEBPACK_IMPORTED_MODULE_2__.ensureConfig)(options);\n        let finalOutput;\n        let finalOutputSupported = true;\n        for await (const chunk of this._transformStreamWithConfig(generator, (input)=>input, config)){\n            yield chunk;\n            if (finalOutputSupported) {\n                if (finalOutput === undefined) {\n                    finalOutput = chunk;\n                } else {\n                    try {\n                        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                        finalOutput = (0,_utils_stream_js__WEBPACK_IMPORTED_MODULE_0__.concat)(finalOutput, chunk);\n                    } catch  {\n                        finalOutput = undefined;\n                        finalOutputSupported = false;\n                    }\n                }\n            }\n        }\n        if (this.func && finalOutput !== undefined) {\n            await this.func(finalOutput, config);\n        }\n    }\n    /**\n     * A runnable that assigns key-value pairs to the input.\n     *\n     * The example below shows how you could use it with an inline function.\n     *\n     * @example\n     * ```typescript\n     * const prompt =\n     *   PromptTemplate.fromTemplate(`Write a SQL query to answer the question using the following schema: {schema}\n     * Question: {question}\n     * SQL Query:`);\n     *\n     * // The `RunnablePassthrough.assign()` is used here to passthrough the input from the `.invoke()`\n     * // call (in this example it's the question), along with any inputs passed to the `.assign()` method.\n     * // In this case, we're passing the schema.\n     * const sqlQueryGeneratorChain = RunnableSequence.from([\n     *   RunnablePassthrough.assign({\n     *     schema: async () => db.getTableInfo(),\n     *   }),\n     *   prompt,\n     *   new ChatOpenAI({}).bind({ stop: [\"\\nSQLResult:\"] }),\n     *   new StringOutputParser(),\n     * ]);\n     * const result = await sqlQueryGeneratorChain.invoke({\n     *   question: \"How many employees are there?\",\n     * });\n     * ```\n     */ static assign(mapping) {\n        return new _base_js__WEBPACK_IMPORTED_MODULE_1__.RunnableAssign(new _base_js__WEBPACK_IMPORTED_MODULE_1__.RunnableMap({\n            steps: mapping\n        }));\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL3Bhc3N0aHJvdWdoLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBNEM7QUFDdUI7QUFDeEI7QUFDM0M7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0F5QkMsR0FDTSxNQUFNSyw0QkFBNEJKLDhDQUFRQTtJQUM3QyxPQUFPSyxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FDLFlBQVlDLE1BQU0sQ0FBRTtRQUNoQixLQUFLLENBQUNBO1FBQ05DLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO2dCQUFDO2dCQUFrQjthQUFZO1FBQzFDO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CO1lBQzNDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxRQUFRO1lBQ2hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJTixRQUFRO1lBQ1IsSUFBSSxDQUFDTyxJQUFJLEdBQUdQLE9BQU9PLElBQUk7UUFDM0I7SUFDSjtJQUNBLE1BQU1DLE9BQU9DLEtBQUssRUFBRUMsT0FBTyxFQUFFO1FBQ3pCLE1BQU1DLFNBQVNmLHdEQUFZQSxDQUFDYztRQUM1QixJQUFJLElBQUksQ0FBQ0gsSUFBSSxFQUFFO1lBQ1gsTUFBTSxJQUFJLENBQUNBLElBQUksQ0FBQ0UsT0FBT0U7UUFDM0I7UUFDQSxPQUFPLElBQUksQ0FBQ0MsZUFBZSxDQUFDLENBQUNILFFBQVVJLFFBQVFDLE9BQU8sQ0FBQ0wsUUFBUUEsT0FBT0U7SUFDMUU7SUFDQSxPQUFPSSxVQUFVQyxTQUFTLEVBQUVOLE9BQU8sRUFBRTtRQUNqQyxNQUFNQyxTQUFTZix3REFBWUEsQ0FBQ2M7UUFDNUIsSUFBSU87UUFDSixJQUFJQyx1QkFBdUI7UUFDM0IsV0FBVyxNQUFNQyxTQUFTLElBQUksQ0FBQ0MsMEJBQTBCLENBQUNKLFdBQVcsQ0FBQ1AsUUFBVUEsT0FBT0UsUUFBUztZQUM1RixNQUFNUTtZQUNOLElBQUlELHNCQUFzQjtnQkFDdEIsSUFBSUQsZ0JBQWdCSSxXQUFXO29CQUMzQkosY0FBY0U7Z0JBQ2xCLE9BQ0s7b0JBQ0QsSUFBSTt3QkFDQSw4REFBOEQ7d0JBQzlERixjQUFjekIsd0RBQU1BLENBQUN5QixhQUFhRTtvQkFDdEMsRUFDQSxPQUFNO3dCQUNGRixjQUFjSTt3QkFDZEgsdUJBQXVCO29CQUMzQjtnQkFDSjtZQUNKO1FBQ0o7UUFDQSxJQUFJLElBQUksQ0FBQ1gsSUFBSSxJQUFJVSxnQkFBZ0JJLFdBQVc7WUFDeEMsTUFBTSxJQUFJLENBQUNkLElBQUksQ0FBQ1UsYUFBYU47UUFDakM7SUFDSjtJQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7S0EyQkMsR0FDRCxPQUFPVyxPQUFPQyxPQUFPLEVBQUU7UUFDbkIsT0FBTyxJQUFJN0Isb0RBQWNBLENBQUMsSUFBSUMsaURBQVdBLENBQUM7WUFBRTZCLE9BQU9EO1FBQVE7SUFDL0Q7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLWZvcm0tYnVpbGRlci10dXRvcmlhbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC9ydW5uYWJsZXMvcGFzc3Rocm91Z2guanM/MzMwZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjb25jYXQgfSBmcm9tIFwiLi4vdXRpbHMvc3RyZWFtLmpzXCI7XG5pbXBvcnQgeyBSdW5uYWJsZSwgUnVubmFibGVBc3NpZ24sIFJ1bm5hYmxlTWFwLCB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmltcG9ydCB7IGVuc3VyZUNvbmZpZyB9IGZyb20gXCIuL2NvbmZpZy5qc1wiO1xuLyoqXG4gKiBBIHJ1bm5hYmxlIHRvIHBhc3N0aHJvdWdoIGlucHV0cyB1bmNoYW5nZWQgb3Igd2l0aCBhZGRpdGlvbmFsIGtleXMuXG4gKlxuICogVGhpcyBydW5uYWJsZSBiZWhhdmVzIGFsbW9zdCBsaWtlIHRoZSBpZGVudGl0eSBmdW5jdGlvbiwgZXhjZXB0IHRoYXQgaXRcbiAqIGNhbiBiZSBjb25maWd1cmVkIHRvIGFkZCBhZGRpdGlvbmFsIGtleXMgdG8gdGhlIG91dHB1dCwgaWYgdGhlIGlucHV0IGlzXG4gKiBhbiBvYmplY3QuXG4gKlxuICogVGhlIGV4YW1wbGUgYmVsb3cgZGVtb25zdHJhdGVzIGhvdyB0byB1c2UgYFJ1bm5hYmxlUGFzc3Rocm91Z2ggdG9cbiAqIHBhc3N0aHJvdWdoIHRoZSBpbnB1dCBmcm9tIHRoZSBgLmludm9rZSgpYFxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiBjb25zdCBjaGFpbiA9IFJ1bm5hYmxlU2VxdWVuY2UuZnJvbShbXG4gKiAgIHtcbiAqICAgICBxdWVzdGlvbjogbmV3IFJ1bm5hYmxlUGFzc3Rocm91Z2goKSxcbiAqICAgICBjb250ZXh0OiBhc3luYyAoKSA9PiBsb2FkQ29udGV4dEZyb21TdG9yZSgpLFxuICogICB9LFxuICogICBwcm9tcHQsXG4gKiAgIGxsbSxcbiAqICAgb3V0cHV0UGFyc2VyLFxuICogXSk7XG4gKiBjb25zdCByZXNwb25zZSA9IGF3YWl0IGNoYWluLmludm9rZShcbiAqICAgXCJJIGNhbiBwYXNzIGEgc2luZ2xlIHN0cmluZyBpbnN0ZWFkIG9mIGFuIG9iamVjdCBzaW5jZSBJJ20gdXNpbmcgYFJ1bm5hYmxlUGFzc3Rocm91Z2hgLlwiXG4gKiApO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5uYWJsZVBhc3N0aHJvdWdoIGV4dGVuZHMgUnVubmFibGUge1xuICAgIHN0YXRpYyBsY19uYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJSdW5uYWJsZVBhc3N0aHJvdWdoXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwicnVubmFibGVzXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImZ1bmNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGZpZWxkcykge1xuICAgICAgICAgICAgdGhpcy5mdW5jID0gZmllbGRzLmZ1bmM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgaW52b2tlKGlucHV0LCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IGVuc3VyZUNvbmZpZyhvcHRpb25zKTtcbiAgICAgICAgaWYgKHRoaXMuZnVuYykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5mdW5jKGlucHV0LCBjb25maWcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWxsV2l0aENvbmZpZygoaW5wdXQpID0+IFByb21pc2UucmVzb2x2ZShpbnB1dCksIGlucHV0LCBjb25maWcpO1xuICAgIH1cbiAgICBhc3luYyAqdHJhbnNmb3JtKGdlbmVyYXRvciwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBjb25maWcgPSBlbnN1cmVDb25maWcob3B0aW9ucyk7XG4gICAgICAgIGxldCBmaW5hbE91dHB1dDtcbiAgICAgICAgbGV0IGZpbmFsT3V0cHV0U3VwcG9ydGVkID0gdHJ1ZTtcbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiB0aGlzLl90cmFuc2Zvcm1TdHJlYW1XaXRoQ29uZmlnKGdlbmVyYXRvciwgKGlucHV0KSA9PiBpbnB1dCwgY29uZmlnKSkge1xuICAgICAgICAgICAgeWllbGQgY2h1bms7XG4gICAgICAgICAgICBpZiAoZmluYWxPdXRwdXRTdXBwb3J0ZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmluYWxPdXRwdXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IGNodW5rO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgICAgICBmaW5hbE91dHB1dCA9IGNvbmNhdChmaW5hbE91dHB1dCwgY2h1bmspO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsT3V0cHV0ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxPdXRwdXRTdXBwb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5mdW5jICYmIGZpbmFsT3V0cHV0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZnVuYyhmaW5hbE91dHB1dCwgY29uZmlnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIHJ1bm5hYmxlIHRoYXQgYXNzaWducyBrZXktdmFsdWUgcGFpcnMgdG8gdGhlIGlucHV0LlxuICAgICAqXG4gICAgICogVGhlIGV4YW1wbGUgYmVsb3cgc2hvd3MgaG93IHlvdSBjb3VsZCB1c2UgaXQgd2l0aCBhbiBpbmxpbmUgZnVuY3Rpb24uXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqIGBgYHR5cGVzY3JpcHRcbiAgICAgKiBjb25zdCBwcm9tcHQgPVxuICAgICAqICAgUHJvbXB0VGVtcGxhdGUuZnJvbVRlbXBsYXRlKGBXcml0ZSBhIFNRTCBxdWVyeSB0byBhbnN3ZXIgdGhlIHF1ZXN0aW9uIHVzaW5nIHRoZSBmb2xsb3dpbmcgc2NoZW1hOiB7c2NoZW1hfVxuICAgICAqIFF1ZXN0aW9uOiB7cXVlc3Rpb259XG4gICAgICogU1FMIFF1ZXJ5OmApO1xuICAgICAqXG4gICAgICogLy8gVGhlIGBSdW5uYWJsZVBhc3N0aHJvdWdoLmFzc2lnbigpYCBpcyB1c2VkIGhlcmUgdG8gcGFzc3Rocm91Z2ggdGhlIGlucHV0IGZyb20gdGhlIGAuaW52b2tlKClgXG4gICAgICogLy8gY2FsbCAoaW4gdGhpcyBleGFtcGxlIGl0J3MgdGhlIHF1ZXN0aW9uKSwgYWxvbmcgd2l0aCBhbnkgaW5wdXRzIHBhc3NlZCB0byB0aGUgYC5hc3NpZ24oKWAgbWV0aG9kLlxuICAgICAqIC8vIEluIHRoaXMgY2FzZSwgd2UncmUgcGFzc2luZyB0aGUgc2NoZW1hLlxuICAgICAqIGNvbnN0IHNxbFF1ZXJ5R2VuZXJhdG9yQ2hhaW4gPSBSdW5uYWJsZVNlcXVlbmNlLmZyb20oW1xuICAgICAqICAgUnVubmFibGVQYXNzdGhyb3VnaC5hc3NpZ24oe1xuICAgICAqICAgICBzY2hlbWE6IGFzeW5jICgpID0+IGRiLmdldFRhYmxlSW5mbygpLFxuICAgICAqICAgfSksXG4gICAgICogICBwcm9tcHQsXG4gICAgICogICBuZXcgQ2hhdE9wZW5BSSh7fSkuYmluZCh7IHN0b3A6IFtcIlxcblNRTFJlc3VsdDpcIl0gfSksXG4gICAgICogICBuZXcgU3RyaW5nT3V0cHV0UGFyc2VyKCksXG4gICAgICogXSk7XG4gICAgICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc3FsUXVlcnlHZW5lcmF0b3JDaGFpbi5pbnZva2Uoe1xuICAgICAqICAgcXVlc3Rpb246IFwiSG93IG1hbnkgZW1wbG95ZWVzIGFyZSB0aGVyZT9cIixcbiAgICAgKiB9KTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBzdGF0aWMgYXNzaWduKG1hcHBpbmcpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSdW5uYWJsZUFzc2lnbihuZXcgUnVubmFibGVNYXAoeyBzdGVwczogbWFwcGluZyB9KSk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbImNvbmNhdCIsIlJ1bm5hYmxlIiwiUnVubmFibGVBc3NpZ24iLCJSdW5uYWJsZU1hcCIsImVuc3VyZUNvbmZpZyIsIlJ1bm5hYmxlUGFzc3Rocm91Z2giLCJsY19uYW1lIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiZnVuYyIsImludm9rZSIsImlucHV0Iiwib3B0aW9ucyIsImNvbmZpZyIsIl9jYWxsV2l0aENvbmZpZyIsIlByb21pc2UiLCJyZXNvbHZlIiwidHJhbnNmb3JtIiwiZ2VuZXJhdG9yIiwiZmluYWxPdXRwdXQiLCJmaW5hbE91dHB1dFN1cHBvcnRlZCIsImNodW5rIiwiX3RyYW5zZm9ybVN0cmVhbVdpdGhDb25maWciLCJ1bmRlZmluZWQiLCJhc3NpZ24iLCJtYXBwaW5nIiwic3RlcHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/passthrough.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/router.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/router.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RouterRunnable: () => (/* binding */ RouterRunnable)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/base.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/config.js\");\n\n\n/**\n * A runnable that routes to a set of runnables based on Input['key'].\n * Returns the output of the selected runnable.\n */ class RouterRunnable extends _base_js__WEBPACK_IMPORTED_MODULE_0__.Runnable {\n    static lc_name() {\n        return \"RouterRunnable\";\n    }\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"lc_namespace\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: [\n                \"langchain_core\",\n                \"runnables\"\n            ]\n        });\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"runnables\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.runnables = fields.runnables;\n    }\n    async invoke(input, options) {\n        const { key, input: actualInput } = input;\n        const runnable = this.runnables[key];\n        if (runnable === undefined) {\n            throw new Error(`No runnable associated with key \"${key}\".`);\n        }\n        return runnable.invoke(actualInput, (0,_config_js__WEBPACK_IMPORTED_MODULE_1__.ensureConfig)(options));\n    }\n    async batch(inputs, options, batchOptions) {\n        const keys = inputs.map((input)=>input.key);\n        const actualInputs = inputs.map((input)=>input.input);\n        const missingKey = keys.find((key)=>this.runnables[key] === undefined);\n        if (missingKey !== undefined) {\n            throw new Error(`One or more keys do not have a corresponding runnable.`);\n        }\n        const runnables = keys.map((key)=>this.runnables[key]);\n        const optionsList = this._getOptionsList(options ?? {}, inputs.length);\n        const maxConcurrency = optionsList[0]?.maxConcurrency ?? batchOptions?.maxConcurrency;\n        const batchSize = maxConcurrency && maxConcurrency > 0 ? maxConcurrency : inputs.length;\n        const batchResults = [];\n        for(let i = 0; i < actualInputs.length; i += batchSize){\n            const batchPromises = actualInputs.slice(i, i + batchSize).map((actualInput, i)=>runnables[i].invoke(actualInput, optionsList[i]));\n            const batchResult = await Promise.all(batchPromises);\n            batchResults.push(batchResult);\n        }\n        return batchResults.flat();\n    }\n    async stream(input, options) {\n        const { key, input: actualInput } = input;\n        const runnable = this.runnables[key];\n        if (runnable === undefined) {\n            throw new Error(`No runnable associated with key \"${key}\".`);\n        }\n        return runnable.stream(actualInput, options);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL3JvdXRlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBcUM7QUFDTTtBQUMzQzs7O0NBR0MsR0FDTSxNQUFNRSx1QkFBdUJGLDhDQUFRQTtJQUN4QyxPQUFPRyxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0FDLFlBQVlDLE1BQU0sQ0FBRTtRQUNoQixLQUFLLENBQUNBO1FBQ05DLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO2dCQUFDO2dCQUFrQjthQUFZO1FBQzFDO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CO1lBQzNDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxhQUFhO1lBQ3JDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNDLFNBQVMsR0FBR1AsT0FBT08sU0FBUztJQUNyQztJQUNBLE1BQU1DLE9BQU9DLEtBQUssRUFBRUMsT0FBTyxFQUFFO1FBQ3pCLE1BQU0sRUFBRUMsR0FBRyxFQUFFRixPQUFPRyxXQUFXLEVBQUUsR0FBR0g7UUFDcEMsTUFBTUksV0FBVyxJQUFJLENBQUNOLFNBQVMsQ0FBQ0ksSUFBSTtRQUNwQyxJQUFJRSxhQUFhQyxXQUFXO1lBQ3hCLE1BQU0sSUFBSUMsTUFBTSxDQUFDLGlDQUFpQyxFQUFFSixJQUFJLEVBQUUsQ0FBQztRQUMvRDtRQUNBLE9BQU9FLFNBQVNMLE1BQU0sQ0FBQ0ksYUFBYWhCLHdEQUFZQSxDQUFDYztJQUNyRDtJQUNBLE1BQU1NLE1BQU1DLE1BQU0sRUFBRVAsT0FBTyxFQUFFUSxZQUFZLEVBQUU7UUFDdkMsTUFBTUMsT0FBT0YsT0FBT0csR0FBRyxDQUFDLENBQUNYLFFBQVVBLE1BQU1FLEdBQUc7UUFDNUMsTUFBTVUsZUFBZUosT0FBT0csR0FBRyxDQUFDLENBQUNYLFFBQVVBLE1BQU1BLEtBQUs7UUFDdEQsTUFBTWEsYUFBYUgsS0FBS0ksSUFBSSxDQUFDLENBQUNaLE1BQVEsSUFBSSxDQUFDSixTQUFTLENBQUNJLElBQUksS0FBS0c7UUFDOUQsSUFBSVEsZUFBZVIsV0FBVztZQUMxQixNQUFNLElBQUlDLE1BQU0sQ0FBQyxzREFBc0QsQ0FBQztRQUM1RTtRQUNBLE1BQU1SLFlBQVlZLEtBQUtDLEdBQUcsQ0FBQyxDQUFDVCxNQUFRLElBQUksQ0FBQ0osU0FBUyxDQUFDSSxJQUFJO1FBQ3ZELE1BQU1hLGNBQWMsSUFBSSxDQUFDQyxlQUFlLENBQUNmLFdBQVcsQ0FBQyxHQUFHTyxPQUFPUyxNQUFNO1FBQ3JFLE1BQU1DLGlCQUFpQkgsV0FBVyxDQUFDLEVBQUUsRUFBRUcsa0JBQWtCVCxjQUFjUztRQUN2RSxNQUFNQyxZQUFZRCxrQkFBa0JBLGlCQUFpQixJQUFJQSxpQkFBaUJWLE9BQU9TLE1BQU07UUFDdkYsTUFBTUcsZUFBZSxFQUFFO1FBQ3ZCLElBQUssSUFBSUMsSUFBSSxHQUFHQSxJQUFJVCxhQUFhSyxNQUFNLEVBQUVJLEtBQUtGLFVBQVc7WUFDckQsTUFBTUcsZ0JBQWdCVixhQUNqQlcsS0FBSyxDQUFDRixHQUFHQSxJQUFJRixXQUNiUixHQUFHLENBQUMsQ0FBQ1IsYUFBYWtCLElBQU12QixTQUFTLENBQUN1QixFQUFFLENBQUN0QixNQUFNLENBQUNJLGFBQWFZLFdBQVcsQ0FBQ00sRUFBRTtZQUM1RSxNQUFNRyxjQUFjLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQ0o7WUFDdENGLGFBQWFPLElBQUksQ0FBQ0g7UUFDdEI7UUFDQSxPQUFPSixhQUFhUSxJQUFJO0lBQzVCO0lBQ0EsTUFBTUMsT0FBTzdCLEtBQUssRUFBRUMsT0FBTyxFQUFFO1FBQ3pCLE1BQU0sRUFBRUMsR0FBRyxFQUFFRixPQUFPRyxXQUFXLEVBQUUsR0FBR0g7UUFDcEMsTUFBTUksV0FBVyxJQUFJLENBQUNOLFNBQVMsQ0FBQ0ksSUFBSTtRQUNwQyxJQUFJRSxhQUFhQyxXQUFXO1lBQ3hCLE1BQU0sSUFBSUMsTUFBTSxDQUFDLGlDQUFpQyxFQUFFSixJQUFJLEVBQUUsQ0FBQztRQUMvRDtRQUNBLE9BQU9FLFNBQVN5QixNQUFNLENBQUMxQixhQUFhRjtJQUN4QztBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3J1bm5hYmxlcy9yb3V0ZXIuanM/YzI4ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSdW5uYWJsZSB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbmltcG9ydCB7IGVuc3VyZUNvbmZpZyB9IGZyb20gXCIuL2NvbmZpZy5qc1wiO1xuLyoqXG4gKiBBIHJ1bm5hYmxlIHRoYXQgcm91dGVzIHRvIGEgc2V0IG9mIHJ1bm5hYmxlcyBiYXNlZCBvbiBJbnB1dFsna2V5J10uXG4gKiBSZXR1cm5zIHRoZSBvdXRwdXQgb2YgdGhlIHNlbGVjdGVkIHJ1bm5hYmxlLlxuICovXG5leHBvcnQgY2xhc3MgUm91dGVyUnVubmFibGUgZXh0ZW5kcyBSdW5uYWJsZSB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlJvdXRlclJ1bm5hYmxlXCI7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcihmaWVsZHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19uYW1lc3BhY2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFtcImxhbmdjaGFpbl9jb3JlXCIsIFwicnVubmFibGVzXCJdXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJ1bm5hYmxlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnJ1bm5hYmxlcyA9IGZpZWxkcy5ydW5uYWJsZXM7XG4gICAgfVxuICAgIGFzeW5jIGludm9rZShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCB7IGtleSwgaW5wdXQ6IGFjdHVhbElucHV0IH0gPSBpbnB1dDtcbiAgICAgICAgY29uc3QgcnVubmFibGUgPSB0aGlzLnJ1bm5hYmxlc1trZXldO1xuICAgICAgICBpZiAocnVubmFibGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyBydW5uYWJsZSBhc3NvY2lhdGVkIHdpdGgga2V5IFwiJHtrZXl9XCIuYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJ1bm5hYmxlLmludm9rZShhY3R1YWxJbnB1dCwgZW5zdXJlQ29uZmlnKG9wdGlvbnMpKTtcbiAgICB9XG4gICAgYXN5bmMgYmF0Y2goaW5wdXRzLCBvcHRpb25zLCBiYXRjaE9wdGlvbnMpIHtcbiAgICAgICAgY29uc3Qga2V5cyA9IGlucHV0cy5tYXAoKGlucHV0KSA9PiBpbnB1dC5rZXkpO1xuICAgICAgICBjb25zdCBhY3R1YWxJbnB1dHMgPSBpbnB1dHMubWFwKChpbnB1dCkgPT4gaW5wdXQuaW5wdXQpO1xuICAgICAgICBjb25zdCBtaXNzaW5nS2V5ID0ga2V5cy5maW5kKChrZXkpID0+IHRoaXMucnVubmFibGVzW2tleV0gPT09IHVuZGVmaW5lZCk7XG4gICAgICAgIGlmIChtaXNzaW5nS2V5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgT25lIG9yIG1vcmUga2V5cyBkbyBub3QgaGF2ZSBhIGNvcnJlc3BvbmRpbmcgcnVubmFibGUuYCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcnVubmFibGVzID0ga2V5cy5tYXAoKGtleSkgPT4gdGhpcy5ydW5uYWJsZXNba2V5XSk7XG4gICAgICAgIGNvbnN0IG9wdGlvbnNMaXN0ID0gdGhpcy5fZ2V0T3B0aW9uc0xpc3Qob3B0aW9ucyA/PyB7fSwgaW5wdXRzLmxlbmd0aCk7XG4gICAgICAgIGNvbnN0IG1heENvbmN1cnJlbmN5ID0gb3B0aW9uc0xpc3RbMF0/Lm1heENvbmN1cnJlbmN5ID8/IGJhdGNoT3B0aW9ucz8ubWF4Q29uY3VycmVuY3k7XG4gICAgICAgIGNvbnN0IGJhdGNoU2l6ZSA9IG1heENvbmN1cnJlbmN5ICYmIG1heENvbmN1cnJlbmN5ID4gMCA/IG1heENvbmN1cnJlbmN5IDogaW5wdXRzLmxlbmd0aDtcbiAgICAgICAgY29uc3QgYmF0Y2hSZXN1bHRzID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWN0dWFsSW5wdXRzLmxlbmd0aDsgaSArPSBiYXRjaFNpemUpIHtcbiAgICAgICAgICAgIGNvbnN0IGJhdGNoUHJvbWlzZXMgPSBhY3R1YWxJbnB1dHNcbiAgICAgICAgICAgICAgICAuc2xpY2UoaSwgaSArIGJhdGNoU2l6ZSlcbiAgICAgICAgICAgICAgICAubWFwKChhY3R1YWxJbnB1dCwgaSkgPT4gcnVubmFibGVzW2ldLmludm9rZShhY3R1YWxJbnB1dCwgb3B0aW9uc0xpc3RbaV0pKTtcbiAgICAgICAgICAgIGNvbnN0IGJhdGNoUmVzdWx0ID0gYXdhaXQgUHJvbWlzZS5hbGwoYmF0Y2hQcm9taXNlcyk7XG4gICAgICAgICAgICBiYXRjaFJlc3VsdHMucHVzaChiYXRjaFJlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJhdGNoUmVzdWx0cy5mbGF0KCk7XG4gICAgfVxuICAgIGFzeW5jIHN0cmVhbShpbnB1dCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCB7IGtleSwgaW5wdXQ6IGFjdHVhbElucHV0IH0gPSBpbnB1dDtcbiAgICAgICAgY29uc3QgcnVubmFibGUgPSB0aGlzLnJ1bm5hYmxlc1trZXldO1xuICAgICAgICBpZiAocnVubmFibGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBObyBydW5uYWJsZSBhc3NvY2lhdGVkIHdpdGgga2V5IFwiJHtrZXl9XCIuYCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJ1bm5hYmxlLnN0cmVhbShhY3R1YWxJbnB1dCwgb3B0aW9ucyk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIlJ1bm5hYmxlIiwiZW5zdXJlQ29uZmlnIiwiUm91dGVyUnVubmFibGUiLCJsY19uYW1lIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwicnVubmFibGVzIiwiaW52b2tlIiwiaW5wdXQiLCJvcHRpb25zIiwia2V5IiwiYWN0dWFsSW5wdXQiLCJydW5uYWJsZSIsInVuZGVmaW5lZCIsIkVycm9yIiwiYmF0Y2giLCJpbnB1dHMiLCJiYXRjaE9wdGlvbnMiLCJrZXlzIiwibWFwIiwiYWN0dWFsSW5wdXRzIiwibWlzc2luZ0tleSIsImZpbmQiLCJvcHRpb25zTGlzdCIsIl9nZXRPcHRpb25zTGlzdCIsImxlbmd0aCIsIm1heENvbmN1cnJlbmN5IiwiYmF0Y2hTaXplIiwiYmF0Y2hSZXN1bHRzIiwiaSIsImJhdGNoUHJvbWlzZXMiLCJzbGljZSIsImJhdGNoUmVzdWx0IiwiUHJvbWlzZSIsImFsbCIsInB1c2giLCJmbGF0Iiwic3RyZWFtIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/router.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/runnables/utils.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/runnables/utils.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   _RootEventFilter: () => (/* binding */ _RootEventFilter),\n/* harmony export */   isRunnableInterface: () => (/* binding */ isRunnableInterface)\n/* harmony export */ });\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction isRunnableInterface(thing) {\n    return thing ? thing.lc_runnable : false;\n}\n/**\n * Utility to filter the root event in the streamEvents implementation.\n * This is simply binding the arguments to the namespace to make save on\n * a bit of typing in the streamEvents implementation.\n *\n * TODO: Refactor and remove.\n */ class _RootEventFilter {\n    constructor(fields){\n        Object.defineProperty(this, \"includeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.includeNames = fields.includeNames;\n        this.includeTypes = fields.includeTypes;\n        this.includeTags = fields.includeTags;\n        this.excludeNames = fields.excludeNames;\n        this.excludeTypes = fields.excludeTypes;\n        this.excludeTags = fields.excludeTags;\n    }\n    includeEvent(event, rootType) {\n        let include = this.includeNames === undefined && this.includeTypes === undefined && this.includeTags === undefined;\n        const eventTags = event.tags ?? [];\n        if (this.includeNames !== undefined) {\n            include = include || this.includeNames.includes(event.name);\n        }\n        if (this.includeTypes !== undefined) {\n            include = include || this.includeTypes.includes(rootType);\n        }\n        if (this.includeTags !== undefined) {\n            include = include || eventTags.some((tag)=>this.includeTags?.includes(tag));\n        }\n        if (this.excludeNames !== undefined) {\n            include = include && !this.excludeNames.includes(event.name);\n        }\n        if (this.excludeTypes !== undefined) {\n            include = include && !this.excludeTypes.includes(rootType);\n        }\n        if (this.excludeTags !== undefined) {\n            include = include && eventTags.every((tag)=>!this.excludeTags?.includes(tag));\n        }\n        return include;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvcnVubmFibGVzL3V0aWxzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsOERBQThEO0FBQ3ZELFNBQVNBLG9CQUFvQkMsS0FBSztJQUNyQyxPQUFPQSxRQUFRQSxNQUFNQyxXQUFXLEdBQUc7QUFDdkM7QUFDQTs7Ozs7O0NBTUMsR0FDTSxNQUFNQztJQUNUQyxZQUFZQyxNQUFNLENBQUU7UUFDaEJDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGVBQWU7WUFDdkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsZ0JBQWdCO1lBQ3hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxlQUFlO1lBQ3ZDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNDLFlBQVksR0FBR1AsT0FBT08sWUFBWTtRQUN2QyxJQUFJLENBQUNDLFlBQVksR0FBR1IsT0FBT1EsWUFBWTtRQUN2QyxJQUFJLENBQUNDLFdBQVcsR0FBR1QsT0FBT1MsV0FBVztRQUNyQyxJQUFJLENBQUNDLFlBQVksR0FBR1YsT0FBT1UsWUFBWTtRQUN2QyxJQUFJLENBQUNDLFlBQVksR0FBR1gsT0FBT1csWUFBWTtRQUN2QyxJQUFJLENBQUNDLFdBQVcsR0FBR1osT0FBT1ksV0FBVztJQUN6QztJQUNBQyxhQUFhQyxLQUFLLEVBQUVDLFFBQVEsRUFBRTtRQUMxQixJQUFJQyxVQUFVLElBQUksQ0FBQ1QsWUFBWSxLQUFLVSxhQUNoQyxJQUFJLENBQUNULFlBQVksS0FBS1MsYUFDdEIsSUFBSSxDQUFDUixXQUFXLEtBQUtRO1FBQ3pCLE1BQU1DLFlBQVlKLE1BQU1LLElBQUksSUFBSSxFQUFFO1FBQ2xDLElBQUksSUFBSSxDQUFDWixZQUFZLEtBQUtVLFdBQVc7WUFDakNELFVBQVVBLFdBQVcsSUFBSSxDQUFDVCxZQUFZLENBQUNhLFFBQVEsQ0FBQ04sTUFBTU8sSUFBSTtRQUM5RDtRQUNBLElBQUksSUFBSSxDQUFDYixZQUFZLEtBQUtTLFdBQVc7WUFDakNELFVBQVVBLFdBQVcsSUFBSSxDQUFDUixZQUFZLENBQUNZLFFBQVEsQ0FBQ0w7UUFDcEQ7UUFDQSxJQUFJLElBQUksQ0FBQ04sV0FBVyxLQUFLUSxXQUFXO1lBQ2hDRCxVQUNJQSxXQUFXRSxVQUFVSSxJQUFJLENBQUMsQ0FBQ0MsTUFBUSxJQUFJLENBQUNkLFdBQVcsRUFBRVcsU0FBU0c7UUFDdEU7UUFDQSxJQUFJLElBQUksQ0FBQ2IsWUFBWSxLQUFLTyxXQUFXO1lBQ2pDRCxVQUFVQSxXQUFXLENBQUMsSUFBSSxDQUFDTixZQUFZLENBQUNVLFFBQVEsQ0FBQ04sTUFBTU8sSUFBSTtRQUMvRDtRQUNBLElBQUksSUFBSSxDQUFDVixZQUFZLEtBQUtNLFdBQVc7WUFDakNELFVBQVVBLFdBQVcsQ0FBQyxJQUFJLENBQUNMLFlBQVksQ0FBQ1MsUUFBUSxDQUFDTDtRQUNyRDtRQUNBLElBQUksSUFBSSxDQUFDSCxXQUFXLEtBQUtLLFdBQVc7WUFDaENELFVBQ0lBLFdBQVdFLFVBQVVNLEtBQUssQ0FBQyxDQUFDRCxNQUFRLENBQUMsSUFBSSxDQUFDWCxXQUFXLEVBQUVRLFNBQVNHO1FBQ3hFO1FBQ0EsT0FBT1A7SUFDWDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3J1bm5hYmxlcy91dGlscy5qcz84MWZiIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5leHBvcnQgZnVuY3Rpb24gaXNSdW5uYWJsZUludGVyZmFjZSh0aGluZykge1xuICAgIHJldHVybiB0aGluZyA/IHRoaW5nLmxjX3J1bm5hYmxlIDogZmFsc2U7XG59XG4vKipcbiAqIFV0aWxpdHkgdG8gZmlsdGVyIHRoZSByb290IGV2ZW50IGluIHRoZSBzdHJlYW1FdmVudHMgaW1wbGVtZW50YXRpb24uXG4gKiBUaGlzIGlzIHNpbXBseSBiaW5kaW5nIHRoZSBhcmd1bWVudHMgdG8gdGhlIG5hbWVzcGFjZSB0byBtYWtlIHNhdmUgb25cbiAqIGEgYml0IG9mIHR5cGluZyBpbiB0aGUgc3RyZWFtRXZlbnRzIGltcGxlbWVudGF0aW9uLlxuICpcbiAqIFRPRE86IFJlZmFjdG9yIGFuZCByZW1vdmUuXG4gKi9cbmV4cG9ydCBjbGFzcyBfUm9vdEV2ZW50RmlsdGVyIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5jbHVkZU5hbWVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluY2x1ZGVUeXBlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmNsdWRlVGFnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJleGNsdWRlTmFtZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZXhjbHVkZVR5cGVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImV4Y2x1ZGVUYWdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaW5jbHVkZU5hbWVzID0gZmllbGRzLmluY2x1ZGVOYW1lcztcbiAgICAgICAgdGhpcy5pbmNsdWRlVHlwZXMgPSBmaWVsZHMuaW5jbHVkZVR5cGVzO1xuICAgICAgICB0aGlzLmluY2x1ZGVUYWdzID0gZmllbGRzLmluY2x1ZGVUYWdzO1xuICAgICAgICB0aGlzLmV4Y2x1ZGVOYW1lcyA9IGZpZWxkcy5leGNsdWRlTmFtZXM7XG4gICAgICAgIHRoaXMuZXhjbHVkZVR5cGVzID0gZmllbGRzLmV4Y2x1ZGVUeXBlcztcbiAgICAgICAgdGhpcy5leGNsdWRlVGFncyA9IGZpZWxkcy5leGNsdWRlVGFncztcbiAgICB9XG4gICAgaW5jbHVkZUV2ZW50KGV2ZW50LCByb290VHlwZSkge1xuICAgICAgICBsZXQgaW5jbHVkZSA9IHRoaXMuaW5jbHVkZU5hbWVzID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIHRoaXMuaW5jbHVkZVR5cGVzID09PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIHRoaXMuaW5jbHVkZVRhZ3MgPT09IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3QgZXZlbnRUYWdzID0gZXZlbnQudGFncyA/PyBbXTtcbiAgICAgICAgaWYgKHRoaXMuaW5jbHVkZU5hbWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPSBpbmNsdWRlIHx8IHRoaXMuaW5jbHVkZU5hbWVzLmluY2x1ZGVzKGV2ZW50Lm5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmluY2x1ZGVUeXBlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID0gaW5jbHVkZSB8fCB0aGlzLmluY2x1ZGVUeXBlcy5pbmNsdWRlcyhyb290VHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaW5jbHVkZVRhZ3MgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9XG4gICAgICAgICAgICAgICAgaW5jbHVkZSB8fCBldmVudFRhZ3Muc29tZSgodGFnKSA9PiB0aGlzLmluY2x1ZGVUYWdzPy5pbmNsdWRlcyh0YWcpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5leGNsdWRlTmFtZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9IGluY2x1ZGUgJiYgIXRoaXMuZXhjbHVkZU5hbWVzLmluY2x1ZGVzKGV2ZW50Lm5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmV4Y2x1ZGVUeXBlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID0gaW5jbHVkZSAmJiAhdGhpcy5leGNsdWRlVHlwZXMuaW5jbHVkZXMocm9vdFR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmV4Y2x1ZGVUYWdzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPVxuICAgICAgICAgICAgICAgIGluY2x1ZGUgJiYgZXZlbnRUYWdzLmV2ZXJ5KCh0YWcpID0+ICF0aGlzLmV4Y2x1ZGVUYWdzPy5pbmNsdWRlcyh0YWcpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5jbHVkZTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiaXNSdW5uYWJsZUludGVyZmFjZSIsInRoaW5nIiwibGNfcnVubmFibGUiLCJfUm9vdEV2ZW50RmlsdGVyIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiaW5jbHVkZU5hbWVzIiwiaW5jbHVkZVR5cGVzIiwiaW5jbHVkZVRhZ3MiLCJleGNsdWRlTmFtZXMiLCJleGNsdWRlVHlwZXMiLCJleGNsdWRlVGFncyIsImluY2x1ZGVFdmVudCIsImV2ZW50Iiwicm9vdFR5cGUiLCJpbmNsdWRlIiwidW5kZWZpbmVkIiwiZXZlbnRUYWdzIiwidGFncyIsImluY2x1ZGVzIiwibmFtZSIsInNvbWUiLCJ0YWciLCJldmVyeSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/runnables/utils.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/singletons/index.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/singletons/index.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncLocalStorageProviderSingleton: () => (/* binding */ AsyncLocalStorageProviderSingleton),\n/* harmony export */   MockAsyncLocalStorage: () => (/* binding */ MockAsyncLocalStorage)\n/* harmony export */ });\n/* eslint-disable @typescript-eslint/no-explicit-any */ class MockAsyncLocalStorage {\n    getStore() {\n        return undefined;\n    }\n    run(_store, callback) {\n        callback();\n    }\n}\nclass AsyncLocalStorageProvider {\n    constructor(){\n        Object.defineProperty(this, \"asyncLocalStorage\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new MockAsyncLocalStorage()\n        });\n        Object.defineProperty(this, \"hasBeenInitialized\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n    }\n    getInstance() {\n        return this.asyncLocalStorage;\n    }\n    initializeGlobalInstance(instance) {\n        if (!this.hasBeenInitialized) {\n            this.hasBeenInitialized = true;\n            this.asyncLocalStorage = instance;\n        }\n    }\n}\nconst AsyncLocalStorageProviderSingleton = new AsyncLocalStorageProvider();\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3Qvc2luZ2xldG9ucy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBLHFEQUFxRCxHQUM5QyxNQUFNQTtJQUNUQyxXQUFXO1FBQ1AsT0FBT0M7SUFDWDtJQUNBQyxJQUFJQyxNQUFNLEVBQUVDLFFBQVEsRUFBRTtRQUNsQkE7SUFDSjtBQUNKO0FBQ0EsTUFBTUM7SUFDRkMsYUFBYztRQUNWQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLHFCQUFxQjtZQUM3Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxJQUFJYjtRQUNmO1FBQ0FRLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsc0JBQXNCO1lBQzlDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7SUFDSjtJQUNBQyxjQUFjO1FBQ1YsT0FBTyxJQUFJLENBQUNDLGlCQUFpQjtJQUNqQztJQUNBQyx5QkFBeUJDLFFBQVEsRUFBRTtRQUMvQixJQUFJLENBQUMsSUFBSSxDQUFDQyxrQkFBa0IsRUFBRTtZQUMxQixJQUFJLENBQUNBLGtCQUFrQixHQUFHO1lBQzFCLElBQUksQ0FBQ0gsaUJBQWlCLEdBQUdFO1FBQzdCO0lBQ0o7QUFDSjtBQUNBLE1BQU1FLHFDQUFxQyxJQUFJYjtBQUNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3NpbmdsZXRvbnMvaW5kZXguanM/NjRkNiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55ICovXG5leHBvcnQgY2xhc3MgTW9ja0FzeW5jTG9jYWxTdG9yYWdlIHtcbiAgICBnZXRTdG9yZSgpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gICAgcnVuKF9zdG9yZSwgY2FsbGJhY2spIHtcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICB9XG59XG5jbGFzcyBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXN5bmNMb2NhbFN0b3JhZ2VcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IG5ldyBNb2NrQXN5bmNMb2NhbFN0b3JhZ2UoKVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaGFzQmVlbkluaXRpYWxpemVkXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZ2V0SW5zdGFuY2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFzeW5jTG9jYWxTdG9yYWdlO1xuICAgIH1cbiAgICBpbml0aWFsaXplR2xvYmFsSW5zdGFuY2UoaW5zdGFuY2UpIHtcbiAgICAgICAgaWYgKCF0aGlzLmhhc0JlZW5Jbml0aWFsaXplZCkge1xuICAgICAgICAgICAgdGhpcy5oYXNCZWVuSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5hc3luY0xvY2FsU3RvcmFnZSA9IGluc3RhbmNlO1xuICAgICAgICB9XG4gICAgfVxufVxuY29uc3QgQXN5bmNMb2NhbFN0b3JhZ2VQcm92aWRlclNpbmdsZXRvbiA9IG5ldyBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyKCk7XG5leHBvcnQgeyBBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uIH07XG4iXSwibmFtZXMiOlsiTW9ja0FzeW5jTG9jYWxTdG9yYWdlIiwiZ2V0U3RvcmUiLCJ1bmRlZmluZWQiLCJydW4iLCJfc3RvcmUiLCJjYWxsYmFjayIsIkFzeW5jTG9jYWxTdG9yYWdlUHJvdmlkZXIiLCJjb25zdHJ1Y3RvciIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJnZXRJbnN0YW5jZSIsImFzeW5jTG9jYWxTdG9yYWdlIiwiaW5pdGlhbGl6ZUdsb2JhbEluc3RhbmNlIiwiaW5zdGFuY2UiLCJoYXNCZWVuSW5pdGlhbGl6ZWQiLCJBc3luY0xvY2FsU3RvcmFnZVByb3ZpZGVyU2luZ2xldG9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/singletons/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tracers/base.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/base.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseTracer: () => (/* binding */ BaseTracer)\n/* harmony export */ });\n/* harmony import */ var _callbacks_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../callbacks/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/callbacks/base.js\");\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction _coerceToDict(value, defaultKey) {\n    return value && !Array.isArray(value) && typeof value === \"object\" ? value : {\n        [defaultKey]: value\n    };\n}\nfunction stripNonAlphanumeric(input) {\n    return input.replace(/[-:.]/g, \"\");\n}\nfunction convertToDottedOrderFormat(epoch, runId) {\n    return stripNonAlphanumeric(`${new Date(epoch).toISOString().slice(0, -1)}000Z`) + runId;\n}\nclass BaseTracer extends _callbacks_base_js__WEBPACK_IMPORTED_MODULE_0__.BaseCallbackHandler {\n    constructor(_fields){\n        super(...arguments);\n        Object.defineProperty(this, \"runMap\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new Map()\n        });\n    }\n    copy() {\n        return this;\n    }\n    stringifyError(error) {\n        // eslint-disable-next-line no-instanceof/no-instanceof\n        if (error instanceof Error) {\n            return error.message + (error?.stack ? `\\n\\n${error.stack}` : \"\");\n        }\n        if (typeof error === \"string\") {\n            return error;\n        }\n        return `${error}`;\n    }\n    _addChildRun(parentRun, childRun) {\n        parentRun.child_runs.push(childRun);\n    }\n    async _startTrace(run) {\n        const currentDottedOrder = convertToDottedOrderFormat(run.start_time, run.id);\n        const storedRun = {\n            ...run\n        };\n        if (storedRun.parent_run_id !== undefined) {\n            const parentRun = this.runMap.get(storedRun.parent_run_id);\n            if (parentRun) {\n                this._addChildRun(parentRun, storedRun);\n                parentRun.child_execution_order = Math.max(parentRun.child_execution_order, storedRun.child_execution_order);\n                storedRun.trace_id = parentRun.trace_id;\n                if (parentRun.dotted_order !== undefined) {\n                    storedRun.dotted_order = [\n                        parentRun.dotted_order,\n                        currentDottedOrder\n                    ].join(\".\");\n                } else {\n                // This can happen naturally for callbacks added within a run\n                // console.debug(`Parent run with UUID ${storedRun.parent_run_id} has no dotted order.`);\n                }\n            } else {\n            // This can happen naturally for callbacks added within a run\n            // console.debug(\n            //   `Parent run with UUID ${storedRun.parent_run_id} not found.`\n            // );\n            }\n        } else {\n            storedRun.trace_id = storedRun.id;\n            storedRun.dotted_order = currentDottedOrder;\n        }\n        this.runMap.set(storedRun.id, storedRun);\n        await this.onRunCreate?.(storedRun);\n    }\n    async _endTrace(run) {\n        const parentRun = run.parent_run_id !== undefined && this.runMap.get(run.parent_run_id);\n        if (parentRun) {\n            parentRun.child_execution_order = Math.max(parentRun.child_execution_order, run.child_execution_order);\n        } else {\n            await this.persistRun(run);\n        }\n        this.runMap.delete(run.id);\n        await this.onRunUpdate?.(run);\n    }\n    _getExecutionOrder(parentRunId) {\n        const parentRun = parentRunId !== undefined && this.runMap.get(parentRunId);\n        // If a run has no parent then execution order is 1\n        if (!parentRun) {\n            return 1;\n        }\n        return parentRun.child_execution_order + 1;\n    }\n    async handleLLMStart(llm, prompts, runId, parentRunId, extraParams, tags, metadata, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const finalExtraParams = metadata ? {\n            ...extraParams,\n            metadata\n        } : extraParams;\n        const run = {\n            id: runId,\n            name: name ?? llm.id[llm.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: llm,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs: {\n                prompts\n            },\n            execution_order,\n            child_runs: [],\n            child_execution_order: execution_order,\n            run_type: \"llm\",\n            extra: finalExtraParams ?? {},\n            tags: tags || []\n        };\n        await this._startTrace(run);\n        await this.onLLMStart?.(run);\n        return run;\n    }\n    async handleChatModelStart(llm, messages, runId, parentRunId, extraParams, tags, metadata, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const finalExtraParams = metadata ? {\n            ...extraParams,\n            metadata\n        } : extraParams;\n        const run = {\n            id: runId,\n            name: name ?? llm.id[llm.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: llm,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs: {\n                messages\n            },\n            execution_order,\n            child_runs: [],\n            child_execution_order: execution_order,\n            run_type: \"llm\",\n            extra: finalExtraParams ?? {},\n            tags: tags || []\n        };\n        await this._startTrace(run);\n        await this.onLLMStart?.(run);\n        return run;\n    }\n    async handleLLMEnd(output, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"llm\") {\n            throw new Error(\"No LLM run to end.\");\n        }\n        run.end_time = Date.now();\n        run.outputs = output;\n        run.events.push({\n            name: \"end\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onLLMEnd?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleLLMError(error, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"llm\") {\n            throw new Error(\"No LLM run to end.\");\n        }\n        run.end_time = Date.now();\n        run.error = this.stringifyError(error);\n        run.events.push({\n            name: \"error\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onLLMError?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleChainStart(chain, inputs, runId, parentRunId, tags, metadata, runType, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const run = {\n            id: runId,\n            name: name ?? chain.id[chain.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: chain,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs,\n            execution_order,\n            child_execution_order: execution_order,\n            run_type: runType ?? \"chain\",\n            child_runs: [],\n            extra: metadata ? {\n                metadata\n            } : {},\n            tags: tags || []\n        };\n        await this._startTrace(run);\n        await this.onChainStart?.(run);\n        return run;\n    }\n    async handleChainEnd(outputs, runId, _parentRunId, _tags, kwargs) {\n        const run = this.runMap.get(runId);\n        if (!run) {\n            throw new Error(\"No chain run to end.\");\n        }\n        run.end_time = Date.now();\n        run.outputs = _coerceToDict(outputs, \"output\");\n        run.events.push({\n            name: \"end\",\n            time: new Date(run.end_time).toISOString()\n        });\n        if (kwargs?.inputs !== undefined) {\n            run.inputs = _coerceToDict(kwargs.inputs, \"input\");\n        }\n        await this.onChainEnd?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleChainError(error, runId, _parentRunId, _tags, kwargs) {\n        const run = this.runMap.get(runId);\n        if (!run) {\n            throw new Error(\"No chain run to end.\");\n        }\n        run.end_time = Date.now();\n        run.error = this.stringifyError(error);\n        run.events.push({\n            name: \"error\",\n            time: new Date(run.end_time).toISOString()\n        });\n        if (kwargs?.inputs !== undefined) {\n            run.inputs = _coerceToDict(kwargs.inputs, \"input\");\n        }\n        await this.onChainError?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleToolStart(tool, input, runId, parentRunId, tags, metadata, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const run = {\n            id: runId,\n            name: name ?? tool.id[tool.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: tool,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs: {\n                input\n            },\n            execution_order,\n            child_execution_order: execution_order,\n            run_type: \"tool\",\n            child_runs: [],\n            extra: metadata ? {\n                metadata\n            } : {},\n            tags: tags || []\n        };\n        await this._startTrace(run);\n        await this.onToolStart?.(run);\n        return run;\n    }\n    async handleToolEnd(output, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"tool\") {\n            throw new Error(\"No tool run to end\");\n        }\n        run.end_time = Date.now();\n        run.outputs = {\n            output\n        };\n        run.events.push({\n            name: \"end\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onToolEnd?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleToolError(error, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"tool\") {\n            throw new Error(\"No tool run to end\");\n        }\n        run.end_time = Date.now();\n        run.error = this.stringifyError(error);\n        run.events.push({\n            name: \"error\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onToolError?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleAgentAction(action, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"chain\") {\n            return;\n        }\n        const agentRun = run;\n        agentRun.actions = agentRun.actions || [];\n        agentRun.actions.push(action);\n        agentRun.events.push({\n            name: \"agent_action\",\n            time: new Date().toISOString(),\n            kwargs: {\n                action\n            }\n        });\n        await this.onAgentAction?.(run);\n    }\n    async handleAgentEnd(action, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"chain\") {\n            return;\n        }\n        run.events.push({\n            name: \"agent_end\",\n            time: new Date().toISOString(),\n            kwargs: {\n                action\n            }\n        });\n        await this.onAgentEnd?.(run);\n    }\n    async handleRetrieverStart(retriever, query, runId, parentRunId, tags, metadata, name) {\n        const execution_order = this._getExecutionOrder(parentRunId);\n        const start_time = Date.now();\n        const run = {\n            id: runId,\n            name: name ?? retriever.id[retriever.id.length - 1],\n            parent_run_id: parentRunId,\n            start_time,\n            serialized: retriever,\n            events: [\n                {\n                    name: \"start\",\n                    time: new Date(start_time).toISOString()\n                }\n            ],\n            inputs: {\n                query\n            },\n            execution_order,\n            child_execution_order: execution_order,\n            run_type: \"retriever\",\n            child_runs: [],\n            extra: metadata ? {\n                metadata\n            } : {},\n            tags: tags || []\n        };\n        await this._startTrace(run);\n        await this.onRetrieverStart?.(run);\n        return run;\n    }\n    async handleRetrieverEnd(documents, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"retriever\") {\n            throw new Error(\"No retriever run to end\");\n        }\n        run.end_time = Date.now();\n        run.outputs = {\n            documents\n        };\n        run.events.push({\n            name: \"end\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onRetrieverEnd?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleRetrieverError(error, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"retriever\") {\n            throw new Error(\"No retriever run to end\");\n        }\n        run.end_time = Date.now();\n        run.error = this.stringifyError(error);\n        run.events.push({\n            name: \"error\",\n            time: new Date(run.end_time).toISOString()\n        });\n        await this.onRetrieverError?.(run);\n        await this._endTrace(run);\n        return run;\n    }\n    async handleText(text, runId) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"chain\") {\n            return;\n        }\n        run.events.push({\n            name: \"text\",\n            time: new Date().toISOString(),\n            kwargs: {\n                text\n            }\n        });\n        await this.onText?.(run);\n    }\n    async handleLLMNewToken(token, idx, runId, _parentRunId, _tags, fields) {\n        const run = this.runMap.get(runId);\n        if (!run || run?.run_type !== \"llm\") {\n            throw new Error(`Invalid \"runId\" provided to \"handleLLMNewToken\" callback.`);\n        }\n        run.events.push({\n            name: \"new_token\",\n            time: new Date().toISOString(),\n            kwargs: {\n                token,\n                idx,\n                chunk: fields?.chunk\n            }\n        });\n        await this.onLLMNewToken?.(run, token, {\n            chunk: fields?.chunk\n        });\n        return run;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9iYXNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTREO0FBQzVELDhEQUE4RDtBQUM5RCxTQUFTQyxjQUFjQyxLQUFLLEVBQUVDLFVBQVU7SUFDcEMsT0FBT0QsU0FBUyxDQUFDRSxNQUFNQyxPQUFPLENBQUNILFVBQVUsT0FBT0EsVUFBVSxXQUNwREEsUUFDQTtRQUFFLENBQUNDLFdBQVcsRUFBRUQ7SUFBTTtBQUNoQztBQUNBLFNBQVNJLHFCQUFxQkMsS0FBSztJQUMvQixPQUFPQSxNQUFNQyxPQUFPLENBQUMsVUFBVTtBQUNuQztBQUNBLFNBQVNDLDJCQUEyQkMsS0FBSyxFQUFFQyxLQUFLO0lBQzVDLE9BQVFMLHFCQUFxQixDQUFDLEVBQUUsSUFBSU0sS0FBS0YsT0FBT0csV0FBVyxHQUFHQyxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLElBQzVFSDtBQUNSO0FBQ08sTUFBTUksbUJBQW1CZixtRUFBbUJBO0lBQy9DZ0IsWUFBWUMsT0FBTyxDQUFFO1FBQ2pCLEtBQUssSUFBSUM7UUFDVEMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxVQUFVO1lBQ2xDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWckIsT0FBTyxJQUFJc0I7UUFDZjtJQUNKO0lBQ0FDLE9BQU87UUFDSCxPQUFPLElBQUk7SUFDZjtJQUNBQyxlQUFlQyxLQUFLLEVBQUU7UUFDbEIsdURBQXVEO1FBQ3ZELElBQUlBLGlCQUFpQkMsT0FBTztZQUN4QixPQUFPRCxNQUFNRSxPQUFPLEdBQUlGLENBQUFBLE9BQU9HLFFBQVEsQ0FBQyxJQUFJLEVBQUVILE1BQU1HLEtBQUssQ0FBQyxDQUFDLEdBQUcsRUFBQztRQUNuRTtRQUNBLElBQUksT0FBT0gsVUFBVSxVQUFVO1lBQzNCLE9BQU9BO1FBQ1g7UUFDQSxPQUFPLENBQUMsRUFBRUEsTUFBTSxDQUFDO0lBQ3JCO0lBQ0FJLGFB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RyxDQUFDbEM7UUFDNUIsSUFBSSxDQUFDMEIsT0FBT0EsS0FBS3NDLGFBQWEsU0FBUztZQUNuQztRQUNKO1FBQ0F0QyxJQUFJbUMsTUFBTSxDQUFDckMsSUFBSSxDQUFDO1lBQ1orQixNQUFNO1lBQ05PLE1BQU0sSUFBSTdELE9BQU9DLFdBQVc7WUFDNUJpRixRQUFRO2dCQUFFNEI7WUFBSztRQUNuQjtRQUNBLE1BQU0sSUFBSSxDQUFDQyxNQUFNLEdBQUd0RjtJQUN4QjtJQUNBLE1BQU11RixrQkFBa0JDLEtBQUssRUFBRUMsR0FBRyxFQUFFbkgsS0FBSyxFQUFFaUYsWUFBWSxFQUFFQyxLQUFLLEVBQUVrQyxNQUFNLEVBQUU7UUFDcEUsTUFBTTFGLE1BQU0sSUFBSSxDQUFDTyxNQUFNLENBQUNDLEdBQUcsQ0FBQ2xDO1FBQzVCLElBQUksQ0FBQzBCLE9BQU9BLEtBQUtzQyxhQUFhLE9BQU87WUFDakMsTUFBTSxJQUFJL0MsTUFBTSxDQUFDLHlEQUF5RCxDQUFDO1FBQy9FO1FBQ0FTLElBQUltQyxNQUFNLENBQUNyQyxJQUFJLENBQUM7WUFDWitCLE1BQU07WUFDTk8sTUFBTSxJQUFJN0QsT0FBT0MsV0FBVztZQUM1QmlGLFFBQVE7Z0JBQUUrQjtnQkFBT0M7Z0JBQUtFLE9BQU9ELFFBQVFDO1lBQU07UUFDL0M7UUFDQSxNQUFNLElBQUksQ0FBQ0MsYUFBYSxHQUFHNUYsS0FBS3dGLE9BQU87WUFBRUcsT0FBT0QsUUFBUUM7UUFBTTtRQUM5RCxPQUFPM0Y7SUFDWDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3RyYWNlcnMvYmFzZS5qcz8xZmZiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJhc2VDYWxsYmFja0hhbmRsZXIsIH0gZnJvbSBcIi4uL2NhbGxiYWNrcy9iYXNlLmpzXCI7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZnVuY3Rpb24gX2NvZXJjZVRvRGljdCh2YWx1ZSwgZGVmYXVsdEtleSkge1xuICAgIHJldHVybiB2YWx1ZSAmJiAhQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiYgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiXG4gICAgICAgID8gdmFsdWVcbiAgICAgICAgOiB7IFtkZWZhdWx0S2V5XTogdmFsdWUgfTtcbn1cbmZ1bmN0aW9uIHN0cmlwTm9uQWxwaGFudW1lcmljKGlucHV0KSB7XG4gICAgcmV0dXJuIGlucHV0LnJlcGxhY2UoL1stOi5dL2csIFwiXCIpO1xufVxuZnVuY3Rpb24gY29udmVydFRvRG90dGVkT3JkZXJGb3JtYXQoZXBvY2gsIHJ1bklkKSB7XG4gICAgcmV0dXJuIChzdHJpcE5vbkFscGhhbnVtZXJpYyhgJHtuZXcgRGF0ZShlcG9jaCkudG9JU09TdHJpbmcoKS5zbGljZSgwLCAtMSl9MDAwWmApICtcbiAgICAgICAgcnVuSWQpO1xufVxuZXhwb3J0IGNsYXNzIEJhc2VUcmFjZXIgZXh0ZW5kcyBCYXNlQ2FsbGJhY2tIYW5kbGVyIHtcbiAgICBjb25zdHJ1Y3RvcihfZmllbGRzKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJ1bk1hcFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogbmV3IE1hcCgpXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb3B5KCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgc3RyaW5naWZ5RXJyb3IoZXJyb3IpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWluc3RhbmNlb2Yvbm8taW5zdGFuY2VvZlxuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIGVycm9yLm1lc3NhZ2UgKyAoZXJyb3I/LnN0YWNrID8gYFxcblxcbiR7ZXJyb3Iuc3RhY2t9YCA6IFwiXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgZXJyb3IgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBlcnJvcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYCR7ZXJyb3J9YDtcbiAgICB9XG4gICAgX2FkZENoaWxkUnVuKHBhcmVudFJ1biwgY2hpbGRSdW4pIHtcbiAgICAgICAgcGFyZW50UnVuLmNoaWxkX3J1bnMucHVzaChjaGlsZFJ1bik7XG4gICAgfVxuICAgIGFzeW5jIF9zdGFydFRyYWNlKHJ1bikge1xuICAgICAgICBjb25zdCBjdXJyZW50RG90dGVkT3JkZXIgPSBjb252ZXJ0VG9Eb3R0ZWRPcmRlckZvcm1hdChydW4uc3RhcnRfdGltZSwgcnVuLmlkKTtcbiAgICAgICAgY29uc3Qgc3RvcmVkUnVuID0geyAuLi5ydW4gfTtcbiAgICAgICAgaWYgKHN0b3JlZFJ1bi5wYXJlbnRfcnVuX2lkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudFJ1biA9IHRoaXMucnVuTWFwLmdldChzdG9yZWRSdW4ucGFyZW50X3J1bl9pZCk7XG4gICAgICAgICAgICBpZiAocGFyZW50UnVuKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fYWRkQ2hpbGRSdW4ocGFyZW50UnVuLCBzdG9yZWRSdW4pO1xuICAgICAgICAgICAgICAgIHBhcmVudFJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIgPSBNYXRoLm1heChwYXJlbnRSdW4uY2hpbGRfZXhlY3V0aW9uX29yZGVyLCBzdG9yZWRSdW4uY2hpbGRfZXhlY3V0aW9uX29yZGVyKTtcbiAgICAgICAgICAgICAgICBzdG9yZWRSdW4udHJhY2VfaWQgPSBwYXJlbnRSdW4udHJhY2VfaWQ7XG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudFJ1bi5kb3R0ZWRfb3JkZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBzdG9yZWRSdW4uZG90dGVkX29yZGVyID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50UnVuLmRvdHRlZF9vcmRlcixcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnREb3R0ZWRPcmRlcixcbiAgICAgICAgICAgICAgICAgICAgXS5qb2luKFwiLlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgY2FuIGhhcHBlbiBuYXR1cmFsbHkgZm9yIGNhbGxiYWNrcyBhZGRlZCB3aXRoaW4gYSBydW5cbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5kZWJ1ZyhgUGFyZW50IHJ1biB3aXRoIFVVSUQgJHtzdG9yZWRSdW4ucGFyZW50X3J1bl9pZH0gaGFzIG5vIGRvdHRlZCBvcmRlci5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGNhbiBoYXBwZW4gbmF0dXJhbGx5IGZvciBjYWxsYmFja3MgYWRkZWQgd2l0aGluIGEgcnVuXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5kZWJ1ZyhcbiAgICAgICAgICAgICAgICAvLyAgIGBQYXJlbnQgcnVuIHdpdGggVVVJRCAke3N0b3JlZFJ1bi5wYXJlbnRfcnVuX2lkfSBub3QgZm91bmQuYFxuICAgICAgICAgICAgICAgIC8vICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdG9yZWRSdW4udHJhY2VfaWQgPSBzdG9yZWRSdW4uaWQ7XG4gICAgICAgICAgICBzdG9yZWRSdW4uZG90dGVkX29yZGVyID0gY3VycmVudERvdHRlZE9yZGVyO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucnVuTWFwLnNldChzdG9yZWRSdW4uaWQsIHN0b3JlZFJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMub25SdW5DcmVhdGU/LihzdG9yZWRSdW4pO1xuICAgIH1cbiAgICBhc3luYyBfZW5kVHJhY2UocnVuKSB7XG4gICAgICAgIGNvbnN0IHBhcmVudFJ1biA9IHJ1bi5wYXJlbnRfcnVuX2lkICE9PSB1bmRlZmluZWQgJiYgdGhpcy5ydW5NYXAuZ2V0KHJ1bi5wYXJlbnRfcnVuX2lkKTtcbiAgICAgICAgaWYgKHBhcmVudFJ1bikge1xuICAgICAgICAgICAgcGFyZW50UnVuLmNoaWxkX2V4ZWN1dGlvbl9vcmRlciA9IE1hdGgubWF4KHBhcmVudFJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIsIHJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0UnVuKHJ1bik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ydW5NYXAuZGVsZXRlKHJ1bi5pZCk7XG4gICAgICAgIGF3YWl0IHRoaXMub25SdW5VcGRhdGU/LihydW4pO1xuICAgIH1cbiAgICBfZ2V0RXhlY3V0aW9uT3JkZXIocGFyZW50UnVuSWQpIHtcbiAgICAgICAgY29uc3QgcGFyZW50UnVuID0gcGFyZW50UnVuSWQgIT09IHVuZGVmaW5lZCAmJiB0aGlzLnJ1bk1hcC5nZXQocGFyZW50UnVuSWQpO1xuICAgICAgICAvLyBJZiBhIHJ1biBoYXMgbm8gcGFyZW50IHRoZW4gZXhlY3V0aW9uIG9yZGVyIGlzIDFcbiAgICAgICAgaWYgKCFwYXJlbnRSdW4pIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJlbnRSdW4uY2hpbGRfZXhlY3V0aW9uX29yZGVyICsgMTtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlTExNU3RhcnQobGxtLCBwcm9tcHRzLCBydW5JZCwgcGFyZW50UnVuSWQsIGV4dHJhUGFyYW1zLCB0YWdzLCBtZXRhZGF0YSwgbmFtZSkge1xuICAgICAgICBjb25zdCBleGVjdXRpb25fb3JkZXIgPSB0aGlzLl9nZXRFeGVjdXRpb25PcmRlcihwYXJlbnRSdW5JZCk7XG4gICAgICAgIGNvbnN0IHN0YXJ0X3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBjb25zdCBmaW5hbEV4dHJhUGFyYW1zID0gbWV0YWRhdGFcbiAgICAgICAgICAgID8geyAuLi5leHRyYVBhcmFtcywgbWV0YWRhdGEgfVxuICAgICAgICAgICAgOiBleHRyYVBhcmFtcztcbiAgICAgICAgY29uc3QgcnVuID0ge1xuICAgICAgICAgICAgaWQ6IHJ1bklkLFxuICAgICAgICAgICAgbmFtZTogbmFtZSA/PyBsbG0uaWRbbGxtLmlkLmxlbmd0aCAtIDFdLFxuICAgICAgICAgICAgcGFyZW50X3J1bl9pZDogcGFyZW50UnVuSWQsXG4gICAgICAgICAgICBzdGFydF90aW1lLFxuICAgICAgICAgICAgc2VyaWFsaXplZDogbGxtLFxuICAgICAgICAgICAgZXZlbnRzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInN0YXJ0XCIsXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKHN0YXJ0X3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBpbnB1dHM6IHsgcHJvbXB0cyB9LFxuICAgICAgICAgICAgZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgY2hpbGRfcnVuczogW10sXG4gICAgICAgICAgICBjaGlsZF9leGVjdXRpb25fb3JkZXI6IGV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgIHJ1bl90eXBlOiBcImxsbVwiLFxuICAgICAgICAgICAgZXh0cmE6IGZpbmFsRXh0cmFQYXJhbXMgPz8ge30sXG4gICAgICAgICAgICB0YWdzOiB0YWdzIHx8IFtdLFxuICAgICAgICB9O1xuICAgICAgICBhd2FpdCB0aGlzLl9zdGFydFRyYWNlKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMub25MTE1TdGFydD8uKHJ1bik7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUNoYXRNb2RlbFN0YXJ0KGxsbSwgbWVzc2FnZXMsIHJ1bklkLCBwYXJlbnRSdW5JZCwgZXh0cmFQYXJhbXMsIHRhZ3MsIG1ldGFkYXRhLCBuYW1lKSB7XG4gICAgICAgIGNvbnN0IGV4ZWN1dGlvbl9vcmRlciA9IHRoaXMuX2dldEV4ZWN1dGlvbk9yZGVyKHBhcmVudFJ1bklkKTtcbiAgICAgICAgY29uc3Qgc3RhcnRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIGNvbnN0IGZpbmFsRXh0cmFQYXJhbXMgPSBtZXRhZGF0YVxuICAgICAgICAgICAgPyB7IC4uLmV4dHJhUGFyYW1zLCBtZXRhZGF0YSB9XG4gICAgICAgICAgICA6IGV4dHJhUGFyYW1zO1xuICAgICAgICBjb25zdCBydW4gPSB7XG4gICAgICAgICAgICBpZDogcnVuSWQsXG4gICAgICAgICAgICBuYW1lOiBuYW1lID8/IGxsbS5pZFtsbG0uaWQubGVuZ3RoIC0gMV0sXG4gICAgICAgICAgICBwYXJlbnRfcnVuX2lkOiBwYXJlbnRSdW5JZCxcbiAgICAgICAgICAgIHN0YXJ0X3RpbWUsXG4gICAgICAgICAgICBzZXJpYWxpemVkOiBsbG0sXG4gICAgICAgICAgICBldmVudHM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwic3RhcnRcIixcbiAgICAgICAgICAgICAgICAgICAgdGltZTogbmV3IERhdGUoc3RhcnRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGlucHV0czogeyBtZXNzYWdlcyB9LFxuICAgICAgICAgICAgZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgY2hpbGRfcnVuczogW10sXG4gICAgICAgICAgICBjaGlsZF9leGVjdXRpb25fb3JkZXI6IGV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgIHJ1bl90eXBlOiBcImxsbVwiLFxuICAgICAgICAgICAgZXh0cmE6IGZpbmFsRXh0cmFQYXJhbXMgPz8ge30sXG4gICAgICAgICAgICB0YWdzOiB0YWdzIHx8IFtdLFxuICAgICAgICB9O1xuICAgICAgICBhd2FpdCB0aGlzLl9zdGFydFRyYWNlKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMub25MTE1TdGFydD8uKHJ1bik7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUxMTUVuZChvdXRwdXQsIHJ1bklkKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMucnVuTWFwLmdldChydW5JZCk7XG4gICAgICAgIGlmICghcnVuIHx8IHJ1bj8ucnVuX3R5cGUgIT09IFwibGxtXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIExMTSBydW4gdG8gZW5kLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBydW4uZW5kX3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBydW4ub3V0cHV0cyA9IG91dHB1dDtcbiAgICAgICAgcnVuLmV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IFwiZW5kXCIsXG4gICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShydW4uZW5kX3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uTExNRW5kPy4ocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5fZW5kVHJhY2UocnVuKTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlTExNRXJyb3IoZXJyb3IsIHJ1bklkKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMucnVuTWFwLmdldChydW5JZCk7XG4gICAgICAgIGlmICghcnVuIHx8IHJ1bj8ucnVuX3R5cGUgIT09IFwibGxtXCIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIExMTSBydW4gdG8gZW5kLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBydW4uZW5kX3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBydW4uZXJyb3IgPSB0aGlzLnN0cmluZ2lmeUVycm9yKGVycm9yKTtcbiAgICAgICAgcnVuLmV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IFwiZXJyb3JcIixcbiAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKHJ1bi5lbmRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMub25MTE1FcnJvcj8uKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMuX2VuZFRyYWNlKHJ1bik7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUNoYWluU3RhcnQoY2hhaW4sIGlucHV0cywgcnVuSWQsIHBhcmVudFJ1bklkLCB0YWdzLCBtZXRhZGF0YSwgcnVuVHlwZSwgbmFtZSkge1xuICAgICAgICBjb25zdCBleGVjdXRpb25fb3JkZXIgPSB0aGlzLl9nZXRFeGVjdXRpb25PcmRlcihwYXJlbnRSdW5JZCk7XG4gICAgICAgIGNvbnN0IHN0YXJ0X3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBjb25zdCBydW4gPSB7XG4gICAgICAgICAgICBpZDogcnVuSWQsXG4gICAgICAgICAgICBuYW1lOiBuYW1lID8/IGNoYWluLmlkW2NoYWluLmlkLmxlbmd0aCAtIDFdLFxuICAgICAgICAgICAgcGFyZW50X3J1bl9pZDogcGFyZW50UnVuSWQsXG4gICAgICAgICAgICBzdGFydF90aW1lLFxuICAgICAgICAgICAgc2VyaWFsaXplZDogY2hhaW4sXG4gICAgICAgICAgICBldmVudHM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwic3RhcnRcIixcbiAgICAgICAgICAgICAgICAgICAgdGltZTogbmV3IERhdGUoc3RhcnRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGlucHV0cyxcbiAgICAgICAgICAgIGV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgIGNoaWxkX2V4ZWN1dGlvbl9vcmRlcjogZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgcnVuX3R5cGU6IHJ1blR5cGUgPz8gXCJjaGFpblwiLFxuICAgICAgICAgICAgY2hpbGRfcnVuczogW10sXG4gICAgICAgICAgICBleHRyYTogbWV0YWRhdGEgPyB7IG1ldGFkYXRhIH0gOiB7fSxcbiAgICAgICAgICAgIHRhZ3M6IHRhZ3MgfHwgW10sXG4gICAgICAgIH07XG4gICAgICAgIGF3YWl0IHRoaXMuX3N0YXJ0VHJhY2UocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5vbkNoYWluU3RhcnQ/LihydW4pO1xuICAgICAgICByZXR1cm4gcnVuO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVDaGFpbkVuZChvdXRwdXRzLCBydW5JZCwgX3BhcmVudFJ1bklkLCBfdGFncywga3dhcmdzKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMucnVuTWFwLmdldChydW5JZCk7XG4gICAgICAgIGlmICghcnVuKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBjaGFpbiBydW4gdG8gZW5kLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBydW4uZW5kX3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBydW4ub3V0cHV0cyA9IF9jb2VyY2VUb0RpY3Qob3V0cHV0cywgXCJvdXRwdXRcIik7XG4gICAgICAgIHJ1bi5ldmVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBcImVuZFwiLFxuICAgICAgICAgICAgdGltZTogbmV3IERhdGUocnVuLmVuZF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGt3YXJncz8uaW5wdXRzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJ1bi5pbnB1dHMgPSBfY29lcmNlVG9EaWN0KGt3YXJncy5pbnB1dHMsIFwiaW5wdXRcIik7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy5vbkNoYWluRW5kPy4ocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5fZW5kVHJhY2UocnVuKTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlQ2hhaW5FcnJvcihlcnJvciwgcnVuSWQsIF9wYXJlbnRSdW5JZCwgX3RhZ3MsIGt3YXJncykge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpO1xuICAgICAgICBpZiAoIXJ1bikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gY2hhaW4gcnVuIHRvIGVuZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcnVuLmVuZF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcnVuLmVycm9yID0gdGhpcy5zdHJpbmdpZnlFcnJvcihlcnJvcik7XG4gICAgICAgIHJ1bi5ldmVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBcImVycm9yXCIsXG4gICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShydW4uZW5kX3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoa3dhcmdzPy5pbnB1dHMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcnVuLmlucHV0cyA9IF9jb2VyY2VUb0RpY3Qoa3dhcmdzLmlucHV0cywgXCJpbnB1dFwiKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLm9uQ2hhaW5FcnJvcj8uKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMuX2VuZFRyYWNlKHJ1bik7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZVRvb2xTdGFydCh0b29sLCBpbnB1dCwgcnVuSWQsIHBhcmVudFJ1bklkLCB0YWdzLCBtZXRhZGF0YSwgbmFtZSkge1xuICAgICAgICBjb25zdCBleGVjdXRpb25fb3JkZXIgPSB0aGlzLl9nZXRFeGVjdXRpb25PcmRlcihwYXJlbnRSdW5JZCk7XG4gICAgICAgIGNvbnN0IHN0YXJ0X3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICBjb25zdCBydW4gPSB7XG4gICAgICAgICAgICBpZDogcnVuSWQsXG4gICAgICAgICAgICBuYW1lOiBuYW1lID8/IHRvb2wuaWRbdG9vbC5pZC5sZW5ndGggLSAxXSxcbiAgICAgICAgICAgIHBhcmVudF9ydW5faWQ6IHBhcmVudFJ1bklkLFxuICAgICAgICAgICAgc3RhcnRfdGltZSxcbiAgICAgICAgICAgIHNlcmlhbGl6ZWQ6IHRvb2wsXG4gICAgICAgICAgICBldmVudHM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwic3RhcnRcIixcbiAgICAgICAgICAgICAgICAgICAgdGltZTogbmV3IERhdGUoc3RhcnRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGlucHV0czogeyBpbnB1dCB9LFxuICAgICAgICAgICAgZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgY2hpbGRfZXhlY3V0aW9uX29yZGVyOiBleGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICBydW5fdHlwZTogXCJ0b29sXCIsXG4gICAgICAgICAgICBjaGlsZF9ydW5zOiBbXSxcbiAgICAgICAgICAgIGV4dHJhOiBtZXRhZGF0YSA/IHsgbWV0YWRhdGEgfSA6IHt9LFxuICAgICAgICAgICAgdGFnczogdGFncyB8fCBbXSxcbiAgICAgICAgfTtcbiAgICAgICAgYXdhaXQgdGhpcy5fc3RhcnRUcmFjZShydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uVG9vbFN0YXJ0Py4ocnVuKTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlVG9vbEVuZChvdXRwdXQsIHJ1bklkKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMucnVuTWFwLmdldChydW5JZCk7XG4gICAgICAgIGlmICghcnVuIHx8IHJ1bj8ucnVuX3R5cGUgIT09IFwidG9vbFwiKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyB0b29sIHJ1biB0byBlbmRcIik7XG4gICAgICAgIH1cbiAgICAgICAgcnVuLmVuZF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcnVuLm91dHB1dHMgPSB7IG91dHB1dCB9O1xuICAgICAgICBydW4uZXZlbnRzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogXCJlbmRcIixcbiAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKHJ1bi5lbmRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMub25Ub29sRW5kPy4ocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5fZW5kVHJhY2UocnVuKTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlVG9vbEVycm9yKGVycm9yLCBydW5JZCkge1xuICAgICAgICBjb25zdCBydW4gPSB0aGlzLnJ1bk1hcC5nZXQocnVuSWQpO1xuICAgICAgICBpZiAoIXJ1biB8fCBydW4/LnJ1bl90eXBlICE9PSBcInRvb2xcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gdG9vbCBydW4gdG8gZW5kXCIpO1xuICAgICAgICB9XG4gICAgICAgIHJ1bi5lbmRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIHJ1bi5lcnJvciA9IHRoaXMuc3RyaW5naWZ5RXJyb3IoZXJyb3IpO1xuICAgICAgICBydW4uZXZlbnRzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogXCJlcnJvclwiLFxuICAgICAgICAgICAgdGltZTogbmV3IERhdGUocnVuLmVuZF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy5vblRvb2xFcnJvcj8uKHJ1bik7XG4gICAgICAgIGF3YWl0IHRoaXMuX2VuZFRyYWNlKHJ1bik7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUFnZW50QWN0aW9uKGFjdGlvbiwgcnVuSWQpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4gfHwgcnVuPy5ydW5fdHlwZSAhPT0gXCJjaGFpblwiKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYWdlbnRSdW4gPSBydW47XG4gICAgICAgIGFnZW50UnVuLmFjdGlvbnMgPSBhZ2VudFJ1bi5hY3Rpb25zIHx8IFtdO1xuICAgICAgICBhZ2VudFJ1bi5hY3Rpb25zLnB1c2goYWN0aW9uKTtcbiAgICAgICAgYWdlbnRSdW4uZXZlbnRzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogXCJhZ2VudF9hY3Rpb25cIixcbiAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIGt3YXJnczogeyBhY3Rpb24gfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMub25BZ2VudEFjdGlvbj8uKHJ1bik7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUFnZW50RW5kKGFjdGlvbiwgcnVuSWQpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4gfHwgcnVuPy5ydW5fdHlwZSAhPT0gXCJjaGFpblwiKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcnVuLmV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IFwiYWdlbnRfZW5kXCIsXG4gICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICBrd2FyZ3M6IHsgYWN0aW9uIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uQWdlbnRFbmQ/LihydW4pO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVSZXRyaWV2ZXJTdGFydChyZXRyaWV2ZXIsIHF1ZXJ5LCBydW5JZCwgcGFyZW50UnVuSWQsIHRhZ3MsIG1ldGFkYXRhLCBuYW1lKSB7XG4gICAgICAgIGNvbnN0IGV4ZWN1dGlvbl9vcmRlciA9IHRoaXMuX2dldEV4ZWN1dGlvbk9yZGVyKHBhcmVudFJ1bklkKTtcbiAgICAgICAgY29uc3Qgc3RhcnRfdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIGNvbnN0IHJ1biA9IHtcbiAgICAgICAgICAgIGlkOiBydW5JZCxcbiAgICAgICAgICAgIG5hbWU6IG5hbWUgPz8gcmV0cmlldmVyLmlkW3JldHJpZXZlci5pZC5sZW5ndGggLSAxXSxcbiAgICAgICAgICAgIHBhcmVudF9ydW5faWQ6IHBhcmVudFJ1bklkLFxuICAgICAgICAgICAgc3RhcnRfdGltZSxcbiAgICAgICAgICAgIHNlcmlhbGl6ZWQ6IHJldHJpZXZlcixcbiAgICAgICAgICAgIGV2ZW50czogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJzdGFydFwiLFxuICAgICAgICAgICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShzdGFydF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgaW5wdXRzOiB7IHF1ZXJ5IH0sXG4gICAgICAgICAgICBleGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICBjaGlsZF9leGVjdXRpb25fb3JkZXI6IGV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgIHJ1bl90eXBlOiBcInJldHJpZXZlclwiLFxuICAgICAgICAgICAgY2hpbGRfcnVuczogW10sXG4gICAgICAgICAgICBleHRyYTogbWV0YWRhdGEgPyB7IG1ldGFkYXRhIH0gOiB7fSxcbiAgICAgICAgICAgIHRhZ3M6IHRhZ3MgfHwgW10sXG4gICAgICAgIH07XG4gICAgICAgIGF3YWl0IHRoaXMuX3N0YXJ0VHJhY2UocnVuKTtcbiAgICAgICAgYXdhaXQgdGhpcy5vblJldHJpZXZlclN0YXJ0Py4ocnVuKTtcbiAgICAgICAgcmV0dXJuIHJ1bjtcbiAgICB9XG4gICAgYXN5bmMgaGFuZGxlUmV0cmlldmVyRW5kKGRvY3VtZW50cywgcnVuSWQpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4gfHwgcnVuPy5ydW5fdHlwZSAhPT0gXCJyZXRyaWV2ZXJcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gcmV0cmlldmVyIHJ1biB0byBlbmRcIik7XG4gICAgICAgIH1cbiAgICAgICAgcnVuLmVuZF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcnVuLm91dHB1dHMgPSB7IGRvY3VtZW50cyB9O1xuICAgICAgICBydW4uZXZlbnRzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogXCJlbmRcIixcbiAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKHJ1bi5lbmRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMub25SZXRyaWV2ZXJFbmQ/LihydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLl9lbmRUcmFjZShydW4pO1xuICAgICAgICByZXR1cm4gcnVuO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVSZXRyaWV2ZXJFcnJvcihlcnJvciwgcnVuSWQpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4gfHwgcnVuPy5ydW5fdHlwZSAhPT0gXCJyZXRyaWV2ZXJcIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gcmV0cmlldmVyIHJ1biB0byBlbmRcIik7XG4gICAgICAgIH1cbiAgICAgICAgcnVuLmVuZF90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcnVuLmVycm9yID0gdGhpcy5zdHJpbmdpZnlFcnJvcihlcnJvcik7XG4gICAgICAgIHJ1bi5ldmVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBcImVycm9yXCIsXG4gICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZShydW4uZW5kX3RpbWUpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uUmV0cmlldmVyRXJyb3I/LihydW4pO1xuICAgICAgICBhd2FpdCB0aGlzLl9lbmRUcmFjZShydW4pO1xuICAgICAgICByZXR1cm4gcnVuO1xuICAgIH1cbiAgICBhc3luYyBoYW5kbGVUZXh0KHRleHQsIHJ1bklkKSB7XG4gICAgICAgIGNvbnN0IHJ1biA9IHRoaXMucnVuTWFwLmdldChydW5JZCk7XG4gICAgICAgIGlmICghcnVuIHx8IHJ1bj8ucnVuX3R5cGUgIT09IFwiY2hhaW5cIikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJ1bi5ldmVudHMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBcInRleHRcIixcbiAgICAgICAgICAgIHRpbWU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIGt3YXJnczogeyB0ZXh0IH0sXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCB0aGlzLm9uVGV4dD8uKHJ1bik7XG4gICAgfVxuICAgIGFzeW5jIGhhbmRsZUxMTU5ld1Rva2VuKHRva2VuLCBpZHgsIHJ1bklkLCBfcGFyZW50UnVuSWQsIF90YWdzLCBmaWVsZHMpIHtcbiAgICAgICAgY29uc3QgcnVuID0gdGhpcy5ydW5NYXAuZ2V0KHJ1bklkKTtcbiAgICAgICAgaWYgKCFydW4gfHwgcnVuPy5ydW5fdHlwZSAhPT0gXCJsbG1cIikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIFwicnVuSWRcIiBwcm92aWRlZCB0byBcImhhbmRsZUxMTU5ld1Rva2VuXCIgY2FsbGJhY2suYCk7XG4gICAgICAgIH1cbiAgICAgICAgcnVuLmV2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IFwibmV3X3Rva2VuXCIsXG4gICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICBrd2FyZ3M6IHsgdG9rZW4sIGlkeCwgY2h1bms6IGZpZWxkcz8uY2h1bmsgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGF3YWl0IHRoaXMub25MTE1OZXdUb2tlbj8uKHJ1biwgdG9rZW4sIHsgY2h1bms6IGZpZWxkcz8uY2h1bmsgfSk7XG4gICAgICAgIHJldHVybiBydW47XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIkJhc2VDYWxsYmFja0hhbmRsZXIiLCJfY29lcmNlVG9EaWN0IiwidmFsdWUiLCJkZWZhdWx0S2V5IiwiQXJyYXkiLCJpc0FycmF5Iiwic3RyaXBOb25BbHBoYW51bWVyaWMiLCJpbnB1dCIsInJlcGxhY2UiLCJjb252ZXJ0VG9Eb3R0ZWRPcmRlckZvcm1hdCIsImVwb2NoIiwicnVuSWQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJzbGljZSIsIkJhc2VUcmFjZXIiLCJjb25zdHJ1Y3RvciIsIl9maWVsZHMiLCJhcmd1bWVudHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsIk1hcCIsImNvcHkiLCJzdHJpbmdpZnlFcnJvciIsImVycm9yIiwiRXJyb3IiLCJtZXNzYWdlIiwic3RhY2siLCJfYWRkQ2hpbGRSdW4iLCJwYXJlbnRSdW4iLCJjaGlsZFJ1biIsImNoaWxkX3J1bnMiLCJwdXNoIiwiX3N0YXJ0VHJhY2UiLCJydW4iLCJjdXJyZW50RG90dGVkT3JkZXIiLCJzdGFydF90aW1lIiwiaWQiLCJzdG9yZWRSdW4iLCJwYXJlbnRfcnVuX2lkIiwidW5kZWZpbmVkIiwicnVuTWFwIiwiZ2V0IiwiY2hpbGRfZXhlY3V0aW9uX29yZGVyIiwiTWF0aCIsIm1heCIsInRyYWNlX2lkIiwiZG90dGVkX29yZGVyIiwiam9pbiIsInNldCIsIm9uUnVuQ3JlYXRlIiwiX2VuZFRyYWNlIiwicGVyc2lzdFJ1biIsImRlbGV0ZSIsIm9uUnVuVXBkYXRlIiwiX2dldEV4ZWN1dGlvbk9yZGVyIiwicGFyZW50UnVuSWQiLCJoYW5kbGVMTE1TdGFydCIsImxsbSIsInByb21wdHMiLCJleHRyYVBhcmFtcyIsInRhZ3MiLCJtZXRhZGF0YSIsIm5hbWUiLCJleGVjdXRpb25fb3JkZXIiLCJub3ciLCJmaW5hbEV4dHJhUGFyYW1zIiwibGVuZ3RoIiwic2VyaWFsaXplZCIsImV2ZW50cyIsInRpbWUiLCJpbnB1dHMiLCJydW5fdHlwZSIsImV4dHJhIiwib25MTE1TdGFydCIsImhhbmRsZUNoYXRNb2RlbFN0YXJ0IiwibWVzc2FnZXMiLCJoYW5kbGVMTE1FbmQiLCJvdXRwdXQiLCJlbmRfdGltZSIsIm91dHB1dHMiLCJvbkxMTUVuZCIsImhhbmRsZUxMTUVycm9yIiwib25MTE1FcnJvciIsImhhbmRsZUNoYWluU3RhcnQiLCJjaGFpbiIsInJ1blR5cGUiLCJvbkNoYWluU3RhcnQiLCJoYW5kbGVDaGFpbkVuZCIsIl9wYXJlbnRSdW5JZCIsIl90YWdzIiwia3dhcmdzIiwib25DaGFpbkVuZCIsImhhbmRsZUNoYWluRXJyb3IiLCJvbkNoYWluRXJyb3IiLCJoYW5kbGVUb29sU3RhcnQiLCJ0b29sIiwib25Ub29sU3RhcnQiLCJoYW5kbGVUb29sRW5kIiwib25Ub29sRW5kIiwiaGFuZGxlVG9vbEVycm9yIiwib25Ub29sRXJyb3IiLCJoYW5kbGVBZ2VudEFjdGlvbiIsImFjdGlvbiIsImFnZW50UnVuIiwiYWN0aW9ucyIsIm9uQWdlbnRBY3Rpb24iLCJoYW5kbGVBZ2VudEVuZCIsIm9uQWdlbnRFbmQiLCJoYW5kbGVSZXRyaWV2ZXJTdGFydCIsInJldHJpZXZlciIsInF1ZXJ5Iiwib25SZXRyaWV2ZXJTdGFydCIsImhhbmRsZVJldHJpZXZlckVuZCIsImRvY3VtZW50cyIsIm9uUmV0cmlldmVyRW5kIiwiaGFuZGxlUmV0cmlldmVyRXJyb3IiLCJvblJldHJpZXZlckVycm9yIiwiaGFuZGxlVGV4dCIsInRleHQiLCJvblRleHQiLCJoYW5kbGVMTE1OZXdUb2tlbiIsInRva2VuIiwiaWR4IiwiZmllbGRzIiwiY2h1bmsiLCJvbkxMTU5ld1Rva2VuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tracers/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tracers/console.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/console.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ConsoleCallbackHandler: () => (/* binding */ ConsoleCallbackHandler)\n/* harmony export */ });\n/* harmony import */ var ansi_styles__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ansi-styles */ \"(rsc)/./node_modules/@langchain/core/node_modules/ansi-styles/index.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/base.js\");\n\n\nfunction wrap(style, text) {\n    return `${style.open}${text}${style.close}`;\n}\nfunction tryJsonStringify(obj, fallback) {\n    try {\n        return JSON.stringify(obj, null, 2);\n    } catch (err) {\n        return fallback;\n    }\n}\nfunction elapsed(run) {\n    if (!run.end_time) return \"\";\n    const elapsed = run.end_time - run.start_time;\n    if (elapsed < 1000) {\n        return `${elapsed}ms`;\n    }\n    return `${(elapsed / 1000).toFixed(2)}s`;\n}\nconst { color } = ansi_styles__WEBPACK_IMPORTED_MODULE_0__;\n/**\n * A tracer that logs all events to the console. It extends from the\n * `BaseTracer` class and overrides its methods to provide custom logging\n * functionality.\n * @example\n * ```typescript\n *\n * const llm = new ChatAnthropic({\n *   temperature: 0,\n *   tags: [\"example\", \"callbacks\", \"constructor\"],\n *   callbacks: [new ConsoleCallbackHandler()],\n * });\n *\n * ```\n */ class ConsoleCallbackHandler extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseTracer {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"console_callback_handler\"\n        });\n    }\n    /**\n     * Method used to persist the run. In this case, it simply returns a\n     * resolved promise as there's no persistence logic.\n     * @param _run The run to persist.\n     * @returns A resolved promise.\n     */ persistRun(_run) {\n        return Promise.resolve();\n    }\n    // utility methods\n    /**\n     * Method used to get all the parent runs of a given run.\n     * @param run The run whose parents are to be retrieved.\n     * @returns An array of parent runs.\n     */ getParents(run) {\n        const parents = [];\n        let currentRun = run;\n        while(currentRun.parent_run_id){\n            const parent = this.runMap.get(currentRun.parent_run_id);\n            if (parent) {\n                parents.push(parent);\n                currentRun = parent;\n            } else {\n                break;\n            }\n        }\n        return parents;\n    }\n    /**\n     * Method used to get a string representation of the run's lineage, which\n     * is used in logging.\n     * @param run The run whose lineage is to be retrieved.\n     * @returns A string representation of the run's lineage.\n     */ getBreadcrumbs(run) {\n        const parents = this.getParents(run).reverse();\n        const string = [\n            ...parents,\n            run\n        ].map((parent, i, arr)=>{\n            const name = `${parent.execution_order}:${parent.run_type}:${parent.name}`;\n            return i === arr.length - 1 ? wrap(ansi_styles__WEBPACK_IMPORTED_MODULE_0__.bold, name) : name;\n        }).join(\" > \");\n        return wrap(color.grey, string);\n    }\n    // logging methods\n    /**\n     * Method used to log the start of a chain run.\n     * @param run The chain run that has started.\n     * @returns void\n     */ onChainStart(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.green, \"[chain/start]\")} [${crumbs}] Entering Chain run with input: ${tryJsonStringify(run.inputs, \"[inputs]\")}`);\n    }\n    /**\n     * Method used to log the end of a chain run.\n     * @param run The chain run that has ended.\n     * @returns void\n     */ onChainEnd(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.cyan, \"[chain/end]\")} [${crumbs}] [${elapsed(run)}] Exiting Chain run with output: ${tryJsonStringify(run.outputs, \"[outputs]\")}`);\n    }\n    /**\n     * Method used to log any errors of a chain run.\n     * @param run The chain run that has errored.\n     * @returns void\n     */ onChainError(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.red, \"[chain/error]\")} [${crumbs}] [${elapsed(run)}] Chain run errored with error: ${tryJsonStringify(run.error, \"[error]\")}`);\n    }\n    /**\n     * Method used to log the start of an LLM run.\n     * @param run The LLM run that has started.\n     * @returns void\n     */ onLLMStart(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        const inputs = \"prompts\" in run.inputs ? {\n            prompts: run.inputs.prompts.map((p)=>p.trim())\n        } : run.inputs;\n        console.log(`${wrap(color.green, \"[llm/start]\")} [${crumbs}] Entering LLM run with input: ${tryJsonStringify(inputs, \"[inputs]\")}`);\n    }\n    /**\n     * Method used to log the end of an LLM run.\n     * @param run The LLM run that has ended.\n     * @returns void\n     */ onLLMEnd(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.cyan, \"[llm/end]\")} [${crumbs}] [${elapsed(run)}] Exiting LLM run with output: ${tryJsonStringify(run.outputs, \"[response]\")}`);\n    }\n    /**\n     * Method used to log any errors of an LLM run.\n     * @param run The LLM run that has errored.\n     * @returns void\n     */ onLLMError(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.red, \"[llm/error]\")} [${crumbs}] [${elapsed(run)}] LLM run errored with error: ${tryJsonStringify(run.error, \"[error]\")}`);\n    }\n    /**\n     * Method used to log the start of a tool run.\n     * @param run The tool run that has started.\n     * @returns void\n     */ onToolStart(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.green, \"[tool/start]\")} [${crumbs}] Entering Tool run with input: \"${run.inputs.input?.trim()}\"`);\n    }\n    /**\n     * Method used to log the end of a tool run.\n     * @param run The tool run that has ended.\n     * @returns void\n     */ onToolEnd(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.cyan, \"[tool/end]\")} [${crumbs}] [${elapsed(run)}] Exiting Tool run with output: \"${run.outputs?.output?.trim()}\"`);\n    }\n    /**\n     * Method used to log any errors of a tool run.\n     * @param run The tool run that has errored.\n     * @returns void\n     */ onToolError(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.red, \"[tool/error]\")} [${crumbs}] [${elapsed(run)}] Tool run errored with error: ${tryJsonStringify(run.error, \"[error]\")}`);\n    }\n    /**\n     * Method used to log the start of a retriever run.\n     * @param run The retriever run that has started.\n     * @returns void\n     */ onRetrieverStart(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.green, \"[retriever/start]\")} [${crumbs}] Entering Retriever run with input: ${tryJsonStringify(run.inputs, \"[inputs]\")}`);\n    }\n    /**\n     * Method used to log the end of a retriever run.\n     * @param run The retriever run that has ended.\n     * @returns void\n     */ onRetrieverEnd(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.cyan, \"[retriever/end]\")} [${crumbs}] [${elapsed(run)}] Exiting Retriever run with output: ${tryJsonStringify(run.outputs, \"[outputs]\")}`);\n    }\n    /**\n     * Method used to log any errors of a retriever run.\n     * @param run The retriever run that has errored.\n     * @returns void\n     */ onRetrieverError(run) {\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.red, \"[retriever/error]\")} [${crumbs}] [${elapsed(run)}] Retriever run errored with error: ${tryJsonStringify(run.error, \"[error]\")}`);\n    }\n    /**\n     * Method used to log the action selected by the agent.\n     * @param run The run in which the agent action occurred.\n     * @returns void\n     */ onAgentAction(run) {\n        const agentRun = run;\n        const crumbs = this.getBreadcrumbs(run);\n        console.log(`${wrap(color.blue, \"[agent/action]\")} [${crumbs}] Agent selected action: ${tryJsonStringify(agentRun.actions[agentRun.actions.length - 1], \"[action]\")}`);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9jb25zb2xlLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFpQztBQUNNO0FBQ3ZDLFNBQVNFLEtBQUtDLEtBQUssRUFBRUMsSUFBSTtJQUNyQixPQUFPLENBQUMsRUFBRUQsTUFBTUUsSUFBSSxDQUFDLEVBQUVELEtBQUssRUFBRUQsTUFBTUcsS0FBSyxDQUFDLENBQUM7QUFDL0M7QUFDQSxTQUFTQyxpQkFBaUJDLEdBQUcsRUFBRUMsUUFBUTtJQUNuQyxJQUFJO1FBQ0EsT0FBT0MsS0FBS0MsU0FBUyxDQUFDSCxLQUFLLE1BQU07SUFDckMsRUFDQSxPQUFPSSxLQUFLO1FBQ1IsT0FBT0g7SUFDWDtBQUNKO0FBQ0EsU0FBU0ksUUFBUUMsR0FBRztJQUNoQixJQUFJLENBQUNBLElBQUlDLFFBQVEsRUFDYixPQUFPO0lBQ1gsTUFBTUYsVUFBVUMsSUFBSUMsUUFBUSxHQUFHRCxJQUFJRSxVQUFVO0lBQzdDLElBQUlILFVBQVUsTUFBTTtRQUNoQixPQUFPLENBQUMsRUFBRUEsUUFBUSxFQUFFLENBQUM7SUFDekI7SUFDQSxPQUFPLENBQUMsRUFBRSxDQUFDQSxVQUFVLElBQUcsRUFBR0ksT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQzVDO0FBQ0EsTUFBTSxFQUFFQyxLQUFLLEVBQUUsR0FBR2xCLHdDQUFNQTtBQUN4Qjs7Ozs7Ozs7Ozs7Ozs7Q0FjQyxHQUNNLE1BQU1tQiwrQkFBK0JsQixnREFBVUE7SUFDbERtQixhQUFjO1FBQ1YsS0FBSyxJQUFJQztRQUNUQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtJQUNKO0lBQ0E7Ozs7O0tBS0MsR0FDREMsV0FBV0MsSUFBSSxFQUFFO1FBQ2IsT0FBT0MsUUFBUUMsT0FBTztJQUMxQjtJQUNBLGtCQUFrQjtJQUNsQjs7OztLQUlD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V2xFO1FBQ2pCLE1BQU13QyxTQUFTLElBQUksQ0FBQ2QsY0FBYyxDQUFDMUI7UUFDbkN5QyxRQUFRQyxHQUFHLENBQUMsQ0FBQyxFQUFFdEQsS0FBS2dCLE1BQU0rRCxJQUFJLEVBQUUsa0JBQWtCLEVBQUUsRUFBRTNCLE9BQU8seUJBQXlCLEVBQUUvQyxpQkFBaUJ5RSxTQUFTRSxPQUFPLENBQUNGLFNBQVNFLE9BQU8sQ0FBQ2pDLE1BQU0sR0FBRyxFQUFFLEVBQUUsWUFBWSxDQUFDO0lBQ3pLO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1mb3JtLWJ1aWxkZXItdHV0b3JpYWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9jb25zb2xlLmpzPzczYzgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHN0eWxlcyBmcm9tIFwiYW5zaS1zdHlsZXNcIjtcbmltcG9ydCB7IEJhc2VUcmFjZXIgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5mdW5jdGlvbiB3cmFwKHN0eWxlLCB0ZXh0KSB7XG4gICAgcmV0dXJuIGAke3N0eWxlLm9wZW59JHt0ZXh0fSR7c3R5bGUuY2xvc2V9YDtcbn1cbmZ1bmN0aW9uIHRyeUpzb25TdHJpbmdpZnkob2JqLCBmYWxsYmFjaykge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShvYmosIG51bGwsIDIpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHJldHVybiBmYWxsYmFjaztcbiAgICB9XG59XG5mdW5jdGlvbiBlbGFwc2VkKHJ1bikge1xuICAgIGlmICghcnVuLmVuZF90aW1lKVxuICAgICAgICByZXR1cm4gXCJcIjtcbiAgICBjb25zdCBlbGFwc2VkID0gcnVuLmVuZF90aW1lIC0gcnVuLnN0YXJ0X3RpbWU7XG4gICAgaWYgKGVsYXBzZWQgPCAxMDAwKSB7XG4gICAgICAgIHJldHVybiBgJHtlbGFwc2VkfW1zYDtcbiAgICB9XG4gICAgcmV0dXJuIGAkeyhlbGFwc2VkIC8gMTAwMCkudG9GaXhlZCgyKX1zYDtcbn1cbmNvbnN0IHsgY29sb3IgfSA9IHN0eWxlcztcbi8qKlxuICogQSB0cmFjZXIgdGhhdCBsb2dzIGFsbCBldmVudHMgdG8gdGhlIGNvbnNvbGUuIEl0IGV4dGVuZHMgZnJvbSB0aGVcbiAqIGBCYXNlVHJhY2VyYCBjbGFzcyBhbmQgb3ZlcnJpZGVzIGl0cyBtZXRob2RzIHRvIHByb3ZpZGUgY3VzdG9tIGxvZ2dpbmdcbiAqIGZ1bmN0aW9uYWxpdHkuXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICpcbiAqIGNvbnN0IGxsbSA9IG5ldyBDaGF0QW50aHJvcGljKHtcbiAqICAgdGVtcGVyYXR1cmU6IDAsXG4gKiAgIHRhZ3M6IFtcImV4YW1wbGVcIiwgXCJjYWxsYmFja3NcIiwgXCJjb25zdHJ1Y3RvclwiXSxcbiAqICAgY2FsbGJhY2tzOiBbbmV3IENvbnNvbGVDYWxsYmFja0hhbmRsZXIoKV0sXG4gKiB9KTtcbiAqXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIENvbnNvbGVDYWxsYmFja0hhbmRsZXIgZXh0ZW5kcyBCYXNlVHJhY2VyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJjb25zb2xlX2NhbGxiYWNrX2hhbmRsZXJcIlxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgdG8gcGVyc2lzdCB0aGUgcnVuLiBJbiB0aGlzIGNhc2UsIGl0IHNpbXBseSByZXR1cm5zIGFcbiAgICAgKiByZXNvbHZlZCBwcm9taXNlIGFzIHRoZXJlJ3Mgbm8gcGVyc2lzdGVuY2UgbG9naWMuXG4gICAgICogQHBhcmFtIF9ydW4gVGhlIHJ1biB0byBwZXJzaXN0LlxuICAgICAqIEByZXR1cm5zIEEgcmVzb2x2ZWQgcHJvbWlzZS5cbiAgICAgKi9cbiAgICBwZXJzaXN0UnVuKF9ydW4pIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICAvLyB1dGlsaXR5IG1ldGhvZHNcbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBnZXQgYWxsIHRoZSBwYXJlbnQgcnVucyBvZiBhIGdpdmVuIHJ1bi5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSBydW4gd2hvc2UgcGFyZW50cyBhcmUgdG8gYmUgcmV0cmlldmVkLlxuICAgICAqIEByZXR1cm5zIEFuIGFycmF5IG9mIHBhcmVudCBydW5zLlxuICAgICAqL1xuICAgIGdldFBhcmVudHMocnVuKSB7XG4gICAgICAgIGNvbnN0IHBhcmVudHMgPSBbXTtcbiAgICAgICAgbGV0IGN1cnJlbnRSdW4gPSBydW47XG4gICAgICAgIHdoaWxlIChjdXJyZW50UnVuLnBhcmVudF9ydW5faWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IHRoaXMucnVuTWFwLmdldChjdXJyZW50UnVuLnBhcmVudF9ydW5faWQpO1xuICAgICAgICAgICAgaWYgKHBhcmVudCkge1xuICAgICAgICAgICAgICAgIHBhcmVudHMucHVzaChwYXJlbnQpO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRSdW4gPSBwYXJlbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyZW50cztcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgdG8gZ2V0IGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBydW4ncyBsaW5lYWdlLCB3aGljaFxuICAgICAqIGlzIHVzZWQgaW4gbG9nZ2luZy5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSBydW4gd2hvc2UgbGluZWFnZSBpcyB0byBiZSByZXRyaWV2ZWQuXG4gICAgICogQHJldHVybnMgQSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIHJ1bidzIGxpbmVhZ2UuXG4gICAgICovXG4gICAgZ2V0QnJlYWRjcnVtYnMocnVuKSB7XG4gICAgICAgIGNvbnN0IHBhcmVudHMgPSB0aGlzLmdldFBhcmVudHMocnVuKS5yZXZlcnNlKCk7XG4gICAgICAgIGNvbnN0IHN0cmluZyA9IFsuLi5wYXJlbnRzLCBydW5dXG4gICAgICAgICAgICAubWFwKChwYXJlbnQsIGksIGFycikgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmFtZSA9IGAke3BhcmVudC5leGVjdXRpb25fb3JkZXJ9OiR7cGFyZW50LnJ1bl90eXBlfToke3BhcmVudC5uYW1lfWA7XG4gICAgICAgICAgICByZXR1cm4gaSA9PT0gYXJyLmxlbmd0aCAtIDEgPyB3cmFwKHN0eWxlcy5ib2xkLCBuYW1lKSA6IG5hbWU7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuam9pbihcIiA+IFwiKTtcbiAgICAgICAgcmV0dXJuIHdyYXAoY29sb3IuZ3JleSwgc3RyaW5nKTtcbiAgICB9XG4gICAgLy8gbG9nZ2luZyBtZXRob2RzXG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgdG8gbG9nIHRoZSBzdGFydCBvZiBhIGNoYWluIHJ1bi5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSBjaGFpbiBydW4gdGhhdCBoYXMgc3RhcnRlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25DaGFpblN0YXJ0KHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IuZ3JlZW4sIFwiW2NoYWluL3N0YXJ0XVwiKX0gWyR7Y3J1bWJzfV0gRW50ZXJpbmcgQ2hhaW4gcnVuIHdpdGggaW5wdXQ6ICR7dHJ5SnNvblN0cmluZ2lmeShydW4uaW5wdXRzLCBcIltpbnB1dHNdXCIpfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBsb2cgdGhlIGVuZCBvZiBhIGNoYWluIHJ1bi5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSBjaGFpbiBydW4gdGhhdCBoYXMgZW5kZWQuXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIG9uQ2hhaW5FbmQocnVuKSB7XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5jeWFuLCBcIltjaGFpbi9lbmRdXCIpfSBbJHtjcnVtYnN9XSBbJHtlbGFwc2VkKHJ1bil9XSBFeGl0aW5nIENoYWluIHJ1biB3aXRoIG91dHB1dDogJHt0cnlKc29uU3RyaW5naWZ5KHJ1bi5vdXRwdXRzLCBcIltvdXRwdXRzXVwiKX1gKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgdG8gbG9nIGFueSBlcnJvcnMgb2YgYSBjaGFpbiBydW4uXG4gICAgICogQHBhcmFtIHJ1biBUaGUgY2hhaW4gcnVuIHRoYXQgaGFzIGVycm9yZWQuXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIG9uQ2hhaW5FcnJvcihydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLnJlZCwgXCJbY2hhaW4vZXJyb3JdXCIpfSBbJHtjcnVtYnN9XSBbJHtlbGFwc2VkKHJ1bil9XSBDaGFpbiBydW4gZXJyb3JlZCB3aXRoIGVycm9yOiAke3RyeUpzb25TdHJpbmdpZnkocnVuLmVycm9yLCBcIltlcnJvcl1cIil9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGxvZyB0aGUgc3RhcnQgb2YgYW4gTExNIHJ1bi5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSBMTE0gcnVuIHRoYXQgaGFzIHN0YXJ0ZWQuXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIG9uTExNU3RhcnQocnVuKSB7XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc3QgaW5wdXRzID0gXCJwcm9tcHRzXCIgaW4gcnVuLmlucHV0c1xuICAgICAgICAgICAgPyB7IHByb21wdHM6IHJ1bi5pbnB1dHMucHJvbXB0cy5tYXAoKHApID0+IHAudHJpbSgpKSB9XG4gICAgICAgICAgICA6IHJ1bi5pbnB1dHM7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IuZ3JlZW4sIFwiW2xsbS9zdGFydF1cIil9IFske2NydW1ic31dIEVudGVyaW5nIExMTSBydW4gd2l0aCBpbnB1dDogJHt0cnlKc29uU3RyaW5naWZ5KGlucHV0cywgXCJbaW5wdXRzXVwiKX1gKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgdG8gbG9nIHRoZSBlbmQgb2YgYW4gTExNIHJ1bi5cbiAgICAgKiBAcGFyYW0gcnVuIFRoZSBMTE0gcnVuIHRoYXQgaGFzIGVuZGVkLlxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKi9cbiAgICBvbkxMTUVuZChydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLmN5YW4sIFwiW2xsbS9lbmRdXCIpfSBbJHtjcnVtYnN9XSBbJHtlbGFwc2VkKHJ1bil9XSBFeGl0aW5nIExMTSBydW4gd2l0aCBvdXRwdXQ6ICR7dHJ5SnNvblN0cmluZ2lmeShydW4ub3V0cHV0cywgXCJbcmVzcG9uc2VdXCIpfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBsb2cgYW55IGVycm9ycyBvZiBhbiBMTE0gcnVuLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIExMTSBydW4gdGhhdCBoYXMgZXJyb3JlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25MTE1FcnJvcihydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLnJlZCwgXCJbbGxtL2Vycm9yXVwiKX0gWyR7Y3J1bWJzfV0gWyR7ZWxhcHNlZChydW4pfV0gTExNIHJ1biBlcnJvcmVkIHdpdGggZXJyb3I6ICR7dHJ5SnNvblN0cmluZ2lmeShydW4uZXJyb3IsIFwiW2Vycm9yXVwiKX1gKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWV0aG9kIHVzZWQgdG8gbG9nIHRoZSBzdGFydCBvZiBhIHRvb2wgcnVuLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIHRvb2wgcnVuIHRoYXQgaGFzIHN0YXJ0ZWQuXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIG9uVG9vbFN0YXJ0KHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IuZ3JlZW4sIFwiW3Rvb2wvc3RhcnRdXCIpfSBbJHtjcnVtYnN9XSBFbnRlcmluZyBUb29sIHJ1biB3aXRoIGlucHV0OiBcIiR7cnVuLmlucHV0cy5pbnB1dD8udHJpbSgpfVwiYCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGxvZyB0aGUgZW5kIG9mIGEgdG9vbCBydW4uXG4gICAgICogQHBhcmFtIHJ1biBUaGUgdG9vbCBydW4gdGhhdCBoYXMgZW5kZWQuXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIG9uVG9vbEVuZChydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLmN5YW4sIFwiW3Rvb2wvZW5kXVwiKX0gWyR7Y3J1bWJzfV0gWyR7ZWxhcHNlZChydW4pfV0gRXhpdGluZyBUb29sIHJ1biB3aXRoIG91dHB1dDogXCIke3J1bi5vdXRwdXRzPy5vdXRwdXQ/LnRyaW0oKX1cImApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBsb2cgYW55IGVycm9ycyBvZiBhIHRvb2wgcnVuLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIHRvb2wgcnVuIHRoYXQgaGFzIGVycm9yZWQuXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIG9uVG9vbEVycm9yKHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IucmVkLCBcIlt0b29sL2Vycm9yXVwiKX0gWyR7Y3J1bWJzfV0gWyR7ZWxhcHNlZChydW4pfV0gVG9vbCBydW4gZXJyb3JlZCB3aXRoIGVycm9yOiAke3RyeUpzb25TdHJpbmdpZnkocnVuLmVycm9yLCBcIltlcnJvcl1cIil9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB1c2VkIHRvIGxvZyB0aGUgc3RhcnQgb2YgYSByZXRyaWV2ZXIgcnVuLlxuICAgICAqIEBwYXJhbSBydW4gVGhlIHJldHJpZXZlciBydW4gdGhhdCBoYXMgc3RhcnRlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25SZXRyaWV2ZXJTdGFydChydW4pIHtcbiAgICAgICAgY29uc3QgY3J1bWJzID0gdGhpcy5nZXRCcmVhZGNydW1icyhydW4pO1xuICAgICAgICBjb25zb2xlLmxvZyhgJHt3cmFwKGNvbG9yLmdyZWVuLCBcIltyZXRyaWV2ZXIvc3RhcnRdXCIpfSBbJHtjcnVtYnN9XSBFbnRlcmluZyBSZXRyaWV2ZXIgcnVuIHdpdGggaW5wdXQ6ICR7dHJ5SnNvblN0cmluZ2lmeShydW4uaW5wdXRzLCBcIltpbnB1dHNdXCIpfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBsb2cgdGhlIGVuZCBvZiBhIHJldHJpZXZlciBydW4uXG4gICAgICogQHBhcmFtIHJ1biBUaGUgcmV0cmlldmVyIHJ1biB0aGF0IGhhcyBlbmRlZC5cbiAgICAgKiBAcmV0dXJucyB2b2lkXG4gICAgICovXG4gICAgb25SZXRyaWV2ZXJFbmQocnVuKSB7XG4gICAgICAgIGNvbnN0IGNydW1icyA9IHRoaXMuZ2V0QnJlYWRjcnVtYnMocnVuKTtcbiAgICAgICAgY29uc29sZS5sb2coYCR7d3JhcChjb2xvci5jeWFuLCBcIltyZXRyaWV2ZXIvZW5kXVwiKX0gWyR7Y3J1bWJzfV0gWyR7ZWxhcHNlZChydW4pfV0gRXhpdGluZyBSZXRyaWV2ZXIgcnVuIHdpdGggb3V0cHV0OiAke3RyeUpzb25TdHJpbmdpZnkocnVuLm91dHB1dHMsIFwiW291dHB1dHNdXCIpfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBsb2cgYW55IGVycm9ycyBvZiBhIHJldHJpZXZlciBydW4uXG4gICAgICogQHBhcmFtIHJ1biBUaGUgcmV0cmlldmVyIHJ1biB0aGF0IGhhcyBlcnJvcmVkLlxuICAgICAqIEByZXR1cm5zIHZvaWRcbiAgICAgKi9cbiAgICBvblJldHJpZXZlckVycm9yKHJ1bikge1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IucmVkLCBcIltyZXRyaWV2ZXIvZXJyb3JdXCIpfSBbJHtjcnVtYnN9XSBbJHtlbGFwc2VkKHJ1bil9XSBSZXRyaWV2ZXIgcnVuIGVycm9yZWQgd2l0aCBlcnJvcjogJHt0cnlKc29uU3RyaW5naWZ5KHJ1bi5lcnJvciwgXCJbZXJyb3JdXCIpfWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXRob2QgdXNlZCB0byBsb2cgdGhlIGFjdGlvbiBzZWxlY3RlZCBieSB0aGUgYWdlbnQuXG4gICAgICogQHBhcmFtIHJ1biBUaGUgcnVuIGluIHdoaWNoIHRoZSBhZ2VudCBhY3Rpb24gb2NjdXJyZWQuXG4gICAgICogQHJldHVybnMgdm9pZFxuICAgICAqL1xuICAgIG9uQWdlbnRBY3Rpb24ocnVuKSB7XG4gICAgICAgIGNvbnN0IGFnZW50UnVuID0gcnVuO1xuICAgICAgICBjb25zdCBjcnVtYnMgPSB0aGlzLmdldEJyZWFkY3J1bWJzKHJ1bik7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke3dyYXAoY29sb3IuYmx1ZSwgXCJbYWdlbnQvYWN0aW9uXVwiKX0gWyR7Y3J1bWJzfV0gQWdlbnQgc2VsZWN0ZWQgYWN0aW9uOiAke3RyeUpzb25TdHJpbmdpZnkoYWdlbnRSdW4uYWN0aW9uc1thZ2VudFJ1bi5hY3Rpb25zLmxlbmd0aCAtIDFdLCBcIlthY3Rpb25dXCIpfWApO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJzdHlsZXMiLCJCYXNlVHJhY2VyIiwid3JhcCIsInN0eWxlIiwidGV4dCIsIm9wZW4iLCJjbG9zZSIsInRyeUpzb25TdHJpbmdpZnkiLCJvYmoiLCJmYWxsYmFjayIsIkpTT04iLCJzdHJpbmdpZnkiLCJlcnIiLCJlbGFwc2VkIiwicnVuIiwiZW5kX3RpbWUiLCJzdGFydF90aW1lIiwidG9GaXhlZCIsImNvbG9yIiwiQ29uc29sZUNhbGxiYWNrSGFuZGxlciIsImNvbnN0cnVjdG9yIiwiYXJndW1lbnRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsInBlcnNpc3RSdW4iLCJfcnVuIiwiUHJvbWlzZSIsInJlc29sdmUiLCJnZXRQYXJlbnRzIiwicGFyZW50cyIsImN1cnJlbnRSdW4iLCJwYXJlbnRfcnVuX2lkIiwicGFyZW50IiwicnVuTWFwIiwiZ2V0IiwicHVzaCIsImdldEJyZWFkY3J1bWJzIiwicmV2ZXJzZSIsInN0cmluZyIsIm1hcCIsImkiLCJhcnIiLCJuYW1lIiwiZXhlY3V0aW9uX29yZGVyIiwicnVuX3R5cGUiLCJsZW5ndGgiLCJib2xkIiwiam9pbiIsImdyZXkiLCJvbkNoYWluU3RhcnQiLCJjcnVtYnMiLCJjb25zb2xlIiwibG9nIiwiZ3JlZW4iLCJpbnB1dHMiLCJvbkNoYWluRW5kIiwiY3lhbiIsIm91dHB1dHMiLCJvbkNoYWluRXJyb3IiLCJyZWQiLCJlcnJvciIsIm9uTExNU3RhcnQiLCJwcm9tcHRzIiwicCIsInRyaW0iLCJvbkxMTUVuZCIsIm9uTExNRXJyb3IiLCJvblRvb2xTdGFydCIsImlucHV0Iiwib25Ub29sRW5kIiwib3V0cHV0Iiwib25Ub29sRXJyb3IiLCJvblJldHJpZXZlclN0YXJ0Iiwib25SZXRyaWV2ZXJFbmQiLCJvblJldHJpZXZlckVycm9yIiwib25BZ2VudEFjdGlvbiIsImFnZW50UnVuIiwiYmx1ZSIsImFjdGlvbnMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tracers/console.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tracers/initialize.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/initialize.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getTracingCallbackHandler: () => (/* binding */ getTracingCallbackHandler),\n/* harmony export */   getTracingV2CallbackHandler: () => (/* binding */ getTracingV2CallbackHandler)\n/* harmony export */ });\n/* harmony import */ var _tracer_langchain_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tracer_langchain.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/tracer_langchain.js\");\n/* harmony import */ var _tracer_langchain_v1_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./tracer_langchain_v1.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/tracer_langchain_v1.js\");\n\n\n/**\n * @deprecated Use the V2 handler instead.\n *\n * Function that returns an instance of `LangChainTracerV1`. If a session\n * is provided, it loads that session into the tracer; otherwise, it loads\n * a default session.\n * @param session Optional session to load into the tracer.\n * @returns An instance of `LangChainTracerV1`.\n */ async function getTracingCallbackHandler(session) {\n    const tracer = new _tracer_langchain_v1_js__WEBPACK_IMPORTED_MODULE_1__.LangChainTracerV1();\n    if (session) {\n        await tracer.loadSession(session);\n    } else {\n        await tracer.loadDefaultSession();\n    }\n    return tracer;\n}\n/**\n * Function that returns an instance of `LangChainTracer`. It does not\n * load any session data.\n * @returns An instance of `LangChainTracer`.\n */ async function getTracingV2CallbackHandler() {\n    return new _tracer_langchain_js__WEBPACK_IMPORTED_MODULE_0__.LangChainTracer();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9pbml0aWFsaXplLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBd0Q7QUFDSztBQUM3RDs7Ozs7Ozs7Q0FRQyxHQUNNLGVBQWVFLDBCQUEwQkMsT0FBTztJQUNuRCxNQUFNQyxTQUFTLElBQUlILHNFQUFpQkE7SUFDcEMsSUFBSUUsU0FBUztRQUNULE1BQU1DLE9BQU9DLFdBQVcsQ0FBQ0Y7SUFDN0IsT0FDSztRQUNELE1BQU1DLE9BQU9FLGtCQUFrQjtJQUNuQztJQUNBLE9BQU9GO0FBQ1g7QUFDQTs7OztDQUlDLEdBQ00sZUFBZUc7SUFDbEIsT0FBTyxJQUFJUCxpRUFBZUE7QUFDOUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1mb3JtLWJ1aWxkZXItdHV0b3JpYWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9pbml0aWFsaXplLmpzPzc3NjEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTGFuZ0NoYWluVHJhY2VyIH0gZnJvbSBcIi4vdHJhY2VyX2xhbmdjaGFpbi5qc1wiO1xuaW1wb3J0IHsgTGFuZ0NoYWluVHJhY2VyVjEgfSBmcm9tIFwiLi90cmFjZXJfbGFuZ2NoYWluX3YxLmpzXCI7XG4vKipcbiAqIEBkZXByZWNhdGVkIFVzZSB0aGUgVjIgaGFuZGxlciBpbnN0ZWFkLlxuICpcbiAqIEZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhbiBpbnN0YW5jZSBvZiBgTGFuZ0NoYWluVHJhY2VyVjFgLiBJZiBhIHNlc3Npb25cbiAqIGlzIHByb3ZpZGVkLCBpdCBsb2FkcyB0aGF0IHNlc3Npb24gaW50byB0aGUgdHJhY2VyOyBvdGhlcndpc2UsIGl0IGxvYWRzXG4gKiBhIGRlZmF1bHQgc2Vzc2lvbi5cbiAqIEBwYXJhbSBzZXNzaW9uIE9wdGlvbmFsIHNlc3Npb24gdG8gbG9hZCBpbnRvIHRoZSB0cmFjZXIuXG4gKiBAcmV0dXJucyBBbiBpbnN0YW5jZSBvZiBgTGFuZ0NoYWluVHJhY2VyVjFgLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VHJhY2luZ0NhbGxiYWNrSGFuZGxlcihzZXNzaW9uKSB7XG4gICAgY29uc3QgdHJhY2VyID0gbmV3IExhbmdDaGFpblRyYWNlclYxKCk7XG4gICAgaWYgKHNlc3Npb24pIHtcbiAgICAgICAgYXdhaXQgdHJhY2VyLmxvYWRTZXNzaW9uKHNlc3Npb24pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYXdhaXQgdHJhY2VyLmxvYWREZWZhdWx0U2Vzc2lvbigpO1xuICAgIH1cbiAgICByZXR1cm4gdHJhY2VyO1xufVxuLyoqXG4gKiBGdW5jdGlvbiB0aGF0IHJldHVybnMgYW4gaW5zdGFuY2Ugb2YgYExhbmdDaGFpblRyYWNlcmAuIEl0IGRvZXMgbm90XG4gKiBsb2FkIGFueSBzZXNzaW9uIGRhdGEuXG4gKiBAcmV0dXJucyBBbiBpbnN0YW5jZSBvZiBgTGFuZ0NoYWluVHJhY2VyYC5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFRyYWNpbmdWMkNhbGxiYWNrSGFuZGxlcigpIHtcbiAgICByZXR1cm4gbmV3IExhbmdDaGFpblRyYWNlcigpO1xufVxuIl0sIm5hbWVzIjpbIkxhbmdDaGFpblRyYWNlciIsIkxhbmdDaGFpblRyYWNlclYxIiwiZ2V0VHJhY2luZ0NhbGxiYWNrSGFuZGxlciIsInNlc3Npb24iLCJ0cmFjZXIiLCJsb2FkU2Vzc2lvbiIsImxvYWREZWZhdWx0U2Vzc2lvbiIsImdldFRyYWNpbmdWMkNhbGxiYWNrSGFuZGxlciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tracers/initialize.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tracers/log_stream.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/log_stream.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LogStreamCallbackHandler: () => (/* binding */ LogStreamCallbackHandler),\n/* harmony export */   RunLog: () => (/* binding */ RunLog),\n/* harmony export */   RunLogPatch: () => (/* binding */ RunLogPatch)\n/* harmony export */ });\n/* harmony import */ var _utils_fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/fast-json-patch/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/index.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/base.js\");\n/* harmony import */ var _utils_stream_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/stream.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/stream.js\");\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../messages/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/index.js\");\n\n\n\n\n/**\n * List of jsonpatch JSONPatchOperations, which describe how to create the run state\n * from an empty dict. This is the minimal representation of the log, designed to\n * be serialized as JSON and sent over the wire to reconstruct the log on the other\n * side. Reconstruction of the state can be done with any jsonpatch-compliant library,\n * see https://jsonpatch.com for more information.\n */ class RunLogPatch {\n    constructor(fields){\n        Object.defineProperty(this, \"ops\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.ops = fields.ops ?? [];\n    }\n    concat(other) {\n        const ops = this.ops.concat(other.ops);\n        const states = (0,_utils_fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__.applyPatch)({}, ops);\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunLog({\n            ops,\n            state: states[states.length - 1].newDocument\n        });\n    }\n}\nclass RunLog extends RunLogPatch {\n    constructor(fields){\n        super(fields);\n        Object.defineProperty(this, \"state\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.state = fields.state;\n    }\n    concat(other) {\n        const ops = this.ops.concat(other.ops);\n        const states = (0,_utils_fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__.applyPatch)(this.state, other.ops);\n        return new RunLog({\n            ops,\n            state: states[states.length - 1].newDocument\n        });\n    }\n    static fromRunLogPatch(patch) {\n        const states = (0,_utils_fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__.applyPatch)({}, patch.ops);\n        // eslint-disable-next-line @typescript-eslint/no-use-before-define\n        return new RunLog({\n            ops: patch.ops,\n            state: states[states.length - 1].newDocument\n        });\n    }\n}\n/**\n * Extract standardized inputs from a run.\n *\n * Standardizes the inputs based on the type of the runnable used.\n *\n * @param run - Run object\n * @param schemaFormat - The schema format to use.\n *\n * @returns Valid inputs are only dict. By conventions, inputs always represented\n * invocation using named arguments.\n * A null means that the input is not yet known!\n */ async function _getStandardizedInputs(run, schemaFormat) {\n    if (schemaFormat === \"original\") {\n        throw new Error(\"Do not assign inputs with original schema drop the key for now. \" + \"When inputs are added to streamLog they should be added with \" + \"standardized schema for streaming events.\");\n    }\n    const { inputs } = run;\n    if ([\n        \"retriever\",\n        \"llm\",\n        \"prompt\"\n    ].includes(run.run_type)) {\n        return inputs;\n    }\n    if (Object.keys(inputs).length === 1 && inputs?.input === \"\") {\n        return undefined;\n    }\n    // new style chains\n    // These nest an additional 'input' key inside the 'inputs' to make sure\n    // the input is always a dict. We need to unpack and user the inner value.\n    // We should try to fix this in Runnables and callbacks/tracers\n    // Runnables should be using a null type here not a placeholder\n    // dict.\n    return inputs.input;\n}\nasync function _getStandardizedOutputs(run, schemaFormat) {\n    const { outputs } = run;\n    if (schemaFormat === \"original\") {\n        // Return the old schema, without standardizing anything\n        return outputs;\n    }\n    if ([\n        \"retriever\",\n        \"llm\",\n        \"prompt\"\n    ].includes(run.run_type)) {\n        return outputs;\n    }\n    // TODO: Remove this hacky check\n    if (outputs !== undefined && Object.keys(outputs).length === 1 && outputs?.output !== undefined) {\n        return outputs.output;\n    }\n    return outputs;\n}\nfunction isChatGenerationChunk(x) {\n    return x !== undefined && x.message !== undefined;\n}\n/**\n * Class that extends the `BaseTracer` class from the\n * `langchain.callbacks.tracers.base` module. It represents a callback\n * handler that logs the execution of runs and emits `RunLog` instances to a\n * `RunLogStream`.\n */ class LogStreamCallbackHandler extends _base_js__WEBPACK_IMPORTED_MODULE_1__.BaseTracer {\n    constructor(fields){\n        super({\n            _awaitHandler: true,\n            ...fields\n        });\n        Object.defineProperty(this, \"autoClose\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"includeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"includeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeNames\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTypes\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"excludeTags\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"_schemaFormat\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"original\"\n        });\n        Object.defineProperty(this, \"rootId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"keyMapByRunId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"counterMapByRunName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {}\n        });\n        Object.defineProperty(this, \"transformStream\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"writer\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"receiveStream\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"log_stream_tracer\"\n        });\n        this.autoClose = fields?.autoClose ?? true;\n        this.includeNames = fields?.includeNames;\n        this.includeTypes = fields?.includeTypes;\n        this.includeTags = fields?.includeTags;\n        this.excludeNames = fields?.excludeNames;\n        this.excludeTypes = fields?.excludeTypes;\n        this.excludeTags = fields?.excludeTags;\n        this._schemaFormat = fields?._schemaFormat ?? this._schemaFormat;\n        this.transformStream = new TransformStream();\n        this.writer = this.transformStream.writable.getWriter();\n        this.receiveStream = _utils_stream_js__WEBPACK_IMPORTED_MODULE_2__.IterableReadableStream.fromReadableStream(this.transformStream.readable);\n    }\n    [Symbol.asyncIterator]() {\n        return this.receiveStream;\n    }\n    async persistRun(_run) {\n    // This is a legacy method only called once for an entire run tree\n    // and is therefore not useful here\n    }\n    _includeRun(run) {\n        if (run.id === this.rootId) {\n            return false;\n        }\n        const runTags = run.tags ?? [];\n        let include = this.includeNames === undefined && this.includeTags === undefined && this.includeTypes === undefined;\n        if (this.includeNames !== undefined) {\n            include = include || this.includeNames.includes(run.name);\n        }\n        if (this.includeTypes !== undefined) {\n            include = include || this.includeTypes.includes(run.run_type);\n        }\n        if (this.includeTags !== undefined) {\n            include = include || runTags.find((tag)=>this.includeTags?.includes(tag)) !== undefined;\n        }\n        if (this.excludeNames !== undefined) {\n            include = include && !this.excludeNames.includes(run.name);\n        }\n        if (this.excludeTypes !== undefined) {\n            include = include && !this.excludeTypes.includes(run.run_type);\n        }\n        if (this.excludeTags !== undefined) {\n            include = include && runTags.every((tag)=>!this.excludeTags?.includes(tag));\n        }\n        return include;\n    }\n    async *tapOutputIterable(runId, output) {\n        // Tap an output async iterator to stream its values to the log.\n        for await (const chunk of output){\n            // root run is handled in .streamLog()\n            if (runId !== this.rootId) {\n                // if we can't find the run silently ignore\n                // eg. because this run wasn't included in the log\n                const key = this.keyMapByRunId[runId];\n                if (key) {\n                    await this.writer.write(new RunLogPatch({\n                        ops: [\n                            {\n                                op: \"add\",\n                                path: `/logs/${key}/streamed_output/-`,\n                                value: chunk\n                            }\n                        ]\n                    }));\n                }\n            }\n            yield chunk;\n        }\n    }\n    async onRunCreate(run) {\n        if (this.rootId === undefined) {\n            this.rootId = run.id;\n            await this.writer.write(new RunLogPatch({\n                ops: [\n                    {\n                        op: \"replace\",\n                        path: \"\",\n                        value: {\n                            id: run.id,\n                            name: run.name,\n                            type: run.run_type,\n                            streamed_output: [],\n                            final_output: undefined,\n                            logs: {}\n                        }\n                    }\n                ]\n            }));\n        }\n        if (!this._includeRun(run)) {\n            return;\n        }\n        if (this.counterMapByRunName[run.name] === undefined) {\n            this.counterMapByRunName[run.name] = 0;\n        }\n        this.counterMapByRunName[run.name] += 1;\n        const count = this.counterMapByRunName[run.name];\n        this.keyMapByRunId[run.id] = count === 1 ? run.name : `${run.name}:${count}`;\n        const logEntry = {\n            id: run.id,\n            name: run.name,\n            type: run.run_type,\n            tags: run.tags ?? [],\n            metadata: run.extra?.metadata ?? {},\n            start_time: new Date(run.start_time).toISOString(),\n            streamed_output: [],\n            streamed_output_str: [],\n            final_output: undefined,\n            end_time: undefined\n        };\n        if (this._schemaFormat === \"streaming_events\") {\n            logEntry.inputs = await _getStandardizedInputs(run, this._schemaFormat);\n        }\n        await this.writer.write(new RunLogPatch({\n            ops: [\n                {\n                    op: \"add\",\n                    path: `/logs/${this.keyMapByRunId[run.id]}`,\n                    value: logEntry\n                }\n            ]\n        }));\n    }\n    async onRunUpdate(run) {\n        try {\n            const runName = this.keyMapByRunId[run.id];\n            if (runName === undefined) {\n                return;\n            }\n            const ops = [];\n            if (this._schemaFormat === \"streaming_events\") {\n                ops.push({\n                    op: \"replace\",\n                    path: `/logs/${runName}/inputs`,\n                    value: await _getStandardizedInputs(run, this._schemaFormat)\n                });\n            }\n            ops.push({\n                op: \"add\",\n                path: `/logs/${runName}/final_output`,\n                value: await _getStandardizedOutputs(run, this._schemaFormat)\n            });\n            if (run.end_time !== undefined) {\n                ops.push({\n                    op: \"add\",\n                    path: `/logs/${runName}/end_time`,\n                    value: new Date(run.end_time).toISOString()\n                });\n            }\n            const patch = new RunLogPatch({\n                ops\n            });\n            await this.writer.write(patch);\n        } finally{\n            if (run.id === this.rootId) {\n                const patch = new RunLogPatch({\n                    ops: [\n                        {\n                            op: \"replace\",\n                            path: \"/final_output\",\n                            value: await _getStandardizedOutputs(run, this._schemaFormat)\n                        }\n                    ]\n                });\n                await this.writer.write(patch);\n                if (this.autoClose) {\n                    await this.writer.close();\n                }\n            }\n        }\n    }\n    async onLLMNewToken(run, token, kwargs) {\n        const runName = this.keyMapByRunId[run.id];\n        if (runName === undefined) {\n            return;\n        }\n        // TODO: Remove hack\n        const isChatModel = run.inputs.messages !== undefined;\n        let streamedOutputValue;\n        if (isChatModel) {\n            if (isChatGenerationChunk(kwargs?.chunk)) {\n                streamedOutputValue = kwargs?.chunk;\n            } else {\n                streamedOutputValue = new _messages_index_js__WEBPACK_IMPORTED_MODULE_3__.AIMessageChunk(token);\n            }\n        } else {\n            streamedOutputValue = token;\n        }\n        const patch = new RunLogPatch({\n            ops: [\n                {\n                    op: \"add\",\n                    path: `/logs/${runName}/streamed_output_str/-`,\n                    value: token\n                },\n                {\n                    op: \"add\",\n                    path: `/logs/${runName}/streamed_output/-`,\n                    value: streamedOutputValue\n                }\n            ]\n        });\n        await this.writer.write(patch);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9sb2dfc3RyZWFtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBZ0U7QUFDekI7QUFDcUI7QUFDTjtBQUN0RDs7Ozs7O0NBTUMsR0FDTSxNQUFNSTtJQUNUQyxZQUFZQyxNQUFNLENBQUU7UUFDaEJDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsT0FBTztZQUMvQkMsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDQyxHQUFHLEdBQUdQLE9BQU9PLEdBQUcsSUFBSSxFQUFFO0lBQy9CO0lBQ0FDLE9BQU9DLEtBQUssRUFBRTtRQUNWLE1BQU1GLE1BQU0sSUFBSSxDQUFDQSxHQUFHLENBQUNDLE1BQU0sQ0FBQ0MsTUFBTUYsR0FBRztRQUNyQyxNQUFNRyxTQUFTaEIsMkVBQVVBLENBQUMsQ0FBQyxHQUFHYTtRQUM5QixtRUFBbUU7UUFDbkUsT0FBTyxJQUFJSSxPQUFPO1lBQ2RKO1lBQ0FLLE9BQU9GLE1BQU0sQ0FBQ0EsT0FBT0csTUFBTSxHQUFHLEVBQUUsQ0FBQ0MsV0FBVztRQUNoRDtJQUNKO0FBQ0o7QUFDTyxNQUFNSCxlQUFlYjtJQUN4QkMsWUFBWUMsTUFBTSxDQUFFO1FBQ2hCLEtBQUssQ0FBQ0E7UUFDTkMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxTQUFTO1lBQ2pDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNNLEtBQUssR0FBR1osT0FBT1ksS0FBSztJQUM3QjtJQUNBSixPQUFPQyxLQUFLLEVBQUU7UUFDVixNQUFNRixNQUFNLElBQUksQ0FBQ0EsR0FBRyxDQUFDQyxNQUFNLENBQUNDLE1BQU1GLEdBQUc7UUFDckMsTUFBTUcsU0FBU2hCLDJFQUFVQSxDQUFDLElBQUksQ0FBQ2tCLEtBQUssRUFBRUgsTUFBTUYs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QUNwQyxNQUFNTCxVQUFVLElBQUksQ0FBQ3BCLGFBQWEsQ0FBQ2xELElBQUlxQyxFQUFFLENBQUM7UUFDMUMsSUFBSWlDLFlBQVk5RCxXQUFXO1lBQ3ZCO1FBQ0o7UUFDQSxvQkFBb0I7UUFDcEIsTUFBTW9FLGNBQWM1RSxJQUFJRyxNQUFNLENBQUMwRSxRQUFRLEtBQUtyRTtRQUM1QyxJQUFJc0U7UUFDSixJQUFJRixhQUFhO1lBQ2IsSUFBSWhFLHNCQUFzQitELFFBQVEzQixRQUFRO2dCQUN0QzhCLHNCQUFzQkgsUUFBUTNCO1lBQ2xDLE9BQ0s7Z0JBQ0Q4QixzQkFBc0IsSUFBSW5HLDhEQUFjQSxDQUFDK0Y7WUFDN0M7UUFDSixPQUNLO1lBQ0RJLHNCQUFzQko7UUFDMUI7UUFDQSxNQUFNNUUsUUFBUSxJQUFJbEIsWUFBWTtZQUMxQlMsS0FBSztnQkFDRDtvQkFDSStELElBQUk7b0JBQ0pDLE1BQU0sQ0FBQyxNQUFNLEVBQUVpQixRQUFRLHNCQUFzQixDQUFDO29CQUM5Q2xGLE9BQU9zRjtnQkFDWDtnQkFDQTtvQkFDSXRCLElBQUk7b0JBQ0pDLE1BQU0sQ0FBQyxNQUFNLEVBQUVpQixRQUFRLGtCQUFrQixDQUFDO29CQUMxQ2xGLE9BQU8wRjtnQkFDWDthQUNIO1FBQ0w7UUFDQSxNQUFNLElBQUksQ0FBQ25ELE1BQU0sQ0FBQ3dCLEtBQUssQ0FBQ3JEO0lBQzVCO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1mb3JtLWJ1aWxkZXItdHV0b3JpYWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9sb2dfc3RyZWFtLmpzPzI5ZDgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgYXBwbHlQYXRjaCwgfSBmcm9tIFwiLi4vdXRpbHMvZmFzdC1qc29uLXBhdGNoL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBCYXNlVHJhY2VyIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuaW1wb3J0IHsgSXRlcmFibGVSZWFkYWJsZVN0cmVhbSB9IGZyb20gXCIuLi91dGlscy9zdHJlYW0uanNcIjtcbmltcG9ydCB7IEFJTWVzc2FnZUNodW5rIH0gZnJvbSBcIi4uL21lc3NhZ2VzL2luZGV4LmpzXCI7XG4vKipcbiAqIExpc3Qgb2YganNvbnBhdGNoIEpTT05QYXRjaE9wZXJhdGlvbnMsIHdoaWNoIGRlc2NyaWJlIGhvdyB0byBjcmVhdGUgdGhlIHJ1biBzdGF0ZVxuICogZnJvbSBhbiBlbXB0eSBkaWN0LiBUaGlzIGlzIHRoZSBtaW5pbWFsIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBsb2csIGRlc2lnbmVkIHRvXG4gKiBiZSBzZXJpYWxpemVkIGFzIEpTT04gYW5kIHNlbnQgb3ZlciB0aGUgd2lyZSB0byByZWNvbnN0cnVjdCB0aGUgbG9nIG9uIHRoZSBvdGhlclxuICogc2lkZS4gUmVjb25zdHJ1Y3Rpb24gb2YgdGhlIHN0YXRlIGNhbiBiZSBkb25lIHdpdGggYW55IGpzb25wYXRjaC1jb21wbGlhbnQgbGlicmFyeSxcbiAqIHNlZSBodHRwczovL2pzb25wYXRjaC5jb20gZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBSdW5Mb2dQYXRjaCB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9wc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm9wcyA9IGZpZWxkcy5vcHMgPz8gW107XG4gICAgfVxuICAgIGNvbmNhdChvdGhlcikge1xuICAgICAgICBjb25zdCBvcHMgPSB0aGlzLm9wcy5jb25jYXQob3RoZXIub3BzKTtcbiAgICAgICAgY29uc3Qgc3RhdGVzID0gYXBwbHlQYXRjaCh7fSwgb3BzKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICByZXR1cm4gbmV3IFJ1bkxvZyh7XG4gICAgICAgICAgICBvcHMsXG4gICAgICAgICAgICBzdGF0ZTogc3RhdGVzW3N0YXRlcy5sZW5ndGggLSAxXS5uZXdEb2N1bWVudCxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIFJ1bkxvZyBleHRlbmRzIFJ1bkxvZ1BhdGNoIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMpIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic3RhdGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IGZpZWxkcy5zdGF0ZTtcbiAgICB9XG4gICAgY29uY2F0KG90aGVyKSB7XG4gICAgICAgIGNvbnN0IG9wcyA9IHRoaXMub3BzLmNvbmNhdChvdGhlci5vcHMpO1xuICAgICAgICBjb25zdCBzdGF0ZXMgPSBhcHBseVBhdGNoKHRoaXMuc3RhdGUsIG90aGVyLm9wcyk7XG4gICAgICAgIHJldHVybiBuZXcgUnVuTG9nKHsgb3BzLCBzdGF0ZTogc3RhdGVzW3N0YXRlcy5sZW5ndGggLSAxXS5uZXdEb2N1bWVudCB9KTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21SdW5Mb2dQYXRjaChwYXRjaCkge1xuICAgICAgICBjb25zdCBzdGF0ZXMgPSBhcHBseVBhdGNoKHt9LCBwYXRjaC5vcHMpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgIHJldHVybiBuZXcgUnVuTG9nKHtcbiAgICAgICAgICAgIG9wczogcGF0Y2gub3BzLFxuICAgICAgICAgICAgc3RhdGU6IHN0YXRlc1tzdGF0ZXMubGVuZ3RoIC0gMV0ubmV3RG9jdW1lbnQsXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbi8qKlxuICogRXh0cmFjdCBzdGFuZGFyZGl6ZWQgaW5wdXRzIGZyb20gYSBydW4uXG4gKlxuICogU3RhbmRhcmRpemVzIHRoZSBpbnB1dHMgYmFzZWQgb24gdGhlIHR5cGUgb2YgdGhlIHJ1bm5hYmxlIHVzZWQuXG4gKlxuICogQHBhcmFtIHJ1biAtIFJ1biBvYmplY3RcbiAqIEBwYXJhbSBzY2hlbWFGb3JtYXQgLSBUaGUgc2NoZW1hIGZvcm1hdCB0byB1c2UuXG4gKlxuICogQHJldHVybnMgVmFsaWQgaW5wdXRzIGFyZSBvbmx5IGRpY3QuIEJ5IGNvbnZlbnRpb25zLCBpbnB1dHMgYWx3YXlzIHJlcHJlc2VudGVkXG4gKiBpbnZvY2F0aW9uIHVzaW5nIG5hbWVkIGFyZ3VtZW50cy5cbiAqIEEgbnVsbCBtZWFucyB0aGF0IHRoZSBpbnB1dCBpcyBub3QgeWV0IGtub3duIVxuICovXG5hc3luYyBmdW5jdGlvbiBfZ2V0U3RhbmRhcmRpemVkSW5wdXRzKHJ1biwgc2NoZW1hRm9ybWF0KSB7XG4gICAgaWYgKHNjaGVtYUZvcm1hdCA9PT0gXCJvcmlnaW5hbFwiKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkRvIG5vdCBhc3NpZ24gaW5wdXRzIHdpdGggb3JpZ2luYWwgc2NoZW1hIGRyb3AgdGhlIGtleSBmb3Igbm93LiBcIiArXG4gICAgICAgICAgICBcIldoZW4gaW5wdXRzIGFyZSBhZGRlZCB0byBzdHJlYW1Mb2cgdGhleSBzaG91bGQgYmUgYWRkZWQgd2l0aCBcIiArXG4gICAgICAgICAgICBcInN0YW5kYXJkaXplZCBzY2hlbWEgZm9yIHN0cmVhbWluZyBldmVudHMuXCIpO1xuICAgIH1cbiAgICBjb25zdCB7IGlucHV0cyB9ID0gcnVuO1xuICAgIGlmIChbXCJyZXRyaWV2ZXJcIiwgXCJsbG1cIiwgXCJwcm9tcHRcIl0uaW5jbHVkZXMocnVuLnJ1bl90eXBlKSkge1xuICAgICAgICByZXR1cm4gaW5wdXRzO1xuICAgIH1cbiAgICBpZiAoT2JqZWN0LmtleXMoaW5wdXRzKS5sZW5ndGggPT09IDEgJiYgaW5wdXRzPy5pbnB1dCA9PT0gXCJcIikge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICAvLyBuZXcgc3R5bGUgY2hhaW5zXG4gICAgLy8gVGhlc2UgbmVzdCBhbiBhZGRpdGlvbmFsICdpbnB1dCcga2V5IGluc2lkZSB0aGUgJ2lucHV0cycgdG8gbWFrZSBzdXJlXG4gICAgLy8gdGhlIGlucHV0IGlzIGFsd2F5cyBhIGRpY3QuIFdlIG5lZWQgdG8gdW5wYWNrIGFuZCB1c2VyIHRoZSBpbm5lciB2YWx1ZS5cbiAgICAvLyBXZSBzaG91bGQgdHJ5IHRvIGZpeCB0aGlzIGluIFJ1bm5hYmxlcyBhbmQgY2FsbGJhY2tzL3RyYWNlcnNcbiAgICAvLyBSdW5uYWJsZXMgc2hvdWxkIGJlIHVzaW5nIGEgbnVsbCB0eXBlIGhlcmUgbm90IGEgcGxhY2Vob2xkZXJcbiAgICAvLyBkaWN0LlxuICAgIHJldHVybiBpbnB1dHMuaW5wdXQ7XG59XG5hc3luYyBmdW5jdGlvbiBfZ2V0U3RhbmRhcmRpemVkT3V0cHV0cyhydW4sIHNjaGVtYUZvcm1hdCkge1xuICAgIGNvbnN0IHsgb3V0cHV0cyB9ID0gcnVuO1xuICAgIGlmIChzY2hlbWFGb3JtYXQgPT09IFwib3JpZ2luYWxcIikge1xuICAgICAgICAvLyBSZXR1cm4gdGhlIG9sZCBzY2hlbWEsIHdpdGhvdXQgc3RhbmRhcmRpemluZyBhbnl0aGluZ1xuICAgICAgICByZXR1cm4gb3V0cHV0cztcbiAgICB9XG4gICAgaWYgKFtcInJldHJpZXZlclwiLCBcImxsbVwiLCBcInByb21wdFwiXS5pbmNsdWRlcyhydW4ucnVuX3R5cGUpKSB7XG4gICAgICAgIHJldHVybiBvdXRwdXRzO1xuICAgIH1cbiAgICAvLyBUT0RPOiBSZW1vdmUgdGhpcyBoYWNreSBjaGVja1xuICAgIGlmIChvdXRwdXRzICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgT2JqZWN0LmtleXMob3V0cHV0cykubGVuZ3RoID09PSAxICYmXG4gICAgICAgIG91dHB1dHM/Lm91dHB1dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBvdXRwdXRzLm91dHB1dDtcbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dHM7XG59XG5mdW5jdGlvbiBpc0NoYXRHZW5lcmF0aW9uQ2h1bmsoeCkge1xuICAgIHJldHVybiB4ICE9PSB1bmRlZmluZWQgJiYgeC5tZXNzYWdlICE9PSB1bmRlZmluZWQ7XG59XG4vKipcbiAqIENsYXNzIHRoYXQgZXh0ZW5kcyB0aGUgYEJhc2VUcmFjZXJgIGNsYXNzIGZyb20gdGhlXG4gKiBgbGFuZ2NoYWluLmNhbGxiYWNrcy50cmFjZXJzLmJhc2VgIG1vZHVsZS4gSXQgcmVwcmVzZW50cyBhIGNhbGxiYWNrXG4gKiBoYW5kbGVyIHRoYXQgbG9ncyB0aGUgZXhlY3V0aW9uIG9mIHJ1bnMgYW5kIGVtaXRzIGBSdW5Mb2dgIGluc3RhbmNlcyB0byBhXG4gKiBgUnVuTG9nU3RyZWFtYC5cbiAqL1xuZXhwb3J0IGNsYXNzIExvZ1N0cmVhbUNhbGxiYWNrSGFuZGxlciBleHRlbmRzIEJhc2VUcmFjZXIge1xuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICBzdXBlcih7IF9hd2FpdEhhbmRsZXI6IHRydWUsIC4uLmZpZWxkcyB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXV0b0Nsb3NlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmNsdWRlTmFtZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiaW5jbHVkZVR5cGVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImluY2x1ZGVUYWdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImV4Y2x1ZGVOYW1lc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJleGNsdWRlVHlwZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZXhjbHVkZVRhZ3NcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiX3NjaGVtYUZvcm1hdFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJvcmlnaW5hbFwiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJyb290SWRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwia2V5TWFwQnlSdW5JZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZToge31cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNvdW50ZXJNYXBCeVJ1bk5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHt9XG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0cmFuc2Zvcm1TdHJlYW1cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwid3JpdGVyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJlY2VpdmVTdHJlYW1cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJsb2dfc3RyZWFtX3RyYWNlclwiXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmF1dG9DbG9zZSA9IGZpZWxkcz8uYXV0b0Nsb3NlID8/IHRydWU7XG4gICAgICAgIHRoaXMuaW5jbHVkZU5hbWVzID0gZmllbGRzPy5pbmNsdWRlTmFtZXM7XG4gICAgICAgIHRoaXMuaW5jbHVkZVR5cGVzID0gZmllbGRzPy5pbmNsdWRlVHlwZXM7XG4gICAgICAgIHRoaXMuaW5jbHVkZVRhZ3MgPSBmaWVsZHM/LmluY2x1ZGVUYWdzO1xuICAgICAgICB0aGlzLmV4Y2x1ZGVOYW1lcyA9IGZpZWxkcz8uZXhjbHVkZU5hbWVzO1xuICAgICAgICB0aGlzLmV4Y2x1ZGVUeXBlcyA9IGZpZWxkcz8uZXhjbHVkZVR5cGVzO1xuICAgICAgICB0aGlzLmV4Y2x1ZGVUYWdzID0gZmllbGRzPy5leGNsdWRlVGFncztcbiAgICAgICAgdGhpcy5fc2NoZW1hRm9ybWF0ID0gZmllbGRzPy5fc2NoZW1hRm9ybWF0ID8/IHRoaXMuX3NjaGVtYUZvcm1hdDtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1TdHJlYW0gPSBuZXcgVHJhbnNmb3JtU3RyZWFtKCk7XG4gICAgICAgIHRoaXMud3JpdGVyID0gdGhpcy50cmFuc2Zvcm1TdHJlYW0ud3JpdGFibGUuZ2V0V3JpdGVyKCk7XG4gICAgICAgIHRoaXMucmVjZWl2ZVN0cmVhbSA9IEl0ZXJhYmxlUmVhZGFibGVTdHJlYW0uZnJvbVJlYWRhYmxlU3RyZWFtKHRoaXMudHJhbnNmb3JtU3RyZWFtLnJlYWRhYmxlKTtcbiAgICB9XG4gICAgW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVjZWl2ZVN0cmVhbTtcbiAgICB9XG4gICAgYXN5bmMgcGVyc2lzdFJ1bihfcnVuKSB7XG4gICAgICAgIC8vIFRoaXMgaXMgYSBsZWdhY3kgbWV0aG9kIG9ubHkgY2FsbGVkIG9uY2UgZm9yIGFuIGVudGlyZSBydW4gdHJlZVxuICAgICAgICAvLyBhbmQgaXMgdGhlcmVmb3JlIG5vdCB1c2VmdWwgaGVyZVxuICAgIH1cbiAgICBfaW5jbHVkZVJ1bihydW4pIHtcbiAgICAgICAgaWYgKHJ1bi5pZCA9PT0gdGhpcy5yb290SWQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBydW5UYWdzID0gcnVuLnRhZ3MgPz8gW107XG4gICAgICAgIGxldCBpbmNsdWRlID0gdGhpcy5pbmNsdWRlTmFtZXMgPT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgdGhpcy5pbmNsdWRlVGFncyA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICB0aGlzLmluY2x1ZGVUeXBlcyA9PT0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAodGhpcy5pbmNsdWRlTmFtZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW5jbHVkZSA9IGluY2x1ZGUgfHwgdGhpcy5pbmNsdWRlTmFtZXMuaW5jbHVkZXMocnVuLm5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmluY2x1ZGVUeXBlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbmNsdWRlID0gaW5jbHVkZSB8fCB0aGlzLmluY2x1ZGVUeXBlcy5pbmNsdWRlcyhydW4ucnVuX3R5cGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmluY2x1ZGVUYWdzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPVxuICAgICAgICAgICAgICAgIGluY2x1ZGUgfHxcbiAgICAgICAgICAgICAgICAgICAgcnVuVGFncy5maW5kKCh0YWcpID0+IHRoaXMuaW5jbHVkZVRhZ3M/LmluY2x1ZGVzKHRhZykpICE9PSB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZXhjbHVkZU5hbWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPSBpbmNsdWRlICYmICF0aGlzLmV4Y2x1ZGVOYW1lcy5pbmNsdWRlcyhydW4ubmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZXhjbHVkZVR5cGVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPSBpbmNsdWRlICYmICF0aGlzLmV4Y2x1ZGVUeXBlcy5pbmNsdWRlcyhydW4ucnVuX3R5cGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmV4Y2x1ZGVUYWdzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGluY2x1ZGUgPVxuICAgICAgICAgICAgICAgIGluY2x1ZGUgJiYgcnVuVGFncy5ldmVyeSgodGFnKSA9PiAhdGhpcy5leGNsdWRlVGFncz8uaW5jbHVkZXModGFnKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluY2x1ZGU7XG4gICAgfVxuICAgIGFzeW5jICp0YXBPdXRwdXRJdGVyYWJsZShydW5JZCwgb3V0cHV0KSB7XG4gICAgICAgIC8vIFRhcCBhbiBvdXRwdXQgYXN5bmMgaXRlcmF0b3IgdG8gc3RyZWFtIGl0cyB2YWx1ZXMgdG8gdGhlIGxvZy5cbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBvdXRwdXQpIHtcbiAgICAgICAgICAgIC8vIHJvb3QgcnVuIGlzIGhhbmRsZWQgaW4gLnN0cmVhbUxvZygpXG4gICAgICAgICAgICBpZiAocnVuSWQgIT09IHRoaXMucm9vdElkKSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgd2UgY2FuJ3QgZmluZCB0aGUgcnVuIHNpbGVudGx5IGlnbm9yZVxuICAgICAgICAgICAgICAgIC8vIGVnLiBiZWNhdXNlIHRoaXMgcnVuIHdhc24ndCBpbmNsdWRlZCBpbiB0aGUgbG9nXG4gICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gdGhpcy5rZXlNYXBCeVJ1bklkW3J1bklkXTtcbiAgICAgICAgICAgICAgICBpZiAoa2V5KSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMud3JpdGVyLndyaXRlKG5ldyBSdW5Mb2dQYXRjaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wOiBcImFkZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBgL2xvZ3MvJHtrZXl9L3N0cmVhbWVkX291dHB1dC8tYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGNodW5rLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgeWllbGQgY2h1bms7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgb25SdW5DcmVhdGUocnVuKSB7XG4gICAgICAgIGlmICh0aGlzLnJvb3RJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnJvb3RJZCA9IHJ1bi5pZDtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMud3JpdGVyLndyaXRlKG5ldyBSdW5Mb2dQYXRjaCh7XG4gICAgICAgICAgICAgICAgb3BzOiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wOiBcInJlcGxhY2VcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBydW4uaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogcnVuLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogcnVuLnJ1bl90eXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbWVkX291dHB1dDogW10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxfb3V0cHV0OiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nczoge30sXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLl9pbmNsdWRlUnVuKHJ1bikpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jb3VudGVyTWFwQnlSdW5OYW1lW3J1bi5uYW1lXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmNvdW50ZXJNYXBCeVJ1bk5hbWVbcnVuLm5hbWVdID0gMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvdW50ZXJNYXBCeVJ1bk5hbWVbcnVuLm5hbWVdICs9IDE7XG4gICAgICAgIGNvbnN0IGNvdW50ID0gdGhpcy5jb3VudGVyTWFwQnlSdW5OYW1lW3J1bi5uYW1lXTtcbiAgICAgICAgdGhpcy5rZXlNYXBCeVJ1bklkW3J1bi5pZF0gPVxuICAgICAgICAgICAgY291bnQgPT09IDEgPyBydW4ubmFtZSA6IGAke3J1bi5uYW1lfToke2NvdW50fWA7XG4gICAgICAgIGNvbnN0IGxvZ0VudHJ5ID0ge1xuICAgICAgICAgICAgaWQ6IHJ1bi5pZCxcbiAgICAgICAgICAgIG5hbWU6IHJ1bi5uYW1lLFxuICAgICAgICAgICAgdHlwZTogcnVuLnJ1bl90eXBlLFxuICAgICAgICAgICAgdGFnczogcnVuLnRhZ3MgPz8gW10sXG4gICAgICAgICAgICBtZXRhZGF0YTogcnVuLmV4dHJhPy5tZXRhZGF0YSA/PyB7fSxcbiAgICAgICAgICAgIHN0YXJ0X3RpbWU6IG5ldyBEYXRlKHJ1bi5zdGFydF90aW1lKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgc3RyZWFtZWRfb3V0cHV0OiBbXSxcbiAgICAgICAgICAgIHN0cmVhbWVkX291dHB1dF9zdHI6IFtdLFxuICAgICAgICAgICAgZmluYWxfb3V0cHV0OiB1bmRlZmluZWQsXG4gICAgICAgICAgICBlbmRfdGltZTogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5fc2NoZW1hRm9ybWF0ID09PSBcInN0cmVhbWluZ19ldmVudHNcIikge1xuICAgICAgICAgICAgbG9nRW50cnkuaW5wdXRzID0gYXdhaXQgX2dldFN0YW5kYXJkaXplZElucHV0cyhydW4sIHRoaXMuX3NjaGVtYUZvcm1hdCk7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy53cml0ZXIud3JpdGUobmV3IFJ1bkxvZ1BhdGNoKHtcbiAgICAgICAgICAgIG9wczogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgb3A6IFwiYWRkXCIsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGAvbG9ncy8ke3RoaXMua2V5TWFwQnlSdW5JZFtydW4uaWRdfWAsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBsb2dFbnRyeSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBhc3luYyBvblJ1blVwZGF0ZShydW4pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJ1bk5hbWUgPSB0aGlzLmtleU1hcEJ5UnVuSWRbcnVuLmlkXTtcbiAgICAgICAgICAgIGlmIChydW5OYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBvcHMgPSBbXTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9zY2hlbWFGb3JtYXQgPT09IFwic3RyZWFtaW5nX2V2ZW50c1wiKSB7XG4gICAgICAgICAgICAgICAgb3BzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBvcDogXCJyZXBsYWNlXCIsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGAvbG9ncy8ke3J1bk5hbWV9L2lucHV0c2AsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBhd2FpdCBfZ2V0U3RhbmRhcmRpemVkSW5wdXRzKHJ1biwgdGhpcy5fc2NoZW1hRm9ybWF0KSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBvcDogXCJhZGRcIixcbiAgICAgICAgICAgICAgICBwYXRoOiBgL2xvZ3MvJHtydW5OYW1lfS9maW5hbF9vdXRwdXRgLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBhd2FpdCBfZ2V0U3RhbmRhcmRpemVkT3V0cHV0cyhydW4sIHRoaXMuX3NjaGVtYUZvcm1hdCksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChydW4uZW5kX3RpbWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIG9wcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgb3A6IFwiYWRkXCIsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IGAvbG9ncy8ke3J1bk5hbWV9L2VuZF90aW1lYCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG5ldyBEYXRlKHJ1bi5lbmRfdGltZSkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHBhdGNoID0gbmV3IFJ1bkxvZ1BhdGNoKHsgb3BzIH0pO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy53cml0ZXIud3JpdGUocGF0Y2gpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgaWYgKHJ1bi5pZCA9PT0gdGhpcy5yb290SWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXRjaCA9IG5ldyBSdW5Mb2dQYXRjaCh7XG4gICAgICAgICAgICAgICAgICAgIG9wczogW1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wOiBcInJlcGxhY2VcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoOiBcIi9maW5hbF9vdXRwdXRcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYXdhaXQgX2dldFN0YW5kYXJkaXplZE91dHB1dHMocnVuLCB0aGlzLl9zY2hlbWFGb3JtYXQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLndyaXRlci53cml0ZShwYXRjaCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYXV0b0Nsb3NlKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMud3JpdGVyLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIG9uTExNTmV3VG9rZW4ocnVuLCB0b2tlbiwga3dhcmdzKSB7XG4gICAgICAgIGNvbnN0IHJ1bk5hbWUgPSB0aGlzLmtleU1hcEJ5UnVuSWRbcnVuLmlkXTtcbiAgICAgICAgaWYgKHJ1bk5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRPRE86IFJlbW92ZSBoYWNrXG4gICAgICAgIGNvbnN0IGlzQ2hhdE1vZGVsID0gcnVuLmlucHV0cy5tZXNzYWdlcyAhPT0gdW5kZWZpbmVkO1xuICAgICAgICBsZXQgc3RyZWFtZWRPdXRwdXRWYWx1ZTtcbiAgICAgICAgaWYgKGlzQ2hhdE1vZGVsKSB7XG4gICAgICAgICAgICBpZiAoaXNDaGF0R2VuZXJhdGlvbkNodW5rKGt3YXJncz8uY2h1bmspKSB7XG4gICAgICAgICAgICAgICAgc3RyZWFtZWRPdXRwdXRWYWx1ZSA9IGt3YXJncz8uY2h1bms7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzdHJlYW1lZE91dHB1dFZhbHVlID0gbmV3IEFJTWVzc2FnZUNodW5rKHRva2VuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHN0cmVhbWVkT3V0cHV0VmFsdWUgPSB0b2tlbjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXRjaCA9IG5ldyBSdW5Mb2dQYXRjaCh7XG4gICAgICAgICAgICBvcHM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG9wOiBcImFkZFwiLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBgL2xvZ3MvJHtydW5OYW1lfS9zdHJlYW1lZF9vdXRwdXRfc3RyLy1gLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdG9rZW4sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIG9wOiBcImFkZFwiLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBgL2xvZ3MvJHtydW5OYW1lfS9zdHJlYW1lZF9vdXRwdXQvLWAsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzdHJlYW1lZE91dHB1dFZhbHVlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICAgICAgYXdhaXQgdGhpcy53cml0ZXIud3JpdGUocGF0Y2gpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJhcHBseVBhdGNoIiwiQmFzZVRyYWNlciIsIkl0ZXJhYmxlUmVhZGFibGVTdHJlYW0iLCJBSU1lc3NhZ2VDaHVuayIsIlJ1bkxvZ1BhdGNoIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwib3BzIiwiY29uY2F0Iiwib3RoZXIiLCJzdGF0ZXMiLCJSdW5Mb2ciLCJzdGF0ZSIsImxlbmd0aCIsIm5ld0RvY3VtZW50IiwiZnJvbVJ1bkxvZ1BhdGNoIiwicGF0Y2giLCJfZ2V0U3RhbmRhcmRpemVkSW5wdXRzIiwicnVuIiwic2NoZW1hRm9ybWF0IiwiRXJyb3IiLCJpbnB1dHMiLCJpbmNsdWRlcyIsInJ1bl90eXBlIiwia2V5cyIsImlucHV0IiwidW5kZWZpbmVkIiwiX2dldFN0YW5kYXJkaXplZE91dHB1dHMiLCJvdXRwdXRzIiwib3V0cHV0IiwiaXNDaGF0R2VuZXJhdGlvbkNodW5rIiwieCIsIm1lc3NhZ2UiLCJMb2dTdHJlYW1DYWxsYmFja0hhbmRsZXIiLCJfYXdhaXRIYW5kbGVyIiwiYXV0b0Nsb3NlIiwiaW5jbHVkZU5hbWVzIiwiaW5jbHVkZVR5cGVzIiwiaW5jbHVkZVRhZ3MiLCJleGNsdWRlTmFtZXMiLCJleGNsdWRlVHlwZXMiLCJleGNsdWRlVGFncyIsIl9zY2hlbWFGb3JtYXQiLCJ0cmFuc2Zvcm1TdHJlYW0iLCJUcmFuc2Zvcm1TdHJlYW0iLCJ3cml0ZXIiLCJnZXRXcml0ZXIiLCJyZWNlaXZlU3RyZWFtIiwiZnJvbVJlYWRhYmxlU3RyZWFtIiwicmVhZGFibGUiLCJTeW1ib2wiLCJhc3luY0l0ZXJhdG9yIiwicGVyc2lzdFJ1biIsIl9ydW4iLCJfaW5jbHVkZVJ1biIsImlkIiwicm9vdElkIiwicnVuVGFncyIsInRhZ3MiLCJpbmNsdWRlIiwibmFtZSIsImZpbmQiLCJ0YWciLCJldmVyeSIsInRhcE91dHB1dEl0ZXJhYmxlIiwicnVuSWQiLCJjaHVuayIsImtleSIsImtleU1hcEJ5UnVuSWQiLCJ3cml0ZSIsIm9wIiwicGF0aCIsIm9uUnVuQ3JlYXRlIiwidHlwZSIsInN0cmVhbWVkX291dHB1dCIsImZpbmFsX291dHB1dCIsImxvZ3MiLCJjb3VudGVyTWFwQnlSdW5OYW1lIiwiY291bnQiLCJsb2dFbnRyeSIsIm1ldGFkYXRhIiwiZXh0cmEiLCJzdGFydF90aW1lIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwic3RyZWFtZWRfb3V0cHV0X3N0ciIsImVuZF90aW1lIiwib25SdW5VcGRhdGUiLCJydW5OYW1lIiwicHVzaCIsImNsb3NlIiwib25MTE1OZXdUb2tlbiIsInRva2VuIiwia3dhcmdzIiwiaXNDaGF0TW9kZWwiLCJtZXNzYWdlcyIsInN0cmVhbWVkT3V0cHV0VmFsdWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tracers/log_stream.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tracers/root_listener.js":
/*!********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/root_listener.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RootListenersTracer: () => (/* binding */ RootListenersTracer)\n/* harmony export */ });\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/base.js\");\n\nclass RootListenersTracer extends _base_js__WEBPACK_IMPORTED_MODULE_0__.BaseTracer {\n    constructor({ config, onStart, onEnd, onError }){\n        super({\n            _awaitHandler: true\n        });\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"RootListenersTracer\"\n        });\n        /** The Run's ID. Type UUID */ Object.defineProperty(this, \"rootId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"config\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"argOnStart\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"argOnEnd\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"argOnError\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.config = config;\n        this.argOnStart = onStart;\n        this.argOnEnd = onEnd;\n        this.argOnError = onError;\n    }\n    /**\n     * This is a legacy method only called once for an entire run tree\n     * therefore not useful here\n     * @param {Run} _ Not used\n     */ persistRun(_) {\n        return Promise.resolve();\n    }\n    async onRunCreate(run) {\n        if (this.rootId) {\n            return;\n        }\n        this.rootId = run.id;\n        if (this.argOnStart) {\n            if (this.argOnStart.length === 1) {\n                await this.argOnStart(run);\n            } else if (this.argOnStart.length === 2) {\n                await this.argOnStart(run, this.config);\n            }\n        }\n    }\n    async onRunUpdate(run) {\n        if (run.id !== this.rootId) {\n            return;\n        }\n        if (!run.error) {\n            if (this.argOnEnd) {\n                if (this.argOnEnd.length === 1) {\n                    await this.argOnEnd(run);\n                } else if (this.argOnEnd.length === 2) {\n                    await this.argOnEnd(run, this.config);\n                }\n            }\n        } else if (this.argOnError) {\n            if (this.argOnError.length === 1) {\n                await this.argOnError(run);\n            } else if (this.argOnError.length === 2) {\n                await this.argOnError(run, this.config);\n            }\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy9yb290X2xpc3RlbmVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQXVDO0FBQ2hDLE1BQU1DLDRCQUE0QkQsZ0RBQVVBO0lBQy9DRSxZQUFZLEVBQUVDLE1BQU0sRUFBRUMsT0FBTyxFQUFFQyxLQUFLLEVBQUVDLE9BQU8sRUFBRyxDQUFFO1FBQzlDLEtBQUssQ0FBQztZQUFFQyxlQUFlO1FBQUs7UUFDNUJDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtZQUNoQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0EsNEJBQTRCLEdBQzVCTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVU7WUFDbENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVU7WUFDbENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGNBQWM7WUFDdENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFlBQVk7WUFDcENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGNBQWM7WUFDdENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ1YsTUFBTSxHQUFHQTtRQUNkLElBQUksQ0FBQ1csVUFBVSxHQUFHVjtRQUNsQixJQUFJLENBQUNXLFFBQVEsR0FBR1Y7UUFDaEIsSUFBSSxDQUFDVyxVQUFVLEdBQUdWO0lBQ3RCO0lBQ0E7Ozs7S0FJQyxHQUNEVyxXQUFXQyxDQUFDLEVBQUU7UUFDVixPQUFPQyxRQUFRQyxPQUFPO0lBQzFCO0lBQ0EsTUFBTUMsWUFBWUMsR0FBRyxFQUFFO1FBQ25CLElBQUksSUFBSSxDQUFDQyxNQUFNLEVBQUU7WUFDYjtRQUNKO1FBQ0EsSUFBSSxDQUFDQSxNQUFNLEdBQUdELElBQUlFLEVBQUU7UUFDcEIsSUFBSSxJQUFJLENBQUNWLFVBQVUsRUFBRTtZQUNqQixJQUFJLElBQUksQ0FBQ0EsVUFBVSxDQUFDVyxNQUFNLEtBQUssR0FBRztnQkFDOUIsTUFBTSxJQUFJLENBQUNYLFVBQVUsQ0FBQ1E7WUFDMUIsT0FDSyxJQUFJLElBQUksQ0FBQ1IsVUFBVSxDQUFDVyxNQUFNLEtBQUssR0FBRztnQkFDbkMsTUFBTSxJQUFJLENBQUNYLFVBQVUsQ0FBQ1EsS0FBSyxJQUFJLENBQUNuQixNQUFNO1lBQzFDO1FBQ0o7SUFDSjtJQUNBLE1BQU11QixZQUFZSixHQUFHLEVBQUU7UUFDbkIsSUFBSUEsSUFBSUUsRUFBRSxLQUFLLElBQUksQ0FBQ0QsTUFBTSxFQUFFO1lBQ3hCO1FBQ0o7UUFDQSxJQUFJLENBQUNELElBQUlLLEtBQUssRUFBRTtZQUNaLElBQUksSUFBSSxDQUFDWixRQUFRLEVBQUU7Z0JBQ2YsSUFBSSxJQUFJLENBQUNBLFFBQVEsQ0FBQ1UsTUFBTSxLQUFLLEdBQUc7b0JBQzVCLE1BQU0sSUFBSSxDQUFDVixRQUFRLENBQUNPO2dCQUN4QixPQUNLLElBQUksSUFBSSxDQUFDUCxRQUFRLENBQUNVLE1BQU0sS0FBSyxHQUFHO29CQUNqQyxNQUFNLElBQUksQ0FBQ1YsUUFBUSxDQUFDTyxLQUFLLElBQUksQ0FBQ25CLE1BQU07Z0JBQ3hDO1lBQ0o7UUFDSixPQUNLLElBQUksSUFBSSxDQUFDYSxVQUFVLEVBQUU7WUFDdEIsSUFBSSxJQUFJLENBQUNBLFVBQVUsQ0FBQ1MsTUFBTSxLQUFLLEdBQUc7Z0JBQzlCLE1BQU0sSUFBSSxDQUFDVCxVQUFVLENBQUNNO1lBQzFCLE9BQ0ssSUFBSSxJQUFJLENBQUNOLFVBQVUsQ0FBQ1MsTUFBTSxLQUFLLEdBQUc7Z0JBQ25DLE1BQU0sSUFBSSxDQUFDVCxVQUFVLENBQUNNLEtBQUssSUFBSSxDQUFDbkIsTUFBTTtZQUMxQztRQUNKO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLWZvcm0tYnVpbGRlci10dXRvcmlhbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC90cmFjZXJzL3Jvb3RfbGlzdGVuZXIuanM/MGQ0ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCYXNlVHJhY2VyIH0gZnJvbSBcIi4vYmFzZS5qc1wiO1xuZXhwb3J0IGNsYXNzIFJvb3RMaXN0ZW5lcnNUcmFjZXIgZXh0ZW5kcyBCYXNlVHJhY2VyIHtcbiAgICBjb25zdHJ1Y3Rvcih7IGNvbmZpZywgb25TdGFydCwgb25FbmQsIG9uRXJyb3IsIH0pIHtcbiAgICAgICAgc3VwZXIoeyBfYXdhaXRIYW5kbGVyOiB0cnVlIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBcIlJvb3RMaXN0ZW5lcnNUcmFjZXJcIlxuICAgICAgICB9KTtcbiAgICAgICAgLyoqIFRoZSBSdW4ncyBJRC4gVHlwZSBVVUlEICovXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInJvb3RJZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjb25maWdcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXJnT25TdGFydFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhcmdPbkVuZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhcmdPbkVycm9yXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgICAgICB0aGlzLmFyZ09uU3RhcnQgPSBvblN0YXJ0O1xuICAgICAgICB0aGlzLmFyZ09uRW5kID0gb25FbmQ7XG4gICAgICAgIHRoaXMuYXJnT25FcnJvciA9IG9uRXJyb3I7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgaXMgYSBsZWdhY3kgbWV0aG9kIG9ubHkgY2FsbGVkIG9uY2UgZm9yIGFuIGVudGlyZSBydW4gdHJlZVxuICAgICAqIHRoZXJlZm9yZSBub3QgdXNlZnVsIGhlcmVcbiAgICAgKiBAcGFyYW0ge1J1bn0gXyBOb3QgdXNlZFxuICAgICAqL1xuICAgIHBlcnNpc3RSdW4oXykge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGFzeW5jIG9uUnVuQ3JlYXRlKHJ1bikge1xuICAgICAgICBpZiAodGhpcy5yb290SWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJvb3RJZCA9IHJ1bi5pZDtcbiAgICAgICAgaWYgKHRoaXMuYXJnT25TdGFydCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuYXJnT25TdGFydC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFyZ09uU3RhcnQocnVuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuYXJnT25TdGFydC5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFyZ09uU3RhcnQocnVuLCB0aGlzLmNvbmZpZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgb25SdW5VcGRhdGUocnVuKSB7XG4gICAgICAgIGlmIChydW4uaWQgIT09IHRoaXMucm9vdElkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFydW4uZXJyb3IpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFyZ09uRW5kKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYXJnT25FbmQubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXJnT25FbmQocnVuKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5hcmdPbkVuZC5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcmdPbkVuZChydW4sIHRoaXMuY29uZmlnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5hcmdPbkVycm9yKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hcmdPbkVycm9yLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXJnT25FcnJvcihydW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5hcmdPbkVycm9yLmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXJnT25FcnJvcihydW4sIHRoaXMuY29uZmlnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJCYXNlVHJhY2VyIiwiUm9vdExpc3RlbmVyc1RyYWNlciIsImNvbnN0cnVjdG9yIiwiY29uZmlnIiwib25TdGFydCIsIm9uRW5kIiwib25FcnJvciIsIl9hd2FpdEhhbmRsZXIiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiYXJnT25TdGFydCIsImFyZ09uRW5kIiwiYXJnT25FcnJvciIsInBlcnNpc3RSdW4iLCJfIiwiUHJvbWlzZSIsInJlc29sdmUiLCJvblJ1bkNyZWF0ZSIsInJ1biIsInJvb3RJZCIsImlkIiwibGVuZ3RoIiwib25SdW5VcGRhdGUiLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tracers/root_listener.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tracers/tracer_langchain.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/tracer_langchain.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LangChainTracer: () => (/* binding */ LangChainTracer)\n/* harmony export */ });\n/* harmony import */ var langsmith__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! langsmith */ \"(rsc)/./node_modules/langsmith/index.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/env.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/env.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/base.js\");\n\n\n\nclass LangChainTracer extends _base_js__WEBPACK_IMPORTED_MODULE_2__.BaseTracer {\n    constructor(fields = {}){\n        super(fields);\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"langchain_tracer\"\n        });\n        Object.defineProperty(this, \"projectName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"exampleId\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"client\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        const { exampleId, projectName, client } = fields;\n        this.projectName = projectName ?? (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"LANGCHAIN_PROJECT\") ?? (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"LANGCHAIN_SESSION\");\n        this.exampleId = exampleId;\n        this.client = client ?? new langsmith__WEBPACK_IMPORTED_MODULE_0__.Client({});\n    }\n    async _convertToCreate(run, example_id = undefined) {\n        return {\n            ...run,\n            extra: {\n                ...run.extra,\n                runtime: await (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_1__.getRuntimeEnvironment)()\n            },\n            child_runs: undefined,\n            session_name: this.projectName,\n            reference_example_id: run.parent_run_id ? undefined : example_id\n        };\n    }\n    async persistRun(_run) {}\n    async onRunCreate(run) {\n        const persistedRun = await this._convertToCreate(run, this.exampleId);\n        await this.client.createRun(persistedRun);\n    }\n    async onRunUpdate(run) {\n        const runUpdate = {\n            end_time: run.end_time,\n            error: run.error,\n            outputs: run.outputs,\n            events: run.events,\n            inputs: run.inputs,\n            trace_id: run.trace_id,\n            dotted_order: run.dotted_order,\n            parent_run_id: run.parent_run_id\n        };\n        await this.client.updateRun(run.id, runUpdate);\n    }\n    getRun(id) {\n        return this.runMap.get(id);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy90cmFjZXJfbGFuZ2NoYWluLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBbUM7QUFDNkM7QUFDekM7QUFDaEMsTUFBTUksd0JBQXdCRCxnREFBVUE7SUFDM0NFLFlBQVlDLFNBQVMsQ0FBQyxDQUFDLENBQUU7UUFDckIsS0FBSyxDQUFDQTtRQUNOQyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGVBQWU7WUFDdkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGFBQWE7WUFDckNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVU7WUFDbENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLE1BQU0sRUFBRUMsU0FBUyxFQUFFQyxXQUFXLEVBQUVDLE1BQU0sRUFBRSxHQUFHVDtRQUMzQyxJQUFJLENBQUNRLFdBQVcsR0FDWkEsZUFDSWIscUVBQXNCQSxDQUFDLHdCQUN2QkEscUVBQXNCQSxDQUFDO1FBQy9CLElBQUksQ0FBQ1ksU0FBUyxHQUFHQTtRQUNqQixJQUFJLENBQUNFLE1BQU0sR0FBR0EsVUFBVSxJQUFJZiw2Q0FBTUEsQ0FBQyxDQUFDO0lBQ3hDO0lBQ0EsTUFBTWdCLGlCQUFpQkMsR0FBRyxFQUFFQyxhQUFhQyxTQUFTLEVBQUU7UUFDaEQsT0FBTztZQUNILEdBQUdGLEdBQUc7WUFDTkcsT0FBTztnQkFDSCxHQUFHSCxJQUFJRyxLQUFLO2dCQUNaQyxTQUFTLE1BQU1uQixvRUFBcUJBO1lBQ3hDO1lBQ0FvQixZQUFZSDtZQUNaSSxjQUFjLElBQUksQ0FBQ1QsV0FBVztZQUM5QlUsc0JBQXNCUCxJQUFJUSxhQUFhLEdBQUdOLFlBQVlEO1FBQzFEO0lBQ0o7SUFDQSxNQUFNUSxXQUFXQyxJQUFJLEVBQUUsQ0FBRTtJQUN6QixNQUFNQyxZQUFZWCxHQUFHLEVBQUU7UUFDbkIsTUFBTVksZUFBZSxNQUFNLElBQUksQ0FBQ2IsZ0JBQWdCLENBQUNDLEtBQUssSUFBSSxDQUFDSixTQUFTO1FBQ3BFLE1BQU0sSUFBSSxDQUFDRSxNQUFNLENBQUNlLFNBQVMsQ0FBQ0Q7SUFDaEM7SUFDQSxNQUFNRSxZQUFZZCxHQUFHLEVBQUU7UUFDbkIsTUFBTWUsWUFBWTtZQUNkQyxVQUFVaEIsSUFBSWdCLFFBQVE7WUFDdEJDLE9BQU9qQixJQUFJaUIsS0FBSztZQUNoQkMsU0FBU2xCLElBQUlrQixPQUFPO1lBQ3BCQyxRQUFRbkIsSUFBSW1CLE1BQU07WUFDbEJDLFFBQVFwQixJQUFJb0IsTUFBTTtZQUNsQkMsVUFBVXJCLElBQUlxQixRQUFRO1lBQ3RCQyxjQUFjdEIsSUFBSXNCLFlBQVk7WUFDOUJkLGVBQWVSLElBQUlRLGFBQWE7UUFDcEM7UUFDQSxNQUFNLElBQUksQ0FBQ1YsTUFBTSxDQUFDeUIsU0FBUyxDQUFDdkIsSUFBSXdCLEVBQUUsRUFBRVQ7SUFDeEM7SUFDQVUsT0FBT0QsRUFBRSxFQUFFO1FBQ1AsT0FBTyxJQUFJLENBQUNFLE1BQU0sQ0FBQ0MsR0FBRyxDQUFDSDtJQUMzQjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3RyYWNlcnMvdHJhY2VyX2xhbmdjaGFpbi5qcz80ZDg2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENsaWVudCB9IGZyb20gXCJsYW5nc21pdGhcIjtcbmltcG9ydCB7IGdldEVudmlyb25tZW50VmFyaWFibGUsIGdldFJ1bnRpbWVFbnZpcm9ubWVudCB9IGZyb20gXCIuLi91dGlscy9lbnYuanNcIjtcbmltcG9ydCB7IEJhc2VUcmFjZXIgfSBmcm9tIFwiLi9iYXNlLmpzXCI7XG5leHBvcnQgY2xhc3MgTGFuZ0NoYWluVHJhY2VyIGV4dGVuZHMgQmFzZVRyYWNlciB7XG4gICAgY29uc3RydWN0b3IoZmllbGRzID0ge30pIHtcbiAgICAgICAgc3VwZXIoZmllbGRzKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJsYW5nY2hhaW5fdHJhY2VyXCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInByb2plY3ROYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImV4YW1wbGVJZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjbGllbnRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgeyBleGFtcGxlSWQsIHByb2plY3ROYW1lLCBjbGllbnQgfSA9IGZpZWxkcztcbiAgICAgICAgdGhpcy5wcm9qZWN0TmFtZSA9XG4gICAgICAgICAgICBwcm9qZWN0TmFtZSA/P1xuICAgICAgICAgICAgICAgIGdldEVudmlyb25tZW50VmFyaWFibGUoXCJMQU5HQ0hBSU5fUFJPSkVDVFwiKSA/P1xuICAgICAgICAgICAgICAgIGdldEVudmlyb25tZW50VmFyaWFibGUoXCJMQU5HQ0hBSU5fU0VTU0lPTlwiKTtcbiAgICAgICAgdGhpcy5leGFtcGxlSWQgPSBleGFtcGxlSWQ7XG4gICAgICAgIHRoaXMuY2xpZW50ID0gY2xpZW50ID8/IG5ldyBDbGllbnQoe30pO1xuICAgIH1cbiAgICBhc3luYyBfY29udmVydFRvQ3JlYXRlKHJ1biwgZXhhbXBsZV9pZCA9IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgLi4ucnVuLFxuICAgICAgICAgICAgZXh0cmE6IHtcbiAgICAgICAgICAgICAgICAuLi5ydW4uZXh0cmEsXG4gICAgICAgICAgICAgICAgcnVudGltZTogYXdhaXQgZ2V0UnVudGltZUVudmlyb25tZW50KCksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2hpbGRfcnVuczogdW5kZWZpbmVkLFxuICAgICAgICAgICAgc2Vzc2lvbl9uYW1lOiB0aGlzLnByb2plY3ROYW1lLFxuICAgICAgICAgICAgcmVmZXJlbmNlX2V4YW1wbGVfaWQ6IHJ1bi5wYXJlbnRfcnVuX2lkID8gdW5kZWZpbmVkIDogZXhhbXBsZV9pZCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgYXN5bmMgcGVyc2lzdFJ1bihfcnVuKSB7IH1cbiAgICBhc3luYyBvblJ1bkNyZWF0ZShydW4pIHtcbiAgICAgICAgY29uc3QgcGVyc2lzdGVkUnVuID0gYXdhaXQgdGhpcy5fY29udmVydFRvQ3JlYXRlKHJ1biwgdGhpcy5leGFtcGxlSWQpO1xuICAgICAgICBhd2FpdCB0aGlzLmNsaWVudC5jcmVhdGVSdW4ocGVyc2lzdGVkUnVuKTtcbiAgICB9XG4gICAgYXN5bmMgb25SdW5VcGRhdGUocnVuKSB7XG4gICAgICAgIGNvbnN0IHJ1blVwZGF0ZSA9IHtcbiAgICAgICAgICAgIGVuZF90aW1lOiBydW4uZW5kX3RpbWUsXG4gICAgICAgICAgICBlcnJvcjogcnVuLmVycm9yLFxuICAgICAgICAgICAgb3V0cHV0czogcnVuLm91dHB1dHMsXG4gICAgICAgICAgICBldmVudHM6IHJ1bi5ldmVudHMsXG4gICAgICAgICAgICBpbnB1dHM6IHJ1bi5pbnB1dHMsXG4gICAgICAgICAgICB0cmFjZV9pZDogcnVuLnRyYWNlX2lkLFxuICAgICAgICAgICAgZG90dGVkX29yZGVyOiBydW4uZG90dGVkX29yZGVyLFxuICAgICAgICAgICAgcGFyZW50X3J1bl9pZDogcnVuLnBhcmVudF9ydW5faWQsXG4gICAgICAgIH07XG4gICAgICAgIGF3YWl0IHRoaXMuY2xpZW50LnVwZGF0ZVJ1bihydW4uaWQsIHJ1blVwZGF0ZSk7XG4gICAgfVxuICAgIGdldFJ1bihpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ydW5NYXAuZ2V0KGlkKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiQ2xpZW50IiwiZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSIsImdldFJ1bnRpbWVFbnZpcm9ubWVudCIsIkJhc2VUcmFjZXIiLCJMYW5nQ2hhaW5UcmFjZXIiLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJleGFtcGxlSWQiLCJwcm9qZWN0TmFtZSIsImNsaWVudCIsIl9jb252ZXJ0VG9DcmVhdGUiLCJydW4iLCJleGFtcGxlX2lkIiwidW5kZWZpbmVkIiwiZXh0cmEiLCJydW50aW1lIiwiY2hpbGRfcnVucyIsInNlc3Npb25fbmFtZSIsInJlZmVyZW5jZV9leGFtcGxlX2lkIiwicGFyZW50X3J1bl9pZCIsInBlcnNpc3RSdW4iLCJfcnVuIiwib25SdW5DcmVhdGUiLCJwZXJzaXN0ZWRSdW4iLCJjcmVhdGVSdW4iLCJvblJ1blVwZGF0ZSIsInJ1blVwZGF0ZSIsImVuZF90aW1lIiwiZXJyb3IiLCJvdXRwdXRzIiwiZXZlbnRzIiwiaW5wdXRzIiwidHJhY2VfaWQiLCJkb3R0ZWRfb3JkZXIiLCJ1cGRhdGVSdW4iLCJpZCIsImdldFJ1biIsInJ1bk1hcCIsImdldCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tracers/tracer_langchain.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/tracers/tracer_langchain_v1.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/tracers/tracer_langchain_v1.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LangChainTracerV1: () => (/* binding */ LangChainTracerV1)\n/* harmony export */ });\n/* harmony import */ var _messages_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../messages/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/index.js\");\n/* harmony import */ var _utils_env_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/env.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/env.js\");\n/* harmony import */ var _base_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base.js */ \"(rsc)/./node_modules/@langchain/core/dist/tracers/base.js\");\n\n\n\n/** @deprecated Use LangChainTracer instead. */ class LangChainTracerV1 extends _base_js__WEBPACK_IMPORTED_MODULE_2__.BaseTracer {\n    constructor(){\n        super();\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"langchain_tracer\"\n        });\n        Object.defineProperty(this, \"endpoint\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"LANGCHAIN_ENDPOINT\") || \"http://localhost:1984\"\n        });\n        Object.defineProperty(this, \"headers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: {\n                \"Content-Type\": \"application/json\"\n            }\n        });\n        Object.defineProperty(this, \"session\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        const apiKey = (0,_utils_env_js__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"LANGCHAIN_API_KEY\");\n        if (apiKey) {\n            this.headers[\"x-api-key\"] = apiKey;\n        }\n    }\n    async newSession(sessionName) {\n        const sessionCreate = {\n            start_time: Date.now(),\n            name: sessionName\n        };\n        const session = await this.persistSession(sessionCreate);\n        this.session = session;\n        return session;\n    }\n    async loadSession(sessionName) {\n        const endpoint = `${this.endpoint}/sessions?name=${sessionName}`;\n        return this._handleSessionResponse(endpoint);\n    }\n    async loadDefaultSession() {\n        const endpoint = `${this.endpoint}/sessions?name=default`;\n        return this._handleSessionResponse(endpoint);\n    }\n    async convertV2RunToRun(run) {\n        const session = this.session ?? await this.loadDefaultSession();\n        const serialized = run.serialized;\n        let runResult;\n        if (run.run_type === \"llm\") {\n            const prompts = run.inputs.prompts ? run.inputs.prompts : run.inputs.messages.map((x)=>(0,_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.getBufferString)(x));\n            const llmRun = {\n                uuid: run.id,\n                start_time: run.start_time,\n                end_time: run.end_time,\n                execution_order: run.execution_order,\n                child_execution_order: run.child_execution_order,\n                serialized,\n                type: run.run_type,\n                session_id: session.id,\n                prompts,\n                response: run.outputs\n            };\n            runResult = llmRun;\n        } else if (run.run_type === \"chain\") {\n            const child_runs = await Promise.all(run.child_runs.map((child_run)=>this.convertV2RunToRun(child_run)));\n            const chainRun = {\n                uuid: run.id,\n                start_time: run.start_time,\n                end_time: run.end_time,\n                execution_order: run.execution_order,\n                child_execution_order: run.child_execution_order,\n                serialized,\n                type: run.run_type,\n                session_id: session.id,\n                inputs: run.inputs,\n                outputs: run.outputs,\n                child_llm_runs: child_runs.filter((child_run)=>child_run.type === \"llm\"),\n                child_chain_runs: child_runs.filter((child_run)=>child_run.type === \"chain\"),\n                child_tool_runs: child_runs.filter((child_run)=>child_run.type === \"tool\")\n            };\n            runResult = chainRun;\n        } else if (run.run_type === \"tool\") {\n            const child_runs = await Promise.all(run.child_runs.map((child_run)=>this.convertV2RunToRun(child_run)));\n            const toolRun = {\n                uuid: run.id,\n                start_time: run.start_time,\n                end_time: run.end_time,\n                execution_order: run.execution_order,\n                child_execution_order: run.child_execution_order,\n                serialized,\n                type: run.run_type,\n                session_id: session.id,\n                tool_input: run.inputs.input,\n                output: run.outputs?.output,\n                action: JSON.stringify(serialized),\n                child_llm_runs: child_runs.filter((child_run)=>child_run.type === \"llm\"),\n                child_chain_runs: child_runs.filter((child_run)=>child_run.type === \"chain\"),\n                child_tool_runs: child_runs.filter((child_run)=>child_run.type === \"tool\")\n            };\n            runResult = toolRun;\n        } else {\n            throw new Error(`Unknown run type: ${run.run_type}`);\n        }\n        return runResult;\n    }\n    async persistRun(run) {\n        let endpoint;\n        let v1Run;\n        if (run.run_type !== undefined) {\n            v1Run = await this.convertV2RunToRun(run);\n        } else {\n            v1Run = run;\n        }\n        if (v1Run.type === \"llm\") {\n            endpoint = `${this.endpoint}/llm-runs`;\n        } else if (v1Run.type === \"chain\") {\n            endpoint = `${this.endpoint}/chain-runs`;\n        } else {\n            endpoint = `${this.endpoint}/tool-runs`;\n        }\n        const response = await fetch(endpoint, {\n            method: \"POST\",\n            headers: this.headers,\n            body: JSON.stringify(v1Run)\n        });\n        if (!response.ok) {\n            console.error(`Failed to persist run: ${response.status} ${response.statusText}`);\n        }\n    }\n    async persistSession(sessionCreate) {\n        const endpoint = `${this.endpoint}/sessions`;\n        const response = await fetch(endpoint, {\n            method: \"POST\",\n            headers: this.headers,\n            body: JSON.stringify(sessionCreate)\n        });\n        if (!response.ok) {\n            console.error(`Failed to persist session: ${response.status} ${response.statusText}, using default session.`);\n            return {\n                id: 1,\n                ...sessionCreate\n            };\n        }\n        return {\n            id: (await response.json()).id,\n            ...sessionCreate\n        };\n    }\n    async _handleSessionResponse(endpoint) {\n        const response = await fetch(endpoint, {\n            method: \"GET\",\n            headers: this.headers\n        });\n        let tracerSession;\n        if (!response.ok) {\n            console.error(`Failed to load session: ${response.status} ${response.statusText}`);\n            tracerSession = {\n                id: 1,\n                start_time: Date.now()\n            };\n            this.session = tracerSession;\n            return tracerSession;\n        }\n        const resp = await response.json();\n        if (resp.length === 0) {\n            tracerSession = {\n                id: 1,\n                start_time: Date.now()\n            };\n            this.session = tracerSession;\n            return tracerSession;\n        }\n        [tracerSession] = resp;\n        this.session = tracerSession;\n        return tracerSession;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy90cmFjZXJfbGFuZ2NoYWluX3YxLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBdUQ7QUFDRTtBQUNsQjtBQUN2Qyw2Q0FBNkMsR0FDdEMsTUFBTUcsMEJBQTBCRCxnREFBVUE7SUFDN0NFLGFBQWM7UUFDVixLQUFLO1FBQ0xDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsUUFBUTtZQUNoQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsWUFBWTtZQUNwQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBT1QscUVBQXNCQSxDQUFDLHlCQUF5QjtRQUMzRDtRQUNBSSxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFdBQVc7WUFDbkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87Z0JBQ0gsZ0JBQWdCO1lBQ3BCO1FBQ0o7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxXQUFXO1lBQ25DQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxNQUFNQyxTQUFTVixxRUFBc0JBLENBQUM7UUFDdEMsSUFBSVUsUUFBUTtZQUNSLElBQUksQ0FBQ0MsT0FBTyxDQUFDLFlBQVksR0FBR0Q7UUFDaEM7SUFDSjtJQUNBLE1BQU1FLFdBQVdDLFdBQVcsRUFBRTtRQUMxQixNQUFNQyxnQkFBZ0I7WUFDbEJDLFlBQVlDLEtBQUtDLEdBQUc7WUFDcEJDLE1BQU1MO1FBQ1Y7UUFDQSxNQUFNTSxVQUFVLE1BQU0sSUFBSSxDQUFDQyxjQUFjLENBQUNOO1FBQzFDLElBQUksQ0FBQ0ssT0FBTyxHQUFHQTtRQUNmLE9BQU9BO0lBQ1g7SUFDQSxNQUFNRSxZQUFZUixXQUFXLEVBQUU7UUFDM0IsTUFBTVMsV0FB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QUFPLEdBQUd1RDtZQUNmLE9BQU9BO1FBQ1g7UUFDQSxNQUFNQyxPQUFRLE1BQU1oQyxTQUFTOEIsSUFBSTtRQUNqQyxJQUFJRSxLQUFLQyxNQUFNLEtBQUssR0FBRztZQUNuQkYsZ0JBQWdCO2dCQUNackMsSUFBSTtnQkFDSnRCLFlBQVlDLEtBQUtDLEdBQUc7WUFDeEI7WUFDQSxJQUFJLENBQUNFLE9BQU8sR0FBR3VEO1lBQ2YsT0FBT0E7UUFDWDtRQUNBLENBQUNBLGNBQWMsR0FBR0M7UUFDbEIsSUFBSSxDQUFDeEQsT0FBTyxHQUFHdUQ7UUFDZixPQUFPQTtJQUNYO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1mb3JtLWJ1aWxkZXItdHV0b3JpYWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdHJhY2Vycy90cmFjZXJfbGFuZ2NoYWluX3YxLmpzP2Q0MzYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0QnVmZmVyU3RyaW5nIH0gZnJvbSBcIi4uL21lc3NhZ2VzL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBnZXRFbnZpcm9ubWVudFZhcmlhYmxlIH0gZnJvbSBcIi4uL3V0aWxzL2Vudi5qc1wiO1xuaW1wb3J0IHsgQmFzZVRyYWNlciB9IGZyb20gXCIuL2Jhc2UuanNcIjtcbi8qKiBAZGVwcmVjYXRlZCBVc2UgTGFuZ0NoYWluVHJhY2VyIGluc3RlYWQuICovXG5leHBvcnQgY2xhc3MgTGFuZ0NoYWluVHJhY2VyVjEgZXh0ZW5kcyBCYXNlVHJhY2VyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJsYW5nY2hhaW5fdHJhY2VyXCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImVuZHBvaW50XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiTEFOR0NIQUlOX0VORFBPSU5UXCIpIHx8IFwiaHR0cDovL2xvY2FsaG9zdDoxOTg0XCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImhlYWRlcnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNlc3Npb25cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgYXBpS2V5ID0gZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkxBTkdDSEFJTl9BUElfS0VZXCIpO1xuICAgICAgICBpZiAoYXBpS2V5KSB7XG4gICAgICAgICAgICB0aGlzLmhlYWRlcnNbXCJ4LWFwaS1rZXlcIl0gPSBhcGlLZXk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgbmV3U2Vzc2lvbihzZXNzaW9uTmFtZSkge1xuICAgICAgICBjb25zdCBzZXNzaW9uQ3JlYXRlID0ge1xuICAgICAgICAgICAgc3RhcnRfdGltZTogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIG5hbWU6IHNlc3Npb25OYW1lLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgdGhpcy5wZXJzaXN0U2Vzc2lvbihzZXNzaW9uQ3JlYXRlKTtcbiAgICAgICAgdGhpcy5zZXNzaW9uID0gc2Vzc2lvbjtcbiAgICAgICAgcmV0dXJuIHNlc3Npb247XG4gICAgfVxuICAgIGFzeW5jIGxvYWRTZXNzaW9uKHNlc3Npb25OYW1lKSB7XG4gICAgICAgIGNvbnN0IGVuZHBvaW50ID0gYCR7dGhpcy5lbmRwb2ludH0vc2Vzc2lvbnM/bmFtZT0ke3Nlc3Npb25OYW1lfWA7XG4gICAgICAgIHJldHVybiB0aGlzLl9oYW5kbGVTZXNzaW9uUmVzcG9uc2UoZW5kcG9pbnQpO1xuICAgIH1cbiAgICBhc3luYyBsb2FkRGVmYXVsdFNlc3Npb24oKSB7XG4gICAgICAgIGNvbnN0IGVuZHBvaW50ID0gYCR7dGhpcy5lbmRwb2ludH0vc2Vzc2lvbnM/bmFtZT1kZWZhdWx0YDtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hhbmRsZVNlc3Npb25SZXNwb25zZShlbmRwb2ludCk7XG4gICAgfVxuICAgIGFzeW5jIGNvbnZlcnRWMlJ1blRvUnVuKHJ1bikge1xuICAgICAgICBjb25zdCBzZXNzaW9uID0gdGhpcy5zZXNzaW9uID8/IChhd2FpdCB0aGlzLmxvYWREZWZhdWx0U2Vzc2lvbigpKTtcbiAgICAgICAgY29uc3Qgc2VyaWFsaXplZCA9IHJ1bi5zZXJpYWxpemVkO1xuICAgICAgICBsZXQgcnVuUmVzdWx0O1xuICAgICAgICBpZiAocnVuLnJ1bl90eXBlID09PSBcImxsbVwiKSB7XG4gICAgICAgICAgICBjb25zdCBwcm9tcHRzID0gcnVuLmlucHV0cy5wcm9tcHRzXG4gICAgICAgICAgICAgICAgPyBydW4uaW5wdXRzLnByb21wdHNcbiAgICAgICAgICAgICAgICA6IHJ1bi5pbnB1dHMubWVzc2FnZXMubWFwKCh4KSA9PiBnZXRCdWZmZXJTdHJpbmcoeCkpO1xuICAgICAgICAgICAgY29uc3QgbGxtUnVuID0ge1xuICAgICAgICAgICAgICAgIHV1aWQ6IHJ1bi5pZCxcbiAgICAgICAgICAgICAgICBzdGFydF90aW1lOiBydW4uc3RhcnRfdGltZSxcbiAgICAgICAgICAgICAgICBlbmRfdGltZTogcnVuLmVuZF90aW1lLFxuICAgICAgICAgICAgICAgIGV4ZWN1dGlvbl9vcmRlcjogcnVuLmV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgICAgICBjaGlsZF9leGVjdXRpb25fb3JkZXI6IHJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICAgICAgc2VyaWFsaXplZCxcbiAgICAgICAgICAgICAgICB0eXBlOiBydW4ucnVuX3R5cGUsXG4gICAgICAgICAgICAgICAgc2Vzc2lvbl9pZDogc2Vzc2lvbi5pZCxcbiAgICAgICAgICAgICAgICBwcm9tcHRzLFxuICAgICAgICAgICAgICAgIHJlc3BvbnNlOiBydW4ub3V0cHV0cyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBydW5SZXN1bHQgPSBsbG1SdW47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocnVuLnJ1bl90eXBlID09PSBcImNoYWluXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkX3J1bnMgPSBhd2FpdCBQcm9taXNlLmFsbChydW4uY2hpbGRfcnVucy5tYXAoKGNoaWxkX3J1bikgPT4gdGhpcy5jb252ZXJ0VjJSdW5Ub1J1bihjaGlsZF9ydW4pKSk7XG4gICAgICAgICAgICBjb25zdCBjaGFpblJ1biA9IHtcbiAgICAgICAgICAgICAgICB1dWlkOiBydW4uaWQsXG4gICAgICAgICAgICAgICAgc3RhcnRfdGltZTogcnVuLnN0YXJ0X3RpbWUsXG4gICAgICAgICAgICAgICAgZW5kX3RpbWU6IHJ1bi5lbmRfdGltZSxcbiAgICAgICAgICAgICAgICBleGVjdXRpb25fb3JkZXI6IHJ1bi5leGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICAgICAgY2hpbGRfZXhlY3V0aW9uX29yZGVyOiBydW4uY2hpbGRfZXhlY3V0aW9uX29yZGVyLFxuICAgICAgICAgICAgICAgIHNlcmlhbGl6ZWQsXG4gICAgICAgICAgICAgICAgdHlwZTogcnVuLnJ1bl90eXBlLFxuICAgICAgICAgICAgICAgIHNlc3Npb25faWQ6IHNlc3Npb24uaWQsXG4gICAgICAgICAgICAgICAgaW5wdXRzOiBydW4uaW5wdXRzLFxuICAgICAgICAgICAgICAgIG91dHB1dHM6IHJ1bi5vdXRwdXRzLFxuICAgICAgICAgICAgICAgIGNoaWxkX2xsbV9ydW5zOiBjaGlsZF9ydW5zLmZpbHRlcigoY2hpbGRfcnVuKSA9PiBjaGlsZF9ydW4udHlwZSA9PT0gXCJsbG1cIiksXG4gICAgICAgICAgICAgICAgY2hpbGRfY2hhaW5fcnVuczogY2hpbGRfcnVucy5maWx0ZXIoKGNoaWxkX3J1bikgPT4gY2hpbGRfcnVuLnR5cGUgPT09IFwiY2hhaW5cIiksXG4gICAgICAgICAgICAgICAgY2hpbGRfdG9vbF9ydW5zOiBjaGlsZF9ydW5zLmZpbHRlcigoY2hpbGRfcnVuKSA9PiBjaGlsZF9ydW4udHlwZSA9PT0gXCJ0b29sXCIpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJ1blJlc3VsdCA9IGNoYWluUnVuO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHJ1bi5ydW5fdHlwZSA9PT0gXCJ0b29sXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkX3J1bnMgPSBhd2FpdCBQcm9taXNlLmFsbChydW4uY2hpbGRfcnVucy5tYXAoKGNoaWxkX3J1bikgPT4gdGhpcy5jb252ZXJ0VjJSdW5Ub1J1bihjaGlsZF9ydW4pKSk7XG4gICAgICAgICAgICBjb25zdCB0b29sUnVuID0ge1xuICAgICAgICAgICAgICAgIHV1aWQ6IHJ1bi5pZCxcbiAgICAgICAgICAgICAgICBzdGFydF90aW1lOiBydW4uc3RhcnRfdGltZSxcbiAgICAgICAgICAgICAgICBlbmRfdGltZTogcnVuLmVuZF90aW1lLFxuICAgICAgICAgICAgICAgIGV4ZWN1dGlvbl9vcmRlcjogcnVuLmV4ZWN1dGlvbl9vcmRlcixcbiAgICAgICAgICAgICAgICBjaGlsZF9leGVjdXRpb25fb3JkZXI6IHJ1bi5jaGlsZF9leGVjdXRpb25fb3JkZXIsXG4gICAgICAgICAgICAgICAgc2VyaWFsaXplZCxcbiAgICAgICAgICAgICAgICB0eXBlOiBydW4ucnVuX3R5cGUsXG4gICAgICAgICAgICAgICAgc2Vzc2lvbl9pZDogc2Vzc2lvbi5pZCxcbiAgICAgICAgICAgICAgICB0b29sX2lucHV0OiBydW4uaW5wdXRzLmlucHV0LFxuICAgICAgICAgICAgICAgIG91dHB1dDogcnVuLm91dHB1dHM/Lm91dHB1dCxcbiAgICAgICAgICAgICAgICBhY3Rpb246IEpTT04uc3RyaW5naWZ5KHNlcmlhbGl6ZWQpLFxuICAgICAgICAgICAgICAgIGNoaWxkX2xsbV9ydW5zOiBjaGlsZF9ydW5zLmZpbHRlcigoY2hpbGRfcnVuKSA9PiBjaGlsZF9ydW4udHlwZSA9PT0gXCJsbG1cIiksXG4gICAgICAgICAgICAgICAgY2hpbGRfY2hhaW5fcnVuczogY2hpbGRfcnVucy5maWx0ZXIoKGNoaWxkX3J1bikgPT4gY2hpbGRfcnVuLnR5cGUgPT09IFwiY2hhaW5cIiksXG4gICAgICAgICAgICAgICAgY2hpbGRfdG9vbF9ydW5zOiBjaGlsZF9ydW5zLmZpbHRlcigoY2hpbGRfcnVuKSA9PiBjaGlsZF9ydW4udHlwZSA9PT0gXCJ0b29sXCIpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJ1blJlc3VsdCA9IHRvb2xSdW47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gcnVuIHR5cGU6ICR7cnVuLnJ1bl90eXBlfWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBydW5SZXN1bHQ7XG4gICAgfVxuICAgIGFzeW5jIHBlcnNpc3RSdW4ocnVuKSB7XG4gICAgICAgIGxldCBlbmRwb2ludDtcbiAgICAgICAgbGV0IHYxUnVuO1xuICAgICAgICBpZiAocnVuLnJ1bl90eXBlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHYxUnVuID0gYXdhaXQgdGhpcy5jb252ZXJ0VjJSdW5Ub1J1bihydW4pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdjFSdW4gPSBydW47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHYxUnVuLnR5cGUgPT09IFwibGxtXCIpIHtcbiAgICAgICAgICAgIGVuZHBvaW50ID0gYCR7dGhpcy5lbmRwb2ludH0vbGxtLXJ1bnNgO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHYxUnVuLnR5cGUgPT09IFwiY2hhaW5cIikge1xuICAgICAgICAgICAgZW5kcG9pbnQgPSBgJHt0aGlzLmVuZHBvaW50fS9jaGFpbi1ydW5zYDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGVuZHBvaW50ID0gYCR7dGhpcy5lbmRwb2ludH0vdG9vbC1ydW5zYDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGVuZHBvaW50LCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodjFSdW4pLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIHBlcnNpc3QgcnVuOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIHBlcnNpc3RTZXNzaW9uKHNlc3Npb25DcmVhdGUpIHtcbiAgICAgICAgY29uc3QgZW5kcG9pbnQgPSBgJHt0aGlzLmVuZHBvaW50fS9zZXNzaW9uc2A7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goZW5kcG9pbnQsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShzZXNzaW9uQ3JlYXRlKSxcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBwZXJzaXN0IHNlc3Npb246ICR7cmVzcG9uc2Uuc3RhdHVzfSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9LCB1c2luZyBkZWZhdWx0IHNlc3Npb24uYCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlkOiAxLFxuICAgICAgICAgICAgICAgIC4uLnNlc3Npb25DcmVhdGUsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogKGF3YWl0IHJlc3BvbnNlLmpzb24oKSkuaWQsXG4gICAgICAgICAgICAuLi5zZXNzaW9uQ3JlYXRlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBhc3luYyBfaGFuZGxlU2Vzc2lvblJlc3BvbnNlKGVuZHBvaW50KSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goZW5kcG9pbnQsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCB0cmFjZXJTZXNzaW9uO1xuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gbG9hZCBzZXNzaW9uOiAke3Jlc3BvbnNlLnN0YXR1c30gJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgICAgICAgdHJhY2VyU2Vzc2lvbiA9IHtcbiAgICAgICAgICAgICAgICBpZDogMSxcbiAgICAgICAgICAgICAgICBzdGFydF90aW1lOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbiA9IHRyYWNlclNlc3Npb247XG4gICAgICAgICAgICByZXR1cm4gdHJhY2VyU2Vzc2lvbjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXNwID0gKGF3YWl0IHJlc3BvbnNlLmpzb24oKSk7XG4gICAgICAgIGlmIChyZXNwLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgdHJhY2VyU2Vzc2lvbiA9IHtcbiAgICAgICAgICAgICAgICBpZDogMSxcbiAgICAgICAgICAgICAgICBzdGFydF90aW1lOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvbiA9IHRyYWNlclNlc3Npb247XG4gICAgICAgICAgICByZXR1cm4gdHJhY2VyU2Vzc2lvbjtcbiAgICAgICAgfVxuICAgICAgICBbdHJhY2VyU2Vzc2lvbl0gPSByZXNwO1xuICAgICAgICB0aGlzLnNlc3Npb24gPSB0cmFjZXJTZXNzaW9uO1xuICAgICAgICByZXR1cm4gdHJhY2VyU2Vzc2lvbjtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiZ2V0QnVmZmVyU3RyaW5nIiwiZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSIsIkJhc2VUcmFjZXIiLCJMYW5nQ2hhaW5UcmFjZXJWMSIsImNvbnN0cnVjdG9yIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImFwaUtleSIsImhlYWRlcnMiLCJuZXdTZXNzaW9uIiwic2Vzc2lvbk5hbWUiLCJzZXNzaW9uQ3JlYXRlIiwic3RhcnRfdGltZSIsIkRhdGUiLCJub3ciLCJuYW1lIiwic2Vzc2lvbiIsInBlcnNpc3RTZXNzaW9uIiwibG9hZFNlc3Npb24iLCJlbmRwb2ludCIsIl9oYW5kbGVTZXNzaW9uUmVzcG9uc2UiLCJsb2FkRGVmYXVsdFNlc3Npb24iLCJjb252ZXJ0VjJSdW5Ub1J1biIsInJ1biIsInNlcmlhbGl6ZWQiLCJydW5SZXN1bHQiLCJydW5fdHlwZSIsInByb21wdHMiLCJpbnB1dHMiLCJtZXNzYWdlcyIsIm1hcCIsIngiLCJsbG1SdW4iLCJ1dWlkIiwiaWQiLCJlbmRfdGltZSIsImV4ZWN1dGlvbl9vcmRlciIsImNoaWxkX2V4ZWN1dGlvbl9vcmRlciIsInR5cGUiLCJzZXNzaW9uX2lkIiwicmVzcG9uc2UiLCJvdXRwdXRzIiwiY2hpbGRfcnVucyIsIlByb21pc2UiLCJhbGwiLCJjaGlsZF9ydW4iLCJjaGFpblJ1biIsImNoaWxkX2xsbV9ydW5zIiwiZmlsdGVyIiwiY2hpbGRfY2hhaW5fcnVucyIsImNoaWxkX3Rvb2xfcnVucyIsInRvb2xSdW4iLCJ0b29sX2lucHV0IiwiaW5wdXQiLCJvdXRwdXQiLCJhY3Rpb24iLCJKU09OIiwic3RyaW5naWZ5IiwiRXJyb3IiLCJwZXJzaXN0UnVuIiwidjFSdW4iLCJ1bmRlZmluZWQiLCJmZXRjaCIsIm1ldGhvZCIsImJvZHkiLCJvayIsImNvbnNvbGUiLCJlcnJvciIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJqc29uIiwidHJhY2VyU2Vzc2lvbiIsInJlc3AiLCJsZW5ndGgiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/tracers/tracer_langchain_v1.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/index.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/index.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Validator: () => (/* reexport safe */ _src_index_js__WEBPACK_IMPORTED_MODULE_0__.Validator),\n/* harmony export */   deepCompareStrict: () => (/* reexport safe */ _src_index_js__WEBPACK_IMPORTED_MODULE_0__.deepCompareStrict),\n/* harmony export */   dereference: () => (/* reexport safe */ _src_index_js__WEBPACK_IMPORTED_MODULE_0__.dereference),\n/* harmony export */   encodePointer: () => (/* reexport safe */ _src_index_js__WEBPACK_IMPORTED_MODULE_0__.encodePointer),\n/* harmony export */   escapePointer: () => (/* reexport safe */ _src_index_js__WEBPACK_IMPORTED_MODULE_0__.escapePointer),\n/* harmony export */   fastFormat: () => (/* reexport safe */ _src_index_js__WEBPACK_IMPORTED_MODULE_0__.fastFormat),\n/* harmony export */   fullFormat: () => (/* reexport safe */ _src_index_js__WEBPACK_IMPORTED_MODULE_0__.fullFormat),\n/* harmony export */   ignoredKeyword: () => (/* reexport safe */ _src_index_js__WEBPACK_IMPORTED_MODULE_0__.ignoredKeyword),\n/* harmony export */   initialBaseURI: () => (/* reexport safe */ _src_index_js__WEBPACK_IMPORTED_MODULE_0__.initialBaseURI),\n/* harmony export */   schemaArrayKeyword: () => (/* reexport safe */ _src_index_js__WEBPACK_IMPORTED_MODULE_0__.schemaArrayKeyword),\n/* harmony export */   schemaKeyword: () => (/* reexport safe */ _src_index_js__WEBPACK_IMPORTED_MODULE_0__.schemaKeyword),\n/* harmony export */   schemaMapKeyword: () => (/* reexport safe */ _src_index_js__WEBPACK_IMPORTED_MODULE_0__.schemaMapKeyword),\n/* harmony export */   ucs2length: () => (/* reexport safe */ _src_index_js__WEBPACK_IMPORTED_MODULE_0__.ucs2length),\n/* harmony export */   validate: () => (/* reexport safe */ _src_index_js__WEBPACK_IMPORTED_MODULE_0__.validate)\n/* harmony export */ });\n/* harmony import */ var _src_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./src/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvQGNmd29ya2VyL2pzb24tc2NoZW1hL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUErQiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLWZvcm0tYnVpbGRlci10dXRvcmlhbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9AY2Z3b3JrZXIvanNvbi1zY2hlbWEvaW5kZXguanM/Y2QwMSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tIFwiLi9zcmMvaW5kZXguanNcIjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/deep-compare-strict.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/deep-compare-strict.js ***!
  \**************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deepCompareStrict: () => (/* binding */ deepCompareStrict)\n/* harmony export */ });\nfunction deepCompareStrict(a, b) {\n    const typeofa = typeof a;\n    if (typeofa !== typeof b) {\n        return false;\n    }\n    if (Array.isArray(a)) {\n        if (!Array.isArray(b)) {\n            return false;\n        }\n        const length = a.length;\n        if (length !== b.length) {\n            return false;\n        }\n        for(let i = 0; i < length; i++){\n            if (!deepCompareStrict(a[i], b[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n    if (typeofa === \"object\") {\n        if (!a || !b) {\n            return a === b;\n        }\n        const aKeys = Object.keys(a);\n        const bKeys = Object.keys(b);\n        const length = aKeys.length;\n        if (length !== bKeys.length) {\n            return false;\n        }\n        for (const k of aKeys){\n            if (!deepCompareStrict(a[k], b[k])) {\n                return false;\n            }\n        }\n        return true;\n    }\n    return a === b;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvQGNmd29ya2VyL2pzb24tc2NoZW1hL3NyYy9kZWVwLWNvbXBhcmUtc3RyaWN0LmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTyxTQUFTQSxrQkFBa0JDLENBQUMsRUFBRUMsQ0FBQztJQUNsQyxNQUFNQyxVQUFVLE9BQU9GO0lBQ3ZCLElBQUlFLFlBQVksT0FBT0QsR0FBRztRQUN0QixPQUFPO0lBQ1g7SUFDQSxJQUFJRSxNQUFNQyxPQUFPLENBQUNKLElBQUk7UUFDbEIsSUFBSSxDQUFDRyxNQUFNQyxPQUFPLENBQUNILElBQUk7WUFDbkIsT0FBTztRQUNYO1FBQ0EsTUFBTUksU0FBU0wsRUFBRUssTUFBTTtRQUN2QixJQUFJQSxXQUFXSixFQUFFSSxNQUFNLEVBQUU7WUFDckIsT0FBTztRQUNYO1FBQ0EsSUFBSyxJQUFJQyxJQUFJLEdBQUdBLElBQUlELFFBQVFDLElBQUs7WUFDN0IsSUFBSSxDQUFDUCxrQkFBa0JDLENBQUMsQ0FBQ00sRUFBRSxFQUFFTCxDQUFDLENBQUNLLEVBQUUsR0FBRztnQkFDaEMsT0FBTztZQUNYO1FBQ0o7UUFDQSxPQUFPO0lBQ1g7SUFDQSxJQUFJSixZQUFZLFVBQVU7UUFDdEIsSUFBSSxDQUFDRixLQUFLLENBQUNDLEdBQUc7WUFDVixPQUFPRCxNQUFNQztRQUNqQjtRQUNBLE1BQU1NLFFBQVFDLE9BQU9DLElBQUksQ0FBQ1Q7UUFDMUIsTUFBTVUsUUFBUUYsT0FBT0MsSUFBSSxDQUFDUjtRQUMxQixNQUFNSSxTQUFTRSxNQUFNRixNQUFNO1FBQzNCLElBQUlBLFdBQVdLLE1BQU1MLE1BQU0sRUFBRTtZQUN6QixPQUFPO1FBQ1g7UUFDQSxLQUFLLE1BQU1NLEtBQUtKLE1BQU87WUFDbkIsSUFBSSxDQUFDUixrQkFBa0JDLENBQUMsQ0FBQ1csRUFBRSxFQUFFVixDQUFDLENBQUNVLEVBQUUsR0FBRztnQkFDaEMsT0FBTztZQUNYO1FBQ0o7UUFDQSxPQUFPO0lBQ1g7SUFDQSxPQUFPWCxNQUFNQztBQUNqQiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLWZvcm0tYnVpbGRlci10dXRvcmlhbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9AY2Z3b3JrZXIvanNvbi1zY2hlbWEvc3JjL2RlZXAtY29tcGFyZS1zdHJpY3QuanM/Mjg0NyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gZGVlcENvbXBhcmVTdHJpY3QoYSwgYikge1xuICAgIGNvbnN0IHR5cGVvZmEgPSB0eXBlb2YgYTtcbiAgICBpZiAodHlwZW9mYSAhPT0gdHlwZW9mIGIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShhKSkge1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoYikpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsZW5ndGggPSBhLmxlbmd0aDtcbiAgICAgICAgaWYgKGxlbmd0aCAhPT0gYi5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoIWRlZXBDb21wYXJlU3RyaWN0KGFbaV0sIGJbaV0pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mYSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICBpZiAoIWEgfHwgIWIpIHtcbiAgICAgICAgICAgIHJldHVybiBhID09PSBiO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGFLZXlzID0gT2JqZWN0LmtleXMoYSk7XG4gICAgICAgIGNvbnN0IGJLZXlzID0gT2JqZWN0LmtleXMoYik7XG4gICAgICAgIGNvbnN0IGxlbmd0aCA9IGFLZXlzLmxlbmd0aDtcbiAgICAgICAgaWYgKGxlbmd0aCAhPT0gYktleXMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBrIG9mIGFLZXlzKSB7XG4gICAgICAgICAgICBpZiAoIWRlZXBDb21wYXJlU3RyaWN0KGFba10sIGJba10pKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gYSA9PT0gYjtcbn1cbiJdLCJuYW1lcyI6WyJkZWVwQ29tcGFyZVN0cmljdCIsImEiLCJiIiwidHlwZW9mYSIsIkFycmF5IiwiaXNBcnJheSIsImxlbmd0aCIsImkiLCJhS2V5cyIsIk9iamVjdCIsImtleXMiLCJiS2V5cyIsImsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/deep-compare-strict.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/dereference.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/dereference.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   dereference: () => (/* binding */ dereference),\n/* harmony export */   ignoredKeyword: () => (/* binding */ ignoredKeyword),\n/* harmony export */   initialBaseURI: () => (/* binding */ initialBaseURI),\n/* harmony export */   schemaArrayKeyword: () => (/* binding */ schemaArrayKeyword),\n/* harmony export */   schemaKeyword: () => (/* binding */ schemaKeyword),\n/* harmony export */   schemaMapKeyword: () => (/* binding */ schemaMapKeyword)\n/* harmony export */ });\n/* harmony import */ var _pointer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./pointer.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/pointer.js\");\n\nconst schemaKeyword = {\n    additionalItems: true,\n    unevaluatedItems: true,\n    items: true,\n    contains: true,\n    additionalProperties: true,\n    unevaluatedProperties: true,\n    propertyNames: true,\n    not: true,\n    if: true,\n    then: true,\n    else: true\n};\nconst schemaArrayKeyword = {\n    prefixItems: true,\n    items: true,\n    allOf: true,\n    anyOf: true,\n    oneOf: true\n};\nconst schemaMapKeyword = {\n    $defs: true,\n    definitions: true,\n    properties: true,\n    patternProperties: true,\n    dependentSchemas: true\n};\nconst ignoredKeyword = {\n    id: true,\n    $id: true,\n    $ref: true,\n    $schema: true,\n    $anchor: true,\n    $vocabulary: true,\n    $comment: true,\n    default: true,\n    enum: true,\n    const: true,\n    required: true,\n    type: true,\n    maximum: true,\n    minimum: true,\n    exclusiveMaximum: true,\n    exclusiveMinimum: true,\n    multipleOf: true,\n    maxLength: true,\n    minLength: true,\n    pattern: true,\n    format: true,\n    maxItems: true,\n    minItems: true,\n    uniqueItems: true,\n    maxProperties: true,\n    minProperties: true\n};\n/**\n * Default base URI for schemas without an $id.\n * https://json-schema.org/draft/2019-09/json-schema-core.html#initial-base\n * https://tools.ietf.org/html/rfc3986#section-5.1\n */ let initialBaseURI = // @ts-ignore\ntypeof self !== \"undefined\" && self.location && self.location.origin !== \"null\" ? /* #__PURE__ */ new URL(self.location.origin + self.location.pathname + location.search) : /* #__PURE__ */ new URL(\"https://github.com/cfworker\");\nfunction dereference(schema, lookup = Object.create(null), baseURI = initialBaseURI, basePointer = \"\") {\n    if (schema && typeof schema === \"object\" && !Array.isArray(schema)) {\n        const id = schema.$id || schema.id;\n        if (id) {\n            const url = new URL(id, baseURI.href);\n            if (url.hash.length > 1) {\n                lookup[url.href] = schema;\n            } else {\n                url.hash = \"\"; // normalize hash https://url.spec.whatwg.org/#dom-url-hash\n                if (basePointer === \"\") {\n                    baseURI = url;\n                } else {\n                    dereference(schema, lookup, baseURI);\n                }\n            }\n        }\n    } else if (schema !== true && schema !== false) {\n        return lookup;\n    }\n    // compute the schema's URI and add it to the mapping.\n    const schemaURI = baseURI.href + (basePointer ? \"#\" + basePointer : \"\");\n    if (lookup[schemaURI] !== undefined) {\n        throw new Error(`Duplicate schema URI \"${schemaURI}\".`);\n    }\n    lookup[schemaURI] = schema;\n    // exit early if this is a boolean schema.\n    if (schema === true || schema === false) {\n        return lookup;\n    }\n    // set the schema's absolute URI.\n    if (schema.__absolute_uri__ === undefined) {\n        Object.defineProperty(schema, \"__absolute_uri__\", {\n            enumerable: false,\n            value: schemaURI\n        });\n    }\n    // if a $ref is found, resolve it's absolute URI.\n    if (schema.$ref && schema.__absolute_ref__ === undefined) {\n        const url = new URL(schema.$ref, baseURI.href);\n        url.hash = url.hash; // normalize hash https://url.spec.whatwg.org/#dom-url-hash\n        Object.defineProperty(schema, \"__absolute_ref__\", {\n            enumerable: false,\n            value: url.href\n        });\n    }\n    // if a $recursiveRef is found, resolve it's absolute URI.\n    if (schema.$recursiveRef && schema.__absolute_recursive_ref__ === undefined) {\n        const url = new URL(schema.$recursiveRef, baseURI.href);\n        url.hash = url.hash; // normalize hash https://url.spec.whatwg.org/#dom-url-hash\n        Object.defineProperty(schema, \"__absolute_recursive_ref__\", {\n            enumerable: false,\n            value: url.href\n        });\n    }\n    // if an $anchor is found, compute it's URI and add it to the mapping.\n    if (schema.$anchor) {\n        const url = new URL(\"#\" + schema.$anchor, baseURI.href);\n        lookup[url.href] = schema;\n    }\n    // process subschemas.\n    for(let key in schema){\n        if (ignoredKeyword[key]) {\n            continue;\n        }\n        const keyBase = `${basePointer}/${(0,_pointer_js__WEBPACK_IMPORTED_MODULE_0__.encodePointer)(key)}`;\n        const subSchema = schema[key];\n        if (Array.isArray(subSchema)) {\n            if (schemaArrayKeyword[key]) {\n                const length = subSchema.length;\n                for(let i = 0; i < length; i++){\n                    dereference(subSchema[i], lookup, baseURI, `${keyBase}/${i}`);\n                }\n            }\n        } else if (schemaMapKeyword[key]) {\n            for(let subKey in subSchema){\n                dereference(subSchema[subKey], lookup, baseURI, `${keyBase}/${(0,_pointer_js__WEBPACK_IMPORTED_MODULE_0__.encodePointer)(subKey)}`);\n            }\n        } else {\n            dereference(subSchema, lookup, baseURI, keyBase);\n        }\n    }\n    return lookup;\n} // schema identification examples\n // https://json-schema.org/draft/2019-09/json-schema-core.html#rfc.appendix.A\n // $ref delegation\n // https://github.com/json-schema-org/json-schema-spec/issues/514\n // output format\n // https://json-schema.org/draft/2019-09/json-schema-core.html#output\n // JSON pointer\n // https://tools.ietf.org/html/rfc6901\n // JSON relative pointer\n // https://tools.ietf.org/html/draft-handrews-relative-json-pointer-01\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvQGNmd29ya2VyL2pzb24tc2NoZW1hL3NyYy9kZXJlZmVyZW5jZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQTZDO0FBQ3RDLE1BQU1DLGdCQUFnQjtJQUN6QkMsaUJBQWlCO0lBQ2pCQyxrQkFBa0I7SUFDbEJDLE9BQU87SUFDUEMsVUFBVTtJQUNWQyxzQkFBc0I7SUFDdEJDLHVCQUF1QjtJQUN2QkMsZUFBZTtJQUNmQyxLQUFLO0lBQ0xDLElBQUk7SUFDSkMsTUFBTTtJQUNOQyxNQUFNO0FBQ1YsRUFBRTtBQUNLLE1BQU1DLHFCQUFxQjtJQUM5QkMsYUFBYTtJQUNiVixPQUFPO0lBQ1BXLE9BQU87SUFDUEMsT0FBTztJQUNQQyxPQUFPO0FBQ1gsRUFBRTtBQUNLLE1BQU1DLG1CQUFtQjtJQUM1QkMsT0FBTztJQUNQQyxhQUFhO0lBQ2JDLFlBQVk7SUFDWkMsbUJBQW1CO0lBQ25CQyxrQkFBa0I7QUFDdEIsRUFBRTtBQUNLLE1BQU1DLGlCQUFpQjtJQUMxQkMsSUFBSTtJQUNKQyxLQUFLO0lBQ0xDLE1BQU07SUFDTkMsU0FBUztJQUNUQyxTQUFTO0lBQ1RDLGFBQWE7SUFDYkMsVUFBVTtJQUNWQyxTQUFTO0lBQ1RDLE1BQU07SUFDTkMsT0FBTztJQUNQQyxVQUFVO0lBQ1ZDLE1BQU07SUFDTkMsU0FBUztJQUNUQyxTQUFTO0lBQ1RDLGtCQUFrQjtJQUNsQkMsa0JBQWtCO0lBQ2xCQyxZQUFZO0lBQ1pDLFdBQVc7SUFDWEMsV0FBVztJQUNYQyxTQUFTO0lBQ1RDLFFBQVE7SUFDUkMsVUFBVTtJQUNWQyxVQUFVO0lBQ1ZDLGFBQWE7SUFDYkMsZUFBZTtJQUNmQyxlQUFlO0FBQ25CLEVBQUU7QUFDRjs7OztDQUlDLEdBQ00sSUFBSUMsaUJBQ1gsYUFBYTtBQUNiLE9BQU9DLFNBQVMsZUFDWkEsS0FBS0MsUUFBUSxJQUNiRCxLQUFLQyxRQUFRLENBQUNDLE1BQU0sS0FBSyxT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O1lBQ3JCO1FBQ0o7UUFDQSxNQUFNQyxVQUFVLENBQUMsRUFBRWxCLFlBQVksQ0FBQyxFQUFFaEUsMERBQWFBLENBQUNpRixLQUFLLENBQUM7UUFDdEQsTUFBTUUsWUFBWXhCLE1BQU0sQ0FBQ3NCLElBQUk7UUFDN0IsSUFBSWhCLE1BQU1DLE9BQU8sQ0FBQ2lCLFlBQVk7WUFDMUIsSUFBSXRFLGtCQUFrQixDQUFDb0UsSUFBSSxFQUFFO2dCQUN6QixNQUFNWCxTQUFTYSxVQUFVYixNQUFNO2dCQUMvQixJQUFLLElBQUljLElBQUksR0FBR0EsSUFBSWQsUUFBUWMsSUFBSztvQkFDN0IxQixZQUFZeUIsU0FBUyxDQUFDQyxFQUFFLEVBQUV4QixRQUFRRyxTQUFTLENBQUMsRUFBRW1CLFFBQVEsQ0FBQyxFQUFFRSxFQUFFLENBQUM7Z0JBQ2hFO1lBQ0o7UUFDSixPQUNLLElBQUlsRSxnQkFBZ0IsQ0FBQytELElBQUksRUFBRTtZQUM1QixJQUFLLElBQUlJLFVBQVVGLFVBQVc7Z0JBQzFCekIsWUFBWXlCLFNBQVMsQ0FBQ0UsT0FBTyxFQUFFekIsUUFBUUcsU0FBUyxDQUFDLEVBQUVtQixRQUFRLENBQUMsRUFBRWxGLDBEQUFhQSxDQUFDcUYsUUFBUSxDQUFDO1lBQ3pGO1FBQ0osT0FDSztZQUNEM0IsWUFBWXlCLFdBQVd2QixRQUFRRyxTQUFTbUI7UUFDNUM7SUFDSjtJQUNBLE9BQU90QjtBQUNYLEVBQ0EsaUNBQWlDO0NBQ2pDLDZFQUE2RTtDQUM3RSxrQkFBa0I7Q0FDbEIsaUVBQWlFO0NBQ2pFLGdCQUFnQjtDQUNoQixxRUFBcUU7Q0FDckUsZUFBZTtDQUNmLHNDQUFzQztDQUN0Qyx3QkFBd0I7Q0FDeEIsc0VBQXNFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL0BjZndvcmtlci9qc29uLXNjaGVtYS9zcmMvZGVyZWZlcmVuY2UuanM/NTAxZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBlbmNvZGVQb2ludGVyIH0gZnJvbSBcIi4vcG9pbnRlci5qc1wiO1xuZXhwb3J0IGNvbnN0IHNjaGVtYUtleXdvcmQgPSB7XG4gICAgYWRkaXRpb25hbEl0ZW1zOiB0cnVlLFxuICAgIHVuZXZhbHVhdGVkSXRlbXM6IHRydWUsXG4gICAgaXRlbXM6IHRydWUsXG4gICAgY29udGFpbnM6IHRydWUsXG4gICAgYWRkaXRpb25hbFByb3BlcnRpZXM6IHRydWUsXG4gICAgdW5ldmFsdWF0ZWRQcm9wZXJ0aWVzOiB0cnVlLFxuICAgIHByb3BlcnR5TmFtZXM6IHRydWUsXG4gICAgbm90OiB0cnVlLFxuICAgIGlmOiB0cnVlLFxuICAgIHRoZW46IHRydWUsXG4gICAgZWxzZTogdHJ1ZSxcbn07XG5leHBvcnQgY29uc3Qgc2NoZW1hQXJyYXlLZXl3b3JkID0ge1xuICAgIHByZWZpeEl0ZW1zOiB0cnVlLFxuICAgIGl0ZW1zOiB0cnVlLFxuICAgIGFsbE9mOiB0cnVlLFxuICAgIGFueU9mOiB0cnVlLFxuICAgIG9uZU9mOiB0cnVlLFxufTtcbmV4cG9ydCBjb25zdCBzY2hlbWFNYXBLZXl3b3JkID0ge1xuICAgICRkZWZzOiB0cnVlLFxuICAgIGRlZmluaXRpb25zOiB0cnVlLFxuICAgIHByb3BlcnRpZXM6IHRydWUsXG4gICAgcGF0dGVyblByb3BlcnRpZXM6IHRydWUsXG4gICAgZGVwZW5kZW50U2NoZW1hczogdHJ1ZSxcbn07XG5leHBvcnQgY29uc3QgaWdub3JlZEtleXdvcmQgPSB7XG4gICAgaWQ6IHRydWUsXG4gICAgJGlkOiB0cnVlLFxuICAgICRyZWY6IHRydWUsXG4gICAgJHNjaGVtYTogdHJ1ZSxcbiAgICAkYW5jaG9yOiB0cnVlLFxuICAgICR2b2NhYnVsYXJ5OiB0cnVlLFxuICAgICRjb21tZW50OiB0cnVlLFxuICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgZW51bTogdHJ1ZSxcbiAgICBjb25zdDogdHJ1ZSxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICB0eXBlOiB0cnVlLFxuICAgIG1heGltdW06IHRydWUsXG4gICAgbWluaW11bTogdHJ1ZSxcbiAgICBleGNsdXNpdmVNYXhpbXVtOiB0cnVlLFxuICAgIGV4Y2x1c2l2ZU1pbmltdW06IHRydWUsXG4gICAgbXVsdGlwbGVPZjogdHJ1ZSxcbiAgICBtYXhMZW5ndGg6IHRydWUsXG4gICAgbWluTGVuZ3RoOiB0cnVlLFxuICAgIHBhdHRlcm46IHRydWUsXG4gICAgZm9ybWF0OiB0cnVlLFxuICAgIG1heEl0ZW1zOiB0cnVlLFxuICAgIG1pbkl0ZW1zOiB0cnVlLFxuICAgIHVuaXF1ZUl0ZW1zOiB0cnVlLFxuICAgIG1heFByb3BlcnRpZXM6IHRydWUsXG4gICAgbWluUHJvcGVydGllczogdHJ1ZSxcbn07XG4vKipcbiAqIERlZmF1bHQgYmFzZSBVUkkgZm9yIHNjaGVtYXMgd2l0aG91dCBhbiAkaWQuXG4gKiBodHRwczovL2pzb24tc2NoZW1hLm9yZy9kcmFmdC8yMDE5LTA5L2pzb24tc2NoZW1hLWNvcmUuaHRtbCNpbml0aWFsLWJhc2VcbiAqIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzOTg2I3NlY3Rpb24tNS4xXG4gKi9cbmV4cG9ydCBsZXQgaW5pdGlhbEJhc2VVUkkgPSBcbi8vIEB0cy1pZ25vcmVcbnR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgc2VsZi5sb2NhdGlvbiAmJlxuICAgIHNlbGYubG9jYXRpb24ub3JpZ2luICE9PSBcIm51bGxcIlxuICAgID8gLy9AdHMtaWdub3JlXG4gICAgICAgIC8qICNfX1BVUkVfXyAqLyBuZXcgVVJMKHNlbGYubG9jYXRpb24ub3JpZ2luICsgc2VsZi5sb2NhdGlvbi5wYXRobmFtZSArIGxvY2F0aW9uLnNlYXJjaClcbiAgICA6IC8qICNfX1BVUkVfXyAqLyBuZXcgVVJMKFwiaHR0cHM6Ly9naXRodWIuY29tL2Nmd29ya2VyXCIpO1xuZXhwb3J0IGZ1bmN0aW9uIGRlcmVmZXJlbmNlKHNjaGVtYSwgbG9va3VwID0gT2JqZWN0LmNyZWF0ZShudWxsKSwgYmFzZVVSSSA9IGluaXRpYWxCYXNlVVJJLCBiYXNlUG9pbnRlciA9IFwiXCIpIHtcbiAgICBpZiAoc2NoZW1hICYmIHR5cGVvZiBzY2hlbWEgPT09IFwib2JqZWN0XCIgJiYgIUFycmF5LmlzQXJyYXkoc2NoZW1hKSkge1xuICAgICAgICBjb25zdCBpZCA9IHNjaGVtYS4kaWQgfHwgc2NoZW1hLmlkO1xuICAgICAgICBpZiAoaWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoaWQsIGJhc2VVUkkuaHJlZik7XG4gICAgICAgICAgICBpZiAodXJsLmhhc2gubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICAgIGxvb2t1cFt1cmwuaHJlZl0gPSBzY2hlbWE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB1cmwuaGFzaCA9IFwiXCI7IC8vIG5vcm1hbGl6ZSBoYXNoIGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jZG9tLXVybC1oYXNoXG4gICAgICAgICAgICAgICAgaWYgKGJhc2VQb2ludGVyID09PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGJhc2VVUkkgPSB1cmw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkZXJlZmVyZW5jZShzY2hlbWEsIGxvb2t1cCwgYmFzZVVSSSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKHNjaGVtYSAhPT0gdHJ1ZSAmJiBzY2hlbWEgIT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBsb29rdXA7XG4gICAgfVxuICAgIC8vIGNvbXB1dGUgdGhlIHNjaGVtYSdzIFVSSSBhbmQgYWRkIGl0IHRvIHRoZSBtYXBwaW5nLlxuICAgIGNvbnN0IHNjaGVtYVVSSSA9IGJhc2VVUkkuaHJlZiArIChiYXNlUG9pbnRlciA/IFwiI1wiICsgYmFzZVBvaW50ZXIgOiBcIlwiKTtcbiAgICBpZiAobG9va3VwW3NjaGVtYVVSSV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYER1cGxpY2F0ZSBzY2hlbWEgVVJJIFwiJHtzY2hlbWFVUkl9XCIuYCk7XG4gICAgfVxuICAgIGxvb2t1cFtzY2hlbWFVUkldID0gc2NoZW1hO1xuICAgIC8vIGV4aXQgZWFybHkgaWYgdGhpcyBpcyBhIGJvb2xlYW4gc2NoZW1hLlxuICAgIGlmIChzY2hlbWEgPT09IHRydWUgfHwgc2NoZW1hID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gbG9va3VwO1xuICAgIH1cbiAgICAvLyBzZXQgdGhlIHNjaGVtYSdzIGFic29sdXRlIFVSSS5cbiAgICBpZiAoc2NoZW1hLl9fYWJzb2x1dGVfdXJpX18gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2NoZW1hLCBcIl9fYWJzb2x1dGVfdXJpX19cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICB2YWx1ZTogc2NoZW1hVVJJLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gaWYgYSAkcmVmIGlzIGZvdW5kLCByZXNvbHZlIGl0J3MgYWJzb2x1dGUgVVJJLlxuICAgIGlmIChzY2hlbWEuJHJlZiAmJiBzY2hlbWEuX19hYnNvbHV0ZV9yZWZfXyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwoc2NoZW1hLiRyZWYsIGJhc2VVUkkuaHJlZik7XG4gICAgICAgIHVybC5oYXNoID0gdXJsLmhhc2g7IC8vIG5vcm1hbGl6ZSBoYXNoIGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jZG9tLXVybC1oYXNoXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzY2hlbWEsIFwiX19hYnNvbHV0ZV9yZWZfX1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIHZhbHVlOiB1cmwuaHJlZixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIGlmIGEgJHJlY3Vyc2l2ZVJlZiBpcyBmb3VuZCwgcmVzb2x2ZSBpdCdzIGFic29sdXRlIFVSSS5cbiAgICBpZiAoc2NoZW1hLiRyZWN1cnNpdmVSZWYgJiYgc2NoZW1hLl9fYWJzb2x1dGVfcmVjdXJzaXZlX3JlZl9fID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChzY2hlbWEuJHJlY3Vyc2l2ZVJlZiwgYmFzZVVSSS5ocmVmKTtcbiAgICAgICAgdXJsLmhhc2ggPSB1cmwuaGFzaDsgLy8gbm9ybWFsaXplIGhhc2ggaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyNkb20tdXJsLWhhc2hcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNjaGVtYSwgXCJfX2Fic29sdXRlX3JlY3Vyc2l2ZV9yZWZfX1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIHZhbHVlOiB1cmwuaHJlZixcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIGlmIGFuICRhbmNob3IgaXMgZm91bmQsIGNvbXB1dGUgaXQncyBVUkkgYW5kIGFkZCBpdCB0byB0aGUgbWFwcGluZy5cbiAgICBpZiAoc2NoZW1hLiRhbmNob3IpIHtcbiAgICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChcIiNcIiArIHNjaGVtYS4kYW5jaG9yLCBiYXNlVVJJLmhyZWYpO1xuICAgICAgICBsb29rdXBbdXJsLmhyZWZdID0gc2NoZW1hO1xuICAgIH1cbiAgICAvLyBwcm9jZXNzIHN1YnNjaGVtYXMuXG4gICAgZm9yIChsZXQga2V5IGluIHNjaGVtYSkge1xuICAgICAgICBpZiAoaWdub3JlZEtleXdvcmRba2V5XSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qga2V5QmFzZSA9IGAke2Jhc2VQb2ludGVyfS8ke2VuY29kZVBvaW50ZXIoa2V5KX1gO1xuICAgICAgICBjb25zdCBzdWJTY2hlbWEgPSBzY2hlbWFba2V5XTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc3ViU2NoZW1hKSkge1xuICAgICAgICAgICAgaWYgKHNjaGVtYUFycmF5S2V5d29yZFtrZXldKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGVuZ3RoID0gc3ViU2NoZW1hLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlcmVmZXJlbmNlKHN1YlNjaGVtYVtpXSwgbG9va3VwLCBiYXNlVVJJLCBgJHtrZXlCYXNlfS8ke2l9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNjaGVtYU1hcEtleXdvcmRba2V5XSkge1xuICAgICAgICAgICAgZm9yIChsZXQgc3ViS2V5IGluIHN1YlNjaGVtYSkge1xuICAgICAgICAgICAgICAgIGRlcmVmZXJlbmNlKHN1YlNjaGVtYVtzdWJLZXldLCBsb29rdXAsIGJhc2VVUkksIGAke2tleUJhc2V9LyR7ZW5jb2RlUG9pbnRlcihzdWJLZXkpfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZGVyZWZlcmVuY2Uoc3ViU2NoZW1hLCBsb29rdXAsIGJhc2VVUkksIGtleUJhc2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsb29rdXA7XG59XG4vLyBzY2hlbWEgaWRlbnRpZmljYXRpb24gZXhhbXBsZXNcbi8vIGh0dHBzOi8vanNvbi1zY2hlbWEub3JnL2RyYWZ0LzIwMTktMDkvanNvbi1zY2hlbWEtY29yZS5odG1sI3JmYy5hcHBlbmRpeC5BXG4vLyAkcmVmIGRlbGVnYXRpb25cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qc29uLXNjaGVtYS1vcmcvanNvbi1zY2hlbWEtc3BlYy9pc3N1ZXMvNTE0XG4vLyBvdXRwdXQgZm9ybWF0XG4vLyBodHRwczovL2pzb24tc2NoZW1hLm9yZy9kcmFmdC8yMDE5LTA5L2pzb24tc2NoZW1hLWNvcmUuaHRtbCNvdXRwdXRcbi8vIEpTT04gcG9pbnRlclxuLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzY5MDFcbi8vIEpTT04gcmVsYXRpdmUgcG9pbnRlclxuLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL2RyYWZ0LWhhbmRyZXdzLXJlbGF0aXZlLWpzb24tcG9pbnRlci0wMVxuIl0sIm5hbWVzIjpbImVuY29kZVBvaW50ZXIiLCJzY2hlbWFLZXl3b3JkIiwiYWRkaXRpb25hbEl0ZW1zIiwidW5ldmFsdWF0ZWRJdGVtcyIsIml0ZW1zIiwiY29udGFpbnMiLCJhZGRpdGlvbmFsUHJvcGVydGllcyIsInVuZXZhbHVhdGVkUHJvcGVydGllcyIsInByb3BlcnR5TmFtZXMiLCJub3QiLCJpZiIsInRoZW4iLCJlbHNlIiwic2NoZW1hQXJyYXlLZXl3b3JkIiwicHJlZml4SXRlbXMiLCJhbGxPZiIsImFueU9mIiwib25lT2YiLCJzY2hlbWFNYXBLZXl3b3JkIiwiJGRlZnMiLCJkZWZpbml0aW9ucyIsInByb3BlcnRpZXMiLCJwYXR0ZXJuUHJvcGVydGllcyIsImRlcGVuZGVudFNjaGVtYXMiLCJpZ25vcmVkS2V5d29yZCIsImlkIiwiJGlkIiwiJHJlZiIsIiRzY2hlbWEiLCIkYW5jaG9yIiwiJHZvY2FidWxhcnkiLCIkY29tbWVudCIsImRlZmF1bHQiLCJlbnVtIiwiY29uc3QiLCJyZXF1aXJlZCIsInR5cGUiLCJtYXhpbXVtIiwibWluaW11bSIsImV4Y2x1c2l2ZU1heGltdW0iLCJleGNsdXNpdmVNaW5pbXVtIiwibXVsdGlwbGVPZiIsIm1heExlbmd0aCIsIm1pbkxlbmd0aCIsInBhdHRlcm4iLCJmb3JtYXQiLCJtYXhJdGVtcyIsIm1pbkl0ZW1zIiwidW5pcXVlSXRlbXMiLCJtYXhQcm9wZXJ0aWVzIiwibWluUHJvcGVydGllcyIsImluaXRpYWxCYXNlVVJJIiwic2VsZiIsImxvY2F0aW9uIiwib3JpZ2luIiwiVVJMIiwicGF0aG5hbWUiLCJzZWFyY2giLCJkZXJlZmVyZW5jZSIsInNjaGVtYSIsImxvb2t1cCIsIk9iamVjdCIsImNyZWF0ZSIsImJhc2VVUkkiLCJiYXNlUG9pbnRlciIsIkFycmF5IiwiaXNBcnJheSIsInVybCIsImhyZWYiLCJoYXNoIiwibGVuZ3RoIiwic2NoZW1hVVJJIiwidW5kZWZpbmVkIiwiRXJyb3IiLCJfX2Fic29sdXRlX3VyaV9fIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwidmFsdWUiLCJfX2Fic29sdXRlX3JlZl9fIiwiJHJlY3Vyc2l2ZVJlZiIsIl9fYWJzb2x1dGVfcmVjdXJzaXZlX3JlZl9fIiwia2V5Iiwia2V5QmFzZSIsInN1YlNjaGVtYSIsImkiLCJzdWJLZXkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/dereference.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/format.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/format.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fastFormat: () => (/* binding */ fastFormat),\n/* harmony export */   fullFormat: () => (/* binding */ fullFormat)\n/* harmony export */ });\n// based on https://github.com/epoberezkin/ajv/blob/master/lib/compile/formats.js\nconst DATE = /^(\\d\\d\\d\\d)-(\\d\\d)-(\\d\\d)$/;\nconst DAYS = [\n    0,\n    31,\n    28,\n    31,\n    30,\n    31,\n    30,\n    31,\n    31,\n    30,\n    31,\n    30,\n    31\n];\nconst TIME = /^(\\d\\d):(\\d\\d):(\\d\\d)(\\.\\d+)?(z|[+-]\\d\\d(?::?\\d\\d)?)?$/i;\nconst HOSTNAME = /^(?=.{1,253}\\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\\.?$/i;\n// const URI = /^(?:[a-z][a-z0-9+\\-.]*:)(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\\?(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;\nconst URIREF = /^(?:[a-z][a-z0-9+\\-.]*:)?(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'\"()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\\?(?:[a-z0-9\\-._~!$&'\"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'\"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;\n// uri-template: https://tools.ietf.org/html/rfc6570\nconst URITEMPLATE = /^(?:(?:[^\\x00-\\x20\"'<>%\\\\^`{|}]|%[0-9a-f]{2})|\\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\\*)?)*\\})*$/i;\n// For the source: https://gist.github.com/dperini/729294\n// For test cases: https://mathiasbynens.be/demo/url-regex\nconst URL_ = /^(?:(?:https?|ftp):\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!10(?:\\.\\d{1,3}){3})(?!127(?:\\.\\d{1,3}){3})(?!169\\.254(?:\\.\\d{1,3}){2})(?!192\\.168(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u{00a1}-\\u{ffff}0-9]+-?)*[a-z\\u{00a1}-\\u{ffff}0-9]+)(?:\\.(?:[a-z\\u{00a1}-\\u{ffff}0-9]+-?)*[a-z\\u{00a1}-\\u{ffff}0-9]+)*(?:\\.(?:[a-z\\u{00a1}-\\u{ffff}]{2,})))(?::\\d{2,5})?(?:\\/[^\\s]*)?$/iu;\nconst UUID = /^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i;\nconst JSON_POINTER = /^(?:\\/(?:[^~/]|~0|~1)*)*$/;\nconst JSON_POINTER_URI_FRAGMENT = /^#(?:\\/(?:[a-z0-9_\\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i;\nconst RELATIVE_JSON_POINTER = /^(?:0|[1-9][0-9]*)(?:#|(?:\\/(?:[^~/]|~0|~1)*)*)$/;\n// date: http://tools.ietf.org/html/rfc3339#section-5.6\nconst FASTDATE = /^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\d$/;\n// date-time: http://tools.ietf.org/html/rfc3339#section-5.6\nconst FASTTIME = /^(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)(?:\\.\\d+)?(?:z|[+-]\\d\\d(?::?\\d\\d)?)?$/i;\nconst FASTDATETIME = /^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\d[t\\s](?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)(?:\\.\\d+)?(?:z|[+-]\\d\\d(?::?\\d\\d)?)$/i;\n// uri: https://github.com/mafintosh/is-my-json-valid/blob/master/formats.js\n// const FASTURI = /^(?:[a-z][a-z0-9+-.]*:)(?:\\/?\\/)?[^\\s]*$/i;\nconst FASTURIREFERENCE = /^(?:(?:[a-z][a-z0-9+-.]*:)?\\/?\\/)?(?:[^\\\\\\s#][^\\s#]*)?(?:#[^\\\\\\s]*)?$/i;\n// https://github.com/ExodusMovement/schemasafe/blob/master/src/formats.js\nconst EMAIL = (input)=>{\n    if (input[0] === '\"') return false;\n    const [name, host, ...rest] = input.split(\"@\");\n    if (!name || !host || rest.length !== 0 || name.length > 64 || host.length > 253) return false;\n    if (name[0] === \".\" || name.endsWith(\".\") || name.includes(\"..\")) return false;\n    if (!/^[a-z0-9.-]+$/i.test(host) || !/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(name)) return false;\n    return host.split(\".\").every((part)=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(part));\n};\n// optimized https://www.safaribooksonline.com/library/view/regular-expressions-cookbook/9780596802837/ch07s16.html\nconst IPV4 = /^(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)$/;\n// optimized http://stackoverflow.com/questions/53497/regular-expression-that-matches-valid-ipv6-addresses\nconst IPV6 = /^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))$/i;\n// https://github.com/ExodusMovement/schemasafe/blob/master/src/formats.js\nconst DURATION = (input)=>input.length > 1 && input.length < 80 && (/^P\\d+([.,]\\d+)?W$/.test(input) || /^P[\\dYMDTHS]*(\\d[.,]\\d+)?[YMDHS]$/.test(input) && /^P([.,\\d]+Y)?([.,\\d]+M)?([.,\\d]+D)?(T([.,\\d]+H)?([.,\\d]+M)?([.,\\d]+S)?)?$/.test(input));\nfunction bind(r) {\n    return r.test.bind(r);\n}\nconst fullFormat = {\n    date,\n    time: /* #__PURE__ */ time.bind(undefined, false),\n    \"date-time\": date_time,\n    duration: DURATION,\n    uri,\n    \"uri-reference\": /* #__PURE__ */ bind(URIREF),\n    \"uri-template\": /* #__PURE__ */ bind(URITEMPLATE),\n    url: /* #__PURE__ */ bind(URL_),\n    email: EMAIL,\n    hostname: /* #__PURE__ */ bind(HOSTNAME),\n    ipv4: /* #__PURE__ */ bind(IPV4),\n    ipv6: /* #__PURE__ */ bind(IPV6),\n    regex: regex,\n    uuid: /* #__PURE__ */ bind(UUID),\n    \"json-pointer\": /* #__PURE__ */ bind(JSON_POINTER),\n    \"json-pointer-uri-fragment\": /* #__PURE__ */ bind(JSON_POINTER_URI_FRAGMENT),\n    \"relative-json-pointer\": /* #__PURE__ */ bind(RELATIVE_JSON_POINTER)\n};\nconst fastFormat = {\n    ...fullFormat,\n    date: /* #__PURE__ */ bind(FASTDATE),\n    time: /* #__PURE__ */ bind(FASTTIME),\n    \"date-time\": /* #__PURE__ */ bind(FASTDATETIME),\n    \"uri-reference\": /* #__PURE__ */ bind(FASTURIREFERENCE)\n};\nfunction isLeapYear(year) {\n    // https://tools.ietf.org/html/rfc3339#appendix-C\n    return year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0);\n}\nfunction date(str) {\n    // full-date from http://tools.ietf.org/html/rfc3339#section-5.6\n    const matches = str.match(DATE);\n    if (!matches) return false;\n    const year = +matches[1];\n    const month = +matches[2];\n    const day = +matches[3];\n    return month >= 1 && month <= 12 && day >= 1 && day <= (month == 2 && isLeapYear(year) ? 29 : DAYS[month]);\n}\nfunction time(full, str) {\n    const matches = str.match(TIME);\n    if (!matches) return false;\n    const hour = +matches[1];\n    const minute = +matches[2];\n    const second = +matches[3];\n    const timeZone = !!matches[5];\n    return (hour <= 23 && minute <= 59 && second <= 59 || hour == 23 && minute == 59 && second == 60) && (!full || timeZone);\n}\nconst DATE_TIME_SEPARATOR = /t|\\s/i;\nfunction date_time(str) {\n    // http://tools.ietf.org/html/rfc3339#section-5.6\n    const dateTime = str.split(DATE_TIME_SEPARATOR);\n    return dateTime.length == 2 && date(dateTime[0]) && time(true, dateTime[1]);\n}\nconst NOT_URI_FRAGMENT = /\\/|:/;\nconst URI_PATTERN = /^(?:[a-z][a-z0-9+\\-.]*:)(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\\?(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;\nfunction uri(str) {\n    // http://jmrware.com/articles/2009/uri_regexp/URI_regex.html + optional protocol + required \".\"\n    return NOT_URI_FRAGMENT.test(str) && URI_PATTERN.test(str);\n}\nconst Z_ANCHOR = /[^\\\\]\\\\Z/;\nfunction regex(str) {\n    if (Z_ANCHOR.test(str)) return false;\n    try {\n        new RegExp(str);\n        return true;\n    } catch (e) {\n        return false;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvQGNmd29ya2VyL2pzb24tc2NoZW1hL3NyYy9mb3JtYXQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQSxpRkFBaUY7QUFDakYsTUFBTUEsT0FBTztBQUNiLE1BQU1DLE9BQU87SUFBQztJQUFHO0lBQUk7SUFBSTtJQUFJO0lBQUk7SUFBSTtJQUFJO0lBQUk7SUFBSTtJQUFJO0lBQUk7SUFBSTtDQUFHO0FBQ2hFLE1BQU1DLE9BQU87QUFDYixNQUFNQyxXQUFXO0FBQ2pCLDhvQ0FBOG9DO0FBQzlvQyxNQUFNQyxTQUFTO0FBQ2Ysb0RBQW9EO0FBQ3BELE1BQU1DLGNBQWM7QUFDcEIseURBQXlEO0FBQ3pELDBEQUEwRDtBQUMxRCxNQUFNQyxPQUFPO0FBQ2IsTUFBTUMsT0FBTztBQUNiLE1BQU1DLGVBQWU7QUFDckIsTUFBTUMsNEJBQTRCO0FBQ2xDLE1BQU1DLHdCQUF3QjtBQUM5Qix1REFBdUQ7QUFDdkQsTUFBTUMsV0FBVztBQUNqQiw0REFBNEQ7QUFDNUQsTUFBTUMsV0FBVztBQUNqQixNQUFNQyxlQUFlO0FBQ3JCLDRFQUE0RTtBQUM1RSwrREFBK0Q7QUFDL0QsTUFBTUMsbUJBQW1CO0FBQ3pCLDBFQUEwRTtBQUMxRSxNQUFNQyxRQUFRLENBQUNDO0lBQ1gsSUFBSUEsS0FBSyxDQUFDLEVBQUUsS0FBSyxLQUNiLE9BQU87SUFDWCxNQUFNLENBQUNDLE1BQU1DLE1BQU0sR0FBR0MsS0FBSyxHQUFHSCxNQUFNSSxLQUFLLENBQUM7SUFDMUMsSUFBSSxDQUFDSCxRQUNELENBQUNDLFFBQ0RDLEtBQUtFLE1BQU0sS0FBSyxLQUNoQkosS0FBS0ksTUFBTSxHQUFHLE1BQ2RILEtBQUtHLE1BQU0sR0FBRyxLQUNkLE9BQU87SUFDWCxJQUFJSixJQUFJLENBQUMsRUFBRSxLQUFLLE9BQU9BLEtBQUtLLFFBQVEsQ0FBQyxRQUFRTCxLQUFLTSxRQUFRLENBQUMsT0FDdkQsT0FBTztJQUNY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VSxFQUFFLEtBQzFDLEVBQUNILFFBQVFJLFFBQU87QUFDekI7QUFDQSxNQUFNQyxzQkFBc0I7QUFDNUIsU0FBU3ZCLFVBQVVhLEdBQUc7SUFDbEIsaURBQWlEO0lBQ2pELE1BQU1XLFdBQVdYLElBQUk3QixLQUFLLENBQUN1QztJQUMzQixPQUFPQyxTQUFTdkMsTUFBTSxJQUFJLEtBQUtZLEtBQUsyQixRQUFRLENBQUMsRUFBRSxLQUFLMUIsS0FBSyxNQUFNMEIsUUFBUSxDQUFDLEVBQUU7QUFDOUU7QUFDQSxNQUFNQyxtQkFBbUI7QUFDekIsTUFBTUMsY0FBYztBQUNwQixTQUFTeEIsSUFBSVcsR0FBRztJQUNaLGdHQUFnRztJQUNoRyxPQUFPWSxpQkFBaUJyQyxJQUFJLENBQUN5QixRQUFRYSxZQUFZdEMsSUFBSSxDQUFDeUI7QUFDMUQ7QUFDQSxNQUFNYyxXQUFXO0FBQ2pCLFNBQVNuQixNQUFNSyxHQUFHO0lBQ2QsSUFBSWMsU0FBU3ZDLElBQUksQ0FBQ3lCLE1BQ2QsT0FBTztJQUNYLElBQUk7UUFDQSxJQUFJZSxPQUFPZjtRQUNYLE9BQU87SUFDWCxFQUNBLE9BQU9nQixHQUFHO1FBQ04sT0FBTztJQUNYO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1mb3JtLWJ1aWxkZXItdHV0b3JpYWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvQGNmd29ya2VyL2pzb24tc2NoZW1hL3NyYy9mb3JtYXQuanM/OTA1NSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBiYXNlZCBvbiBodHRwczovL2dpdGh1Yi5jb20vZXBvYmVyZXpraW4vYWp2L2Jsb2IvbWFzdGVyL2xpYi9jb21waWxlL2Zvcm1hdHMuanNcbmNvbnN0IERBVEUgPSAvXihcXGRcXGRcXGRcXGQpLShcXGRcXGQpLShcXGRcXGQpJC87XG5jb25zdCBEQVlTID0gWzAsIDMxLCAyOCwgMzEsIDMwLCAzMSwgMzAsIDMxLCAzMSwgMzAsIDMxLCAzMCwgMzFdO1xuY29uc3QgVElNRSA9IC9eKFxcZFxcZCk6KFxcZFxcZCk6KFxcZFxcZCkoXFwuXFxkKyk/KHp8WystXVxcZFxcZCg/Ojo/XFxkXFxkKT8pPyQvaTtcbmNvbnN0IEhPU1ROQU1FID0gL14oPz0uezEsMjUzfVxcLj8kKVthLXowLTldKD86W2EtejAtOS1dezAsNjF9W2EtejAtOV0pPyg/OlxcLlthLXowLTldKD86Wy0wLTlhLXpdezAsNjF9WzAtOWEtel0pPykqXFwuPyQvaTtcbi8vIGNvbnN0IFVSSSA9IC9eKD86W2Etel1bYS16MC05K1xcLS5dKjopKD86XFwvP1xcLyg/Oig/OlthLXowLTlcXC0uX34hJCYnKCkqKyw7PTpdfCVbMC05YS1mXXsyfSkqQCk/KD86XFxbKD86KD86KD86KD86WzAtOWEtZl17MSw0fTopezZ9fDo6KD86WzAtOWEtZl17MSw0fTopezV9fCg/OlswLTlhLWZdezEsNH0pPzo6KD86WzAtOWEtZl17MSw0fTopezR9fCg/Oig/OlswLTlhLWZdezEsNH06KXswLDF9WzAtOWEtZl17MSw0fSk/OjooPzpbMC05YS1mXXsxLDR9Oil7M318KD86KD86WzAtOWEtZl17MSw0fTopezAsMn1bMC05YS1mXXsxLDR9KT86Oig/OlswLTlhLWZdezEsNH06KXsyfXwoPzooPzpbMC05YS1mXXsxLDR9Oil7MCwzfVswLTlhLWZdezEsNH0pPzo6WzAtOWEtZl17MSw0fTp8KD86KD86WzAtOWEtZl17MSw0fTopezAsNH1bMC05YS1mXXsxLDR9KT86OikoPzpbMC05YS1mXXsxLDR9OlswLTlhLWZdezEsNH18KD86KD86MjVbMC01XXwyWzAtNF1cXGR8WzAxXT9cXGRcXGQ/KVxcLil7M30oPzoyNVswLTVdfDJbMC00XVxcZHxbMDFdP1xcZFxcZD8pKXwoPzooPzpbMC05YS1mXXsxLDR9Oil7MCw1fVswLTlhLWZdezEsNH0pPzo6WzAtOWEtZl17MSw0fXwoPzooPzpbMC05YS1mXXsxLDR9Oil7MCw2fVswLTlhLWZdezEsNH0pPzo6KXxbVnZdWzAtOWEtZl0rXFwuW2EtejAtOVxcLS5ffiEkJicoKSorLDs9Ol0rKVxcXXwoPzooPzoyNVswLTVdfDJbMC00XVxcZHxbMDFdP1xcZFxcZD8pXFwuKXszfSg/OjI1WzAtNV18MlswLTRdXFxkfFswMV0/XFxkXFxkPyl8KD86W2EtejAtOVxcLS5ffiEkJicoKSorLDs9XXwlWzAtOWEtZl17Mn0pKikoPzo6XFxkKik/KD86XFwvKD86W2EtejAtOVxcLS5ffiEkJicoKSorLDs9OkBdfCVbMC05YS1mXXsyfSkqKSp8XFwvKD86KD86W2EtejAtOVxcLS5ffiEkJicoKSorLDs9OkBdfCVbMC05YS1mXXsyfSkrKD86XFwvKD86W2EtejAtOVxcLS5ffiEkJicoKSorLDs9OkBdfCVbMC05YS1mXXsyfSkqKSopP3woPzpbYS16MC05XFwtLl9+ISQmJygpKissOz06QF18JVswLTlhLWZdezJ9KSsoPzpcXC8oPzpbYS16MC05XFwtLl9+ISQmJygpKissOz06QF18JVswLTlhLWZdezJ9KSopKikoPzpcXD8oPzpbYS16MC05XFwtLl9+ISQmJygpKissOz06QC8/XXwlWzAtOWEtZl17Mn0pKik/KD86Iyg/OlthLXowLTlcXC0uX34hJCYnKCkqKyw7PTpALz9dfCVbMC05YS1mXXsyfSkqKT8kL2k7XG5jb25zdCBVUklSRUYgPSAvXig/OlthLXpdW2EtejAtOStcXC0uXSo6KT8oPzpcXC8/XFwvKD86KD86W2EtejAtOVxcLS5ffiEkJicoKSorLDs9Ol18JVswLTlhLWZdezJ9KSpAKT8oPzpcXFsoPzooPzooPzooPzpbMC05YS1mXXsxLDR9Oil7Nn18OjooPzpbMC05YS1mXXsxLDR9Oil7NX18KD86WzAtOWEtZl17MSw0fSk/OjooPzpbMC05YS1mXXsxLDR9Oil7NH18KD86KD86WzAtOWEtZl17MSw0fTopezAsMX1bMC05YS1mXXsxLDR9KT86Oig/OlswLTlhLWZdezEsNH06KXszfXwoPzooPzpbMC05YS1mXXsxLDR9Oil7MCwyfVswLTlhLWZdezEsNH0pPzo6KD86WzAtOWEtZl17MSw0fTopezJ9fCg/Oig/OlswLTlhLWZdezEsNH06KXswLDN9WzAtOWEtZl17MSw0fSk/OjpbMC05YS1mXXsxLDR9OnwoPzooPzpbMC05YS1mXXsxLDR9Oil7MCw0fVswLTlhLWZdezEsNH0pPzo6KSg/OlswLTlhLWZdezEsNH06WzAtOWEtZl17MSw0fXwoPzooPzoyNVswLTVdfDJbMC00XVxcZHxbMDFdP1xcZFxcZD8pXFwuKXszfSg/OjI1WzAtNV18MlswLTRdXFxkfFswMV0/XFxkXFxkPykpfCg/Oig/OlswLTlhLWZdezEsNH06KXswLDV9WzAtOWEtZl17MSw0fSk/OjpbMC05YS1mXXsxLDR9fCg/Oig/OlswLTlhLWZdezEsNH06KXswLDZ9WzAtOWEtZl17MSw0fSk/OjopfFtWdl1bMC05YS1mXStcXC5bYS16MC05XFwtLl9+ISQmJygpKissOz06XSspXFxdfCg/Oig/OjI1WzAtNV18MlswLTRdXFxkfFswMV0/XFxkXFxkPylcXC4pezN9KD86MjVbMC01XXwyWzAtNF1cXGR8WzAxXT9cXGRcXGQ/KXwoPzpbYS16MC05XFwtLl9+ISQmJ1wiKCkqKyw7PV18JVswLTlhLWZdezJ9KSopKD86OlxcZCopPyg/OlxcLyg/OlthLXowLTlcXC0uX34hJCYnXCIoKSorLDs9OkBdfCVbMC05YS1mXXsyfSkqKSp8XFwvKD86KD86W2EtejAtOVxcLS5ffiEkJidcIigpKissOz06QF18JVswLTlhLWZdezJ9KSsoPzpcXC8oPzpbYS16MC05XFwtLl9+ISQmJ1wiKCkqKyw7PTpAXXwlWzAtOWEtZl17Mn0pKikqKT98KD86W2EtejAtOVxcLS5ffiEkJidcIigpKissOz06QF18JVswLTlhLWZdezJ9KSsoPzpcXC8oPzpbYS16MC05XFwtLl9+ISQmJ1wiKCkqKyw7PTpAXXwlWzAtOWEtZl17Mn0pKikqKT8oPzpcXD8oPzpbYS16MC05XFwtLl9+ISQmJ1wiKCkqKyw7PTpALz9dfCVbMC05YS1mXXsyfSkqKT8oPzojKD86W2EtejAtOVxcLS5ffiEkJidcIigpKissOz06QC8/XXwlWzAtOWEtZl17Mn0pKik/JC9pO1xuLy8gdXJpLXRlbXBsYXRlOiBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNjU3MFxuY29uc3QgVVJJVEVNUExBVEUgPSAvXig/Oig/OlteXFx4MDAtXFx4MjBcIic8PiVcXFxcXmB7fH1dfCVbMC05YS1mXXsyfSl8XFx7WysjLi87PyY9LCFAfF0/KD86W2EtejAtOV9dfCVbMC05YS1mXXsyfSkrKD86OlsxLTldWzAtOV17MCwzfXxcXCopPyg/OiwoPzpbYS16MC05X118JVswLTlhLWZdezJ9KSsoPzo6WzEtOV1bMC05XXswLDN9fFxcKik/KSpcXH0pKiQvaTtcbi8vIEZvciB0aGUgc291cmNlOiBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9kcGVyaW5pLzcyOTI5NFxuLy8gRm9yIHRlc3QgY2FzZXM6IGh0dHBzOi8vbWF0aGlhc2J5bmVucy5iZS9kZW1vL3VybC1yZWdleFxuY29uc3QgVVJMXyA9IC9eKD86KD86aHR0cHM/fGZ0cCk6XFwvXFwvKSg/OlxcUysoPzo6XFxTKik/QCk/KD86KD8hMTAoPzpcXC5cXGR7MSwzfSl7M30pKD8hMTI3KD86XFwuXFxkezEsM30pezN9KSg/ITE2OVxcLjI1NCg/OlxcLlxcZHsxLDN9KXsyfSkoPyExOTJcXC4xNjgoPzpcXC5cXGR7MSwzfSl7Mn0pKD8hMTcyXFwuKD86MVs2LTldfDJcXGR8M1swLTFdKSg/OlxcLlxcZHsxLDN9KXsyfSkoPzpbMS05XVxcZD98MVxcZFxcZHwyWzAxXVxcZHwyMlswLTNdKSg/OlxcLig/OjE/XFxkezEsMn18MlswLTRdXFxkfDI1WzAtNV0pKXsyfSg/OlxcLig/OlsxLTldXFxkP3wxXFxkXFxkfDJbMC00XVxcZHwyNVswLTRdKSl8KD86KD86W2EtelxcdXswMGExfS1cXHV7ZmZmZn0wLTldKy0/KSpbYS16XFx1ezAwYTF9LVxcdXtmZmZmfTAtOV0rKSg/OlxcLig/OlthLXpcXHV7MDBhMX0tXFx1e2ZmZmZ9MC05XSstPykqW2EtelxcdXswMGExfS1cXHV7ZmZmZn0wLTldKykqKD86XFwuKD86W2EtelxcdXswMGExfS1cXHV7ZmZmZn1dezIsfSkpKSg/OjpcXGR7Miw1fSk/KD86XFwvW15cXHNdKik/JC9pdTtcbmNvbnN0IFVVSUQgPSAvXig/OnVybjp1dWlkOik/WzAtOWEtZl17OH0tKD86WzAtOWEtZl17NH0tKXszfVswLTlhLWZdezEyfSQvaTtcbmNvbnN0IEpTT05fUE9JTlRFUiA9IC9eKD86XFwvKD86W15+L118fjB8fjEpKikqJC87XG5jb25zdCBKU09OX1BPSU5URVJfVVJJX0ZSQUdNRU5UID0gL14jKD86XFwvKD86W2EtejAtOV9cXC0uISQmJygpKissOzo9QF18JVswLTlhLWZdezJ9fH4wfH4xKSopKiQvaTtcbmNvbnN0IFJFTEFUSVZFX0pTT05fUE9JTlRFUiA9IC9eKD86MHxbMS05XVswLTldKikoPzojfCg/OlxcLyg/Oltefi9dfH4wfH4xKSopKikkLztcbi8vIGRhdGU6IGh0dHA6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMzMzkjc2VjdGlvbi01LjZcbmNvbnN0IEZBU1REQVRFID0gL15cXGRcXGRcXGRcXGQtWzAtMV1cXGQtWzAtM11cXGQkLztcbi8vIGRhdGUtdGltZTogaHR0cDovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzMzOSNzZWN0aW9uLTUuNlxuY29uc3QgRkFTVFRJTUUgPSAvXig/OlswLTJdXFxkOlswLTVdXFxkOlswLTVdXFxkfDIzOjU5OjYwKSg/OlxcLlxcZCspPyg/Onp8WystXVxcZFxcZCg/Ojo/XFxkXFxkKT8pPyQvaTtcbmNvbnN0IEZBU1REQVRFVElNRSA9IC9eXFxkXFxkXFxkXFxkLVswLTFdXFxkLVswLTNdXFxkW3RcXHNdKD86WzAtMl1cXGQ6WzAtNV1cXGQ6WzAtNV1cXGR8MjM6NTk6NjApKD86XFwuXFxkKyk/KD86enxbKy1dXFxkXFxkKD86Oj9cXGRcXGQpPykkL2k7XG4vLyB1cmk6IGh0dHBzOi8vZ2l0aHViLmNvbS9tYWZpbnRvc2gvaXMtbXktanNvbi12YWxpZC9ibG9iL21hc3Rlci9mb3JtYXRzLmpzXG4vLyBjb25zdCBGQVNUVVJJID0gL14oPzpbYS16XVthLXowLTkrLS5dKjopKD86XFwvP1xcLyk/W15cXHNdKiQvaTtcbmNvbnN0IEZBU1RVUklSRUZFUkVOQ0UgPSAvXig/Oig/OlthLXpdW2EtejAtOSstLl0qOik/XFwvP1xcLyk/KD86W15cXFxcXFxzI11bXlxccyNdKik/KD86I1teXFxcXFxcc10qKT8kL2k7XG4vLyBodHRwczovL2dpdGh1Yi5jb20vRXhvZHVzTW92ZW1lbnQvc2NoZW1hc2FmZS9ibG9iL21hc3Rlci9zcmMvZm9ybWF0cy5qc1xuY29uc3QgRU1BSUwgPSAoaW5wdXQpID0+IHtcbiAgICBpZiAoaW5wdXRbMF0gPT09ICdcIicpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBjb25zdCBbbmFtZSwgaG9zdCwgLi4ucmVzdF0gPSBpbnB1dC5zcGxpdChcIkBcIik7XG4gICAgaWYgKCFuYW1lIHx8XG4gICAgICAgICFob3N0IHx8XG4gICAgICAgIHJlc3QubGVuZ3RoICE9PSAwIHx8XG4gICAgICAgIG5hbWUubGVuZ3RoID4gNjQgfHxcbiAgICAgICAgaG9zdC5sZW5ndGggPiAyNTMpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBpZiAobmFtZVswXSA9PT0gXCIuXCIgfHwgbmFtZS5lbmRzV2l0aChcIi5cIikgfHwgbmFtZS5pbmNsdWRlcyhcIi4uXCIpKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgaWYgKCEvXlthLXowLTkuLV0rJC9pLnRlc3QoaG9zdCkgfHxcbiAgICAgICAgIS9eW2EtejAtOS4hIyQlJicqKy89P15fYHt8fX4tXSskL2kudGVzdChuYW1lKSlcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiBob3N0XG4gICAgICAgIC5zcGxpdChcIi5cIilcbiAgICAgICAgLmV2ZXJ5KChwYXJ0KSA9PiAvXlthLXowLTldKFthLXowLTktXXswLDYxfVthLXowLTldKT8kL2kudGVzdChwYXJ0KSk7XG59O1xuLy8gb3B0aW1pemVkIGh0dHBzOi8vd3d3LnNhZmFyaWJvb2tzb25saW5lLmNvbS9saWJyYXJ5L3ZpZXcvcmVndWxhci1leHByZXNzaW9ucy1jb29rYm9vay85NzgwNTk2ODAyODM3L2NoMDdzMTYuaHRtbFxuY29uc3QgSVBWNCA9IC9eKD86KD86MjVbMC01XXwyWzAtNF1cXGR8WzAxXT9cXGRcXGQ/KVxcLil7M30oPzoyNVswLTVdfDJbMC00XVxcZHxbMDFdP1xcZFxcZD8pJC87XG4vLyBvcHRpbWl6ZWQgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy81MzQ5Ny9yZWd1bGFyLWV4cHJlc3Npb24tdGhhdC1tYXRjaGVzLXZhbGlkLWlwdjYtYWRkcmVzc2VzXG5jb25zdCBJUFY2ID0gL14oKChbMC05YS1mXXsxLDR9Oil7N30oWzAtOWEtZl17MSw0fXw6KSl8KChbMC05YS1mXXsxLDR9Oil7Nn0oOlswLTlhLWZdezEsNH18KCgyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkoXFwuKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKSl7M30pfDopKXwoKFswLTlhLWZdezEsNH06KXs1fSgoKDpbMC05YS1mXXsxLDR9KXsxLDJ9KXw6KCgyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkoXFwuKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKSl7M30pfDopKXwoKFswLTlhLWZdezEsNH06KXs0fSgoKDpbMC05YS1mXXsxLDR9KXsxLDN9KXwoKDpbMC05YS1mXXsxLDR9KT86KCgyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkoXFwuKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKSl7M30pKXw6KSl8KChbMC05YS1mXXsxLDR9Oil7M30oKCg6WzAtOWEtZl17MSw0fSl7MSw0fSl8KCg6WzAtOWEtZl17MSw0fSl7MCwyfTooKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKShcXC4oMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKXszfSkpfDopKXwoKFswLTlhLWZdezEsNH06KXsyfSgoKDpbMC05YS1mXXsxLDR9KXsxLDV9KXwoKDpbMC05YS1mXXsxLDR9KXswLDN9OigoMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKFxcLigyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkpezN9KSl8OikpfCgoWzAtOWEtZl17MSw0fTopezF9KCgoOlswLTlhLWZdezEsNH0pezEsNn0pfCgoOlswLTlhLWZdezEsNH0pezAsNH06KCgyNVswLTVdfDJbMC00XVxcZHwxXFxkXFxkfFsxLTldP1xcZCkoXFwuKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKSl7M30pKXw6KSl8KDooKCg6WzAtOWEtZl17MSw0fSl7MSw3fSl8KCg6WzAtOWEtZl17MSw0fSl7MCw1fTooKDI1WzAtNV18MlswLTRdXFxkfDFcXGRcXGR8WzEtOV0/XFxkKShcXC4oMjVbMC01XXwyWzAtNF1cXGR8MVxcZFxcZHxbMS05XT9cXGQpKXszfSkpfDopKSkkL2k7XG4vLyBodHRwczovL2dpdGh1Yi5jb20vRXhvZHVzTW92ZW1lbnQvc2NoZW1hc2FmZS9ibG9iL21hc3Rlci9zcmMvZm9ybWF0cy5qc1xuY29uc3QgRFVSQVRJT04gPSAoaW5wdXQpID0+IGlucHV0Lmxlbmd0aCA+IDEgJiZcbiAgICBpbnB1dC5sZW5ndGggPCA4MCAmJlxuICAgICgvXlBcXGQrKFsuLF1cXGQrKT9XJC8udGVzdChpbnB1dCkgfHxcbiAgICAgICAgKC9eUFtcXGRZTURUSFNdKihcXGRbLixdXFxkKyk/W1lNREhTXSQvLnRlc3QoaW5wdXQpICYmXG4gICAgICAgICAgICAvXlAoWy4sXFxkXStZKT8oWy4sXFxkXStNKT8oWy4sXFxkXStEKT8oVChbLixcXGRdK0gpPyhbLixcXGRdK00pPyhbLixcXGRdK1MpPyk/JC8udGVzdChpbnB1dCkpKTtcbmZ1bmN0aW9uIGJpbmQocikge1xuICAgIHJldHVybiByLnRlc3QuYmluZChyKTtcbn1cbmV4cG9ydCBjb25zdCBmdWxsRm9ybWF0ID0ge1xuICAgIGRhdGUsXG4gICAgdGltZTogLyogI19fUFVSRV9fICovIHRpbWUuYmluZCh1bmRlZmluZWQsIGZhbHNlKSxcbiAgICBcImRhdGUtdGltZVwiOiBkYXRlX3RpbWUsXG4gICAgZHVyYXRpb246IERVUkFUSU9OLFxuICAgIHVyaSxcbiAgICBcInVyaS1yZWZlcmVuY2VcIjogLyogI19fUFVSRV9fICovIGJpbmQoVVJJUkVGKSxcbiAgICBcInVyaS10ZW1wbGF0ZVwiOiAvKiAjX19QVVJFX18gKi8gYmluZChVUklURU1QTEFURSksXG4gICAgdXJsOiAvKiAjX19QVVJFX18gKi8gYmluZChVUkxfKSxcbiAgICBlbWFpbDogRU1BSUwsXG4gICAgaG9zdG5hbWU6IC8qICNfX1BVUkVfXyAqLyBiaW5kKEhPU1ROQU1FKSxcbiAgICBpcHY0OiAvKiAjX19QVVJFX18gKi8gYmluZChJUFY0KSxcbiAgICBpcHY2OiAvKiAjX19QVVJFX18gKi8gYmluZChJUFY2KSxcbiAgICByZWdleDogcmVnZXgsXG4gICAgdXVpZDogLyogI19fUFVSRV9fICovIGJpbmQoVVVJRCksXG4gICAgXCJqc29uLXBvaW50ZXJcIjogLyogI19fUFVSRV9fICovIGJpbmQoSlNPTl9QT0lOVEVSKSxcbiAgICBcImpzb24tcG9pbnRlci11cmktZnJhZ21lbnRcIjogLyogI19fUFVSRV9fICovIGJpbmQoSlNPTl9QT0lOVEVSX1VSSV9GUkFHTUVOVCksXG4gICAgXCJyZWxhdGl2ZS1qc29uLXBvaW50ZXJcIjogLyogI19fUFVSRV9fICovIGJpbmQoUkVMQVRJVkVfSlNPTl9QT0lOVEVSKSxcbn07XG5leHBvcnQgY29uc3QgZmFzdEZvcm1hdCA9IHtcbiAgICAuLi5mdWxsRm9ybWF0LFxuICAgIGRhdGU6IC8qICNfX1BVUkVfXyAqLyBiaW5kKEZBU1REQVRFKSxcbiAgICB0aW1lOiAvKiAjX19QVVJFX18gKi8gYmluZChGQVNUVElNRSksXG4gICAgXCJkYXRlLXRpbWVcIjogLyogI19fUFVSRV9fICovIGJpbmQoRkFTVERBVEVUSU1FKSxcbiAgICBcInVyaS1yZWZlcmVuY2VcIjogLyogI19fUFVSRV9fICovIGJpbmQoRkFTVFVSSVJFRkVSRU5DRSksXG59O1xuZnVuY3Rpb24gaXNMZWFwWWVhcih5ZWFyKSB7XG4gICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzMzMzkjYXBwZW5kaXgtQ1xuICAgIHJldHVybiB5ZWFyICUgNCA9PT0gMCAmJiAoeWVhciAlIDEwMCAhPT0gMCB8fCB5ZWFyICUgNDAwID09PSAwKTtcbn1cbmZ1bmN0aW9uIGRhdGUoc3RyKSB7XG4gICAgLy8gZnVsbC1kYXRlIGZyb20gaHR0cDovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzMzOSNzZWN0aW9uLTUuNlxuICAgIGNvbnN0IG1hdGNoZXMgPSBzdHIubWF0Y2goREFURSk7XG4gICAgaWYgKCFtYXRjaGVzKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgY29uc3QgeWVhciA9ICttYXRjaGVzWzFdO1xuICAgIGNvbnN0IG1vbnRoID0gK21hdGNoZXNbMl07XG4gICAgY29uc3QgZGF5ID0gK21hdGNoZXNbM107XG4gICAgcmV0dXJuIChtb250aCA+PSAxICYmXG4gICAgICAgIG1vbnRoIDw9IDEyICYmXG4gICAgICAgIGRheSA+PSAxICYmXG4gICAgICAgIGRheSA8PSAobW9udGggPT0gMiAmJiBpc0xlYXBZZWFyKHllYXIpID8gMjkgOiBEQVlTW21vbnRoXSkpO1xufVxuZnVuY3Rpb24gdGltZShmdWxsLCBzdHIpIHtcbiAgICBjb25zdCBtYXRjaGVzID0gc3RyLm1hdGNoKFRJTUUpO1xuICAgIGlmICghbWF0Y2hlcylcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGNvbnN0IGhvdXIgPSArbWF0Y2hlc1sxXTtcbiAgICBjb25zdCBtaW51dGUgPSArbWF0Y2hlc1syXTtcbiAgICBjb25zdCBzZWNvbmQgPSArbWF0Y2hlc1szXTtcbiAgICBjb25zdCB0aW1lWm9uZSA9ICEhbWF0Y2hlc1s1XTtcbiAgICByZXR1cm4gKCgoaG91ciA8PSAyMyAmJiBtaW51dGUgPD0gNTkgJiYgc2Vjb25kIDw9IDU5KSB8fFxuICAgICAgICAoaG91ciA9PSAyMyAmJiBtaW51dGUgPT0gNTkgJiYgc2Vjb25kID09IDYwKSkgJiZcbiAgICAgICAgKCFmdWxsIHx8IHRpbWVab25lKSk7XG59XG5jb25zdCBEQVRFX1RJTUVfU0VQQVJBVE9SID0gL3R8XFxzL2k7XG5mdW5jdGlvbiBkYXRlX3RpbWUoc3RyKSB7XG4gICAgLy8gaHR0cDovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzMzOSNzZWN0aW9uLTUuNlxuICAgIGNvbnN0IGRhdGVUaW1lID0gc3RyLnNwbGl0KERBVEVfVElNRV9TRVBBUkFUT1IpO1xuICAgIHJldHVybiBkYXRlVGltZS5sZW5ndGggPT0gMiAmJiBkYXRlKGRhdGVUaW1lWzBdKSAmJiB0aW1lKHRydWUsIGRhdGVUaW1lWzFdKTtcbn1cbmNvbnN0IE5PVF9VUklfRlJBR01FTlQgPSAvXFwvfDovO1xuY29uc3QgVVJJX1BBVFRFUk4gPSAvXig/OlthLXpdW2EtejAtOStcXC0uXSo6KSg/OlxcLz9cXC8oPzooPzpbYS16MC05XFwtLl9+ISQmJygpKissOz06XXwlWzAtOWEtZl17Mn0pKkApPyg/OlxcWyg/Oig/Oig/Oig/OlswLTlhLWZdezEsNH06KXs2fXw6Oig/OlswLTlhLWZdezEsNH06KXs1fXwoPzpbMC05YS1mXXsxLDR9KT86Oig/OlswLTlhLWZdezEsNH06KXs0fXwoPzooPzpbMC05YS1mXXsxLDR9Oil7MCwxfVswLTlhLWZdezEsNH0pPzo6KD86WzAtOWEtZl17MSw0fTopezN9fCg/Oig/OlswLTlhLWZdezEsNH06KXswLDJ9WzAtOWEtZl17MSw0fSk/OjooPzpbMC05YS1mXXsxLDR9Oil7Mn18KD86KD86WzAtOWEtZl17MSw0fTopezAsM31bMC05YS1mXXsxLDR9KT86OlswLTlhLWZdezEsNH06fCg/Oig/OlswLTlhLWZdezEsNH06KXswLDR9WzAtOWEtZl17MSw0fSk/OjopKD86WzAtOWEtZl17MSw0fTpbMC05YS1mXXsxLDR9fCg/Oig/OjI1WzAtNV18MlswLTRdXFxkfFswMV0/XFxkXFxkPylcXC4pezN9KD86MjVbMC01XXwyWzAtNF1cXGR8WzAxXT9cXGRcXGQ/KSl8KD86KD86WzAtOWEtZl17MSw0fTopezAsNX1bMC05YS1mXXsxLDR9KT86OlswLTlhLWZdezEsNH18KD86KD86WzAtOWEtZl17MSw0fTopezAsNn1bMC05YS1mXXsxLDR9KT86Oil8W1Z2XVswLTlhLWZdK1xcLlthLXowLTlcXC0uX34hJCYnKCkqKyw7PTpdKylcXF18KD86KD86MjVbMC01XXwyWzAtNF1cXGR8WzAxXT9cXGRcXGQ/KVxcLil7M30oPzoyNVswLTVdfDJbMC00XVxcZHxbMDFdP1xcZFxcZD8pfCg/OlthLXowLTlcXC0uX34hJCYnKCkqKyw7PV18JVswLTlhLWZdezJ9KSopKD86OlxcZCopPyg/OlxcLyg/OlthLXowLTlcXC0uX34hJCYnKCkqKyw7PTpAXXwlWzAtOWEtZl17Mn0pKikqfFxcLyg/Oig/OlthLXowLTlcXC0uX34hJCYnKCkqKyw7PTpAXXwlWzAtOWEtZl17Mn0pKyg/OlxcLyg/OlthLXowLTlcXC0uX34hJCYnKCkqKyw7PTpAXXwlWzAtOWEtZl17Mn0pKikqKT98KD86W2EtejAtOVxcLS5ffiEkJicoKSorLDs9OkBdfCVbMC05YS1mXXsyfSkrKD86XFwvKD86W2EtejAtOVxcLS5ffiEkJicoKSorLDs9OkBdfCVbMC05YS1mXXsyfSkqKSopKD86XFw/KD86W2EtejAtOVxcLS5ffiEkJicoKSorLDs9OkAvP118JVswLTlhLWZdezJ9KSopPyg/OiMoPzpbYS16MC05XFwtLl9+ISQmJygpKissOz06QC8/XXwlWzAtOWEtZl17Mn0pKik/JC9pO1xuZnVuY3Rpb24gdXJpKHN0cikge1xuICAgIC8vIGh0dHA6Ly9qbXJ3YXJlLmNvbS9hcnRpY2xlcy8yMDA5L3VyaV9yZWdleHAvVVJJX3JlZ2V4Lmh0bWwgKyBvcHRpb25hbCBwcm90b2NvbCArIHJlcXVpcmVkIFwiLlwiXG4gICAgcmV0dXJuIE5PVF9VUklfRlJBR01FTlQudGVzdChzdHIpICYmIFVSSV9QQVRURVJOLnRlc3Qoc3RyKTtcbn1cbmNvbnN0IFpfQU5DSE9SID0gL1teXFxcXF1cXFxcWi87XG5mdW5jdGlvbiByZWdleChzdHIpIHtcbiAgICBpZiAoWl9BTkNIT1IudGVzdChzdHIpKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgdHJ5IHtcbiAgICAgICAgbmV3IFJlZ0V4cChzdHIpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJEQVRFIiwiREFZUyIsIlRJTUUiLCJIT1NUTkFNRSIsIlVSSVJFRiIsIlVSSVRFTVBMQVRFIiwiVVJMXyIsIlVVSUQiLCJKU09OX1BPSU5URVIiLCJKU09OX1BPSU5URVJfVVJJX0ZSQUdNRU5UIiwiUkVMQVRJVkVfSlNPTl9QT0lOVEVSIiwiRkFTVERBVEUiLCJGQVNUVElNRSIsIkZBU1REQVRFVElNRSIsIkZBU1RVUklSRUZFUkVOQ0UiLCJFTUFJTCIsImlucHV0IiwibmFtZSIsImhvc3QiLCJyZXN0Iiwic3BsaXQiLCJsZW5ndGgiLCJlbmRzV2l0aCIsImluY2x1ZGVzIiwidGVzdCIsImV2ZXJ5IiwicGFydCIsIklQVjQiLCJJUFY2IiwiRFVSQVRJT04iLCJiaW5kIiwiciIsImZ1bGxGb3JtYXQiLCJkYXRlIiwidGltZSIsInVuZGVmaW5lZCIsImRhdGVfdGltZSIsImR1cmF0aW9uIiwidXJpIiwidXJsIiwiZW1haWwiLCJob3N0bmFtZSIsImlwdjQiLCJpcHY2IiwicmVnZXgiLCJ1dWlkIiwiZmFzdEZvcm1hdCIsImlzTGVhcFllYXIiLCJ5ZWFyIiwic3RyIiwibWF0Y2hlcyIsIm1hdGNoIiwibW9udGgiLCJkYXkiLCJmdWxsIiwiaG91ciIsIm1pbnV0ZSIsInNlY29uZCIsInRpbWVab25lIiwiREFURV9USU1FX1NFUEFSQVRPUiIsImRhdGVUaW1lIiwiTk9UX1VSSV9GUkFHTUVOVCIsIlVSSV9QQVRURVJOIiwiWl9BTkNIT1IiLCJSZWdFeHAiLCJlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/format.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/index.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/index.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Validator: () => (/* reexport safe */ _validator_js__WEBPACK_IMPORTED_MODULE_7__.Validator),\n/* harmony export */   deepCompareStrict: () => (/* reexport safe */ _deep_compare_strict_js__WEBPACK_IMPORTED_MODULE_0__.deepCompareStrict),\n/* harmony export */   dereference: () => (/* reexport safe */ _dereference_js__WEBPACK_IMPORTED_MODULE_1__.dereference),\n/* harmony export */   encodePointer: () => (/* reexport safe */ _pointer_js__WEBPACK_IMPORTED_MODULE_3__.encodePointer),\n/* harmony export */   escapePointer: () => (/* reexport safe */ _pointer_js__WEBPACK_IMPORTED_MODULE_3__.escapePointer),\n/* harmony export */   fastFormat: () => (/* reexport safe */ _format_js__WEBPACK_IMPORTED_MODULE_2__.fastFormat),\n/* harmony export */   fullFormat: () => (/* reexport safe */ _format_js__WEBPACK_IMPORTED_MODULE_2__.fullFormat),\n/* harmony export */   ignoredKeyword: () => (/* reexport safe */ _dereference_js__WEBPACK_IMPORTED_MODULE_1__.ignoredKeyword),\n/* harmony export */   initialBaseURI: () => (/* reexport safe */ _dereference_js__WEBPACK_IMPORTED_MODULE_1__.initialBaseURI),\n/* harmony export */   schemaArrayKeyword: () => (/* reexport safe */ _dereference_js__WEBPACK_IMPORTED_MODULE_1__.schemaArrayKeyword),\n/* harmony export */   schemaKeyword: () => (/* reexport safe */ _dereference_js__WEBPACK_IMPORTED_MODULE_1__.schemaKeyword),\n/* harmony export */   schemaMapKeyword: () => (/* reexport safe */ _dereference_js__WEBPACK_IMPORTED_MODULE_1__.schemaMapKeyword),\n/* harmony export */   ucs2length: () => (/* reexport safe */ _ucs2_length_js__WEBPACK_IMPORTED_MODULE_5__.ucs2length),\n/* harmony export */   validate: () => (/* reexport safe */ _validate_js__WEBPACK_IMPORTED_MODULE_6__.validate)\n/* harmony export */ });\n/* harmony import */ var _deep_compare_strict_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./deep-compare-strict.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/deep-compare-strict.js\");\n/* harmony import */ var _dereference_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./dereference.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/dereference.js\");\n/* harmony import */ var _format_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./format.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/format.js\");\n/* harmony import */ var _pointer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pointer.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/pointer.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./types.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/types.js\");\n/* harmony import */ var _ucs2_length_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ucs2-length.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/ucs2-length.js\");\n/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./validate.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/validate.js\");\n/* harmony import */ var _validator_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./validator.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/validator.js\");\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvQGNmd29ya2VyL2pzb24tc2NoZW1hL3NyYy9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXlDO0FBQ1I7QUFDTDtBQUNDO0FBQ0Y7QUFDTTtBQUNIO0FBQ0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1mb3JtLWJ1aWxkZXItdHV0b3JpYWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvQGNmd29ya2VyL2pzb24tc2NoZW1hL3NyYy9pbmRleC5qcz9iNGUzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gXCIuL2RlZXAtY29tcGFyZS1zdHJpY3QuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2RlcmVmZXJlbmNlLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9mb3JtYXQuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3BvaW50ZXIuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3R5cGVzLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi91Y3MyLWxlbmd0aC5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vdmFsaWRhdGUuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3ZhbGlkYXRvci5qc1wiO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/pointer.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/pointer.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   encodePointer: () => (/* binding */ encodePointer),\n/* harmony export */   escapePointer: () => (/* binding */ escapePointer)\n/* harmony export */ });\nfunction encodePointer(p) {\n    return encodeURI(escapePointer(p));\n}\nfunction escapePointer(p) {\n    return p.replace(/~/g, \"~0\").replace(/\\//g, \"~1\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvQGNmd29ya2VyL2pzb24tc2NoZW1hL3NyYy9wb2ludGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQU8sU0FBU0EsY0FBY0MsQ0FBQztJQUMzQixPQUFPQyxVQUFVQyxjQUFjRjtBQUNuQztBQUNPLFNBQVNFLGNBQWNGLENBQUM7SUFDM0IsT0FBT0EsRUFBRUcsT0FBTyxDQUFDLE1BQU0sTUFBTUEsT0FBTyxDQUFDLE9BQU87QUFDaEQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1mb3JtLWJ1aWxkZXItdHV0b3JpYWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvQGNmd29ya2VyL2pzb24tc2NoZW1hL3NyYy9wb2ludGVyLmpzPzNmOWMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIGVuY29kZVBvaW50ZXIocCkge1xuICAgIHJldHVybiBlbmNvZGVVUkkoZXNjYXBlUG9pbnRlcihwKSk7XG59XG5leHBvcnQgZnVuY3Rpb24gZXNjYXBlUG9pbnRlcihwKSB7XG4gICAgcmV0dXJuIHAucmVwbGFjZSgvfi9nLCBcIn4wXCIpLnJlcGxhY2UoL1xcLy9nLCBcIn4xXCIpO1xufVxuIl0sIm5hbWVzIjpbImVuY29kZVBvaW50ZXIiLCJwIiwiZW5jb2RlVVJJIiwiZXNjYXBlUG9pbnRlciIsInJlcGxhY2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/pointer.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/types.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/types.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvQGNmd29ya2VyL2pzb24tc2NoZW1hL3NyYy90eXBlcy5qcyIsIm1hcHBpbmdzIjoiO0FBQVUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1mb3JtLWJ1aWxkZXItdHV0b3JpYWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvQGNmd29ya2VyL2pzb24tc2NoZW1hL3NyYy90eXBlcy5qcz84NGNkIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB7fTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/types.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/ucs2-length.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/ucs2-length.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ucs2length: () => (/* binding */ ucs2length)\n/* harmony export */ });\n/**\n * Get UCS-2 length of a string\n * https://mathiasbynens.be/notes/javascript-encoding\n * https://github.com/bestiejs/punycode.js - punycode.ucs2.decode\n */ function ucs2length(s) {\n    let result = 0;\n    let length = s.length;\n    let index = 0;\n    let charCode;\n    while(index < length){\n        result++;\n        charCode = s.charCodeAt(index++);\n        if (charCode >= 0xd800 && charCode <= 0xdbff && index < length) {\n            // high surrogate, and there is a next character\n            charCode = s.charCodeAt(index);\n            if ((charCode & 0xfc00) == 0xdc00) {\n                // low surrogate\n                index++;\n            }\n        }\n    }\n    return result;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvQGNmd29ya2VyL2pzb24tc2NoZW1hL3NyYy91Y3MyLWxlbmd0aC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7Ozs7Q0FJQyxHQUNNLFNBQVNBLFdBQVdDLENBQUM7SUFDeEIsSUFBSUMsU0FBUztJQUNiLElBQUlDLFNBQVNGLEVBQUVFLE1BQU07SUFDckIsSUFBSUMsUUFBUTtJQUNaLElBQUlDO0lBQ0osTUFBT0QsUUFBUUQsT0FBUTtRQUNuQkQ7UUFDQUcsV0FBV0osRUFBRUssVUFBVSxDQUFDRjtRQUN4QixJQUFJQyxZQUFZLFVBQVVBLFlBQVksVUFBVUQsUUFBUUQsUUFBUTtZQUM1RCxnREFBZ0Q7WUFDaERFLFdBQVdKLEVBQUVLLFVBQVUsQ0FBQ0Y7WUFDeEIsSUFBSSxDQUFDQyxXQUFXLE1BQUssS0FBTSxRQUFRO2dCQUMvQixnQkFBZ0I7Z0JBQ2hCRDtZQUNKO1FBQ0o7SUFDSjtJQUNBLE9BQU9GO0FBQ1giLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1mb3JtLWJ1aWxkZXItdHV0b3JpYWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvQGNmd29ya2VyL2pzb24tc2NoZW1hL3NyYy91Y3MyLWxlbmd0aC5qcz8xMGJjIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogR2V0IFVDUy0yIGxlbmd0aCBvZiBhIHN0cmluZ1xuICogaHR0cHM6Ly9tYXRoaWFzYnluZW5zLmJlL25vdGVzL2phdmFzY3JpcHQtZW5jb2RpbmdcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9iZXN0aWVqcy9wdW55Y29kZS5qcyAtIHB1bnljb2RlLnVjczIuZGVjb2RlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1Y3MybGVuZ3RoKHMpIHtcbiAgICBsZXQgcmVzdWx0ID0gMDtcbiAgICBsZXQgbGVuZ3RoID0gcy5sZW5ndGg7XG4gICAgbGV0IGluZGV4ID0gMDtcbiAgICBsZXQgY2hhckNvZGU7XG4gICAgd2hpbGUgKGluZGV4IDwgbGVuZ3RoKSB7XG4gICAgICAgIHJlc3VsdCsrO1xuICAgICAgICBjaGFyQ29kZSA9IHMuY2hhckNvZGVBdChpbmRleCsrKTtcbiAgICAgICAgaWYgKGNoYXJDb2RlID49IDB4ZDgwMCAmJiBjaGFyQ29kZSA8PSAweGRiZmYgJiYgaW5kZXggPCBsZW5ndGgpIHtcbiAgICAgICAgICAgIC8vIGhpZ2ggc3Vycm9nYXRlLCBhbmQgdGhlcmUgaXMgYSBuZXh0IGNoYXJhY3RlclxuICAgICAgICAgICAgY2hhckNvZGUgPSBzLmNoYXJDb2RlQXQoaW5kZXgpO1xuICAgICAgICAgICAgaWYgKChjaGFyQ29kZSAmIDB4ZmMwMCkgPT0gMHhkYzAwKSB7XG4gICAgICAgICAgICAgICAgLy8gbG93IHN1cnJvZ2F0ZVxuICAgICAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbiJdLCJuYW1lcyI6WyJ1Y3MybGVuZ3RoIiwicyIsInJlc3VsdCIsImxlbmd0aCIsImluZGV4IiwiY2hhckNvZGUiLCJjaGFyQ29kZUF0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/ucs2-length.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/validate.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/validate.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   validate: () => (/* binding */ validate)\n/* harmony export */ });\n/* harmony import */ var _deep_compare_strict_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./deep-compare-strict.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/deep-compare-strict.js\");\n/* harmony import */ var _dereference_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./dereference.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/dereference.js\");\n/* harmony import */ var _format_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./format.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/format.js\");\n/* harmony import */ var _pointer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pointer.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/pointer.js\");\n/* harmony import */ var _ucs2_length_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ucs2-length.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/ucs2-length.js\");\n\n\n\n\n\nfunction validate(instance, schema, draft = \"2019-09\", lookup = (0,_dereference_js__WEBPACK_IMPORTED_MODULE_1__.dereference)(schema), shortCircuit = true, recursiveAnchor = null, instanceLocation = \"#\", schemaLocation = \"#\", evaluated = Object.create(null)) {\n    if (schema === true) {\n        return {\n            valid: true,\n            errors: []\n        };\n    }\n    if (schema === false) {\n        return {\n            valid: false,\n            errors: [\n                {\n                    instanceLocation,\n                    keyword: \"false\",\n                    keywordLocation: instanceLocation,\n                    error: \"False boolean schema.\"\n                }\n            ]\n        };\n    }\n    const rawInstanceType = typeof instance;\n    let instanceType;\n    switch(rawInstanceType){\n        case \"boolean\":\n        case \"number\":\n        case \"string\":\n            instanceType = rawInstanceType;\n            break;\n        case \"object\":\n            if (instance === null) {\n                instanceType = \"null\";\n            } else if (Array.isArray(instance)) {\n                instanceType = \"array\";\n            } else {\n                instanceType = \"object\";\n            }\n            break;\n        default:\n            // undefined, bigint, function, symbol\n            throw new Error(`Instances of \"${rawInstanceType}\" type are not supported.`);\n    }\n    const { $ref, $recursiveRef, $recursiveAnchor, type: $type, const: $const, enum: $enum, required: $required, not: $not, anyOf: $anyOf, allOf: $allOf, oneOf: $oneOf, if: $if, then: $then, else: $else, format: $format, properties: $properties, patternProperties: $patternProperties, additionalProperties: $additionalProperties, unevaluatedProperties: $unevaluatedProperties, minProperties: $minProperties, maxProperties: $maxProperties, propertyNames: $propertyNames, dependentRequired: $dependentRequired, dependentSchemas: $dependentSchemas, dependencies: $dependencies, prefixItems: $prefixItems, items: $items, additionalItems: $additionalItems, unevaluatedItems: $unevaluatedItems, contains: $contains, minContains: $minContains, maxContains: $maxContains, minItems: $minItems, maxItems: $maxItems, uniqueItems: $uniqueItems, minimum: $minimum, maximum: $maximum, exclusiveMinimum: $exclusiveMinimum, exclusiveMaximum: $exclusiveMaximum, multipleOf: $multipleOf, minLength: $minLength, maxLength: $maxLength, pattern: $pattern, __absolute_ref__, __absolute_recursive_ref__ } = schema;\n    const errors = [];\n    if ($recursiveAnchor === true && recursiveAnchor === null) {\n        recursiveAnchor = schema;\n    }\n    if ($recursiveRef === \"#\") {\n        const refSchema = recursiveAnchor === null ? lookup[__absolute_recursive_ref__] : recursiveAnchor;\n        const keywordLocation = `${schemaLocation}/$recursiveRef`;\n        const result = validate(instance, recursiveAnchor === null ? schema : recursiveAnchor, draft, lookup, shortCircuit, refSchema, instanceLocation, keywordLocation, evaluated);\n        if (!result.valid) {\n            errors.push({\n                instanceLocation,\n                keyword: \"$recursiveRef\",\n                keywordLocation,\n                error: \"A subschema had errors.\"\n            }, ...result.errors);\n        }\n    }\n    if ($ref !== undefined) {\n        const uri = __absolute_ref__ || $ref;\n        const refSchema = lookup[uri];\n        if (refSchema === undefined) {\n            let message = `Unresolved $ref \"${$ref}\".`;\n            if (__absolute_ref__ && __absolute_ref__ !== $ref) {\n                message += `  Absolute URI \"${__absolute_ref__}\".`;\n            }\n            message += `\\nKnown schemas:\\n- ${Object.keys(lookup).join(\"\\n- \")}`;\n            throw new Error(message);\n        }\n        const keywordLocation = `${schemaLocation}/$ref`;\n        const result = validate(instance, refSchema, draft, lookup, shortCircuit, recursiveAnchor, instanceLocation, keywordLocation, evaluated);\n        if (!result.valid) {\n            errors.push({\n                instanceLocation,\n                keyword: \"$ref\",\n                keywordLocation,\n                error: \"A subschema had errors.\"\n            }, ...result.errors);\n        }\n        if (draft === \"4\" || draft === \"7\") {\n            return {\n                valid: errors.length === 0,\n                errors\n            };\n        }\n    }\n    if (Array.isArray($type)) {\n        let length = $type.length;\n        let valid = false;\n        for(let i = 0; i < length; i++){\n            if (instanceType === $type[i] || $type[i] === \"integer\" && instanceType === \"number\" && instance % 1 === 0 && instance === instance) {\n                valid = true;\n                break;\n            }\n        }\n        if (!valid) {\n            errors.push({\n                instanceLocation,\n                keyword: \"type\",\n                keywordLocation: `${schemaLocation}/type`,\n                error: `Instance type \"${instanceType}\" is invalid. Expected \"${$type.join('\", \"')}\".`\n            });\n        }\n    } else if ($type === \"integer\") {\n        if (instanceType !== \"number\" || instance % 1 || instance !== instance) {\n            errors.push({\n                instanceLocation,\n                keyword: \"type\",\n                keywordLocation: `${schemaLocation}/type`,\n                error: `Instance type \"${instanceType}\" is invalid. Expected \"${$type}\".`\n            });\n        }\n    } else if ($type !== undefined && instanceType !== $type) {\n        errors.push({\n            instanceLocation,\n            keyword: \"type\",\n            keywordLocation: `${schemaLocation}/type`,\n            error: `Instance type \"${instanceType}\" is invalid. Expected \"${$type}\".`\n        });\n    }\n    if ($const !== undefined) {\n        if (instanceType === \"object\" || instanceType === \"array\") {\n            if (!(0,_deep_compare_strict_js__WEBPACK_IMPORTED_MODULE_0__.deepCompareStrict)(instance, $const)) {\n                errors.push({\n                    instanceLocation,\n                    keyword: \"const\",\n                    keywordLocation: `${schemaLocation}/const`,\n                    error: `Instance does not match ${JSON.stringify($const)}.`\n                });\n            }\n        } else if (instance !== $const) {\n            errors.push({\n                instanceLocation,\n                keyword: \"const\",\n                keywordLocation: `${schemaLocation}/const`,\n                error: `Instance does not match ${JSON.stringify($const)}.`\n            });\n        }\n    }\n    if ($enum !== undefined) {\n        if (instanceType === \"object\" || instanceType === \"array\") {\n            if (!$enum.some((value)=>(0,_deep_compare_strict_js__WEBPACK_IMPORTED_MODULE_0__.deepCompareStrict)(instance, value))) {\n                errors.push({\n                    instanceLocation,\n                    keyword: \"enum\",\n                    keywordLocation: `${schemaLocation}/enum`,\n                    error: `Instance does not match any of ${JSON.stringify($enum)}.`\n                });\n            }\n        } else if (!$enum.some((value)=>instance === value)) {\n            errors.push({\n                instanceLocation,\n                keyword: \"enum\",\n                keywordLocation: `${schemaLocation}/enum`,\n                error: `Instance does not match any of ${JSON.stringify($enum)}.`\n            });\n        }\n    }\n    if ($not !== undefined) {\n        const keywordLocation = `${schemaLocation}/not`;\n        const result = validate(instance, $not, draft, lookup, shortCircuit, recursiveAnchor, instanceLocation, keywordLocation /*,\n        evaluated*/ );\n        if (result.valid) {\n            errors.push({\n                instanceLocation,\n                keyword: \"not\",\n                keywordLocation,\n                error: 'Instance matched \"not\" schema.'\n            });\n        }\n    }\n    let subEvaluateds = [];\n    if ($anyOf !== undefined) {\n        const keywordLocation = `${schemaLocation}/anyOf`;\n        const errorsLength = errors.length;\n        let anyValid = false;\n        for(let i = 0; i < $anyOf.length; i++){\n            const subSchema = $anyOf[i];\n            const subEvaluated = Object.create(evaluated);\n            const result = validate(instance, subSchema, draft, lookup, shortCircuit, $recursiveAnchor === true ? recursiveAnchor : null, instanceLocation, `${keywordLocation}/${i}`, subEvaluated);\n            errors.push(...result.errors);\n            anyValid = anyValid || result.valid;\n            if (result.valid) {\n                subEvaluateds.push(subEvaluated);\n            }\n        }\n        if (anyValid) {\n            errors.length = errorsLength;\n        } else {\n            errors.splice(errorsLength, 0, {\n                instanceLocation,\n                keyword: \"anyOf\",\n                keywordLocation,\n                error: \"Instance does not match any subschemas.\"\n            });\n        }\n    }\n    if ($allOf !== undefined) {\n        const keywordLocation = `${schemaLocation}/allOf`;\n        const errorsLength = errors.length;\n        let allValid = true;\n        for(let i = 0; i < $allOf.length; i++){\n            const subSchema = $allOf[i];\n            const subEvaluated = Object.create(evaluated);\n            const result = validate(instance, subSchema, draft, lookup, shortCircuit, $recursiveAnchor === true ? recursiveAnchor : null, instanceLocation, `${keywordLocation}/${i}`, subEvaluated);\n            errors.push(...result.errors);\n            allValid = allValid && result.valid;\n            if (result.valid) {\n                subEvaluateds.push(subEvaluated);\n            }\n        }\n        if (allValid) {\n            errors.length = errorsLength;\n        } else {\n            errors.splice(errorsLength, 0, {\n                instanceLocation,\n                keyword: \"allOf\",\n                keywordLocation,\n                error: `Instance does not match every subschema.`\n            });\n        }\n    }\n    if ($oneOf !== undefined) {\n        const keywordLocation = `${schemaLocation}/oneOf`;\n        const errorsLength = errors.length;\n        const matches = $oneOf.filter((subSchema, i)=>{\n            const subEvaluated = Object.create(evaluated);\n            const result = validate(instance, subSchema, draft, lookup, shortCircuit, $recursiveAnchor === true ? recursiveAnchor : null, instanceLocation, `${keywordLocation}/${i}`, subEvaluated);\n            errors.push(...result.errors);\n            if (result.valid) {\n                subEvaluateds.push(subEvaluated);\n            }\n            return result.valid;\n        }).length;\n        if (matches === 1) {\n            errors.length = errorsLength;\n        } else {\n            errors.splice(errorsLength, 0, {\n                instanceLocation,\n                keyword: \"oneOf\",\n                keywordLocation,\n                error: `Instance does not match exactly one subschema (${matches} matches).`\n            });\n        }\n    }\n    if (instanceType === \"object\" || instanceType === \"array\") {\n        Object.assign(evaluated, ...subEvaluateds);\n    }\n    if ($if !== undefined) {\n        const keywordLocation = `${schemaLocation}/if`;\n        const conditionResult = validate(instance, $if, draft, lookup, shortCircuit, recursiveAnchor, instanceLocation, keywordLocation, evaluated).valid;\n        if (conditionResult) {\n            if ($then !== undefined) {\n                const thenResult = validate(instance, $then, draft, lookup, shortCircuit, recursiveAnchor, instanceLocation, `${schemaLocation}/then`, evaluated);\n                if (!thenResult.valid) {\n                    errors.push({\n                        instanceLocation,\n                        keyword: \"if\",\n                        keywordLocation,\n                        error: `Instance does not match \"then\" schema.`\n                    }, ...thenResult.errors);\n                }\n            }\n        } else if ($else !== undefined) {\n            const elseResult = validate(instance, $else, draft, lookup, shortCircuit, recursiveAnchor, instanceLocation, `${schemaLocation}/else`, evaluated);\n            if (!elseResult.valid) {\n                errors.push({\n                    instanceLocation,\n                    keyword: \"if\",\n                    keywordLocation,\n                    error: `Instance does not match \"else\" schema.`\n                }, ...elseResult.errors);\n            }\n        }\n    }\n    if (instanceType === \"object\") {\n        if ($required !== undefined) {\n            for (const key of $required){\n                if (!(key in instance)) {\n                    errors.push({\n                        instanceLocation,\n                        keyword: \"required\",\n                        keywordLocation: `${schemaLocation}/required`,\n                        error: `Instance does not have required property \"${key}\".`\n                    });\n                }\n            }\n        }\n        const keys = Object.keys(instance);\n        if ($minProperties !== undefined && keys.length < $minProperties) {\n            errors.push({\n                instanceLocation,\n                keyword: \"minProperties\",\n                keywordLocation: `${schemaLocation}/minProperties`,\n                error: `Instance does not have at least ${$minProperties} properties.`\n            });\n        }\n        if ($maxProperties !== undefined && keys.length > $maxProperties) {\n            errors.push({\n                instanceLocation,\n                keyword: \"maxProperties\",\n                keywordLocation: `${schemaLocation}/maxProperties`,\n                error: `Instance does not have at least ${$maxProperties} properties.`\n            });\n        }\n        if ($propertyNames !== undefined) {\n            const keywordLocation = `${schemaLocation}/propertyNames`;\n            for(const key in instance){\n                const subInstancePointer = `${instanceLocation}/${(0,_pointer_js__WEBPACK_IMPORTED_MODULE_3__.encodePointer)(key)}`;\n                const result = validate(key, $propertyNames, draft, lookup, shortCircuit, recursiveAnchor, subInstancePointer, keywordLocation);\n                if (!result.valid) {\n                    errors.push({\n                        instanceLocation,\n                        keyword: \"propertyNames\",\n                        keywordLocation,\n                        error: `Property name \"${key}\" does not match schema.`\n                    }, ...result.errors);\n                }\n            }\n        }\n        if ($dependentRequired !== undefined) {\n            const keywordLocation = `${schemaLocation}/dependantRequired`;\n            for(const key in $dependentRequired){\n                if (key in instance) {\n                    const required = $dependentRequired[key];\n                    for (const dependantKey of required){\n                        if (!(dependantKey in instance)) {\n                            errors.push({\n                                instanceLocation,\n                                keyword: \"dependentRequired\",\n                                keywordLocation,\n                                error: `Instance has \"${key}\" but does not have \"${dependantKey}\".`\n                            });\n                        }\n                    }\n                }\n            }\n        }\n        if ($dependentSchemas !== undefined) {\n            for(const key in $dependentSchemas){\n                const keywordLocation = `${schemaLocation}/dependentSchemas`;\n                if (key in instance) {\n                    const result = validate(instance, $dependentSchemas[key], draft, lookup, shortCircuit, recursiveAnchor, instanceLocation, `${keywordLocation}/${(0,_pointer_js__WEBPACK_IMPORTED_MODULE_3__.encodePointer)(key)}`, evaluated);\n                    if (!result.valid) {\n                        errors.push({\n                            instanceLocation,\n                            keyword: \"dependentSchemas\",\n                            keywordLocation,\n                            error: `Instance has \"${key}\" but does not match dependant schema.`\n                        }, ...result.errors);\n                    }\n                }\n            }\n        }\n        if ($dependencies !== undefined) {\n            const keywordLocation = `${schemaLocation}/dependencies`;\n            for(const key in $dependencies){\n                if (key in instance) {\n                    const propsOrSchema = $dependencies[key];\n                    if (Array.isArray(propsOrSchema)) {\n                        for (const dependantKey of propsOrSchema){\n                            if (!(dependantKey in instance)) {\n                                errors.push({\n                                    instanceLocation,\n                                    keyword: \"dependencies\",\n                                    keywordLocation,\n                                    error: `Instance has \"${key}\" but does not have \"${dependantKey}\".`\n                                });\n                            }\n                        }\n                    } else {\n                        const result = validate(instance, propsOrSchema, draft, lookup, shortCircuit, recursiveAnchor, instanceLocation, `${keywordLocation}/${(0,_pointer_js__WEBPACK_IMPORTED_MODULE_3__.encodePointer)(key)}`);\n                        if (!result.valid) {\n                            errors.push({\n                                instanceLocation,\n                                keyword: \"dependencies\",\n                                keywordLocation,\n                                error: `Instance has \"${key}\" but does not match dependant schema.`\n                            }, ...result.errors);\n                        }\n                    }\n                }\n            }\n        }\n        const thisEvaluated = Object.create(null);\n        let stop = false;\n        if ($properties !== undefined) {\n            const keywordLocation = `${schemaLocation}/properties`;\n            for(const key in $properties){\n                if (!(key in instance)) {\n                    continue;\n                }\n                const subInstancePointer = `${instanceLocation}/${(0,_pointer_js__WEBPACK_IMPORTED_MODULE_3__.encodePointer)(key)}`;\n                const result = validate(instance[key], $properties[key], draft, lookup, shortCircuit, recursiveAnchor, subInstancePointer, `${keywordLocation}/${(0,_pointer_js__WEBPACK_IMPORTED_MODULE_3__.encodePointer)(key)}`);\n                if (result.valid) {\n                    evaluated[key] = thisEvaluated[key] = true;\n                } else {\n                    stop = shortCircuit;\n                    errors.push({\n                        instanceLocation,\n                        keyword: \"properties\",\n                        keywordLocation,\n                        error: `Property \"${key}\" does not match schema.`\n                    }, ...result.errors);\n                    if (stop) break;\n                }\n            }\n        }\n        if (!stop && $patternProperties !== undefined) {\n            const keywordLocation = `${schemaLocation}/patternProperties`;\n            for(const pattern in $patternProperties){\n                const regex = new RegExp(pattern);\n                const subSchema = $patternProperties[pattern];\n                for(const key in instance){\n                    if (!regex.test(key)) {\n                        continue;\n                    }\n                    const subInstancePointer = `${instanceLocation}/${(0,_pointer_js__WEBPACK_IMPORTED_MODULE_3__.encodePointer)(key)}`;\n                    const result = validate(instance[key], subSchema, draft, lookup, shortCircuit, recursiveAnchor, subInstancePointer, `${keywordLocation}/${(0,_pointer_js__WEBPACK_IMPORTED_MODULE_3__.encodePointer)(pattern)}`);\n                    if (result.valid) {\n                        evaluated[key] = thisEvaluated[key] = true;\n                    } else {\n                        stop = shortCircuit;\n                        errors.push({\n                            instanceLocation,\n                            keyword: \"patternProperties\",\n                            keywordLocation,\n                            error: `Property \"${key}\" matches pattern \"${pattern}\" but does not match associated schema.`\n                        }, ...result.errors);\n                    }\n                }\n            }\n        }\n        if (!stop && $additionalProperties !== undefined) {\n            const keywordLocation = `${schemaLocation}/additionalProperties`;\n            for(const key in instance){\n                if (thisEvaluated[key]) {\n                    continue;\n                }\n                const subInstancePointer = `${instanceLocation}/${(0,_pointer_js__WEBPACK_IMPORTED_MODULE_3__.encodePointer)(key)}`;\n                const result = validate(instance[key], $additionalProperties, draft, lookup, shortCircuit, recursiveAnchor, subInstancePointer, keywordLocation);\n                if (result.valid) {\n                    evaluated[key] = true;\n                } else {\n                    stop = shortCircuit;\n                    errors.push({\n                        instanceLocation,\n                        keyword: \"additionalProperties\",\n                        keywordLocation,\n                        error: `Property \"${key}\" does not match additional properties schema.`\n                    }, ...result.errors);\n                }\n            }\n        } else if (!stop && $unevaluatedProperties !== undefined) {\n            const keywordLocation = `${schemaLocation}/unevaluatedProperties`;\n            for(const key in instance){\n                if (!evaluated[key]) {\n                    const subInstancePointer = `${instanceLocation}/${(0,_pointer_js__WEBPACK_IMPORTED_MODULE_3__.encodePointer)(key)}`;\n                    const result = validate(instance[key], $unevaluatedProperties, draft, lookup, shortCircuit, recursiveAnchor, subInstancePointer, keywordLocation);\n                    if (result.valid) {\n                        evaluated[key] = true;\n                    } else {\n                        errors.push({\n                            instanceLocation,\n                            keyword: \"unevaluatedProperties\",\n                            keywordLocation,\n                            error: `Property \"${key}\" does not match unevaluated properties schema.`\n                        }, ...result.errors);\n                    }\n                }\n            }\n        }\n    } else if (instanceType === \"array\") {\n        if ($maxItems !== undefined && instance.length > $maxItems) {\n            errors.push({\n                instanceLocation,\n                keyword: \"maxItems\",\n                keywordLocation: `${schemaLocation}/maxItems`,\n                error: `Array has too many items (${instance.length} > ${$maxItems}).`\n            });\n        }\n        if ($minItems !== undefined && instance.length < $minItems) {\n            errors.push({\n                instanceLocation,\n                keyword: \"minItems\",\n                keywordLocation: `${schemaLocation}/minItems`,\n                error: `Array has too few items (${instance.length} < ${$minItems}).`\n            });\n        }\n        const length = instance.length;\n        let i = 0;\n        let stop = false;\n        if ($prefixItems !== undefined) {\n            const keywordLocation = `${schemaLocation}/prefixItems`;\n            const length2 = Math.min($prefixItems.length, length);\n            for(; i < length2; i++){\n                const result = validate(instance[i], $prefixItems[i], draft, lookup, shortCircuit, recursiveAnchor, `${instanceLocation}/${i}`, `${keywordLocation}/${i}`);\n                evaluated[i] = true;\n                if (!result.valid) {\n                    stop = shortCircuit;\n                    errors.push({\n                        instanceLocation,\n                        keyword: \"prefixItems\",\n                        keywordLocation,\n                        error: `Items did not match schema.`\n                    }, ...result.errors);\n                    if (stop) break;\n                }\n            }\n        }\n        if ($items !== undefined) {\n            const keywordLocation = `${schemaLocation}/items`;\n            if (Array.isArray($items)) {\n                const length2 = Math.min($items.length, length);\n                for(; i < length2; i++){\n                    const result = validate(instance[i], $items[i], draft, lookup, shortCircuit, recursiveAnchor, `${instanceLocation}/${i}`, `${keywordLocation}/${i}`);\n                    evaluated[i] = true;\n                    if (!result.valid) {\n                        stop = shortCircuit;\n                        errors.push({\n                            instanceLocation,\n                            keyword: \"items\",\n                            keywordLocation,\n                            error: `Items did not match schema.`\n                        }, ...result.errors);\n                        if (stop) break;\n                    }\n                }\n            } else {\n                for(; i < length; i++){\n                    const result = validate(instance[i], $items, draft, lookup, shortCircuit, recursiveAnchor, `${instanceLocation}/${i}`, keywordLocation);\n                    evaluated[i] = true;\n                    if (!result.valid) {\n                        stop = shortCircuit;\n                        errors.push({\n                            instanceLocation,\n                            keyword: \"items\",\n                            keywordLocation,\n                            error: `Items did not match schema.`\n                        }, ...result.errors);\n                        if (stop) break;\n                    }\n                }\n            }\n            if (!stop && $additionalItems !== undefined) {\n                const keywordLocation = `${schemaLocation}/additionalItems`;\n                for(; i < length; i++){\n                    const result = validate(instance[i], $additionalItems, draft, lookup, shortCircuit, recursiveAnchor, `${instanceLocation}/${i}`, keywordLocation);\n                    evaluated[i] = true;\n                    if (!result.valid) {\n                        stop = shortCircuit;\n                        errors.push({\n                            instanceLocation,\n                            keyword: \"additionalItems\",\n                            keywordLocation,\n                            error: `Items did not match additional items schema.`\n                        }, ...result.errors);\n                    }\n                }\n            }\n        }\n        if ($contains !== undefined) {\n            if (length === 0 && $minContains === undefined) {\n                errors.push({\n                    instanceLocation,\n                    keyword: \"contains\",\n                    keywordLocation: `${schemaLocation}/contains`,\n                    error: `Array is empty. It must contain at least one item matching the schema.`\n                });\n            } else if ($minContains !== undefined && length < $minContains) {\n                errors.push({\n                    instanceLocation,\n                    keyword: \"minContains\",\n                    keywordLocation: `${schemaLocation}/minContains`,\n                    error: `Array has less items (${length}) than minContains (${$minContains}).`\n                });\n            } else {\n                const keywordLocation = `${schemaLocation}/contains`;\n                const errorsLength = errors.length;\n                let contained = 0;\n                for(let j = 0; j < length; j++){\n                    const result = validate(instance[j], $contains, draft, lookup, shortCircuit, recursiveAnchor, `${instanceLocation}/${j}`, keywordLocation);\n                    if (result.valid) {\n                        evaluated[j] = true;\n                        contained++;\n                    } else {\n                        errors.push(...result.errors);\n                    }\n                }\n                if (contained >= ($minContains || 0)) {\n                    errors.length = errorsLength;\n                }\n                if ($minContains === undefined && $maxContains === undefined && contained === 0) {\n                    errors.splice(errorsLength, 0, {\n                        instanceLocation,\n                        keyword: \"contains\",\n                        keywordLocation,\n                        error: `Array does not contain item matching schema.`\n                    });\n                } else if ($minContains !== undefined && contained < $minContains) {\n                    errors.push({\n                        instanceLocation,\n                        keyword: \"minContains\",\n                        keywordLocation: `${schemaLocation}/minContains`,\n                        error: `Array must contain at least ${$minContains} items matching schema. Only ${contained} items were found.`\n                    });\n                } else if ($maxContains !== undefined && contained > $maxContains) {\n                    errors.push({\n                        instanceLocation,\n                        keyword: \"maxContains\",\n                        keywordLocation: `${schemaLocation}/maxContains`,\n                        error: `Array may contain at most ${$maxContains} items matching schema. ${contained} items were found.`\n                    });\n                }\n            }\n        }\n        if (!stop && $unevaluatedItems !== undefined) {\n            const keywordLocation = `${schemaLocation}/unevaluatedItems`;\n            for(i; i < length; i++){\n                if (evaluated[i]) {\n                    continue;\n                }\n                const result = validate(instance[i], $unevaluatedItems, draft, lookup, shortCircuit, recursiveAnchor, `${instanceLocation}/${i}`, keywordLocation);\n                evaluated[i] = true;\n                if (!result.valid) {\n                    errors.push({\n                        instanceLocation,\n                        keyword: \"unevaluatedItems\",\n                        keywordLocation,\n                        error: `Items did not match unevaluated items schema.`\n                    }, ...result.errors);\n                }\n            }\n        }\n        if ($uniqueItems) {\n            for(let j = 0; j < length; j++){\n                const a = instance[j];\n                const ao = typeof a === \"object\" && a !== null;\n                for(let k = 0; k < length; k++){\n                    if (j === k) {\n                        continue;\n                    }\n                    const b = instance[k];\n                    const bo = typeof b === \"object\" && b !== null;\n                    if (a === b || ao && bo && (0,_deep_compare_strict_js__WEBPACK_IMPORTED_MODULE_0__.deepCompareStrict)(a, b)) {\n                        errors.push({\n                            instanceLocation,\n                            keyword: \"uniqueItems\",\n                            keywordLocation: `${schemaLocation}/uniqueItems`,\n                            error: `Duplicate items at indexes ${j} and ${k}.`\n                        });\n                        j = Number.MAX_SAFE_INTEGER;\n                        k = Number.MAX_SAFE_INTEGER;\n                    }\n                }\n            }\n        }\n    } else if (instanceType === \"number\") {\n        if (draft === \"4\") {\n            if ($minimum !== undefined && ($exclusiveMinimum === true && instance <= $minimum || instance < $minimum)) {\n                errors.push({\n                    instanceLocation,\n                    keyword: \"minimum\",\n                    keywordLocation: `${schemaLocation}/minimum`,\n                    error: `${instance} is less than ${$exclusiveMinimum ? \"or equal to \" : \"\"} ${$minimum}.`\n                });\n            }\n            if ($maximum !== undefined && ($exclusiveMaximum === true && instance >= $maximum || instance > $maximum)) {\n                errors.push({\n                    instanceLocation,\n                    keyword: \"maximum\",\n                    keywordLocation: `${schemaLocation}/maximum`,\n                    error: `${instance} is greater than ${$exclusiveMaximum ? \"or equal to \" : \"\"} ${$maximum}.`\n                });\n            }\n        } else {\n            if ($minimum !== undefined && instance < $minimum) {\n                errors.push({\n                    instanceLocation,\n                    keyword: \"minimum\",\n                    keywordLocation: `${schemaLocation}/minimum`,\n                    error: `${instance} is less than ${$minimum}.`\n                });\n            }\n            if ($maximum !== undefined && instance > $maximum) {\n                errors.push({\n                    instanceLocation,\n                    keyword: \"maximum\",\n                    keywordLocation: `${schemaLocation}/maximum`,\n                    error: `${instance} is greater than ${$maximum}.`\n                });\n            }\n            if ($exclusiveMinimum !== undefined && instance <= $exclusiveMinimum) {\n                errors.push({\n                    instanceLocation,\n                    keyword: \"exclusiveMinimum\",\n                    keywordLocation: `${schemaLocation}/exclusiveMinimum`,\n                    error: `${instance} is less than ${$exclusiveMinimum}.`\n                });\n            }\n            if ($exclusiveMaximum !== undefined && instance >= $exclusiveMaximum) {\n                errors.push({\n                    instanceLocation,\n                    keyword: \"exclusiveMaximum\",\n                    keywordLocation: `${schemaLocation}/exclusiveMaximum`,\n                    error: `${instance} is greater than or equal to ${$exclusiveMaximum}.`\n                });\n            }\n        }\n        if ($multipleOf !== undefined) {\n            const remainder = instance % $multipleOf;\n            if (Math.abs(0 - remainder) >= 1.1920929e-7 && Math.abs($multipleOf - remainder) >= 1.1920929e-7) {\n                errors.push({\n                    instanceLocation,\n                    keyword: \"multipleOf\",\n                    keywordLocation: `${schemaLocation}/multipleOf`,\n                    error: `${instance} is not a multiple of ${$multipleOf}.`\n                });\n            }\n        }\n    } else if (instanceType === \"string\") {\n        const length = $minLength === undefined && $maxLength === undefined ? 0 : (0,_ucs2_length_js__WEBPACK_IMPORTED_MODULE_4__.ucs2length)(instance);\n        if ($minLength !== undefined && length < $minLength) {\n            errors.push({\n                instanceLocation,\n                keyword: \"minLength\",\n                keywordLocation: `${schemaLocation}/minLength`,\n                error: `String is too short (${length} < ${$minLength}).`\n            });\n        }\n        if ($maxLength !== undefined && length > $maxLength) {\n            errors.push({\n                instanceLocation,\n                keyword: \"maxLength\",\n                keywordLocation: `${schemaLocation}/maxLength`,\n                error: `String is too long (${length} > ${$maxLength}).`\n            });\n        }\n        if ($pattern !== undefined && !new RegExp($pattern).test(instance)) {\n            errors.push({\n                instanceLocation,\n                keyword: \"pattern\",\n                keywordLocation: `${schemaLocation}/pattern`,\n                error: `String does not match pattern.`\n            });\n        }\n        if ($format !== undefined && _format_js__WEBPACK_IMPORTED_MODULE_2__.fastFormat[$format] && !_format_js__WEBPACK_IMPORTED_MODULE_2__.fastFormat[$format](instance)) {\n            errors.push({\n                instanceLocation,\n                keyword: \"format\",\n                keywordLocation: `${schemaLocation}/format`,\n                error: `String does not match format \"${$format}\".`\n            });\n        }\n    }\n    return {\n        valid: errors.length === 0,\n        errors\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvQGNmd29ya2VyL2pzb24tc2NoZW1hL3NyYy92YWxpZGF0ZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBNkQ7QUFDZDtBQUNOO0FBQ0k7QUFDQztBQUN2QyxTQUFTSyxTQUFTQyxRQUFRLEVBQUVDLE1BQU0sRUFBRUMsUUFBUSxTQUFTLEVBQUVDLFNBQVNSLDREQUFXQSxDQUFDTSxPQUFPLEVBQUVHLGVBQWUsSUFBSSxFQUFFQyxrQkFBa0IsSUFBSSxFQUFFQyxtQkFBbUIsR0FBRyxFQUFFQyxpQkFBaUIsR0FBRyxFQUFFQyxZQUFZQyxPQUFPQyxNQUFNLENBQUMsS0FBSztJQUNsTixJQUFJVCxXQUFXLE1BQU07UUFDakIsT0FBTztZQUFFVSxPQUFPO1lBQU1DLFFBQVEsRUFBRTtRQUFDO0lBQ3JDO0lBQ0EsSUFBSVgsV0FBVyxPQUFPO1FBQ2xCLE9BQU87WUFDSFUsT0FBTztZQUNQQyxRQUFRO2dCQUNKO29CQUNJTjtvQkFDQU8sU0FBUztvQkFDVEMsaUJBQWlCUjtvQkFDakJTLE9BQU87Z0JBQ1g7YUFDSDtRQUNMO0lBQ0o7SUFDQSxNQUFNQyxrQkFBa0IsT0FBT2hCO0lBQy9CLElBQUlpQjtJQUNKLE9BQVFEO1FBQ0osS0FBSztRQUNMLEtBQUs7UUFDTCxLQUFLO1lBQ0RDLGVBQWVEO1lBQ2Y7UUFDSixLQUFLO1lBQ0QsSUFBSWhCLGFBQWEsTUFBTTtnQkFDbkJpQixlQUFlO1lBQ25CLE9BQ0ssSUFBSUMsTUFBTUMsT0FBTyxDQUFDbkIsV0FBVztnQkFDOUJpQixlQUFlO1lBQ25CLE9BQ0s7Z0JBQ0RBLGVBQWU7WUFDbkI7WUFDQTtRQUNKO1lBQ0ksc0NBQXNDO1lBQ3RDLE1BQU0sSUFBSUcsTUFBTSxDQUFDLGNBQWMsRUFBRUosZ0JBQWdCLHlCQUF5QixDQUFDO0lBQ25GO0lBQ0EsTUFBTSxFQUFFSyxJQUFJLEVBQUVDLGFBQWEsRUFBRUMsZ0JBQWdCLEVBQUVDLE1B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QUFlLE9BQU8sQ0FBQztnQkFDM0NRLE9BQU8sQ0FBQyw4QkFBOEIsRUFBRWdDLFFBQVEsRUFBRSxDQUFDO1lBQ3ZEO1FBQ0o7SUFDSjtJQUNBLE9BQU87UUFBRXBDLE9BQU9DLE9BQU9zRyxNQUFNLEtBQUs7UUFBR3RHO0lBQU87QUFDaEQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1mb3JtLWJ1aWxkZXItdHV0b3JpYWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvQGNmd29ya2VyL2pzb24tc2NoZW1hL3NyYy92YWxpZGF0ZS5qcz8wYTA4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRlZXBDb21wYXJlU3RyaWN0IH0gZnJvbSBcIi4vZGVlcC1jb21wYXJlLXN0cmljdC5qc1wiO1xuaW1wb3J0IHsgZGVyZWZlcmVuY2UgfSBmcm9tIFwiLi9kZXJlZmVyZW5jZS5qc1wiO1xuaW1wb3J0IHsgZmFzdEZvcm1hdCB9IGZyb20gXCIuL2Zvcm1hdC5qc1wiO1xuaW1wb3J0IHsgZW5jb2RlUG9pbnRlciB9IGZyb20gXCIuL3BvaW50ZXIuanNcIjtcbmltcG9ydCB7IHVjczJsZW5ndGggfSBmcm9tIFwiLi91Y3MyLWxlbmd0aC5qc1wiO1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlKGluc3RhbmNlLCBzY2hlbWEsIGRyYWZ0ID0gXCIyMDE5LTA5XCIsIGxvb2t1cCA9IGRlcmVmZXJlbmNlKHNjaGVtYSksIHNob3J0Q2lyY3VpdCA9IHRydWUsIHJlY3Vyc2l2ZUFuY2hvciA9IG51bGwsIGluc3RhbmNlTG9jYXRpb24gPSBcIiNcIiwgc2NoZW1hTG9jYXRpb24gPSBcIiNcIiwgZXZhbHVhdGVkID0gT2JqZWN0LmNyZWF0ZShudWxsKSkge1xuICAgIGlmIChzY2hlbWEgPT09IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGVycm9yczogW10gfTtcbiAgICB9XG4gICAgaWYgKHNjaGVtYSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbGlkOiBmYWxzZSxcbiAgICAgICAgICAgIGVycm9yczogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VMb2NhdGlvbixcbiAgICAgICAgICAgICAgICAgICAga2V5d29yZDogXCJmYWxzZVwiLFxuICAgICAgICAgICAgICAgICAgICBrZXl3b3JkTG9jYXRpb246IGluc3RhbmNlTG9jYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBcIkZhbHNlIGJvb2xlYW4gc2NoZW1hLlwiLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjb25zdCByYXdJbnN0YW5jZVR5cGUgPSB0eXBlb2YgaW5zdGFuY2U7XG4gICAgbGV0IGluc3RhbmNlVHlwZTtcbiAgICBzd2l0Y2ggKHJhd0luc3RhbmNlVHlwZSkge1xuICAgICAgICBjYXNlIFwiYm9vbGVhblwiOlxuICAgICAgICBjYXNlIFwibnVtYmVyXCI6XG4gICAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgICAgICAgIGluc3RhbmNlVHlwZSA9IHJhd0luc3RhbmNlVHlwZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwib2JqZWN0XCI6XG4gICAgICAgICAgICBpZiAoaW5zdGFuY2UgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpbnN0YW5jZVR5cGUgPSBcIm51bGxcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaW5zdGFuY2UpKSB7XG4gICAgICAgICAgICAgICAgaW5zdGFuY2VUeXBlID0gXCJhcnJheVwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaW5zdGFuY2VUeXBlID0gXCJvYmplY3RcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgLy8gdW5kZWZpbmVkLCBiaWdpbnQsIGZ1bmN0aW9uLCBzeW1ib2xcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW5zdGFuY2VzIG9mIFwiJHtyYXdJbnN0YW5jZVR5cGV9XCIgdHlwZSBhcmUgbm90IHN1cHBvcnRlZC5gKTtcbiAgICB9XG4gICAgY29uc3QgeyAkcmVmLCAkcmVjdXJzaXZlUmVmLCAkcmVjdXJzaXZlQW5jaG9yLCB0eXBlOiAkdHlwZSwgY29uc3Q6ICRjb25zdCwgZW51bTogJGVudW0sIHJlcXVpcmVkOiAkcmVxdWlyZWQsIG5vdDogJG5vdCwgYW55T2Y6ICRhbnlPZiwgYWxsT2Y6ICRhbGxPZiwgb25lT2Y6ICRvbmVPZiwgaWY6ICRpZiwgdGhlbjogJHRoZW4sIGVsc2U6ICRlbHNlLCBmb3JtYXQ6ICRmb3JtYXQsIHByb3BlcnRpZXM6ICRwcm9wZXJ0aWVzLCBwYXR0ZXJuUHJvcGVydGllczogJHBhdHRlcm5Qcm9wZXJ0aWVzLCBhZGRpdGlvbmFsUHJvcGVydGllczogJGFkZGl0aW9uYWxQcm9wZXJ0aWVzLCB1bmV2YWx1YXRlZFByb3BlcnRpZXM6ICR1bmV2YWx1YXRlZFByb3BlcnRpZXMsIG1pblByb3BlcnRpZXM6ICRtaW5Qcm9wZXJ0aWVzLCBtYXhQcm9wZXJ0aWVzOiAkbWF4UHJvcGVydGllcywgcHJvcGVydHlOYW1lczogJHByb3BlcnR5TmFtZXMsIGRlcGVuZGVudFJlcXVpcmVkOiAkZGVwZW5kZW50UmVxdWlyZWQsIGRlcGVuZGVudFNjaGVtYXM6ICRkZXBlbmRlbnRTY2hlbWFzLCBkZXBlbmRlbmNpZXM6ICRkZXBlbmRlbmNpZXMsIHByZWZpeEl0ZW1zOiAkcHJlZml4SXRlbXMsIGl0ZW1zOiAkaXRlbXMsIGFkZGl0aW9uYWxJdGVtczogJGFkZGl0aW9uYWxJdGVtcywgdW5ldmFsdWF0ZWRJdGVtczogJHVuZXZhbHVhdGVkSXRlbXMsIGNvbnRhaW5zOiAkY29udGFpbnMsIG1pbkNvbnRhaW5zOiAkbWluQ29udGFpbnMsIG1heENvbnRhaW5zOiAkbWF4Q29udGFpbnMsIG1pbkl0ZW1zOiAkbWluSXRlbXMsIG1heEl0ZW1zOiAkbWF4SXRlbXMsIHVuaXF1ZUl0ZW1zOiAkdW5pcXVlSXRlbXMsIG1pbmltdW06ICRtaW5pbXVtLCBtYXhpbXVtOiAkbWF4aW11bSwgZXhjbHVzaXZlTWluaW11bTogJGV4Y2x1c2l2ZU1pbmltdW0sIGV4Y2x1c2l2ZU1heGltdW06ICRleGNsdXNpdmVNYXhpbXVtLCBtdWx0aXBsZU9mOiAkbXVsdGlwbGVPZiwgbWluTGVuZ3RoOiAkbWluTGVuZ3RoLCBtYXhMZW5ndGg6ICRtYXhMZW5ndGgsIHBhdHRlcm46ICRwYXR0ZXJuLCBfX2Fic29sdXRlX3JlZl9fLCBfX2Fic29sdXRlX3JlY3Vyc2l2ZV9yZWZfXywgfSA9IHNjaGVtYTtcbiAgICBjb25zdCBlcnJvcnMgPSBbXTtcbiAgICBpZiAoJHJlY3Vyc2l2ZUFuY2hvciA9PT0gdHJ1ZSAmJiByZWN1cnNpdmVBbmNob3IgPT09IG51bGwpIHtcbiAgICAgICAgcmVjdXJzaXZlQW5jaG9yID0gc2NoZW1hO1xuICAgIH1cbiAgICBpZiAoJHJlY3Vyc2l2ZVJlZiA9PT0gXCIjXCIpIHtcbiAgICAgICAgY29uc3QgcmVmU2NoZW1hID0gcmVjdXJzaXZlQW5jaG9yID09PSBudWxsXG4gICAgICAgICAgICA/IGxvb2t1cFtfX2Fic29sdXRlX3JlY3Vyc2l2ZV9yZWZfX11cbiAgICAgICAgICAgIDogcmVjdXJzaXZlQW5jaG9yO1xuICAgICAgICBjb25zdCBrZXl3b3JkTG9jYXRpb24gPSBgJHtzY2hlbWFMb2NhdGlvbn0vJHJlY3Vyc2l2ZVJlZmA7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRlKGluc3RhbmNlLCByZWN1cnNpdmVBbmNob3IgPT09IG51bGwgPyBzY2hlbWEgOiByZWN1cnNpdmVBbmNob3IsIGRyYWZ0LCBsb29rdXAsIHNob3J0Q2lyY3VpdCwgcmVmU2NoZW1hLCBpbnN0YW5jZUxvY2F0aW9uLCBrZXl3b3JkTG9jYXRpb24sIGV2YWx1YXRlZCk7XG4gICAgICAgIGlmICghcmVzdWx0LnZhbGlkKSB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgaW5zdGFuY2VMb2NhdGlvbixcbiAgICAgICAgICAgICAgICBrZXl3b3JkOiBcIiRyZWN1cnNpdmVSZWZcIixcbiAgICAgICAgICAgICAgICBrZXl3b3JkTG9jYXRpb24sXG4gICAgICAgICAgICAgICAgZXJyb3I6IFwiQSBzdWJzY2hlbWEgaGFkIGVycm9ycy5cIixcbiAgICAgICAgICAgIH0sIC4uLnJlc3VsdC5lcnJvcnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICgkcmVmICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3QgdXJpID0gX19hYnNvbHV0ZV9yZWZfXyB8fCAkcmVmO1xuICAgICAgICBjb25zdCByZWZTY2hlbWEgPSBsb29rdXBbdXJpXTtcbiAgICAgICAgaWYgKHJlZlNjaGVtYSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBsZXQgbWVzc2FnZSA9IGBVbnJlc29sdmVkICRyZWYgXCIkeyRyZWZ9XCIuYDtcbiAgICAgICAgICAgIGlmIChfX2Fic29sdXRlX3JlZl9fICYmIF9fYWJzb2x1dGVfcmVmX18gIT09ICRyZWYpIHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlICs9IGAgIEFic29sdXRlIFVSSSBcIiR7X19hYnNvbHV0ZV9yZWZfX31cIi5gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWVzc2FnZSArPSBgXFxuS25vd24gc2NoZW1hczpcXG4tICR7T2JqZWN0LmtleXMobG9va3VwKS5qb2luKFwiXFxuLSBcIil9YDtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBrZXl3b3JkTG9jYXRpb24gPSBgJHtzY2hlbWFMb2NhdGlvbn0vJHJlZmA7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRlKGluc3RhbmNlLCByZWZTY2hlbWEsIGRyYWZ0LCBsb29rdXAsIHNob3J0Q2lyY3VpdCwgcmVjdXJzaXZlQW5jaG9yLCBpbnN0YW5jZUxvY2F0aW9uLCBrZXl3b3JkTG9jYXRpb24sIGV2YWx1YXRlZCk7XG4gICAgICAgIGlmICghcmVzdWx0LnZhbGlkKSB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgaW5zdGFuY2VMb2NhdGlvbixcbiAgICAgICAgICAgICAgICBrZXl3b3JkOiBcIiRyZWZcIixcbiAgICAgICAgICAgICAgICBrZXl3b3JkTG9jYXRpb24sXG4gICAgICAgICAgICAgICAgZXJyb3I6IFwiQSBzdWJzY2hlbWEgaGFkIGVycm9ycy5cIixcbiAgICAgICAgICAgIH0sIC4uLnJlc3VsdC5lcnJvcnMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkcmFmdCA9PT0gXCI0XCIgfHwgZHJhZnQgPT09IFwiN1wiKSB7XG4gICAgICAgICAgICByZXR1cm4geyB2YWxpZDogZXJyb3JzLmxlbmd0aCA9PT0gMCwgZXJyb3JzIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoJHR5cGUpKSB7XG4gICAgICAgIGxldCBsZW5ndGggPSAkdHlwZS5sZW5ndGg7XG4gICAgICAgIGxldCB2YWxpZCA9IGZhbHNlO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoaW5zdGFuY2VUeXBlID09PSAkdHlwZVtpXSB8fFxuICAgICAgICAgICAgICAgICgkdHlwZVtpXSA9PT0gXCJpbnRlZ2VyXCIgJiZcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VUeXBlID09PSBcIm51bWJlclwiICYmXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlICUgMSA9PT0gMCAmJlxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZSA9PT0gaW5zdGFuY2UpKSB7XG4gICAgICAgICAgICAgICAgdmFsaWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghdmFsaWQpIHtcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKHtcbiAgICAgICAgICAgICAgICBpbnN0YW5jZUxvY2F0aW9uLFxuICAgICAgICAgICAgICAgIGtleXdvcmQ6IFwidHlwZVwiLFxuICAgICAgICAgICAgICAgIGtleXdvcmRMb2NhdGlvbjogYCR7c2NoZW1hTG9jYXRpb259L3R5cGVgLFxuICAgICAgICAgICAgICAgIGVycm9yOiBgSW5zdGFuY2UgdHlwZSBcIiR7aW5zdGFuY2VUeXBlfVwiIGlzIGludmFsaWQuIEV4cGVjdGVkIFwiJHskdHlwZS5qb2luKCdcIiwgXCInKX1cIi5gLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoJHR5cGUgPT09IFwiaW50ZWdlclwiKSB7XG4gICAgICAgIGlmIChpbnN0YW5jZVR5cGUgIT09IFwibnVtYmVyXCIgfHwgaW5zdGFuY2UgJSAxIHx8IGluc3RhbmNlICE9PSBpbnN0YW5jZSkge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2goe1xuICAgICAgICAgICAgICAgIGluc3RhbmNlTG9jYXRpb24sXG4gICAgICAgICAgICAgICAga2V5d29yZDogXCJ0eXBlXCIsXG4gICAgICAgICAgICAgICAga2V5d29yZExvY2F0aW9uOiBgJHtzY2hlbWFMb2NhdGlvbn0vdHlwZWAsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGBJbnN0YW5jZSB0eXBlIFwiJHtpbnN0YW5jZVR5cGV9XCIgaXMgaW52YWxpZC4gRXhwZWN0ZWQgXCIkeyR0eXBlfVwiLmAsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICgkdHlwZSAhPT0gdW5kZWZpbmVkICYmIGluc3RhbmNlVHlwZSAhPT0gJHR5cGUpIHtcbiAgICAgICAgZXJyb3JzLnB1c2goe1xuICAgICAgICAgICAgaW5zdGFuY2VMb2NhdGlvbixcbiAgICAgICAgICAgIGtleXdvcmQ6IFwidHlwZVwiLFxuICAgICAgICAgICAga2V5d29yZExvY2F0aW9uOiBgJHtzY2hlbWFMb2NhdGlvbn0vdHlwZWAsXG4gICAgICAgICAgICBlcnJvcjogYEluc3RhbmNlIHR5cGUgXCIke2luc3RhbmNlVHlwZX1cIiBpcyBpbnZhbGlkLiBFeHBlY3RlZCBcIiR7JHR5cGV9XCIuYCxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmICgkY29uc3QgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoaW5zdGFuY2VUeXBlID09PSBcIm9iamVjdFwiIHx8IGluc3RhbmNlVHlwZSA9PT0gXCJhcnJheVwiKSB7XG4gICAgICAgICAgICBpZiAoIWRlZXBDb21wYXJlU3RyaWN0KGluc3RhbmNlLCAkY29uc3QpKSB7XG4gICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUxvY2F0aW9uLFxuICAgICAgICAgICAgICAgICAgICBrZXl3b3JkOiBcImNvbnN0XCIsXG4gICAgICAgICAgICAgICAgICAgIGtleXdvcmRMb2NhdGlvbjogYCR7c2NoZW1hTG9jYXRpb259L2NvbnN0YCxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGBJbnN0YW5jZSBkb2VzIG5vdCBtYXRjaCAke0pTT04uc3RyaW5naWZ5KCRjb25zdCl9LmAsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoaW5zdGFuY2UgIT09ICRjb25zdCkge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2goe1xuICAgICAgICAgICAgICAgIGluc3RhbmNlTG9jYXRpb24sXG4gICAgICAgICAgICAgICAga2V5d29yZDogXCJjb25zdFwiLFxuICAgICAgICAgICAgICAgIGtleXdvcmRMb2NhdGlvbjogYCR7c2NoZW1hTG9jYXRpb259L2NvbnN0YCxcbiAgICAgICAgICAgICAgICBlcnJvcjogYEluc3RhbmNlIGRvZXMgbm90IG1hdGNoICR7SlNPTi5zdHJpbmdpZnkoJGNvbnN0KX0uYCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmICgkZW51bSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGlmIChpbnN0YW5jZVR5cGUgPT09IFwib2JqZWN0XCIgfHwgaW5zdGFuY2VUeXBlID09PSBcImFycmF5XCIpIHtcbiAgICAgICAgICAgIGlmICghJGVudW0uc29tZSgodmFsdWUpID0+IGRlZXBDb21wYXJlU3RyaWN0KGluc3RhbmNlLCB2YWx1ZSkpKSB7XG4gICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUxvY2F0aW9uLFxuICAgICAgICAgICAgICAgICAgICBrZXl3b3JkOiBcImVudW1cIixcbiAgICAgICAgICAgICAgICAgICAga2V5d29yZExvY2F0aW9uOiBgJHtzY2hlbWFMb2NhdGlvbn0vZW51bWAsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBgSW5zdGFuY2UgZG9lcyBub3QgbWF0Y2ggYW55IG9mICR7SlNPTi5zdHJpbmdpZnkoJGVudW0pfS5gLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCEkZW51bS5zb21lKCh2YWx1ZSkgPT4gaW5zdGFuY2UgPT09IHZhbHVlKSkge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2goe1xuICAgICAgICAgICAgICAgIGluc3RhbmNlTG9jYXRpb24sXG4gICAgICAgICAgICAgICAga2V5d29yZDogXCJlbnVtXCIsXG4gICAgICAgICAgICAgICAga2V5d29yZExvY2F0aW9uOiBgJHtzY2hlbWFMb2NhdGlvbn0vZW51bWAsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGBJbnN0YW5jZSBkb2VzIG5vdCBtYXRjaCBhbnkgb2YgJHtKU09OLnN0cmluZ2lmeSgkZW51bSl9LmAsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoJG5vdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnN0IGtleXdvcmRMb2NhdGlvbiA9IGAke3NjaGVtYUxvY2F0aW9ufS9ub3RgO1xuICAgICAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0ZShpbnN0YW5jZSwgJG5vdCwgZHJhZnQsIGxvb2t1cCwgc2hvcnRDaXJjdWl0LCByZWN1cnNpdmVBbmNob3IsIGluc3RhbmNlTG9jYXRpb24sIGtleXdvcmRMb2NhdGlvbiAvKixcbiAgICAgICAgZXZhbHVhdGVkKi8pO1xuICAgICAgICBpZiAocmVzdWx0LnZhbGlkKSB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgaW5zdGFuY2VMb2NhdGlvbixcbiAgICAgICAgICAgICAgICBrZXl3b3JkOiBcIm5vdFwiLFxuICAgICAgICAgICAgICAgIGtleXdvcmRMb2NhdGlvbixcbiAgICAgICAgICAgICAgICBlcnJvcjogJ0luc3RhbmNlIG1hdGNoZWQgXCJub3RcIiBzY2hlbWEuJyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGxldCBzdWJFdmFsdWF0ZWRzID0gW107XG4gICAgaWYgKCRhbnlPZiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnN0IGtleXdvcmRMb2NhdGlvbiA9IGAke3NjaGVtYUxvY2F0aW9ufS9hbnlPZmA7XG4gICAgICAgIGNvbnN0IGVycm9yc0xlbmd0aCA9IGVycm9ycy5sZW5ndGg7XG4gICAgICAgIGxldCBhbnlWYWxpZCA9IGZhbHNlO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8ICRhbnlPZi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qgc3ViU2NoZW1hID0gJGFueU9mW2ldO1xuICAgICAgICAgICAgY29uc3Qgc3ViRXZhbHVhdGVkID0gT2JqZWN0LmNyZWF0ZShldmFsdWF0ZWQpO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGUoaW5zdGFuY2UsIHN1YlNjaGVtYSwgZHJhZnQsIGxvb2t1cCwgc2hvcnRDaXJjdWl0LCAkcmVjdXJzaXZlQW5jaG9yID09PSB0cnVlID8gcmVjdXJzaXZlQW5jaG9yIDogbnVsbCwgaW5zdGFuY2VMb2NhdGlvbiwgYCR7a2V5d29yZExvY2F0aW9ufS8ke2l9YCwgc3ViRXZhbHVhdGVkKTtcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKC4uLnJlc3VsdC5lcnJvcnMpO1xuICAgICAgICAgICAgYW55VmFsaWQgPSBhbnlWYWxpZCB8fCByZXN1bHQudmFsaWQ7XG4gICAgICAgICAgICBpZiAocmVzdWx0LnZhbGlkKSB7XG4gICAgICAgICAgICAgICAgc3ViRXZhbHVhdGVkcy5wdXNoKHN1YkV2YWx1YXRlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFueVZhbGlkKSB7XG4gICAgICAgICAgICBlcnJvcnMubGVuZ3RoID0gZXJyb3JzTGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZXJyb3JzLnNwbGljZShlcnJvcnNMZW5ndGgsIDAsIHtcbiAgICAgICAgICAgICAgICBpbnN0YW5jZUxvY2F0aW9uLFxuICAgICAgICAgICAgICAgIGtleXdvcmQ6IFwiYW55T2ZcIixcbiAgICAgICAgICAgICAgICBrZXl3b3JkTG9jYXRpb24sXG4gICAgICAgICAgICAgICAgZXJyb3I6IFwiSW5zdGFuY2UgZG9lcyBub3QgbWF0Y2ggYW55IHN1YnNjaGVtYXMuXCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoJGFsbE9mICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3Qga2V5d29yZExvY2F0aW9uID0gYCR7c2NoZW1hTG9jYXRpb259L2FsbE9mYDtcbiAgICAgICAgY29uc3QgZXJyb3JzTGVuZ3RoID0gZXJyb3JzLmxlbmd0aDtcbiAgICAgICAgbGV0IGFsbFZhbGlkID0gdHJ1ZTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAkYWxsT2YubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHN1YlNjaGVtYSA9ICRhbGxPZltpXTtcbiAgICAgICAgICAgIGNvbnN0IHN1YkV2YWx1YXRlZCA9IE9iamVjdC5jcmVhdGUoZXZhbHVhdGVkKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRlKGluc3RhbmNlLCBzdWJTY2hlbWEsIGRyYWZ0LCBsb29rdXAsIHNob3J0Q2lyY3VpdCwgJHJlY3Vyc2l2ZUFuY2hvciA9PT0gdHJ1ZSA/IHJlY3Vyc2l2ZUFuY2hvciA6IG51bGwsIGluc3RhbmNlTG9jYXRpb24sIGAke2tleXdvcmRMb2NhdGlvbn0vJHtpfWAsIHN1YkV2YWx1YXRlZCk7XG4gICAgICAgICAgICBlcnJvcnMucHVzaCguLi5yZXN1bHQuZXJyb3JzKTtcbiAgICAgICAgICAgIGFsbFZhbGlkID0gYWxsVmFsaWQgJiYgcmVzdWx0LnZhbGlkO1xuICAgICAgICAgICAgaWYgKHJlc3VsdC52YWxpZCkge1xuICAgICAgICAgICAgICAgIHN1YkV2YWx1YXRlZHMucHVzaChzdWJFdmFsdWF0ZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChhbGxWYWxpZCkge1xuICAgICAgICAgICAgZXJyb3JzLmxlbmd0aCA9IGVycm9yc0xlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGVycm9ycy5zcGxpY2UoZXJyb3JzTGVuZ3RoLCAwLCB7XG4gICAgICAgICAgICAgICAgaW5zdGFuY2VMb2NhdGlvbixcbiAgICAgICAgICAgICAgICBrZXl3b3JkOiBcImFsbE9mXCIsXG4gICAgICAgICAgICAgICAga2V5d29yZExvY2F0aW9uLFxuICAgICAgICAgICAgICAgIGVycm9yOiBgSW5zdGFuY2UgZG9lcyBub3QgbWF0Y2ggZXZlcnkgc3Vic2NoZW1hLmAsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoJG9uZU9mICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3Qga2V5d29yZExvY2F0aW9uID0gYCR7c2NoZW1hTG9jYXRpb259L29uZU9mYDtcbiAgICAgICAgY29uc3QgZXJyb3JzTGVuZ3RoID0gZXJyb3JzLmxlbmd0aDtcbiAgICAgICAgY29uc3QgbWF0Y2hlcyA9ICRvbmVPZi5maWx0ZXIoKHN1YlNjaGVtYSwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3ViRXZhbHVhdGVkID0gT2JqZWN0LmNyZWF0ZShldmFsdWF0ZWQpO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGUoaW5zdGFuY2UsIHN1YlNjaGVtYSwgZHJhZnQsIGxvb2t1cCwgc2hvcnRDaXJjdWl0LCAkcmVjdXJzaXZlQW5jaG9yID09PSB0cnVlID8gcmVjdXJzaXZlQW5jaG9yIDogbnVsbCwgaW5zdGFuY2VMb2NhdGlvbiwgYCR7a2V5d29yZExvY2F0aW9ufS8ke2l9YCwgc3ViRXZhbHVhdGVkKTtcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKC4uLnJlc3VsdC5lcnJvcnMpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdC52YWxpZCkge1xuICAgICAgICAgICAgICAgIHN1YkV2YWx1YXRlZHMucHVzaChzdWJFdmFsdWF0ZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC52YWxpZDtcbiAgICAgICAgfSkubGVuZ3RoO1xuICAgICAgICBpZiAobWF0Y2hlcyA9PT0gMSkge1xuICAgICAgICAgICAgZXJyb3JzLmxlbmd0aCA9IGVycm9yc0xlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGVycm9ycy5zcGxpY2UoZXJyb3JzTGVuZ3RoLCAwLCB7XG4gICAgICAgICAgICAgICAgaW5zdGFuY2VMb2NhdGlvbixcbiAgICAgICAgICAgICAgICBrZXl3b3JkOiBcIm9uZU9mXCIsXG4gICAgICAgICAgICAgICAga2V5d29yZExvY2F0aW9uLFxuICAgICAgICAgICAgICAgIGVycm9yOiBgSW5zdGFuY2UgZG9lcyBub3QgbWF0Y2ggZXhhY3RseSBvbmUgc3Vic2NoZW1hICgke21hdGNoZXN9IG1hdGNoZXMpLmAsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoaW5zdGFuY2VUeXBlID09PSBcIm9iamVjdFwiIHx8IGluc3RhbmNlVHlwZSA9PT0gXCJhcnJheVwiKSB7XG4gICAgICAgIE9iamVjdC5hc3NpZ24oZXZhbHVhdGVkLCAuLi5zdWJFdmFsdWF0ZWRzKTtcbiAgICB9XG4gICAgaWYgKCRpZiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnN0IGtleXdvcmRMb2NhdGlvbiA9IGAke3NjaGVtYUxvY2F0aW9ufS9pZmA7XG4gICAgICAgIGNvbnN0IGNvbmRpdGlvblJlc3VsdCA9IHZhbGlkYXRlKGluc3RhbmNlLCAkaWYsIGRyYWZ0LCBsb29rdXAsIHNob3J0Q2lyY3VpdCwgcmVjdXJzaXZlQW5jaG9yLCBpbnN0YW5jZUxvY2F0aW9uLCBrZXl3b3JkTG9jYXRpb24sIGV2YWx1YXRlZCkudmFsaWQ7XG4gICAgICAgIGlmIChjb25kaXRpb25SZXN1bHQpIHtcbiAgICAgICAgICAgIGlmICgkdGhlbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGhlblJlc3VsdCA9IHZhbGlkYXRlKGluc3RhbmNlLCAkdGhlbiwgZHJhZnQsIGxvb2t1cCwgc2hvcnRDaXJjdWl0LCByZWN1cnNpdmVBbmNob3IsIGluc3RhbmNlTG9jYXRpb24sIGAke3NjaGVtYUxvY2F0aW9ufS90aGVuYCwgZXZhbHVhdGVkKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoZW5SZXN1bHQudmFsaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VMb2NhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXdvcmQ6IFwiaWZcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXdvcmRMb2NhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBgSW5zdGFuY2UgZG9lcyBub3QgbWF0Y2ggXCJ0aGVuXCIgc2NoZW1hLmAsXG4gICAgICAgICAgICAgICAgICAgIH0sIC4uLnRoZW5SZXN1bHQuZXJyb3JzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoJGVsc2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3QgZWxzZVJlc3VsdCA9IHZhbGlkYXRlKGluc3RhbmNlLCAkZWxzZSwgZHJhZnQsIGxvb2t1cCwgc2hvcnRDaXJjdWl0LCByZWN1cnNpdmVBbmNob3IsIGluc3RhbmNlTG9jYXRpb24sIGAke3NjaGVtYUxvY2F0aW9ufS9lbHNlYCwgZXZhbHVhdGVkKTtcbiAgICAgICAgICAgIGlmICghZWxzZVJlc3VsdC52YWxpZCkge1xuICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VMb2NhdGlvbixcbiAgICAgICAgICAgICAgICAgICAga2V5d29yZDogXCJpZlwiLFxuICAgICAgICAgICAgICAgICAgICBrZXl3b3JkTG9jYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBgSW5zdGFuY2UgZG9lcyBub3QgbWF0Y2ggXCJlbHNlXCIgc2NoZW1hLmAsXG4gICAgICAgICAgICAgICAgfSwgLi4uZWxzZVJlc3VsdC5lcnJvcnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChpbnN0YW5jZVR5cGUgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgaWYgKCRyZXF1aXJlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiAkcmVxdWlyZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShrZXkgaW4gaW5zdGFuY2UpKSB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlTG9jYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXl3b3JkOiBcInJlcXVpcmVkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXl3b3JkTG9jYXRpb246IGAke3NjaGVtYUxvY2F0aW9ufS9yZXF1aXJlZGAsXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogYEluc3RhbmNlIGRvZXMgbm90IGhhdmUgcmVxdWlyZWQgcHJvcGVydHkgXCIke2tleX1cIi5gLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGluc3RhbmNlKTtcbiAgICAgICAgaWYgKCRtaW5Qcm9wZXJ0aWVzICE9PSB1bmRlZmluZWQgJiYga2V5cy5sZW5ndGggPCAkbWluUHJvcGVydGllcykge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2goe1xuICAgICAgICAgICAgICAgIGluc3RhbmNlTG9jYXRpb24sXG4gICAgICAgICAgICAgICAga2V5d29yZDogXCJtaW5Qcm9wZXJ0aWVzXCIsXG4gICAgICAgICAgICAgICAga2V5d29yZExvY2F0aW9uOiBgJHtzY2hlbWFMb2NhdGlvbn0vbWluUHJvcGVydGllc2AsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGBJbnN0YW5jZSBkb2VzIG5vdCBoYXZlIGF0IGxlYXN0ICR7JG1pblByb3BlcnRpZXN9IHByb3BlcnRpZXMuYCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICgkbWF4UHJvcGVydGllcyAhPT0gdW5kZWZpbmVkICYmIGtleXMubGVuZ3RoID4gJG1heFByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKHtcbiAgICAgICAgICAgICAgICBpbnN0YW5jZUxvY2F0aW9uLFxuICAgICAgICAgICAgICAgIGtleXdvcmQ6IFwibWF4UHJvcGVydGllc1wiLFxuICAgICAgICAgICAgICAgIGtleXdvcmRMb2NhdGlvbjogYCR7c2NoZW1hTG9jYXRpb259L21heFByb3BlcnRpZXNgLFxuICAgICAgICAgICAgICAgIGVycm9yOiBgSW5zdGFuY2UgZG9lcyBub3QgaGF2ZSBhdCBsZWFzdCAkeyRtYXhQcm9wZXJ0aWVzfSBwcm9wZXJ0aWVzLmAsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJHByb3BlcnR5TmFtZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3Qga2V5d29yZExvY2F0aW9uID0gYCR7c2NoZW1hTG9jYXRpb259L3Byb3BlcnR5TmFtZXNgO1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gaW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdWJJbnN0YW5jZVBvaW50ZXIgPSBgJHtpbnN0YW5jZUxvY2F0aW9ufS8ke2VuY29kZVBvaW50ZXIoa2V5KX1gO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRlKGtleSwgJHByb3BlcnR5TmFtZXMsIGRyYWZ0LCBsb29rdXAsIHNob3J0Q2lyY3VpdCwgcmVjdXJzaXZlQW5jaG9yLCBzdWJJbnN0YW5jZVBvaW50ZXIsIGtleXdvcmRMb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQudmFsaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VMb2NhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXdvcmQ6IFwicHJvcGVydHlOYW1lc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5d29yZExvY2F0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGBQcm9wZXJ0eSBuYW1lIFwiJHtrZXl9XCIgZG9lcyBub3QgbWF0Y2ggc2NoZW1hLmAsXG4gICAgICAgICAgICAgICAgICAgIH0sIC4uLnJlc3VsdC5lcnJvcnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoJGRlcGVuZGVudFJlcXVpcmVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGtleXdvcmRMb2NhdGlvbiA9IGAke3NjaGVtYUxvY2F0aW9ufS9kZXBlbmRhbnRSZXF1aXJlZGA7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiAkZGVwZW5kZW50UmVxdWlyZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5IGluIGluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVpcmVkID0gJGRlcGVuZGVudFJlcXVpcmVkW2tleV07XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZGVwZW5kYW50S2V5IG9mIHJlcXVpcmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShkZXBlbmRhbnRLZXkgaW4gaW5zdGFuY2UpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUxvY2F0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXl3b3JkOiBcImRlcGVuZGVudFJlcXVpcmVkXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleXdvcmRMb2NhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGBJbnN0YW5jZSBoYXMgXCIke2tleX1cIiBidXQgZG9lcyBub3QgaGF2ZSBcIiR7ZGVwZW5kYW50S2V5fVwiLmAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCRkZXBlbmRlbnRTY2hlbWFzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluICRkZXBlbmRlbnRTY2hlbWFzKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5d29yZExvY2F0aW9uID0gYCR7c2NoZW1hTG9jYXRpb259L2RlcGVuZGVudFNjaGVtYXNgO1xuICAgICAgICAgICAgICAgIGlmIChrZXkgaW4gaW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGUoaW5zdGFuY2UsICRkZXBlbmRlbnRTY2hlbWFzW2tleV0sIGRyYWZ0LCBsb29rdXAsIHNob3J0Q2lyY3VpdCwgcmVjdXJzaXZlQW5jaG9yLCBpbnN0YW5jZUxvY2F0aW9uLCBgJHtrZXl3b3JkTG9jYXRpb259LyR7ZW5jb2RlUG9pbnRlcihrZXkpfWAsIGV2YWx1YXRlZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcmVzdWx0LnZhbGlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VMb2NhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXl3b3JkOiBcImRlcGVuZGVudFNjaGVtYXNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXl3b3JkTG9jYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGBJbnN0YW5jZSBoYXMgXCIke2tleX1cIiBidXQgZG9lcyBub3QgbWF0Y2ggZGVwZW5kYW50IHNjaGVtYS5gLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgLi4ucmVzdWx0LmVycm9ycyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCRkZXBlbmRlbmNpZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3Qga2V5d29yZExvY2F0aW9uID0gYCR7c2NoZW1hTG9jYXRpb259L2RlcGVuZGVuY2llc2A7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiAkZGVwZW5kZW5jaWVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGtleSBpbiBpbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9wc09yU2NoZW1hID0gJGRlcGVuZGVuY2llc1trZXldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShwcm9wc09yU2NoZW1hKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBkZXBlbmRhbnRLZXkgb2YgcHJvcHNPclNjaGVtYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGRlcGVuZGFudEtleSBpbiBpbnN0YW5jZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VMb2NhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleXdvcmQ6IFwiZGVwZW5kZW5jaWVzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXl3b3JkTG9jYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogYEluc3RhbmNlIGhhcyBcIiR7a2V5fVwiIGJ1dCBkb2VzIG5vdCBoYXZlIFwiJHtkZXBlbmRhbnRLZXl9XCIuYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGUoaW5zdGFuY2UsIHByb3BzT3JTY2hlbWEsIGRyYWZ0LCBsb29rdXAsIHNob3J0Q2lyY3VpdCwgcmVjdXJzaXZlQW5jaG9yLCBpbnN0YW5jZUxvY2F0aW9uLCBgJHtrZXl3b3JkTG9jYXRpb259LyR7ZW5jb2RlUG9pbnRlcihrZXkpfWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQudmFsaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlTG9jYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleXdvcmQ6IFwiZGVwZW5kZW5jaWVzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleXdvcmRMb2NhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGBJbnN0YW5jZSBoYXMgXCIke2tleX1cIiBidXQgZG9lcyBub3QgbWF0Y2ggZGVwZW5kYW50IHNjaGVtYS5gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIC4uLnJlc3VsdC5lcnJvcnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRoaXNFdmFsdWF0ZWQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICBsZXQgc3RvcCA9IGZhbHNlO1xuICAgICAgICBpZiAoJHByb3BlcnRpZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3Qga2V5d29yZExvY2F0aW9uID0gYCR7c2NoZW1hTG9jYXRpb259L3Byb3BlcnRpZXNgO1xuICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gJHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShrZXkgaW4gaW5zdGFuY2UpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBzdWJJbnN0YW5jZVBvaW50ZXIgPSBgJHtpbnN0YW5jZUxvY2F0aW9ufS8ke2VuY29kZVBvaW50ZXIoa2V5KX1gO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRlKGluc3RhbmNlW2tleV0sICRwcm9wZXJ0aWVzW2tleV0sIGRyYWZ0LCBsb29rdXAsIHNob3J0Q2lyY3VpdCwgcmVjdXJzaXZlQW5jaG9yLCBzdWJJbnN0YW5jZVBvaW50ZXIsIGAke2tleXdvcmRMb2NhdGlvbn0vJHtlbmNvZGVQb2ludGVyKGtleSl9YCk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC52YWxpZCkge1xuICAgICAgICAgICAgICAgICAgICBldmFsdWF0ZWRba2V5XSA9IHRoaXNFdmFsdWF0ZWRba2V5XSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdG9wID0gc2hvcnRDaXJjdWl0O1xuICAgICAgICAgICAgICAgICAgICBlcnJvcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUxvY2F0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5d29yZDogXCJwcm9wZXJ0aWVzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXl3b3JkTG9jYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogYFByb3BlcnR5IFwiJHtrZXl9XCIgZG9lcyBub3QgbWF0Y2ggc2NoZW1hLmAsXG4gICAgICAgICAgICAgICAgICAgIH0sIC4uLnJlc3VsdC5lcnJvcnMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RvcClcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIXN0b3AgJiYgJHBhdHRlcm5Qcm9wZXJ0aWVzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGtleXdvcmRMb2NhdGlvbiA9IGAke3NjaGVtYUxvY2F0aW9ufS9wYXR0ZXJuUHJvcGVydGllc2A7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBhdHRlcm4gaW4gJHBhdHRlcm5Qcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKHBhdHRlcm4pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHN1YlNjaGVtYSA9ICRwYXR0ZXJuUHJvcGVydGllc1twYXR0ZXJuXTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBpbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlZ2V4LnRlc3Qoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3ViSW5zdGFuY2VQb2ludGVyID0gYCR7aW5zdGFuY2VMb2NhdGlvbn0vJHtlbmNvZGVQb2ludGVyKGtleSl9YDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGUoaW5zdGFuY2Vba2V5XSwgc3ViU2NoZW1hLCBkcmFmdCwgbG9va3VwLCBzaG9ydENpcmN1aXQsIHJlY3Vyc2l2ZUFuY2hvciwgc3ViSW5zdGFuY2VQb2ludGVyLCBgJHtrZXl3b3JkTG9jYXRpb259LyR7ZW5jb2RlUG9pbnRlcihwYXR0ZXJuKX1gKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC52YWxpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZhbHVhdGVkW2tleV0gPSB0aGlzRXZhbHVhdGVkW2tleV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcCA9IHNob3J0Q2lyY3VpdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUxvY2F0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleXdvcmQ6IFwicGF0dGVyblByb3BlcnRpZXNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXl3b3JkTG9jYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGBQcm9wZXJ0eSBcIiR7a2V5fVwiIG1hdGNoZXMgcGF0dGVybiBcIiR7cGF0dGVybn1cIiBidXQgZG9lcyBub3QgbWF0Y2ggYXNzb2NpYXRlZCBzY2hlbWEuYCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIC4uLnJlc3VsdC5lcnJvcnMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghc3RvcCAmJiAkYWRkaXRpb25hbFByb3BlcnRpZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3Qga2V5d29yZExvY2F0aW9uID0gYCR7c2NoZW1hTG9jYXRpb259L2FkZGl0aW9uYWxQcm9wZXJ0aWVzYDtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXNFdmFsdWF0ZWRba2V5XSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgc3ViSW5zdGFuY2VQb2ludGVyID0gYCR7aW5zdGFuY2VMb2NhdGlvbn0vJHtlbmNvZGVQb2ludGVyKGtleSl9YDtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0ZShpbnN0YW5jZVtrZXldLCAkYWRkaXRpb25hbFByb3BlcnRpZXMsIGRyYWZ0LCBsb29rdXAsIHNob3J0Q2lyY3VpdCwgcmVjdXJzaXZlQW5jaG9yLCBzdWJJbnN0YW5jZVBvaW50ZXIsIGtleXdvcmRMb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC52YWxpZCkge1xuICAgICAgICAgICAgICAgICAgICBldmFsdWF0ZWRba2V5XSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzdG9wID0gc2hvcnRDaXJjdWl0O1xuICAgICAgICAgICAgICAgICAgICBlcnJvcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUxvY2F0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5d29yZDogXCJhZGRpdGlvbmFsUHJvcGVydGllc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5d29yZExvY2F0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGBQcm9wZXJ0eSBcIiR7a2V5fVwiIGRvZXMgbm90IG1hdGNoIGFkZGl0aW9uYWwgcHJvcGVydGllcyBzY2hlbWEuYCxcbiAgICAgICAgICAgICAgICAgICAgfSwgLi4ucmVzdWx0LmVycm9ycyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFzdG9wICYmICR1bmV2YWx1YXRlZFByb3BlcnRpZXMgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc3Qga2V5d29yZExvY2F0aW9uID0gYCR7c2NoZW1hTG9jYXRpb259L3VuZXZhbHVhdGVkUHJvcGVydGllc2A7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBpbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgIGlmICghZXZhbHVhdGVkW2tleV0pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3ViSW5zdGFuY2VQb2ludGVyID0gYCR7aW5zdGFuY2VMb2NhdGlvbn0vJHtlbmNvZGVQb2ludGVyKGtleSl9YDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGUoaW5zdGFuY2Vba2V5XSwgJHVuZXZhbHVhdGVkUHJvcGVydGllcywgZHJhZnQsIGxvb2t1cCwgc2hvcnRDaXJjdWl0LCByZWN1cnNpdmVBbmNob3IsIHN1Ykluc3RhbmNlUG9pbnRlciwga2V5d29yZExvY2F0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC52YWxpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZhbHVhdGVkW2tleV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlTG9jYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5d29yZDogXCJ1bmV2YWx1YXRlZFByb3BlcnRpZXNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXl3b3JkTG9jYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGBQcm9wZXJ0eSBcIiR7a2V5fVwiIGRvZXMgbm90IG1hdGNoIHVuZXZhbHVhdGVkIHByb3BlcnRpZXMgc2NoZW1hLmAsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAuLi5yZXN1bHQuZXJyb3JzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChpbnN0YW5jZVR5cGUgPT09IFwiYXJyYXlcIikge1xuICAgICAgICBpZiAoJG1heEl0ZW1zICE9PSB1bmRlZmluZWQgJiYgaW5zdGFuY2UubGVuZ3RoID4gJG1heEl0ZW1zKSB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgaW5zdGFuY2VMb2NhdGlvbixcbiAgICAgICAgICAgICAgICBrZXl3b3JkOiBcIm1heEl0ZW1zXCIsXG4gICAgICAgICAgICAgICAga2V5d29yZExvY2F0aW9uOiBgJHtzY2hlbWFMb2NhdGlvbn0vbWF4SXRlbXNgLFxuICAgICAgICAgICAgICAgIGVycm9yOiBgQXJyYXkgaGFzIHRvbyBtYW55IGl0ZW1zICgke2luc3RhbmNlLmxlbmd0aH0gPiAkeyRtYXhJdGVtc30pLmAsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJG1pbkl0ZW1zICE9PSB1bmRlZmluZWQgJiYgaW5zdGFuY2UubGVuZ3RoIDwgJG1pbkl0ZW1zKSB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgaW5zdGFuY2VMb2NhdGlvbixcbiAgICAgICAgICAgICAgICBrZXl3b3JkOiBcIm1pbkl0ZW1zXCIsXG4gICAgICAgICAgICAgICAga2V5d29yZExvY2F0aW9uOiBgJHtzY2hlbWFMb2NhdGlvbn0vbWluSXRlbXNgLFxuICAgICAgICAgICAgICAgIGVycm9yOiBgQXJyYXkgaGFzIHRvbyBmZXcgaXRlbXMgKCR7aW5zdGFuY2UubGVuZ3RofSA8ICR7JG1pbkl0ZW1zfSkuYCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxlbmd0aCA9IGluc3RhbmNlLmxlbmd0aDtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICBsZXQgc3RvcCA9IGZhbHNlO1xuICAgICAgICBpZiAoJHByZWZpeEl0ZW1zICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGtleXdvcmRMb2NhdGlvbiA9IGAke3NjaGVtYUxvY2F0aW9ufS9wcmVmaXhJdGVtc2A7XG4gICAgICAgICAgICBjb25zdCBsZW5ndGgyID0gTWF0aC5taW4oJHByZWZpeEl0ZW1zLmxlbmd0aCwgbGVuZ3RoKTtcbiAgICAgICAgICAgIGZvciAoOyBpIDwgbGVuZ3RoMjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGUoaW5zdGFuY2VbaV0sICRwcmVmaXhJdGVtc1tpXSwgZHJhZnQsIGxvb2t1cCwgc2hvcnRDaXJjdWl0LCByZWN1cnNpdmVBbmNob3IsIGAke2luc3RhbmNlTG9jYXRpb259LyR7aX1gLCBgJHtrZXl3b3JkTG9jYXRpb259LyR7aX1gKTtcbiAgICAgICAgICAgICAgICBldmFsdWF0ZWRbaV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmICghcmVzdWx0LnZhbGlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0b3AgPSBzaG9ydENpcmN1aXQ7XG4gICAgICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlTG9jYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXl3b3JkOiBcInByZWZpeEl0ZW1zXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXl3b3JkTG9jYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogYEl0ZW1zIGRpZCBub3QgbWF0Y2ggc2NoZW1hLmAsXG4gICAgICAgICAgICAgICAgICAgIH0sIC4uLnJlc3VsdC5lcnJvcnMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RvcClcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoJGl0ZW1zICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGtleXdvcmRMb2NhdGlvbiA9IGAke3NjaGVtYUxvY2F0aW9ufS9pdGVtc2A7XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSgkaXRlbXMpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGVuZ3RoMiA9IE1hdGgubWluKCRpdGVtcy5sZW5ndGgsIGxlbmd0aCk7XG4gICAgICAgICAgICAgICAgZm9yICg7IGkgPCBsZW5ndGgyOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGUoaW5zdGFuY2VbaV0sICRpdGVtc1tpXSwgZHJhZnQsIGxvb2t1cCwgc2hvcnRDaXJjdWl0LCByZWN1cnNpdmVBbmNob3IsIGAke2luc3RhbmNlTG9jYXRpb259LyR7aX1gLCBgJHtrZXl3b3JkTG9jYXRpb259LyR7aX1gKTtcbiAgICAgICAgICAgICAgICAgICAgZXZhbHVhdGVkW2ldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQudmFsaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3AgPSBzaG9ydENpcmN1aXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VMb2NhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXl3b3JkOiBcIml0ZW1zXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5d29yZExvY2F0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBgSXRlbXMgZGlkIG5vdCBtYXRjaCBzY2hlbWEuYCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIC4uLnJlc3VsdC5lcnJvcnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3ApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRlKGluc3RhbmNlW2ldLCAkaXRlbXMsIGRyYWZ0LCBsb29rdXAsIHNob3J0Q2lyY3VpdCwgcmVjdXJzaXZlQW5jaG9yLCBgJHtpbnN0YW5jZUxvY2F0aW9ufS8ke2l9YCwga2V5d29yZExvY2F0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgZXZhbHVhdGVkW2ldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQudmFsaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3AgPSBzaG9ydENpcmN1aXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VMb2NhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXl3b3JkOiBcIml0ZW1zXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5d29yZExvY2F0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBgSXRlbXMgZGlkIG5vdCBtYXRjaCBzY2hlbWEuYCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIC4uLnJlc3VsdC5lcnJvcnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0b3ApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXN0b3AgJiYgJGFkZGl0aW9uYWxJdGVtcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5d29yZExvY2F0aW9uID0gYCR7c2NoZW1hTG9jYXRpb259L2FkZGl0aW9uYWxJdGVtc2A7XG4gICAgICAgICAgICAgICAgZm9yICg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0ZShpbnN0YW5jZVtpXSwgJGFkZGl0aW9uYWxJdGVtcywgZHJhZnQsIGxvb2t1cCwgc2hvcnRDaXJjdWl0LCByZWN1cnNpdmVBbmNob3IsIGAke2luc3RhbmNlTG9jYXRpb259LyR7aX1gLCBrZXl3b3JkTG9jYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICBldmFsdWF0ZWRbaV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdC52YWxpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcCA9IHNob3J0Q2lyY3VpdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUxvY2F0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleXdvcmQ6IFwiYWRkaXRpb25hbEl0ZW1zXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5d29yZExvY2F0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBgSXRlbXMgZGlkIG5vdCBtYXRjaCBhZGRpdGlvbmFsIGl0ZW1zIHNjaGVtYS5gLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgLi4ucmVzdWx0LmVycm9ycyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCRjb250YWlucyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpZiAobGVuZ3RoID09PSAwICYmICRtaW5Db250YWlucyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUxvY2F0aW9uLFxuICAgICAgICAgICAgICAgICAgICBrZXl3b3JkOiBcImNvbnRhaW5zXCIsXG4gICAgICAgICAgICAgICAgICAgIGtleXdvcmRMb2NhdGlvbjogYCR7c2NoZW1hTG9jYXRpb259L2NvbnRhaW5zYCxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGBBcnJheSBpcyBlbXB0eS4gSXQgbXVzdCBjb250YWluIGF0IGxlYXN0IG9uZSBpdGVtIG1hdGNoaW5nIHRoZSBzY2hlbWEuYCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCRtaW5Db250YWlucyAhPT0gdW5kZWZpbmVkICYmIGxlbmd0aCA8ICRtaW5Db250YWlucykge1xuICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VMb2NhdGlvbixcbiAgICAgICAgICAgICAgICAgICAga2V5d29yZDogXCJtaW5Db250YWluc1wiLFxuICAgICAgICAgICAgICAgICAgICBrZXl3b3JkTG9jYXRpb246IGAke3NjaGVtYUxvY2F0aW9ufS9taW5Db250YWluc2AsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBgQXJyYXkgaGFzIGxlc3MgaXRlbXMgKCR7bGVuZ3RofSkgdGhhbiBtaW5Db250YWlucyAoJHskbWluQ29udGFpbnN9KS5gLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3Qga2V5d29yZExvY2F0aW9uID0gYCR7c2NoZW1hTG9jYXRpb259L2NvbnRhaW5zYDtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvcnNMZW5ndGggPSBlcnJvcnMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGxldCBjb250YWluZWQgPSAwO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGUoaW5zdGFuY2Vbal0sICRjb250YWlucywgZHJhZnQsIGxvb2t1cCwgc2hvcnRDaXJjdWl0LCByZWN1cnNpdmVBbmNob3IsIGAke2luc3RhbmNlTG9jYXRpb259LyR7an1gLCBrZXl3b3JkTG9jYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnZhbGlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmFsdWF0ZWRbal0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVkKys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnMucHVzaCguLi5yZXN1bHQuZXJyb3JzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY29udGFpbmVkID49ICgkbWluQ29udGFpbnMgfHwgMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JzLmxlbmd0aCA9IGVycm9yc0xlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCRtaW5Db250YWlucyA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgICAgICRtYXhDb250YWlucyA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lZCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBlcnJvcnMuc3BsaWNlKGVycm9yc0xlbmd0aCwgMCwge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VMb2NhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXdvcmQ6IFwiY29udGFpbnNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXdvcmRMb2NhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBgQXJyYXkgZG9lcyBub3QgY29udGFpbiBpdGVtIG1hdGNoaW5nIHNjaGVtYS5gLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoJG1pbkNvbnRhaW5zICE9PSB1bmRlZmluZWQgJiYgY29udGFpbmVkIDwgJG1pbkNvbnRhaW5zKSB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlTG9jYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXl3b3JkOiBcIm1pbkNvbnRhaW5zXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXl3b3JkTG9jYXRpb246IGAke3NjaGVtYUxvY2F0aW9ufS9taW5Db250YWluc2AsXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogYEFycmF5IG11c3QgY29udGFpbiBhdCBsZWFzdCAkeyRtaW5Db250YWluc30gaXRlbXMgbWF0Y2hpbmcgc2NoZW1hLiBPbmx5ICR7Y29udGFpbmVkfSBpdGVtcyB3ZXJlIGZvdW5kLmAsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICgkbWF4Q29udGFpbnMgIT09IHVuZGVmaW5lZCAmJiBjb250YWluZWQgPiAkbWF4Q29udGFpbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VMb2NhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXdvcmQ6IFwibWF4Q29udGFpbnNcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXdvcmRMb2NhdGlvbjogYCR7c2NoZW1hTG9jYXRpb259L21heENvbnRhaW5zYCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBgQXJyYXkgbWF5IGNvbnRhaW4gYXQgbW9zdCAkeyRtYXhDb250YWluc30gaXRlbXMgbWF0Y2hpbmcgc2NoZW1hLiAke2NvbnRhaW5lZH0gaXRlbXMgd2VyZSBmb3VuZC5gLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzdG9wICYmICR1bmV2YWx1YXRlZEl0ZW1zICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGtleXdvcmRMb2NhdGlvbiA9IGAke3NjaGVtYUxvY2F0aW9ufS91bmV2YWx1YXRlZEl0ZW1zYDtcbiAgICAgICAgICAgIGZvciAoaTsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV2YWx1YXRlZFtpXSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGUoaW5zdGFuY2VbaV0sICR1bmV2YWx1YXRlZEl0ZW1zLCBkcmFmdCwgbG9va3VwLCBzaG9ydENpcmN1aXQsIHJlY3Vyc2l2ZUFuY2hvciwgYCR7aW5zdGFuY2VMb2NhdGlvbn0vJHtpfWAsIGtleXdvcmRMb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgZXZhbHVhdGVkW2ldID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdC52YWxpZCkge1xuICAgICAgICAgICAgICAgICAgICBlcnJvcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUxvY2F0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5d29yZDogXCJ1bmV2YWx1YXRlZEl0ZW1zXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXl3b3JkTG9jYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogYEl0ZW1zIGRpZCBub3QgbWF0Y2ggdW5ldmFsdWF0ZWQgaXRlbXMgc2NoZW1hLmAsXG4gICAgICAgICAgICAgICAgICAgIH0sIC4uLnJlc3VsdC5lcnJvcnMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoJHVuaXF1ZUl0ZW1zKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYSA9IGluc3RhbmNlW2pdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFvID0gdHlwZW9mIGEgPT09IFwib2JqZWN0XCIgJiYgYSAhPT0gbnVsbDtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IGxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChqID09PSBrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBiID0gaW5zdGFuY2Vba107XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJvID0gdHlwZW9mIGIgPT09IFwib2JqZWN0XCIgJiYgYiAhPT0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGEgPT09IGIgfHwgKGFvICYmIGJvICYmIGRlZXBDb21wYXJlU3RyaWN0KGEsIGIpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlTG9jYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5d29yZDogXCJ1bmlxdWVJdGVtc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleXdvcmRMb2NhdGlvbjogYCR7c2NoZW1hTG9jYXRpb259L3VuaXF1ZUl0ZW1zYCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogYER1cGxpY2F0ZSBpdGVtcyBhdCBpbmRleGVzICR7an0gYW5kICR7a30uYCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaiA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSO1xuICAgICAgICAgICAgICAgICAgICAgICAgayA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKGluc3RhbmNlVHlwZSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICBpZiAoZHJhZnQgPT09IFwiNFwiKSB7XG4gICAgICAgICAgICBpZiAoJG1pbmltdW0gIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgICgoJGV4Y2x1c2l2ZU1pbmltdW0gPT09IHRydWUgJiYgaW5zdGFuY2UgPD0gJG1pbmltdW0pIHx8XG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlIDwgJG1pbmltdW0pKSB7XG4gICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUxvY2F0aW9uLFxuICAgICAgICAgICAgICAgICAgICBrZXl3b3JkOiBcIm1pbmltdW1cIixcbiAgICAgICAgICAgICAgICAgICAga2V5d29yZExvY2F0aW9uOiBgJHtzY2hlbWFMb2NhdGlvbn0vbWluaW11bWAsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBgJHtpbnN0YW5jZX0gaXMgbGVzcyB0aGFuICR7JGV4Y2x1c2l2ZU1pbmltdW0gPyBcIm9yIGVxdWFsIHRvIFwiIDogXCJcIn0gJHskbWluaW11bX0uYCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgkbWF4aW11bSAhPT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgKCgkZXhjbHVzaXZlTWF4aW11bSA9PT0gdHJ1ZSAmJiBpbnN0YW5jZSA+PSAkbWF4aW11bSkgfHxcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2UgPiAkbWF4aW11bSkpIHtcbiAgICAgICAgICAgICAgICBlcnJvcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlTG9jYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIGtleXdvcmQ6IFwibWF4aW11bVwiLFxuICAgICAgICAgICAgICAgICAgICBrZXl3b3JkTG9jYXRpb246IGAke3NjaGVtYUxvY2F0aW9ufS9tYXhpbXVtYCxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGAke2luc3RhbmNlfSBpcyBncmVhdGVyIHRoYW4gJHskZXhjbHVzaXZlTWF4aW11bSA/IFwib3IgZXF1YWwgdG8gXCIgOiBcIlwifSAkeyRtYXhpbXVtfS5gLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKCRtaW5pbXVtICE9PSB1bmRlZmluZWQgJiYgaW5zdGFuY2UgPCAkbWluaW11bSkge1xuICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VMb2NhdGlvbixcbiAgICAgICAgICAgICAgICAgICAga2V5d29yZDogXCJtaW5pbXVtXCIsXG4gICAgICAgICAgICAgICAgICAgIGtleXdvcmRMb2NhdGlvbjogYCR7c2NoZW1hTG9jYXRpb259L21pbmltdW1gLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogYCR7aW5zdGFuY2V9IGlzIGxlc3MgdGhhbiAkeyRtaW5pbXVtfS5gLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCRtYXhpbXVtICE9PSB1bmRlZmluZWQgJiYgaW5zdGFuY2UgPiAkbWF4aW11bSkge1xuICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VMb2NhdGlvbixcbiAgICAgICAgICAgICAgICAgICAga2V5d29yZDogXCJtYXhpbXVtXCIsXG4gICAgICAgICAgICAgICAgICAgIGtleXdvcmRMb2NhdGlvbjogYCR7c2NoZW1hTG9jYXRpb259L21heGltdW1gLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogYCR7aW5zdGFuY2V9IGlzIGdyZWF0ZXIgdGhhbiAkeyRtYXhpbXVtfS5gLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCRleGNsdXNpdmVNaW5pbXVtICE9PSB1bmRlZmluZWQgJiYgaW5zdGFuY2UgPD0gJGV4Y2x1c2l2ZU1pbmltdW0pIHtcbiAgICAgICAgICAgICAgICBlcnJvcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlTG9jYXRpb24sXG4gICAgICAgICAgICAgICAgICAgIGtleXdvcmQ6IFwiZXhjbHVzaXZlTWluaW11bVwiLFxuICAgICAgICAgICAgICAgICAgICBrZXl3b3JkTG9jYXRpb246IGAke3NjaGVtYUxvY2F0aW9ufS9leGNsdXNpdmVNaW5pbXVtYCxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGAke2luc3RhbmNlfSBpcyBsZXNzIHRoYW4gJHskZXhjbHVzaXZlTWluaW11bX0uYCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgkZXhjbHVzaXZlTWF4aW11bSAhPT0gdW5kZWZpbmVkICYmIGluc3RhbmNlID49ICRleGNsdXNpdmVNYXhpbXVtKSB7XG4gICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUxvY2F0aW9uLFxuICAgICAgICAgICAgICAgICAgICBrZXl3b3JkOiBcImV4Y2x1c2l2ZU1heGltdW1cIixcbiAgICAgICAgICAgICAgICAgICAga2V5d29yZExvY2F0aW9uOiBgJHtzY2hlbWFMb2NhdGlvbn0vZXhjbHVzaXZlTWF4aW11bWAsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBgJHtpbnN0YW5jZX0gaXMgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvICR7JGV4Y2x1c2l2ZU1heGltdW19LmAsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCRtdWx0aXBsZU9mICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlbWFpbmRlciA9IGluc3RhbmNlICUgJG11bHRpcGxlT2Y7XG4gICAgICAgICAgICBpZiAoTWF0aC5hYnMoMCAtIHJlbWFpbmRlcikgPj0gMS4xOTIwOTI5ZS03ICYmXG4gICAgICAgICAgICAgICAgTWF0aC5hYnMoJG11bHRpcGxlT2YgLSByZW1haW5kZXIpID49IDEuMTkyMDkyOWUtNykge1xuICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VMb2NhdGlvbixcbiAgICAgICAgICAgICAgICAgICAga2V5d29yZDogXCJtdWx0aXBsZU9mXCIsXG4gICAgICAgICAgICAgICAgICAgIGtleXdvcmRMb2NhdGlvbjogYCR7c2NoZW1hTG9jYXRpb259L211bHRpcGxlT2ZgLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogYCR7aW5zdGFuY2V9IGlzIG5vdCBhIG11bHRpcGxlIG9mICR7JG11bHRpcGxlT2Z9LmAsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoaW5zdGFuY2VUeXBlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIGNvbnN0IGxlbmd0aCA9ICRtaW5MZW5ndGggPT09IHVuZGVmaW5lZCAmJiAkbWF4TGVuZ3RoID09PSB1bmRlZmluZWRcbiAgICAgICAgICAgID8gMFxuICAgICAgICAgICAgOiB1Y3MybGVuZ3RoKGluc3RhbmNlKTtcbiAgICAgICAgaWYgKCRtaW5MZW5ndGggIT09IHVuZGVmaW5lZCAmJiBsZW5ndGggPCAkbWluTGVuZ3RoKSB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgaW5zdGFuY2VMb2NhdGlvbixcbiAgICAgICAgICAgICAgICBrZXl3b3JkOiBcIm1pbkxlbmd0aFwiLFxuICAgICAgICAgICAgICAgIGtleXdvcmRMb2NhdGlvbjogYCR7c2NoZW1hTG9jYXRpb259L21pbkxlbmd0aGAsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGBTdHJpbmcgaXMgdG9vIHNob3J0ICgke2xlbmd0aH0gPCAkeyRtaW5MZW5ndGh9KS5gLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCRtYXhMZW5ndGggIT09IHVuZGVmaW5lZCAmJiBsZW5ndGggPiAkbWF4TGVuZ3RoKSB7XG4gICAgICAgICAgICBlcnJvcnMucHVzaCh7XG4gICAgICAgICAgICAgICAgaW5zdGFuY2VMb2NhdGlvbixcbiAgICAgICAgICAgICAgICBrZXl3b3JkOiBcIm1heExlbmd0aFwiLFxuICAgICAgICAgICAgICAgIGtleXdvcmRMb2NhdGlvbjogYCR7c2NoZW1hTG9jYXRpb259L21heExlbmd0aGAsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGBTdHJpbmcgaXMgdG9vIGxvbmcgKCR7bGVuZ3RofSA+ICR7JG1heExlbmd0aH0pLmAsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJHBhdHRlcm4gIT09IHVuZGVmaW5lZCAmJiAhbmV3IFJlZ0V4cCgkcGF0dGVybikudGVzdChpbnN0YW5jZSkpIHtcbiAgICAgICAgICAgIGVycm9ycy5wdXNoKHtcbiAgICAgICAgICAgICAgICBpbnN0YW5jZUxvY2F0aW9uLFxuICAgICAgICAgICAgICAgIGtleXdvcmQ6IFwicGF0dGVyblwiLFxuICAgICAgICAgICAgICAgIGtleXdvcmRMb2NhdGlvbjogYCR7c2NoZW1hTG9jYXRpb259L3BhdHRlcm5gLFxuICAgICAgICAgICAgICAgIGVycm9yOiBgU3RyaW5nIGRvZXMgbm90IG1hdGNoIHBhdHRlcm4uYCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmICgkZm9ybWF0ICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgIGZhc3RGb3JtYXRbJGZvcm1hdF0gJiZcbiAgICAgICAgICAgICFmYXN0Rm9ybWF0WyRmb3JtYXRdKGluc3RhbmNlKSkge1xuICAgICAgICAgICAgZXJyb3JzLnB1c2goe1xuICAgICAgICAgICAgICAgIGluc3RhbmNlTG9jYXRpb24sXG4gICAgICAgICAgICAgICAga2V5d29yZDogXCJmb3JtYXRcIixcbiAgICAgICAgICAgICAgICBrZXl3b3JkTG9jYXRpb246IGAke3NjaGVtYUxvY2F0aW9ufS9mb3JtYXRgLFxuICAgICAgICAgICAgICAgIGVycm9yOiBgU3RyaW5nIGRvZXMgbm90IG1hdGNoIGZvcm1hdCBcIiR7JGZvcm1hdH1cIi5gLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHsgdmFsaWQ6IGVycm9ycy5sZW5ndGggPT09IDAsIGVycm9ycyB9O1xufVxuIl0sIm5hbWVzIjpbImRlZXBDb21wYXJlU3RyaWN0IiwiZGVyZWZlcmVuY2UiLCJmYXN0Rm9ybWF0IiwiZW5jb2RlUG9pbnRlciIsInVjczJsZW5ndGgiLCJ2YWxpZGF0ZSIsImluc3RhbmNlIiwic2NoZW1hIiwiZHJhZnQiLCJsb29rdXAiLCJzaG9ydENpcmN1aXQiLCJyZWN1cnNpdmVBbmNob3IiLCJpbnN0YW5jZUxvY2F0aW9uIiwic2NoZW1hTG9jYXRpb24iLCJldmFsdWF0ZWQiLCJPYmplY3QiLCJjcmVhdGUiLCJ2YWxpZCIsImVycm9ycyIsImtleXdvcmQiLCJrZXl3b3JkTG9jYXRpb24iLCJlcnJvciIsInJhd0luc3RhbmNlVHlwZSIsImluc3RhbmNlVHlwZSIsIkFycmF5IiwiaXNBcnJheSIsIkVycm9yIiwiJHJlZiIsIiRyZWN1cnNpdmVSZWYiLCIkcmVjdXJzaXZlQW5jaG9yIiwidHlwZSIsIiR0eXBlIiwiY29uc3QiLCIkY29uc3QiLCJlbnVtIiwiJGVudW0iLCJyZXF1aXJlZCIsIiRyZXF1aXJlZCIsIm5vdCIsIiRub3QiLCJhbnlPZiIsIiRhbnlPZiIsImFsbE9mIiwiJGFsbE9mIiwib25lT2YiLCIkb25lT2YiLCJpZiIsIiRpZiIsInRoZW4iLCIkdGhlbiIsImVsc2UiLCIkZWxzZSIsImZvcm1hdCIsIiRmb3JtYXQiLCJwcm9wZXJ0aWVzIiwiJHByb3BlcnRpZXMiLCJwYXR0ZXJuUHJvcGVydGllcyIsIiRwYXR0ZXJuUHJvcGVydGllcyIsImFkZGl0aW9uYWxQcm9wZXJ0aWVzIiwiJGFkZGl0aW9uYWxQcm9wZXJ0aWVzIiwidW5ldmFsdWF0ZWRQcm9wZXJ0aWVzIiwiJHVuZXZhbHVhdGVkUHJvcGVydGllcyIsIm1pblByb3BlcnRpZXMiLCIkbWluUHJvcGVydGllcyIsIm1heFByb3BlcnRpZXMiLCIkbWF4UHJvcGVydGllcyIsInByb3BlcnR5TmFtZXMiLCIkcHJvcGVydHlOYW1lcyIsImRlcGVuZGVudFJlcXVpcmVkIiwiJGRlcGVuZGVudFJlcXVpcmVkIiwiZGVwZW5kZW50U2NoZW1hcyIsIiRkZXBlbmRlbnRTY2hlbWFzIiwiZGVwZW5kZW5jaWVzIiwiJGRlcGVuZGVuY2llcyIsInByZWZpeEl0ZW1zIiwiJHByZWZpeEl0ZW1zIiwiaXRlbXMiLCIkaXRlbXMiLCJhZGRpdGlvbmFsSXRlbXMiLCIkYWRkaXRpb25hbEl0ZW1zIiwidW5ldmFsdWF0ZWRJdGVtcyIsIiR1bmV2YWx1YXRlZEl0ZW1zIiwiY29udGFpbnMiLCIkY29udGFpbnMiLCJtaW5Db250YWlucyIsIiRtaW5Db250YWlucyIsIm1heENvbnRhaW5zIiwiJG1heENvbnRhaW5zIiwibWluSXRlbXMiLCIkbWluSXRlbXMiLCJtYXhJdGVtcyIsIiRtYXhJdGVtcyIsInVuaXF1ZUl0ZW1zIiwiJHVuaXF1ZUl0ZW1zIiwibWluaW11bSIsIiRtaW5pbXVtIiwibWF4aW11bSIsIiRtYXhpbXVtIiwiZXhjbHVzaXZlTWluaW11bSIsIiRleGNsdXNpdmVNaW5pbXVtIiwiZXhjbHVzaXZlTWF4aW11bSIsIiRleGNsdXNpdmVNYXhpbXVtIiwibXVsdGlwbGVPZiIsIiRtdWx0aXBsZU9mIiwibWluTGVuZ3RoIiwiJG1pbkxlbmd0aCIsIm1heExlbmd0aCIsIiRtYXhMZW5ndGgiLCJwYXR0ZXJuIiwiJHBhdHRlcm4iLCJfX2Fic29sdXRlX3JlZl9fIiwiX19hYnNvbHV0ZV9yZWN1cnNpdmVfcmVmX18iLCJyZWZTY2hlbWEiLCJyZXN1bHQiLCJwdXNoIiwidW5kZWZpbmVkIiwidXJpIiwibWVzc2FnZSIsImtleXMiLCJqb2luIiwibGVuZ3RoIiwiaSIsIkpTT04iLCJzdHJpbmdpZnkiLCJzb21lIiwidmFsdWUiLCJzdWJFdmFsdWF0ZWRzIiwiZXJyb3JzTGVuZ3RoIiwiYW55VmFsaWQiLCJzdWJTY2hlbWEiLCJzdWJFdmFsdWF0ZWQiLCJzcGxpY2UiLCJhbGxWYWxpZCIsIm1hdGNoZXMiLCJmaWx0ZXIiLCJhc3NpZ24iLCJjb25kaXRpb25SZXN1bHQiLCJ0aGVuUmVzdWx0IiwiZWxzZVJlc3VsdCIsImtleSIsInN1Ykluc3RhbmNlUG9pbnRlciIsImRlcGVuZGFudEtleSIsInByb3BzT3JTY2hlbWEiLCJ0aGlzRXZhbHVhdGVkIiwic3RvcCIsInJlZ2V4IiwiUmVnRXhwIiwidGVzdCIsImxlbmd0aDIiLCJNYXRoIiwibWluIiwiY29udGFpbmVkIiwiaiIsImEiLCJhbyIsImsiLCJiIiwiYm8iLCJOdW1iZXIiLCJNQVhfU0FGRV9JTlRFR0VSIiwicmVtYWluZGVyIiwiYWJzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/validate.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/validator.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/validator.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Validator: () => (/* binding */ Validator)\n/* harmony export */ });\n/* harmony import */ var _dereference_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dereference.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/dereference.js\");\n/* harmony import */ var _validate_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./validate.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/validate.js\");\n\n\nclass Validator {\n    constructor(schema, draft = \"2019-09\", shortCircuit = true){\n        Object.defineProperty(this, \"schema\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: schema\n        });\n        Object.defineProperty(this, \"draft\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: draft\n        });\n        Object.defineProperty(this, \"shortCircuit\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: shortCircuit\n        });\n        Object.defineProperty(this, \"lookup\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.lookup = (0,_dereference_js__WEBPACK_IMPORTED_MODULE_0__.dereference)(schema);\n    }\n    validate(instance) {\n        return (0,_validate_js__WEBPACK_IMPORTED_MODULE_1__.validate)(instance, this.schema, this.draft, this.lookup, this.shortCircuit);\n    }\n    addSchema(schema, id) {\n        if (id) {\n            schema = {\n                ...schema,\n                $id: id\n            };\n        }\n        (0,_dereference_js__WEBPACK_IMPORTED_MODULE_0__.dereference)(schema, this.lookup);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvQGNmd29ya2VyL2pzb24tc2NoZW1hL3NyYy92YWxpZGF0b3IuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQStDO0FBQ047QUFDbEMsTUFBTUU7SUFDVEMsWUFBWUMsTUFBTSxFQUFFQyxRQUFRLFNBQVMsRUFBRUMsZUFBZSxJQUFJLENBQUU7UUFDeERDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsVUFBVTtZQUNsQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBT1I7UUFDWDtRQUNBRyxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFNBQVM7WUFDakNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU9QO1FBQ1g7UUFDQUUsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU9OO1FBQ1g7UUFDQUMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxVQUFVO1lBQ2xDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQSxJQUFJLENBQUNDLE1BQU0sR0FBR2IsNERBQVdBLENBQUNJO0lBQzlCO0lBQ0FILFNBQVNhLFFBQVEsRUFBRTtRQUNmLE9BQU9iLHNEQUFRQSxDQUFDYSxVQUFVLElBQUksQ0FBQ1YsTUFBTSxFQUFFLElBQUksQ0FBQ0MsS0FBSyxFQUFFLElBQUksQ0FBQ1EsTUFBTSxFQUFFLElBQUksQ0FBQ1AsWUFBWTtJQUNyRjtJQUNBUyxVQUFVWCxNQUFNLEVBQUVZLEVBQUUsRUFBRTtRQUNsQixJQUFJQSxJQUFJO1lBQ0paLFNBQVM7Z0JBQUUsR0FBR0EsTUFBTTtnQkFBRWEsS0FBS0Q7WUFBRztRQUNsQztRQUNBaEIsNERBQVdBLENBQUNJLFFBQVEsSUFBSSxDQUFDUyxNQUFNO0lBQ25DO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1mb3JtLWJ1aWxkZXItdHV0b3JpYWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvQGNmd29ya2VyL2pzb24tc2NoZW1hL3NyYy92YWxpZGF0b3IuanM/MzRlNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBkZXJlZmVyZW5jZSB9IGZyb20gXCIuL2RlcmVmZXJlbmNlLmpzXCI7XG5pbXBvcnQgeyB2YWxpZGF0ZSB9IGZyb20gXCIuL3ZhbGlkYXRlLmpzXCI7XG5leHBvcnQgY2xhc3MgVmFsaWRhdG9yIHtcbiAgICBjb25zdHJ1Y3RvcihzY2hlbWEsIGRyYWZ0ID0gXCIyMDE5LTA5XCIsIHNob3J0Q2lyY3VpdCA9IHRydWUpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic2NoZW1hXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBzY2hlbWFcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImRyYWZ0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBkcmFmdFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic2hvcnRDaXJjdWl0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBzaG9ydENpcmN1aXRcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxvb2t1cFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmxvb2t1cCA9IGRlcmVmZXJlbmNlKHNjaGVtYSk7XG4gICAgfVxuICAgIHZhbGlkYXRlKGluc3RhbmNlKSB7XG4gICAgICAgIHJldHVybiB2YWxpZGF0ZShpbnN0YW5jZSwgdGhpcy5zY2hlbWEsIHRoaXMuZHJhZnQsIHRoaXMubG9va3VwLCB0aGlzLnNob3J0Q2lyY3VpdCk7XG4gICAgfVxuICAgIGFkZFNjaGVtYShzY2hlbWEsIGlkKSB7XG4gICAgICAgIGlmIChpZCkge1xuICAgICAgICAgICAgc2NoZW1hID0geyAuLi5zY2hlbWEsICRpZDogaWQgfTtcbiAgICAgICAgfVxuICAgICAgICBkZXJlZmVyZW5jZShzY2hlbWEsIHRoaXMubG9va3VwKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiZGVyZWZlcmVuY2UiLCJ2YWxpZGF0ZSIsIlZhbGlkYXRvciIsImNvbnN0cnVjdG9yIiwic2NoZW1hIiwiZHJhZnQiLCJzaG9ydENpcmN1aXQiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwibG9va3VwIiwiaW5zdGFuY2UiLCJhZGRTY2hlbWEiLCJpZCIsIiRpZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/@cfworker/json-schema/src/validator.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/async_caller.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/async_caller.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncCaller: () => (/* binding */ AsyncCaller)\n/* harmony export */ });\n/* harmony import */ var p_retry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! p-retry */ \"(rsc)/./node_modules/p-retry/index.js\");\n/* harmony import */ var p_queue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! p-queue */ \"(rsc)/./node_modules/p-queue/dist/index.js\");\n\n\nconst STATUS_NO_RETRY = [\n    400,\n    401,\n    402,\n    403,\n    404,\n    405,\n    406,\n    407,\n    409\n];\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst defaultFailedAttemptHandler = (error)=>{\n    if (error.message.startsWith(\"Cancel\") || error.message.startsWith(\"AbortError\") || error.name === \"AbortError\") {\n        throw error;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (error?.code === \"ECONNABORTED\") {\n        throw error;\n    }\n    const status = // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    error?.response?.status ?? error?.status;\n    if (status && STATUS_NO_RETRY.includes(+status)) {\n        throw error;\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    if (error?.error?.code === \"insufficient_quota\") {\n        const err = new Error(error?.message);\n        err.name = \"InsufficientQuotaError\";\n        throw err;\n    }\n};\n/**\n * A class that can be used to make async calls with concurrency and retry logic.\n *\n * This is useful for making calls to any kind of \"expensive\" external resource,\n * be it because it's rate-limited, subject to network issues, etc.\n *\n * Concurrent calls are limited by the `maxConcurrency` parameter, which defaults\n * to `Infinity`. This means that by default, all calls will be made in parallel.\n *\n * Retries are limited by the `maxRetries` parameter, which defaults to 6. This\n * means that by default, each call will be retried up to 6 times, with an\n * exponential backoff between each attempt.\n */ class AsyncCaller {\n    constructor(params){\n        Object.defineProperty(this, \"maxConcurrency\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"maxRetries\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"onFailedAttempt\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"queue\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.maxConcurrency = params.maxConcurrency ?? Infinity;\n        this.maxRetries = params.maxRetries ?? 6;\n        this.onFailedAttempt = params.onFailedAttempt ?? defaultFailedAttemptHandler;\n        const PQueue =  true ? p_queue__WEBPACK_IMPORTED_MODULE_1__[\"default\"] : p_queue__WEBPACK_IMPORTED_MODULE_1__;\n        this.queue = new PQueue({\n            concurrency: this.maxConcurrency\n        });\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    call(callable, ...args) {\n        return this.queue.add(()=>p_retry__WEBPACK_IMPORTED_MODULE_0__(()=>callable(...args).catch((error)=>{\n                    // eslint-disable-next-line no-instanceof/no-instanceof\n                    if (error instanceof Error) {\n                        throw error;\n                    } else {\n                        throw new Error(error);\n                    }\n                }), {\n                onFailedAttempt: this.onFailedAttempt,\n                retries: this.maxRetries,\n                randomize: true\n            }), {\n            throwOnTimeout: true\n        });\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    callWithOptions(options, callable, ...args) {\n        // Note this doesn't cancel the underlying request,\n        // when available prefer to use the signal option of the underlying call\n        if (options.signal) {\n            return Promise.race([\n                this.call(callable, ...args),\n                new Promise((_, reject)=>{\n                    options.signal?.addEventListener(\"abort\", ()=>{\n                        reject(new Error(\"AbortError\"));\n                    });\n                })\n            ]);\n        }\n        return this.call(callable, ...args);\n    }\n    fetch(...args) {\n        return this.call(()=>fetch(...args).then((res)=>res.ok ? res : Promise.reject(res)));\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvYXN5bmNfY2FsbGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE2QjtBQUNHO0FBQ2hDLE1BQU1FLGtCQUFrQjtJQUNwQjtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7Q0FDSDtBQUNELDhEQUE4RDtBQUM5RCxNQUFNQyw4QkFBOEIsQ0FBQ0M7SUFDakMsSUFBSUEsTUFBTUMsT0FBTyxDQUFDQyxVQUFVLENBQUMsYUFDekJGLE1BQU1DLE9BQU8sQ0FBQ0MsVUFBVSxDQUFDLGlCQUN6QkYsTUFBTUcsSUFBSSxLQUFLLGNBQWM7UUFDN0IsTUFBTUg7SUFDVjtJQUNBLDhEQUE4RDtJQUM5RCxJQUFJQSxPQUFPSSxTQUFTLGdCQUFnQjtRQUNoQyxNQUFNSjtJQUNWO0lBQ0EsTUFBTUssU0FDTiw4REFBOEQ7SUFDOURMLE9BQU9NLFVBQVVELFVBQVVMLE9BQU9LO0lBQ2xDLElBQUlBLFVBQVVQLGdCQUFnQlMsUUFBUSxDQUFDLENBQUNGLFNBQVM7UUFDN0MsTUFBTUw7SUFDVjtJQUNBLDhEQUE4RDtJQUM5RCxJQUFJQSxPQUFPQSxPQUFPSSxTQUFTLHNCQUFzQjtRQUM3QyxNQUFNSSxNQUFNLElBQUlDLE1BQU1ULE9BQU9DO1FBQzdCTyxJQUFJTCxJQUFJLEdBQUc7UUFDWCxNQUFNSztJQUNWO0FBQ0o7QUFDQTs7Ozs7Ozs7Ozs7O0NBWUMsR0FDTSxNQUFNRTtJQUNUQyxZQUFZQyxNQUFNLENBQUU7UUFDaEJDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsa0JBQWtCO1lBQzFDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxjQUFjO1lBQ3RDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxtQkFBbUI7WUFDM0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFNBQVM7WUFDakNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ0MsY0FBYyxHQUFHUCxPQUFPTyxjQUFjLElBQUlDO1FBQy9DLElBQUksQ0FBQ0MsVUFBVSxHQUFHVCxPQUFPUyxVQUFVLElBQUk7UUFDdkMsSUFBSSxDQUFDQyxlQUFlLEdBQ2hCVixPQUFPVSxlQUFlLElBQUl2QjtRQUM5QixNQUFNd0IsU0FBUyxLQUFzQjFCLEdBQUdBLCtDQUFpQixHQUFHQSxvQ0FBU0E7UUFDckUsSUFBSSxDQUFDNEIsS0FBSyxHQUFHLElBQUlGLE9BQU87WUFBRUcsYUFBYSxJQUFJLENBQUNQLGNBQWM7UUFBQztJQUMvRDtJQUNBLDhEQUE4RDtJQUM5RFEsS0FBS0MsUUFBUSxFQUFFLEdBQUdDLElBQUksRUFBRTtRQUNwQixPQUFPLElBQUksQ0FBQ0osS0FBSyxDQUFDSyxHQUFHLENBQUMsSUFBTWxDLG9DQUFNQSxDQUFDLElBQU1nQyxZQUFZQyxNQUFNRSxLQUFLLENBQUMsQ0FBQy9CO29CQUM5RCx1REFBdUQ7b0JBQ3ZELElBQUlBLGlCQUFpQlMsT0FBTzt3QkFDeEIsTUFBTVQ7b0JBQ1YsT0FDSzt3QkFDRCxNQUFNLElBQUlTLE1BQU1UO29CQUNwQjtnQkFDSixJQUFJO2dCQUNBc0IsaUJBQWlCLElBQUksQ0FBQ0EsZUFBZTtnQkFDckNVLFNBQVMsSUFBSSxDQUFDWCxVQUFVO2dCQUN4QlksV0FBVztZQUdmLElBQUk7WUFBRUMsZ0JBQWdCO1FBQUs7SUFDL0I7SUFDQSw4REFBOEQ7SUFDOURDLGdCQUFnQkMsT0FBTyxFQUFFUixRQUFRLEVBQUUsR0FBR0MsSUFBSSxFQUFFO1FBQ3hDLG1EQUFtRDtRQUNuRCx3RUFBd0U7UUFDeEUsSUFBSU8sUUFBUUMsTUFBTSxFQUFFO1lBQ2hCLE9BQU9DLFFBQVFDLElBQUksQ0FBQztnQkFDaEIsSUFBSSxDQUFDWixJQUFJLENBQUNDLGFBQWFDO2dCQUN2QixJQUFJUyxRQUFRLENBQUNFLEdBQUdDO29CQUNaTCxRQUFRQyxNQUFNLEVBQUVLLGlCQUFpQixTQUFTO3dCQUN0Q0QsT0FBTyxJQUFJaEMsTUFBTTtvQkFDckI7Z0JBQ0o7YUFDSDtRQUNMO1FBQ0EsT0FBTyxJQUFJLENBQUNrQixJQUFJLENBQUNDLGFBQWFDO0lBQ2xDO0lBQ0FjLE1BQU0sR0FBR2QsSUFBSSxFQUFFO1FBQ1gsT0FBTyxJQUFJLENBQUNGLElBQUksQ0FBQyxJQUFNZ0IsU0FBU2QsTUFBTWUsSUFBSSxDQUFDLENBQUNDLE1BQVNBLElBQUlDLEVBQUUsR0FBR0QsTUFBTVAsUUFBUUcsTUFBTSxDQUFDSTtJQUN2RjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2FzeW5jX2NhbGxlci5qcz8xNGM0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwUmV0cnkgZnJvbSBcInAtcmV0cnlcIjtcbmltcG9ydCBQUXVldWVNb2QgZnJvbSBcInAtcXVldWVcIjtcbmNvbnN0IFNUQVRVU19OT19SRVRSWSA9IFtcbiAgICA0MDAsXG4gICAgNDAxLFxuICAgIDQwMixcbiAgICA0MDMsXG4gICAgNDA0LFxuICAgIDQwNSxcbiAgICA0MDYsXG4gICAgNDA3LFxuICAgIDQwOSwgLy8gQ29uZmxpY3Rcbl07XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuY29uc3QgZGVmYXVsdEZhaWxlZEF0dGVtcHRIYW5kbGVyID0gKGVycm9yKSA9PiB7XG4gICAgaWYgKGVycm9yLm1lc3NhZ2Uuc3RhcnRzV2l0aChcIkNhbmNlbFwiKSB8fFxuICAgICAgICBlcnJvci5tZXNzYWdlLnN0YXJ0c1dpdGgoXCJBYm9ydEVycm9yXCIpIHx8XG4gICAgICAgIGVycm9yLm5hbWUgPT09IFwiQWJvcnRFcnJvclwiKSB7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGlmIChlcnJvcj8uY29kZSA9PT0gXCJFQ09OTkFCT1JURURcIikge1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gICAgY29uc3Qgc3RhdHVzID0gXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBlcnJvcj8ucmVzcG9uc2U/LnN0YXR1cyA/PyBlcnJvcj8uc3RhdHVzO1xuICAgIGlmIChzdGF0dXMgJiYgU1RBVFVTX05PX1JFVFJZLmluY2x1ZGVzKCtzdGF0dXMpKSB7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGlmIChlcnJvcj8uZXJyb3I/LmNvZGUgPT09IFwiaW5zdWZmaWNpZW50X3F1b3RhXCIpIHtcbiAgICAgICAgY29uc3QgZXJyID0gbmV3IEVycm9yKGVycm9yPy5tZXNzYWdlKTtcbiAgICAgICAgZXJyLm5hbWUgPSBcIkluc3VmZmljaWVudFF1b3RhRXJyb3JcIjtcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgIH1cbn07XG4vKipcbiAqIEEgY2xhc3MgdGhhdCBjYW4gYmUgdXNlZCB0byBtYWtlIGFzeW5jIGNhbGxzIHdpdGggY29uY3VycmVuY3kgYW5kIHJldHJ5IGxvZ2ljLlxuICpcbiAqIFRoaXMgaXMgdXNlZnVsIGZvciBtYWtpbmcgY2FsbHMgdG8gYW55IGtpbmQgb2YgXCJleHBlbnNpdmVcIiBleHRlcm5hbCByZXNvdXJjZSxcbiAqIGJlIGl0IGJlY2F1c2UgaXQncyByYXRlLWxpbWl0ZWQsIHN1YmplY3QgdG8gbmV0d29yayBpc3N1ZXMsIGV0Yy5cbiAqXG4gKiBDb25jdXJyZW50IGNhbGxzIGFyZSBsaW1pdGVkIGJ5IHRoZSBgbWF4Q29uY3VycmVuY3lgIHBhcmFtZXRlciwgd2hpY2ggZGVmYXVsdHNcbiAqIHRvIGBJbmZpbml0eWAuIFRoaXMgbWVhbnMgdGhhdCBieSBkZWZhdWx0LCBhbGwgY2FsbHMgd2lsbCBiZSBtYWRlIGluIHBhcmFsbGVsLlxuICpcbiAqIFJldHJpZXMgYXJlIGxpbWl0ZWQgYnkgdGhlIGBtYXhSZXRyaWVzYCBwYXJhbWV0ZXIsIHdoaWNoIGRlZmF1bHRzIHRvIDYuIFRoaXNcbiAqIG1lYW5zIHRoYXQgYnkgZGVmYXVsdCwgZWFjaCBjYWxsIHdpbGwgYmUgcmV0cmllZCB1cCB0byA2IHRpbWVzLCB3aXRoIGFuXG4gKiBleHBvbmVudGlhbCBiYWNrb2ZmIGJldHdlZW4gZWFjaCBhdHRlbXB0LlxuICovXG5leHBvcnQgY2xhc3MgQXN5bmNDYWxsZXIge1xuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtYXhDb25jdXJyZW5jeVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtYXhSZXRyaWVzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9uRmFpbGVkQXR0ZW1wdFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJxdWV1ZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm1heENvbmN1cnJlbmN5ID0gcGFyYW1zLm1heENvbmN1cnJlbmN5ID8/IEluZmluaXR5O1xuICAgICAgICB0aGlzLm1heFJldHJpZXMgPSBwYXJhbXMubWF4UmV0cmllcyA/PyA2O1xuICAgICAgICB0aGlzLm9uRmFpbGVkQXR0ZW1wdCA9XG4gICAgICAgICAgICBwYXJhbXMub25GYWlsZWRBdHRlbXB0ID8/IGRlZmF1bHRGYWlsZWRBdHRlbXB0SGFuZGxlcjtcbiAgICAgICAgY29uc3QgUFF1ZXVlID0gXCJkZWZhdWx0XCIgaW4gUFF1ZXVlTW9kID8gUFF1ZXVlTW9kLmRlZmF1bHQgOiBQUXVldWVNb2Q7XG4gICAgICAgIHRoaXMucXVldWUgPSBuZXcgUFF1ZXVlKHsgY29uY3VycmVuY3k6IHRoaXMubWF4Q29uY3VycmVuY3kgfSk7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY2FsbChjYWxsYWJsZSwgLi4uYXJncykge1xuICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZS5hZGQoKCkgPT4gcFJldHJ5KCgpID0+IGNhbGxhYmxlKC4uLmFyZ3MpLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWluc3RhbmNlb2Yvbm8taW5zdGFuY2VvZlxuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLCB7XG4gICAgICAgICAgICBvbkZhaWxlZEF0dGVtcHQ6IHRoaXMub25GYWlsZWRBdHRlbXB0LFxuICAgICAgICAgICAgcmV0cmllczogdGhpcy5tYXhSZXRyaWVzLFxuICAgICAgICAgICAgcmFuZG9taXplOiB0cnVlLFxuICAgICAgICAgICAgLy8gSWYgbmVlZGVkIHdlIGNhbiBjaGFuZ2Ugc29tZSBvZiB0aGUgZGVmYXVsdHMgaGVyZSxcbiAgICAgICAgICAgIC8vIGJ1dCB0aGV5J3JlIHF1aXRlIHNlbnNpYmxlLlxuICAgICAgICB9KSwgeyB0aHJvd09uVGltZW91dDogdHJ1ZSB9KTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjYWxsV2l0aE9wdGlvbnMob3B0aW9ucywgY2FsbGFibGUsIC4uLmFyZ3MpIHtcbiAgICAgICAgLy8gTm90ZSB0aGlzIGRvZXNuJ3QgY2FuY2VsIHRoZSB1bmRlcmx5aW5nIHJlcXVlc3QsXG4gICAgICAgIC8vIHdoZW4gYXZhaWxhYmxlIHByZWZlciB0byB1c2UgdGhlIHNpZ25hbCBvcHRpb24gb2YgdGhlIHVuZGVybHlpbmcgY2FsbFxuICAgICAgICBpZiAob3B0aW9ucy5zaWduYWwpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJhY2UoW1xuICAgICAgICAgICAgICAgIHRoaXMuY2FsbChjYWxsYWJsZSwgLi4uYXJncyksXG4gICAgICAgICAgICAgICAgbmV3IFByb21pc2UoKF8sIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnNpZ25hbD8uYWRkRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJBYm9ydEVycm9yXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5jYWxsKGNhbGxhYmxlLCAuLi5hcmdzKTtcbiAgICB9XG4gICAgZmV0Y2goLi4uYXJncykge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxsKCgpID0+IGZldGNoKC4uLmFyZ3MpLnRoZW4oKHJlcykgPT4gKHJlcy5vayA/IHJlcyA6IFByb21pc2UucmVqZWN0KHJlcykpKSk7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbInBSZXRyeSIsIlBRdWV1ZU1vZCIsIlNUQVRVU19OT19SRVRSWSIsImRlZmF1bHRGYWlsZWRBdHRlbXB0SGFuZGxlciIsImVycm9yIiwibWVzc2FnZSIsInN0YXJ0c1dpdGgiLCJuYW1lIiwiY29kZSIsInN0YXR1cyIsInJlc3BvbnNlIiwiaW5jbHVkZXMiLCJlcnIiLCJFcnJvciIsIkFzeW5jQ2FsbGVyIiwiY29uc3RydWN0b3IiLCJwYXJhbXMiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwibWF4Q29uY3VycmVuY3kiLCJJbmZpbml0eSIsIm1heFJldHJpZXMiLCJvbkZhaWxlZEF0dGVtcHQiLCJQUXVldWUiLCJkZWZhdWx0IiwicXVldWUiLCJjb25jdXJyZW5jeSIsImNhbGwiLCJjYWxsYWJsZSIsImFyZ3MiLCJhZGQiLCJjYXRjaCIsInJldHJpZXMiLCJyYW5kb21pemUiLCJ0aHJvd09uVGltZW91dCIsImNhbGxXaXRoT3B0aW9ucyIsIm9wdGlvbnMiLCJzaWduYWwiLCJQcm9taXNlIiwicmFjZSIsIl8iLCJyZWplY3QiLCJhZGRFdmVudExpc3RlbmVyIiwiZmV0Y2giLCJ0aGVuIiwicmVzIiwib2siXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/async_caller.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/chunk_array.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/chunk_array.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   chunkArray: () => (/* binding */ chunkArray)\n/* harmony export */ });\nconst chunkArray = (arr, chunkSize)=>arr.reduce((chunks, elem, index)=>{\n        const chunkIndex = Math.floor(index / chunkSize);\n        const chunk = chunks[chunkIndex] || [];\n        // eslint-disable-next-line no-param-reassign\n        chunks[chunkIndex] = chunk.concat([\n            elem\n        ]);\n        return chunks;\n    }, []);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvY2h1bmtfYXJyYXkuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPLE1BQU1BLGFBQWEsQ0FBQ0MsS0FBS0MsWUFBY0QsSUFBSUUsTUFBTSxDQUFDLENBQUNDLFFBQVFDLE1BQU1DO1FBQ3BFLE1BQU1DLGFBQWFDLEtBQUtDLEtBQUssQ0FBQ0gsUUFBUUo7UUFDdEMsTUFBTVEsUUFBUU4sTUFBTSxDQUFDRyxXQUFXLElBQUksRUFBRTtRQUN0Qyw2Q0FBNkM7UUFDN0NILE1BQU0sQ0FBQ0csV0FBVyxHQUFHRyxNQUFNQyxNQUFNLENBQUM7WUFBQ047U0FBSztRQUN4QyxPQUFPRDtJQUNYLEdBQUcsRUFBRSxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2NodW5rX2FycmF5LmpzP2MwOGYiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGNodW5rQXJyYXkgPSAoYXJyLCBjaHVua1NpemUpID0+IGFyci5yZWR1Y2UoKGNodW5rcywgZWxlbSwgaW5kZXgpID0+IHtcbiAgICBjb25zdCBjaHVua0luZGV4ID0gTWF0aC5mbG9vcihpbmRleCAvIGNodW5rU2l6ZSk7XG4gICAgY29uc3QgY2h1bmsgPSBjaHVua3NbY2h1bmtJbmRleF0gfHwgW107XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXBhcmFtLXJlYXNzaWduXG4gICAgY2h1bmtzW2NodW5rSW5kZXhdID0gY2h1bmsuY29uY2F0KFtlbGVtXSk7XG4gICAgcmV0dXJuIGNodW5rcztcbn0sIFtdKTtcbiJdLCJuYW1lcyI6WyJjaHVua0FycmF5IiwiYXJyIiwiY2h1bmtTaXplIiwicmVkdWNlIiwiY2h1bmtzIiwiZWxlbSIsImluZGV4IiwiY2h1bmtJbmRleCIsIk1hdGgiLCJmbG9vciIsImNodW5rIiwiY29uY2F0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/chunk_array.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/env.js":
/*!********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/env.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEnv: () => (/* binding */ getEnv),\n/* harmony export */   getEnvironmentVariable: () => (/* binding */ getEnvironmentVariable),\n/* harmony export */   getRuntimeEnvironment: () => (/* binding */ getRuntimeEnvironment),\n/* harmony export */   isBrowser: () => (/* binding */ isBrowser),\n/* harmony export */   isDeno: () => (/* binding */ isDeno),\n/* harmony export */   isJsDom: () => (/* binding */ isJsDom),\n/* harmony export */   isNode: () => (/* binding */ isNode),\n/* harmony export */   isWebWorker: () => (/* binding */ isWebWorker)\n/* harmony export */ });\nconst isBrowser = ()=> false && 0;\nconst isWebWorker = ()=>typeof globalThis === \"object\" && globalThis.constructor && globalThis.constructor.name === \"DedicatedWorkerGlobalScope\";\nconst isJsDom = ()=> false || typeof navigator !== \"undefined\" && (navigator.userAgent.includes(\"Node.js\") || navigator.userAgent.includes(\"jsdom\"));\n// Supabase Edge Function provides a `Deno` global object\n// without `version` property\nconst isDeno = ()=>typeof Deno !== \"undefined\";\n// Mark not-as-node if in Supabase Edge Function\nconst isNode = ()=>typeof process !== \"undefined\" && typeof process.versions !== \"undefined\" && typeof process.versions.node !== \"undefined\" && !isDeno();\nconst getEnv = ()=>{\n    let env;\n    if (isBrowser()) {\n        env = \"browser\";\n    } else if (isNode()) {\n        env = \"node\";\n    } else if (isWebWorker()) {\n        env = \"webworker\";\n    } else if (isJsDom()) {\n        env = \"jsdom\";\n    } else if (isDeno()) {\n        env = \"deno\";\n    } else {\n        env = \"other\";\n    }\n    return env;\n};\nlet runtimeEnvironment;\nasync function getRuntimeEnvironment() {\n    if (runtimeEnvironment === undefined) {\n        const env = getEnv();\n        runtimeEnvironment = {\n            library: \"langchain-js\",\n            runtime: env\n        };\n    }\n    return runtimeEnvironment;\n}\nfunction getEnvironmentVariable(name) {\n    // Certain Deno setups will throw an error if you try to access environment variables\n    // https://github.com/langchain-ai/langchainjs/issues/1412\n    try {\n        return typeof process !== \"undefined\" ? process.env?.[name] : undefined;\n    } catch (e) {\n        return undefined;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZW52LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQU8sTUFBTUEsWUFBWSxJQUFNLE1BQTZCLElBQUksQ0FBc0MsQ0FBQztBQUNoRyxNQUFNRyxjQUFjLElBQU0sT0FBT0MsZUFBZSxZQUNuREEsV0FBV0MsV0FBVyxJQUN0QkQsV0FBV0MsV0FBVyxDQUFDQyxJQUFJLEtBQUssNkJBQTZCO0FBQzFELE1BQU1DLFVBQVUsSUFBTSxNQUEwRCxJQUNsRixPQUFPQyxjQUFjLGVBQ2pCQSxDQUFBQSxVQUFVQyxTQUFTLENBQUNDLFFBQVEsQ0FBQyxjQUMxQkYsVUFBVUMsU0FBUyxDQUFDQyxRQUFRLENBQUMsUUFBTyxFQUFJO0FBQ3BELHlEQUF5RDtBQUN6RCw2QkFBNkI7QUFDdEIsTUFBTUMsU0FBUyxJQUFNLE9BQU9DLFNBQVMsWUFBWTtBQUN4RCxnREFBZ0Q7QUFDekMsTUFBTUMsU0FBUyxJQUFNLE9BQU9DLFlBQVksZUFDM0MsT0FBT0EsUUFBUUMsUUFBUSxLQUFLLGVBQzVCLE9BQU9ELFFBQVFDLFFBQVEsQ0FBQ0MsSUFBSSxLQUFLLGVBQ2pDLENBQUNMLFNBQVM7QUFDUCxNQUFNTSxTQUFTO0lBQ2xCLElBQUlDO0lBQ0osSUFBSWxCLGFBQWE7UUFDYmtCLE1BQU07SUFDVixPQUNLLElBQUlMLFVBQVU7UUFDZkssTUFBTTtJQUNWLE9BQ0ssSUFBSWYsZUFBZTtRQUNwQmUsTUFBTTtJQUNWLE9BQ0ssSUFBSVgsV0FBVztRQUNoQlcsTUFBTTtJQUNWLE9BQ0ssSUFBSVAsVUFBVTtRQUNmTyxNQUFNO0lBQ1YsT0FDSztRQUNEQSxNQUFNO0lBQ1Y7SUFDQSxPQUFPQTtBQUNYLEVBQUU7QUFDRixJQUFJQztBQUNHLGVBQWVDO0lBQ2xCLElBQUlELHVCQUF1QkUsV0FBVztRQUNsQyxNQUFNSCxNQUFNRDtRQUNaRSxxQkFBcUI7WUFDakJHLFNBQVM7WUFDVEMsU0FBU0w7UUFDYjtJQUNKO0lBQ0EsT0FBT0M7QUFDWDtBQUNPLFNBQVNLLHVCQUF1QmxCLElBQUk7SUFDdkMscUZBQXFGO0lBQ3JGLDBEQUEwRDtJQUMxRCxJQUFJO1FBQ0EsT0FBTyxPQUFPUSxZQUFZLGNBRWxCQSxRQUFRSSxHQUFHLEVBQUUsQ0FBQ1osS0FBSyxHQUNyQmU7SUFDVixFQUNBLE9BQU9JLEdBQUc7UUFDTixPQUFPSjtJQUNYO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1mb3JtLWJ1aWxkZXItdHV0b3JpYWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZW52LmpzPzQyZmQiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGlzQnJvd3NlciA9ICgpID0+IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIHdpbmRvdy5kb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIjtcbmV4cG9ydCBjb25zdCBpc1dlYldvcmtlciA9ICgpID0+IHR5cGVvZiBnbG9iYWxUaGlzID09PSBcIm9iamVjdFwiICYmXG4gICAgZ2xvYmFsVGhpcy5jb25zdHJ1Y3RvciAmJlxuICAgIGdsb2JhbFRoaXMuY29uc3RydWN0b3IubmFtZSA9PT0gXCJEZWRpY2F0ZWRXb3JrZXJHbG9iYWxTY29wZVwiO1xuZXhwb3J0IGNvbnN0IGlzSnNEb20gPSAoKSA9PiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cubmFtZSA9PT0gXCJub2RlanNcIikgfHxcbiAgICAodHlwZW9mIG5hdmlnYXRvciAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgICAgICAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcyhcIk5vZGUuanNcIikgfHxcbiAgICAgICAgICAgIG5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoXCJqc2RvbVwiKSkpO1xuLy8gU3VwYWJhc2UgRWRnZSBGdW5jdGlvbiBwcm92aWRlcyBhIGBEZW5vYCBnbG9iYWwgb2JqZWN0XG4vLyB3aXRob3V0IGB2ZXJzaW9uYCBwcm9wZXJ0eVxuZXhwb3J0IGNvbnN0IGlzRGVubyA9ICgpID0+IHR5cGVvZiBEZW5vICE9PSBcInVuZGVmaW5lZFwiO1xuLy8gTWFyayBub3QtYXMtbm9kZSBpZiBpbiBTdXBhYmFzZSBFZGdlIEZ1bmN0aW9uXG5leHBvcnQgY29uc3QgaXNOb2RlID0gKCkgPT4gdHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICB0eXBlb2YgcHJvY2Vzcy52ZXJzaW9ucyAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuICAgIHR5cGVvZiBwcm9jZXNzLnZlcnNpb25zLm5vZGUgIT09IFwidW5kZWZpbmVkXCIgJiZcbiAgICAhaXNEZW5vKCk7XG5leHBvcnQgY29uc3QgZ2V0RW52ID0gKCkgPT4ge1xuICAgIGxldCBlbnY7XG4gICAgaWYgKGlzQnJvd3NlcigpKSB7XG4gICAgICAgIGVudiA9IFwiYnJvd3NlclwiO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc05vZGUoKSkge1xuICAgICAgICBlbnYgPSBcIm5vZGVcIjtcbiAgICB9XG4gICAgZWxzZSBpZiAoaXNXZWJXb3JrZXIoKSkge1xuICAgICAgICBlbnYgPSBcIndlYndvcmtlclwiO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0pzRG9tKCkpIHtcbiAgICAgICAgZW52ID0gXCJqc2RvbVwiO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0Rlbm8oKSkge1xuICAgICAgICBlbnYgPSBcImRlbm9cIjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGVudiA9IFwib3RoZXJcIjtcbiAgICB9XG4gICAgcmV0dXJuIGVudjtcbn07XG5sZXQgcnVudGltZUVudmlyb25tZW50O1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFJ1bnRpbWVFbnZpcm9ubWVudCgpIHtcbiAgICBpZiAocnVudGltZUVudmlyb25tZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3QgZW52ID0gZ2V0RW52KCk7XG4gICAgICAgIHJ1bnRpbWVFbnZpcm9ubWVudCA9IHtcbiAgICAgICAgICAgIGxpYnJhcnk6IFwibGFuZ2NoYWluLWpzXCIsXG4gICAgICAgICAgICBydW50aW1lOiBlbnYsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBydW50aW1lRW52aXJvbm1lbnQ7XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShuYW1lKSB7XG4gICAgLy8gQ2VydGFpbiBEZW5vIHNldHVwcyB3aWxsIHRocm93IGFuIGVycm9yIGlmIHlvdSB0cnkgdG8gYWNjZXNzIGVudmlyb25tZW50IHZhcmlhYmxlc1xuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9sYW5nY2hhaW4tYWkvbGFuZ2NoYWluanMvaXNzdWVzLzE0MTJcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCJcbiAgICAgICAgICAgID8gLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXByb2Nlc3MtZW52XG4gICAgICAgICAgICAgICAgcHJvY2Vzcy5lbnY/LltuYW1lXVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbImlzQnJvd3NlciIsIndpbmRvdyIsImRvY3VtZW50IiwiaXNXZWJXb3JrZXIiLCJnbG9iYWxUaGlzIiwiY29uc3RydWN0b3IiLCJuYW1lIiwiaXNKc0RvbSIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsImluY2x1ZGVzIiwiaXNEZW5vIiwiRGVubyIsImlzTm9kZSIsInByb2Nlc3MiLCJ2ZXJzaW9ucyIsIm5vZGUiLCJnZXRFbnYiLCJlbnYiLCJydW50aW1lRW52aXJvbm1lbnQiLCJnZXRSdW50aW1lRW52aXJvbm1lbnQiLCJ1bmRlZmluZWQiLCJsaWJyYXJ5IiwicnVudGltZSIsImdldEVudmlyb25tZW50VmFyaWFibGUiLCJlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/env.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/index.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/fast-json-patch/index.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsonPatchError: () => (/* reexport safe */ _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.PatchError),\n/* harmony export */   _areEquals: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__._areEquals),\n/* harmony export */   applyOperation: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.applyOperation),\n/* harmony export */   applyPatch: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.applyPatch),\n/* harmony export */   applyReducer: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.applyReducer),\n/* harmony export */   compare: () => (/* reexport safe */ _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__.compare),\n/* harmony export */   deepClone: () => (/* reexport safe */ _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__._deepClone),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   escapePathComponent: () => (/* reexport safe */ _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.escapePathComponent),\n/* harmony export */   generate: () => (/* reexport safe */ _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__.generate),\n/* harmony export */   getValueByPointer: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.getValueByPointer),\n/* harmony export */   observe: () => (/* reexport safe */ _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__.observe),\n/* harmony export */   unescapePathComponent: () => (/* reexport safe */ _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.unescapePathComponent),\n/* harmony export */   unobserve: () => (/* reexport safe */ _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__.unobserve),\n/* harmony export */   validate: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.validate),\n/* harmony export */   validator: () => (/* reexport safe */ _src_core_js__WEBPACK_IMPORTED_MODULE_0__.validator)\n/* harmony export */ });\n/* harmony import */ var _src_core_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./src/core.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js\");\n/* harmony import */ var _src_duplex_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./src/duplex.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js\");\n/* harmony import */ var _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./src/helpers.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js\");\n\n\n\n/**\n * Default export for backwards compat\n */ \n\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    ..._src_core_js__WEBPACK_IMPORTED_MODULE_0__,\n    // ...duplex,\n    JsonPatchError: _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.PatchError,\n    deepClone: _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__._deepClone,\n    escapePathComponent: _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.escapePathComponent,\n    unescapePathComponent: _src_helpers_js__WEBPACK_IMPORTED_MODULE_2__.unescapePathComponent\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZmFzdC1qc29uLXBhdGNoL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBOEI7QUFDRTtBQUNzRztBQUN0STs7Q0FFQyxHQUNxQztBQUNnRztBQUN0SSxpRUFBZTtJQUNYLEdBQUdNLHlDQUFJO0lBQ1AsYUFBYTtJQUNiTCxjQUFjQSx5REFBQUE7SUFDZEUsU0FBU0EseURBQUFBO0lBQ1RDLG1CQUFtQkEsa0VBQUFBO0lBQ25CQyxxQkFBcUJBLG9FQUFBQTtBQUN6QixDQUFDLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1mb3JtLWJ1aWxkZXItdHV0b3JpYWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZmFzdC1qc29uLXBhdGNoL2luZGV4LmpzPzRjOTMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSBcIi4vc3JjL2NvcmUuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3NyYy9kdXBsZXguanNcIjtcbmV4cG9ydCB7IFBhdGNoRXJyb3IgYXMgSnNvblBhdGNoRXJyb3IsIF9kZWVwQ2xvbmUgYXMgZGVlcENsb25lLCBlc2NhcGVQYXRoQ29tcG9uZW50LCB1bmVzY2FwZVBhdGhDb21wb25lbnQsIH0gZnJvbSBcIi4vc3JjL2hlbHBlcnMuanNcIjtcbi8qKlxuICogRGVmYXVsdCBleHBvcnQgZm9yIGJhY2t3YXJkcyBjb21wYXRcbiAqL1xuaW1wb3J0ICogYXMgY29yZSBmcm9tIFwiLi9zcmMvY29yZS5qc1wiO1xuaW1wb3J0IHsgUGF0Y2hFcnJvciBhcyBKc29uUGF0Y2hFcnJvciwgX2RlZXBDbG9uZSBhcyBkZWVwQ2xvbmUsIGVzY2FwZVBhdGhDb21wb25lbnQsIHVuZXNjYXBlUGF0aENvbXBvbmVudCwgfSBmcm9tIFwiLi9zcmMvaGVscGVycy5qc1wiO1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIC4uLmNvcmUsXG4gICAgLy8gLi4uZHVwbGV4LFxuICAgIEpzb25QYXRjaEVycm9yLFxuICAgIGRlZXBDbG9uZSxcbiAgICBlc2NhcGVQYXRoQ29tcG9uZW50LFxuICAgIHVuZXNjYXBlUGF0aENvbXBvbmVudCxcbn07XG4iXSwibmFtZXMiOlsiUGF0Y2hFcnJvciIsIkpzb25QYXRjaEVycm9yIiwiX2RlZXBDbG9uZSIsImRlZXBDbG9uZSIsImVzY2FwZVBhdGhDb21wb25lbnQiLCJ1bmVzY2FwZVBhdGhDb21wb25lbnQiLCJjb3JlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   JsonPatchError: () => (/* binding */ JsonPatchError),\n/* harmony export */   _areEquals: () => (/* binding */ _areEquals),\n/* harmony export */   applyOperation: () => (/* binding */ applyOperation),\n/* harmony export */   applyPatch: () => (/* binding */ applyPatch),\n/* harmony export */   applyReducer: () => (/* binding */ applyReducer),\n/* harmony export */   deepClone: () => (/* binding */ deepClone),\n/* harmony export */   getValueByPointer: () => (/* binding */ getValueByPointer),\n/* harmony export */   validate: () => (/* binding */ validate),\n/* harmony export */   validator: () => (/* binding */ validator)\n/* harmony export */ });\n/* harmony import */ var _helpers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js\");\n// @ts-nocheck\n\nconst JsonPatchError = _helpers_js__WEBPACK_IMPORTED_MODULE_0__.PatchError;\nconst deepClone = _helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone;\n/* We use a Javascript hash to store each\n function. Each hash entry (property) uses\n the operation identifiers specified in rfc6902.\n In this way, we can map each patch operation\n to its dedicated function in efficient way.\n */ /* The operations applicable to an object */ const objOps = {\n    add: function(obj, key, document) {\n        obj[key] = this.value;\n        return {\n            newDocument: document\n        };\n    },\n    remove: function(obj, key, document) {\n        var removed = obj[key];\n        delete obj[key];\n        return {\n            newDocument: document,\n            removed\n        };\n    },\n    replace: function(obj, key, document) {\n        var removed = obj[key];\n        obj[key] = this.value;\n        return {\n            newDocument: document,\n            removed\n        };\n    },\n    move: function(obj, key, document) {\n        /* in case move target overwrites an existing value,\n        return the removed value, this can be taxing performance-wise,\n        and is potentially unneeded */ let removed = getValueByPointer(document, this.path);\n        if (removed) {\n            removed = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(removed);\n        }\n        const originalValue = applyOperation(document, {\n            op: \"remove\",\n            path: this.from\n        }).removed;\n        applyOperation(document, {\n            op: \"add\",\n            path: this.path,\n            value: originalValue\n        });\n        return {\n            newDocument: document,\n            removed\n        };\n    },\n    copy: function(obj, key, document) {\n        const valueToCopy = getValueByPointer(document, this.from);\n        // enforce copy by value so further operations don't affect source (see issue #177)\n        applyOperation(document, {\n            op: \"add\",\n            path: this.path,\n            value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(valueToCopy)\n        });\n        return {\n            newDocument: document\n        };\n    },\n    test: function(obj, key, document) {\n        return {\n            newDocument: document,\n            test: _areEquals(obj[key], this.value)\n        };\n    },\n    _get: function(obj, key, document) {\n        this.value = obj[key];\n        return {\n            newDocument: document\n        };\n    }\n};\n/* The operations applicable to an array. Many are the same as for the object */ var arrOps = {\n    add: function(arr, i, document) {\n        if ((0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.isInteger)(i)) {\n            arr.splice(i, 0, this.value);\n        } else {\n            // array props\n            arr[i] = this.value;\n        }\n        // this may be needed when using '-' in an array\n        return {\n            newDocument: document,\n            index: i\n        };\n    },\n    remove: function(arr, i, document) {\n        var removedList = arr.splice(i, 1);\n        return {\n            newDocument: document,\n            removed: removedList[0]\n        };\n    },\n    replace: function(arr, i, document) {\n        var removed = arr[i];\n        arr[i] = this.value;\n        return {\n            newDocument: document,\n            removed\n        };\n    },\n    move: objOps.move,\n    copy: objOps.copy,\n    test: objOps.test,\n    _get: objOps._get\n};\n/**\n * Retrieves a value from a JSON document by a JSON pointer.\n * Returns the value.\n *\n * @param document The document to get the value from\n * @param pointer an escaped JSON pointer\n * @return The retrieved value\n */ function getValueByPointer(document, pointer) {\n    if (pointer == \"\") {\n        return document;\n    }\n    var getOriginalDestination = {\n        op: \"_get\",\n        path: pointer\n    };\n    applyOperation(document, getOriginalDestination);\n    return getOriginalDestination.value;\n}\n/**\n * Apply a single JSON Patch Operation on a JSON document.\n * Returns the {newDocument, result} of the operation.\n * It modifies the `document` and `operation` objects - it gets the values by reference.\n * If you would like to avoid touching your values, clone them:\n * `jsonpatch.applyOperation(document, jsonpatch._deepClone(operation))`.\n *\n * @param document The document to patch\n * @param operation The operation to apply\n * @param validateOperation `false` is without validation, `true` to use default jsonpatch's validation, or you can pass a `validateOperation` callback to be used for validation.\n * @param mutateDocument Whether to mutate the original document or clone it before applying\n * @param banPrototypeModifications Whether to ban modifications to `__proto__`, defaults to `true`.\n * @return `{newDocument, result}` after the operation\n */ function applyOperation(document, operation, validateOperation = false, mutateDocument = true, banPrototypeModifications = true, index = 0) {\n    if (validateOperation) {\n        if (typeof validateOperation == \"function\") {\n            validateOperation(operation, 0, document, operation.path);\n        } else {\n            validator(operation, 0);\n        }\n    }\n    /* ROOT OPERATIONS */ if (operation.path === \"\") {\n        let returnValue = {\n            newDocument: document\n        };\n        if (operation.op === \"add\") {\n            returnValue.newDocument = operation.value;\n            return returnValue;\n        } else if (operation.op === \"replace\") {\n            returnValue.newDocument = operation.value;\n            returnValue.removed = document; //document we removed\n            return returnValue;\n        } else if (operation.op === \"move\" || operation.op === \"copy\") {\n            // it's a move or copy to root\n            returnValue.newDocument = getValueByPointer(document, operation.from); // get the value by json-pointer in `from` field\n            if (operation.op === \"move\") {\n                // report removed item\n                returnValue.removed = document;\n            }\n            return returnValue;\n        } else if (operation.op === \"test\") {\n            returnValue.test = _areEquals(document, operation.value);\n            if (returnValue.test === false) {\n                throw new JsonPatchError(\"Test operation failed\", \"TEST_OPERATION_FAILED\", index, operation, document);\n            }\n            returnValue.newDocument = document;\n            return returnValue;\n        } else if (operation.op === \"remove\") {\n            // a remove on root\n            returnValue.removed = document;\n            returnValue.newDocument = null;\n            return returnValue;\n        } else if (operation.op === \"_get\") {\n            operation.value = document;\n            return returnValue;\n        } else {\n            /* bad operation */ if (validateOperation) {\n                throw new JsonPatchError(\"Operation `op` property is not one of operations defined in RFC-6902\", \"OPERATION_OP_INVALID\", index, operation, document);\n            } else {\n                return returnValue;\n            }\n        }\n    } else {\n        if (!mutateDocument) {\n            document = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(document);\n        }\n        const path = operation.path || \"\";\n        const keys = path.split(\"/\");\n        let obj = document;\n        let t = 1; //skip empty element - http://jsperf.com/to-shift-or-not-to-shift\n        let len = keys.length;\n        let existingPathFragment = undefined;\n        let key;\n        let validateFunction;\n        if (typeof validateOperation == \"function\") {\n            validateFunction = validateOperation;\n        } else {\n            validateFunction = validator;\n        }\n        while(true){\n            key = keys[t];\n            if (key && key.indexOf(\"~\") != -1) {\n                key = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.unescapePathComponent)(key);\n            }\n            if (banPrototypeModifications && (key == \"__proto__\" || key == \"prototype\" && t > 0 && keys[t - 1] == \"constructor\")) {\n                throw new TypeError(\"JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README\");\n            }\n            if (validateOperation) {\n                if (existingPathFragment === undefined) {\n                    if (obj[key] === undefined) {\n                        existingPathFragment = keys.slice(0, t).join(\"/\");\n                    } else if (t == len - 1) {\n                        existingPathFragment = operation.path;\n                    }\n                    if (existingPathFragment !== undefined) {\n                        validateFunction(operation, 0, document, existingPathFragment);\n                    }\n                }\n            }\n            t++;\n            if (Array.isArray(obj)) {\n                if (key === \"-\") {\n                    key = obj.length;\n                } else {\n                    if (validateOperation && !(0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.isInteger)(key)) {\n                        throw new JsonPatchError(\"Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index\", \"OPERATION_PATH_ILLEGAL_ARRAY_INDEX\", index, operation, document);\n                    } else if ((0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.isInteger)(key)) {\n                        key = ~~key;\n                    }\n                }\n                if (t >= len) {\n                    if (validateOperation && operation.op === \"add\" && key > obj.length) {\n                        throw new JsonPatchError(\"The specified index MUST NOT be greater than the number of elements in the array\", \"OPERATION_VALUE_OUT_OF_BOUNDS\", index, operation, document);\n                    }\n                    const returnValue = arrOps[operation.op].call(operation, obj, key, document); // Apply patch\n                    if (returnValue.test === false) {\n                        throw new JsonPatchError(\"Test operation failed\", \"TEST_OPERATION_FAILED\", index, operation, document);\n                    }\n                    return returnValue;\n                }\n            } else {\n                if (t >= len) {\n                    const returnValue = objOps[operation.op].call(operation, obj, key, document); // Apply patch\n                    if (returnValue.test === false) {\n                        throw new JsonPatchError(\"Test operation failed\", \"TEST_OPERATION_FAILED\", index, operation, document);\n                    }\n                    return returnValue;\n                }\n            }\n            obj = obj[key];\n            // If we have more keys in the path, but the next value isn't a non-null object,\n            // throw an OPERATION_PATH_UNRESOLVABLE error instead of iterating again.\n            if (validateOperation && t < len && (!obj || typeof obj !== \"object\")) {\n                throw new JsonPatchError(\"Cannot perform operation at the desired path\", \"OPERATION_PATH_UNRESOLVABLE\", index, operation, document);\n            }\n        }\n    }\n}\n/**\n * Apply a full JSON Patch array on a JSON document.\n * Returns the {newDocument, result} of the patch.\n * It modifies the `document` object and `patch` - it gets the values by reference.\n * If you would like to avoid touching your values, clone them:\n * `jsonpatch.applyPatch(document, jsonpatch._deepClone(patch))`.\n *\n * @param document The document to patch\n * @param patch The patch to apply\n * @param validateOperation `false` is without validation, `true` to use default jsonpatch's validation, or you can pass a `validateOperation` callback to be used for validation.\n * @param mutateDocument Whether to mutate the original document or clone it before applying\n * @param banPrototypeModifications Whether to ban modifications to `__proto__`, defaults to `true`.\n * @return An array of `{newDocument, result}` after the patch\n */ function applyPatch(document, patch, validateOperation, mutateDocument = true, banPrototypeModifications = true) {\n    if (validateOperation) {\n        if (!Array.isArray(patch)) {\n            throw new JsonPatchError(\"Patch sequence must be an array\", \"SEQUENCE_NOT_AN_ARRAY\");\n        }\n    }\n    if (!mutateDocument) {\n        document = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(document);\n    }\n    const results = new Array(patch.length);\n    for(let i = 0, length = patch.length; i < length; i++){\n        // we don't need to pass mutateDocument argument because if it was true, we already deep cloned the object, we'll just pass `true`\n        results[i] = applyOperation(document, patch[i], validateOperation, true, banPrototypeModifications, i);\n        document = results[i].newDocument; // in case root was replaced\n    }\n    results.newDocument = document;\n    return results;\n}\n/**\n * Apply a single JSON Patch Operation on a JSON document.\n * Returns the updated document.\n * Suitable as a reducer.\n *\n * @param document The document to patch\n * @param operation The operation to apply\n * @return The updated document\n */ function applyReducer(document, operation, index) {\n    const operationResult = applyOperation(document, operation);\n    if (operationResult.test === false) {\n        // failed test\n        throw new JsonPatchError(\"Test operation failed\", \"TEST_OPERATION_FAILED\", index, operation, document);\n    }\n    return operationResult.newDocument;\n}\n/**\n * Validates a single operation. Called from `jsonpatch.validate`. Throws `JsonPatchError` in case of an error.\n * @param {object} operation - operation object (patch)\n * @param {number} index - index of operation in the sequence\n * @param {object} [document] - object where the operation is supposed to be applied\n * @param {string} [existingPathFragment] - comes along with `document`\n */ function validator(operation, index, document, existingPathFragment) {\n    if (typeof operation !== \"object\" || operation === null || Array.isArray(operation)) {\n        throw new JsonPatchError(\"Operation is not an object\", \"OPERATION_NOT_AN_OBJECT\", index, operation, document);\n    } else if (!objOps[operation.op]) {\n        throw new JsonPatchError(\"Operation `op` property is not one of operations defined in RFC-6902\", \"OPERATION_OP_INVALID\", index, operation, document);\n    } else if (typeof operation.path !== \"string\") {\n        throw new JsonPatchError(\"Operation `path` property is not a string\", \"OPERATION_PATH_INVALID\", index, operation, document);\n    } else if (operation.path.indexOf(\"/\") !== 0 && operation.path.length > 0) {\n        // paths that aren't empty string should start with \"/\"\n        throw new JsonPatchError('Operation `path` property must start with \"/\"', \"OPERATION_PATH_INVALID\", index, operation, document);\n    } else if ((operation.op === \"move\" || operation.op === \"copy\") && typeof operation.from !== \"string\") {\n        throw new JsonPatchError(\"Operation `from` property is not present (applicable in `move` and `copy` operations)\", \"OPERATION_FROM_REQUIRED\", index, operation, document);\n    } else if ((operation.op === \"add\" || operation.op === \"replace\" || operation.op === \"test\") && operation.value === undefined) {\n        throw new JsonPatchError(\"Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)\", \"OPERATION_VALUE_REQUIRED\", index, operation, document);\n    } else if ((operation.op === \"add\" || operation.op === \"replace\" || operation.op === \"test\") && (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.hasUndefined)(operation.value)) {\n        throw new JsonPatchError(\"Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)\", \"OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED\", index, operation, document);\n    } else if (document) {\n        if (operation.op == \"add\") {\n            var pathLen = operation.path.split(\"/\").length;\n            var existingPathLen = existingPathFragment.split(\"/\").length;\n            if (pathLen !== existingPathLen + 1 && pathLen !== existingPathLen) {\n                throw new JsonPatchError(\"Cannot perform an `add` operation at the desired path\", \"OPERATION_PATH_CANNOT_ADD\", index, operation, document);\n            }\n        } else if (operation.op === \"replace\" || operation.op === \"remove\" || operation.op === \"_get\") {\n            if (operation.path !== existingPathFragment) {\n                throw new JsonPatchError(\"Cannot perform the operation at a path that does not exist\", \"OPERATION_PATH_UNRESOLVABLE\", index, operation, document);\n            }\n        } else if (operation.op === \"move\" || operation.op === \"copy\") {\n            var existingValue = {\n                op: \"_get\",\n                path: operation.from,\n                value: undefined\n            };\n            var error = validate([\n                existingValue\n            ], document);\n            if (error && error.name === \"OPERATION_PATH_UNRESOLVABLE\") {\n                throw new JsonPatchError(\"Cannot perform the operation from a path that does not exist\", \"OPERATION_FROM_UNRESOLVABLE\", index, operation, document);\n            }\n        }\n    }\n}\n/**\n * Validates a sequence of operations. If `document` parameter is provided, the sequence is additionally validated against the object document.\n * If error is encountered, returns a JsonPatchError object\n * @param sequence\n * @param document\n * @returns {JsonPatchError|undefined}\n */ function validate(sequence, document, externalValidator) {\n    try {\n        if (!Array.isArray(sequence)) {\n            throw new JsonPatchError(\"Patch sequence must be an array\", \"SEQUENCE_NOT_AN_ARRAY\");\n        }\n        if (document) {\n            //clone document and sequence so that we can safely try applying operations\n            applyPatch((0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(document), (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(sequence), externalValidator || true);\n        } else {\n            externalValidator = externalValidator || validator;\n            for(var i = 0; i < sequence.length; i++){\n                externalValidator(sequence[i], i, document, undefined);\n            }\n        }\n    } catch (e) {\n        if (e instanceof JsonPatchError) {\n            return e;\n        } else {\n            throw e;\n        }\n    }\n}\n// based on https://github.com/epoberezkin/fast-deep-equal\n// MIT License\n// Copyright (c) 2017 Evgeny Poberezkin\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\nfunction _areEquals(a, b) {\n    if (a === b) return true;\n    if (a && b && typeof a == \"object\" && typeof b == \"object\") {\n        var arrA = Array.isArray(a), arrB = Array.isArray(b), i, length, key;\n        if (arrA && arrB) {\n            length = a.length;\n            if (length != b.length) return false;\n            for(i = length; i-- !== 0;)if (!_areEquals(a[i], b[i])) return false;\n            return true;\n        }\n        if (arrA != arrB) return false;\n        var keys = Object.keys(a);\n        length = keys.length;\n        if (length !== Object.keys(b).length) return false;\n        for(i = length; i-- !== 0;)if (!b.hasOwnProperty(keys[i])) return false;\n        for(i = length; i-- !== 0;){\n            key = keys[i];\n            if (!_areEquals(a[key], b[key])) return false;\n        }\n        return true;\n    }\n    return a !== a && b !== b;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZmFzdC1qc29uLXBhdGNoL3NyYy9jb3JlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQSxjQUFjO0FBQ3lGO0FBQ2hHLE1BQU1LLGlCQUFpQkwsbURBQVVBLENBQUM7QUFDbEMsTUFBTU0sWUFBWUwsbURBQVVBLENBQUM7QUFDcEM7Ozs7O0NBS0MsR0FDRCwwQ0FBMEMsR0FDMUMsTUFBTU0sU0FBUztJQUNYQyxLQUFLLFNBQVVDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxRQUFRO1FBQzdCRixHQUFHLENBQUNDLElBQUksR0FBRyxJQUFJLENBQUNFLEtBQUs7UUFDckIsT0FBTztZQUFFQyxhQUFhRjtRQUFTO0lBQ25DO0lBQ0FHLFFBQVEsU0FBVUwsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLFFBQVE7UUFDaEMsSUFBSUksVUFBVU4sR0FBRyxDQUFDQyxJQUFJO1FBQ3RCLE9BQU9ELEdBQUcsQ0FBQ0MsSUFBSTtRQUNmLE9BQU87WUFBRUcsYUFBYUY7WUFBVUk7UUFBUTtJQUM1QztJQUNBQyxTQUFTLFNBQVVQLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxRQUFRO1FBQ2pDLElBQUlJLFVBQVVOLEdBQUcsQ0FBQ0MsSUFBSTtRQUN0QkQsR0FBRyxDQUFDQyxJQUFJLEdBQUcsSUFBSSxDQUFDRSxLQUFLO1FBQ3JCLE9BQU87WUFBRUMsYUFBYUY7WUFBVUk7UUFBUTtJQUM1QztJQUNBRSxNQUFNLFNBQVVSLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxRQUFRO1FBQzlCOztvQ0FFNEIsR0FDNUIsSUFBSUksVUFBVUcsa0JBQWtCUCxVQUFVLElBQUksQ0FBQ1EsSUFBSTtRQUNuRCxJQUFJSixTQUFTO1lBQ1RBLFVBQVVkLHVEQUFVQSxDQUFDYztRQUN6QjtRQUNBLE1BQU1LLGdCQUFnQkMsZUFBZVYsVUFBVTtZQUMzQ1csSUFBSTtZQUNKSCxNQUFNLElBQUksQ0FBQ0ksSUFBSTtRQUNuQixHQUFHUixPQUFPO1FBQ1ZNLGVBQWVWLFVBQVU7WUFDckJXLElBQUk7WUFDSkgsTUFBTSxJQUFJLENBQUNBLElBQUk7WUFDZlAsT0FBT1E7UUFDWDtRQUNBLE9BQU87WUFBRVAsYUFBYUY7WUFBVUk7UUFBUTtJQUM1QztJQUNBUyxNQUFNLFNBQVVmLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxRQUFRO1FBQzlCLE1BQU1jLGNBQWNQLGtCQUFrQlAsVUFBVSxJQUFJLENBQUNZLElBQUk7UUFDekQsbUZBQW1GO1FBQ25GRixlQUFlVixVQUFVO1lBQ3JCVyxJQUFJO1lBQ0pILE1BQU0sSUFBSSxDQUFDQSxJQUFJO1lBQ2ZQLE9BQU9YLHVEQUFVQSxDQUFDd0I7UUFDdEI7UUFDQSxPQUFPO1lBQUVaLGFBQWFGO1FBQVM7SUFDbkM7SUFDQWUsTUFBTSxTQUFVakIsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLFFBQVE7UUFDOUIsT0FBTztZQUFFRSxhQUFhRjtZQUFVZSxNQUFNQyxXQUFXbEIsR0FBRyxDQUFDQyxJQUFJLEVBQUUsSUFBSSxDQUFDRSxLQUFLO1FBQUU7SUFDM0U7SUFDQWdCLE1BQU0sU0FBVW5CLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxRQUFRO1FBQzlCLElBQUksQ0FBQ0MsS0FBSyxHQUFHSCxHQUFHLENBQUNDLElBQUk7UUFDckIsT0FBTztZQUFFRyxhQUFhRjtRQUFTO0lBQ25DO0FBQ0o7QUFDQSw4RUFBOEUsR0FDOUUsSUFBSWtCLFNBQVM7SUFDVHJCLEtBQUssU0FBVXNCLEdBQUcsRUFBRUMsQ0FBQyxFQUFFcEIsUUFBUTtRQUMzQixJQUFJVCxzREFBU0EsQ0FBQzZCLElBQUk7WUFDZEQsSUFBSUUsTUFBTSxDQUFDRCxHQUFHLEdBQUcsSUFBSSxDQUFDbkIsS0FBSztRQUMvQixPQUNLO1lBQ0QsY0FBYztZQUNka0IsR0FBRyxDQUFDQyxFQUFFLEdBQUcsSUFBSSxDQUFDbkIsS0FBSztRQUN2QjtRQUNBLGdEQUFnRDtRQUNoRCxPQUFPO1lBQUVDLGFBQWFGO1lBQVVzQixPQUFPRjtRQUFFO0lBQzdDO0lBQ0FqQixRQUFRLFNBQVVnQixHQUFHLEVBQUVDLENBQUMsRUFBRXBCLFFBQVE7UUFDOUIsSUFBSXVCLGNBQWNKLElBQUlFLE1BQU0sQ0FBQ0QsR0FBRztRQUNoQyxPQUFPO1lBQUVsQixhQUFhRjtZQUFVSSxTQUFTbUIsV0FBVyxDQUFDLEVBQUU7UUFBQztJQUM1RDtJQUNBbEIsU0FBUyxTQUFVYyxHQUFHLEVBQUVDLENBQUMsRUFBRXBCLFFBQVE7UUFDL0IsSUFBSUksVUFBVWUsR0FBRyxDQUFDQyxFQUFFO1FBQ3BCRCxHQUFHLENBQUNDLEVBQUUsR0FBRyxJQUFJLENBQUNuQixLQUFLO1FBQ25CLE9BQU87WUFBRUMsYUFBYUY7WUFBVUk7UUFBUTtJQUM1QztJQUNBRSxNQUFNVixPQUFPVSxJQUFJO0lBQ2pCTyxNQUFNakIsT0FBT2lCLElBQUk7SUFDakJFLE1BQU1uQixPQUFPbUIsSUFBSTtJQUNqQkUsTUFBTXJCLE9BQU9xQixJQUFJO0FBQ3JCO0FBQ0E7Ozs7Ozs7Q0FPQyxHQUNNLFNBQVNWLGtCQUFrQlAsUUFBUSxFQUFFd0IsT0FBTztJQUMvQyxJQUFJQSxXQUFXLElBQUk7UUFDZixPQUFPeEI7SUFDWDtJQUNBLElBQUl5Qix5QkFBeUI7UUFBRWQsSUFBSTtRQUFRSCxNQUFNZ0I7SUFBUTtJQUN6RGQsZUFBZVYsVUFBVXlCO0lBQ3pCLE9BQU9BLHVCQUF1QnhCLEtBQUs7QUFDdkM7QUFDQTs7Ozs7Ozs7Ozs7OztDQWFDLEdBQ00sU0FBU1MsZUFBZVYsUUFBUSxFQUFFMEIsU0FBUyxFQUFFQyxvQkFBb0IsS0FBSyxFQUFFQyxpQkFBaUIsSUFBSSxFQUFFQyw0QkFBNEIsSUFBSSxFQUFFUCxRQUFRLENBQUM7SUFDN0ksSUFBSUssbUJBQW1CO1FBQ25CLElBQUksT0FBT0EscUJBQXFCLFlBQVk7WUFDeENBLGtCQUFrQkQsV0FBVyxHQUFHMUIsVUFBVTBCLFVBQVVsQixJQUFJO1FBQzVELE9BQ0s7WUFDRHNCLFVBQVVKLFdBQVc7UUFDekI7SUFDSjtJQUNBLG1CQUFtQixHQUNuQixJQUFJQSxVQUFVbEIsSUFBSSxLQUFLLElBQUk7UUFDdkIsSUFBSXVCLGNBQWM7WUFBRTdCLGFBQWFGO1FBQVM7UUFDMUMsSUFBSTBCLFVBQVVmLEVBQUUsS0FBSyxPQUFPO1lBQ3hCb0IsWUFBWTdCLFdBQVcsR0FBR3dCLFVBQVV6QixLQUFLO1lBQ3pDLE9BQU84QjtRQUNYLE9BQ0ssSUFBSUwsVUFBVWYsRUFBRSxLQUFLLFdBQVc7WUFDakNvQixZQUFZN0IsV0FBVyxHQUFHd0IsVUFBVXpCLEtBQUs7WUFDekM4QixZQUFZM0IsT0FBTyxHQUFHSixVQUFVLHFCQUFxQjtZQUNyRCxPQUFPK0I7UUFDWCxPQUNLLElBQUlMLFVBQVVmLEVBQUUsS0FBSyxVQUFVZSxVQUFVZixFQUFFLEtBQUssUUFBUTtZQUN6RCw4QkFBOEI7WUFDOUJvQixZQUFZN0IsV0FBVyxHQUFHSyxrQkFBa0JQLFVBQVUwQixVQUFVZCxJQUFJLEdBQUcsZ0RBQWdEO1lBQ3ZILElBQUljLFVBQVVmLEVBQUUsS0FBSyxRQUFRO2dCQUN6QixzQkFBc0I7Z0JBQ3RCb0IsWUFBWTNCLE9BQU8sR0FBR0o7WUFDMUI7WUFDQSxPQUFPK0I7UUFDWCxPQUNLLElBQUlMLFVBQVVmLEVBQUUsS0FBSyxRQUFRO1lBQzlCb0IsWUFBWWhCLElBQUksR0FBR0MsV0FBV2hCLFVBQVUwQixVQUFVekIsS0FBSztZQUN2RCxJQUFJOEIsWUFBWWhCLElBQUksS0FBSyxPQUFPO2dCQUM1QixNQUFNLElBQUlyQixlQUFlLHlCQUF5Qix5QkFBeUI0QixPQUFPSSxXQUFXMUI7WUFDakc7WUFDQStCLFlBQVk3QixXQUFXLEdBQUdGO1lBQzFCLE9BQU8rQjtRQUNYLE9BQ0ssSUFBSUwsVUFBVWYsRUFBRSxLQUFLLFVBQVU7WUFDaEMsbUJBQW1CO1lBQ25Cb0IsWUFBWTNCLE9BQU8sR0FBR0o7WUFDdEIrQixZQUFZN0IsV0FBVyxHQUFHO1lBQzFCLE9BQU82QjtRQUNYLE9BQ0ssSUFBSUwsVUFBVWYsRUFBRSxLQUFLLFFBQVE7WUFDOUJlLFVBQVV6QixLQUFLLEdBQUdEO1lBQ2xCLE9BQU8rQjtRQUNYLE9BQ0s7WUFDRCxpQkFBaUIsR0FDakIsSUFBSUosbUJBQW1CO2dCQUNuQixNQUFNLElBQUlqQyxlQUFlLHdFQUF3RSx3QkFBd0I0QixPQUFPSSxXQUFXMUI7WUFDL0ksT0FDSztnQkFDRCxPQUFPK0I7WUFDWDtRQUNKO0lBQ0osT0FDSztRQUNELElBQUksQ0FBQ0gsZ0JBQWdCO1lBQ2pCNUIsV0FBV1YsdURBQVVBLENBQUNVO1FBQzFCO1FBQ0EsTUFBTVEsT0FBT2tCLFVBQVVsQixJQUFJLElBQUk7UUFDL0IsTUFBTXdCLE9BQU94QixLQUFLeUIsS0FBSyxDQUFDO1FBQ3hCLElBQUluQyxNQUFNRTtRQUNWLElBQUlrQyxJQUFJLEdBQUcsaUVBQWlFO1FBQzVFLElBQUlDLE1BQU1ILEtBQUtJLE1BQU07UUFDckIsSUFBSUMsdUJBQXVCQztRQUMzQixJQUFJdkM7UUFDSixJQUFJd0M7UUFDSixJQUFJLE9BQU9aLHFCQUFxQixZQUFZO1lBQ3hDWSxtQkFBbUJaO1FBQ3ZCLE9BQ0s7WUFDRFksbUJBQW1CVDtRQUN2QjtRQUNBLE1BQU8sS0FBTTtZQUNUL0IsTUFBTWlDLElBQUksQ0FBQ0UsRUFBRTtZQUNiLElBQUluQyxPQUFPQSxJQUFJeUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxHQUFHO2dCQUMvQnpDLE1BQU1QLGtFQUFxQkEsQ0FBQ087WUFDaEM7WUFDQSxJQUFJOEIsNkJBQ0M5QixDQUFBQSxPQUFPLGVBQ0hBLE9BQU8sZUFBZW1DLElBQUksS0FBS0YsSUFBSSxDQUFDRSxJQUFJLEVBQUUsSUFBSSxhQUFhLEdBQUk7Z0JBQ3BFLE1BQU0sSUFBSU8sVUFBVTtZQUN4QjtZQUNBLElBQUlkLG1CQUFtQjtnQkFDbkIsSUFBSVUseUJBQXlCQyxXQUFXO29CQUNwQyxJQUFJeEMsR0FBRyxDQUFDQyxJQUFJLEtBQUt1QyxXQUFXO3dCQUN4QkQsdUJBQXVCTCxLQUFLVSxLQUFLLENBQUMsR0FBR1IsR0FBR1MsSUFBSSxDQUFDO29CQUNqRCxPQUNLLElBQUlULEtBQUtDLE1BQU0sR0FBRzt3QkFDbkJFLHVCQUF1QlgsVUFBVWxCLElBQUk7b0JBQ3pDO29CQUNBLElBQUk2Qix5QkFBeUJDLFdBQVc7d0JBQ3BDQyxpQkFBaUJiLFdBQVcsR0FBRzFCLFVBQVVxQztvQkFDN0M7Z0JBQ0o7WUFDSjtZQUNBSDtZQUNBLElBQUlVLE1BQU1DLE9BQU8sQ0FBQy9DLE1BQU07Z0JBQ3BCLElBQUlDLFFBQVEsS0FBSztvQkFDYkEsTUFBTUQsSUFBSXNDLE1BQU07Z0JBQ3BCLE9BQ0s7b0JBQ0QsSUFBSVQscUJBQXFCLENBQUNwQyxzREFBU0EsQ0FBQ1EsTUFBTTt3QkFDdEMsTUFBTSxJQUFJTCxlQUFlLDJIQUEySCxzQ0FBc0M0QixPQUFPSSxXQUFXMUI7b0JBQ2hOLE9BQ0ssSUFBSVQsc0RBQVNBLENBQUNRLE1BQU07d0JBQ3JCQSxNQUFNLENBQUMsQ0FBQ0E7b0JBQ1o7Z0JBQ0o7Z0JBQ0EsSUFBSW1DLEtBQUtDLEtBQUs7b0JBQ1YsSUFBSVIscUJBQXFCRCxVQUFVZixFQUFFLEtBQUssU0FBU1osTUFBTUQsSUFBSXNDLE1BQU0sRUFBRTt3QkFDakUsTUFBTSxJQUFJMUMsZUFBZSxvRkFBb0YsaUNBQWlDNEIsT0FBT0ksV0FBVzFCO29CQUNwSztvQkFDQSxNQUFNK0IsY0FBY2IsTUFBTSxDQUFDUSxVQUFVZixFQUFFLENBQUMsQ0FBQ21DLElBQUksQ0FBQ3BCLFdBQVc1QixLQUFLQyxLQUFLQyxXQUFXLGNBQWM7b0JBQzVGLElBQUkrQixZQUFZaEIsSUFBSSxLQUFLLE9BQU87d0JBQzVCLE1BQU0sSUFBSXJCLGVBQWUseUJBQXlCLHlCQUF5QjRCLE9BQU9JLFdBQVcxQjtvQkFDakc7b0JBQ0EsT0FBTytCO2dCQUNYO1lBQ0osT0FDSztnQkFDRCxJQUFJRyxLQUFLQyxLQUFLO29CQUNWLE1BQU1KLGNBQWNuQyxNQUFNLENBQUM4QixVQUFVZixFQUFFLENBQUMsQ0FBQ21DLElBQUksQ0FBQ3BCLFdBQVc1QixLQUFLQyxLQUFLQyxXQUFXLGNBQWM7b0JBQzVGLElBQUkrQixZQUFZaEIsSUFBSSxLQUFLLE9BQU87d0JBQzVCLE1BQU0sSUFBSXJCLGVBQWUseUJBQXlCLHlCQUF5QjRCLE9BQU9JLFdBQVcxQjtvQkFDakc7b0JBQ0EsT0FBTytCO2dCQUNYO1lBQ0o7WUFDQWpDLE1BQU1BLEdBQUcsQ0FBQ0MsSUFBSTtZQUNkLGdGQUFnRjtZQUNoRix5RUFBeUU7WUFDekUsSUFBSTRCLHFCQUFxQk8sSUFBSUMsT0FBUSxFQUFDckMsT0FBTyxPQUFPQSxRQUFRLFFBQU8sR0FBSTtnQkFDbkUsTUFBTSxJQUFJSixlQUFlLGdEQUFnRCwrQkFBK0I0QixPQUFPSSxXQUFXMUI7WUFDOUg7UUFDSjtJQUNKO0FBQ0o7QUFDQTs7Ozs7Ozs7Ozs7OztDQWFDLEdBQ00sU0FBUytDLFdBQVcvQyxRQUFRLEVBQUVnRCxLQUFLLEVBQUVyQixpQkFBaUIsRUFBRUMsaUJBQWlCLElBQUksRUFBRUMsNEJBQTRCLElBQUk7SUFDbEgsSUFBSUYsbUJBQW1CO1FBQ25CLElBQUksQ0FBQ2lCLE1BQU1DLE9BQU8sQ0FBQ0csUUFBUTtZQUN2QixNQUFNLElBQUl0RCxlQUFlLG1DQUFtQztRQUNoRTtJQUNKO0lBQ0EsSUFBSSxDQUFDa0MsZ0JBQWdCO1FBQ2pCNUIsV0FBV1YsdURBQVVBLENBQUNVO0lBQzFCO0lBQ0EsTUFBTWlELFVBQVUsSUFBSUwsTUFBTUksTUFBTVosTUFBTTtJQUN0QyxJQUFLLElBQUloQixJQUFJLEdBQUdnQixTQUFTWSxNQUFNWixNQUFNLEVBQUVoQixJQUFJZ0IsUUFBUWhCLElBQUs7UUFDcEQsa0lBQWtJO1FBQ2xJNkIsT0FBTyxDQUFDN0IsRUFBRSxHQUFHVixlQUFlVixVQUFVZ0QsS0FBSyxDQUFDNUIsRUFBRSxFQUFFTyxtQkFBbUIsTUFBTUUsMkJBQTJCVDtRQUNwR3BCLFdBQVdpRCxPQUFPLENBQUM3QixFQUFFLENBQUNsQixXQUFXLEVBQUUsNEJBQTRCO0lBQ25FO0lBQ0ErQyxRQUFRL0MsV0FBVyxHQUFHRjtJQUN0QixPQUFPaUQ7QUFDWDtBQUNBOzs7Ozs7OztDQVFDLEdBQ00sU0FBU0MsYUFBYWxELFFBQVEsRUFBRTBCLFNBQVMsRUFBRUosS0FBSztJQUNuRCxNQUFNNkIsa0JBQWtCekMsZUFBZVYsVUFBVTBCO0lBQ2pELElBQUl5QixnQkFBZ0JwQyxJQUFJLEtBQUssT0FBTztRQUNoQyxjQUFjO1FBQ2QsTUFBTSxJQUFJckIsZUFBZSx5QkFBeUIseUJBQXlCNEIsT0FBT0ksV0FBVzFCO0lBQ2pHO0lBQ0EsT0FBT21ELGdCQUFnQmpELFdBQVc7QUFDdEM7QUFDQTs7Ozs7O0NBTUMsR0FDTSxTQUFTNEIsVUFBVUosU0FBUyxFQUFFSixLQUFLLEVBQUV0QixRQUFRLEVBQUVxQyxvQkFBb0I7SUFDdEUsSUFBSSxPQUFPWCxjQUFjLFlBQ3JCQSxjQUFjLFFBQ2RrQixNQUFNQyxPQUFPLENBQUNuQixZQUFZO1FBQzFCLE1BQU0sSUFBSWhDLGVBQWUsOEJBQThCLDJCQUEyQjRCLE9BQU9JLFdBQVcxQjtJQUN4RyxPQUNLLElBQUksQ0FBQ0osTUFBTSxDQUFDOEIsVUFBVWYsRUFBRSxDQUFDLEVBQUU7UUFDNUIsTUFBTSxJQUFJakIsZUFBZSx3RUFBd0Usd0JBQXdCNEIsT0FBT0ksV0FBVzFCO0lBQy9JLE9BQ0ssSUFBSSxPQUFPMEIsVUFBVWxCLElBQUksS0FBSyxVQUFVO1FBQ3pDLE1BQU0sSUFBSWQsZUFBZSw2Q0FBNkMsMEJBQTBCNEIsT0FBT0ksV0FBVzFCO0lBQ3RILE9BQ0ssSUFBSTBCLFVBQVVsQixJQUFJLENBQUNnQyxPQUFPLENBQUMsU0FBUyxLQUFLZCxVQUFVbEIsSUFBSSxDQUFDNEIsTUFBTSxHQUFHLEdBQUc7UUFDckUsdURBQXVEO1FBQ3ZELE1BQU0sSUFBSTFDLGVBQWUsaURBQWlELDBCQUEwQjRCLE9BQU9JLFdBQVcxQjtJQUMxSCxPQUNLLElBQUksQ0FBQzBCLFVBQVVmLEVBQUUsS0FBSyxVQUFVZSxVQUFVZixFQUFFLEtBQUssTUFBSyxLQUN2RCxPQUFPZSxVQUFVZCxJQUFJLEtBQUssVUFBVTtRQUNwQyxNQUFNLElBQUlsQixlQUFlLHlGQUF5RiwyQkFBMkI0QixPQUFPSSxXQUFXMUI7SUFDbkssT0FDSyxJQUFJLENBQUMwQixVQUFVZixFQUFFLEtBQUssU0FDdkJlLFVBQVVmLEVBQUUsS0FBSyxhQUNqQmUsVUFBVWYsRUFBRSxLQUFLLE1BQUssS0FDdEJlLFVBQVV6QixLQUFLLEtBQUtxQyxXQUFXO1FBQy9CLE1BQU0sSUFBSTVDLGVBQWUsb0dBQW9HLDRCQUE0QjRCLE9BQU9JLFdBQVcxQjtJQUMvSyxPQUNLLElBQUksQ0FBQzBCLFVBQVVmLEVBQUUsS0FBSyxTQUN2QmUsVUFBVWYsRUFBRSxLQUFLLGFBQ2pCZSxVQUFVZixFQUFFLEtBQUssTUFBSyxLQUN0QmxCLHlEQUFZQSxDQUFDaUMsVUFBVXpCLEtBQUssR0FBRztRQUMvQixNQUFNLElBQUlQLGVBQWUsb0dBQW9HLDRDQUE0QzRCLE9BQU9JLFdBQVcxQjtJQUMvTCxPQUNLLElBQUlBLFVBQVU7UUFDZixJQUFJMEIsVUFBVWYsRUFBRSxJQUFJLE9BQU87WUFDdkIsSUFBSXlDLFVBQVUxQixVQUFVbEIsSUFBSSxDQUFDeUIsS0FBSyxDQUFDLEtBQUtHLE1BQU07WUFDOUMsSUFBSWlCLGtCQUFrQmhCLHFCQUFxQkosS0FBSyxDQUFDLEtBQUtHLE1BQU07WUFDNUQsSUFBSWdCLFlBQVlDLGtCQUFrQixLQUFLRCxZQUFZQyxpQkFBaUI7Z0JBQ2hFLE1BQU0sSUFBSTNELGVBQWUseURBQXlELDZCQUE2QjRCLE9BQU9JLFdBQVcxQjtZQUNySTtRQUNKLE9BQ0ssSUFBSTBCLFVBQVVmLEVBQUUsS0FBSyxhQUN0QmUsVUFBVWYsRUFBRSxLQUFLLFlBQ2pCZSxVQUFVZixFQUFFLEtBQUssUUFBUTtZQUN6QixJQUFJZSxVQUFVbEIsSUFBSSxLQUFLNkIsc0JBQXNCO2dCQUN6QyxNQUFNLElBQUkzQyxlQUFlLDhEQUE4RCwrQkFBK0I0QixPQUFPSSxXQUFXMUI7WUFDNUk7UUFDSixPQUNLLElBQUkwQixVQUFVZixFQUFFLEtBQUssVUFBVWUsVUFBVWYsRUFBRSxLQUFLLFFBQVE7WUFDekQsSUFBSTJDLGdCQUFnQjtnQkFDaEIzQyxJQUFJO2dCQUNKSCxNQUFNa0IsVUFBVWQsSUFBSTtnQkFDcEJYLE9BQU9xQztZQUNYO1lBQ0EsSUFBSWlCLFFBQVFDLFNBQVM7Z0JBQUNGO2FBQWMsRUFBRXREO1lBQ3RDLElBQUl1RCxTQUFTQSxNQUFNRSxJQUFJLEtBQUssK0JBQStCO2dCQUN2RCxNQUFNLElBQUkvRCxlQUFlLGdFQUFnRSwrQkFBK0I0QixPQUFPSSxXQUFXMUI7WUFDOUk7UUFDSjtJQUNKO0FBQ0o7QUFDQTs7Ozs7O0NBTUMsR0FDTSxTQUFTd0QsU0FBU0UsUUFBUSxFQUFFMUQsUUFBUSxFQUFFMkQsaUJBQWlCO0lBQzFELElBQUk7UUFDQSxJQUFJLENBQUNmLE1BQU1DLE9BQU8sQ0FBQ2EsV0FBVztZQUMxQixNQUFNLElBQUloRSxlQUFlLG1DQUFtQztRQUNoRTtRQUNBLElBQUlNLFVBQVU7WUFDViwyRUFBMkU7WUFDM0UrQyxXQUFXekQsdURBQVVBLENBQUNVLFdBQVdWLHVEQUFVQSxDQUFDb0UsV0FBV0MscUJBQXFCO1FBQ2hGLE9BQ0s7WUFDREEsb0JBQW9CQSxxQkFBcUI3QjtZQUN6QyxJQUFLLElBQUlWLElBQUksR0FBR0EsSUFBSXNDLFNBQVN0QixNQUFNLEVBQUVoQixJQUFLO2dCQUN0Q3VDLGtCQUFrQkQsUUFBUSxDQUFDdEMsRUFBRSxFQUFFQSxHQUFHcEIsVUFBVXNDO1lBQ2hEO1FBQ0o7SUFDSixFQUNBLE9BQU9zQixHQUFHO1FBQ04sSUFBSUEsYUFBYWxFLGdCQUFnQjtZQUM3QixPQUFPa0U7UUFDWCxPQUNLO1lBQ0QsTUFBTUE7UUFDVjtJQUNKO0FBQ0o7QUFDQSwwREFBMEQ7QUFDMUQsY0FBYztBQUNkLHVDQUF1QztBQUN2QywrRUFBK0U7QUFDL0UsZ0ZBQWdGO0FBQ2hGLCtFQUErRTtBQUMvRSw0RUFBNEU7QUFDNUUsd0VBQXdFO0FBQ3hFLDJEQUEyRDtBQUMzRCxpRkFBaUY7QUFDakYsa0RBQWtEO0FBQ2xELDZFQUE2RTtBQUM3RSwyRUFBMkU7QUFDM0UsOEVBQThFO0FBQzlFLHlFQUF5RTtBQUN6RSxnRkFBZ0Y7QUFDaEYsZ0ZBQWdGO0FBQ2hGLFlBQVk7QUFDTCxTQUFTNUMsV0FBVzZDLENBQUMsRUFBRUMsQ0FBQztJQUMzQixJQUFJRCxNQUFNQyxHQUNOLE9BQU87SUFDWCxJQUFJRCxLQUFLQyxLQUFLLE9BQU9ELEtBQUssWUFBWSxPQUFPQyxLQUFLLFVBQVU7UUFDeEQsSUFBSUMsT0FBT25CLE1BQU1DLE9BQU8sQ0FBQ2dCLElBQUlHLE9BQU9wQixNQUFNQyxPQUFPLENBQUNpQixJQUFJMUMsR0FBR2dCLFFBQVFyQztRQUNqRSxJQUFJZ0UsUUFBUUMsTUFBTTtZQUNkNUIsU0FBU3lCLEVBQUV6QixNQUFNO1lBQ2pCLElBQUlBLFVBQVUwQixFQUFFMUIsTUFBTSxFQUNsQixPQUFPO1lBQ1gsSUFBS2hCLElBQUlnQixRQUFRaEIsUUFBUSxHQUNyQixJQUFJLENBQUNKLFdBQVc2QyxDQUFDLENBQUN6QyxFQUFFLEVBQUUwQyxDQUFDLENBQUMxQyxFQUFFLEdBQ3RCLE9BQU87WUFDZixPQUFPO1FBQ1g7UUFDQSxJQUFJMkMsUUFBUUMsTUFDUixPQUFPO1FBQ1gsSUFBSWhDLE9BQU9pQyxPQUFPakMsSUFBSSxDQUFDNkI7UUFDdkJ6QixTQUFTSixLQUFLSSxNQUFNO1FBQ3BCLElBQUlBLFdBQVc2QixPQUFPakMsSUFBSSxDQUFDOEIsR0FBRzFCLE1BQU0sRUFDaEMsT0FBTztRQUNYLElBQUtoQixJQUFJZ0IsUUFBUWhCLFFBQVEsR0FDckIsSUFBSSxDQUFDMEMsRUFBRUksY0FBYyxDQUFDbEMsSUFBSSxDQUFDWixFQUFFLEdBQ3pCLE9BQU87UUFDZixJQUFLQSxJQUFJZ0IsUUFBUWhCLFFBQVEsR0FBSTtZQUN6QnJCLE1BQU1pQyxJQUFJLENBQUNaLEVBQUU7WUFDYixJQUFJLENBQUNKLFdBQVc2QyxDQUFDLENBQUM5RCxJQUFJLEVBQUUrRCxDQUFDLENBQUMvRCxJQUFJLEdBQzFCLE9BQU87UUFDZjtRQUNBLE9BQU87SUFDWDtJQUNBLE9BQU84RCxNQUFNQSxLQUFLQyxNQUFNQTtBQUM1QiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLWZvcm0tYnVpbGRlci10dXRvcmlhbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9mYXN0LWpzb24tcGF0Y2gvc3JjL2NvcmUuanM/ZGY5OCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAdHMtbm9jaGVja1xuaW1wb3J0IHsgUGF0Y2hFcnJvciwgX2RlZXBDbG9uZSwgaXNJbnRlZ2VyLCB1bmVzY2FwZVBhdGhDb21wb25lbnQsIGhhc1VuZGVmaW5lZCwgfSBmcm9tIFwiLi9oZWxwZXJzLmpzXCI7XG5leHBvcnQgY29uc3QgSnNvblBhdGNoRXJyb3IgPSBQYXRjaEVycm9yO1xuZXhwb3J0IGNvbnN0IGRlZXBDbG9uZSA9IF9kZWVwQ2xvbmU7XG4vKiBXZSB1c2UgYSBKYXZhc2NyaXB0IGhhc2ggdG8gc3RvcmUgZWFjaFxuIGZ1bmN0aW9uLiBFYWNoIGhhc2ggZW50cnkgKHByb3BlcnR5KSB1c2VzXG4gdGhlIG9wZXJhdGlvbiBpZGVudGlmaWVycyBzcGVjaWZpZWQgaW4gcmZjNjkwMi5cbiBJbiB0aGlzIHdheSwgd2UgY2FuIG1hcCBlYWNoIHBhdGNoIG9wZXJhdGlvblxuIHRvIGl0cyBkZWRpY2F0ZWQgZnVuY3Rpb24gaW4gZWZmaWNpZW50IHdheS5cbiAqL1xuLyogVGhlIG9wZXJhdGlvbnMgYXBwbGljYWJsZSB0byBhbiBvYmplY3QgKi9cbmNvbnN0IG9iak9wcyA9IHtcbiAgICBhZGQ6IGZ1bmN0aW9uIChvYmosIGtleSwgZG9jdW1lbnQpIHtcbiAgICAgICAgb2JqW2tleV0gPSB0aGlzLnZhbHVlO1xuICAgICAgICByZXR1cm4geyBuZXdEb2N1bWVudDogZG9jdW1lbnQgfTtcbiAgICB9LFxuICAgIHJlbW92ZTogZnVuY3Rpb24gKG9iaiwga2V5LCBkb2N1bWVudCkge1xuICAgICAgICB2YXIgcmVtb3ZlZCA9IG9ialtrZXldO1xuICAgICAgICBkZWxldGUgb2JqW2tleV07XG4gICAgICAgIHJldHVybiB7IG5ld0RvY3VtZW50OiBkb2N1bWVudCwgcmVtb3ZlZCB9O1xuICAgIH0sXG4gICAgcmVwbGFjZTogZnVuY3Rpb24gKG9iaiwga2V5LCBkb2N1bWVudCkge1xuICAgICAgICB2YXIgcmVtb3ZlZCA9IG9ialtrZXldO1xuICAgICAgICBvYmpba2V5XSA9IHRoaXMudmFsdWU7XG4gICAgICAgIHJldHVybiB7IG5ld0RvY3VtZW50OiBkb2N1bWVudCwgcmVtb3ZlZCB9O1xuICAgIH0sXG4gICAgbW92ZTogZnVuY3Rpb24gKG9iaiwga2V5LCBkb2N1bWVudCkge1xuICAgICAgICAvKiBpbiBjYXNlIG1vdmUgdGFyZ2V0IG92ZXJ3cml0ZXMgYW4gZXhpc3RpbmcgdmFsdWUsXG4gICAgICAgIHJldHVybiB0aGUgcmVtb3ZlZCB2YWx1ZSwgdGhpcyBjYW4gYmUgdGF4aW5nIHBlcmZvcm1hbmNlLXdpc2UsXG4gICAgICAgIGFuZCBpcyBwb3RlbnRpYWxseSB1bm5lZWRlZCAqL1xuICAgICAgICBsZXQgcmVtb3ZlZCA9IGdldFZhbHVlQnlQb2ludGVyKGRvY3VtZW50LCB0aGlzLnBhdGgpO1xuICAgICAgICBpZiAocmVtb3ZlZCkge1xuICAgICAgICAgICAgcmVtb3ZlZCA9IF9kZWVwQ2xvbmUocmVtb3ZlZCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3JpZ2luYWxWYWx1ZSA9IGFwcGx5T3BlcmF0aW9uKGRvY3VtZW50LCB7XG4gICAgICAgICAgICBvcDogXCJyZW1vdmVcIixcbiAgICAgICAgICAgIHBhdGg6IHRoaXMuZnJvbSxcbiAgICAgICAgfSkucmVtb3ZlZDtcbiAgICAgICAgYXBwbHlPcGVyYXRpb24oZG9jdW1lbnQsIHtcbiAgICAgICAgICAgIG9wOiBcImFkZFwiLFxuICAgICAgICAgICAgcGF0aDogdGhpcy5wYXRoLFxuICAgICAgICAgICAgdmFsdWU6IG9yaWdpbmFsVmFsdWUsXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4geyBuZXdEb2N1bWVudDogZG9jdW1lbnQsIHJlbW92ZWQgfTtcbiAgICB9LFxuICAgIGNvcHk6IGZ1bmN0aW9uIChvYmosIGtleSwgZG9jdW1lbnQpIHtcbiAgICAgICAgY29uc3QgdmFsdWVUb0NvcHkgPSBnZXRWYWx1ZUJ5UG9pbnRlcihkb2N1bWVudCwgdGhpcy5mcm9tKTtcbiAgICAgICAgLy8gZW5mb3JjZSBjb3B5IGJ5IHZhbHVlIHNvIGZ1cnRoZXIgb3BlcmF0aW9ucyBkb24ndCBhZmZlY3Qgc291cmNlIChzZWUgaXNzdWUgIzE3NylcbiAgICAgICAgYXBwbHlPcGVyYXRpb24oZG9jdW1lbnQsIHtcbiAgICAgICAgICAgIG9wOiBcImFkZFwiLFxuICAgICAgICAgICAgcGF0aDogdGhpcy5wYXRoLFxuICAgICAgICAgICAgdmFsdWU6IF9kZWVwQ2xvbmUodmFsdWVUb0NvcHkpLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHsgbmV3RG9jdW1lbnQ6IGRvY3VtZW50IH07XG4gICAgfSxcbiAgICB0ZXN0OiBmdW5jdGlvbiAob2JqLCBrZXksIGRvY3VtZW50KSB7XG4gICAgICAgIHJldHVybiB7IG5ld0RvY3VtZW50OiBkb2N1bWVudCwgdGVzdDogX2FyZUVxdWFscyhvYmpba2V5XSwgdGhpcy52YWx1ZSkgfTtcbiAgICB9LFxuICAgIF9nZXQ6IGZ1bmN0aW9uIChvYmosIGtleSwgZG9jdW1lbnQpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IG9ialtrZXldO1xuICAgICAgICByZXR1cm4geyBuZXdEb2N1bWVudDogZG9jdW1lbnQgfTtcbiAgICB9LFxufTtcbi8qIFRoZSBvcGVyYXRpb25zIGFwcGxpY2FibGUgdG8gYW4gYXJyYXkuIE1hbnkgYXJlIHRoZSBzYW1lIGFzIGZvciB0aGUgb2JqZWN0ICovXG52YXIgYXJyT3BzID0ge1xuICAgIGFkZDogZnVuY3Rpb24gKGFyciwgaSwgZG9jdW1lbnQpIHtcbiAgICAgICAgaWYgKGlzSW50ZWdlcihpKSkge1xuICAgICAgICAgICAgYXJyLnNwbGljZShpLCAwLCB0aGlzLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGFycmF5IHByb3BzXG4gICAgICAgICAgICBhcnJbaV0gPSB0aGlzLnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIHRoaXMgbWF5IGJlIG5lZWRlZCB3aGVuIHVzaW5nICctJyBpbiBhbiBhcnJheVxuICAgICAgICByZXR1cm4geyBuZXdEb2N1bWVudDogZG9jdW1lbnQsIGluZGV4OiBpIH07XG4gICAgfSxcbiAgICByZW1vdmU6IGZ1bmN0aW9uIChhcnIsIGksIGRvY3VtZW50KSB7XG4gICAgICAgIHZhciByZW1vdmVkTGlzdCA9IGFyci5zcGxpY2UoaSwgMSk7XG4gICAgICAgIHJldHVybiB7IG5ld0RvY3VtZW50OiBkb2N1bWVudCwgcmVtb3ZlZDogcmVtb3ZlZExpc3RbMF0gfTtcbiAgICB9LFxuICAgIHJlcGxhY2U6IGZ1bmN0aW9uIChhcnIsIGksIGRvY3VtZW50KSB7XG4gICAgICAgIHZhciByZW1vdmVkID0gYXJyW2ldO1xuICAgICAgICBhcnJbaV0gPSB0aGlzLnZhbHVlO1xuICAgICAgICByZXR1cm4geyBuZXdEb2N1bWVudDogZG9jdW1lbnQsIHJlbW92ZWQgfTtcbiAgICB9LFxuICAgIG1vdmU6IG9iak9wcy5tb3ZlLFxuICAgIGNvcHk6IG9iak9wcy5jb3B5LFxuICAgIHRlc3Q6IG9iak9wcy50ZXN0LFxuICAgIF9nZXQ6IG9iak9wcy5fZ2V0LFxufTtcbi8qKlxuICogUmV0cmlldmVzIGEgdmFsdWUgZnJvbSBhIEpTT04gZG9jdW1lbnQgYnkgYSBKU09OIHBvaW50ZXIuXG4gKiBSZXR1cm5zIHRoZSB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0gZG9jdW1lbnQgVGhlIGRvY3VtZW50IHRvIGdldCB0aGUgdmFsdWUgZnJvbVxuICogQHBhcmFtIHBvaW50ZXIgYW4gZXNjYXBlZCBKU09OIHBvaW50ZXJcbiAqIEByZXR1cm4gVGhlIHJldHJpZXZlZCB2YWx1ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VmFsdWVCeVBvaW50ZXIoZG9jdW1lbnQsIHBvaW50ZXIpIHtcbiAgICBpZiAocG9pbnRlciA9PSBcIlwiKSB7XG4gICAgICAgIHJldHVybiBkb2N1bWVudDtcbiAgICB9XG4gICAgdmFyIGdldE9yaWdpbmFsRGVzdGluYXRpb24gPSB7IG9wOiBcIl9nZXRcIiwgcGF0aDogcG9pbnRlciB9O1xuICAgIGFwcGx5T3BlcmF0aW9uKGRvY3VtZW50LCBnZXRPcmlnaW5hbERlc3RpbmF0aW9uKTtcbiAgICByZXR1cm4gZ2V0T3JpZ2luYWxEZXN0aW5hdGlvbi52YWx1ZTtcbn1cbi8qKlxuICogQXBwbHkgYSBzaW5nbGUgSlNPTiBQYXRjaCBPcGVyYXRpb24gb24gYSBKU09OIGRvY3VtZW50LlxuICogUmV0dXJucyB0aGUge25ld0RvY3VtZW50LCByZXN1bHR9IG9mIHRoZSBvcGVyYXRpb24uXG4gKiBJdCBtb2RpZmllcyB0aGUgYGRvY3VtZW50YCBhbmQgYG9wZXJhdGlvbmAgb2JqZWN0cyAtIGl0IGdldHMgdGhlIHZhbHVlcyBieSByZWZlcmVuY2UuXG4gKiBJZiB5b3Ugd291bGQgbGlrZSB0byBhdm9pZCB0b3VjaGluZyB5b3VyIHZhbHVlcywgY2xvbmUgdGhlbTpcbiAqIGBqc29ucGF0Y2guYXBwbHlPcGVyYXRpb24oZG9jdW1lbnQsIGpzb25wYXRjaC5fZGVlcENsb25lKG9wZXJhdGlvbikpYC5cbiAqXG4gKiBAcGFyYW0gZG9jdW1lbnQgVGhlIGRvY3VtZW50IHRvIHBhdGNoXG4gKiBAcGFyYW0gb3BlcmF0aW9uIFRoZSBvcGVyYXRpb24gdG8gYXBwbHlcbiAqIEBwYXJhbSB2YWxpZGF0ZU9wZXJhdGlvbiBgZmFsc2VgIGlzIHdpdGhvdXQgdmFsaWRhdGlvbiwgYHRydWVgIHRvIHVzZSBkZWZhdWx0IGpzb25wYXRjaCdzIHZhbGlkYXRpb24sIG9yIHlvdSBjYW4gcGFzcyBhIGB2YWxpZGF0ZU9wZXJhdGlvbmAgY2FsbGJhY2sgdG8gYmUgdXNlZCBmb3IgdmFsaWRhdGlvbi5cbiAqIEBwYXJhbSBtdXRhdGVEb2N1bWVudCBXaGV0aGVyIHRvIG11dGF0ZSB0aGUgb3JpZ2luYWwgZG9jdW1lbnQgb3IgY2xvbmUgaXQgYmVmb3JlIGFwcGx5aW5nXG4gKiBAcGFyYW0gYmFuUHJvdG90eXBlTW9kaWZpY2F0aW9ucyBXaGV0aGVyIHRvIGJhbiBtb2RpZmljYXRpb25zIHRvIGBfX3Byb3RvX19gLCBkZWZhdWx0cyB0byBgdHJ1ZWAuXG4gKiBAcmV0dXJuIGB7bmV3RG9jdW1lbnQsIHJlc3VsdH1gIGFmdGVyIHRoZSBvcGVyYXRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5T3BlcmF0aW9uKGRvY3VtZW50LCBvcGVyYXRpb24sIHZhbGlkYXRlT3BlcmF0aW9uID0gZmFsc2UsIG11dGF0ZURvY3VtZW50ID0gdHJ1ZSwgYmFuUHJvdG90eXBlTW9kaWZpY2F0aW9ucyA9IHRydWUsIGluZGV4ID0gMCkge1xuICAgIGlmICh2YWxpZGF0ZU9wZXJhdGlvbikge1xuICAgICAgICBpZiAodHlwZW9mIHZhbGlkYXRlT3BlcmF0aW9uID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdmFsaWRhdGVPcGVyYXRpb24ob3BlcmF0aW9uLCAwLCBkb2N1bWVudCwgb3BlcmF0aW9uLnBhdGgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFsaWRhdG9yKG9wZXJhdGlvbiwgMCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyogUk9PVCBPUEVSQVRJT05TICovXG4gICAgaWYgKG9wZXJhdGlvbi5wYXRoID09PSBcIlwiKSB7XG4gICAgICAgIGxldCByZXR1cm5WYWx1ZSA9IHsgbmV3RG9jdW1lbnQ6IGRvY3VtZW50IH07XG4gICAgICAgIGlmIChvcGVyYXRpb24ub3AgPT09IFwiYWRkXCIpIHtcbiAgICAgICAgICAgIHJldHVyblZhbHVlLm5ld0RvY3VtZW50ID0gb3BlcmF0aW9uLnZhbHVlO1xuICAgICAgICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wZXJhdGlvbi5vcCA9PT0gXCJyZXBsYWNlXCIpIHtcbiAgICAgICAgICAgIHJldHVyblZhbHVlLm5ld0RvY3VtZW50ID0gb3BlcmF0aW9uLnZhbHVlO1xuICAgICAgICAgICAgcmV0dXJuVmFsdWUucmVtb3ZlZCA9IGRvY3VtZW50OyAvL2RvY3VtZW50IHdlIHJlbW92ZWRcbiAgICAgICAgICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcGVyYXRpb24ub3AgPT09IFwibW92ZVwiIHx8IG9wZXJhdGlvbi5vcCA9PT0gXCJjb3B5XCIpIHtcbiAgICAgICAgICAgIC8vIGl0J3MgYSBtb3ZlIG9yIGNvcHkgdG8gcm9vdFxuICAgICAgICAgICAgcmV0dXJuVmFsdWUubmV3RG9jdW1lbnQgPSBnZXRWYWx1ZUJ5UG9pbnRlcihkb2N1bWVudCwgb3BlcmF0aW9uLmZyb20pOyAvLyBnZXQgdGhlIHZhbHVlIGJ5IGpzb24tcG9pbnRlciBpbiBgZnJvbWAgZmllbGRcbiAgICAgICAgICAgIGlmIChvcGVyYXRpb24ub3AgPT09IFwibW92ZVwiKSB7XG4gICAgICAgICAgICAgICAgLy8gcmVwb3J0IHJlbW92ZWQgaXRlbVxuICAgICAgICAgICAgICAgIHJldHVyblZhbHVlLnJlbW92ZWQgPSBkb2N1bWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChvcGVyYXRpb24ub3AgPT09IFwidGVzdFwiKSB7XG4gICAgICAgICAgICByZXR1cm5WYWx1ZS50ZXN0ID0gX2FyZUVxdWFscyhkb2N1bWVudCwgb3BlcmF0aW9uLnZhbHVlKTtcbiAgICAgICAgICAgIGlmIChyZXR1cm5WYWx1ZS50ZXN0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIlRlc3Qgb3BlcmF0aW9uIGZhaWxlZFwiLCBcIlRFU1RfT1BFUkFUSU9OX0ZBSUxFRFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm5WYWx1ZS5uZXdEb2N1bWVudCA9IGRvY3VtZW50O1xuICAgICAgICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wZXJhdGlvbi5vcCA9PT0gXCJyZW1vdmVcIikge1xuICAgICAgICAgICAgLy8gYSByZW1vdmUgb24gcm9vdFxuICAgICAgICAgICAgcmV0dXJuVmFsdWUucmVtb3ZlZCA9IGRvY3VtZW50O1xuICAgICAgICAgICAgcmV0dXJuVmFsdWUubmV3RG9jdW1lbnQgPSBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wZXJhdGlvbi5vcCA9PT0gXCJfZ2V0XCIpIHtcbiAgICAgICAgICAgIG9wZXJhdGlvbi52YWx1ZSA9IGRvY3VtZW50O1xuICAgICAgICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLyogYmFkIG9wZXJhdGlvbiAqL1xuICAgICAgICAgICAgaWYgKHZhbGlkYXRlT3BlcmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiT3BlcmF0aW9uIGBvcGAgcHJvcGVydHkgaXMgbm90IG9uZSBvZiBvcGVyYXRpb25zIGRlZmluZWQgaW4gUkZDLTY5MDJcIiwgXCJPUEVSQVRJT05fT1BfSU5WQUxJRFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmV0dXJuVmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9IC8qIEVORCBST09UIE9QRVJBVElPTlMgKi9cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKCFtdXRhdGVEb2N1bWVudCkge1xuICAgICAgICAgICAgZG9jdW1lbnQgPSBfZGVlcENsb25lKGRvY3VtZW50KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwYXRoID0gb3BlcmF0aW9uLnBhdGggfHwgXCJcIjtcbiAgICAgICAgY29uc3Qga2V5cyA9IHBhdGguc3BsaXQoXCIvXCIpO1xuICAgICAgICBsZXQgb2JqID0gZG9jdW1lbnQ7XG4gICAgICAgIGxldCB0ID0gMTsgLy9za2lwIGVtcHR5IGVsZW1lbnQgLSBodHRwOi8vanNwZXJmLmNvbS90by1zaGlmdC1vci1ub3QtdG8tc2hpZnRcbiAgICAgICAgbGV0IGxlbiA9IGtleXMubGVuZ3RoO1xuICAgICAgICBsZXQgZXhpc3RpbmdQYXRoRnJhZ21lbnQgPSB1bmRlZmluZWQ7XG4gICAgICAgIGxldCBrZXk7XG4gICAgICAgIGxldCB2YWxpZGF0ZUZ1bmN0aW9uO1xuICAgICAgICBpZiAodHlwZW9mIHZhbGlkYXRlT3BlcmF0aW9uID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdmFsaWRhdGVGdW5jdGlvbiA9IHZhbGlkYXRlT3BlcmF0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFsaWRhdGVGdW5jdGlvbiA9IHZhbGlkYXRvcjtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAga2V5ID0ga2V5c1t0XTtcbiAgICAgICAgICAgIGlmIChrZXkgJiYga2V5LmluZGV4T2YoXCJ+XCIpICE9IC0xKSB7XG4gICAgICAgICAgICAgICAga2V5ID0gdW5lc2NhcGVQYXRoQ29tcG9uZW50KGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYmFuUHJvdG90eXBlTW9kaWZpY2F0aW9ucyAmJlxuICAgICAgICAgICAgICAgIChrZXkgPT0gXCJfX3Byb3RvX19cIiB8fFxuICAgICAgICAgICAgICAgICAgICAoa2V5ID09IFwicHJvdG90eXBlXCIgJiYgdCA+IDAgJiYga2V5c1t0IC0gMV0gPT0gXCJjb25zdHJ1Y3RvclwiKSkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSlNPTi1QYXRjaDogbW9kaWZ5aW5nIGBfX3Byb3RvX19gIG9yIGBjb25zdHJ1Y3Rvci9wcm90b3R5cGVgIHByb3AgaXMgYmFubmVkIGZvciBzZWN1cml0eSByZWFzb25zLCBpZiB0aGlzIHdhcyBvbiBwdXJwb3NlLCBwbGVhc2Ugc2V0IGBiYW5Qcm90b3R5cGVNb2RpZmljYXRpb25zYCBmbGFnIGZhbHNlIGFuZCBwYXNzIGl0IHRvIHRoaXMgZnVuY3Rpb24uIE1vcmUgaW5mbyBpbiBmYXN0LWpzb24tcGF0Y2ggUkVBRE1FXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZhbGlkYXRlT3BlcmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nUGF0aEZyYWdtZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9ialtrZXldID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nUGF0aEZyYWdtZW50ID0ga2V5cy5zbGljZSgwLCB0KS5qb2luKFwiL1wiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0ID09IGxlbiAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nUGF0aEZyYWdtZW50ID0gb3BlcmF0aW9uLnBhdGg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nUGF0aEZyYWdtZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkYXRlRnVuY3Rpb24ob3BlcmF0aW9uLCAwLCBkb2N1bWVudCwgZXhpc3RpbmdQYXRoRnJhZ21lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdCsrO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgICAgICAgICAgICAgIGlmIChrZXkgPT09IFwiLVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGtleSA9IG9iai5sZW5ndGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsaWRhdGVPcGVyYXRpb24gJiYgIWlzSW50ZWdlcihrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJFeHBlY3RlZCBhbiB1bnNpZ25lZCBiYXNlLTEwIGludGVnZXIgdmFsdWUsIG1ha2luZyB0aGUgbmV3IHJlZmVyZW5jZWQgdmFsdWUgdGhlIGFycmF5IGVsZW1lbnQgd2l0aCB0aGUgemVyby1iYXNlZCBpbmRleFwiLCBcIk9QRVJBVElPTl9QQVRIX0lMTEVHQUxfQVJSQVlfSU5ERVhcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9IC8vIG9ubHkgcGFyc2Uga2V5IHdoZW4gaXQncyBhbiBpbnRlZ2VyIGZvciBgYXJyLnByb3BgIHRvIHdvcmtcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNJbnRlZ2VyKGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleSA9IH5+a2V5O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0ID49IGxlbikge1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsaWRhdGVPcGVyYXRpb24gJiYgb3BlcmF0aW9uLm9wID09PSBcImFkZFwiICYmIGtleSA+IG9iai5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIlRoZSBzcGVjaWZpZWQgaW5kZXggTVVTVCBOT1QgYmUgZ3JlYXRlciB0aGFuIHRoZSBudW1iZXIgb2YgZWxlbWVudHMgaW4gdGhlIGFycmF5XCIsIFwiT1BFUkFUSU9OX1ZBTFVFX09VVF9PRl9CT1VORFNcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJldHVyblZhbHVlID0gYXJyT3BzW29wZXJhdGlvbi5vcF0uY2FsbChvcGVyYXRpb24sIG9iaiwga2V5LCBkb2N1bWVudCk7IC8vIEFwcGx5IHBhdGNoXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXR1cm5WYWx1ZS50ZXN0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiVGVzdCBvcGVyYXRpb24gZmFpbGVkXCIsIFwiVEVTVF9PUEVSQVRJT05fRkFJTEVEXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0dXJuVmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHQgPj0gbGVuKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJldHVyblZhbHVlID0gb2JqT3BzW29wZXJhdGlvbi5vcF0uY2FsbChvcGVyYXRpb24sIG9iaiwga2V5LCBkb2N1bWVudCk7IC8vIEFwcGx5IHBhdGNoXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXR1cm5WYWx1ZS50ZXN0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiVGVzdCBvcGVyYXRpb24gZmFpbGVkXCIsIFwiVEVTVF9PUEVSQVRJT05fRkFJTEVEXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmV0dXJuVmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb2JqID0gb2JqW2tleV07XG4gICAgICAgICAgICAvLyBJZiB3ZSBoYXZlIG1vcmUga2V5cyBpbiB0aGUgcGF0aCwgYnV0IHRoZSBuZXh0IHZhbHVlIGlzbid0IGEgbm9uLW51bGwgb2JqZWN0LFxuICAgICAgICAgICAgLy8gdGhyb3cgYW4gT1BFUkFUSU9OX1BBVEhfVU5SRVNPTFZBQkxFIGVycm9yIGluc3RlYWQgb2YgaXRlcmF0aW5nIGFnYWluLlxuICAgICAgICAgICAgaWYgKHZhbGlkYXRlT3BlcmF0aW9uICYmIHQgPCBsZW4gJiYgKCFvYmogfHwgdHlwZW9mIG9iaiAhPT0gXCJvYmplY3RcIikpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJDYW5ub3QgcGVyZm9ybSBvcGVyYXRpb24gYXQgdGhlIGRlc2lyZWQgcGF0aFwiLCBcIk9QRVJBVElPTl9QQVRIX1VOUkVTT0xWQUJMRVwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIEFwcGx5IGEgZnVsbCBKU09OIFBhdGNoIGFycmF5IG9uIGEgSlNPTiBkb2N1bWVudC5cbiAqIFJldHVybnMgdGhlIHtuZXdEb2N1bWVudCwgcmVzdWx0fSBvZiB0aGUgcGF0Y2guXG4gKiBJdCBtb2RpZmllcyB0aGUgYGRvY3VtZW50YCBvYmplY3QgYW5kIGBwYXRjaGAgLSBpdCBnZXRzIHRoZSB2YWx1ZXMgYnkgcmVmZXJlbmNlLlxuICogSWYgeW91IHdvdWxkIGxpa2UgdG8gYXZvaWQgdG91Y2hpbmcgeW91ciB2YWx1ZXMsIGNsb25lIHRoZW06XG4gKiBganNvbnBhdGNoLmFwcGx5UGF0Y2goZG9jdW1lbnQsIGpzb25wYXRjaC5fZGVlcENsb25lKHBhdGNoKSlgLlxuICpcbiAqIEBwYXJhbSBkb2N1bWVudCBUaGUgZG9jdW1lbnQgdG8gcGF0Y2hcbiAqIEBwYXJhbSBwYXRjaCBUaGUgcGF0Y2ggdG8gYXBwbHlcbiAqIEBwYXJhbSB2YWxpZGF0ZU9wZXJhdGlvbiBgZmFsc2VgIGlzIHdpdGhvdXQgdmFsaWRhdGlvbiwgYHRydWVgIHRvIHVzZSBkZWZhdWx0IGpzb25wYXRjaCdzIHZhbGlkYXRpb24sIG9yIHlvdSBjYW4gcGFzcyBhIGB2YWxpZGF0ZU9wZXJhdGlvbmAgY2FsbGJhY2sgdG8gYmUgdXNlZCBmb3IgdmFsaWRhdGlvbi5cbiAqIEBwYXJhbSBtdXRhdGVEb2N1bWVudCBXaGV0aGVyIHRvIG11dGF0ZSB0aGUgb3JpZ2luYWwgZG9jdW1lbnQgb3IgY2xvbmUgaXQgYmVmb3JlIGFwcGx5aW5nXG4gKiBAcGFyYW0gYmFuUHJvdG90eXBlTW9kaWZpY2F0aW9ucyBXaGV0aGVyIHRvIGJhbiBtb2RpZmljYXRpb25zIHRvIGBfX3Byb3RvX19gLCBkZWZhdWx0cyB0byBgdHJ1ZWAuXG4gKiBAcmV0dXJuIEFuIGFycmF5IG9mIGB7bmV3RG9jdW1lbnQsIHJlc3VsdH1gIGFmdGVyIHRoZSBwYXRjaFxuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlQYXRjaChkb2N1bWVudCwgcGF0Y2gsIHZhbGlkYXRlT3BlcmF0aW9uLCBtdXRhdGVEb2N1bWVudCA9IHRydWUsIGJhblByb3RvdHlwZU1vZGlmaWNhdGlvbnMgPSB0cnVlKSB7XG4gICAgaWYgKHZhbGlkYXRlT3BlcmF0aW9uKSB7XG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShwYXRjaCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIlBhdGNoIHNlcXVlbmNlIG11c3QgYmUgYW4gYXJyYXlcIiwgXCJTRVFVRU5DRV9OT1RfQU5fQVJSQVlcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFtdXRhdGVEb2N1bWVudCkge1xuICAgICAgICBkb2N1bWVudCA9IF9kZWVwQ2xvbmUoZG9jdW1lbnQpO1xuICAgIH1cbiAgICBjb25zdCByZXN1bHRzID0gbmV3IEFycmF5KHBhdGNoLmxlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbmd0aCA9IHBhdGNoLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIC8vIHdlIGRvbid0IG5lZWQgdG8gcGFzcyBtdXRhdGVEb2N1bWVudCBhcmd1bWVudCBiZWNhdXNlIGlmIGl0IHdhcyB0cnVlLCB3ZSBhbHJlYWR5IGRlZXAgY2xvbmVkIHRoZSBvYmplY3QsIHdlJ2xsIGp1c3QgcGFzcyBgdHJ1ZWBcbiAgICAgICAgcmVzdWx0c1tpXSA9IGFwcGx5T3BlcmF0aW9uKGRvY3VtZW50LCBwYXRjaFtpXSwgdmFsaWRhdGVPcGVyYXRpb24sIHRydWUsIGJhblByb3RvdHlwZU1vZGlmaWNhdGlvbnMsIGkpO1xuICAgICAgICBkb2N1bWVudCA9IHJlc3VsdHNbaV0ubmV3RG9jdW1lbnQ7IC8vIGluIGNhc2Ugcm9vdCB3YXMgcmVwbGFjZWRcbiAgICB9XG4gICAgcmVzdWx0cy5uZXdEb2N1bWVudCA9IGRvY3VtZW50O1xuICAgIHJldHVybiByZXN1bHRzO1xufVxuLyoqXG4gKiBBcHBseSBhIHNpbmdsZSBKU09OIFBhdGNoIE9wZXJhdGlvbiBvbiBhIEpTT04gZG9jdW1lbnQuXG4gKiBSZXR1cm5zIHRoZSB1cGRhdGVkIGRvY3VtZW50LlxuICogU3VpdGFibGUgYXMgYSByZWR1Y2VyLlxuICpcbiAqIEBwYXJhbSBkb2N1bWVudCBUaGUgZG9jdW1lbnQgdG8gcGF0Y2hcbiAqIEBwYXJhbSBvcGVyYXRpb24gVGhlIG9wZXJhdGlvbiB0byBhcHBseVxuICogQHJldHVybiBUaGUgdXBkYXRlZCBkb2N1bWVudFxuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlSZWR1Y2VyKGRvY3VtZW50LCBvcGVyYXRpb24sIGluZGV4KSB7XG4gICAgY29uc3Qgb3BlcmF0aW9uUmVzdWx0ID0gYXBwbHlPcGVyYXRpb24oZG9jdW1lbnQsIG9wZXJhdGlvbik7XG4gICAgaWYgKG9wZXJhdGlvblJlc3VsdC50ZXN0ID09PSBmYWxzZSkge1xuICAgICAgICAvLyBmYWlsZWQgdGVzdFxuICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJUZXN0IG9wZXJhdGlvbiBmYWlsZWRcIiwgXCJURVNUX09QRVJBVElPTl9GQUlMRURcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgIH1cbiAgICByZXR1cm4gb3BlcmF0aW9uUmVzdWx0Lm5ld0RvY3VtZW50O1xufVxuLyoqXG4gKiBWYWxpZGF0ZXMgYSBzaW5nbGUgb3BlcmF0aW9uLiBDYWxsZWQgZnJvbSBganNvbnBhdGNoLnZhbGlkYXRlYC4gVGhyb3dzIGBKc29uUGF0Y2hFcnJvcmAgaW4gY2FzZSBvZiBhbiBlcnJvci5cbiAqIEBwYXJhbSB7b2JqZWN0fSBvcGVyYXRpb24gLSBvcGVyYXRpb24gb2JqZWN0IChwYXRjaClcbiAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCAtIGluZGV4IG9mIG9wZXJhdGlvbiBpbiB0aGUgc2VxdWVuY2VcbiAqIEBwYXJhbSB7b2JqZWN0fSBbZG9jdW1lbnRdIC0gb2JqZWN0IHdoZXJlIHRoZSBvcGVyYXRpb24gaXMgc3VwcG9zZWQgdG8gYmUgYXBwbGllZFxuICogQHBhcmFtIHtzdHJpbmd9IFtleGlzdGluZ1BhdGhGcmFnbWVudF0gLSBjb21lcyBhbG9uZyB3aXRoIGBkb2N1bWVudGBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRvcihvcGVyYXRpb24sIGluZGV4LCBkb2N1bWVudCwgZXhpc3RpbmdQYXRoRnJhZ21lbnQpIHtcbiAgICBpZiAodHlwZW9mIG9wZXJhdGlvbiAhPT0gXCJvYmplY3RcIiB8fFxuICAgICAgICBvcGVyYXRpb24gPT09IG51bGwgfHxcbiAgICAgICAgQXJyYXkuaXNBcnJheShvcGVyYXRpb24pKSB7XG4gICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIk9wZXJhdGlvbiBpcyBub3QgYW4gb2JqZWN0XCIsIFwiT1BFUkFUSU9OX05PVF9BTl9PQkpFQ1RcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgIH1cbiAgICBlbHNlIGlmICghb2JqT3BzW29wZXJhdGlvbi5vcF0pIHtcbiAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiT3BlcmF0aW9uIGBvcGAgcHJvcGVydHkgaXMgbm90IG9uZSBvZiBvcGVyYXRpb25zIGRlZmluZWQgaW4gUkZDLTY5MDJcIiwgXCJPUEVSQVRJT05fT1BfSU5WQUxJRFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBvcGVyYXRpb24ucGF0aCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJPcGVyYXRpb24gYHBhdGhgIHByb3BlcnR5IGlzIG5vdCBhIHN0cmluZ1wiLCBcIk9QRVJBVElPTl9QQVRIX0lOVkFMSURcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChvcGVyYXRpb24ucGF0aC5pbmRleE9mKFwiL1wiKSAhPT0gMCAmJiBvcGVyYXRpb24ucGF0aC5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIHBhdGhzIHRoYXQgYXJlbid0IGVtcHR5IHN0cmluZyBzaG91bGQgc3RhcnQgd2l0aCBcIi9cIlxuICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoJ09wZXJhdGlvbiBgcGF0aGAgcHJvcGVydHkgbXVzdCBzdGFydCB3aXRoIFwiL1wiJywgXCJPUEVSQVRJT05fUEFUSF9JTlZBTElEXCIsIGluZGV4LCBvcGVyYXRpb24sIGRvY3VtZW50KTtcbiAgICB9XG4gICAgZWxzZSBpZiAoKG9wZXJhdGlvbi5vcCA9PT0gXCJtb3ZlXCIgfHwgb3BlcmF0aW9uLm9wID09PSBcImNvcHlcIikgJiZcbiAgICAgICAgdHlwZW9mIG9wZXJhdGlvbi5mcm9tICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIk9wZXJhdGlvbiBgZnJvbWAgcHJvcGVydHkgaXMgbm90IHByZXNlbnQgKGFwcGxpY2FibGUgaW4gYG1vdmVgIGFuZCBgY29weWAgb3BlcmF0aW9ucylcIiwgXCJPUEVSQVRJT05fRlJPTV9SRVFVSVJFRFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKChvcGVyYXRpb24ub3AgPT09IFwiYWRkXCIgfHxcbiAgICAgICAgb3BlcmF0aW9uLm9wID09PSBcInJlcGxhY2VcIiB8fFxuICAgICAgICBvcGVyYXRpb24ub3AgPT09IFwidGVzdFwiKSAmJlxuICAgICAgICBvcGVyYXRpb24udmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJPcGVyYXRpb24gYHZhbHVlYCBwcm9wZXJ0eSBpcyBub3QgcHJlc2VudCAoYXBwbGljYWJsZSBpbiBgYWRkYCwgYHJlcGxhY2VgIGFuZCBgdGVzdGAgb3BlcmF0aW9ucylcIiwgXCJPUEVSQVRJT05fVkFMVUVfUkVRVUlSRURcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgIH1cbiAgICBlbHNlIGlmICgob3BlcmF0aW9uLm9wID09PSBcImFkZFwiIHx8XG4gICAgICAgIG9wZXJhdGlvbi5vcCA9PT0gXCJyZXBsYWNlXCIgfHxcbiAgICAgICAgb3BlcmF0aW9uLm9wID09PSBcInRlc3RcIikgJiZcbiAgICAgICAgaGFzVW5kZWZpbmVkKG9wZXJhdGlvbi52YWx1ZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiT3BlcmF0aW9uIGB2YWx1ZWAgcHJvcGVydHkgaXMgbm90IHByZXNlbnQgKGFwcGxpY2FibGUgaW4gYGFkZGAsIGByZXBsYWNlYCBhbmQgYHRlc3RgIG9wZXJhdGlvbnMpXCIsIFwiT1BFUkFUSU9OX1ZBTFVFX0NBTk5PVF9DT05UQUlOX1VOREVGSU5FRFwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGRvY3VtZW50KSB7XG4gICAgICAgIGlmIChvcGVyYXRpb24ub3AgPT0gXCJhZGRcIikge1xuICAgICAgICAgICAgdmFyIHBhdGhMZW4gPSBvcGVyYXRpb24ucGF0aC5zcGxpdChcIi9cIikubGVuZ3RoO1xuICAgICAgICAgICAgdmFyIGV4aXN0aW5nUGF0aExlbiA9IGV4aXN0aW5nUGF0aEZyYWdtZW50LnNwbGl0KFwiL1wiKS5sZW5ndGg7XG4gICAgICAgICAgICBpZiAocGF0aExlbiAhPT0gZXhpc3RpbmdQYXRoTGVuICsgMSAmJiBwYXRoTGVuICE9PSBleGlzdGluZ1BhdGhMZW4pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSnNvblBhdGNoRXJyb3IoXCJDYW5ub3QgcGVyZm9ybSBhbiBgYWRkYCBvcGVyYXRpb24gYXQgdGhlIGRlc2lyZWQgcGF0aFwiLCBcIk9QRVJBVElPTl9QQVRIX0NBTk5PVF9BRERcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wZXJhdGlvbi5vcCA9PT0gXCJyZXBsYWNlXCIgfHxcbiAgICAgICAgICAgIG9wZXJhdGlvbi5vcCA9PT0gXCJyZW1vdmVcIiB8fFxuICAgICAgICAgICAgb3BlcmF0aW9uLm9wID09PSBcIl9nZXRcIikge1xuICAgICAgICAgICAgaWYgKG9wZXJhdGlvbi5wYXRoICE9PSBleGlzdGluZ1BhdGhGcmFnbWVudCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIkNhbm5vdCBwZXJmb3JtIHRoZSBvcGVyYXRpb24gYXQgYSBwYXRoIHRoYXQgZG9lcyBub3QgZXhpc3RcIiwgXCJPUEVSQVRJT05fUEFUSF9VTlJFU09MVkFCTEVcIiwgaW5kZXgsIG9wZXJhdGlvbiwgZG9jdW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wZXJhdGlvbi5vcCA9PT0gXCJtb3ZlXCIgfHwgb3BlcmF0aW9uLm9wID09PSBcImNvcHlcIikge1xuICAgICAgICAgICAgdmFyIGV4aXN0aW5nVmFsdWUgPSB7XG4gICAgICAgICAgICAgICAgb3A6IFwiX2dldFwiLFxuICAgICAgICAgICAgICAgIHBhdGg6IG9wZXJhdGlvbi5mcm9tLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB1bmRlZmluZWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGVycm9yID0gdmFsaWRhdGUoW2V4aXN0aW5nVmFsdWVdLCBkb2N1bWVudCk7XG4gICAgICAgICAgICBpZiAoZXJyb3IgJiYgZXJyb3IubmFtZSA9PT0gXCJPUEVSQVRJT05fUEFUSF9VTlJFU09MVkFCTEVcIikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBKc29uUGF0Y2hFcnJvcihcIkNhbm5vdCBwZXJmb3JtIHRoZSBvcGVyYXRpb24gZnJvbSBhIHBhdGggdGhhdCBkb2VzIG5vdCBleGlzdFwiLCBcIk9QRVJBVElPTl9GUk9NX1VOUkVTT0xWQUJMRVwiLCBpbmRleCwgb3BlcmF0aW9uLCBkb2N1bWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIFZhbGlkYXRlcyBhIHNlcXVlbmNlIG9mIG9wZXJhdGlvbnMuIElmIGBkb2N1bWVudGAgcGFyYW1ldGVyIGlzIHByb3ZpZGVkLCB0aGUgc2VxdWVuY2UgaXMgYWRkaXRpb25hbGx5IHZhbGlkYXRlZCBhZ2FpbnN0IHRoZSBvYmplY3QgZG9jdW1lbnQuXG4gKiBJZiBlcnJvciBpcyBlbmNvdW50ZXJlZCwgcmV0dXJucyBhIEpzb25QYXRjaEVycm9yIG9iamVjdFxuICogQHBhcmFtIHNlcXVlbmNlXG4gKiBAcGFyYW0gZG9jdW1lbnRcbiAqIEByZXR1cm5zIHtKc29uUGF0Y2hFcnJvcnx1bmRlZmluZWR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZShzZXF1ZW5jZSwgZG9jdW1lbnQsIGV4dGVybmFsVmFsaWRhdG9yKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHNlcXVlbmNlKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEpzb25QYXRjaEVycm9yKFwiUGF0Y2ggc2VxdWVuY2UgbXVzdCBiZSBhbiBhcnJheVwiLCBcIlNFUVVFTkNFX05PVF9BTl9BUlJBWVwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIC8vY2xvbmUgZG9jdW1lbnQgYW5kIHNlcXVlbmNlIHNvIHRoYXQgd2UgY2FuIHNhZmVseSB0cnkgYXBwbHlpbmcgb3BlcmF0aW9uc1xuICAgICAgICAgICAgYXBwbHlQYXRjaChfZGVlcENsb25lKGRvY3VtZW50KSwgX2RlZXBDbG9uZShzZXF1ZW5jZSksIGV4dGVybmFsVmFsaWRhdG9yIHx8IHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZXh0ZXJuYWxWYWxpZGF0b3IgPSBleHRlcm5hbFZhbGlkYXRvciB8fCB2YWxpZGF0b3I7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlcXVlbmNlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZXh0ZXJuYWxWYWxpZGF0b3Ioc2VxdWVuY2VbaV0sIGksIGRvY3VtZW50LCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgSnNvblBhdGNoRXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi8vIGJhc2VkIG9uIGh0dHBzOi8vZ2l0aHViLmNvbS9lcG9iZXJlemtpbi9mYXN0LWRlZXAtZXF1YWxcbi8vIE1JVCBMaWNlbnNlXG4vLyBDb3B5cmlnaHQgKGMpIDIwMTcgRXZnZW55IFBvYmVyZXpraW5cbi8vIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbi8vIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbi8vIGluIHRoZSBTb2Z0d2FyZSB3aXRob3V0IHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHNcbi8vIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcbi8vIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuLy8gZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluIGFsbFxuLy8gY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1Jcbi8vIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuLy8gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4vLyBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4vLyBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuLy8gT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEVcbi8vIFNPRlRXQVJFLlxuZXhwb3J0IGZ1bmN0aW9uIF9hcmVFcXVhbHMoYSwgYikge1xuICAgIGlmIChhID09PSBiKVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoYSAmJiBiICYmIHR5cGVvZiBhID09IFwib2JqZWN0XCIgJiYgdHlwZW9mIGIgPT0gXCJvYmplY3RcIikge1xuICAgICAgICB2YXIgYXJyQSA9IEFycmF5LmlzQXJyYXkoYSksIGFyckIgPSBBcnJheS5pc0FycmF5KGIpLCBpLCBsZW5ndGgsIGtleTtcbiAgICAgICAgaWYgKGFyckEgJiYgYXJyQikge1xuICAgICAgICAgICAgbGVuZ3RoID0gYS5sZW5ndGg7XG4gICAgICAgICAgICBpZiAobGVuZ3RoICE9IGIubGVuZ3RoKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGZvciAoaSA9IGxlbmd0aDsgaS0tICE9PSAwOylcbiAgICAgICAgICAgICAgICBpZiAoIV9hcmVFcXVhbHMoYVtpXSwgYltpXSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhcnJBICE9IGFyckIpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoYSk7XG4gICAgICAgIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuICAgICAgICBpZiAobGVuZ3RoICE9PSBPYmplY3Qua2V5cyhiKS5sZW5ndGgpXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGZvciAoaSA9IGxlbmd0aDsgaS0tICE9PSAwOylcbiAgICAgICAgICAgIGlmICghYi5oYXNPd25Qcm9wZXJ0eShrZXlzW2ldKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIGZvciAoaSA9IGxlbmd0aDsgaS0tICE9PSAwOykge1xuICAgICAgICAgICAga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgICAgIGlmICghX2FyZUVxdWFscyhhW2tleV0sIGJba2V5XSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gYSAhPT0gYSAmJiBiICE9PSBiO1xufVxuIl0sIm5hbWVzIjpbIlBhdGNoRXJyb3IiLCJfZGVlcENsb25lIiwiaXNJbnRlZ2VyIiwidW5lc2NhcGVQYXRoQ29tcG9uZW50IiwiaGFzVW5kZWZpbmVkIiwiSnNvblBhdGNoRXJyb3IiLCJkZWVwQ2xvbmUiLCJvYmpPcHMiLCJhZGQiLCJvYmoiLCJrZXkiLCJkb2N1bWVudCIsInZhbHVlIiwibmV3RG9jdW1lbnQiLCJyZW1vdmUiLCJyZW1vdmVkIiwicmVwbGFjZSIsIm1vdmUiLCJnZXRWYWx1ZUJ5UG9pbnRlciIsInBhdGgiLCJvcmlnaW5hbFZhbHVlIiwiYXBwbHlPcGVyYXRpb24iLCJvcCIsImZyb20iLCJjb3B5IiwidmFsdWVUb0NvcHkiLCJ0ZXN0IiwiX2FyZUVxdWFscyIsIl9nZXQiLCJhcnJPcHMiLCJhcnIiLCJpIiwic3BsaWNlIiwiaW5kZXgiLCJyZW1vdmVkTGlzdCIsInBvaW50ZXIiLCJnZXRPcmlnaW5hbERlc3RpbmF0aW9uIiwib3BlcmF0aW9uIiwidmFsaWRhdGVPcGVyYXRpb24iLCJtdXRhdGVEb2N1bWVudCIsImJhblByb3RvdHlwZU1vZGlmaWNhdGlvbnMiLCJ2YWxpZGF0b3IiLCJyZXR1cm5WYWx1ZSIsImtleXMiLCJzcGxpdCIsInQiLCJsZW4iLCJsZW5ndGgiLCJleGlzdGluZ1BhdGhGcmFnbWVudCIsInVuZGVmaW5lZCIsInZhbGlkYXRlRnVuY3Rpb24iLCJpbmRleE9mIiwiVHlwZUVycm9yIiwic2xpY2UiLCJqb2luIiwiQXJyYXkiLCJpc0FycmF5IiwiY2FsbCIsImFwcGx5UGF0Y2giLCJwYXRjaCIsInJlc3VsdHMiLCJhcHBseVJlZHVjZXIiLCJvcGVyYXRpb25SZXN1bHQiLCJwYXRoTGVuIiwiZXhpc3RpbmdQYXRoTGVuIiwiZXhpc3RpbmdWYWx1ZSIsImVycm9yIiwidmFsaWRhdGUiLCJuYW1lIiwic2VxdWVuY2UiLCJleHRlcm5hbFZhbGlkYXRvciIsImUiLCJhIiwiYiIsImFyckEiLCJhcnJCIiwiT2JqZWN0IiwiaGFzT3duUHJvcGVydHkiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   compare: () => (/* binding */ compare),\n/* harmony export */   generate: () => (/* binding */ generate),\n/* harmony export */   observe: () => (/* binding */ observe),\n/* harmony export */   unobserve: () => (/* binding */ unobserve)\n/* harmony export */ });\n/* harmony import */ var _helpers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./helpers.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js\");\n/* harmony import */ var _core_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./core.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/core.js\");\n// @ts-nocheck\n// Inlined because of ESM import issues\n/*!\n * https://github.com/Starcounter-Jack/JSON-Patch\n * (c) 2013-2021 Joachim Wester\n * MIT license\n */ \n\nvar beforeDict = new WeakMap();\nclass Mirror {\n    constructor(obj){\n        Object.defineProperty(this, \"obj\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"observers\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: new Map()\n        });\n        Object.defineProperty(this, \"value\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.obj = obj;\n    }\n}\nclass ObserverInfo {\n    constructor(callback, observer){\n        Object.defineProperty(this, \"callback\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"observer\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.callback = callback;\n        this.observer = observer;\n    }\n}\nfunction getMirror(obj) {\n    return beforeDict.get(obj);\n}\nfunction getObserverFromMirror(mirror, callback) {\n    return mirror.observers.get(callback);\n}\nfunction removeObserverFromMirror(mirror, observer) {\n    mirror.observers.delete(observer.callback);\n}\n/**\n * Detach an observer from an object\n */ function unobserve(root, observer) {\n    observer.unobserve();\n}\n/**\n * Observes changes made to an object, which can then be retrieved using generate\n */ function observe(obj, callback) {\n    var patches = [];\n    var observer;\n    var mirror = getMirror(obj);\n    if (!mirror) {\n        mirror = new Mirror(obj);\n        beforeDict.set(obj, mirror);\n    } else {\n        const observerInfo = getObserverFromMirror(mirror, callback);\n        observer = observerInfo && observerInfo.observer;\n    }\n    if (observer) {\n        return observer;\n    }\n    observer = {};\n    mirror.value = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(obj);\n    if (callback) {\n        observer.callback = callback;\n        observer.next = null;\n        var dirtyCheck = ()=>{\n            generate(observer);\n        };\n        var fastCheck = ()=>{\n            clearTimeout(observer.next);\n            observer.next = setTimeout(dirtyCheck);\n        };\n        if (false) {}\n    }\n    observer.patches = patches;\n    observer.object = obj;\n    observer.unobserve = ()=>{\n        generate(observer);\n        clearTimeout(observer.next);\n        removeObserverFromMirror(mirror, observer);\n        if (false) {}\n    };\n    mirror.observers.set(callback, new ObserverInfo(callback, observer));\n    return observer;\n}\n/**\n * Generate an array of patches from an observer\n */ function generate(observer, invertible = false) {\n    var mirror = beforeDict.get(observer.object);\n    _generate(mirror.value, observer.object, observer.patches, \"\", invertible);\n    if (observer.patches.length) {\n        (0,_core_js__WEBPACK_IMPORTED_MODULE_1__.applyPatch)(mirror.value, observer.patches);\n    }\n    var temp = observer.patches;\n    if (temp.length > 0) {\n        observer.patches = [];\n        if (observer.callback) {\n            observer.callback(temp);\n        }\n    }\n    return temp;\n}\n// Dirty check if obj is different from mirror, generate patches and update mirror\nfunction _generate(mirror, obj, patches, path, invertible) {\n    if (obj === mirror) {\n        return;\n    }\n    if (typeof obj.toJSON === \"function\") {\n        obj = obj.toJSON();\n    }\n    var newKeys = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._objectKeys)(obj);\n    var oldKeys = (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._objectKeys)(mirror);\n    var changed = false;\n    var deleted = false;\n    //if ever \"move\" operation is implemented here, make sure this test runs OK: \"should not generate the same patch twice (move)\"\n    for(var t = oldKeys.length - 1; t >= 0; t--){\n        var key = oldKeys[t];\n        var oldVal = mirror[key];\n        if ((0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.hasOwnProperty)(obj, key) && !(obj[key] === undefined && oldVal !== undefined && Array.isArray(obj) === false)) {\n            var newVal = obj[key];\n            if (typeof oldVal == \"object\" && oldVal != null && typeof newVal == \"object\" && newVal != null && Array.isArray(oldVal) === Array.isArray(newVal)) {\n                _generate(oldVal, newVal, patches, path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key), invertible);\n            } else {\n                if (oldVal !== newVal) {\n                    changed = true;\n                    if (invertible) {\n                        patches.push({\n                            op: \"test\",\n                            path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key),\n                            value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(oldVal)\n                        });\n                    }\n                    patches.push({\n                        op: \"replace\",\n                        path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key),\n                        value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(newVal)\n                    });\n                }\n            }\n        } else if (Array.isArray(mirror) === Array.isArray(obj)) {\n            if (invertible) {\n                patches.push({\n                    op: \"test\",\n                    path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key),\n                    value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(oldVal)\n                });\n            }\n            patches.push({\n                op: \"remove\",\n                path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key)\n            });\n            deleted = true; // property has been deleted\n        } else {\n            if (invertible) {\n                patches.push({\n                    op: \"test\",\n                    path,\n                    value: mirror\n                });\n            }\n            patches.push({\n                op: \"replace\",\n                path,\n                value: obj\n            });\n            changed = true;\n        }\n    }\n    if (!deleted && newKeys.length == oldKeys.length) {\n        return;\n    }\n    for(var t = 0; t < newKeys.length; t++){\n        var key = newKeys[t];\n        if (!(0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.hasOwnProperty)(mirror, key) && obj[key] !== undefined) {\n            patches.push({\n                op: \"add\",\n                path: path + \"/\" + (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__.escapePathComponent)(key),\n                value: (0,_helpers_js__WEBPACK_IMPORTED_MODULE_0__._deepClone)(obj[key])\n            });\n        }\n    }\n}\n/**\n * Create an array of patches from the differences in two objects\n */ function compare(tree1, tree2, invertible = false) {\n    var patches = [];\n    _generate(tree1, tree2, patches, \"\", invertible);\n    return patches;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZmFzdC1qc29uLXBhdGNoL3NyYy9kdXBsZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEsY0FBYztBQUNkLHVDQUF1QztBQUN2Qzs7OztDQUlDLEdBQzRGO0FBQ3REO0FBQ3ZDLElBQUlLLGFBQWEsSUFBSUM7QUFDckIsTUFBTUM7SUFDRkMsWUFBWUMsR0FBRyxDQUFFO1FBQ2JDLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsT0FBTztZQUMvQkMsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsYUFBYTtZQUNyQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxJQUFJQztRQUNmO1FBQ0FOLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsU0FBUztZQUNqQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDTixHQUFHLEdBQUdBO0lBQ2Y7QUFDSjtBQUNBLE1BQU1RO0lBQ0ZULFlBQVlVLFFBQVEsRUFBRUMsUUFBUSxDQUFFO1FBQzVCVCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFlBQVk7WUFDcENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFlBQVk7WUFDcENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBLElBQUksQ0FBQ0csUUFBUSxHQUFHQTtRQUNoQixJQUFJLENBQUNDLFFBQVEsR0FBR0E7SUFDcEI7QUFDSjtBQUNBLFNBQVNDLFVBQVVYLEdBQUc7SUFDbEIsT0FBT0osV0FBV2dCLEdBQUcsQ0FBQ1o7QUFDMUI7QUFD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L0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2Zhc3QtanNvbi1wYXRjaC9zcmMvZHVwbGV4LmpzP2NlNmMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQHRzLW5vY2hlY2tcbi8vIElubGluZWQgYmVjYXVzZSBvZiBFU00gaW1wb3J0IGlzc3Vlc1xuLyohXG4gKiBodHRwczovL2dpdGh1Yi5jb20vU3RhcmNvdW50ZXItSmFjay9KU09OLVBhdGNoXG4gKiAoYykgMjAxMy0yMDIxIEpvYWNoaW0gV2VzdGVyXG4gKiBNSVQgbGljZW5zZVxuICovXG5pbXBvcnQgeyBfZGVlcENsb25lLCBfb2JqZWN0S2V5cywgZXNjYXBlUGF0aENvbXBvbmVudCwgaGFzT3duUHJvcGVydHksIH0gZnJvbSBcIi4vaGVscGVycy5qc1wiO1xuaW1wb3J0IHsgYXBwbHlQYXRjaCB9IGZyb20gXCIuL2NvcmUuanNcIjtcbnZhciBiZWZvcmVEaWN0ID0gbmV3IFdlYWtNYXAoKTtcbmNsYXNzIE1pcnJvciB7XG4gICAgY29uc3RydWN0b3Iob2JqKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9ialwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvYnNlcnZlcnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IG5ldyBNYXAoKVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidmFsdWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5vYmogPSBvYmo7XG4gICAgfVxufVxuY2xhc3MgT2JzZXJ2ZXJJbmZvIHtcbiAgICBjb25zdHJ1Y3RvcihjYWxsYmFjaywgb2JzZXJ2ZXIpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2FsbGJhY2tcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwib2JzZXJ2ZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgICB0aGlzLm9ic2VydmVyID0gb2JzZXJ2ZXI7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0TWlycm9yKG9iaikge1xuICAgIHJldHVybiBiZWZvcmVEaWN0LmdldChvYmopO1xufVxuZnVuY3Rpb24gZ2V0T2JzZXJ2ZXJGcm9tTWlycm9yKG1pcnJvciwgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gbWlycm9yLm9ic2VydmVycy5nZXQoY2FsbGJhY2spO1xufVxuZnVuY3Rpb24gcmVtb3ZlT2JzZXJ2ZXJGcm9tTWlycm9yKG1pcnJvciwgb2JzZXJ2ZXIpIHtcbiAgICBtaXJyb3Iub2JzZXJ2ZXJzLmRlbGV0ZShvYnNlcnZlci5jYWxsYmFjayk7XG59XG4vKipcbiAqIERldGFjaCBhbiBvYnNlcnZlciBmcm9tIGFuIG9iamVjdFxuICovXG5leHBvcnQgZnVuY3Rpb24gdW5vYnNlcnZlKHJvb3QsIG9ic2VydmVyKSB7XG4gICAgb2JzZXJ2ZXIudW5vYnNlcnZlKCk7XG59XG4vKipcbiAqIE9ic2VydmVzIGNoYW5nZXMgbWFkZSB0byBhbiBvYmplY3QsIHdoaWNoIGNhbiB0aGVuIGJlIHJldHJpZXZlZCB1c2luZyBnZW5lcmF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gb2JzZXJ2ZShvYmosIGNhbGxiYWNrKSB7XG4gICAgdmFyIHBhdGNoZXMgPSBbXTtcbiAgICB2YXIgb2JzZXJ2ZXI7XG4gICAgdmFyIG1pcnJvciA9IGdldE1pcnJvcihvYmopO1xuICAgIGlmICghbWlycm9yKSB7XG4gICAgICAgIG1pcnJvciA9IG5ldyBNaXJyb3Iob2JqKTtcbiAgICAgICAgYmVmb3JlRGljdC5zZXQob2JqLCBtaXJyb3IpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3Qgb2JzZXJ2ZXJJbmZvID0gZ2V0T2JzZXJ2ZXJGcm9tTWlycm9yKG1pcnJvciwgY2FsbGJhY2spO1xuICAgICAgICBvYnNlcnZlciA9IG9ic2VydmVySW5mbyAmJiBvYnNlcnZlckluZm8ub2JzZXJ2ZXI7XG4gICAgfVxuICAgIGlmIChvYnNlcnZlcikge1xuICAgICAgICByZXR1cm4gb2JzZXJ2ZXI7XG4gICAgfVxuICAgIG9ic2VydmVyID0ge307XG4gICAgbWlycm9yLnZhbHVlID0gX2RlZXBDbG9uZShvYmopO1xuICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICBvYnNlcnZlci5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgICBvYnNlcnZlci5uZXh0ID0gbnVsbDtcbiAgICAgICAgdmFyIGRpcnR5Q2hlY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICBnZW5lcmF0ZShvYnNlcnZlcik7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBmYXN0Q2hlY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQob2JzZXJ2ZXIubmV4dCk7XG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0ID0gc2V0VGltZW91dChkaXJ0eUNoZWNrKTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIC8vbm90IE5vZGVcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBmYXN0Q2hlY2spO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCBmYXN0Q2hlY2spO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgZmFzdENoZWNrKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBmYXN0Q2hlY2spO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgZmFzdENoZWNrKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvYnNlcnZlci5wYXRjaGVzID0gcGF0Y2hlcztcbiAgICBvYnNlcnZlci5vYmplY3QgPSBvYmo7XG4gICAgb2JzZXJ2ZXIudW5vYnNlcnZlID0gKCkgPT4ge1xuICAgICAgICBnZW5lcmF0ZShvYnNlcnZlcik7XG4gICAgICAgIGNsZWFyVGltZW91dChvYnNlcnZlci5uZXh0KTtcbiAgICAgICAgcmVtb3ZlT2JzZXJ2ZXJGcm9tTWlycm9yKG1pcnJvciwgb2JzZXJ2ZXIpO1xuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIGZhc3RDaGVjayk7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIGZhc3RDaGVjayk7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCBmYXN0Q2hlY2spO1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGZhc3RDaGVjayk7XG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBmYXN0Q2hlY2spO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBtaXJyb3Iub2JzZXJ2ZXJzLnNldChjYWxsYmFjaywgbmV3IE9ic2VydmVySW5mbyhjYWxsYmFjaywgb2JzZXJ2ZXIpKTtcbiAgICByZXR1cm4gb2JzZXJ2ZXI7XG59XG4vKipcbiAqIEdlbmVyYXRlIGFuIGFycmF5IG9mIHBhdGNoZXMgZnJvbSBhbiBvYnNlcnZlclxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGUob2JzZXJ2ZXIsIGludmVydGlibGUgPSBmYWxzZSkge1xuICAgIHZhciBtaXJyb3IgPSBiZWZvcmVEaWN0LmdldChvYnNlcnZlci5vYmplY3QpO1xuICAgIF9nZW5lcmF0ZShtaXJyb3IudmFsdWUsIG9ic2VydmVyLm9iamVjdCwgb2JzZXJ2ZXIucGF0Y2hlcywgXCJcIiwgaW52ZXJ0aWJsZSk7XG4gICAgaWYgKG9ic2VydmVyLnBhdGNoZXMubGVuZ3RoKSB7XG4gICAgICAgIGFwcGx5UGF0Y2gobWlycm9yLnZhbHVlLCBvYnNlcnZlci5wYXRjaGVzKTtcbiAgICB9XG4gICAgdmFyIHRlbXAgPSBvYnNlcnZlci5wYXRjaGVzO1xuICAgIGlmICh0ZW1wLmxlbmd0aCA+IDApIHtcbiAgICAgICAgb2JzZXJ2ZXIucGF0Y2hlcyA9IFtdO1xuICAgICAgICBpZiAob2JzZXJ2ZXIuY2FsbGJhY2spIHtcbiAgICAgICAgICAgIG9ic2VydmVyLmNhbGxiYWNrKHRlbXApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0ZW1wO1xufVxuLy8gRGlydHkgY2hlY2sgaWYgb2JqIGlzIGRpZmZlcmVudCBmcm9tIG1pcnJvciwgZ2VuZXJhdGUgcGF0Y2hlcyBhbmQgdXBkYXRlIG1pcnJvclxuZnVuY3Rpb24gX2dlbmVyYXRlKG1pcnJvciwgb2JqLCBwYXRjaGVzLCBwYXRoLCBpbnZlcnRpYmxlKSB7XG4gICAgaWYgKG9iaiA9PT0gbWlycm9yKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBvYmoudG9KU09OID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgb2JqID0gb2JqLnRvSlNPTigpO1xuICAgIH1cbiAgICB2YXIgbmV3S2V5cyA9IF9vYmplY3RLZXlzKG9iaik7XG4gICAgdmFyIG9sZEtleXMgPSBfb2JqZWN0S2V5cyhtaXJyb3IpO1xuICAgIHZhciBjaGFuZ2VkID0gZmFsc2U7XG4gICAgdmFyIGRlbGV0ZWQgPSBmYWxzZTtcbiAgICAvL2lmIGV2ZXIgXCJtb3ZlXCIgb3BlcmF0aW9uIGlzIGltcGxlbWVudGVkIGhlcmUsIG1ha2Ugc3VyZSB0aGlzIHRlc3QgcnVucyBPSzogXCJzaG91bGQgbm90IGdlbmVyYXRlIHRoZSBzYW1lIHBhdGNoIHR3aWNlIChtb3ZlKVwiXG4gICAgZm9yICh2YXIgdCA9IG9sZEtleXMubGVuZ3RoIC0gMTsgdCA+PSAwOyB0LS0pIHtcbiAgICAgICAgdmFyIGtleSA9IG9sZEtleXNbdF07XG4gICAgICAgIHZhciBvbGRWYWwgPSBtaXJyb3Jba2V5XTtcbiAgICAgICAgaWYgKGhhc093blByb3BlcnR5KG9iaiwga2V5KSAmJlxuICAgICAgICAgICAgIShvYmpba2V5XSA9PT0gdW5kZWZpbmVkICYmXG4gICAgICAgICAgICAgICAgb2xkVmFsICE9PSB1bmRlZmluZWQgJiZcbiAgICAgICAgICAgICAgICBBcnJheS5pc0FycmF5KG9iaikgPT09IGZhbHNlKSkge1xuICAgICAgICAgICAgdmFyIG5ld1ZhbCA9IG9ialtrZXldO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBvbGRWYWwgPT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICAgICAgIG9sZFZhbCAhPSBudWxsICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIG5ld1ZhbCA9PSBcIm9iamVjdFwiICYmXG4gICAgICAgICAgICAgICAgbmV3VmFsICE9IG51bGwgJiZcbiAgICAgICAgICAgICAgICBBcnJheS5pc0FycmF5KG9sZFZhbCkgPT09IEFycmF5LmlzQXJyYXkobmV3VmFsKSkge1xuICAgICAgICAgICAgICAgIF9nZW5lcmF0ZShvbGRWYWwsIG5ld1ZhbCwgcGF0Y2hlcywgcGF0aCArIFwiL1wiICsgZXNjYXBlUGF0aENvbXBvbmVudChrZXkpLCBpbnZlcnRpYmxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChvbGRWYWwgIT09IG5ld1ZhbCkge1xuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGludmVydGlibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGNoZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3A6IFwidGVzdFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IHBhdGggKyBcIi9cIiArIGVzY2FwZVBhdGhDb21wb25lbnQoa2V5KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogX2RlZXBDbG9uZShvbGRWYWwpLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcGF0Y2hlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wOiBcInJlcGxhY2VcIixcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6IHBhdGggKyBcIi9cIiArIGVzY2FwZVBhdGhDb21wb25lbnQoa2V5KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBfZGVlcENsb25lKG5ld1ZhbCksXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KG1pcnJvcikgPT09IEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgICAgICAgICAgaWYgKGludmVydGlibGUpIHtcbiAgICAgICAgICAgICAgICBwYXRjaGVzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBvcDogXCJ0ZXN0XCIsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IHBhdGggKyBcIi9cIiArIGVzY2FwZVBhdGhDb21wb25lbnQoa2V5KSxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IF9kZWVwQ2xvbmUob2xkVmFsKSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhdGNoZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgb3A6IFwicmVtb3ZlXCIsXG4gICAgICAgICAgICAgICAgcGF0aDogcGF0aCArIFwiL1wiICsgZXNjYXBlUGF0aENvbXBvbmVudChrZXkpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBkZWxldGVkID0gdHJ1ZTsgLy8gcHJvcGVydHkgaGFzIGJlZW4gZGVsZXRlZFxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGludmVydGlibGUpIHtcbiAgICAgICAgICAgICAgICBwYXRjaGVzLnB1c2goeyBvcDogXCJ0ZXN0XCIsIHBhdGgsIHZhbHVlOiBtaXJyb3IgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXRjaGVzLnB1c2goeyBvcDogXCJyZXBsYWNlXCIsIHBhdGgsIHZhbHVlOiBvYmogfSk7XG4gICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWRlbGV0ZWQgJiYgbmV3S2V5cy5sZW5ndGggPT0gb2xkS2V5cy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IgKHZhciB0ID0gMDsgdCA8IG5ld0tleXMubGVuZ3RoOyB0KyspIHtcbiAgICAgICAgdmFyIGtleSA9IG5ld0tleXNbdF07XG4gICAgICAgIGlmICghaGFzT3duUHJvcGVydHkobWlycm9yLCBrZXkpICYmIG9ialtrZXldICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHBhdGNoZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgb3A6IFwiYWRkXCIsXG4gICAgICAgICAgICAgICAgcGF0aDogcGF0aCArIFwiL1wiICsgZXNjYXBlUGF0aENvbXBvbmVudChrZXkpLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBfZGVlcENsb25lKG9ialtrZXldKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxufVxuLyoqXG4gKiBDcmVhdGUgYW4gYXJyYXkgb2YgcGF0Y2hlcyBmcm9tIHRoZSBkaWZmZXJlbmNlcyBpbiB0d28gb2JqZWN0c1xuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcGFyZSh0cmVlMSwgdHJlZTIsIGludmVydGlibGUgPSBmYWxzZSkge1xuICAgIHZhciBwYXRjaGVzID0gW107XG4gICAgX2dlbmVyYXRlKHRyZWUxLCB0cmVlMiwgcGF0Y2hlcywgXCJcIiwgaW52ZXJ0aWJsZSk7XG4gICAgcmV0dXJuIHBhdGNoZXM7XG59XG4iXSwibmFtZXMiOlsiX2RlZXBDbG9uZSIsIl9vYmplY3RLZXlzIiwiZXNjYXBlUGF0aENvbXBvbmVudCIsImhhc093blByb3BlcnR5IiwiYXBwbHlQYXRjaCIsImJlZm9yZURpY3QiLCJXZWFrTWFwIiwiTWlycm9yIiwiY29uc3RydWN0b3IiLCJvYmoiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiTWFwIiwiT2JzZXJ2ZXJJbmZvIiwiY2FsbGJhY2siLCJvYnNlcnZlciIsImdldE1pcnJvciIsImdldCIsImdldE9ic2VydmVyRnJvbU1pcnJvciIsIm1pcnJvciIsIm9ic2VydmVycyIsInJlbW92ZU9ic2VydmVyRnJvbU1pcnJvciIsImRlbGV0ZSIsInVub2JzZXJ2ZSIsInJvb3QiLCJvYnNlcnZlIiwicGF0Y2hlcyIsInNldCIsIm9ic2VydmVySW5mbyIsIm5leHQiLCJkaXJ0eUNoZWNrIiwiZ2VuZXJhdGUiLCJmYXN0Q2hlY2siLCJjbGVhclRpbWVvdXQiLCJzZXRUaW1lb3V0Iiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9iamVjdCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJpbnZlcnRpYmxlIiwiX2dlbmVyYXRlIiwibGVuZ3RoIiwidGVtcCIsInBhdGgiLCJ0b0pTT04iLCJuZXdLZXlzIiwib2xkS2V5cyIsImNoYW5nZWQiLCJkZWxldGVkIiwidCIsImtleSIsIm9sZFZhbCIsInVuZGVmaW5lZCIsIkFycmF5IiwiaXNBcnJheSIsIm5ld1ZhbCIsInB1c2giLCJvcCIsImNvbXBhcmUiLCJ0cmVlMSIsInRyZWUyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/duplex.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PatchError: () => (/* binding */ PatchError),\n/* harmony export */   _deepClone: () => (/* binding */ _deepClone),\n/* harmony export */   _getPathRecursive: () => (/* binding */ _getPathRecursive),\n/* harmony export */   _objectKeys: () => (/* binding */ _objectKeys),\n/* harmony export */   escapePathComponent: () => (/* binding */ escapePathComponent),\n/* harmony export */   getPath: () => (/* binding */ getPath),\n/* harmony export */   hasOwnProperty: () => (/* binding */ hasOwnProperty),\n/* harmony export */   hasUndefined: () => (/* binding */ hasUndefined),\n/* harmony export */   isInteger: () => (/* binding */ isInteger),\n/* harmony export */   unescapePathComponent: () => (/* binding */ unescapePathComponent)\n/* harmony export */ });\n// @ts-nocheck\n// Inlined because of ESM import issues\n/*!\n * https://github.com/Starcounter-Jack/JSON-Patch\n * (c) 2017-2022 Joachim Wester\n * MIT licensed\n */ const _hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction hasOwnProperty(obj, key) {\n    return _hasOwnProperty.call(obj, key);\n}\nfunction _objectKeys(obj) {\n    if (Array.isArray(obj)) {\n        const keys = new Array(obj.length);\n        for(let k = 0; k < keys.length; k++){\n            keys[k] = \"\" + k;\n        }\n        return keys;\n    }\n    if (Object.keys) {\n        return Object.keys(obj);\n    }\n    let keys = [];\n    for(let i in obj){\n        if (hasOwnProperty(obj, i)) {\n            keys.push(i);\n        }\n    }\n    return keys;\n}\n/**\n * Deeply clone the object.\n * https://jsperf.com/deep-copy-vs-json-stringify-json-parse/25 (recursiveDeepCopy)\n * @param  {any} obj value to clone\n * @return {any} cloned obj\n */ function _deepClone(obj) {\n    switch(typeof obj){\n        case \"object\":\n            return JSON.parse(JSON.stringify(obj)); //Faster than ES5 clone - http://jsperf.com/deep-cloning-of-objects/5\n        case \"undefined\":\n            return null; //this is how JSON.stringify behaves for array items\n        default:\n            return obj; //no need to clone primitives\n    }\n}\n//3x faster than cached /^\\d+$/.test(str)\nfunction isInteger(str) {\n    let i = 0;\n    const len = str.length;\n    let charCode;\n    while(i < len){\n        charCode = str.charCodeAt(i);\n        if (charCode >= 48 && charCode <= 57) {\n            i++;\n            continue;\n        }\n        return false;\n    }\n    return true;\n}\n/**\n * Escapes a json pointer path\n * @param path The raw pointer\n * @return the Escaped path\n */ function escapePathComponent(path) {\n    if (path.indexOf(\"/\") === -1 && path.indexOf(\"~\") === -1) return path;\n    return path.replace(/~/g, \"~0\").replace(/\\//g, \"~1\");\n}\n/**\n * Unescapes a json pointer path\n * @param path The escaped pointer\n * @return The unescaped path\n */ function unescapePathComponent(path) {\n    return path.replace(/~1/g, \"/\").replace(/~0/g, \"~\");\n}\nfunction _getPathRecursive(root, obj) {\n    let found;\n    for(let key in root){\n        if (hasOwnProperty(root, key)) {\n            if (root[key] === obj) {\n                return escapePathComponent(key) + \"/\";\n            } else if (typeof root[key] === \"object\") {\n                found = _getPathRecursive(root[key], obj);\n                if (found != \"\") {\n                    return escapePathComponent(key) + \"/\" + found;\n                }\n            }\n        }\n    }\n    return \"\";\n}\nfunction getPath(root, obj) {\n    if (root === obj) {\n        return \"/\";\n    }\n    const path = _getPathRecursive(root, obj);\n    if (path === \"\") {\n        throw new Error(\"Object not found in root\");\n    }\n    return `/${path}`;\n}\n/**\n * Recursively checks whether an object has any undefined values inside.\n */ function hasUndefined(obj) {\n    if (obj === undefined) {\n        return true;\n    }\n    if (obj) {\n        if (Array.isArray(obj)) {\n            for(let i = 0, len = obj.length; i < len; i++){\n                if (hasUndefined(obj[i])) {\n                    return true;\n                }\n            }\n        } else if (typeof obj === \"object\") {\n            const objKeys = _objectKeys(obj);\n            const objKeysLength = objKeys.length;\n            for(var i = 0; i < objKeysLength; i++){\n                if (hasUndefined(obj[objKeys[i]])) {\n                    return true;\n                }\n            }\n        }\n    }\n    return false;\n}\nfunction patchErrorMessageFormatter(message, args) {\n    const messageParts = [\n        message\n    ];\n    for(const key in args){\n        const value = typeof args[key] === \"object\" ? JSON.stringify(args[key], null, 2) : args[key]; // pretty print\n        if (typeof value !== \"undefined\") {\n            messageParts.push(`${key}: ${value}`);\n        }\n    }\n    return messageParts.join(\"\\n\");\n}\nclass PatchError extends Error {\n    constructor(message, name, index, operation, tree){\n        super(patchErrorMessageFormatter(message, {\n            name,\n            index,\n            operation,\n            tree\n        }));\n        Object.defineProperty(this, \"name\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: name\n        });\n        Object.defineProperty(this, \"index\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: index\n        });\n        Object.defineProperty(this, \"operation\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: operation\n        });\n        Object.defineProperty(this, \"tree\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: tree\n        });\n        Object.setPrototypeOf(this, new.target.prototype); // restore prototype chain, see https://stackoverflow.com/a/48342359\n        this.message = patchErrorMessageFormatter(message, {\n            name,\n            index,\n            operation,\n            tree\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZmFzdC1qc29uLXBhdGNoL3NyYy9oZWxwZXJzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQSxjQUFjO0FBQ2QsdUNBQXVDO0FBQ3ZDOzs7O0NBSUMsR0FDRCxNQUFNQSxrQkFBa0JDLE9BQU9DLFNBQVMsQ0FBQ0MsY0FBYztBQUNoRCxTQUFTQSxlQUFlQyxHQUFHLEVBQUVDLEdBQUc7SUFDbkMsT0FBT0wsZ0JBQWdCTSxJQUFJLENBQUNGLEtBQUtDO0FBQ3JDO0FBQ08sU0FBU0UsWUFBWUgsR0FBRztJQUMzQixJQUFJSSxNQUFNQyxPQUFPLENBQUNMLE1BQU07UUFDcEIsTUFBTU0sT0FBTyxJQUFJRixNQUFNSixJQUFJTyxNQUFNO1FBQ2pDLElBQUssSUFBSUMsSUFBSSxHQUFHQSxJQUFJRixLQUFLQyxNQUFNLEVBQUVDLElBQUs7WUFDbENGLElBQUksQ0FBQ0UsRUFBRSxHQUFHLEtBQUtBO1FBQ25CO1FBQ0EsT0FBT0Y7SUFDWDtJQUNBLElBQUlULE9BQU9TLElBQUksRUFBRTtRQUNiLE9BQU9ULE9BQU9TLElBQUksQ0FBQ047SUFDdkI7SUFDQSxJQUFJTSxPQUFPLEVBQUU7SUFDYixJQUFLLElBQUlHLEtBQUtULElBQUs7UUFDZixJQUFJRCxlQUFlQyxLQUFLUyxJQUFJO1lBQ3hCSCxLQUFLSSxJQUFJLENBQUNEO1FBQ2Q7SUFDSjtJQUNBLE9BQU9IO0FBQ1g7QUFDQTs7Ozs7Q0FLQyxHQUNNLFNBQVNLLFdBQVdYLEdBQUc7SUFDMUIsT0FBUSxPQUFPQTtRQUNYLEtBQUs7WUFDRCxPQUFPWSxLQUFLQyxLQUFLLENBQUNELEtBQUtFLFNBQVMsQ0FBQ2QsT0FBTyxxRUFBcUU7UUFDakgsS0FBSztZQUNELE9BQU8sTUFBTSxvREFBb0Q7UUFDckU7WUFDSSxPQUFPQSxLQUFLLDZCQUE2QjtJQUNqRDtBQUNKO0FBQ0EseUNBQXlDO0FBQ2xDLFNBQVNlLFVBQVVDLEdBQUc7SUFDekIsSUFBSVAsSUFBSTtJQUNSLE1BQU1RLE1BQU1ELElBQUlULE1BQU07SUFDdEIsSUFBSVc7SUFDSixNQUFPVCxJQUFJUSxJQUFLO1FBQ1pDLFdBQVdGLElBQUlHLFVBQVUsQ0FBQ1Y7UUFDMUIsSUFBSVMsWUFBWSxNQUFNQSxZQUFZLElBQUk7WUFDbENUO1lBQ0E7UUFDSjtRQUNBLE9BQU87SUFDWDtJQUNBLE9BQU87QUFDWDtBQUNBOzs7O0NBSUMsR0FDTSxTQUFTVyxvQkFBb0JDLElBQUk7SUFDcEMsSUFBSUEsS0FBS0MsT0FBTyxDQUFDLFNBQVMsQ0FBQyxLQUFLRCxLQUFLQyxPQUFPLENBQUMsU0FBUyxDQUFDLEdBQ25ELE9BQU9EO0lBQ1gsT0FBT0EsS0FBS0UsT0FBTyxDQUFDLE1BQU0sTUFBTUEsT0FBTyxDQUFDLE9BQU87QUFDbkQ7QUFDQTs7OztDQUlDLEdBQ00sU0FBU0Msc0JBQXNCSCxJQUFJO0lBQ3RDLE9BQU9BLEtBQUtFLE9BQU8sQ0FBQyxPQUFPLEtBQUtBLE9BQU8sQ0FBQyxPQUFPO0FBQ25EO0FBQ08sU0FBU0Usa0JBQWtCQyxJQUFJLEVBQUUxQixHQUFHO0lBQ3ZDLElBQUkyQjtJQUNKLElBQUssSUFBSTFCLE9BQU95QixLQUFNO1FBQ2xCLElBQUkzQixlQUFlMkIsTUFBTXpCLE1BQU07WUFDM0IsSUFBSXlCLElBQUksQ0FBQ3pCLElBQUksS0FBS0QsS0FBSztnQkFDbkIsT0FBT29CLG9CQUFvQm5CLE9BQU87WUFDdEMsT0FDSyxJQUFJLE9BQU95QixJQUFJLENBQUN6QixJQUFJLEtBQUssVUFBVTtnQkFDcEMwQixRQUFRRixrQkFBa0JDLElBQUksQ0FBQ3pCLElBQUksRUFBRUQ7Z0JBQ3JDLElBQUkyQixTQUFTLElBQUk7b0JBQ2IsT0FBT1Asb0JBQW9CbkIsT0FBTyxNQUFNMEI7Z0JBQzVDO1lBQ0o7UUFDSjtJQUNKO0lBQ0EsT0FBTztBQUNYO0FBQ08sU0FBU0MsUUFBUUYsSUFBSSxFQUFFMUIsR0FBRztJQUM3QixJQUFJMEIsU0FBUzFCLEtBQUs7UUFDZCxPQUFPO0lBQ1g7SUFDQSxNQUFNcUIsT0FBT0ksa0JBQWtCQyxNQUFNMUI7SUFDckMsSUFBSXFCLFNBQVMsSUFBSTtRQUNiLE1BQU0sSUFBSVEsTUFBTTtJQUNwQjtJQUNBLE9BQU8sQ0FBQyxDQUFDLEVBQUVSLEtBQUssQ0FBQztBQUNyQjtBQUNBOztDQUVDLEdBQ00sU0FBU1MsYUFBYTlCLEdBQUc7SUFDNUIsSUFBSUEsUUFBUStCLFdBQVc7UUFDbkIsT0FBTztJQUNYO0lBQ0EsSUFBSS9CLEtBQUs7UUFDTCxJQUFJSSxNQUFNQyxPQUFPLENBQUNMLE1BQU07WUFDcEIsSUFBSyxJQUFJUyxJQUFJLEdBQUdRLE1BQU1qQixJQUFJTyxNQUFNLEVBQUVFLElBQUlRLEtBQUtSLElBQUs7Z0JBQzVDLElBQUlxQixhQUFhOUIsR0FBRyxDQUFDUyxFQUFFLEdBQUc7b0JBQ3RCLE9BQU87Z0JBQ1g7WUFDSjtRQUNKLE9BQ0ssSUFBSSxPQUFPVCxRQUFRLFVBQVU7WUFDOUIsTUFBTWdDLFVBQVU3QixZQUFZSDtZQUM1QixNQUFNaUMsZ0JBQWdCRCxRQUFRekIsTUFBTTtZQUNwQyxJQUFLLElBQUlFLElBQUksR0FBR0EsSUFBSXdCLGVBQWV4QixJQUFLO2dCQUNwQyxJQUFJcUIsYUFBYTlCLEdBQUcsQ0FBQ2dDLE9BQU8sQ0FBQ3ZCLEVBQUUsQ0FBQyxHQUFHO29CQUMvQixPQUFPO2dCQUNYO1lBQ0o7UUFDSjtJQUNKO0lBQ0EsT0FBTztBQUNYO0FBQ0EsU0FBU3lCLDJCQUEyQkMsT0FBTyxFQUFFQyxJQUFJO0lBQzdDLE1BQU1DLGVBQWU7UUFBQ0Y7S0FBUTtJQUM5QixJQUFLLE1BQU1sQyxPQUFPbUMsS0FBTTtRQUNwQixNQUFNRSxRQUFRLE9BQU9GLElBQUksQ0FBQ25DLElBQUksS0FBSyxXQUM3QlcsS0FBS0UsU0FBUyxDQUFDc0IsSUFBSSxDQUFDbkMsSUFBSSxFQUFFLE1BQU0sS0FDaENtQyxJQUFJLENBQUNuQyxJQUFJLEVBQUUsZUFBZTtRQUNoQyxJQUFJLE9BQU9xQyxVQUFVLGFBQWE7WUFDOUJELGFBQWEzQixJQUFJLENBQUMsQ0FBQyxFQUFFVCxJQUFJLEVBQUUsRUFBRXFDLE1BQU0sQ0FBQztRQUN4QztJQUNKO0lBQ0EsT0FBT0QsYUFBYUUsSUFBSSxDQUFDO0FBQzdCO0FBQ08sTUFBTUMsbUJBQW1CWDtJQUM1QlksWUFBWU4sT0FBTyxFQUFFTyxJQUFJLEVBQUVDLEtBQUssRUFBRUMsU0FBUyxFQUFFQyxJQUFJLENBQUU7UUFDL0MsS0FBSyxDQUFDWCwyQkFBMkJDLFNBQVM7WUFBRU87WUFBTUM7WUFBT0M7WUFBV0M7UUFBSztRQUN6RWhELE9BQU9pRCxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZYLE9BQU9JO1FBQ1g7UUFDQTdDLE9BQU9pRCxjQUFjLENBQUMsSUFBSSxFQUFFLFNBQVM7WUFDakNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZYLE9BQU9LO1FBQ1g7UUFDQTlDLE9BQU9pRCxjQUFjLENBQUMsSUFBSSxFQUFFLGFBQWE7WUFDckNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZYLE9BQU9NO1FBQ1g7UUFDQS9DLE9BQU9pRCxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZYLE9BQU9PO1FBQ1g7UUFDQWhELE9BQU9xRCxjQUFjLENBQUMsSUFBSSxFQUFFLFdBQVdwRCxTQUFTLEdBQUcsb0VBQW9FO1FBQ3ZILElBQUksQ0FBQ3FDLE9BQU8sR0FBR0QsMkJBQTJCQyxTQUFTO1lBQy9DTztZQUNBQztZQUNBQztZQUNBQztRQUNKO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLWZvcm0tYnVpbGRlci10dXRvcmlhbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9mYXN0LWpzb24tcGF0Y2gvc3JjL2hlbHBlcnMuanM/Mjk5OSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAdHMtbm9jaGVja1xuLy8gSW5saW5lZCBiZWNhdXNlIG9mIEVTTSBpbXBvcnQgaXNzdWVzXG4vKiFcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9TdGFyY291bnRlci1KYWNrL0pTT04tUGF0Y2hcbiAqIChjKSAyMDE3LTIwMjIgSm9hY2hpbSBXZXN0ZXJcbiAqIE1JVCBsaWNlbnNlZFxuICovXG5jb25zdCBfaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuZXhwb3J0IGZ1bmN0aW9uIGhhc093blByb3BlcnR5KG9iaiwga2V5KSB7XG4gICAgcmV0dXJuIF9oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBfb2JqZWN0S2V5cyhvYmopIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSB7XG4gICAgICAgIGNvbnN0IGtleXMgPSBuZXcgQXJyYXkob2JqLmxlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwga2V5cy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAga2V5c1trXSA9IFwiXCIgKyBrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBrZXlzO1xuICAgIH1cbiAgICBpZiAoT2JqZWN0LmtleXMpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKG9iaik7XG4gICAgfVxuICAgIGxldCBrZXlzID0gW107XG4gICAgZm9yIChsZXQgaSBpbiBvYmopIHtcbiAgICAgICAgaWYgKGhhc093blByb3BlcnR5KG9iaiwgaSkpIHtcbiAgICAgICAgICAgIGtleXMucHVzaChpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ga2V5cztcbn1cbi8qKlxuICogRGVlcGx5IGNsb25lIHRoZSBvYmplY3QuXG4gKiBodHRwczovL2pzcGVyZi5jb20vZGVlcC1jb3B5LXZzLWpzb24tc3RyaW5naWZ5LWpzb24tcGFyc2UvMjUgKHJlY3Vyc2l2ZURlZXBDb3B5KVxuICogQHBhcmFtICB7YW55fSBvYmogdmFsdWUgdG8gY2xvbmVcbiAqIEByZXR1cm4ge2FueX0gY2xvbmVkIG9ialxuICovXG5leHBvcnQgZnVuY3Rpb24gX2RlZXBDbG9uZShvYmopIHtcbiAgICBzd2l0Y2ggKHR5cGVvZiBvYmopIHtcbiAgICAgICAgY2FzZSBcIm9iamVjdFwiOlxuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqKSk7IC8vRmFzdGVyIHRoYW4gRVM1IGNsb25lIC0gaHR0cDovL2pzcGVyZi5jb20vZGVlcC1jbG9uaW5nLW9mLW9iamVjdHMvNVxuICAgICAgICBjYXNlIFwidW5kZWZpbmVkXCI6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDsgLy90aGlzIGlzIGhvdyBKU09OLnN0cmluZ2lmeSBiZWhhdmVzIGZvciBhcnJheSBpdGVtc1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIG9iajsgLy9ubyBuZWVkIHRvIGNsb25lIHByaW1pdGl2ZXNcbiAgICB9XG59XG4vLzN4IGZhc3RlciB0aGFuIGNhY2hlZCAvXlxcZCskLy50ZXN0KHN0cilcbmV4cG9ydCBmdW5jdGlvbiBpc0ludGVnZXIoc3RyKSB7XG4gICAgbGV0IGkgPSAwO1xuICAgIGNvbnN0IGxlbiA9IHN0ci5sZW5ndGg7XG4gICAgbGV0IGNoYXJDb2RlO1xuICAgIHdoaWxlIChpIDwgbGVuKSB7XG4gICAgICAgIGNoYXJDb2RlID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIGlmIChjaGFyQ29kZSA+PSA0OCAmJiBjaGFyQ29kZSA8PSA1Nykge1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuICogRXNjYXBlcyBhIGpzb24gcG9pbnRlciBwYXRoXG4gKiBAcGFyYW0gcGF0aCBUaGUgcmF3IHBvaW50ZXJcbiAqIEByZXR1cm4gdGhlIEVzY2FwZWQgcGF0aFxuICovXG5leHBvcnQgZnVuY3Rpb24gZXNjYXBlUGF0aENvbXBvbmVudChwYXRoKSB7XG4gICAgaWYgKHBhdGguaW5kZXhPZihcIi9cIikgPT09IC0xICYmIHBhdGguaW5kZXhPZihcIn5cIikgPT09IC0xKVxuICAgICAgICByZXR1cm4gcGF0aDtcbiAgICByZXR1cm4gcGF0aC5yZXBsYWNlKC9+L2csIFwifjBcIikucmVwbGFjZSgvXFwvL2csIFwifjFcIik7XG59XG4vKipcbiAqIFVuZXNjYXBlcyBhIGpzb24gcG9pbnRlciBwYXRoXG4gKiBAcGFyYW0gcGF0aCBUaGUgZXNjYXBlZCBwb2ludGVyXG4gKiBAcmV0dXJuIFRoZSB1bmVzY2FwZWQgcGF0aFxuICovXG5leHBvcnQgZnVuY3Rpb24gdW5lc2NhcGVQYXRoQ29tcG9uZW50KHBhdGgpIHtcbiAgICByZXR1cm4gcGF0aC5yZXBsYWNlKC9+MS9nLCBcIi9cIikucmVwbGFjZSgvfjAvZywgXCJ+XCIpO1xufVxuZXhwb3J0IGZ1bmN0aW9uIF9nZXRQYXRoUmVjdXJzaXZlKHJvb3QsIG9iaikge1xuICAgIGxldCBmb3VuZDtcbiAgICBmb3IgKGxldCBrZXkgaW4gcm9vdCkge1xuICAgICAgICBpZiAoaGFzT3duUHJvcGVydHkocm9vdCwga2V5KSkge1xuICAgICAgICAgICAgaWYgKHJvb3Rba2V5XSA9PT0gb2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVzY2FwZVBhdGhDb21wb25lbnQoa2V5KSArIFwiL1wiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHJvb3Rba2V5XSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgIGZvdW5kID0gX2dldFBhdGhSZWN1cnNpdmUocm9vdFtrZXldLCBvYmopO1xuICAgICAgICAgICAgICAgIGlmIChmb3VuZCAhPSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlc2NhcGVQYXRoQ29tcG9uZW50KGtleSkgKyBcIi9cIiArIGZvdW5kO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gXCJcIjtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZXRQYXRoKHJvb3QsIG9iaikge1xuICAgIGlmIChyb290ID09PSBvYmopIHtcbiAgICAgICAgcmV0dXJuIFwiL1wiO1xuICAgIH1cbiAgICBjb25zdCBwYXRoID0gX2dldFBhdGhSZWN1cnNpdmUocm9vdCwgb2JqKTtcbiAgICBpZiAocGF0aCA9PT0gXCJcIikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJPYmplY3Qgbm90IGZvdW5kIGluIHJvb3RcIik7XG4gICAgfVxuICAgIHJldHVybiBgLyR7cGF0aH1gO1xufVxuLyoqXG4gKiBSZWN1cnNpdmVseSBjaGVja3Mgd2hldGhlciBhbiBvYmplY3QgaGFzIGFueSB1bmRlZmluZWQgdmFsdWVzIGluc2lkZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhhc1VuZGVmaW5lZChvYmopIHtcbiAgICBpZiAob2JqID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChvYmopIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IG9iai5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChoYXNVbmRlZmluZWQob2JqW2ldKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgY29uc3Qgb2JqS2V5cyA9IF9vYmplY3RLZXlzKG9iaik7XG4gICAgICAgICAgICBjb25zdCBvYmpLZXlzTGVuZ3RoID0gb2JqS2V5cy5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9iaktleXNMZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChoYXNVbmRlZmluZWQob2JqW29iaktleXNbaV1dKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gcGF0Y2hFcnJvck1lc3NhZ2VGb3JtYXR0ZXIobWVzc2FnZSwgYXJncykge1xuICAgIGNvbnN0IG1lc3NhZ2VQYXJ0cyA9IFttZXNzYWdlXTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBhcmdzKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdHlwZW9mIGFyZ3Nba2V5XSA9PT0gXCJvYmplY3RcIlxuICAgICAgICAgICAgPyBKU09OLnN0cmluZ2lmeShhcmdzW2tleV0sIG51bGwsIDIpXG4gICAgICAgICAgICA6IGFyZ3Nba2V5XTsgLy8gcHJldHR5IHByaW50XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIG1lc3NhZ2VQYXJ0cy5wdXNoKGAke2tleX06ICR7dmFsdWV9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lc3NhZ2VQYXJ0cy5qb2luKFwiXFxuXCIpO1xufVxuZXhwb3J0IGNsYXNzIFBhdGNoRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgbmFtZSwgaW5kZXgsIG9wZXJhdGlvbiwgdHJlZSkge1xuICAgICAgICBzdXBlcihwYXRjaEVycm9yTWVzc2FnZUZvcm1hdHRlcihtZXNzYWdlLCB7IG5hbWUsIGluZGV4LCBvcGVyYXRpb24sIHRyZWUgfSkpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiBuYW1lXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJpbmRleFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogaW5kZXhcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9wZXJhdGlvblwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogb3BlcmF0aW9uXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0cmVlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cmVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgbmV3LnRhcmdldC5wcm90b3R5cGUpOyAvLyByZXN0b3JlIHByb3RvdHlwZSBjaGFpbiwgc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS80ODM0MjM1OVxuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBwYXRjaEVycm9yTWVzc2FnZUZvcm1hdHRlcihtZXNzYWdlLCB7XG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgICBvcGVyYXRpb24sXG4gICAgICAgICAgICB0cmVlLFxuICAgICAgICB9KTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiX2hhc093blByb3BlcnR5IiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJvYmoiLCJrZXkiLCJjYWxsIiwiX29iamVjdEtleXMiLCJBcnJheSIsImlzQXJyYXkiLCJrZXlzIiwibGVuZ3RoIiwiayIsImkiLCJwdXNoIiwiX2RlZXBDbG9uZSIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsImlzSW50ZWdlciIsInN0ciIsImxlbiIsImNoYXJDb2RlIiwiY2hhckNvZGVBdCIsImVzY2FwZVBhdGhDb21wb25lbnQiLCJwYXRoIiwiaW5kZXhPZiIsInJlcGxhY2UiLCJ1bmVzY2FwZVBhdGhDb21wb25lbnQiLCJfZ2V0UGF0aFJlY3Vyc2l2ZSIsInJvb3QiLCJmb3VuZCIsImdldFBhdGgiLCJFcnJvciIsImhhc1VuZGVmaW5lZCIsInVuZGVmaW5lZCIsIm9iaktleXMiLCJvYmpLZXlzTGVuZ3RoIiwicGF0Y2hFcnJvck1lc3NhZ2VGb3JtYXR0ZXIiLCJtZXNzYWdlIiwiYXJncyIsIm1lc3NhZ2VQYXJ0cyIsInZhbHVlIiwiam9pbiIsIlBhdGNoRXJyb3IiLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJpbmRleCIsIm9wZXJhdGlvbiIsInRyZWUiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInNldFByb3RvdHlwZU9mIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/src/helpers.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/function_calling.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/function_calling.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   convertToOpenAIFunction: () => (/* binding */ convertToOpenAIFunction),\n/* harmony export */   convertToOpenAITool: () => (/* binding */ convertToOpenAITool)\n/* harmony export */ });\n/* harmony import */ var zod_to_json_schema__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod-to-json-schema */ \"(rsc)/./node_modules/zod-to-json-schema/dist/esm/index.js\");\n\n/**\n * Formats a `StructuredTool` instance into a format that is compatible\n * with OpenAI function calling. It uses the `zodToJsonSchema`\n * function to convert the schema of the `StructuredTool` into a JSON\n * schema, which is then used as the parameters for the OpenAI function.\n */ function convertToOpenAIFunction(tool) {\n    return {\n        name: tool.name,\n        description: tool.description,\n        parameters: (0,zod_to_json_schema__WEBPACK_IMPORTED_MODULE_0__.zodToJsonSchema)(tool.schema)\n    };\n}\n/**\n * Formats a `StructuredTool` instance into a format that is compatible\n * with OpenAI tool calling. It uses the `zodToJsonSchema`\n * function to convert the schema of the `StructuredTool` into a JSON\n * schema, which is then used as the parameters for the OpenAI tool.\n */ function convertToOpenAITool(tool) {\n    return {\n        type: \"function\",\n        function: convertToOpenAIFunction(tool)\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvZnVuY3Rpb25fY2FsbGluZy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBcUQ7QUFDckQ7Ozs7O0NBS0MsR0FDTSxTQUFTQyx3QkFBd0JDLElBQUk7SUFDeEMsT0FBTztRQUNIQyxNQUFNRCxLQUFLQyxJQUFJO1FBQ2ZDLGFBQWFGLEtBQUtFLFdBQVc7UUFDN0JDLFlBQVlMLG1FQUFlQSxDQUFDRSxLQUFLSSxNQUFNO0lBQzNDO0FBQ0o7QUFDQTs7Ozs7Q0FLQyxHQUNNLFNBQVNDLG9CQUFvQkwsSUFBSTtJQUNwQyxPQUFPO1FBQ0hNLE1BQU07UUFDTkMsVUFBVVIsd0JBQXdCQztJQUN0QztBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2Z1bmN0aW9uX2NhbGxpbmcuanM/OTQ0YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB6b2RUb0pzb25TY2hlbWEgfSBmcm9tIFwiem9kLXRvLWpzb24tc2NoZW1hXCI7XG4vKipcbiAqIEZvcm1hdHMgYSBgU3RydWN0dXJlZFRvb2xgIGluc3RhbmNlIGludG8gYSBmb3JtYXQgdGhhdCBpcyBjb21wYXRpYmxlXG4gKiB3aXRoIE9wZW5BSSBmdW5jdGlvbiBjYWxsaW5nLiBJdCB1c2VzIHRoZSBgem9kVG9Kc29uU2NoZW1hYFxuICogZnVuY3Rpb24gdG8gY29udmVydCB0aGUgc2NoZW1hIG9mIHRoZSBgU3RydWN0dXJlZFRvb2xgIGludG8gYSBKU09OXG4gKiBzY2hlbWEsIHdoaWNoIGlzIHRoZW4gdXNlZCBhcyB0aGUgcGFyYW1ldGVycyBmb3IgdGhlIE9wZW5BSSBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnZlcnRUb09wZW5BSUZ1bmN0aW9uKHRvb2wpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiB0b29sLm5hbWUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiB0b29sLmRlc2NyaXB0aW9uLFxuICAgICAgICBwYXJhbWV0ZXJzOiB6b2RUb0pzb25TY2hlbWEodG9vbC5zY2hlbWEpLFxuICAgIH07XG59XG4vKipcbiAqIEZvcm1hdHMgYSBgU3RydWN0dXJlZFRvb2xgIGluc3RhbmNlIGludG8gYSBmb3JtYXQgdGhhdCBpcyBjb21wYXRpYmxlXG4gKiB3aXRoIE9wZW5BSSB0b29sIGNhbGxpbmcuIEl0IHVzZXMgdGhlIGB6b2RUb0pzb25TY2hlbWFgXG4gKiBmdW5jdGlvbiB0byBjb252ZXJ0IHRoZSBzY2hlbWEgb2YgdGhlIGBTdHJ1Y3R1cmVkVG9vbGAgaW50byBhIEpTT05cbiAqIHNjaGVtYSwgd2hpY2ggaXMgdGhlbiB1c2VkIGFzIHRoZSBwYXJhbWV0ZXJzIGZvciB0aGUgT3BlbkFJIHRvb2wuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0VG9PcGVuQUlUb29sKHRvb2wpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBcImZ1bmN0aW9uXCIsXG4gICAgICAgIGZ1bmN0aW9uOiBjb252ZXJ0VG9PcGVuQUlGdW5jdGlvbih0b29sKSxcbiAgICB9O1xufVxuIl0sIm5hbWVzIjpbInpvZFRvSnNvblNjaGVtYSIsImNvbnZlcnRUb09wZW5BSUZ1bmN0aW9uIiwidG9vbCIsIm5hbWUiLCJkZXNjcmlwdGlvbiIsInBhcmFtZXRlcnMiLCJzY2hlbWEiLCJjb252ZXJ0VG9PcGVuQUlUb29sIiwidHlwZSIsImZ1bmN0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/function_calling.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/hash.js":
/*!*********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/hash.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   insecureHash: () => (/* reexport safe */ _js_sha1_hash_js__WEBPACK_IMPORTED_MODULE_0__.insecureHash)\n/* harmony export */ });\n/* harmony import */ var _js_sha1_hash_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./js-sha1/hash.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/js-sha1/hash.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvaGFzaC5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFpRCIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLWZvcm0tYnVpbGRlci10dXRvcmlhbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvZGlzdC91dGlscy9oYXNoLmpzPzRiNGIiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHsgaW5zZWN1cmVIYXNoIH0gZnJvbSBcIi4vanMtc2hhMS9oYXNoLmpzXCI7XG4iXSwibmFtZXMiOlsiaW5zZWN1cmVIYXNoIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/hash.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/js-sha1/hash.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/js-sha1/hash.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   insecureHash: () => (/* binding */ insecureHash)\n/* harmony export */ });\n// @ts-nocheck\n// Inlined to deal with portability issues with importing crypto module\n/*\n * [js-sha1]{@link https://github.com/emn178/js-sha1}\n *\n * @version 0.6.0\n * @author Chen, Yi-Cyuan [emn178@gmail.com]\n * @copyright Chen, Yi-Cyuan 2014-2017\n * @license MIT\n */ /*jslint bitwise: true */ \nvar root =  false ? 0 : {};\nvar HEX_CHARS = \"0123456789abcdef\".split(\"\");\nvar EXTRA = [\n    -2147483648,\n    8388608,\n    32768,\n    128\n];\nvar SHIFT = [\n    24,\n    16,\n    8,\n    0\n];\nvar OUTPUT_TYPES = [\n    \"hex\",\n    \"array\",\n    \"digest\",\n    \"arrayBuffer\"\n];\nvar blocks = [];\nfunction Sha1(sharedMemory) {\n    if (sharedMemory) {\n        blocks[0] = blocks[16] = blocks[1] = blocks[2] = blocks[3] = blocks[4] = blocks[5] = blocks[6] = blocks[7] = blocks[8] = blocks[9] = blocks[10] = blocks[11] = blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n        this.blocks = blocks;\n    } else {\n        this.blocks = [\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0,\n            0\n        ];\n    }\n    this.h0 = 0x67452301;\n    this.h1 = 0xefcdab89;\n    this.h2 = 0x98badcfe;\n    this.h3 = 0x10325476;\n    this.h4 = 0xc3d2e1f0;\n    this.block = this.start = this.bytes = this.hBytes = 0;\n    this.finalized = this.hashed = false;\n    this.first = true;\n}\nSha1.prototype.update = function(message) {\n    if (this.finalized) {\n        return;\n    }\n    var notString = typeof message !== \"string\";\n    if (notString && message.constructor === root.ArrayBuffer) {\n        message = new Uint8Array(message);\n    }\n    var code, index = 0, i, length = message.length || 0, blocks = this.blocks;\n    while(index < length){\n        if (this.hashed) {\n            this.hashed = false;\n            blocks[0] = this.block;\n            blocks[16] = blocks[1] = blocks[2] = blocks[3] = blocks[4] = blocks[5] = blocks[6] = blocks[7] = blocks[8] = blocks[9] = blocks[10] = blocks[11] = blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n        }\n        if (notString) {\n            for(i = this.start; index < length && i < 64; ++index){\n                blocks[i >> 2] |= message[index] << SHIFT[i++ & 3];\n            }\n        } else {\n            for(i = this.start; index < length && i < 64; ++index){\n                code = message.charCodeAt(index);\n                if (code < 0x80) {\n                    blocks[i >> 2] |= code << SHIFT[i++ & 3];\n                } else if (code < 0x800) {\n                    blocks[i >> 2] |= (0xc0 | code >> 6) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | code & 0x3f) << SHIFT[i++ & 3];\n                } else if (code < 0xd800 || code >= 0xe000) {\n                    blocks[i >> 2] |= (0xe0 | code >> 12) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | code >> 6 & 0x3f) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | code & 0x3f) << SHIFT[i++ & 3];\n                } else {\n                    code = 0x10000 + ((code & 0x3ff) << 10 | message.charCodeAt(++index) & 0x3ff);\n                    blocks[i >> 2] |= (0xf0 | code >> 18) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | code >> 12 & 0x3f) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | code >> 6 & 0x3f) << SHIFT[i++ & 3];\n                    blocks[i >> 2] |= (0x80 | code & 0x3f) << SHIFT[i++ & 3];\n                }\n            }\n        }\n        this.lastByteIndex = i;\n        this.bytes += i - this.start;\n        if (i >= 64) {\n            this.block = blocks[16];\n            this.start = i - 64;\n            this.hash();\n            this.hashed = true;\n        } else {\n            this.start = i;\n        }\n    }\n    if (this.bytes > 4294967295) {\n        this.hBytes += this.bytes / 4294967296 << 0;\n        this.bytes = this.bytes % 4294967296;\n    }\n    return this;\n};\nSha1.prototype.finalize = function() {\n    if (this.finalized) {\n        return;\n    }\n    this.finalized = true;\n    var blocks = this.blocks, i = this.lastByteIndex;\n    blocks[16] = this.block;\n    blocks[i >> 2] |= EXTRA[i & 3];\n    this.block = blocks[16];\n    if (i >= 56) {\n        if (!this.hashed) {\n            this.hash();\n        }\n        blocks[0] = this.block;\n        blocks[16] = blocks[1] = blocks[2] = blocks[3] = blocks[4] = blocks[5] = blocks[6] = blocks[7] = blocks[8] = blocks[9] = blocks[10] = blocks[11] = blocks[12] = blocks[13] = blocks[14] = blocks[15] = 0;\n    }\n    blocks[14] = this.hBytes << 3 | this.bytes >>> 29;\n    blocks[15] = this.bytes << 3;\n    this.hash();\n};\nSha1.prototype.hash = function() {\n    var a = this.h0, b = this.h1, c = this.h2, d = this.h3, e = this.h4;\n    var f, j, t, blocks = this.blocks;\n    for(j = 16; j < 80; ++j){\n        t = blocks[j - 3] ^ blocks[j - 8] ^ blocks[j - 14] ^ blocks[j - 16];\n        blocks[j] = t << 1 | t >>> 31;\n    }\n    for(j = 0; j < 20; j += 5){\n        f = b & c | ~b & d;\n        t = a << 5 | a >>> 27;\n        e = t + f + e + 1518500249 + blocks[j] << 0;\n        b = b << 30 | b >>> 2;\n        f = a & b | ~a & c;\n        t = e << 5 | e >>> 27;\n        d = t + f + d + 1518500249 + blocks[j + 1] << 0;\n        a = a << 30 | a >>> 2;\n        f = e & a | ~e & b;\n        t = d << 5 | d >>> 27;\n        c = t + f + c + 1518500249 + blocks[j + 2] << 0;\n        e = e << 30 | e >>> 2;\n        f = d & e | ~d & a;\n        t = c << 5 | c >>> 27;\n        b = t + f + b + 1518500249 + blocks[j + 3] << 0;\n        d = d << 30 | d >>> 2;\n        f = c & d | ~c & e;\n        t = b << 5 | b >>> 27;\n        a = t + f + a + 1518500249 + blocks[j + 4] << 0;\n        c = c << 30 | c >>> 2;\n    }\n    for(; j < 40; j += 5){\n        f = b ^ c ^ d;\n        t = a << 5 | a >>> 27;\n        e = t + f + e + 1859775393 + blocks[j] << 0;\n        b = b << 30 | b >>> 2;\n        f = a ^ b ^ c;\n        t = e << 5 | e >>> 27;\n        d = t + f + d + 1859775393 + blocks[j + 1] << 0;\n        a = a << 30 | a >>> 2;\n        f = e ^ a ^ b;\n        t = d << 5 | d >>> 27;\n        c = t + f + c + 1859775393 + blocks[j + 2] << 0;\n        e = e << 30 | e >>> 2;\n        f = d ^ e ^ a;\n        t = c << 5 | c >>> 27;\n        b = t + f + b + 1859775393 + blocks[j + 3] << 0;\n        d = d << 30 | d >>> 2;\n        f = c ^ d ^ e;\n        t = b << 5 | b >>> 27;\n        a = t + f + a + 1859775393 + blocks[j + 4] << 0;\n        c = c << 30 | c >>> 2;\n    }\n    for(; j < 60; j += 5){\n        f = b & c | b & d | c & d;\n        t = a << 5 | a >>> 27;\n        e = t + f + e - 1894007588 + blocks[j] << 0;\n        b = b << 30 | b >>> 2;\n        f = a & b | a & c | b & c;\n        t = e << 5 | e >>> 27;\n        d = t + f + d - 1894007588 + blocks[j + 1] << 0;\n        a = a << 30 | a >>> 2;\n        f = e & a | e & b | a & b;\n        t = d << 5 | d >>> 27;\n        c = t + f + c - 1894007588 + blocks[j + 2] << 0;\n        e = e << 30 | e >>> 2;\n        f = d & e | d & a | e & a;\n        t = c << 5 | c >>> 27;\n        b = t + f + b - 1894007588 + blocks[j + 3] << 0;\n        d = d << 30 | d >>> 2;\n        f = c & d | c & e | d & e;\n        t = b << 5 | b >>> 27;\n        a = t + f + a - 1894007588 + blocks[j + 4] << 0;\n        c = c << 30 | c >>> 2;\n    }\n    for(; j < 80; j += 5){\n        f = b ^ c ^ d;\n        t = a << 5 | a >>> 27;\n        e = t + f + e - 899497514 + blocks[j] << 0;\n        b = b << 30 | b >>> 2;\n        f = a ^ b ^ c;\n        t = e << 5 | e >>> 27;\n        d = t + f + d - 899497514 + blocks[j + 1] << 0;\n        a = a << 30 | a >>> 2;\n        f = e ^ a ^ b;\n        t = d << 5 | d >>> 27;\n        c = t + f + c - 899497514 + blocks[j + 2] << 0;\n        e = e << 30 | e >>> 2;\n        f = d ^ e ^ a;\n        t = c << 5 | c >>> 27;\n        b = t + f + b - 899497514 + blocks[j + 3] << 0;\n        d = d << 30 | d >>> 2;\n        f = c ^ d ^ e;\n        t = b << 5 | b >>> 27;\n        a = t + f + a - 899497514 + blocks[j + 4] << 0;\n        c = c << 30 | c >>> 2;\n    }\n    this.h0 = this.h0 + a << 0;\n    this.h1 = this.h1 + b << 0;\n    this.h2 = this.h2 + c << 0;\n    this.h3 = this.h3 + d << 0;\n    this.h4 = this.h4 + e << 0;\n};\nSha1.prototype.hex = function() {\n    this.finalize();\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4;\n    return HEX_CHARS[h0 >> 28 & 0x0f] + HEX_CHARS[h0 >> 24 & 0x0f] + HEX_CHARS[h0 >> 20 & 0x0f] + HEX_CHARS[h0 >> 16 & 0x0f] + HEX_CHARS[h0 >> 12 & 0x0f] + HEX_CHARS[h0 >> 8 & 0x0f] + HEX_CHARS[h0 >> 4 & 0x0f] + HEX_CHARS[h0 & 0x0f] + HEX_CHARS[h1 >> 28 & 0x0f] + HEX_CHARS[h1 >> 24 & 0x0f] + HEX_CHARS[h1 >> 20 & 0x0f] + HEX_CHARS[h1 >> 16 & 0x0f] + HEX_CHARS[h1 >> 12 & 0x0f] + HEX_CHARS[h1 >> 8 & 0x0f] + HEX_CHARS[h1 >> 4 & 0x0f] + HEX_CHARS[h1 & 0x0f] + HEX_CHARS[h2 >> 28 & 0x0f] + HEX_CHARS[h2 >> 24 & 0x0f] + HEX_CHARS[h2 >> 20 & 0x0f] + HEX_CHARS[h2 >> 16 & 0x0f] + HEX_CHARS[h2 >> 12 & 0x0f] + HEX_CHARS[h2 >> 8 & 0x0f] + HEX_CHARS[h2 >> 4 & 0x0f] + HEX_CHARS[h2 & 0x0f] + HEX_CHARS[h3 >> 28 & 0x0f] + HEX_CHARS[h3 >> 24 & 0x0f] + HEX_CHARS[h3 >> 20 & 0x0f] + HEX_CHARS[h3 >> 16 & 0x0f] + HEX_CHARS[h3 >> 12 & 0x0f] + HEX_CHARS[h3 >> 8 & 0x0f] + HEX_CHARS[h3 >> 4 & 0x0f] + HEX_CHARS[h3 & 0x0f] + HEX_CHARS[h4 >> 28 & 0x0f] + HEX_CHARS[h4 >> 24 & 0x0f] + HEX_CHARS[h4 >> 20 & 0x0f] + HEX_CHARS[h4 >> 16 & 0x0f] + HEX_CHARS[h4 >> 12 & 0x0f] + HEX_CHARS[h4 >> 8 & 0x0f] + HEX_CHARS[h4 >> 4 & 0x0f] + HEX_CHARS[h4 & 0x0f];\n};\nSha1.prototype.toString = Sha1.prototype.hex;\nSha1.prototype.digest = function() {\n    this.finalize();\n    var h0 = this.h0, h1 = this.h1, h2 = this.h2, h3 = this.h3, h4 = this.h4;\n    return [\n        h0 >> 24 & 0xff,\n        h0 >> 16 & 0xff,\n        h0 >> 8 & 0xff,\n        h0 & 0xff,\n        h1 >> 24 & 0xff,\n        h1 >> 16 & 0xff,\n        h1 >> 8 & 0xff,\n        h1 & 0xff,\n        h2 >> 24 & 0xff,\n        h2 >> 16 & 0xff,\n        h2 >> 8 & 0xff,\n        h2 & 0xff,\n        h3 >> 24 & 0xff,\n        h3 >> 16 & 0xff,\n        h3 >> 8 & 0xff,\n        h3 & 0xff,\n        h4 >> 24 & 0xff,\n        h4 >> 16 & 0xff,\n        h4 >> 8 & 0xff,\n        h4 & 0xff\n    ];\n};\nSha1.prototype.array = Sha1.prototype.digest;\nSha1.prototype.arrayBuffer = function() {\n    this.finalize();\n    var buffer = new ArrayBuffer(20);\n    var dataView = new DataView(buffer);\n    dataView.setUint32(0, this.h0);\n    dataView.setUint32(4, this.h1);\n    dataView.setUint32(8, this.h2);\n    dataView.setUint32(12, this.h3);\n    dataView.setUint32(16, this.h4);\n    return buffer;\n};\nconst insecureHash = (message)=>{\n    return new Sha1(true).update(message)[\"hex\"]();\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvanMtc2hhMS9oYXNoLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxjQUFjO0FBQ2QsdUVBQXVFO0FBQ3ZFOzs7Ozs7O0NBT0MsR0FDRCx1QkFBdUIsR0FDVjtBQUNiLElBQUlBLE9BQU8sTUFBMEIsR0FBR0MsQ0FBTUEsR0FBRyxDQUFDO0FBQ2xELElBQUlDLFlBQVksbUJBQW1CQyxLQUFLLENBQUM7QUFDekMsSUFBSUMsUUFBUTtJQUFDLENBQUM7SUFBWTtJQUFTO0lBQU87Q0FBSTtBQUM5QyxJQUFJQyxRQUFRO0lBQUM7SUFBSTtJQUFJO0lBQUc7Q0FBRTtBQUMxQixJQUFJQyxlQUFlO0lBQUM7SUFBTztJQUFTO0lBQVU7Q0FBYztBQUM1RCxJQUFJQyxTQUFTLEVBQUU7QUFDZixTQUFTQyxLQUFLQyxZQUFZO0lBQ3RCLElBQUlBLGNBQWM7UUFDZEYsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEdBQUcsR0FDTkEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEVBQUUsR0FDTEEsTUFBTSxDQUFDLEdBQUcsR0FDTkEsTUFBTSxDQUFDLEdBQUcsR0FDTkEsTUFBTSxDQUFDLEdBQUcsR0FDTkEsTUFBTSxDQUFDLEdBQUcsR0FDTkEsTUFBTSxDQUFDLEdBQUcsR0FDTkEsTUFBTSxDQUFDLEdBQUcsR0FDTjtRQUNwRSxJQUFJLENBQUNBLE1BQU0sR0FBR0E7SUFDbEIsT0FDSztRQUNELElBQUksQ0FBQ0EsTUFBTSxHQUFHO1lBQUM7WUFBRztZQUFHO1lBQUc7WUFBRztZQUFHO1lBQUc7WUFBRztZQUFH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U0FBUyxDQUFDLE1BQU8sSUFBSyxLQUFLLEdBQzNCQSxTQUFTLENBQUNRLEtBQUssS0FBSyxHQUNwQlIsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLEtBQU0sS0FBSyxHQUM1QkEsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLElBQUssS0FBSyxHQUMzQkEsU0FBUyxDQUFDLE1BQU8sSUFBSyxLQUFLLEdBQzNCQSxTQUFTLENBQUNTLEtBQUssS0FBSyxHQUNwQlQsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLEtBQU0sS0FBSyxHQUM1QkEsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLElBQUssS0FBSyxHQUMzQkEsU0FBUyxDQUFDLE1BQU8sSUFBSyxLQUFLLEdBQzNCQSxTQUFTLENBQUNVLEtBQUssS0FBSyxHQUNwQlYsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLEtBQU0sS0FBSyxHQUM1QkEsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLElBQUssS0FBSyxHQUMzQkEsU0FBUyxDQUFDLE1BQU8sSUFBSyxLQUFLLEdBQzNCQSxTQUFTLENBQUNXLEtBQUssS0FBSyxHQUNwQlgsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLEtBQU0sS0FBSyxHQUM1QkEsU0FBUyxDQUFDLE1BQU8sS0FBTSxLQUFLLEdBQzVCQSxTQUFTLENBQUMsTUFBTyxLQUFNLEtBQUssR0FDNUJBLFNBQVMsQ0FBQyxNQUFPLElBQUssS0FBSyxHQUMzQkEsU0FBUyxDQUFDLE1BQU8sSUFBSyxLQUFLLEdBQzNCQSxTQUFTLENBQUNZLEtBQUssS0FBSztBQUM1QjtBQUNBTixLQUFLYyxTQUFTLENBQUN3QixRQUFRLEdBQUd0QyxLQUFLYyxTQUFTLENBQUN1QixHQUFHO0FBQzVDckMsS0FBS2MsU0FBUyxDQUFDeUIsTUFBTSxHQUFHO0lBQ3BCLElBQUksQ0FBQ1gsUUFBUTtJQUNiLElBQUkxQixLQUFLLElBQUksQ0FBQ0EsRUFBRSxFQUFFQyxLQUFLLElBQUksQ0FBQ0EsRUFBRSxFQUFFQyxLQUFLLElBQUksQ0FBQ0EsRUFBRSxFQUFFQyxLQUFLLElBQUksQ0FBQ0EsRUFBRSxFQUFFQyxLQUFLLElBQUksQ0FBQ0EsRUFBRTtJQUN4RSxPQUFPO1FBQ0ZKLE1BQU0sS0FBTTtRQUNaQSxNQUFNLEtBQU07UUFDWkEsTUFBTSxJQUFLO1FBQ1pBLEtBQUs7UUFDSkMsTUFBTSxLQUFNO1FBQ1pBLE1BQU0sS0FBTTtRQUNaQSxNQUFNLElBQUs7UUFDWkEsS0FBSztRQUNKQyxNQUFNLEtBQU07UUFDWkEsTUFBTSxLQUFNO1FBQ1pBLE1BQU0sSUFBSztRQUNaQSxLQUFLO1FBQ0pDLE1BQU0sS0FBTTtRQUNaQSxNQUFNLEtBQU07UUFDWkEsTUFBTSxJQUFLO1FBQ1pBLEtBQUs7UUFDSkMsTUFBTSxLQUFNO1FBQ1pBLE1BQU0sS0FBTTtRQUNaQSxNQUFNLElBQUs7UUFDWkEsS0FBSztLQUNSO0FBQ0w7QUFDQU4sS0FBS2MsU0FBUyxDQUFDMEIsS0FBSyxHQUFHeEMsS0FBS2MsU0FBUyxDQUFDeUIsTUFBTTtBQUM1Q3ZDLEtBQUtjLFNBQVMsQ0FBQzJCLFdBQVcsR0FBRztJQUN6QixJQUFJLENBQUNiLFFBQVE7SUFDYixJQUFJYyxTQUFTLElBQUl2QixZQUFZO0lBQzdCLElBQUl3QixXQUFXLElBQUlDLFNBQVNGO0lBQzVCQyxTQUFTRSxTQUFTLENBQUMsR0FBRyxJQUFJLENBQUMzQyxFQUFFO0lBQzdCeUMsU0FBU0UsU0FBUyxDQUFDLEdBQUcsSUFBSSxDQUFDMUMsRUFBRTtJQUM3QndDLFNBQVNFLFNBQVMsQ0FBQyxHQUFHLElBQUksQ0FBQ3pDLEVBQUU7SUFDN0J1QyxTQUFTRSxTQUFTLENBQUMsSUFBSSxJQUFJLENBQUN4QyxFQUFFO0lBQzlCc0MsU0FBU0UsU0FBUyxDQUFDLElBQUksSUFBSSxDQUFDdkMsRUFBRTtJQUM5QixPQUFPb0M7QUFDWDtBQUNPLE1BQU1JLGVBQWUsQ0FBQzlCO0lBQ3pCLE9BQU8sSUFBSWhCLEtBQUssTUFBTWUsTUFBTSxDQUFDQyxRQUFRLENBQUMsTUFBTTtBQUNoRCxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL2pzLXNoYTEvaGFzaC5qcz8xZGM2Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIEB0cy1ub2NoZWNrXG4vLyBJbmxpbmVkIHRvIGRlYWwgd2l0aCBwb3J0YWJpbGl0eSBpc3N1ZXMgd2l0aCBpbXBvcnRpbmcgY3J5cHRvIG1vZHVsZVxuLypcbiAqIFtqcy1zaGExXXtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZW1uMTc4L2pzLXNoYTF9XG4gKlxuICogQHZlcnNpb24gMC42LjBcbiAqIEBhdXRob3IgQ2hlbiwgWWktQ3l1YW4gW2VtbjE3OEBnbWFpbC5jb21dXG4gKiBAY29weXJpZ2h0IENoZW4sIFlpLUN5dWFuIDIwMTQtMjAxN1xuICogQGxpY2Vuc2UgTUlUXG4gKi9cbi8qanNsaW50IGJpdHdpc2U6IHRydWUgKi9cblwidXNlIHN0cmljdFwiO1xudmFyIHJvb3QgPSB0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiID8gd2luZG93IDoge307XG52YXIgSEVYX0NIQVJTID0gXCIwMTIzNDU2Nzg5YWJjZGVmXCIuc3BsaXQoXCJcIik7XG52YXIgRVhUUkEgPSBbLTIxNDc0ODM2NDgsIDgzODg2MDgsIDMyNzY4LCAxMjhdO1xudmFyIFNISUZUID0gWzI0LCAxNiwgOCwgMF07XG52YXIgT1VUUFVUX1RZUEVTID0gW1wiaGV4XCIsIFwiYXJyYXlcIiwgXCJkaWdlc3RcIiwgXCJhcnJheUJ1ZmZlclwiXTtcbnZhciBibG9ja3MgPSBbXTtcbmZ1bmN0aW9uIFNoYTEoc2hhcmVkTWVtb3J5KSB7XG4gICAgaWYgKHNoYXJlZE1lbW9yeSkge1xuICAgICAgICBibG9ja3NbMF0gPVxuICAgICAgICAgICAgYmxvY2tzWzE2XSA9XG4gICAgICAgICAgICAgICAgYmxvY2tzWzFdID1cbiAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzJdID1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1szXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzRdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzVdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1s2XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzddID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzhdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1s5XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzEwXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1sxMV0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzEyXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzEzXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1sxNF0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzE1XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMDtcbiAgICAgICAgdGhpcy5ibG9ja3MgPSBibG9ja3M7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aGlzLmJsb2NrcyA9IFswLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwXTtcbiAgICB9XG4gICAgdGhpcy5oMCA9IDB4Njc0NTIzMDE7XG4gICAgdGhpcy5oMSA9IDB4ZWZjZGFiODk7XG4gICAgdGhpcy5oMiA9IDB4OThiYWRjZmU7XG4gICAgdGhpcy5oMyA9IDB4MTAzMjU0NzY7XG4gICAgdGhpcy5oNCA9IDB4YzNkMmUxZjA7XG4gICAgdGhpcy5ibG9jayA9IHRoaXMuc3RhcnQgPSB0aGlzLmJ5dGVzID0gdGhpcy5oQnl0ZXMgPSAwO1xuICAgIHRoaXMuZmluYWxpemVkID0gdGhpcy5oYXNoZWQgPSBmYWxzZTtcbiAgICB0aGlzLmZpcnN0ID0gdHJ1ZTtcbn1cblNoYTEucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIG5vdFN0cmluZyA9IHR5cGVvZiBtZXNzYWdlICE9PSBcInN0cmluZ1wiO1xuICAgIGlmIChub3RTdHJpbmcgJiYgbWVzc2FnZS5jb25zdHJ1Y3RvciA9PT0gcm9vdC5BcnJheUJ1ZmZlcikge1xuICAgICAgICBtZXNzYWdlID0gbmV3IFVpbnQ4QXJyYXkobWVzc2FnZSk7XG4gICAgfVxuICAgIHZhciBjb2RlLCBpbmRleCA9IDAsIGksIGxlbmd0aCA9IG1lc3NhZ2UubGVuZ3RoIHx8IDAsIGJsb2NrcyA9IHRoaXMuYmxvY2tzO1xuICAgIHdoaWxlIChpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICBpZiAodGhpcy5oYXNoZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaGFzaGVkID0gZmFsc2U7XG4gICAgICAgICAgICBibG9ja3NbMF0gPSB0aGlzLmJsb2NrO1xuICAgICAgICAgICAgYmxvY2tzWzE2XSA9XG4gICAgICAgICAgICAgICAgYmxvY2tzWzFdID1cbiAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzJdID1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1szXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzRdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzVdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1s2XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzddID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzhdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1s5XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzEwXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1sxMV0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzEyXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzEzXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1sxNF0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzE1XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobm90U3RyaW5nKSB7XG4gICAgICAgICAgICBmb3IgKGkgPSB0aGlzLnN0YXJ0OyBpbmRleCA8IGxlbmd0aCAmJiBpIDwgNjQ7ICsraW5kZXgpIHtcbiAgICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSBtZXNzYWdlW2luZGV4XSA8PCBTSElGVFtpKysgJiAzXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvciAoaSA9IHRoaXMuc3RhcnQ7IGluZGV4IDwgbGVuZ3RoICYmIGkgPCA2NDsgKytpbmRleCkge1xuICAgICAgICAgICAgICAgIGNvZGUgPSBtZXNzYWdlLmNoYXJDb2RlQXQoaW5kZXgpO1xuICAgICAgICAgICAgICAgIGlmIChjb2RlIDwgMHg4MCkge1xuICAgICAgICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSBjb2RlIDw8IFNISUZUW2krKyAmIDNdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjb2RlIDwgMHg4MDApIHtcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tzW2kgPj4gMl0gfD0gKDB4YzAgfCAoY29kZSA+PiA2KSkgPDwgU0hJRlRbaSsrICYgM107XG4gICAgICAgICAgICAgICAgICAgIGJsb2Nrc1tpID4+IDJdIHw9ICgweDgwIHwgKGNvZGUgJiAweDNmKSkgPDwgU0hJRlRbaSsrICYgM107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGNvZGUgPCAweGQ4MDAgfHwgY29kZSA+PSAweGUwMDApIHtcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tzW2kgPj4gMl0gfD0gKDB4ZTAgfCAoY29kZSA+PiAxMikpIDw8IFNISUZUW2krKyAmIDNdO1xuICAgICAgICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSAoMHg4MCB8ICgoY29kZSA+PiA2KSAmIDB4M2YpKSA8PCBTSElGVFtpKysgJiAzXTtcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tzW2kgPj4gMl0gfD0gKDB4ODAgfCAoY29kZSAmIDB4M2YpKSA8PCBTSElGVFtpKysgJiAzXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGUgPVxuICAgICAgICAgICAgICAgICAgICAgICAgMHgxMDAwMCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKCgoY29kZSAmIDB4M2ZmKSA8PCAxMCkgfCAobWVzc2FnZS5jaGFyQ29kZUF0KCsraW5kZXgpICYgMHgzZmYpKTtcbiAgICAgICAgICAgICAgICAgICAgYmxvY2tzW2kgPj4gMl0gfD0gKDB4ZjAgfCAoY29kZSA+PiAxOCkpIDw8IFNISUZUW2krKyAmIDNdO1xuICAgICAgICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSAoMHg4MCB8ICgoY29kZSA+PiAxMikgJiAweDNmKSkgPDwgU0hJRlRbaSsrICYgM107XG4gICAgICAgICAgICAgICAgICAgIGJsb2Nrc1tpID4+IDJdIHw9ICgweDgwIHwgKChjb2RlID4+IDYpICYgMHgzZikpIDw8IFNISUZUW2krKyAmIDNdO1xuICAgICAgICAgICAgICAgICAgICBibG9ja3NbaSA+PiAyXSB8PSAoMHg4MCB8IChjb2RlICYgMHgzZikpIDw8IFNISUZUW2krKyAmIDNdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhc3RCeXRlSW5kZXggPSBpO1xuICAgICAgICB0aGlzLmJ5dGVzICs9IGkgLSB0aGlzLnN0YXJ0O1xuICAgICAgICBpZiAoaSA+PSA2NCkge1xuICAgICAgICAgICAgdGhpcy5ibG9jayA9IGJsb2Nrc1sxNl07XG4gICAgICAgICAgICB0aGlzLnN0YXJ0ID0gaSAtIDY0O1xuICAgICAgICAgICAgdGhpcy5oYXNoKCk7XG4gICAgICAgICAgICB0aGlzLmhhc2hlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN0YXJ0ID0gaTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5ieXRlcyA+IDQyOTQ5NjcyOTUpIHtcbiAgICAgICAgdGhpcy5oQnl0ZXMgKz0gKHRoaXMuYnl0ZXMgLyA0Mjk0OTY3Mjk2KSA8PCAwO1xuICAgICAgICB0aGlzLmJ5dGVzID0gdGhpcy5ieXRlcyAlIDQyOTQ5NjcyOTY7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xufTtcblNoYTEucHJvdG90eXBlLmZpbmFsaXplID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuZmluYWxpemVkID0gdHJ1ZTtcbiAgICB2YXIgYmxvY2tzID0gdGhpcy5ibG9ja3MsIGkgPSB0aGlzLmxhc3RCeXRlSW5kZXg7XG4gICAgYmxvY2tzWzE2XSA9IHRoaXMuYmxvY2s7XG4gICAgYmxvY2tzW2kgPj4gMl0gfD0gRVhUUkFbaSAmIDNdO1xuICAgIHRoaXMuYmxvY2sgPSBibG9ja3NbMTZdO1xuICAgIGlmIChpID49IDU2KSB7XG4gICAgICAgIGlmICghdGhpcy5oYXNoZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaGFzaCgpO1xuICAgICAgICB9XG4gICAgICAgIGJsb2Nrc1swXSA9IHRoaXMuYmxvY2s7XG4gICAgICAgIGJsb2Nrc1sxNl0gPVxuICAgICAgICAgICAgYmxvY2tzWzFdID1cbiAgICAgICAgICAgICAgICBibG9ja3NbMl0gPVxuICAgICAgICAgICAgICAgICAgICBibG9ja3NbM10gPVxuICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzRdID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbNV0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbNl0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzddID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbOF0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja3NbOV0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzEwXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzExXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1sxMl0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzEzXSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzWzE0XSA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2Nrc1sxNV0gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMDtcbiAgICB9XG4gICAgYmxvY2tzWzE0XSA9ICh0aGlzLmhCeXRlcyA8PCAzKSB8ICh0aGlzLmJ5dGVzID4+PiAyOSk7XG4gICAgYmxvY2tzWzE1XSA9IHRoaXMuYnl0ZXMgPDwgMztcbiAgICB0aGlzLmhhc2goKTtcbn07XG5TaGExLnByb3RvdHlwZS5oYXNoID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBhID0gdGhpcy5oMCwgYiA9IHRoaXMuaDEsIGMgPSB0aGlzLmgyLCBkID0gdGhpcy5oMywgZSA9IHRoaXMuaDQ7XG4gICAgdmFyIGYsIGosIHQsIGJsb2NrcyA9IHRoaXMuYmxvY2tzO1xuICAgIGZvciAoaiA9IDE2OyBqIDwgODA7ICsraikge1xuICAgICAgICB0ID0gYmxvY2tzW2ogLSAzXSBeIGJsb2Nrc1tqIC0gOF0gXiBibG9ja3NbaiAtIDE0XSBeIGJsb2Nrc1tqIC0gMTZdO1xuICAgICAgICBibG9ja3Nbal0gPSAodCA8PCAxKSB8ICh0ID4+PiAzMSk7XG4gICAgfVxuICAgIGZvciAoaiA9IDA7IGogPCAyMDsgaiArPSA1KSB7XG4gICAgICAgIGYgPSAoYiAmIGMpIHwgKH5iICYgZCk7XG4gICAgICAgIHQgPSAoYSA8PCA1KSB8IChhID4+PiAyNyk7XG4gICAgICAgIGUgPSAodCArIGYgKyBlICsgMTUxODUwMDI0OSArIGJsb2Nrc1tqXSkgPDwgMDtcbiAgICAgICAgYiA9IChiIDw8IDMwKSB8IChiID4+PiAyKTtcbiAgICAgICAgZiA9IChhICYgYikgfCAofmEgJiBjKTtcbiAgICAgICAgdCA9IChlIDw8IDUpIHwgKGUgPj4+IDI3KTtcbiAgICAgICAgZCA9ICh0ICsgZiArIGQgKyAxNTE4NTAwMjQ5ICsgYmxvY2tzW2ogKyAxXSkgPDwgMDtcbiAgICAgICAgYSA9IChhIDw8IDMwKSB8IChhID4+PiAyKTtcbiAgICAgICAgZiA9IChlICYgYSkgfCAofmUgJiBiKTtcbiAgICAgICAgdCA9IChkIDw8IDUpIHwgKGQgPj4+IDI3KTtcbiAgICAgICAgYyA9ICh0ICsgZiArIGMgKyAxNTE4NTAwMjQ5ICsgYmxvY2tzW2ogKyAyXSkgPDwgMDtcbiAgICAgICAgZSA9IChlIDw8IDMwKSB8IChlID4+PiAyKTtcbiAgICAgICAgZiA9IChkICYgZSkgfCAofmQgJiBhKTtcbiAgICAgICAgdCA9IChjIDw8IDUpIHwgKGMgPj4+IDI3KTtcbiAgICAgICAgYiA9ICh0ICsgZiArIGIgKyAxNTE4NTAwMjQ5ICsgYmxvY2tzW2ogKyAzXSkgPDwgMDtcbiAgICAgICAgZCA9IChkIDw8IDMwKSB8IChkID4+PiAyKTtcbiAgICAgICAgZiA9IChjICYgZCkgfCAofmMgJiBlKTtcbiAgICAgICAgdCA9IChiIDw8IDUpIHwgKGIgPj4+IDI3KTtcbiAgICAgICAgYSA9ICh0ICsgZiArIGEgKyAxNTE4NTAwMjQ5ICsgYmxvY2tzW2ogKyA0XSkgPDwgMDtcbiAgICAgICAgYyA9IChjIDw8IDMwKSB8IChjID4+PiAyKTtcbiAgICB9XG4gICAgZm9yICg7IGogPCA0MDsgaiArPSA1KSB7XG4gICAgICAgIGYgPSBiIF4gYyBeIGQ7XG4gICAgICAgIHQgPSAoYSA8PCA1KSB8IChhID4+PiAyNyk7XG4gICAgICAgIGUgPSAodCArIGYgKyBlICsgMTg1OTc3NTM5MyArIGJsb2Nrc1tqXSkgPDwgMDtcbiAgICAgICAgYiA9IChiIDw8IDMwKSB8IChiID4+PiAyKTtcbiAgICAgICAgZiA9IGEgXiBiIF4gYztcbiAgICAgICAgdCA9IChlIDw8IDUpIHwgKGUgPj4+IDI3KTtcbiAgICAgICAgZCA9ICh0ICsgZiArIGQgKyAxODU5Nzc1MzkzICsgYmxvY2tzW2ogKyAxXSkgPDwgMDtcbiAgICAgICAgYSA9IChhIDw8IDMwKSB8IChhID4+PiAyKTtcbiAgICAgICAgZiA9IGUgXiBhIF4gYjtcbiAgICAgICAgdCA9IChkIDw8IDUpIHwgKGQgPj4+IDI3KTtcbiAgICAgICAgYyA9ICh0ICsgZiArIGMgKyAxODU5Nzc1MzkzICsgYmxvY2tzW2ogKyAyXSkgPDwgMDtcbiAgICAgICAgZSA9IChlIDw8IDMwKSB8IChlID4+PiAyKTtcbiAgICAgICAgZiA9IGQgXiBlIF4gYTtcbiAgICAgICAgdCA9IChjIDw8IDUpIHwgKGMgPj4+IDI3KTtcbiAgICAgICAgYiA9ICh0ICsgZiArIGIgKyAxODU5Nzc1MzkzICsgYmxvY2tzW2ogKyAzXSkgPDwgMDtcbiAgICAgICAgZCA9IChkIDw8IDMwKSB8IChkID4+PiAyKTtcbiAgICAgICAgZiA9IGMgXiBkIF4gZTtcbiAgICAgICAgdCA9IChiIDw8IDUpIHwgKGIgPj4+IDI3KTtcbiAgICAgICAgYSA9ICh0ICsgZiArIGEgKyAxODU5Nzc1MzkzICsgYmxvY2tzW2ogKyA0XSkgPDwgMDtcbiAgICAgICAgYyA9IChjIDw8IDMwKSB8IChjID4+PiAyKTtcbiAgICB9XG4gICAgZm9yICg7IGogPCA2MDsgaiArPSA1KSB7XG4gICAgICAgIGYgPSAoYiAmIGMpIHwgKGIgJiBkKSB8IChjICYgZCk7XG4gICAgICAgIHQgPSAoYSA8PCA1KSB8IChhID4+PiAyNyk7XG4gICAgICAgIGUgPSAodCArIGYgKyBlIC0gMTg5NDAwNzU4OCArIGJsb2Nrc1tqXSkgPDwgMDtcbiAgICAgICAgYiA9IChiIDw8IDMwKSB8IChiID4+PiAyKTtcbiAgICAgICAgZiA9IChhICYgYikgfCAoYSAmIGMpIHwgKGIgJiBjKTtcbiAgICAgICAgdCA9IChlIDw8IDUpIHwgKGUgPj4+IDI3KTtcbiAgICAgICAgZCA9ICh0ICsgZiArIGQgLSAxODk0MDA3NTg4ICsgYmxvY2tzW2ogKyAxXSkgPDwgMDtcbiAgICAgICAgYSA9IChhIDw8IDMwKSB8IChhID4+PiAyKTtcbiAgICAgICAgZiA9IChlICYgYSkgfCAoZSAmIGIpIHwgKGEgJiBiKTtcbiAgICAgICAgdCA9IChkIDw8IDUpIHwgKGQgPj4+IDI3KTtcbiAgICAgICAgYyA9ICh0ICsgZiArIGMgLSAxODk0MDA3NTg4ICsgYmxvY2tzW2ogKyAyXSkgPDwgMDtcbiAgICAgICAgZSA9IChlIDw8IDMwKSB8IChlID4+PiAyKTtcbiAgICAgICAgZiA9IChkICYgZSkgfCAoZCAmIGEpIHwgKGUgJiBhKTtcbiAgICAgICAgdCA9IChjIDw8IDUpIHwgKGMgPj4+IDI3KTtcbiAgICAgICAgYiA9ICh0ICsgZiArIGIgLSAxODk0MDA3NTg4ICsgYmxvY2tzW2ogKyAzXSkgPDwgMDtcbiAgICAgICAgZCA9IChkIDw8IDMwKSB8IChkID4+PiAyKTtcbiAgICAgICAgZiA9IChjICYgZCkgfCAoYyAmIGUpIHwgKGQgJiBlKTtcbiAgICAgICAgdCA9IChiIDw8IDUpIHwgKGIgPj4+IDI3KTtcbiAgICAgICAgYSA9ICh0ICsgZiArIGEgLSAxODk0MDA3NTg4ICsgYmxvY2tzW2ogKyA0XSkgPDwgMDtcbiAgICAgICAgYyA9IChjIDw8IDMwKSB8IChjID4+PiAyKTtcbiAgICB9XG4gICAgZm9yICg7IGogPCA4MDsgaiArPSA1KSB7XG4gICAgICAgIGYgPSBiIF4gYyBeIGQ7XG4gICAgICAgIHQgPSAoYSA8PCA1KSB8IChhID4+PiAyNyk7XG4gICAgICAgIGUgPSAodCArIGYgKyBlIC0gODk5NDk3NTE0ICsgYmxvY2tzW2pdKSA8PCAwO1xuICAgICAgICBiID0gKGIgPDwgMzApIHwgKGIgPj4+IDIpO1xuICAgICAgICBmID0gYSBeIGIgXiBjO1xuICAgICAgICB0ID0gKGUgPDwgNSkgfCAoZSA+Pj4gMjcpO1xuICAgICAgICBkID0gKHQgKyBmICsgZCAtIDg5OTQ5NzUxNCArIGJsb2Nrc1tqICsgMV0pIDw8IDA7XG4gICAgICAgIGEgPSAoYSA8PCAzMCkgfCAoYSA+Pj4gMik7XG4gICAgICAgIGYgPSBlIF4gYSBeIGI7XG4gICAgICAgIHQgPSAoZCA8PCA1KSB8IChkID4+PiAyNyk7XG4gICAgICAgIGMgPSAodCArIGYgKyBjIC0gODk5NDk3NTE0ICsgYmxvY2tzW2ogKyAyXSkgPDwgMDtcbiAgICAgICAgZSA9IChlIDw8IDMwKSB8IChlID4+PiAyKTtcbiAgICAgICAgZiA9IGQgXiBlIF4gYTtcbiAgICAgICAgdCA9IChjIDw8IDUpIHwgKGMgPj4+IDI3KTtcbiAgICAgICAgYiA9ICh0ICsgZiArIGIgLSA4OTk0OTc1MTQgKyBibG9ja3NbaiArIDNdKSA8PCAwO1xuICAgICAgICBkID0gKGQgPDwgMzApIHwgKGQgPj4+IDIpO1xuICAgICAgICBmID0gYyBeIGQgXiBlO1xuICAgICAgICB0ID0gKGIgPDwgNSkgfCAoYiA+Pj4gMjcpO1xuICAgICAgICBhID0gKHQgKyBmICsgYSAtIDg5OTQ5NzUxNCArIGJsb2Nrc1tqICsgNF0pIDw8IDA7XG4gICAgICAgIGMgPSAoYyA8PCAzMCkgfCAoYyA+Pj4gMik7XG4gICAgfVxuICAgIHRoaXMuaDAgPSAodGhpcy5oMCArIGEpIDw8IDA7XG4gICAgdGhpcy5oMSA9ICh0aGlzLmgxICsgYikgPDwgMDtcbiAgICB0aGlzLmgyID0gKHRoaXMuaDIgKyBjKSA8PCAwO1xuICAgIHRoaXMuaDMgPSAodGhpcy5oMyArIGQpIDw8IDA7XG4gICAgdGhpcy5oNCA9ICh0aGlzLmg0ICsgZSkgPDwgMDtcbn07XG5TaGExLnByb3RvdHlwZS5oZXggPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5maW5hbGl6ZSgpO1xuICAgIHZhciBoMCA9IHRoaXMuaDAsIGgxID0gdGhpcy5oMSwgaDIgPSB0aGlzLmgyLCBoMyA9IHRoaXMuaDMsIGg0ID0gdGhpcy5oNDtcbiAgICByZXR1cm4gKEhFWF9DSEFSU1soaDAgPj4gMjgpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgwID4+IDI0KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMCA+PiAyMCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDAgPj4gMTYpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgwID4+IDEyKSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMCA+PiA4KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMCA+PiA0KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTW2gwICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgxID4+IDI4KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMSA+PiAyNCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDEgPj4gMjApICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgxID4+IDE2KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMSA+PiAxMikgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDEgPj4gOCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDEgPj4gNCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1toMSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMiA+PiAyOCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDIgPj4gMjQpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgyID4+IDIwKSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMiA+PiAxNikgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDIgPj4gMTIpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgyID4+IDgpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgyID4+IDQpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbaDIgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDMgPj4gMjgpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgzID4+IDI0KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMyA+PiAyMCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDMgPj4gMTYpICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGgzID4+IDEyKSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMyA+PiA4KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoMyA+PiA0KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTW2gzICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGg0ID4+IDI4KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoNCA+PiAyNCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDQgPj4gMjApICYgMHgwZl0gK1xuICAgICAgICBIRVhfQ0hBUlNbKGg0ID4+IDE2KSAmIDB4MGZdICtcbiAgICAgICAgSEVYX0NIQVJTWyhoNCA+PiAxMikgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDQgPj4gOCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1soaDQgPj4gNCkgJiAweDBmXSArXG4gICAgICAgIEhFWF9DSEFSU1toNCAmIDB4MGZdKTtcbn07XG5TaGExLnByb3RvdHlwZS50b1N0cmluZyA9IFNoYTEucHJvdG90eXBlLmhleDtcblNoYTEucHJvdG90eXBlLmRpZ2VzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZpbmFsaXplKCk7XG4gICAgdmFyIGgwID0gdGhpcy5oMCwgaDEgPSB0aGlzLmgxLCBoMiA9IHRoaXMuaDIsIGgzID0gdGhpcy5oMywgaDQgPSB0aGlzLmg0O1xuICAgIHJldHVybiBbXG4gICAgICAgIChoMCA+PiAyNCkgJiAweGZmLFxuICAgICAgICAoaDAgPj4gMTYpICYgMHhmZixcbiAgICAgICAgKGgwID4+IDgpICYgMHhmZixcbiAgICAgICAgaDAgJiAweGZmLFxuICAgICAgICAoaDEgPj4gMjQpICYgMHhmZixcbiAgICAgICAgKGgxID4+IDE2KSAmIDB4ZmYsXG4gICAgICAgIChoMSA+PiA4KSAmIDB4ZmYsXG4gICAgICAgIGgxICYgMHhmZixcbiAgICAgICAgKGgyID4+IDI0KSAmIDB4ZmYsXG4gICAgICAgIChoMiA+PiAxNikgJiAweGZmLFxuICAgICAgICAoaDIgPj4gOCkgJiAweGZmLFxuICAgICAgICBoMiAmIDB4ZmYsXG4gICAgICAgIChoMyA+PiAyNCkgJiAweGZmLFxuICAgICAgICAoaDMgPj4gMTYpICYgMHhmZixcbiAgICAgICAgKGgzID4+IDgpICYgMHhmZixcbiAgICAgICAgaDMgJiAweGZmLFxuICAgICAgICAoaDQgPj4gMjQpICYgMHhmZixcbiAgICAgICAgKGg0ID4+IDE2KSAmIDB4ZmYsXG4gICAgICAgIChoNCA+PiA4KSAmIDB4ZmYsXG4gICAgICAgIGg0ICYgMHhmZixcbiAgICBdO1xufTtcblNoYTEucHJvdG90eXBlLmFycmF5ID0gU2hhMS5wcm90b3R5cGUuZGlnZXN0O1xuU2hhMS5wcm90b3R5cGUuYXJyYXlCdWZmZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5maW5hbGl6ZSgpO1xuICAgIHZhciBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoMjApO1xuICAgIHZhciBkYXRhVmlldyA9IG5ldyBEYXRhVmlldyhidWZmZXIpO1xuICAgIGRhdGFWaWV3LnNldFVpbnQzMigwLCB0aGlzLmgwKTtcbiAgICBkYXRhVmlldy5zZXRVaW50MzIoNCwgdGhpcy5oMSk7XG4gICAgZGF0YVZpZXcuc2V0VWludDMyKDgsIHRoaXMuaDIpO1xuICAgIGRhdGFWaWV3LnNldFVpbnQzMigxMiwgdGhpcy5oMyk7XG4gICAgZGF0YVZpZXcuc2V0VWludDMyKDE2LCB0aGlzLmg0KTtcbiAgICByZXR1cm4gYnVmZmVyO1xufTtcbmV4cG9ydCBjb25zdCBpbnNlY3VyZUhhc2ggPSAobWVzc2FnZSkgPT4ge1xuICAgIHJldHVybiBuZXcgU2hhMSh0cnVlKS51cGRhdGUobWVzc2FnZSlbXCJoZXhcIl0oKTtcbn07XG4iXSwibmFtZXMiOlsicm9vdCIsIndpbmRvdyIsIkhFWF9DSEFSUyIsInNwbGl0IiwiRVhUUkEiLCJTSElGVCIsIk9VVFBVVF9UWVBFUyIsImJsb2NrcyIsIlNoYTEiLCJzaGFyZWRNZW1vcnkiLCJoMCIsImgxIiwiaDIiLCJoMyIsImg0IiwiYmxvY2siLCJzdGFydCIsImJ5dGVzIiwiaEJ5dGVzIiwiZmluYWxpemVkIiwiaGFzaGVkIiwiZmlyc3QiLCJwcm90b3R5cGUiLCJ1cGRhdGUiLCJtZXNzYWdlIiwibm90U3RyaW5nIiwiY29uc3RydWN0b3IiLCJBcnJheUJ1ZmZlciIsIlVpbnQ4QXJyYXkiLCJjb2RlIiwiaW5kZXgiLCJpIiwibGVuZ3RoIiwiY2hhckNvZGVBdCIsImxhc3RCeXRlSW5kZXgiLCJoYXNoIiwiZmluYWxpemUiLCJhIiwiYiIsImMiLCJkIiwiZSIsImYiLCJqIiwidCIsImhleCIsInRvU3RyaW5nIiwiZGlnZXN0IiwiYXJyYXkiLCJhcnJheUJ1ZmZlciIsImJ1ZmZlciIsImRhdGFWaWV3IiwiRGF0YVZpZXciLCJzZXRVaW50MzIiLCJpbnNlY3VyZUhhc2giXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/js-sha1/hash.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/json_patch.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/json_patch.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   applyPatch: () => (/* reexport safe */ _fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__.applyPatch),\n/* harmony export */   compare: () => (/* reexport safe */ _fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__.compare)\n/* harmony export */ });\n/* harmony import */ var _fast_json_patch_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./fast-json-patch/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/fast-json-patch/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvanNvbl9wYXRjaC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBa0UiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1mb3JtLWJ1aWxkZXItdHV0b3JpYWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvanNvbl9wYXRjaC5qcz9jNGE1Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB7IGNvbXBhcmUsIGFwcGx5UGF0Y2gsIH0gZnJvbSBcIi4vZmFzdC1qc29uLXBhdGNoL2luZGV4LmpzXCI7XG4iXSwibmFtZXMiOlsiY29tcGFyZSIsImFwcGx5UGF0Y2giXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/json_patch.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/sax-js/sax.js":
/*!***************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/sax-js/sax.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   sax: () => (/* binding */ sax)\n/* harmony export */ });\n// @ts-nocheck\n// Inlined to deal with portability issues\n// Originally from: https://github.com/isaacs/sax-js\nconst initializeSax = function() {\n    const sax = {};\n    sax.parser = function(strict, opt) {\n        return new SAXParser(strict, opt);\n    };\n    sax.SAXParser = SAXParser;\n    sax.SAXStream = SAXStream;\n    sax.createStream = createStream;\n    // When we pass the MAX_BUFFER_LENGTH position, start checking for buffer overruns.\n    // When we check, schedule the next check for MAX_BUFFER_LENGTH - (max(buffer lengths)),\n    // since that's the earliest that a buffer overrun could occur.  This way, checks are\n    // as rare as required, but as often as necessary to ensure never crossing this bound.\n    // Furthermore, buffers are only tested at most once per write(), so passing a very\n    // large string into write() might have undesirable effects, but this is manageable by\n    // the caller, so it is assumed to be safe.  Thus, a call to write() may, in the extreme\n    // edge case, result in creating at most one complete copy of the string passed in.\n    // Set to Infinity to have unlimited buffers.\n    sax.MAX_BUFFER_LENGTH = 64 * 1024;\n    const buffers = [\n        \"comment\",\n        \"sgmlDecl\",\n        \"textNode\",\n        \"tagName\",\n        \"doctype\",\n        \"procInstName\",\n        \"procInstBody\",\n        \"entity\",\n        \"attribName\",\n        \"attribValue\",\n        \"cdata\",\n        \"script\"\n    ];\n    sax.EVENTS = [\n        \"text\",\n        \"processinginstruction\",\n        \"sgmldeclaration\",\n        \"doctype\",\n        \"comment\",\n        \"opentagstart\",\n        \"attribute\",\n        \"opentag\",\n        \"closetag\",\n        \"opencdata\",\n        \"cdata\",\n        \"closecdata\",\n        \"error\",\n        \"end\",\n        \"ready\",\n        \"script\",\n        \"opennamespace\",\n        \"closenamespace\"\n    ];\n    function SAXParser(strict, opt) {\n        if (!(this instanceof SAXParser)) {\n            return new SAXParser(strict, opt);\n        }\n        var parser = this;\n        clearBuffers(parser);\n        parser.q = parser.c = \"\";\n        parser.bufferCheckPosition = sax.MAX_BUFFER_LENGTH;\n        parser.opt = opt || {};\n        parser.opt.lowercase = parser.opt.lowercase || parser.opt.lowercasetags;\n        parser.looseCase = parser.opt.lowercase ? \"toLowerCase\" : \"toUpperCase\";\n        parser.tags = [];\n        parser.closed = parser.closedRoot = parser.sawRoot = false;\n        parser.tag = parser.error = null;\n        parser.strict = !!strict;\n        parser.noscript = !!(strict || parser.opt.noscript);\n        parser.state = S.BEGIN;\n        parser.strictEntities = parser.opt.strictEntities;\n        parser.ENTITIES = parser.strictEntities ? Object.create(sax.XML_ENTITIES) : Object.create(sax.ENTITIES);\n        parser.attribList = [];\n        // namespaces form a prototype chain.\n        // it always points at the current tag,\n        // which protos to its parent tag.\n        if (parser.opt.xmlns) {\n            parser.ns = Object.create(rootNS);\n        }\n        // mostly just for error reporting\n        parser.trackPosition = parser.opt.position !== false;\n        if (parser.trackPosition) {\n            parser.position = parser.line = parser.column = 0;\n        }\n        emit(parser, \"onready\");\n    }\n    if (!Object.create) {\n        Object.create = function(o) {\n            function F() {}\n            F.prototype = o;\n            var newf = new F();\n            return newf;\n        };\n    }\n    if (!Object.keys) {\n        Object.keys = function(o) {\n            var a = [];\n            for(var i in o)if (o.hasOwnProperty(i)) a.push(i);\n            return a;\n        };\n    }\n    function checkBufferLength(parser) {\n        var maxAllowed = Math.max(sax.MAX_BUFFER_LENGTH, 10);\n        var maxActual = 0;\n        for(var i = 0, l = buffers.length; i < l; i++){\n            var len = parser[buffers[i]].length;\n            if (len > maxAllowed) {\n                // Text/cdata nodes can get big, and since they're buffered,\n                // we can get here under normal conditions.\n                // Avoid issues by emitting the text node now,\n                // so at least it won't get any bigger.\n                switch(buffers[i]){\n                    case \"textNode\":\n                        closeText(parser);\n                        break;\n                    case \"cdata\":\n                        emitNode(parser, \"oncdata\", parser.cdata);\n                        parser.cdata = \"\";\n                        break;\n                    case \"script\":\n                        emitNode(parser, \"onscript\", parser.script);\n                        parser.script = \"\";\n                        break;\n                    default:\n                        error(parser, \"Max buffer length exceeded: \" + buffers[i]);\n                }\n            }\n            maxActual = Math.max(maxActual, len);\n        }\n        // schedule the next check for the earliest possible buffer overrun.\n        var m = sax.MAX_BUFFER_LENGTH - maxActual;\n        parser.bufferCheckPosition = m + parser.position;\n    }\n    function clearBuffers(parser) {\n        for(var i = 0, l = buffers.length; i < l; i++){\n            parser[buffers[i]] = \"\";\n        }\n    }\n    function flushBuffers(parser) {\n        closeText(parser);\n        if (parser.cdata !== \"\") {\n            emitNode(parser, \"oncdata\", parser.cdata);\n            parser.cdata = \"\";\n        }\n        if (parser.script !== \"\") {\n            emitNode(parser, \"onscript\", parser.script);\n            parser.script = \"\";\n        }\n    }\n    SAXParser.prototype = {\n        end: function() {\n            end(this);\n        },\n        write: write,\n        resume: function() {\n            this.error = null;\n            return this;\n        },\n        close: function() {\n            return this.write(null);\n        },\n        flush: function() {\n            flushBuffers(this);\n        }\n    };\n    var Stream = ReadableStream;\n    if (!Stream) Stream = function() {};\n    var streamWraps = sax.EVENTS.filter(function(ev) {\n        return ev !== \"error\" && ev !== \"end\";\n    });\n    function createStream(strict, opt) {\n        return new SAXStream(strict, opt);\n    }\n    function SAXStream(strict, opt) {\n        if (!(this instanceof SAXStream)) {\n            return new SAXStream(strict, opt);\n        }\n        Stream.apply(this);\n        this._parser = new SAXParser(strict, opt);\n        this.writable = true;\n        this.readable = true;\n        var me = this;\n        this._parser.onend = function() {\n            me.emit(\"end\");\n        };\n        this._parser.onerror = function(er) {\n            me.emit(\"error\", er);\n            // if didn't throw, then means error was handled.\n            // go ahead and clear error, so we can write again.\n            me._parser.error = null;\n        };\n        this._decoder = null;\n        streamWraps.forEach(function(ev) {\n            Object.defineProperty(me, \"on\" + ev, {\n                get: function() {\n                    return me._parser[\"on\" + ev];\n                },\n                set: function(h) {\n                    if (!h) {\n                        me.removeAllListeners(ev);\n                        me._parser[\"on\" + ev] = h;\n                        return h;\n                    }\n                    me.on(ev, h);\n                },\n                enumerable: true,\n                configurable: false\n            });\n        });\n    }\n    SAXStream.prototype = Object.create(Stream.prototype, {\n        constructor: {\n            value: SAXStream\n        }\n    });\n    SAXStream.prototype.write = function(data) {\n        this._parser.write(data.toString());\n        this.emit(\"data\", data);\n        return true;\n    };\n    SAXStream.prototype.end = function(chunk) {\n        if (chunk && chunk.length) {\n            this.write(chunk);\n        }\n        this._parser.end();\n        return true;\n    };\n    SAXStream.prototype.on = function(ev, handler) {\n        var me = this;\n        if (!me._parser[\"on\" + ev] && streamWraps.indexOf(ev) !== -1) {\n            me._parser[\"on\" + ev] = function() {\n                var args = arguments.length === 1 ? [\n                    arguments[0]\n                ] : Array.apply(null, arguments);\n                args.splice(0, 0, ev);\n                me.emit.apply(me, args);\n            };\n        }\n        return Stream.prototype.on.call(me, ev, handler);\n    };\n    // this really needs to be replaced with character classes.\n    // XML allows all manner of ridiculous numbers and digits.\n    var CDATA = \"[CDATA[\";\n    var DOCTYPE = \"DOCTYPE\";\n    var XML_NAMESPACE = \"http://www.w3.org/XML/1998/namespace\";\n    var XMLNS_NAMESPACE = \"http://www.w3.org/2000/xmlns/\";\n    var rootNS = {\n        xml: XML_NAMESPACE,\n        xmlns: XMLNS_NAMESPACE\n    };\n    // http://www.w3.org/TR/REC-xml/#NT-NameStartChar\n    // This implementation works on strings, a single character at a time\n    // as such, it cannot ever support astral-plane characters (10000-EFFFF)\n    // without a significant breaking change to either this  parser, or the\n    // JavaScript language.  Implementation of an emoji-capable xml parser\n    // is left as an exercise for the reader.\n    var nameStart = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/;\n    var nameBody = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040.\\d-]/;\n    var entityStart = /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/;\n    var entityBody = /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040.\\d-]/;\n    function isWhitespace(c) {\n        return c === \" \" || c === \"\\n\" || c === \"\\r\" || c === \"\t\";\n    }\n    function isQuote(c) {\n        return c === '\"' || c === \"'\";\n    }\n    function isAttribEnd(c) {\n        return c === \">\" || isWhitespace(c);\n    }\n    function isMatch(regex, c) {\n        return regex.test(c);\n    }\n    function notMatch(regex, c) {\n        return !isMatch(regex, c);\n    }\n    var S = 0;\n    sax.STATE = {\n        BEGIN: S++,\n        BEGIN_WHITESPACE: S++,\n        TEXT: S++,\n        TEXT_ENTITY: S++,\n        OPEN_WAKA: S++,\n        SGML_DECL: S++,\n        SGML_DECL_QUOTED: S++,\n        DOCTYPE: S++,\n        DOCTYPE_QUOTED: S++,\n        DOCTYPE_DTD: S++,\n        DOCTYPE_DTD_QUOTED: S++,\n        COMMENT_STARTING: S++,\n        COMMENT: S++,\n        COMMENT_ENDING: S++,\n        COMMENT_ENDED: S++,\n        CDATA: S++,\n        CDATA_ENDING: S++,\n        CDATA_ENDING_2: S++,\n        PROC_INST: S++,\n        PROC_INST_BODY: S++,\n        PROC_INST_ENDING: S++,\n        OPEN_TAG: S++,\n        OPEN_TAG_SLASH: S++,\n        ATTRIB: S++,\n        ATTRIB_NAME: S++,\n        ATTRIB_NAME_SAW_WHITE: S++,\n        ATTRIB_VALUE: S++,\n        ATTRIB_VALUE_QUOTED: S++,\n        ATTRIB_VALUE_CLOSED: S++,\n        ATTRIB_VALUE_UNQUOTED: S++,\n        ATTRIB_VALUE_ENTITY_Q: S++,\n        ATTRIB_VALUE_ENTITY_U: S++,\n        CLOSE_TAG: S++,\n        CLOSE_TAG_SAW_WHITE: S++,\n        SCRIPT: S++,\n        SCRIPT_ENDING: S++\n    };\n    sax.XML_ENTITIES = {\n        amp: \"&\",\n        gt: \">\",\n        lt: \"<\",\n        quot: '\"',\n        apos: \"'\"\n    };\n    sax.ENTITIES = {\n        amp: \"&\",\n        gt: \">\",\n        lt: \"<\",\n        quot: '\"',\n        apos: \"'\",\n        AElig: 198,\n        Aacute: 193,\n        Acirc: 194,\n        Agrave: 192,\n        Aring: 197,\n        Atilde: 195,\n        Auml: 196,\n        Ccedil: 199,\n        ETH: 208,\n        Eacute: 201,\n        Ecirc: 202,\n        Egrave: 200,\n        Euml: 203,\n        Iacute: 205,\n        Icirc: 206,\n        Igrave: 204,\n        Iuml: 207,\n        Ntilde: 209,\n        Oacute: 211,\n        Ocirc: 212,\n        Ograve: 210,\n        Oslash: 216,\n        Otilde: 213,\n        Ouml: 214,\n        THORN: 222,\n        Uacute: 218,\n        Ucirc: 219,\n        Ugrave: 217,\n        Uuml: 220,\n        Yacute: 221,\n        aacute: 225,\n        acirc: 226,\n        aelig: 230,\n        agrave: 224,\n        aring: 229,\n        atilde: 227,\n        auml: 228,\n        ccedil: 231,\n        eacute: 233,\n        ecirc: 234,\n        egrave: 232,\n        eth: 240,\n        euml: 235,\n        iacute: 237,\n        icirc: 238,\n        igrave: 236,\n        iuml: 239,\n        ntilde: 241,\n        oacute: 243,\n        ocirc: 244,\n        ograve: 242,\n        oslash: 248,\n        otilde: 245,\n        ouml: 246,\n        szlig: 223,\n        thorn: 254,\n        uacute: 250,\n        ucirc: 251,\n        ugrave: 249,\n        uuml: 252,\n        yacute: 253,\n        yuml: 255,\n        copy: 169,\n        reg: 174,\n        nbsp: 160,\n        iexcl: 161,\n        cent: 162,\n        pound: 163,\n        curren: 164,\n        yen: 165,\n        brvbar: 166,\n        sect: 167,\n        uml: 168,\n        ordf: 170,\n        laquo: 171,\n        not: 172,\n        shy: 173,\n        macr: 175,\n        deg: 176,\n        plusmn: 177,\n        sup1: 185,\n        sup2: 178,\n        sup3: 179,\n        acute: 180,\n        micro: 181,\n        para: 182,\n        middot: 183,\n        cedil: 184,\n        ordm: 186,\n        raquo: 187,\n        frac14: 188,\n        frac12: 189,\n        frac34: 190,\n        iquest: 191,\n        times: 215,\n        divide: 247,\n        OElig: 338,\n        oelig: 339,\n        Scaron: 352,\n        scaron: 353,\n        Yuml: 376,\n        fnof: 402,\n        circ: 710,\n        tilde: 732,\n        Alpha: 913,\n        Beta: 914,\n        Gamma: 915,\n        Delta: 916,\n        Epsilon: 917,\n        Zeta: 918,\n        Eta: 919,\n        Theta: 920,\n        Iota: 921,\n        Kappa: 922,\n        Lambda: 923,\n        Mu: 924,\n        Nu: 925,\n        Xi: 926,\n        Omicron: 927,\n        Pi: 928,\n        Rho: 929,\n        Sigma: 931,\n        Tau: 932,\n        Upsilon: 933,\n        Phi: 934,\n        Chi: 935,\n        Psi: 936,\n        Omega: 937,\n        alpha: 945,\n        beta: 946,\n        gamma: 947,\n        delta: 948,\n        epsilon: 949,\n        zeta: 950,\n        eta: 951,\n        theta: 952,\n        iota: 953,\n        kappa: 954,\n        lambda: 955,\n        mu: 956,\n        nu: 957,\n        xi: 958,\n        omicron: 959,\n        pi: 960,\n        rho: 961,\n        sigmaf: 962,\n        sigma: 963,\n        tau: 964,\n        upsilon: 965,\n        phi: 966,\n        chi: 967,\n        psi: 968,\n        omega: 969,\n        thetasym: 977,\n        upsih: 978,\n        piv: 982,\n        ensp: 8194,\n        emsp: 8195,\n        thinsp: 8201,\n        zwnj: 8204,\n        zwj: 8205,\n        lrm: 8206,\n        rlm: 8207,\n        ndash: 8211,\n        mdash: 8212,\n        lsquo: 8216,\n        rsquo: 8217,\n        sbquo: 8218,\n        ldquo: 8220,\n        rdquo: 8221,\n        bdquo: 8222,\n        dagger: 8224,\n        Dagger: 8225,\n        bull: 8226,\n        hellip: 8230,\n        permil: 8240,\n        prime: 8242,\n        Prime: 8243,\n        lsaquo: 8249,\n        rsaquo: 8250,\n        oline: 8254,\n        frasl: 8260,\n        euro: 8364,\n        image: 8465,\n        weierp: 8472,\n        real: 8476,\n        trade: 8482,\n        alefsym: 8501,\n        larr: 8592,\n        uarr: 8593,\n        rarr: 8594,\n        darr: 8595,\n        harr: 8596,\n        crarr: 8629,\n        lArr: 8656,\n        uArr: 8657,\n        rArr: 8658,\n        dArr: 8659,\n        hArr: 8660,\n        forall: 8704,\n        part: 8706,\n        exist: 8707,\n        empty: 8709,\n        nabla: 8711,\n        isin: 8712,\n        notin: 8713,\n        ni: 8715,\n        prod: 8719,\n        sum: 8721,\n        minus: 8722,\n        lowast: 8727,\n        radic: 8730,\n        prop: 8733,\n        infin: 8734,\n        ang: 8736,\n        and: 8743,\n        or: 8744,\n        cap: 8745,\n        cup: 8746,\n        int: 8747,\n        there4: 8756,\n        sim: 8764,\n        cong: 8773,\n        asymp: 8776,\n        ne: 8800,\n        equiv: 8801,\n        le: 8804,\n        ge: 8805,\n        sub: 8834,\n        sup: 8835,\n        nsub: 8836,\n        sube: 8838,\n        supe: 8839,\n        oplus: 8853,\n        otimes: 8855,\n        perp: 8869,\n        sdot: 8901,\n        lceil: 8968,\n        rceil: 8969,\n        lfloor: 8970,\n        rfloor: 8971,\n        lang: 9001,\n        rang: 9002,\n        loz: 9674,\n        spades: 9824,\n        clubs: 9827,\n        hearts: 9829,\n        diams: 9830\n    };\n    Object.keys(sax.ENTITIES).forEach(function(key) {\n        var e = sax.ENTITIES[key];\n        var s = typeof e === \"number\" ? String.fromCharCode(e) : e;\n        sax.ENTITIES[key] = s;\n    });\n    for(var s in sax.STATE){\n        sax.STATE[sax.STATE[s]] = s;\n    }\n    // shorthand\n    S = sax.STATE;\n    function emit(parser, event, data) {\n        parser[event] && parser[event](data);\n    }\n    function emitNode(parser, nodeType, data) {\n        if (parser.textNode) closeText(parser);\n        emit(parser, nodeType, data);\n    }\n    function closeText(parser) {\n        parser.textNode = textopts(parser.opt, parser.textNode);\n        if (parser.textNode) emit(parser, \"ontext\", parser.textNode);\n        parser.textNode = \"\";\n    }\n    function textopts(opt, text) {\n        if (opt.trim) text = text.trim();\n        if (opt.normalize) text = text.replace(/\\s+/g, \" \");\n        return text;\n    }\n    function error(parser, er) {\n        closeText(parser);\n        if (parser.trackPosition) {\n            er += \"\\nLine: \" + parser.line + \"\\nColumn: \" + parser.column + \"\\nChar: \" + parser.c;\n        }\n        er = new Error(er);\n        parser.error = er;\n        emit(parser, \"onerror\", er);\n        return parser;\n    }\n    function end(parser) {\n        if (parser.sawRoot && !parser.closedRoot) strictFail(parser, \"Unclosed root tag\");\n        if (parser.state !== S.BEGIN && parser.state !== S.BEGIN_WHITESPACE && parser.state !== S.TEXT) {\n            error(parser, \"Unexpected end\");\n        }\n        closeText(parser);\n        parser.c = \"\";\n        parser.closed = true;\n        emit(parser, \"onend\");\n        SAXParser.call(parser, parser.strict, parser.opt);\n        return parser;\n    }\n    function strictFail(parser, message) {\n        if (typeof parser !== \"object\" || !(parser instanceof SAXParser)) {\n            throw new Error(\"bad call to strictFail\");\n        }\n        if (parser.strict) {\n            error(parser, message);\n        }\n    }\n    function newTag(parser) {\n        if (!parser.strict) parser.tagName = parser.tagName[parser.looseCase]();\n        var parent = parser.tags[parser.tags.length - 1] || parser;\n        var tag = parser.tag = {\n            name: parser.tagName,\n            attributes: {}\n        };\n        // will be overridden if tag contails an xmlns=\"foo\" or xmlns:foo=\"bar\"\n        if (parser.opt.xmlns) {\n            tag.ns = parent.ns;\n        }\n        parser.attribList.length = 0;\n        emitNode(parser, \"onopentagstart\", tag);\n    }\n    function qname(name, attribute) {\n        var i = name.indexOf(\":\");\n        var qualName = i < 0 ? [\n            \"\",\n            name\n        ] : name.split(\":\");\n        var prefix = qualName[0];\n        var local = qualName[1];\n        // <x \"xmlns\"=\"http://foo\">\n        if (attribute && name === \"xmlns\") {\n            prefix = \"xmlns\";\n            local = \"\";\n        }\n        return {\n            prefix: prefix,\n            local: local\n        };\n    }\n    function attrib(parser) {\n        if (!parser.strict) {\n            parser.attribName = parser.attribName[parser.looseCase]();\n        }\n        if (parser.attribList.indexOf(parser.attribName) !== -1 || parser.tag.attributes.hasOwnProperty(parser.attribName)) {\n            parser.attribName = parser.attribValue = \"\";\n            return;\n        }\n        if (parser.opt.xmlns) {\n            var qn = qname(parser.attribName, true);\n            var prefix = qn.prefix;\n            var local = qn.local;\n            if (prefix === \"xmlns\") {\n                // namespace binding attribute. push the binding into scope\n                if (local === \"xml\" && parser.attribValue !== XML_NAMESPACE) {\n                    strictFail(parser, \"xml: prefix must be bound to \" + XML_NAMESPACE + \"\\n\" + \"Actual: \" + parser.attribValue);\n                } else if (local === \"xmlns\" && parser.attribValue !== XMLNS_NAMESPACE) {\n                    strictFail(parser, \"xmlns: prefix must be bound to \" + XMLNS_NAMESPACE + \"\\n\" + \"Actual: \" + parser.attribValue);\n                } else {\n                    var tag = parser.tag;\n                    var parent = parser.tags[parser.tags.length - 1] || parser;\n                    if (tag.ns === parent.ns) {\n                        tag.ns = Object.create(parent.ns);\n                    }\n                    tag.ns[local] = parser.attribValue;\n                }\n            }\n            // defer onattribute events until all attributes have been seen\n            // so any new bindings can take effect. preserve attribute order\n            // so deferred events can be emitted in document order\n            parser.attribList.push([\n                parser.attribName,\n                parser.attribValue\n            ]);\n        } else {\n            // in non-xmlns mode, we can emit the event right away\n            parser.tag.attributes[parser.attribName] = parser.attribValue;\n            emitNode(parser, \"onattribute\", {\n                name: parser.attribName,\n                value: parser.attribValue\n            });\n        }\n        parser.attribName = parser.attribValue = \"\";\n    }\n    function openTag(parser, selfClosing) {\n        if (parser.opt.xmlns) {\n            // emit namespace binding events\n            var tag = parser.tag;\n            // add namespace info to tag\n            var qn = qname(parser.tagName);\n            tag.prefix = qn.prefix;\n            tag.local = qn.local;\n            tag.uri = tag.ns[qn.prefix] || \"\";\n            if (tag.prefix && !tag.uri) {\n                strictFail(parser, \"Unbound namespace prefix: \" + JSON.stringify(parser.tagName));\n                tag.uri = qn.prefix;\n            }\n            var parent = parser.tags[parser.tags.length - 1] || parser;\n            if (tag.ns && parent.ns !== tag.ns) {\n                Object.keys(tag.ns).forEach(function(p) {\n                    emitNode(parser, \"onopennamespace\", {\n                        prefix: p,\n                        uri: tag.ns[p]\n                    });\n                });\n            }\n            // handle deferred onattribute events\n            // Note: do not apply default ns to attributes:\n            //   http://www.w3.org/TR/REC-xml-names/#defaulting\n            for(var i = 0, l = parser.attribList.length; i < l; i++){\n                var nv = parser.attribList[i];\n                var name = nv[0];\n                var value = nv[1];\n                var qualName = qname(name, true);\n                var prefix = qualName.prefix;\n                var local = qualName.local;\n                var uri = prefix === \"\" ? \"\" : tag.ns[prefix] || \"\";\n                var a = {\n                    name: name,\n                    value: value,\n                    prefix: prefix,\n                    local: local,\n                    uri: uri\n                };\n                // if there's any attributes with an undefined namespace,\n                // then fail on them now.\n                if (prefix && prefix !== \"xmlns\" && !uri) {\n                    strictFail(parser, \"Unbound namespace prefix: \" + JSON.stringify(prefix));\n                    a.uri = prefix;\n                }\n                parser.tag.attributes[name] = a;\n                emitNode(parser, \"onattribute\", a);\n            }\n            parser.attribList.length = 0;\n        }\n        parser.tag.isSelfClosing = !!selfClosing;\n        // process the tag\n        parser.sawRoot = true;\n        parser.tags.push(parser.tag);\n        emitNode(parser, \"onopentag\", parser.tag);\n        if (!selfClosing) {\n            // special case for <script> in non-strict mode.\n            if (!parser.noscript && parser.tagName.toLowerCase() === \"script\") {\n                parser.state = S.SCRIPT;\n            } else {\n                parser.state = S.TEXT;\n            }\n            parser.tag = null;\n            parser.tagName = \"\";\n        }\n        parser.attribName = parser.attribValue = \"\";\n        parser.attribList.length = 0;\n    }\n    function closeTag(parser) {\n        if (!parser.tagName) {\n            strictFail(parser, \"Weird empty close tag.\");\n            parser.textNode += \"</>\";\n            parser.state = S.TEXT;\n            return;\n        }\n        if (parser.script) {\n            if (parser.tagName !== \"script\") {\n                parser.script += \"</\" + parser.tagName + \">\";\n                parser.tagName = \"\";\n                parser.state = S.SCRIPT;\n                return;\n            }\n            emitNode(parser, \"onscript\", parser.script);\n            parser.script = \"\";\n        }\n        // first make sure that the closing tag actually exists.\n        // <a><b></c></b></a> will close everything, otherwise.\n        var t = parser.tags.length;\n        var tagName = parser.tagName;\n        if (!parser.strict) {\n            tagName = tagName[parser.looseCase]();\n        }\n        var closeTo = tagName;\n        while(t--){\n            var close = parser.tags[t];\n            if (close.name !== closeTo) {\n                // fail the first time in strict mode\n                strictFail(parser, \"Unexpected close tag\");\n            } else {\n                break;\n            }\n        }\n        // didn't find it.  we already failed for strict, so just abort.\n        if (t < 0) {\n            strictFail(parser, \"Unmatched closing tag: \" + parser.tagName);\n            parser.textNode += \"</\" + parser.tagName + \">\";\n            parser.state = S.TEXT;\n            return;\n        }\n        parser.tagName = tagName;\n        var s = parser.tags.length;\n        while(s-- > t){\n            var tag = parser.tag = parser.tags.pop();\n            parser.tagName = parser.tag.name;\n            emitNode(parser, \"onclosetag\", parser.tagName);\n            var x = {};\n            for(var i in tag.ns){\n                x[i] = tag.ns[i];\n            }\n            var parent = parser.tags[parser.tags.length - 1] || parser;\n            if (parser.opt.xmlns && tag.ns !== parent.ns) {\n                // remove namespace bindings introduced by tag\n                Object.keys(tag.ns).forEach(function(p) {\n                    var n = tag.ns[p];\n                    emitNode(parser, \"onclosenamespace\", {\n                        prefix: p,\n                        uri: n\n                    });\n                });\n            }\n        }\n        if (t === 0) parser.closedRoot = true;\n        parser.tagName = parser.attribValue = parser.attribName = \"\";\n        parser.attribList.length = 0;\n        parser.state = S.TEXT;\n    }\n    function parseEntity(parser) {\n        var entity = parser.entity;\n        var entityLC = entity.toLowerCase();\n        var num;\n        var numStr = \"\";\n        if (parser.ENTITIES[entity]) {\n            return parser.ENTITIES[entity];\n        }\n        if (parser.ENTITIES[entityLC]) {\n            return parser.ENTITIES[entityLC];\n        }\n        entity = entityLC;\n        if (entity.charAt(0) === \"#\") {\n            if (entity.charAt(1) === \"x\") {\n                entity = entity.slice(2);\n                num = parseInt(entity, 16);\n                numStr = num.toString(16);\n            } else {\n                entity = entity.slice(1);\n                num = parseInt(entity, 10);\n                numStr = num.toString(10);\n            }\n        }\n        entity = entity.replace(/^0+/, \"\");\n        if (isNaN(num) || numStr.toLowerCase() !== entity) {\n            strictFail(parser, \"Invalid character entity\");\n            return \"&\" + parser.entity + \";\";\n        }\n        return String.fromCodePoint(num);\n    }\n    function beginWhiteSpace(parser, c) {\n        if (c === \"<\") {\n            parser.state = S.OPEN_WAKA;\n            parser.startTagPosition = parser.position;\n        } else if (!isWhitespace(c)) {\n            // have to process this as a text node.\n            // weird, but happens.\n            strictFail(parser, \"Non-whitespace before first tag.\");\n            parser.textNode = c;\n            parser.state = S.TEXT;\n        }\n    }\n    function charAt(chunk, i) {\n        var result = \"\";\n        if (i < chunk.length) {\n            result = chunk.charAt(i);\n        }\n        return result;\n    }\n    function write(chunk) {\n        var parser = this;\n        if (this.error) {\n            throw this.error;\n        }\n        if (parser.closed) {\n            return error(parser, \"Cannot write after close. Assign an onready handler.\");\n        }\n        if (chunk === null) {\n            return end(parser);\n        }\n        if (typeof chunk === \"object\") {\n            chunk = chunk.toString();\n        }\n        var i = 0;\n        var c = \"\";\n        while(true){\n            c = charAt(chunk, i++);\n            parser.c = c;\n            if (!c) {\n                break;\n            }\n            if (parser.trackPosition) {\n                parser.position++;\n                if (c === \"\\n\") {\n                    parser.line++;\n                    parser.column = 0;\n                } else {\n                    parser.column++;\n                }\n            }\n            switch(parser.state){\n                case S.BEGIN:\n                    parser.state = S.BEGIN_WHITESPACE;\n                    if (c === \"\\uFEFF\") {\n                        continue;\n                    }\n                    beginWhiteSpace(parser, c);\n                    continue;\n                case S.BEGIN_WHITESPACE:\n                    beginWhiteSpace(parser, c);\n                    continue;\n                case S.TEXT:\n                    if (parser.sawRoot && !parser.closedRoot) {\n                        var starti = i - 1;\n                        while(c && c !== \"<\" && c !== \"&\"){\n                            c = charAt(chunk, i++);\n                            if (c && parser.trackPosition) {\n                                parser.position++;\n                                if (c === \"\\n\") {\n                                    parser.line++;\n                                    parser.column = 0;\n                                } else {\n                                    parser.column++;\n                                }\n                            }\n                        }\n                        parser.textNode += chunk.substring(starti, i - 1);\n                    }\n                    if (c === \"<\" && !(parser.sawRoot && parser.closedRoot && !parser.strict)) {\n                        parser.state = S.OPEN_WAKA;\n                        parser.startTagPosition = parser.position;\n                    } else {\n                        if (!isWhitespace(c) && (!parser.sawRoot || parser.closedRoot)) {\n                            strictFail(parser, \"Text data outside of root node.\");\n                        }\n                        if (c === \"&\") {\n                            parser.state = S.TEXT_ENTITY;\n                        } else {\n                            parser.textNode += c;\n                        }\n                    }\n                    continue;\n                case S.SCRIPT:\n                    // only non-strict\n                    if (c === \"<\") {\n                        parser.state = S.SCRIPT_ENDING;\n                    } else {\n                        parser.script += c;\n                    }\n                    continue;\n                case S.SCRIPT_ENDING:\n                    if (c === \"/\") {\n                        parser.state = S.CLOSE_TAG;\n                    } else {\n                        parser.script += \"<\" + c;\n                        parser.state = S.SCRIPT;\n                    }\n                    continue;\n                case S.OPEN_WAKA:\n                    // either a /, ?, !, or text is coming next.\n                    if (c === \"!\") {\n                        parser.state = S.SGML_DECL;\n                        parser.sgmlDecl = \"\";\n                    } else if (isWhitespace(c)) {\n                    // wait for it...\n                    } else if (isMatch(nameStart, c)) {\n                        parser.state = S.OPEN_TAG;\n                        parser.tagName = c;\n                    } else if (c === \"/\") {\n                        parser.state = S.CLOSE_TAG;\n                        parser.tagName = \"\";\n                    } else if (c === \"?\") {\n                        parser.state = S.PROC_INST;\n                        parser.procInstName = parser.procInstBody = \"\";\n                    } else {\n                        strictFail(parser, \"Unencoded <\");\n                        // if there was some whitespace, then add that in.\n                        if (parser.startTagPosition + 1 < parser.position) {\n                            var pad = parser.position - parser.startTagPosition;\n                            c = new Array(pad).join(\" \") + c;\n                        }\n                        parser.textNode += \"<\" + c;\n                        parser.state = S.TEXT;\n                    }\n                    continue;\n                case S.SGML_DECL:\n                    if ((parser.sgmlDecl + c).toUpperCase() === CDATA) {\n                        emitNode(parser, \"onopencdata\");\n                        parser.state = S.CDATA;\n                        parser.sgmlDecl = \"\";\n                        parser.cdata = \"\";\n                    } else if (parser.sgmlDecl + c === \"--\") {\n                        parser.state = S.COMMENT;\n                        parser.comment = \"\";\n                        parser.sgmlDecl = \"\";\n                    } else if ((parser.sgmlDecl + c).toUpperCase() === DOCTYPE) {\n                        parser.state = S.DOCTYPE;\n                        if (parser.doctype || parser.sawRoot) {\n                            strictFail(parser, \"Inappropriately located doctype declaration\");\n                        }\n                        parser.doctype = \"\";\n                        parser.sgmlDecl = \"\";\n                    } else if (c === \">\") {\n                        emitNode(parser, \"onsgmldeclaration\", parser.sgmlDecl);\n                        parser.sgmlDecl = \"\";\n                        parser.state = S.TEXT;\n                    } else if (isQuote(c)) {\n                        parser.state = S.SGML_DECL_QUOTED;\n                        parser.sgmlDecl += c;\n                    } else {\n                        parser.sgmlDecl += c;\n                    }\n                    continue;\n                case S.SGML_DECL_QUOTED:\n                    if (c === parser.q) {\n                        parser.state = S.SGML_DECL;\n                        parser.q = \"\";\n                    }\n                    parser.sgmlDecl += c;\n                    continue;\n                case S.DOCTYPE:\n                    if (c === \">\") {\n                        parser.state = S.TEXT;\n                        emitNode(parser, \"ondoctype\", parser.doctype);\n                        parser.doctype = true; // just remember that we saw it.\n                    } else {\n                        parser.doctype += c;\n                        if (c === \"[\") {\n                            parser.state = S.DOCTYPE_DTD;\n                        } else if (isQuote(c)) {\n                            parser.state = S.DOCTYPE_QUOTED;\n                            parser.q = c;\n                        }\n                    }\n                    continue;\n                case S.DOCTYPE_QUOTED:\n                    parser.doctype += c;\n                    if (c === parser.q) {\n                        parser.q = \"\";\n                        parser.state = S.DOCTYPE;\n                    }\n                    continue;\n                case S.DOCTYPE_DTD:\n                    parser.doctype += c;\n                    if (c === \"]\") {\n                        parser.state = S.DOCTYPE;\n                    } else if (isQuote(c)) {\n                        parser.state = S.DOCTYPE_DTD_QUOTED;\n                        parser.q = c;\n                    }\n                    continue;\n                case S.DOCTYPE_DTD_QUOTED:\n                    parser.doctype += c;\n                    if (c === parser.q) {\n                        parser.state = S.DOCTYPE_DTD;\n                        parser.q = \"\";\n                    }\n                    continue;\n                case S.COMMENT:\n                    if (c === \"-\") {\n                        parser.state = S.COMMENT_ENDING;\n                    } else {\n                        parser.comment += c;\n                    }\n                    continue;\n                case S.COMMENT_ENDING:\n                    if (c === \"-\") {\n                        parser.state = S.COMMENT_ENDED;\n                        parser.comment = textopts(parser.opt, parser.comment);\n                        if (parser.comment) {\n                            emitNode(parser, \"oncomment\", parser.comment);\n                        }\n                        parser.comment = \"\";\n                    } else {\n                        parser.comment += \"-\" + c;\n                        parser.state = S.COMMENT;\n                    }\n                    continue;\n                case S.COMMENT_ENDED:\n                    if (c !== \">\") {\n                        strictFail(parser, \"Malformed comment\");\n                        // allow <!-- blah -- bloo --> in non-strict mode,\n                        // which is a comment of \" blah -- bloo \"\n                        parser.comment += \"--\" + c;\n                        parser.state = S.COMMENT;\n                    } else {\n                        parser.state = S.TEXT;\n                    }\n                    continue;\n                case S.CDATA:\n                    if (c === \"]\") {\n                        parser.state = S.CDATA_ENDING;\n                    } else {\n                        parser.cdata += c;\n                    }\n                    continue;\n                case S.CDATA_ENDING:\n                    if (c === \"]\") {\n                        parser.state = S.CDATA_ENDING_2;\n                    } else {\n                        parser.cdata += \"]\" + c;\n                        parser.state = S.CDATA;\n                    }\n                    continue;\n                case S.CDATA_ENDING_2:\n                    if (c === \">\") {\n                        if (parser.cdata) {\n                            emitNode(parser, \"oncdata\", parser.cdata);\n                        }\n                        emitNode(parser, \"onclosecdata\");\n                        parser.cdata = \"\";\n                        parser.state = S.TEXT;\n                    } else if (c === \"]\") {\n                        parser.cdata += \"]\";\n                    } else {\n                        parser.cdata += \"]]\" + c;\n                        parser.state = S.CDATA;\n                    }\n                    continue;\n                case S.PROC_INST:\n                    if (c === \"?\") {\n                        parser.state = S.PROC_INST_ENDING;\n                    } else if (isWhitespace(c)) {\n                        parser.state = S.PROC_INST_BODY;\n                    } else {\n                        parser.procInstName += c;\n                    }\n                    continue;\n                case S.PROC_INST_BODY:\n                    if (!parser.procInstBody && isWhitespace(c)) {\n                        continue;\n                    } else if (c === \"?\") {\n                        parser.state = S.PROC_INST_ENDING;\n                    } else {\n                        parser.procInstBody += c;\n                    }\n                    continue;\n                case S.PROC_INST_ENDING:\n                    if (c === \">\") {\n                        emitNode(parser, \"onprocessinginstruction\", {\n                            name: parser.procInstName,\n                            body: parser.procInstBody\n                        });\n                        parser.procInstName = parser.procInstBody = \"\";\n                        parser.state = S.TEXT;\n                    } else {\n                        parser.procInstBody += \"?\" + c;\n                        parser.state = S.PROC_INST_BODY;\n                    }\n                    continue;\n                case S.OPEN_TAG:\n                    if (isMatch(nameBody, c)) {\n                        parser.tagName += c;\n                    } else {\n                        newTag(parser);\n                        if (c === \">\") {\n                            openTag(parser);\n                        } else if (c === \"/\") {\n                            parser.state = S.OPEN_TAG_SLASH;\n                        } else {\n                            if (!isWhitespace(c)) {\n                                strictFail(parser, \"Invalid character in tag name\");\n                            }\n                            parser.state = S.ATTRIB;\n                        }\n                    }\n                    continue;\n                case S.OPEN_TAG_SLASH:\n                    if (c === \">\") {\n                        openTag(parser, true);\n                        closeTag(parser);\n                    } else {\n                        strictFail(parser, \"Forward-slash in opening tag not followed by >\");\n                        parser.state = S.ATTRIB;\n                    }\n                    continue;\n                case S.ATTRIB:\n                    // haven't read the attribute name yet.\n                    if (isWhitespace(c)) {\n                        continue;\n                    } else if (c === \">\") {\n                        openTag(parser);\n                    } else if (c === \"/\") {\n                        parser.state = S.OPEN_TAG_SLASH;\n                    } else if (isMatch(nameStart, c)) {\n                        parser.attribName = c;\n                        parser.attribValue = \"\";\n                        parser.state = S.ATTRIB_NAME;\n                    } else {\n                        strictFail(parser, \"Invalid attribute name\");\n                    }\n                    continue;\n                case S.ATTRIB_NAME:\n                    if (c === \"=\") {\n                        parser.state = S.ATTRIB_VALUE;\n                    } else if (c === \">\") {\n                        strictFail(parser, \"Attribute without value\");\n                        parser.attribValue = parser.attribName;\n                        attrib(parser);\n                        openTag(parser);\n                    } else if (isWhitespace(c)) {\n                        parser.state = S.ATTRIB_NAME_SAW_WHITE;\n                    } else if (isMatch(nameBody, c)) {\n                        parser.attribName += c;\n                    } else {\n                        strictFail(parser, \"Invalid attribute name\");\n                    }\n                    continue;\n                case S.ATTRIB_NAME_SAW_WHITE:\n                    if (c === \"=\") {\n                        parser.state = S.ATTRIB_VALUE;\n                    } else if (isWhitespace(c)) {\n                        continue;\n                    } else {\n                        strictFail(parser, \"Attribute without value\");\n                        parser.tag.attributes[parser.attribName] = \"\";\n                        parser.attribValue = \"\";\n                        emitNode(parser, \"onattribute\", {\n                            name: parser.attribName,\n                            value: \"\"\n                        });\n                        parser.attribName = \"\";\n                        if (c === \">\") {\n                            openTag(parser);\n                        } else if (isMatch(nameStart, c)) {\n                            parser.attribName = c;\n                            parser.state = S.ATTRIB_NAME;\n                        } else {\n                            strictFail(parser, \"Invalid attribute name\");\n                            parser.state = S.ATTRIB;\n                        }\n                    }\n                    continue;\n                case S.ATTRIB_VALUE:\n                    if (isWhitespace(c)) {\n                        continue;\n                    } else if (isQuote(c)) {\n                        parser.q = c;\n                        parser.state = S.ATTRIB_VALUE_QUOTED;\n                    } else {\n                        strictFail(parser, \"Unquoted attribute value\");\n                        parser.state = S.ATTRIB_VALUE_UNQUOTED;\n                        parser.attribValue = c;\n                    }\n                    continue;\n                case S.ATTRIB_VALUE_QUOTED:\n                    if (c !== parser.q) {\n                        if (c === \"&\") {\n                            parser.state = S.ATTRIB_VALUE_ENTITY_Q;\n                        } else {\n                            parser.attribValue += c;\n                        }\n                        continue;\n                    }\n                    attrib(parser);\n                    parser.q = \"\";\n                    parser.state = S.ATTRIB_VALUE_CLOSED;\n                    continue;\n                case S.ATTRIB_VALUE_CLOSED:\n                    if (isWhitespace(c)) {\n                        parser.state = S.ATTRIB;\n                    } else if (c === \">\") {\n                        openTag(parser);\n                    } else if (c === \"/\") {\n                        parser.state = S.OPEN_TAG_SLASH;\n                    } else if (isMatch(nameStart, c)) {\n                        strictFail(parser, \"No whitespace between attributes\");\n                        parser.attribName = c;\n                        parser.attribValue = \"\";\n                        parser.state = S.ATTRIB_NAME;\n                    } else {\n                        strictFail(parser, \"Invalid attribute name\");\n                    }\n                    continue;\n                case S.ATTRIB_VALUE_UNQUOTED:\n                    if (!isAttribEnd(c)) {\n                        if (c === \"&\") {\n                            parser.state = S.ATTRIB_VALUE_ENTITY_U;\n                        } else {\n                            parser.attribValue += c;\n                        }\n                        continue;\n                    }\n                    attrib(parser);\n                    if (c === \">\") {\n                        openTag(parser);\n                    } else {\n                        parser.state = S.ATTRIB;\n                    }\n                    continue;\n                case S.CLOSE_TAG:\n                    if (!parser.tagName) {\n                        if (isWhitespace(c)) {\n                            continue;\n                        } else if (notMatch(nameStart, c)) {\n                            if (parser.script) {\n                                parser.script += \"</\" + c;\n                                parser.state = S.SCRIPT;\n                            } else {\n                                strictFail(parser, \"Invalid tagname in closing tag.\");\n                            }\n                        } else {\n                            parser.tagName = c;\n                        }\n                    } else if (c === \">\") {\n                        closeTag(parser);\n                    } else if (isMatch(nameBody, c)) {\n                        parser.tagName += c;\n                    } else if (parser.script) {\n                        parser.script += \"</\" + parser.tagName;\n                        parser.tagName = \"\";\n                        parser.state = S.SCRIPT;\n                    } else {\n                        if (!isWhitespace(c)) {\n                            strictFail(parser, \"Invalid tagname in closing tag\");\n                        }\n                        parser.state = S.CLOSE_TAG_SAW_WHITE;\n                    }\n                    continue;\n                case S.CLOSE_TAG_SAW_WHITE:\n                    if (isWhitespace(c)) {\n                        continue;\n                    }\n                    if (c === \">\") {\n                        closeTag(parser);\n                    } else {\n                        strictFail(parser, \"Invalid characters in closing tag\");\n                    }\n                    continue;\n                case S.TEXT_ENTITY:\n                case S.ATTRIB_VALUE_ENTITY_Q:\n                case S.ATTRIB_VALUE_ENTITY_U:\n                    var returnState;\n                    var buffer;\n                    switch(parser.state){\n                        case S.TEXT_ENTITY:\n                            returnState = S.TEXT;\n                            buffer = \"textNode\";\n                            break;\n                        case S.ATTRIB_VALUE_ENTITY_Q:\n                            returnState = S.ATTRIB_VALUE_QUOTED;\n                            buffer = \"attribValue\";\n                            break;\n                        case S.ATTRIB_VALUE_ENTITY_U:\n                            returnState = S.ATTRIB_VALUE_UNQUOTED;\n                            buffer = \"attribValue\";\n                            break;\n                    }\n                    if (c === \";\") {\n                        if (parser.opt.unparsedEntities) {\n                            var parsedEntity = parseEntity(parser);\n                            parser.entity = \"\";\n                            parser.state = returnState;\n                            parser.write(parsedEntity);\n                        } else {\n                            parser[buffer] += parseEntity(parser);\n                            parser.entity = \"\";\n                            parser.state = returnState;\n                        }\n                    } else if (isMatch(parser.entity.length ? entityBody : entityStart, c)) {\n                        parser.entity += c;\n                    } else {\n                        strictFail(parser, \"Invalid character in entity name\");\n                        parser[buffer] += \"&\" + parser.entity + c;\n                        parser.entity = \"\";\n                        parser.state = returnState;\n                    }\n                    continue;\n                default:\n                    /* istanbul ignore next */ {\n                        throw new Error(parser, \"Unknown state: \" + parser.state);\n                    }\n            }\n        } // while\n        if (parser.position >= parser.bufferCheckPosition) {\n            checkBufferLength(parser);\n        }\n        return parser;\n    }\n    /*! http://mths.be/fromcodepoint v0.1.0 by @mathias */ /* istanbul ignore next */ if (!String.fromCodePoint) {\n        (function() {\n            var stringFromCharCode = String.fromCharCode;\n            var floor = Math.floor;\n            var fromCodePoint = function() {\n                var MAX_SIZE = 0x4000;\n                var codeUnits = [];\n                var highSurrogate;\n                var lowSurrogate;\n                var index = -1;\n                var length = arguments.length;\n                if (!length) {\n                    return \"\";\n                }\n                var result = \"\";\n                while(++index < length){\n                    var codePoint = Number(arguments[index]);\n                    if (!isFinite(codePoint) || // `NaN`, `+Infinity`, or `-Infinity`\n                    codePoint < 0 || // not a valid Unicode code point\n                    codePoint > 0x10ffff || // not a valid Unicode code point\n                    floor(codePoint) !== codePoint // not an integer\n                    ) {\n                        throw RangeError(\"Invalid code point: \" + codePoint);\n                    }\n                    if (codePoint <= 0xffff) {\n                        // BMP code point\n                        codeUnits.push(codePoint);\n                    } else {\n                        // Astral code point; split in surrogate halves\n                        // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n                        codePoint -= 0x10000;\n                        highSurrogate = (codePoint >> 10) + 0xd800;\n                        lowSurrogate = codePoint % 0x400 + 0xdc00;\n                        codeUnits.push(highSurrogate, lowSurrogate);\n                    }\n                    if (index + 1 === length || codeUnits.length > MAX_SIZE) {\n                        result += stringFromCharCode.apply(null, codeUnits);\n                        codeUnits.length = 0;\n                    }\n                }\n                return result;\n            };\n            /* istanbul ignore next */ if (Object.defineProperty) {\n                Object.defineProperty(String, \"fromCodePoint\", {\n                    value: fromCodePoint,\n                    configurable: true,\n                    writable: true\n                });\n            } else {\n                String.fromCodePoint = fromCodePoint;\n            }\n        })();\n    }\n    return sax;\n};\nconst sax = /** #__PURE__ */ initializeSax();\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvc2F4LWpzL3NheC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsY0FBYztBQUNkLDBDQUEwQztBQUMxQyxvREFBb0Q7QUFDcEQsTUFBTUEsZ0JBQWdCO0lBQ2xCLE1BQU1DLE1BQU0sQ0FBQztJQUNiQSxJQUFJQyxNQUFNLEdBQUcsU0FBVUMsTUFBTSxFQUFFQyxHQUFHO1FBQzlCLE9BQU8sSUFBSUMsVUFBVUYsUUFBUUM7SUFDakM7SUFDQUgsSUFBSUksU0FBUyxHQUFHQTtJQUNoQkosSUFBSUssU0FBUyxHQUFHQTtJQUNoQkwsSUFBSU0sWUFBWSxHQUFHQTtJQUNuQixtRkFBbUY7SUFDbkYsd0ZBQXdGO0lBQ3hGLHFGQUFxRjtJQUNyRixzRkFBc0Y7SUFDdEYsbUZBQW1GO0lBQ25GLHNGQUFzRjtJQUN0Rix3RkFBd0Y7SUFDeEYsbUZBQW1GO0lBQ25GLDZDQUE2QztJQUM3Q04sSUFBSU8saUJBQWlCLEdBQUcsS0FBSztJQUM3QixNQUFNQyxVQUFVO1FBQ1o7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO0tBQ0g7SUFDRFIsSUFBSVMsTUFBTSxHQUFHO1FBQ1Q7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO0tBQ0g7SUFDRCxTQUFTTCxVQUFVRixNQUFNLEVBQUVDLEdBQUc7UUFDMUIsSUFBSSxDQUFFLEtBQUksWUFBWUMsU0FBUSxHQUFJO1lBQzlCLE9BQU8sSUFBSUEsVUFBVUYsUUFBUUM7UUFDakM7UUFDQSxJQUFJRixTQUFTLElBQUk7UUFDakJTLGFBQWFUO1FBQ2JBLE9BQU9VLENBQUMsR0FBR1YsT0FBT1csQ0FBQyxHQUFHO1FBQ3RCWCxPQUFPWSxtQkFBbUIsR0FBR2IsSUFBSU8saUJBQWlCO1FBQ2xETixPQUFP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TkMsUUFBUTtRQUNSQyxRQUFRO1FBQ1JDLE9BQU87UUFDUEMsT0FBTztRQUNQQyxRQUFRO1FBQ1JDLE9BQU87UUFDUEMsUUFBUTtRQUNSQyxNQUFNO1FBQ05DLFFBQVE7UUFDUkMsUUFBUTtRQUNSQyxPQUFPO1FBQ1BDLFFBQVE7UUFDUkMsS0FBSztRQUNMQyxNQUFNO1FBQ05DLFFBQVE7UUFDUkMsT0FBTztRQUNQQyxRQUFRO1FBQ1JDLE1BQU07UUFDTkMsUUFBUTtRQUNSQyxRQUFRO1FBQ1JDLE9BQU87UUFDUEMsUUFBUTtRQUNSQyxRQUFRO1FBQ1JDLFFBQVE7UUFDUkMsTUFBTTtRQUNOQyxPQUFPO1FBQ1BDLE9BQU87UUFDUEMsUUFBUTtRQUNSQyxPQUFPO1FBQ1BDLFFBQVE7UUFDUkMsTUFBTTtRQUNOQyxRQUFRO1FBQ1JDLE1BQU07UUFDTkMsTUFBTTtRQUNOQyxLQUFLO1FBQ0xDLE1BQU07UUFDTkMsT0FBTztRQUNQQyxNQUFNO1FBQ05DLE9BQU87UUFDUEMsUUFBUTtRQUNSQyxLQUFLO1FBQ0xDLFFBQVE7UUFDUkMsTUFBTTtRQUNOQyxLQUFLO1FBQ0xDLE1BQU07UUFDTkMsT0FBTztRQUNQQyxLQUFLO1FBQ0xDLEtBQUs7UUFDTEMsTUFBTTtRQUNOQyxLQUFLO1FBQ0xDLFFBQVE7UUFDUkMsTUFBTTtRQUNOQyxNQUFNO1FBQ05DLE1BQU07UUFDTkMsT0FBTztRQUNQQyxPQUFPO1FBQ1BDLE1BQU07UUFDTkMsUUFBUTtRQUNSQyxPQUFPO1FBQ1BDLE1BQU07UUFDTkMsT0FBTztRQUNQQyxRQUFRO1FBQ1JDLFFBQVE7UUFDUkMsUUFBUTtRQUNSQyxRQUFRO1FBQ1JDLE9BQU87UUFDUEMsUUFBUTtRQUNSQyxPQUFPO1FBQ1BDLE9BQU87UUFDUEMsUUFBUTtRQUNSQyxRQUFRO1FBQ1JDLE1BQU07UUFDTkMsTUFBTTtRQUNOQyxNQUFNO1FBQ05DLE9BQU87UUFDUEMsT0FBTztRQUNQQyxNQUFNO1FBQ05DLE9BQU87UUFDUEMsT0FBTztRQUNQQyxTQUFTO1FBQ1RDLE1BQU07UUFDTkMsS0FBSztRQUNMQyxPQUFPO1FBQ1BDLE1BQU07UUFDTkMsT0FBTztRQUNQQyxRQUFRO1FBQ1JDLElBQUk7UUFDSkMsSUFBSTtRQUNKQyxJQUFJO1FBQ0pDLFNBQVM7UUFDVEMsSUFBSTtRQUNKQyxLQUFLO1FBQ0xDLE9BQU87UUFDUEMsS0FBSztRQUNMQyxTQUFTO1FBQ1RDLEtBQUs7UUFDTEMsS0FBSztRQUNMQyxLQUFLO1FBQ0xDLE9BQU87UUFDUEMsT0FBTztRQUNQQyxNQUFNO1FBQ05DLE9BQU87UUFDUEMsT0FBTztRQUNQQyxTQUFTO1FBQ1RDLE1BQU07UUFDTkMsS0FBSztRQUNMQyxPQUFPO1FBQ1BDLE1BQU07UUFDTkMsT0FBTztRQUNQQyxRQUFRO1FBQ1JDLElBQUk7UUFDSkMsSUFBSTtRQUNKQyxJQUFJO1FBQ0pDLFNBQVM7UUFDVEMsSUFBSTtRQUNKQyxLQUFLO1FBQ0xDLFFBQVE7UUFDUkMsT0FBTztRQUNQQyxLQUFLO1FBQ0xDLFNBQVM7UUFDVEMsS0FBSztRQUNMQyxLQUFLO1FBQ0xDLEtBQUs7UUFDTEMsT0FBTztRQUNQQyxVQUFVO1FBQ1ZDLE9BQU87UUFDUEMsS0FBSztRQUNMQyxNQUFNO1FBQ05DLE1BQU07UUFDTkMsUUFBUTtRQUNSQyxNQUFNO1FBQ05DLEtBQUs7UUFDTEMsS0FBSztRQUNMQyxLQUFLO1FBQ0xDLE9BQU87UUFDUEMsT0FBTztRQUNQQyxPQUFPO1FBQ1BDLE9BQU87UUFDUEMsT0FBTztRQUNQQyxPQUFPO1FBQ1BDLE9BQU87UUFDUEMsT0FBTztRQUNQQyxRQUFRO1FBQ1JDLFFBQVE7UUFDUkMsTUFBTTtRQUNOQyxRQUFRO1FBQ1JDLFFBQVE7UUFDUkMsT0FBTztRQUNQQyxPQUFPO1FBQ1BDLFFBQVE7UUFDUkMsUUFBUTtRQUNSQyxPQUFPO1FBQ1BDLE9BQU87UUFDUEMsTUFBTTtRQUNOQyxPQUFPO1FBQ1BDLFFBQVE7UUFDUkMsTUFBTTtRQUNOQyxPQUFPO1FBQ1BDLFNBQVM7UUFDVEMsTUFBTTtRQUNOQyxNQUFNO1FBQ05DLE1BQU07UUFDTkMsTUFBTTtRQUNOQyxNQUFN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Y2hhaW4vY29yZS9kaXN0L3V0aWxzL3NheC1qcy9zYXguanM/ZGM4YyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBAdHMtbm9jaGVja1xuLy8gSW5saW5lZCB0byBkZWFsIHdpdGggcG9ydGFiaWxpdHkgaXNzdWVzXG4vLyBPcmlnaW5hbGx5IGZyb206IGh0dHBzOi8vZ2l0aHViLmNvbS9pc2FhY3Mvc2F4LWpzXG5jb25zdCBpbml0aWFsaXplU2F4ID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IHNheCA9IHt9O1xuICAgIHNheC5wYXJzZXIgPSBmdW5jdGlvbiAoc3RyaWN0LCBvcHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTQVhQYXJzZXIoc3RyaWN0LCBvcHQpO1xuICAgIH07XG4gICAgc2F4LlNBWFBhcnNlciA9IFNBWFBhcnNlcjtcbiAgICBzYXguU0FYU3RyZWFtID0gU0FYU3RyZWFtO1xuICAgIHNheC5jcmVhdGVTdHJlYW0gPSBjcmVhdGVTdHJlYW07XG4gICAgLy8gV2hlbiB3ZSBwYXNzIHRoZSBNQVhfQlVGRkVSX0xFTkdUSCBwb3NpdGlvbiwgc3RhcnQgY2hlY2tpbmcgZm9yIGJ1ZmZlciBvdmVycnVucy5cbiAgICAvLyBXaGVuIHdlIGNoZWNrLCBzY2hlZHVsZSB0aGUgbmV4dCBjaGVjayBmb3IgTUFYX0JVRkZFUl9MRU5HVEggLSAobWF4KGJ1ZmZlciBsZW5ndGhzKSksXG4gICAgLy8gc2luY2UgdGhhdCdzIHRoZSBlYXJsaWVzdCB0aGF0IGEgYnVmZmVyIG92ZXJydW4gY291bGQgb2NjdXIuICBUaGlzIHdheSwgY2hlY2tzIGFyZVxuICAgIC8vIGFzIHJhcmUgYXMgcmVxdWlyZWQsIGJ1dCBhcyBvZnRlbiBhcyBuZWNlc3NhcnkgdG8gZW5zdXJlIG5ldmVyIGNyb3NzaW5nIHRoaXMgYm91bmQuXG4gICAgLy8gRnVydGhlcm1vcmUsIGJ1ZmZlcnMgYXJlIG9ubHkgdGVzdGVkIGF0IG1vc3Qgb25jZSBwZXIgd3JpdGUoKSwgc28gcGFzc2luZyBhIHZlcnlcbiAgICAvLyBsYXJnZSBzdHJpbmcgaW50byB3cml0ZSgpIG1pZ2h0IGhhdmUgdW5kZXNpcmFibGUgZWZmZWN0cywgYnV0IHRoaXMgaXMgbWFuYWdlYWJsZSBieVxuICAgIC8vIHRoZSBjYWxsZXIsIHNvIGl0IGlzIGFzc3VtZWQgdG8gYmUgc2FmZS4gIFRodXMsIGEgY2FsbCB0byB3cml0ZSgpIG1heSwgaW4gdGhlIGV4dHJlbWVcbiAgICAvLyBlZGdlIGNhc2UsIHJlc3VsdCBpbiBjcmVhdGluZyBhdCBtb3N0IG9uZSBjb21wbGV0ZSBjb3B5IG9mIHRoZSBzdHJpbmcgcGFzc2VkIGluLlxuICAgIC8vIFNldCB0byBJbmZpbml0eSB0byBoYXZlIHVubGltaXRlZCBidWZmZXJzLlxuICAgIHNheC5NQVhfQlVGRkVSX0xFTkdUSCA9IDY0ICogMTAyNDtcbiAgICBjb25zdCBidWZmZXJzID0gW1xuICAgICAgICBcImNvbW1lbnRcIixcbiAgICAgICAgXCJzZ21sRGVjbFwiLFxuICAgICAgICBcInRleHROb2RlXCIsXG4gICAgICAgIFwidGFnTmFtZVwiLFxuICAgICAgICBcImRvY3R5cGVcIixcbiAgICAgICAgXCJwcm9jSW5zdE5hbWVcIixcbiAgICAgICAgXCJwcm9jSW5zdEJvZHlcIixcbiAgICAgICAgXCJlbnRpdHlcIixcbiAgICAgICAgXCJhdHRyaWJOYW1lXCIsXG4gICAgICAgIFwiYXR0cmliVmFsdWVcIixcbiAgICAgICAgXCJjZGF0YVwiLFxuICAgICAgICBcInNjcmlwdFwiLFxuICAgIF07XG4gICAgc2F4LkVWRU5UUyA9IFtcbiAgICAgICAgXCJ0ZXh0XCIsXG4gICAgICAgIFwicHJvY2Vzc2luZ2luc3RydWN0aW9uXCIsXG4gICAgICAgIFwic2dtbGRlY2xhcmF0aW9uXCIsXG4gICAgICAgIFwiZG9jdHlwZVwiLFxuICAgICAgICBcImNvbW1lbnRcIixcbiAgICAgICAgXCJvcGVudGFnc3RhcnRcIixcbiAgICAgICAgXCJhdHRyaWJ1dGVcIixcbiAgICAgICAgXCJvcGVudGFnXCIsXG4gICAgICAgIFwiY2xvc2V0YWdcIixcbiAgICAgICAgXCJvcGVuY2RhdGFcIixcbiAgICAgICAgXCJjZGF0YVwiLFxuICAgICAgICBcImNsb3NlY2RhdGFcIixcbiAgICAgICAgXCJlcnJvclwiLFxuICAgICAgICBcImVuZFwiLFxuICAgICAgICBcInJlYWR5XCIsXG4gICAgICAgIFwic2NyaXB0XCIsXG4gICAgICAgIFwib3Blbm5hbWVzcGFjZVwiLFxuICAgICAgICBcImNsb3NlbmFtZXNwYWNlXCIsXG4gICAgXTtcbiAgICBmdW5jdGlvbiBTQVhQYXJzZXIoc3RyaWN0LCBvcHQpIHtcbiAgICAgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFNBWFBhcnNlcikpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU0FYUGFyc2VyKHN0cmljdCwgb3B0KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcGFyc2VyID0gdGhpcztcbiAgICAgICAgY2xlYXJCdWZmZXJzKHBhcnNlcik7XG4gICAgICAgIHBhcnNlci5xID0gcGFyc2VyLmMgPSBcIlwiO1xuICAgICAgICBwYXJzZXIuYnVmZmVyQ2hlY2tQb3NpdGlvbiA9IHNheC5NQVhfQlVGRkVSX0xFTkdUSDtcbiAgICAgICAgcGFyc2VyLm9wdCA9IG9wdCB8fCB7fTtcbiAgICAgICAgcGFyc2VyLm9wdC5sb3dlcmNhc2UgPSBwYXJzZXIub3B0Lmxvd2VyY2FzZSB8fCBwYXJzZXIub3B0Lmxvd2VyY2FzZXRhZ3M7XG4gICAgICAgIHBhcnNlci5sb29zZUNhc2UgPSBwYXJzZXIub3B0Lmxvd2VyY2FzZSA/IFwidG9Mb3dlckNhc2VcIiA6IFwidG9VcHBlckNhc2VcIjtcbiAgICAgICAgcGFyc2VyLnRhZ3MgPSBbXTtcbiAgICAgICAgcGFyc2VyLmNsb3NlZCA9IHBhcnNlci5jbG9zZWRSb290ID0gcGFyc2VyLnNhd1Jvb3QgPSBmYWxzZTtcbiAgICAgICAgcGFyc2VyLnRhZyA9IHBhcnNlci5lcnJvciA9IG51bGw7XG4gICAgICAgIHBhcnNlci5zdHJpY3QgPSAhIXN0cmljdDtcbiAgICAgICAgcGFyc2VyLm5vc2NyaXB0ID0gISEoc3RyaWN0IHx8IHBhcnNlci5vcHQubm9zY3JpcHQpO1xuICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkJFR0lOO1xuICAgICAgICBwYXJzZXIuc3RyaWN0RW50aXRpZXMgPSBwYXJzZXIub3B0LnN0cmljdEVudGl0aWVzO1xuICAgICAgICBwYXJzZXIuRU5USVRJRVMgPSBwYXJzZXIuc3RyaWN0RW50aXRpZXNcbiAgICAgICAgICAgID8gT2JqZWN0LmNyZWF0ZShzYXguWE1MX0VOVElUSUVTKVxuICAgICAgICAgICAgOiBPYmplY3QuY3JlYXRlKHNheC5FTlRJVElFUyk7XG4gICAgICAgIHBhcnNlci5hdHRyaWJMaXN0ID0gW107XG4gICAgICAgIC8vIG5hbWVzcGFjZXMgZm9ybSBhIHByb3RvdHlwZSBjaGFpbi5cbiAgICAgICAgLy8gaXQgYWx3YXlzIHBvaW50cyBhdCB0aGUgY3VycmVudCB0YWcsXG4gICAgICAgIC8vIHdoaWNoIHByb3RvcyB0byBpdHMgcGFyZW50IHRhZy5cbiAgICAgICAgaWYgKHBhcnNlci5vcHQueG1sbnMpIHtcbiAgICAgICAgICAgIHBhcnNlci5ucyA9IE9iamVjdC5jcmVhdGUocm9vdE5TKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBtb3N0bHkganVzdCBmb3IgZXJyb3IgcmVwb3J0aW5nXG4gICAgICAgIHBhcnNlci50cmFja1Bvc2l0aW9uID0gcGFyc2VyLm9wdC5wb3NpdGlvbiAhPT0gZmFsc2U7XG4gICAgICAgIGlmIChwYXJzZXIudHJhY2tQb3NpdGlvbikge1xuICAgICAgICAgICAgcGFyc2VyLnBvc2l0aW9uID0gcGFyc2VyLmxpbmUgPSBwYXJzZXIuY29sdW1uID0gMDtcbiAgICAgICAgfVxuICAgICAgICBlbWl0KHBhcnNlciwgXCJvbnJlYWR5XCIpO1xuICAgIH1cbiAgICBpZiAoIU9iamVjdC5jcmVhdGUpIHtcbiAgICAgICAgT2JqZWN0LmNyZWF0ZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBGKCkgeyB9XG4gICAgICAgICAgICBGLnByb3RvdHlwZSA9IG87XG4gICAgICAgICAgICB2YXIgbmV3ZiA9IG5ldyBGKCk7XG4gICAgICAgICAgICByZXR1cm4gbmV3ZjtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgaWYgKCFPYmplY3Qua2V5cykge1xuICAgICAgICBPYmplY3Qua2V5cyA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICAgICAgICB2YXIgYSA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBvKVxuICAgICAgICAgICAgICAgIGlmIChvLmhhc093blByb3BlcnR5KGkpKVxuICAgICAgICAgICAgICAgICAgICBhLnB1c2goaSk7XG4gICAgICAgICAgICByZXR1cm4gYTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2hlY2tCdWZmZXJMZW5ndGgocGFyc2VyKSB7XG4gICAgICAgIHZhciBtYXhBbGxvd2VkID0gTWF0aC5tYXgoc2F4Lk1BWF9CVUZGRVJfTEVOR1RILCAxMCk7XG4gICAgICAgIHZhciBtYXhBY3R1YWwgPSAwO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGJ1ZmZlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgbGVuID0gcGFyc2VyW2J1ZmZlcnNbaV1dLmxlbmd0aDtcbiAgICAgICAgICAgIGlmIChsZW4gPiBtYXhBbGxvd2VkKSB7XG4gICAgICAgICAgICAgICAgLy8gVGV4dC9jZGF0YSBub2RlcyBjYW4gZ2V0IGJpZywgYW5kIHNpbmNlIHRoZXkncmUgYnVmZmVyZWQsXG4gICAgICAgICAgICAgICAgLy8gd2UgY2FuIGdldCBoZXJlIHVuZGVyIG5vcm1hbCBjb25kaXRpb25zLlxuICAgICAgICAgICAgICAgIC8vIEF2b2lkIGlzc3VlcyBieSBlbWl0dGluZyB0aGUgdGV4dCBub2RlIG5vdyxcbiAgICAgICAgICAgICAgICAvLyBzbyBhdCBsZWFzdCBpdCB3b24ndCBnZXQgYW55IGJpZ2dlci5cbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGJ1ZmZlcnNbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInRleHROb2RlXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZVRleHQocGFyc2VyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY2RhdGFcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtaXROb2RlKHBhcnNlciwgXCJvbmNkYXRhXCIsIHBhcnNlci5jZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuY2RhdGEgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJzY3JpcHRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtaXROb2RlKHBhcnNlciwgXCJvbnNjcmlwdFwiLCBwYXJzZXIuc2NyaXB0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zY3JpcHQgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcihwYXJzZXIsIFwiTWF4IGJ1ZmZlciBsZW5ndGggZXhjZWVkZWQ6IFwiICsgYnVmZmVyc1tpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWF4QWN0dWFsID0gTWF0aC5tYXgobWF4QWN0dWFsLCBsZW4pO1xuICAgICAgICB9XG4gICAgICAgIC8vIHNjaGVkdWxlIHRoZSBuZXh0IGNoZWNrIGZvciB0aGUgZWFybGllc3QgcG9zc2libGUgYnVmZmVyIG92ZXJydW4uXG4gICAgICAgIHZhciBtID0gc2F4Lk1BWF9CVUZGRVJfTEVOR1RIIC0gbWF4QWN0dWFsO1xuICAgICAgICBwYXJzZXIuYnVmZmVyQ2hlY2tQb3NpdGlvbiA9IG0gKyBwYXJzZXIucG9zaXRpb247XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNsZWFyQnVmZmVycyhwYXJzZXIpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBidWZmZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgcGFyc2VyW2J1ZmZlcnNbaV1dID0gXCJcIjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBmbHVzaEJ1ZmZlcnMocGFyc2VyKSB7XG4gICAgICAgIGNsb3NlVGV4dChwYXJzZXIpO1xuICAgICAgICBpZiAocGFyc2VyLmNkYXRhICE9PSBcIlwiKSB7XG4gICAgICAgICAgICBlbWl0Tm9kZShwYXJzZXIsIFwib25jZGF0YVwiLCBwYXJzZXIuY2RhdGEpO1xuICAgICAgICAgICAgcGFyc2VyLmNkYXRhID0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VyLnNjcmlwdCAhPT0gXCJcIikge1xuICAgICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCBcIm9uc2NyaXB0XCIsIHBhcnNlci5zY3JpcHQpO1xuICAgICAgICAgICAgcGFyc2VyLnNjcmlwdCA9IFwiXCI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgU0FYUGFyc2VyLnByb3RvdHlwZSA9IHtcbiAgICAgICAgZW5kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBlbmQodGhpcyk7XG4gICAgICAgIH0sXG4gICAgICAgIHdyaXRlOiB3cml0ZSxcbiAgICAgICAgcmVzdW1lOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9LFxuICAgICAgICBjbG9zZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMud3JpdGUobnVsbCk7XG4gICAgICAgIH0sXG4gICAgICAgIGZsdXNoOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmbHVzaEJ1ZmZlcnModGhpcyk7XG4gICAgICAgIH0sXG4gICAgfTtcbiAgICB2YXIgU3RyZWFtID0gUmVhZGFibGVTdHJlYW07XG4gICAgaWYgKCFTdHJlYW0pXG4gICAgICAgIFN0cmVhbSA9IGZ1bmN0aW9uICgpIHsgfTtcbiAgICB2YXIgc3RyZWFtV3JhcHMgPSBzYXguRVZFTlRTLmZpbHRlcihmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgcmV0dXJuIGV2ICE9PSBcImVycm9yXCIgJiYgZXYgIT09IFwiZW5kXCI7XG4gICAgfSk7XG4gICAgZnVuY3Rpb24gY3JlYXRlU3RyZWFtKHN0cmljdCwgb3B0KSB7XG4gICAgICAgIHJldHVybiBuZXcgU0FYU3RyZWFtKHN0cmljdCwgb3B0KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gU0FYU3RyZWFtKHN0cmljdCwgb3B0KSB7XG4gICAgICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBTQVhTdHJlYW0pKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFNBWFN0cmVhbShzdHJpY3QsIG9wdCk7XG4gICAgICAgIH1cbiAgICAgICAgU3RyZWFtLmFwcGx5KHRoaXMpO1xuICAgICAgICB0aGlzLl9wYXJzZXIgPSBuZXcgU0FYUGFyc2VyKHN0cmljdCwgb3B0KTtcbiAgICAgICAgdGhpcy53cml0YWJsZSA9IHRydWU7XG4gICAgICAgIHRoaXMucmVhZGFibGUgPSB0cnVlO1xuICAgICAgICB2YXIgbWUgPSB0aGlzO1xuICAgICAgICB0aGlzLl9wYXJzZXIub25lbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBtZS5lbWl0KFwiZW5kXCIpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9wYXJzZXIub25lcnJvciA9IGZ1bmN0aW9uIChlcikge1xuICAgICAgICAgICAgbWUuZW1pdChcImVycm9yXCIsIGVyKTtcbiAgICAgICAgICAgIC8vIGlmIGRpZG4ndCB0aHJvdywgdGhlbiBtZWFucyBlcnJvciB3YXMgaGFuZGxlZC5cbiAgICAgICAgICAgIC8vIGdvIGFoZWFkIGFuZCBjbGVhciBlcnJvciwgc28gd2UgY2FuIHdyaXRlIGFnYWluLlxuICAgICAgICAgICAgbWUuX3BhcnNlci5lcnJvciA9IG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX2RlY29kZXIgPSBudWxsO1xuICAgICAgICBzdHJlYW1XcmFwcy5mb3JFYWNoKGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG1lLCBcIm9uXCIgKyBldiwge1xuICAgICAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWUuX3BhcnNlcltcIm9uXCIgKyBldl07XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIChoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWUucmVtb3ZlQWxsTGlzdGVuZXJzKGV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lLl9wYXJzZXJbXCJvblwiICsgZXZdID0gaDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG1lLm9uKGV2LCBoKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgU0FYU3RyZWFtLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3RyZWFtLnByb3RvdHlwZSwge1xuICAgICAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgICAgICAgdmFsdWU6IFNBWFN0cmVhbSxcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICBTQVhTdHJlYW0ucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgdGhpcy5fcGFyc2VyLndyaXRlKGRhdGEudG9TdHJpbmcoKSk7XG4gICAgICAgIHRoaXMuZW1pdChcImRhdGFcIiwgZGF0YSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG4gICAgU0FYU3RyZWFtLnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbiAoY2h1bmspIHtcbiAgICAgICAgaWYgKGNodW5rICYmIGNodW5rLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy53cml0ZShjaHVuayk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcGFyc2VyLmVuZCgpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9O1xuICAgIFNBWFN0cmVhbS5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAoZXYsIGhhbmRsZXIpIHtcbiAgICAgICAgdmFyIG1lID0gdGhpcztcbiAgICAgICAgaWYgKCFtZS5fcGFyc2VyW1wib25cIiArIGV2XSAmJiBzdHJlYW1XcmFwcy5pbmRleE9mKGV2KSAhPT0gLTEpIHtcbiAgICAgICAgICAgIG1lLl9wYXJzZXJbXCJvblwiICsgZXZdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzLmxlbmd0aCA9PT0gMVxuICAgICAgICAgICAgICAgICAgICA/IFthcmd1bWVudHNbMF1dXG4gICAgICAgICAgICAgICAgICAgIDogQXJyYXkuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICBhcmdzLnNwbGljZSgwLCAwLCBldik7XG4gICAgICAgICAgICAgICAgbWUuZW1pdC5hcHBseShtZSwgYXJncyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBTdHJlYW0ucHJvdG90eXBlLm9uLmNhbGwobWUsIGV2LCBoYW5kbGVyKTtcbiAgICB9O1xuICAgIC8vIHRoaXMgcmVhbGx5IG5lZWRzIHRvIGJlIHJlcGxhY2VkIHdpdGggY2hhcmFjdGVyIGNsYXNzZXMuXG4gICAgLy8gWE1MIGFsbG93cyBhbGwgbWFubmVyIG9mIHJpZGljdWxvdXMgbnVtYmVycyBhbmQgZGlnaXRzLlxuICAgIHZhciBDREFUQSA9IFwiW0NEQVRBW1wiO1xuICAgIHZhciBET0NUWVBFID0gXCJET0NUWVBFXCI7XG4gICAgdmFyIFhNTF9OQU1FU1BBQ0UgPSBcImh0dHA6Ly93d3cudzMub3JnL1hNTC8xOTk4L25hbWVzcGFjZVwiO1xuICAgIHZhciBYTUxOU19OQU1FU1BBQ0UgPSBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAveG1sbnMvXCI7XG4gICAgdmFyIHJvb3ROUyA9IHsgeG1sOiBYTUxfTkFNRVNQQUNFLCB4bWxuczogWE1MTlNfTkFNRVNQQUNFIH07XG4gICAgLy8gaHR0cDovL3d3dy53My5vcmcvVFIvUkVDLXhtbC8jTlQtTmFtZVN0YXJ0Q2hhclxuICAgIC8vIFRoaXMgaW1wbGVtZW50YXRpb24gd29ya3Mgb24gc3RyaW5ncywgYSBzaW5nbGUgY2hhcmFjdGVyIGF0IGEgdGltZVxuICAgIC8vIGFzIHN1Y2gsIGl0IGNhbm5vdCBldmVyIHN1cHBvcnQgYXN0cmFsLXBsYW5lIGNoYXJhY3RlcnMgKDEwMDAwLUVGRkZGKVxuICAgIC8vIHdpdGhvdXQgYSBzaWduaWZpY2FudCBicmVha2luZyBjaGFuZ2UgdG8gZWl0aGVyIHRoaXMgIHBhcnNlciwgb3IgdGhlXG4gICAgLy8gSmF2YVNjcmlwdCBsYW5ndWFnZS4gIEltcGxlbWVudGF0aW9uIG9mIGFuIGVtb2ppLWNhcGFibGUgeG1sIHBhcnNlclxuICAgIC8vIGlzIGxlZnQgYXMgYW4gZXhlcmNpc2UgZm9yIHRoZSByZWFkZXIuXG4gICAgdmFyIG5hbWVTdGFydCA9IC9bOl9BLVphLXpcXHUwMEMwLVxcdTAwRDZcXHUwMEQ4LVxcdTAwRjZcXHUwMEY4LVxcdTAyRkZcXHUwMzcwLVxcdTAzN0RcXHUwMzdGLVxcdTFGRkZcXHUyMDBDLVxcdTIwMERcXHUyMDcwLVxcdTIxOEZcXHUyQzAwLVxcdTJGRUZcXHUzMDAxLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRkRdLztcbiAgICB2YXIgbmFtZUJvZHkgPSAvWzpfQS1aYS16XFx1MDBDMC1cXHUwMEQ2XFx1MDBEOC1cXHUwMEY2XFx1MDBGOC1cXHUwMkZGXFx1MDM3MC1cXHUwMzdEXFx1MDM3Ri1cXHUxRkZGXFx1MjAwQy1cXHUyMDBEXFx1MjA3MC1cXHUyMThGXFx1MkMwMC1cXHUyRkVGXFx1MzAwMS1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkZEXFx1MDBCN1xcdTAzMDAtXFx1MDM2RlxcdTIwM0YtXFx1MjA0MC5cXGQtXS87XG4gICAgdmFyIGVudGl0eVN0YXJ0ID0gL1sjOl9BLVphLXpcXHUwMEMwLVxcdTAwRDZcXHUwMEQ4LVxcdTAwRjZcXHUwMEY4LVxcdTAyRkZcXHUwMzcwLVxcdTAzN0RcXHUwMzdGLVxcdTFGRkZcXHUyMDBDLVxcdTIwMERcXHUyMDcwLVxcdTIxOEZcXHUyQzAwLVxcdTJGRUZcXHUzMDAxLVxcdUQ3RkZcXHVGOTAwLVxcdUZEQ0ZcXHVGREYwLVxcdUZGRkRdLztcbiAgICB2YXIgZW50aXR5Qm9keSA9IC9bIzpfQS1aYS16XFx1MDBDMC1cXHUwMEQ2XFx1MDBEOC1cXHUwMEY2XFx1MDBGOC1cXHUwMkZGXFx1MDM3MC1cXHUwMzdEXFx1MDM3Ri1cXHUxRkZGXFx1MjAwQy1cXHUyMDBEXFx1MjA3MC1cXHUyMThGXFx1MkMwMC1cXHUyRkVGXFx1MzAwMS1cXHVEN0ZGXFx1RjkwMC1cXHVGRENGXFx1RkRGMC1cXHVGRkZEXFx1MDBCN1xcdTAzMDAtXFx1MDM2RlxcdTIwM0YtXFx1MjA0MC5cXGQtXS87XG4gICAgZnVuY3Rpb24gaXNXaGl0ZXNwYWNlKGMpIHtcbiAgICAgICAgcmV0dXJuIGMgPT09IFwiIFwiIHx8IGMgPT09IFwiXFxuXCIgfHwgYyA9PT0gXCJcXHJcIiB8fCBjID09PSBcIlxcdFwiO1xuICAgIH1cbiAgICBmdW5jdGlvbiBpc1F1b3RlKGMpIHtcbiAgICAgICAgcmV0dXJuIGMgPT09ICdcIicgfHwgYyA9PT0gXCInXCI7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGlzQXR0cmliRW5kKGMpIHtcbiAgICAgICAgcmV0dXJuIGMgPT09IFwiPlwiIHx8IGlzV2hpdGVzcGFjZShjKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaXNNYXRjaChyZWdleCwgYykge1xuICAgICAgICByZXR1cm4gcmVnZXgudGVzdChjKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gbm90TWF0Y2gocmVnZXgsIGMpIHtcbiAgICAgICAgcmV0dXJuICFpc01hdGNoKHJlZ2V4LCBjKTtcbiAgICB9XG4gICAgdmFyIFMgPSAwO1xuICAgIHNheC5TVEFURSA9IHtcbiAgICAgICAgQkVHSU46IFMrKyxcbiAgICAgICAgQkVHSU5fV0hJVEVTUEFDRTogUysrLFxuICAgICAgICBURVhUOiBTKyssXG4gICAgICAgIFRFWFRfRU5USVRZOiBTKyssXG4gICAgICAgIE9QRU5fV0FLQTogUysrLFxuICAgICAgICBTR01MX0RFQ0w6IFMrKyxcbiAgICAgICAgU0dNTF9ERUNMX1FVT1RFRDogUysrLFxuICAgICAgICBET0NUWVBFOiBTKyssXG4gICAgICAgIERPQ1RZUEVfUVVPVEVEOiBTKyssXG4gICAgICAgIERPQ1RZUEVfRFREOiBTKyssXG4gICAgICAgIERPQ1RZUEVfRFREX1FVT1RFRDogUysrLFxuICAgICAgICBDT01NRU5UX1NUQVJUSU5HOiBTKyssXG4gICAgICAgIENPTU1FTlQ6IFMrKyxcbiAgICAgICAgQ09NTUVOVF9FTkRJTkc6IFMrKyxcbiAgICAgICAgQ09NTUVOVF9FTkRFRDogUysrLFxuICAgICAgICBDREFUQTogUysrLFxuICAgICAgICBDREFUQV9FTkRJTkc6IFMrKyxcbiAgICAgICAgQ0RBVEFfRU5ESU5HXzI6IFMrKyxcbiAgICAgICAgUFJPQ19JTlNUOiBTKyssXG4gICAgICAgIFBST0NfSU5TVF9CT0RZOiBTKyssXG4gICAgICAgIFBST0NfSU5TVF9FTkRJTkc6IFMrKyxcbiAgICAgICAgT1BFTl9UQUc6IFMrKyxcbiAgICAgICAgT1BFTl9UQUdfU0xBU0g6IFMrKyxcbiAgICAgICAgQVRUUklCOiBTKyssXG4gICAgICAgIEFUVFJJQl9OQU1FOiBTKyssXG4gICAgICAgIEFUVFJJQl9OQU1FX1NBV19XSElURTogUysrLFxuICAgICAgICBBVFRSSUJfVkFMVUU6IFMrKyxcbiAgICAgICAgQVRUUklCX1ZBTFVFX1FVT1RFRDogUysrLFxuICAgICAgICBBVFRSSUJfVkFMVUVfQ0xPU0VEOiBTKyssXG4gICAgICAgIEFUVFJJQl9WQUxVRV9VTlFVT1RFRDogUysrLFxuICAgICAgICBBVFRSSUJfVkFMVUVfRU5USVRZX1E6IFMrKyxcbiAgICAgICAgQVRUUklCX1ZBTFVFX0VOVElUWV9VOiBTKyssXG4gICAgICAgIENMT1NFX1RBRzogUysrLFxuICAgICAgICBDTE9TRV9UQUdfU0FXX1dISVRFOiBTKyssXG4gICAgICAgIFNDUklQVDogUysrLFxuICAgICAgICBTQ1JJUFRfRU5ESU5HOiBTKyssIC8vIDxzY3JpcHQ+IC4uLiA8XG4gICAgfTtcbiAgICBzYXguWE1MX0VOVElUSUVTID0ge1xuICAgICAgICBhbXA6IFwiJlwiLFxuICAgICAgICBndDogXCI+XCIsXG4gICAgICAgIGx0OiBcIjxcIixcbiAgICAgICAgcXVvdDogJ1wiJyxcbiAgICAgICAgYXBvczogXCInXCIsXG4gICAgfTtcbiAgICBzYXguRU5USVRJRVMgPSB7XG4gICAgICAgIGFtcDogXCImXCIsXG4gICAgICAgIGd0OiBcIj5cIixcbiAgICAgICAgbHQ6IFwiPFwiLFxuICAgICAgICBxdW90OiAnXCInLFxuICAgICAgICBhcG9zOiBcIidcIixcbiAgICAgICAgQUVsaWc6IDE5OCxcbiAgICAgICAgQWFjdXRlOiAxOTMsXG4gICAgICAgIEFjaXJjOiAxOTQsXG4gICAgICAgIEFncmF2ZTogMTkyLFxuICAgICAgICBBcmluZzogMTk3LFxuICAgICAgICBBdGlsZGU6IDE5NSxcbiAgICAgICAgQXVtbDogMTk2LFxuICAgICAgICBDY2VkaWw6IDE5OSxcbiAgICAgICAgRVRIOiAyMDgsXG4gICAgICAgIEVhY3V0ZTogMjAxLFxuICAgICAgICBFY2lyYzogMjAyLFxuICAgICAgICBFZ3JhdmU6IDIwMCxcbiAgICAgICAgRXVtbDogMjAzLFxuICAgICAgICBJYWN1dGU6IDIwNSxcbiAgICAgICAgSWNpcmM6IDIwNixcbiAgICAgICAgSWdyYXZlOiAyMDQsXG4gICAgICAgIEl1bWw6IDIwNyxcbiAgICAgICAgTnRpbGRlOiAyMDksXG4gICAgICAgIE9hY3V0ZTogMjExLFxuICAgICAgICBPY2lyYzogMjEyLFxuICAgICAgICBPZ3JhdmU6IDIxMCxcbiAgICAgICAgT3NsYXNoOiAyMTYsXG4gICAgICAgIE90aWxkZTogMjEzLFxuICAgICAgICBPdW1sOiAyMTQsXG4gICAgICAgIFRIT1JOOiAyMjIsXG4gICAgICAgIFVhY3V0ZTogMjE4LFxuICAgICAgICBVY2lyYzogMjE5LFxuICAgICAgICBVZ3JhdmU6IDIxNyxcbiAgICAgICAgVXVtbDogMjIwLFxuICAgICAgICBZYWN1dGU6IDIyMSxcbiAgICAgICAgYWFjdXRlOiAyMjUsXG4gICAgICAgIGFjaXJjOiAyMjYsXG4gICAgICAgIGFlbGlnOiAyMzAsXG4gICAgICAgIGFncmF2ZTogMjI0LFxuICAgICAgICBhcmluZzogMjI5LFxuICAgICAgICBhdGlsZGU6IDIyNyxcbiAgICAgICAgYXVtbDogMjI4LFxuICAgICAgICBjY2VkaWw6IDIzMSxcbiAgICAgICAgZWFjdXRlOiAyMzMsXG4gICAgICAgIGVjaXJjOiAyMzQsXG4gICAgICAgIGVncmF2ZTogMjMyLFxuICAgICAgICBldGg6IDI0MCxcbiAgICAgICAgZXVtbDogMjM1LFxuICAgICAgICBpYWN1dGU6IDIzNyxcbiAgICAgICAgaWNpcmM6IDIzOCxcbiAgICAgICAgaWdyYXZlOiAyMzYsXG4gICAgICAgIGl1bWw6IDIzOSxcbiAgICAgICAgbnRpbGRlOiAyNDEsXG4gICAgICAgIG9hY3V0ZTogMjQzLFxuICAgICAgICBvY2lyYzogMjQ0LFxuICAgICAgICBvZ3JhdmU6IDI0MixcbiAgICAgICAgb3NsYXNoOiAyNDgsXG4gICAgICAgIG90aWxkZTogMjQ1LFxuICAgICAgICBvdW1sOiAyNDYsXG4gICAgICAgIHN6bGlnOiAyMjMsXG4gICAgICAgIHRob3JuOiAyNTQsXG4gICAgICAgIHVhY3V0ZTogMjUwLFxuICAgICAgICB1Y2lyYzogMjUxLFxuICAgICAgICB1Z3JhdmU6IDI0OSxcbiAgICAgICAgdXVtbDogMjUyLFxuICAgICAgICB5YWN1dGU6IDI1MyxcbiAgICAgICAgeXVtbDogMjU1LFxuICAgICAgICBjb3B5OiAxNjksXG4gICAgICAgIHJlZzogMTc0LFxuICAgICAgICBuYnNwOiAxNjAsXG4gICAgICAgIGlleGNsOiAxNjEsXG4gICAgICAgIGNlbnQ6IDE2MixcbiAgICAgICAgcG91bmQ6IDE2MyxcbiAgICAgICAgY3VycmVuOiAxNjQsXG4gICAgICAgIHllbjogMTY1LFxuICAgICAgICBicnZiYXI6IDE2NixcbiAgICAgICAgc2VjdDogMTY3LFxuICAgICAgICB1bWw6IDE2OCxcbiAgICAgICAgb3JkZjogMTcwLFxuICAgICAgICBsYXF1bzogMTcxLFxuICAgICAgICBub3Q6IDE3MixcbiAgICAgICAgc2h5OiAxNzMsXG4gICAgICAgIG1hY3I6IDE3NSxcbiAgICAgICAgZGVnOiAxNzYsXG4gICAgICAgIHBsdXNtbjogMTc3LFxuICAgICAgICBzdXAxOiAxODUsXG4gICAgICAgIHN1cDI6IDE3OCxcbiAgICAgICAgc3VwMzogMTc5LFxuICAgICAgICBhY3V0ZTogMTgwLFxuICAgICAgICBtaWNybzogMTgxLFxuICAgICAgICBwYXJhOiAxODIsXG4gICAgICAgIG1pZGRvdDogMTgzLFxuICAgICAgICBjZWRpbDogMTg0LFxuICAgICAgICBvcmRtOiAxODYsXG4gICAgICAgIHJhcXVvOiAxODcsXG4gICAgICAgIGZyYWMxNDogMTg4LFxuICAgICAgICBmcmFjMTI6IDE4OSxcbiAgICAgICAgZnJhYzM0OiAxOTAsXG4gICAgICAgIGlxdWVzdDogMTkxLFxuICAgICAgICB0aW1lczogMjE1LFxuICAgICAgICBkaXZpZGU6IDI0NyxcbiAgICAgICAgT0VsaWc6IDMzOCxcbiAgICAgICAgb2VsaWc6IDMzOSxcbiAgICAgICAgU2Nhcm9uOiAzNTIsXG4gICAgICAgIHNjYXJvbjogMzUzLFxuICAgICAgICBZdW1sOiAzNzYsXG4gICAgICAgIGZub2Y6IDQwMixcbiAgICAgICAgY2lyYzogNzEwLFxuICAgICAgICB0aWxkZTogNzMyLFxuICAgICAgICBBbHBoYTogOTEzLFxuICAgICAgICBCZXRhOiA5MTQsXG4gICAgICAgIEdhbW1hOiA5MTUsXG4gICAgICAgIERlbHRhOiA5MTYsXG4gICAgICAgIEVwc2lsb246IDkxNyxcbiAgICAgICAgWmV0YTogOTE4LFxuICAgICAgICBFdGE6IDkxOSxcbiAgICAgICAgVGhldGE6IDkyMCxcbiAgICAgICAgSW90YTogOTIxLFxuICAgICAgICBLYXBwYTogOTIyLFxuICAgICAgICBMYW1iZGE6IDkyMyxcbiAgICAgICAgTXU6IDkyNCxcbiAgICAgICAgTnU6IDkyNSxcbiAgICAgICAgWGk6IDkyNixcbiAgICAgICAgT21pY3JvbjogOTI3LFxuICAgICAgICBQaTogOTI4LFxuICAgICAgICBSaG86IDkyOSxcbiAgICAgICAgU2lnbWE6IDkzMSxcbiAgICAgICAgVGF1OiA5MzIsXG4gICAgICAgIFVwc2lsb246IDkzMyxcbiAgICAgICAgUGhpOiA5MzQsXG4gICAgICAgIENoaTogOTM1LFxuICAgICAgICBQc2k6IDkzNixcbiAgICAgICAgT21lZ2E6IDkzNyxcbiAgICAgICAgYWxwaGE6IDk0NSxcbiAgICAgICAgYmV0YTogOTQ2LFxuICAgICAgICBnYW1tYTogOTQ3LFxuICAgICAgICBkZWx0YTogOTQ4LFxuICAgICAgICBlcHNpbG9uOiA5NDksXG4gICAgICAgIHpldGE6IDk1MCxcbiAgICAgICAgZXRhOiA5NTEsXG4gICAgICAgIHRoZXRhOiA5NTIsXG4gICAgICAgIGlvdGE6IDk1MyxcbiAgICAgICAga2FwcGE6IDk1NCxcbiAgICAgICAgbGFtYmRhOiA5NTUsXG4gICAgICAgIG11OiA5NTYsXG4gICAgICAgIG51OiA5NTcsXG4gICAgICAgIHhpOiA5NTgsXG4gICAgICAgIG9taWNyb246IDk1OSxcbiAgICAgICAgcGk6IDk2MCxcbiAgICAgICAgcmhvOiA5NjEsXG4gICAgICAgIHNpZ21hZjogOTYyLFxuICAgICAgICBzaWdtYTogOTYzLFxuICAgICAgICB0YXU6IDk2NCxcbiAgICAgICAgdXBzaWxvbjogOTY1LFxuICAgICAgICBwaGk6IDk2NixcbiAgICAgICAgY2hpOiA5NjcsXG4gICAgICAgIHBzaTogOTY4LFxuICAgICAgICBvbWVnYTogOTY5LFxuICAgICAgICB0aGV0YXN5bTogOTc3LFxuICAgICAgICB1cHNpaDogOTc4LFxuICAgICAgICBwaXY6IDk4MixcbiAgICAgICAgZW5zcDogODE5NCxcbiAgICAgICAgZW1zcDogODE5NSxcbiAgICAgICAgdGhpbnNwOiA4MjAxLFxuICAgICAgICB6d25qOiA4MjA0LFxuICAgICAgICB6d2o6IDgyMDUsXG4gICAgICAgIGxybTogODIwNixcbiAgICAgICAgcmxtOiA4MjA3LFxuICAgICAgICBuZGFzaDogODIxMSxcbiAgICAgICAgbWRhc2g6IDgyMTIsXG4gICAgICAgIGxzcXVvOiA4MjE2LFxuICAgICAgICByc3F1bzogODIxNyxcbiAgICAgICAgc2JxdW86IDgyMTgsXG4gICAgICAgIGxkcXVvOiA4MjIwLFxuICAgICAgICByZHF1bzogODIyMSxcbiAgICAgICAgYmRxdW86IDgyMjIsXG4gICAgICAgIGRhZ2dlcjogODIyNCxcbiAgICAgICAgRGFnZ2VyOiA4MjI1LFxuICAgICAgICBidWxsOiA4MjI2LFxuICAgICAgICBoZWxsaXA6IDgyMzAsXG4gICAgICAgIHBlcm1pbDogODI0MCxcbiAgICAgICAgcHJpbWU6IDgyNDIsXG4gICAgICAgIFByaW1lOiA4MjQzLFxuICAgICAgICBsc2FxdW86IDgyNDksXG4gICAgICAgIHJzYXF1bzogODI1MCxcbiAgICAgICAgb2xpbmU6IDgyNTQsXG4gICAgICAgIGZyYXNsOiA4MjYwLFxuICAgICAgICBldXJvOiA4MzY0LFxuICAgICAgICBpbWFnZTogODQ2NSxcbiAgICAgICAgd2VpZXJwOiA4NDcyLFxuICAgICAgICByZWFsOiA4NDc2LFxuICAgICAgICB0cmFkZTogODQ4MixcbiAgICAgICAgYWxlZnN5bTogODUwMSxcbiAgICAgICAgbGFycjogODU5MixcbiAgICAgICAgdWFycjogODU5MyxcbiAgICAgICAgcmFycjogODU5NCxcbiAgICAgICAgZGFycjogODU5NSxcbiAgICAgICAgaGFycjogODU5NixcbiAgICAgICAgY3JhcnI6IDg2MjksXG4gICAgICAgIGxBcnI6IDg2NTYsXG4gICAgICAgIHVBcnI6IDg2NTcsXG4gICAgICAgIHJBcnI6IDg2NTgsXG4gICAgICAgIGRBcnI6IDg2NTksXG4gICAgICAgIGhBcnI6IDg2NjAsXG4gICAgICAgIGZvcmFsbDogODcwNCxcbiAgICAgICAgcGFydDogODcwNixcbiAgICAgICAgZXhpc3Q6IDg3MDcsXG4gICAgICAgIGVtcHR5OiA4NzA5LFxuICAgICAgICBuYWJsYTogODcxMSxcbiAgICAgICAgaXNpbjogODcxMixcbiAgICAgICAgbm90aW46IDg3MTMsXG4gICAgICAgIG5pOiA4NzE1LFxuICAgICAgICBwcm9kOiA4NzE5LFxuICAgICAgICBzdW06IDg3MjEsXG4gICAgICAgIG1pbnVzOiA4NzIyLFxuICAgICAgICBsb3dhc3Q6IDg3MjcsXG4gICAgICAgIHJhZGljOiA4NzMwLFxuICAgICAgICBwcm9wOiA4NzMzLFxuICAgICAgICBpbmZpbjogODczNCxcbiAgICAgICAgYW5nOiA4NzM2LFxuICAgICAgICBhbmQ6IDg3NDMsXG4gICAgICAgIG9yOiA4NzQ0LFxuICAgICAgICBjYXA6IDg3NDUsXG4gICAgICAgIGN1cDogODc0NixcbiAgICAgICAgaW50OiA4NzQ3LFxuICAgICAgICB0aGVyZTQ6IDg3NTYsXG4gICAgICAgIHNpbTogODc2NCxcbiAgICAgICAgY29uZzogODc3MyxcbiAgICAgICAgYXN5bXA6IDg3NzYsXG4gICAgICAgIG5lOiA4ODAwLFxuICAgICAgICBlcXVpdjogODgwMSxcbiAgICAgICAgbGU6IDg4MDQsXG4gICAgICAgIGdlOiA4ODA1LFxuICAgICAgICBzdWI6IDg4MzQsXG4gICAgICAgIHN1cDogODgzNSxcbiAgICAgICAgbnN1YjogODgzNixcbiAgICAgICAgc3ViZTogODgzOCxcbiAgICAgICAgc3VwZTogODgzOSxcbiAgICAgICAgb3BsdXM6IDg4NTMsXG4gICAgICAgIG90aW1lczogODg1NSxcbiAgICAgICAgcGVycDogODg2OSxcbiAgICAgICAgc2RvdDogODkwMSxcbiAgICAgICAgbGNlaWw6IDg5NjgsXG4gICAgICAgIHJjZWlsOiA4OTY5LFxuICAgICAgICBsZmxvb3I6IDg5NzAsXG4gICAgICAgIHJmbG9vcjogODk3MSxcbiAgICAgICAgbGFuZzogOTAwMSxcbiAgICAgICAgcmFuZzogOTAwMixcbiAgICAgICAgbG96OiA5Njc0LFxuICAgICAgICBzcGFkZXM6IDk4MjQsXG4gICAgICAgIGNsdWJzOiA5ODI3LFxuICAgICAgICBoZWFydHM6IDk4MjksXG4gICAgICAgIGRpYW1zOiA5ODMwLFxuICAgIH07XG4gICAgT2JqZWN0LmtleXMoc2F4LkVOVElUSUVTKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgdmFyIGUgPSBzYXguRU5USVRJRVNba2V5XTtcbiAgICAgICAgdmFyIHMgPSB0eXBlb2YgZSA9PT0gXCJudW1iZXJcIiA/IFN0cmluZy5mcm9tQ2hhckNvZGUoZSkgOiBlO1xuICAgICAgICBzYXguRU5USVRJRVNba2V5XSA9IHM7XG4gICAgfSk7XG4gICAgZm9yICh2YXIgcyBpbiBzYXguU1RBVEUpIHtcbiAgICAgICAgc2F4LlNUQVRFW3NheC5TVEFURVtzXV0gPSBzO1xuICAgIH1cbiAgICAvLyBzaG9ydGhhbmRcbiAgICBTID0gc2F4LlNUQVRFO1xuICAgIGZ1bmN0aW9uIGVtaXQocGFyc2VyLCBldmVudCwgZGF0YSkge1xuICAgICAgICBwYXJzZXJbZXZlbnRdICYmIHBhcnNlcltldmVudF0oZGF0YSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGVtaXROb2RlKHBhcnNlciwgbm9kZVR5cGUsIGRhdGEpIHtcbiAgICAgICAgaWYgKHBhcnNlci50ZXh0Tm9kZSlcbiAgICAgICAgICAgIGNsb3NlVGV4dChwYXJzZXIpO1xuICAgICAgICBlbWl0KHBhcnNlciwgbm9kZVR5cGUsIGRhdGEpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBjbG9zZVRleHQocGFyc2VyKSB7XG4gICAgICAgIHBhcnNlci50ZXh0Tm9kZSA9IHRleHRvcHRzKHBhcnNlci5vcHQsIHBhcnNlci50ZXh0Tm9kZSk7XG4gICAgICAgIGlmIChwYXJzZXIudGV4dE5vZGUpXG4gICAgICAgICAgICBlbWl0KHBhcnNlciwgXCJvbnRleHRcIiwgcGFyc2VyLnRleHROb2RlKTtcbiAgICAgICAgcGFyc2VyLnRleHROb2RlID0gXCJcIjtcbiAgICB9XG4gICAgZnVuY3Rpb24gdGV4dG9wdHMob3B0LCB0ZXh0KSB7XG4gICAgICAgIGlmIChvcHQudHJpbSlcbiAgICAgICAgICAgIHRleHQgPSB0ZXh0LnRyaW0oKTtcbiAgICAgICAgaWYgKG9wdC5ub3JtYWxpemUpXG4gICAgICAgICAgICB0ZXh0ID0gdGV4dC5yZXBsYWNlKC9cXHMrL2csIFwiIFwiKTtcbiAgICAgICAgcmV0dXJuIHRleHQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGVycm9yKHBhcnNlciwgZXIpIHtcbiAgICAgICAgY2xvc2VUZXh0KHBhcnNlcik7XG4gICAgICAgIGlmIChwYXJzZXIudHJhY2tQb3NpdGlvbikge1xuICAgICAgICAgICAgZXIgKz1cbiAgICAgICAgICAgICAgICBcIlxcbkxpbmU6IFwiICtcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmxpbmUgK1xuICAgICAgICAgICAgICAgICAgICBcIlxcbkNvbHVtbjogXCIgK1xuICAgICAgICAgICAgICAgICAgICBwYXJzZXIuY29sdW1uICtcbiAgICAgICAgICAgICAgICAgICAgXCJcXG5DaGFyOiBcIiArXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlci5jO1xuICAgICAgICB9XG4gICAgICAgIGVyID0gbmV3IEVycm9yKGVyKTtcbiAgICAgICAgcGFyc2VyLmVycm9yID0gZXI7XG4gICAgICAgIGVtaXQocGFyc2VyLCBcIm9uZXJyb3JcIiwgZXIpO1xuICAgICAgICByZXR1cm4gcGFyc2VyO1xuICAgIH1cbiAgICBmdW5jdGlvbiBlbmQocGFyc2VyKSB7XG4gICAgICAgIGlmIChwYXJzZXIuc2F3Um9vdCAmJiAhcGFyc2VyLmNsb3NlZFJvb3QpXG4gICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJVbmNsb3NlZCByb290IHRhZ1wiKTtcbiAgICAgICAgaWYgKHBhcnNlci5zdGF0ZSAhPT0gUy5CRUdJTiAmJlxuICAgICAgICAgICAgcGFyc2VyLnN0YXRlICE9PSBTLkJFR0lOX1dISVRFU1BBQ0UgJiZcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSAhPT0gUy5URVhUKSB7XG4gICAgICAgICAgICBlcnJvcihwYXJzZXIsIFwiVW5leHBlY3RlZCBlbmRcIik7XG4gICAgICAgIH1cbiAgICAgICAgY2xvc2VUZXh0KHBhcnNlcik7XG4gICAgICAgIHBhcnNlci5jID0gXCJcIjtcbiAgICAgICAgcGFyc2VyLmNsb3NlZCA9IHRydWU7XG4gICAgICAgIGVtaXQocGFyc2VyLCBcIm9uZW5kXCIpO1xuICAgICAgICBTQVhQYXJzZXIuY2FsbChwYXJzZXIsIHBhcnNlci5zdHJpY3QsIHBhcnNlci5vcHQpO1xuICAgICAgICByZXR1cm4gcGFyc2VyO1xuICAgIH1cbiAgICBmdW5jdGlvbiBzdHJpY3RGYWlsKHBhcnNlciwgbWVzc2FnZSkge1xuICAgICAgICBpZiAodHlwZW9mIHBhcnNlciAhPT0gXCJvYmplY3RcIiB8fCAhKHBhcnNlciBpbnN0YW5jZW9mIFNBWFBhcnNlcikpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImJhZCBjYWxsIHRvIHN0cmljdEZhaWxcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlci5zdHJpY3QpIHtcbiAgICAgICAgICAgIGVycm9yKHBhcnNlciwgbWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gbmV3VGFnKHBhcnNlcikge1xuICAgICAgICBpZiAoIXBhcnNlci5zdHJpY3QpXG4gICAgICAgICAgICBwYXJzZXIudGFnTmFtZSA9IHBhcnNlci50YWdOYW1lW3BhcnNlci5sb29zZUNhc2VdKCk7XG4gICAgICAgIHZhciBwYXJlbnQgPSBwYXJzZXIudGFnc1twYXJzZXIudGFncy5sZW5ndGggLSAxXSB8fCBwYXJzZXI7XG4gICAgICAgIHZhciB0YWcgPSAocGFyc2VyLnRhZyA9IHsgbmFtZTogcGFyc2VyLnRhZ05hbWUsIGF0dHJpYnV0ZXM6IHt9IH0pO1xuICAgICAgICAvLyB3aWxsIGJlIG92ZXJyaWRkZW4gaWYgdGFnIGNvbnRhaWxzIGFuIHhtbG5zPVwiZm9vXCIgb3IgeG1sbnM6Zm9vPVwiYmFyXCJcbiAgICAgICAgaWYgKHBhcnNlci5vcHQueG1sbnMpIHtcbiAgICAgICAgICAgIHRhZy5ucyA9IHBhcmVudC5ucztcbiAgICAgICAgfVxuICAgICAgICBwYXJzZXIuYXR0cmliTGlzdC5sZW5ndGggPSAwO1xuICAgICAgICBlbWl0Tm9kZShwYXJzZXIsIFwib25vcGVudGFnc3RhcnRcIiwgdGFnKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gcW5hbWUobmFtZSwgYXR0cmlidXRlKSB7XG4gICAgICAgIHZhciBpID0gbmFtZS5pbmRleE9mKFwiOlwiKTtcbiAgICAgICAgdmFyIHF1YWxOYW1lID0gaSA8IDAgPyBbXCJcIiwgbmFtZV0gOiBuYW1lLnNwbGl0KFwiOlwiKTtcbiAgICAgICAgdmFyIHByZWZpeCA9IHF1YWxOYW1lWzBdO1xuICAgICAgICB2YXIgbG9jYWwgPSBxdWFsTmFtZVsxXTtcbiAgICAgICAgLy8gPHggXCJ4bWxuc1wiPVwiaHR0cDovL2Zvb1wiPlxuICAgICAgICBpZiAoYXR0cmlidXRlICYmIG5hbWUgPT09IFwieG1sbnNcIikge1xuICAgICAgICAgICAgcHJlZml4ID0gXCJ4bWxuc1wiO1xuICAgICAgICAgICAgbG9jYWwgPSBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHByZWZpeDogcHJlZml4LCBsb2NhbDogbG9jYWwgfTtcbiAgICB9XG4gICAgZnVuY3Rpb24gYXR0cmliKHBhcnNlcikge1xuICAgICAgICBpZiAoIXBhcnNlci5zdHJpY3QpIHtcbiAgICAgICAgICAgIHBhcnNlci5hdHRyaWJOYW1lID0gcGFyc2VyLmF0dHJpYk5hbWVbcGFyc2VyLmxvb3NlQ2FzZV0oKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VyLmF0dHJpYkxpc3QuaW5kZXhPZihwYXJzZXIuYXR0cmliTmFtZSkgIT09IC0xIHx8XG4gICAgICAgICAgICBwYXJzZXIudGFnLmF0dHJpYnV0ZXMuaGFzT3duUHJvcGVydHkocGFyc2VyLmF0dHJpYk5hbWUpKSB7XG4gICAgICAgICAgICBwYXJzZXIuYXR0cmliTmFtZSA9IHBhcnNlci5hdHRyaWJWYWx1ZSA9IFwiXCI7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcnNlci5vcHQueG1sbnMpIHtcbiAgICAgICAgICAgIHZhciBxbiA9IHFuYW1lKHBhcnNlci5hdHRyaWJOYW1lLCB0cnVlKTtcbiAgICAgICAgICAgIHZhciBwcmVmaXggPSBxbi5wcmVmaXg7XG4gICAgICAgICAgICB2YXIgbG9jYWwgPSBxbi5sb2NhbDtcbiAgICAgICAgICAgIGlmIChwcmVmaXggPT09IFwieG1sbnNcIikge1xuICAgICAgICAgICAgICAgIC8vIG5hbWVzcGFjZSBiaW5kaW5nIGF0dHJpYnV0ZS4gcHVzaCB0aGUgYmluZGluZyBpbnRvIHNjb3BlXG4gICAgICAgICAgICAgICAgaWYgKGxvY2FsID09PSBcInhtbFwiICYmIHBhcnNlci5hdHRyaWJWYWx1ZSAhPT0gWE1MX05BTUVTUEFDRSkge1xuICAgICAgICAgICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJ4bWw6IHByZWZpeCBtdXN0IGJlIGJvdW5kIHRvIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFhNTF9OQU1FU1BBQ0UgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJcXG5cIiArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIkFjdHVhbDogXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmF0dHJpYlZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobG9jYWwgPT09IFwieG1sbnNcIiAmJlxuICAgICAgICAgICAgICAgICAgICBwYXJzZXIuYXR0cmliVmFsdWUgIT09IFhNTE5TX05BTUVTUEFDRSkge1xuICAgICAgICAgICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJ4bWxuczogcHJlZml4IG11c3QgYmUgYm91bmQgdG8gXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgWE1MTlNfTkFNRVNQQUNFICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiXFxuXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJBY3R1YWw6IFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5hdHRyaWJWYWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdGFnID0gcGFyc2VyLnRhZztcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudCA9IHBhcnNlci50YWdzW3BhcnNlci50YWdzLmxlbmd0aCAtIDFdIHx8IHBhcnNlcjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhZy5ucyA9PT0gcGFyZW50Lm5zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YWcubnMgPSBPYmplY3QuY3JlYXRlKHBhcmVudC5ucyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGFnLm5zW2xvY2FsXSA9IHBhcnNlci5hdHRyaWJWYWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBkZWZlciBvbmF0dHJpYnV0ZSBldmVudHMgdW50aWwgYWxsIGF0dHJpYnV0ZXMgaGF2ZSBiZWVuIHNlZW5cbiAgICAgICAgICAgIC8vIHNvIGFueSBuZXcgYmluZGluZ3MgY2FuIHRha2UgZWZmZWN0LiBwcmVzZXJ2ZSBhdHRyaWJ1dGUgb3JkZXJcbiAgICAgICAgICAgIC8vIHNvIGRlZmVycmVkIGV2ZW50cyBjYW4gYmUgZW1pdHRlZCBpbiBkb2N1bWVudCBvcmRlclxuICAgICAgICAgICAgcGFyc2VyLmF0dHJpYkxpc3QucHVzaChbcGFyc2VyLmF0dHJpYk5hbWUsIHBhcnNlci5hdHRyaWJWYWx1ZV0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gaW4gbm9uLXhtbG5zIG1vZGUsIHdlIGNhbiBlbWl0IHRoZSBldmVudCByaWdodCBhd2F5XG4gICAgICAgICAgICBwYXJzZXIudGFnLmF0dHJpYnV0ZXNbcGFyc2VyLmF0dHJpYk5hbWVdID0gcGFyc2VyLmF0dHJpYlZhbHVlO1xuICAgICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCBcIm9uYXR0cmlidXRlXCIsIHtcbiAgICAgICAgICAgICAgICBuYW1lOiBwYXJzZXIuYXR0cmliTmFtZSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogcGFyc2VyLmF0dHJpYlZhbHVlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcGFyc2VyLmF0dHJpYk5hbWUgPSBwYXJzZXIuYXR0cmliVmFsdWUgPSBcIlwiO1xuICAgIH1cbiAgICBmdW5jdGlvbiBvcGVuVGFnKHBhcnNlciwgc2VsZkNsb3NpbmcpIHtcbiAgICAgICAgaWYgKHBhcnNlci5vcHQueG1sbnMpIHtcbiAgICAgICAgICAgIC8vIGVtaXQgbmFtZXNwYWNlIGJpbmRpbmcgZXZlbnRzXG4gICAgICAgICAgICB2YXIgdGFnID0gcGFyc2VyLnRhZztcbiAgICAgICAgICAgIC8vIGFkZCBuYW1lc3BhY2UgaW5mbyB0byB0YWdcbiAgICAgICAgICAgIHZhciBxbiA9IHFuYW1lKHBhcnNlci50YWdOYW1lKTtcbiAgICAgICAgICAgIHRhZy5wcmVmaXggPSBxbi5wcmVmaXg7XG4gICAgICAgICAgICB0YWcubG9jYWwgPSBxbi5sb2NhbDtcbiAgICAgICAgICAgIHRhZy51cmkgPSB0YWcubnNbcW4ucHJlZml4XSB8fCBcIlwiO1xuICAgICAgICAgICAgaWYgKHRhZy5wcmVmaXggJiYgIXRhZy51cmkpIHtcbiAgICAgICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJVbmJvdW5kIG5hbWVzcGFjZSBwcmVmaXg6IFwiICsgSlNPTi5zdHJpbmdpZnkocGFyc2VyLnRhZ05hbWUpKTtcbiAgICAgICAgICAgICAgICB0YWcudXJpID0gcW4ucHJlZml4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHBhcmVudCA9IHBhcnNlci50YWdzW3BhcnNlci50YWdzLmxlbmd0aCAtIDFdIHx8IHBhcnNlcjtcbiAgICAgICAgICAgIGlmICh0YWcubnMgJiYgcGFyZW50Lm5zICE9PSB0YWcubnMpIHtcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyh0YWcubnMpLmZvckVhY2goZnVuY3Rpb24gKHApIHtcbiAgICAgICAgICAgICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCBcIm9ub3Blbm5hbWVzcGFjZVwiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVmaXg6IHAsXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmk6IHRhZy5uc1twXSxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBoYW5kbGUgZGVmZXJyZWQgb25hdHRyaWJ1dGUgZXZlbnRzXG4gICAgICAgICAgICAvLyBOb3RlOiBkbyBub3QgYXBwbHkgZGVmYXVsdCBucyB0byBhdHRyaWJ1dGVzOlxuICAgICAgICAgICAgLy8gICBodHRwOi8vd3d3LnczLm9yZy9UUi9SRUMteG1sLW5hbWVzLyNkZWZhdWx0aW5nXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHBhcnNlci5hdHRyaWJMaXN0Lmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBudiA9IHBhcnNlci5hdHRyaWJMaXN0W2ldO1xuICAgICAgICAgICAgICAgIHZhciBuYW1lID0gbnZbMF07XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gbnZbMV07XG4gICAgICAgICAgICAgICAgdmFyIHF1YWxOYW1lID0gcW5hbWUobmFtZSwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgdmFyIHByZWZpeCA9IHF1YWxOYW1lLnByZWZpeDtcbiAgICAgICAgICAgICAgICB2YXIgbG9jYWwgPSBxdWFsTmFtZS5sb2NhbDtcbiAgICAgICAgICAgICAgICB2YXIgdXJpID0gcHJlZml4ID09PSBcIlwiID8gXCJcIiA6IHRhZy5uc1twcmVmaXhdIHx8IFwiXCI7XG4gICAgICAgICAgICAgICAgdmFyIGEgPSB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgcHJlZml4OiBwcmVmaXgsXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsOiBsb2NhbCxcbiAgICAgICAgICAgICAgICAgICAgdXJpOiB1cmksXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAvLyBpZiB0aGVyZSdzIGFueSBhdHRyaWJ1dGVzIHdpdGggYW4gdW5kZWZpbmVkIG5hbWVzcGFjZSxcbiAgICAgICAgICAgICAgICAvLyB0aGVuIGZhaWwgb24gdGhlbSBub3cuXG4gICAgICAgICAgICAgICAgaWYgKHByZWZpeCAmJiBwcmVmaXggIT09IFwieG1sbnNcIiAmJiAhdXJpKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCBcIlVuYm91bmQgbmFtZXNwYWNlIHByZWZpeDogXCIgKyBKU09OLnN0cmluZ2lmeShwcmVmaXgpKTtcbiAgICAgICAgICAgICAgICAgICAgYS51cmkgPSBwcmVmaXg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBhcnNlci50YWcuYXR0cmlidXRlc1tuYW1lXSA9IGE7XG4gICAgICAgICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCBcIm9uYXR0cmlidXRlXCIsIGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyc2VyLmF0dHJpYkxpc3QubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuICAgICAgICBwYXJzZXIudGFnLmlzU2VsZkNsb3NpbmcgPSAhIXNlbGZDbG9zaW5nO1xuICAgICAgICAvLyBwcm9jZXNzIHRoZSB0YWdcbiAgICAgICAgcGFyc2VyLnNhd1Jvb3QgPSB0cnVlO1xuICAgICAgICBwYXJzZXIudGFncy5wdXNoKHBhcnNlci50YWcpO1xuICAgICAgICBlbWl0Tm9kZShwYXJzZXIsIFwib25vcGVudGFnXCIsIHBhcnNlci50YWcpO1xuICAgICAgICBpZiAoIXNlbGZDbG9zaW5nKSB7XG4gICAgICAgICAgICAvLyBzcGVjaWFsIGNhc2UgZm9yIDxzY3JpcHQ+IGluIG5vbi1zdHJpY3QgbW9kZS5cbiAgICAgICAgICAgIGlmICghcGFyc2VyLm5vc2NyaXB0ICYmIHBhcnNlci50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwic2NyaXB0XCIpIHtcbiAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlNDUklQVDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcnNlci50YWcgPSBudWxsO1xuICAgICAgICAgICAgcGFyc2VyLnRhZ05hbWUgPSBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIHBhcnNlci5hdHRyaWJOYW1lID0gcGFyc2VyLmF0dHJpYlZhbHVlID0gXCJcIjtcbiAgICAgICAgcGFyc2VyLmF0dHJpYkxpc3QubGVuZ3RoID0gMDtcbiAgICB9XG4gICAgZnVuY3Rpb24gY2xvc2VUYWcocGFyc2VyKSB7XG4gICAgICAgIGlmICghcGFyc2VyLnRhZ05hbWUpIHtcbiAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCBcIldlaXJkIGVtcHR5IGNsb3NlIHRhZy5cIik7XG4gICAgICAgICAgICBwYXJzZXIudGV4dE5vZGUgKz0gXCI8Lz5cIjtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyc2VyLnNjcmlwdCkge1xuICAgICAgICAgICAgaWYgKHBhcnNlci50YWdOYW1lICE9PSBcInNjcmlwdFwiKSB7XG4gICAgICAgICAgICAgICAgcGFyc2VyLnNjcmlwdCArPSBcIjwvXCIgKyBwYXJzZXIudGFnTmFtZSArIFwiPlwiO1xuICAgICAgICAgICAgICAgIHBhcnNlci50YWdOYW1lID0gXCJcIjtcbiAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlNDUklQVDtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbWl0Tm9kZShwYXJzZXIsIFwib25zY3JpcHRcIiwgcGFyc2VyLnNjcmlwdCk7XG4gICAgICAgICAgICBwYXJzZXIuc2NyaXB0ID0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgICAvLyBmaXJzdCBtYWtlIHN1cmUgdGhhdCB0aGUgY2xvc2luZyB0YWcgYWN0dWFsbHkgZXhpc3RzLlxuICAgICAgICAvLyA8YT48Yj48L2M+PC9iPjwvYT4gd2lsbCBjbG9zZSBldmVyeXRoaW5nLCBvdGhlcndpc2UuXG4gICAgICAgIHZhciB0ID0gcGFyc2VyLnRhZ3MubGVuZ3RoO1xuICAgICAgICB2YXIgdGFnTmFtZSA9IHBhcnNlci50YWdOYW1lO1xuICAgICAgICBpZiAoIXBhcnNlci5zdHJpY3QpIHtcbiAgICAgICAgICAgIHRhZ05hbWUgPSB0YWdOYW1lW3BhcnNlci5sb29zZUNhc2VdKCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGNsb3NlVG8gPSB0YWdOYW1lO1xuICAgICAgICB3aGlsZSAodC0tKSB7XG4gICAgICAgICAgICB2YXIgY2xvc2UgPSBwYXJzZXIudGFnc1t0XTtcbiAgICAgICAgICAgIGlmIChjbG9zZS5uYW1lICE9PSBjbG9zZVRvKSB7XG4gICAgICAgICAgICAgICAgLy8gZmFpbCB0aGUgZmlyc3QgdGltZSBpbiBzdHJpY3QgbW9kZVxuICAgICAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCBcIlVuZXhwZWN0ZWQgY2xvc2UgdGFnXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gZGlkbid0IGZpbmQgaXQuICB3ZSBhbHJlYWR5IGZhaWxlZCBmb3Igc3RyaWN0LCBzbyBqdXN0IGFib3J0LlxuICAgICAgICBpZiAodCA8IDApIHtcbiAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCBcIlVubWF0Y2hlZCBjbG9zaW5nIHRhZzogXCIgKyBwYXJzZXIudGFnTmFtZSk7XG4gICAgICAgICAgICBwYXJzZXIudGV4dE5vZGUgKz0gXCI8L1wiICsgcGFyc2VyLnRhZ05hbWUgKyBcIj5cIjtcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBwYXJzZXIudGFnTmFtZSA9IHRhZ05hbWU7XG4gICAgICAgIHZhciBzID0gcGFyc2VyLnRhZ3MubGVuZ3RoO1xuICAgICAgICB3aGlsZSAocy0tID4gdCkge1xuICAgICAgICAgICAgdmFyIHRhZyA9IChwYXJzZXIudGFnID0gcGFyc2VyLnRhZ3MucG9wKCkpO1xuICAgICAgICAgICAgcGFyc2VyLnRhZ05hbWUgPSBwYXJzZXIudGFnLm5hbWU7XG4gICAgICAgICAgICBlbWl0Tm9kZShwYXJzZXIsIFwib25jbG9zZXRhZ1wiLCBwYXJzZXIudGFnTmFtZSk7XG4gICAgICAgICAgICB2YXIgeCA9IHt9O1xuICAgICAgICAgICAgZm9yICh2YXIgaSBpbiB0YWcubnMpIHtcbiAgICAgICAgICAgICAgICB4W2ldID0gdGFnLm5zW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHBhcmVudCA9IHBhcnNlci50YWdzW3BhcnNlci50YWdzLmxlbmd0aCAtIDFdIHx8IHBhcnNlcjtcbiAgICAgICAgICAgIGlmIChwYXJzZXIub3B0LnhtbG5zICYmIHRhZy5ucyAhPT0gcGFyZW50Lm5zKSB7XG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIG5hbWVzcGFjZSBiaW5kaW5ncyBpbnRyb2R1Y2VkIGJ5IHRhZ1xuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHRhZy5ucykuZm9yRWFjaChmdW5jdGlvbiAocCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHRhZy5uc1twXTtcbiAgICAgICAgICAgICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCBcIm9uY2xvc2VuYW1lc3BhY2VcIiwgeyBwcmVmaXg6IHAsIHVyaTogbiB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodCA9PT0gMClcbiAgICAgICAgICAgIHBhcnNlci5jbG9zZWRSb290ID0gdHJ1ZTtcbiAgICAgICAgcGFyc2VyLnRhZ05hbWUgPSBwYXJzZXIuYXR0cmliVmFsdWUgPSBwYXJzZXIuYXR0cmliTmFtZSA9IFwiXCI7XG4gICAgICAgIHBhcnNlci5hdHRyaWJMaXN0Lmxlbmd0aCA9IDA7XG4gICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVDtcbiAgICB9XG4gICAgZnVuY3Rpb24gcGFyc2VFbnRpdHkocGFyc2VyKSB7XG4gICAgICAgIHZhciBlbnRpdHkgPSBwYXJzZXIuZW50aXR5O1xuICAgICAgICB2YXIgZW50aXR5TEMgPSBlbnRpdHkudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgdmFyIG51bTtcbiAgICAgICAgdmFyIG51bVN0ciA9IFwiXCI7XG4gICAgICAgIGlmIChwYXJzZXIuRU5USVRJRVNbZW50aXR5XSkge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlci5FTlRJVElFU1tlbnRpdHldO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZXIuRU5USVRJRVNbZW50aXR5TENdKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VyLkVOVElUSUVTW2VudGl0eUxDXTtcbiAgICAgICAgfVxuICAgICAgICBlbnRpdHkgPSBlbnRpdHlMQztcbiAgICAgICAgaWYgKGVudGl0eS5jaGFyQXQoMCkgPT09IFwiI1wiKSB7XG4gICAgICAgICAgICBpZiAoZW50aXR5LmNoYXJBdCgxKSA9PT0gXCJ4XCIpIHtcbiAgICAgICAgICAgICAgICBlbnRpdHkgPSBlbnRpdHkuc2xpY2UoMik7XG4gICAgICAgICAgICAgICAgbnVtID0gcGFyc2VJbnQoZW50aXR5LCAxNik7XG4gICAgICAgICAgICAgICAgbnVtU3RyID0gbnVtLnRvU3RyaW5nKDE2KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGVudGl0eSA9IGVudGl0eS5zbGljZSgxKTtcbiAgICAgICAgICAgICAgICBudW0gPSBwYXJzZUludChlbnRpdHksIDEwKTtcbiAgICAgICAgICAgICAgICBudW1TdHIgPSBudW0udG9TdHJpbmcoMTApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVudGl0eSA9IGVudGl0eS5yZXBsYWNlKC9eMCsvLCBcIlwiKTtcbiAgICAgICAgaWYgKGlzTmFOKG51bSkgfHwgbnVtU3RyLnRvTG93ZXJDYXNlKCkgIT09IGVudGl0eSkge1xuICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsIFwiSW52YWxpZCBjaGFyYWN0ZXIgZW50aXR5XCIpO1xuICAgICAgICAgICAgcmV0dXJuIFwiJlwiICsgcGFyc2VyLmVudGl0eSArIFwiO1wiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNvZGVQb2ludChudW0pO1xuICAgIH1cbiAgICBmdW5jdGlvbiBiZWdpbldoaXRlU3BhY2UocGFyc2VyLCBjKSB7XG4gICAgICAgIGlmIChjID09PSBcIjxcIikge1xuICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5PUEVOX1dBS0E7XG4gICAgICAgICAgICBwYXJzZXIuc3RhcnRUYWdQb3NpdGlvbiA9IHBhcnNlci5wb3NpdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICghaXNXaGl0ZXNwYWNlKGMpKSB7XG4gICAgICAgICAgICAvLyBoYXZlIHRvIHByb2Nlc3MgdGhpcyBhcyBhIHRleHQgbm9kZS5cbiAgICAgICAgICAgIC8vIHdlaXJkLCBidXQgaGFwcGVucy5cbiAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCBcIk5vbi13aGl0ZXNwYWNlIGJlZm9yZSBmaXJzdCB0YWcuXCIpO1xuICAgICAgICAgICAgcGFyc2VyLnRleHROb2RlID0gYztcbiAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBjaGFyQXQoY2h1bmssIGkpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IFwiXCI7XG4gICAgICAgIGlmIChpIDwgY2h1bmsubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBjaHVuay5jaGFyQXQoaSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgZnVuY3Rpb24gd3JpdGUoY2h1bmspIHtcbiAgICAgICAgdmFyIHBhcnNlciA9IHRoaXM7XG4gICAgICAgIGlmICh0aGlzLmVycm9yKSB7XG4gICAgICAgICAgICB0aHJvdyB0aGlzLmVycm9yO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJzZXIuY2xvc2VkKSB7XG4gICAgICAgICAgICByZXR1cm4gZXJyb3IocGFyc2VyLCBcIkNhbm5vdCB3cml0ZSBhZnRlciBjbG9zZS4gQXNzaWduIGFuIG9ucmVhZHkgaGFuZGxlci5cIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNodW5rID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gZW5kKHBhcnNlcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBjaHVuayA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgY2h1bmsgPSBjaHVuay50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgdmFyIGMgPSBcIlwiO1xuICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgYyA9IGNoYXJBdChjaHVuaywgaSsrKTtcbiAgICAgICAgICAgIHBhcnNlci5jID0gYztcbiAgICAgICAgICAgIGlmICghYykge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBhcnNlci50cmFja1Bvc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgcGFyc2VyLnBvc2l0aW9uKys7XG4gICAgICAgICAgICAgICAgaWYgKGMgPT09IFwiXFxuXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmxpbmUrKztcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmNvbHVtbiA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwYXJzZXIuY29sdW1uKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3dpdGNoIChwYXJzZXIuc3RhdGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFMuQkVHSU46XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQkVHSU5fV0hJVEVTUEFDRTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09IFwiXFx1RkVGRlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBiZWdpbldoaXRlU3BhY2UocGFyc2VyLCBjKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSBTLkJFR0lOX1dISVRFU1BBQ0U6XG4gICAgICAgICAgICAgICAgICAgIGJlZ2luV2hpdGVTcGFjZShwYXJzZXIsIGMpO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIFMuVEVYVDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlci5zYXdSb290ICYmICFwYXJzZXIuY2xvc2VkUm9vdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0YXJ0aSA9IGkgLSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGMgJiYgYyAhPT0gXCI8XCIgJiYgYyAhPT0gXCImXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gY2hhckF0KGNodW5rLCBpKyspO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjICYmIHBhcnNlci50cmFja1Bvc2l0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5wb3NpdGlvbisrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gXCJcXG5cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmxpbmUrKztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5jb2x1bW4gPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmNvbHVtbisrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnRleHROb2RlICs9IGNodW5rLnN1YnN0cmluZyhzdGFydGksIGkgLSAxKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gXCI8XCIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICEocGFyc2VyLnNhd1Jvb3QgJiYgcGFyc2VyLmNsb3NlZFJvb3QgJiYgIXBhcnNlci5zdHJpY3QpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLk9QRU5fV0FLQTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGFydFRhZ1Bvc2l0aW9uID0gcGFyc2VyLnBvc2l0aW9uO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1doaXRlc3BhY2UoYykgJiYgKCFwYXJzZXIuc2F3Um9vdCB8fCBwYXJzZXIuY2xvc2VkUm9vdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJUZXh0IGRhdGEgb3V0c2lkZSBvZiByb290IG5vZGUuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09IFwiJlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5URVhUX0VOVElUWTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci50ZXh0Tm9kZSArPSBjO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgUy5TQ1JJUFQ6XG4gICAgICAgICAgICAgICAgICAgIC8vIG9ubHkgbm9uLXN0cmljdFxuICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gXCI8XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuU0NSSVBUX0VORElORztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zY3JpcHQgKz0gYztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIFMuU0NSSVBUX0VORElORzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09IFwiL1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkNMT1NFX1RBRztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zY3JpcHQgKz0gXCI8XCIgKyBjO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5TQ1JJUFQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSBTLk9QRU5fV0FLQTpcbiAgICAgICAgICAgICAgICAgICAgLy8gZWl0aGVyIGEgLywgPywgISwgb3IgdGV4dCBpcyBjb21pbmcgbmV4dC5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09IFwiIVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlNHTUxfREVDTDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zZ21sRGVjbCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNXaGl0ZXNwYWNlKGMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3YWl0IGZvciBpdC4uLlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzTWF0Y2gobmFtZVN0YXJ0LCBjKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5PUEVOX1RBRztcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci50YWdOYW1lID0gYztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjID09PSBcIi9cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5DTE9TRV9UQUc7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIudGFnTmFtZSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYyA9PT0gXCI/XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuUFJPQ19JTlNUO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnByb2NJbnN0TmFtZSA9IHBhcnNlci5wcm9jSW5zdEJvZHkgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsIFwiVW5lbmNvZGVkIDxcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiB0aGVyZSB3YXMgc29tZSB3aGl0ZXNwYWNlLCB0aGVuIGFkZCB0aGF0IGluLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlci5zdGFydFRhZ1Bvc2l0aW9uICsgMSA8IHBhcnNlci5wb3NpdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYWQgPSBwYXJzZXIucG9zaXRpb24gLSBwYXJzZXIuc3RhcnRUYWdQb3NpdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gbmV3IEFycmF5KHBhZCkuam9pbihcIiBcIikgKyBjO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnRleHROb2RlICs9IFwiPFwiICsgYztcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIFMuU0dNTF9ERUNMOlxuICAgICAgICAgICAgICAgICAgICBpZiAoKHBhcnNlci5zZ21sRGVjbCArIGMpLnRvVXBwZXJDYXNlKCkgPT09IENEQVRBKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbWl0Tm9kZShwYXJzZXIsIFwib25vcGVuY2RhdGFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkNEQVRBO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnNnbWxEZWNsID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5jZGF0YSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocGFyc2VyLnNnbWxEZWNsICsgYyA9PT0gXCItLVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkNPTU1FTlQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuY29tbWVudCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc2dtbERlY2wgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKChwYXJzZXIuc2dtbERlY2wgKyBjKS50b1VwcGVyQ2FzZSgpID09PSBET0NUWVBFKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkRPQ1RZUEU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VyLmRvY3R5cGUgfHwgcGFyc2VyLnNhd1Jvb3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJJbmFwcHJvcHJpYXRlbHkgbG9jYXRlZCBkb2N0eXBlIGRlY2xhcmF0aW9uXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmRvY3R5cGUgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnNnbWxEZWNsID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjID09PSBcIj5cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCBcIm9uc2dtbGRlY2xhcmF0aW9uXCIsIHBhcnNlci5zZ21sRGVjbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc2dtbERlY2wgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5URVhUO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzUXVvdGUoYykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuU0dNTF9ERUNMX1FVT1RFRDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zZ21sRGVjbCArPSBjO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnNnbWxEZWNsICs9IGM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSBTLlNHTUxfREVDTF9RVU9URUQ6XG4gICAgICAgICAgICAgICAgICAgIGlmIChjID09PSBwYXJzZXIucSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5TR01MX0RFQ0w7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIucSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnNnbWxEZWNsICs9IGM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgUy5ET0NUWVBFOlxuICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gXCI+XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuVEVYVDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtaXROb2RlKHBhcnNlciwgXCJvbmRvY3R5cGVcIiwgcGFyc2VyLmRvY3R5cGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmRvY3R5cGUgPSB0cnVlOyAvLyBqdXN0IHJlbWVtYmVyIHRoYXQgd2Ugc2F3IGl0LlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmRvY3R5cGUgKz0gYztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjID09PSBcIltcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuRE9DVFlQRV9EVEQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpc1F1b3RlKGMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5ET0NUWVBFX1FVT1RFRDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIucSA9IGM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSBTLkRPQ1RZUEVfUVVPVEVEOlxuICAgICAgICAgICAgICAgICAgICBwYXJzZXIuZG9jdHlwZSArPSBjO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gcGFyc2VyLnEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5xID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuRE9DVFlQRTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIFMuRE9DVFlQRV9EVEQ6XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlci5kb2N0eXBlICs9IGM7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjID09PSBcIl1cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5ET0NUWVBFO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzUXVvdGUoYykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuRE9DVFlQRV9EVERfUVVPVEVEO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnEgPSBjO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgUy5ET0NUWVBFX0RURF9RVU9URUQ6XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlci5kb2N0eXBlICs9IGM7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjID09PSBwYXJzZXIucSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5ET0NUWVBFX0RURDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5xID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIFMuQ09NTUVOVDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09IFwiLVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkNPTU1FTlRfRU5ESU5HO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmNvbW1lbnQgKz0gYztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIFMuQ09NTUVOVF9FTkRJTkc6XG4gICAgICAgICAgICAgICAgICAgIGlmIChjID09PSBcIi1cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5DT01NRU5UX0VOREVEO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmNvbW1lbnQgPSB0ZXh0b3B0cyhwYXJzZXIub3B0LCBwYXJzZXIuY29tbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VyLmNvbW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbWl0Tm9kZShwYXJzZXIsIFwib25jb21tZW50XCIsIHBhcnNlci5jb21tZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5jb21tZW50ID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5jb21tZW50ICs9IFwiLVwiICsgYztcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQ09NTUVOVDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIFMuQ09NTUVOVF9FTkRFRDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMgIT09IFwiPlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJNYWxmb3JtZWQgY29tbWVudFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFsbG93IDwhLS0gYmxhaCAtLSBibG9vIC0tPiBpbiBub24tc3RyaWN0IG1vZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB3aGljaCBpcyBhIGNvbW1lbnQgb2YgXCIgYmxhaCAtLSBibG9vIFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuY29tbWVudCArPSBcIi0tXCIgKyBjO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5DT01NRU5UO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5URVhUO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgUy5DREFUQTpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09IFwiXVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkNEQVRBX0VORElORztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5jZGF0YSArPSBjO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgUy5DREFUQV9FTkRJTkc6XG4gICAgICAgICAgICAgICAgICAgIGlmIChjID09PSBcIl1cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5DREFUQV9FTkRJTkdfMjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5jZGF0YSArPSBcIl1cIiArIGM7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkNEQVRBO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgUy5DREFUQV9FTkRJTkdfMjpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09IFwiPlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VyLmNkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1pdE5vZGUocGFyc2VyLCBcIm9uY2RhdGFcIiwgcGFyc2VyLmNkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVtaXROb2RlKHBhcnNlciwgXCJvbmNsb3NlY2RhdGFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuY2RhdGEgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5URVhUO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGMgPT09IFwiXVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuY2RhdGEgKz0gXCJdXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuY2RhdGEgKz0gXCJdXVwiICsgYztcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQ0RBVEE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSBTLlBST0NfSU5TVDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09IFwiP1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlBST0NfSU5TVF9FTkRJTkc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNXaGl0ZXNwYWNlKGMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlBST0NfSU5TVF9CT0RZO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnByb2NJbnN0TmFtZSArPSBjO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgUy5QUk9DX0lOU1RfQk9EWTpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJzZXIucHJvY0luc3RCb2R5ICYmIGlzV2hpdGVzcGFjZShjKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYyA9PT0gXCI/XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuUFJPQ19JTlNUX0VORElORztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5wcm9jSW5zdEJvZHkgKz0gYztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIFMuUFJPQ19JTlNUX0VORElORzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09IFwiPlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbWl0Tm9kZShwYXJzZXIsIFwib25wcm9jZXNzaW5naW5zdHJ1Y3Rpb25cIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHBhcnNlci5wcm9jSW5zdE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogcGFyc2VyLnByb2NJbnN0Qm9keSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnByb2NJbnN0TmFtZSA9IHBhcnNlci5wcm9jSW5zdEJvZHkgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5URVhUO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnByb2NJbnN0Qm9keSArPSBcIj9cIiArIGM7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLlBST0NfSU5TVF9CT0RZO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgUy5PUEVOX1RBRzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzTWF0Y2gobmFtZUJvZHksIGMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIudGFnTmFtZSArPSBjO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3VGFnKHBhcnNlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gXCI+XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVuVGFnKHBhcnNlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjID09PSBcIi9cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuT1BFTl9UQUdfU0xBU0g7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWlzV2hpdGVzcGFjZShjKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJJbnZhbGlkIGNoYXJhY3RlciBpbiB0YWcgbmFtZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSBTLk9QRU5fVEFHX1NMQVNIOlxuICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gXCI+XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5UYWcocGFyc2VyLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlVGFnKHBhcnNlcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJGb3J3YXJkLXNsYXNoIGluIG9wZW5pbmcgdGFnIG5vdCBmb2xsb3dlZCBieSA+XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSBTLkFUVFJJQjpcbiAgICAgICAgICAgICAgICAgICAgLy8gaGF2ZW4ndCByZWFkIHRoZSBhdHRyaWJ1dGUgbmFtZSB5ZXQuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1doaXRlc3BhY2UoYykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGMgPT09IFwiPlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcGVuVGFnKHBhcnNlcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYyA9PT0gXCIvXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuT1BFTl9UQUdfU0xBU0g7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNNYXRjaChuYW1lU3RhcnQsIGMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuYXR0cmliTmFtZSA9IGM7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuYXR0cmliVmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfTkFNRTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCBcIkludmFsaWQgYXR0cmlidXRlIG5hbWVcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSBTLkFUVFJJQl9OQU1FOlxuICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gXCI9XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCX1ZBTFVFO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGMgPT09IFwiPlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJBdHRyaWJ1dGUgd2l0aG91dCB2YWx1ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5hdHRyaWJWYWx1ZSA9IHBhcnNlci5hdHRyaWJOYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmliKHBhcnNlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcGVuVGFnKHBhcnNlcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNXaGl0ZXNwYWNlKGMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQl9OQU1FX1NBV19XSElURTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpc01hdGNoKG5hbWVCb2R5LCBjKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmF0dHJpYk5hbWUgKz0gYztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCBcIkludmFsaWQgYXR0cmlidXRlIG5hbWVcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSBTLkFUVFJJQl9OQU1FX1NBV19XSElURTpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09IFwiPVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQl9WQUxVRTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpc1doaXRlc3BhY2UoYykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsIFwiQXR0cmlidXRlIHdpdGhvdXQgdmFsdWVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIudGFnLmF0dHJpYnV0ZXNbcGFyc2VyLmF0dHJpYk5hbWVdID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5hdHRyaWJWYWx1ZSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbWl0Tm9kZShwYXJzZXIsIFwib25hdHRyaWJ1dGVcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHBhcnNlci5hdHRyaWJOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuYXR0cmliTmFtZSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gXCI+XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVuVGFnKHBhcnNlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpc01hdGNoKG5hbWVTdGFydCwgYykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuYXR0cmliTmFtZSA9IGM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfTkFNRTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCBcIkludmFsaWQgYXR0cmlidXRlIG5hbWVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSBTLkFUVFJJQl9WQUxVRTpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzV2hpdGVzcGFjZShjKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNRdW90ZShjKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnEgPSBjO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfVkFMVUVfUVVPVEVEO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsIFwiVW5xdW90ZWQgYXR0cmlidXRlIHZhbHVlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfVkFMVUVfVU5RVU9URUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuYXR0cmliVmFsdWUgPSBjO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgUy5BVFRSSUJfVkFMVUVfUVVPVEVEOlxuICAgICAgICAgICAgICAgICAgICBpZiAoYyAhPT0gcGFyc2VyLnEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjID09PSBcIiZcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCX1ZBTFVFX0VOVElUWV9RO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmF0dHJpYlZhbHVlICs9IGM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBhdHRyaWIocGFyc2VyKTtcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnEgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQl9WQUxVRV9DTE9TRUQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgUy5BVFRSSUJfVkFMVUVfQ0xPU0VEOlxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNXaGl0ZXNwYWNlKGMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkFUVFJJQjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjID09PSBcIj5cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3BlblRhZyhwYXJzZXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGMgPT09IFwiL1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLk9QRU5fVEFHX1NMQVNIO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGlzTWF0Y2gobmFtZVN0YXJ0LCBjKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsIFwiTm8gd2hpdGVzcGFjZSBiZXR3ZWVuIGF0dHJpYnV0ZXNcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuYXR0cmliTmFtZSA9IGM7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuYXR0cmliVmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfTkFNRTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCBcIkludmFsaWQgYXR0cmlidXRlIG5hbWVcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSBTLkFUVFJJQl9WQUxVRV9VTlFVT1RFRDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0F0dHJpYkVuZChjKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGMgPT09IFwiJlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnN0YXRlID0gUy5BVFRSSUJfVkFMVUVfRU5USVRZX1U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuYXR0cmliVmFsdWUgKz0gYztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYihwYXJzZXIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gXCI+XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5UYWcocGFyc2VyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuQVRUUklCO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgUy5DTE9TRV9UQUc6XG4gICAgICAgICAgICAgICAgICAgIGlmICghcGFyc2VyLnRhZ05hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1doaXRlc3BhY2UoYykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG5vdE1hdGNoKG5hbWVTdGFydCwgYykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VyLnNjcmlwdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc2NyaXB0ICs9IFwiPC9cIiArIGM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuU0NSSVBUO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsIFwiSW52YWxpZCB0YWduYW1lIGluIGNsb3NpbmcgdGFnLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIudGFnTmFtZSA9IGM7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYyA9PT0gXCI+XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlVGFnKHBhcnNlcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaXNNYXRjaChuYW1lQm9keSwgYykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci50YWdOYW1lICs9IGM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAocGFyc2VyLnNjcmlwdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLnNjcmlwdCArPSBcIjwvXCIgKyBwYXJzZXIudGFnTmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci50YWdOYW1lID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IFMuU0NSSVBUO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1doaXRlc3BhY2UoYykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJpY3RGYWlsKHBhcnNlciwgXCJJbnZhbGlkIHRhZ25hbWUgaW4gY2xvc2luZyB0YWdcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSBTLkNMT1NFX1RBR19TQVdfV0hJVEU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSBTLkNMT1NFX1RBR19TQVdfV0hJVEU6XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1doaXRlc3BhY2UoYykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChjID09PSBcIj5cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VUYWcocGFyc2VyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmljdEZhaWwocGFyc2VyLCBcIkludmFsaWQgY2hhcmFjdGVycyBpbiBjbG9zaW5nIHRhZ1wiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIFMuVEVYVF9FTlRJVFk6XG4gICAgICAgICAgICAgICAgY2FzZSBTLkFUVFJJQl9WQUxVRV9FTlRJVFlfUTpcbiAgICAgICAgICAgICAgICBjYXNlIFMuQVRUUklCX1ZBTFVFX0VOVElUWV9VOlxuICAgICAgICAgICAgICAgICAgICB2YXIgcmV0dXJuU3RhdGU7XG4gICAgICAgICAgICAgICAgICAgIHZhciBidWZmZXI7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocGFyc2VyLnN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFMuVEVYVF9FTlRJVFk6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuU3RhdGUgPSBTLlRFWFQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyID0gXCJ0ZXh0Tm9kZVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBTLkFUVFJJQl9WQUxVRV9FTlRJVFlfUTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5TdGF0ZSA9IFMuQVRUUklCX1ZBTFVFX1FVT1RFRDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWZmZXIgPSBcImF0dHJpYlZhbHVlXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFMuQVRUUklCX1ZBTFVFX0VOVElUWV9VOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblN0YXRlID0gUy5BVFRSSUJfVkFMVUVfVU5RVU9URUQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyID0gXCJhdHRyaWJWYWx1ZVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChjID09PSBcIjtcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlci5vcHQudW5wYXJzZWRFbnRpdGllcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXJzZWRFbnRpdHkgPSBwYXJzZUVudGl0eShwYXJzZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5lbnRpdHkgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci5zdGF0ZSA9IHJldHVyblN0YXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlci53cml0ZShwYXJzZWRFbnRpdHkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyW2J1ZmZlcl0gKz0gcGFyc2VFbnRpdHkocGFyc2VyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuZW50aXR5ID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSByZXR1cm5TdGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChpc01hdGNoKHBhcnNlci5lbnRpdHkubGVuZ3RoID8gZW50aXR5Qm9keSA6IGVudGl0eVN0YXJ0LCBjKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmVudGl0eSArPSBjO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyaWN0RmFpbChwYXJzZXIsIFwiSW52YWxpZCBjaGFyYWN0ZXIgaW4gZW50aXR5IG5hbWVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXJbYnVmZmVyXSArPSBcIiZcIiArIHBhcnNlci5lbnRpdHkgKyBjO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VyLmVudGl0eSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZXIuc3RhdGUgPSByZXR1cm5TdGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihwYXJzZXIsIFwiVW5rbm93biBzdGF0ZTogXCIgKyBwYXJzZXIuc3RhdGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSAvLyB3aGlsZVxuICAgICAgICBpZiAocGFyc2VyLnBvc2l0aW9uID49IHBhcnNlci5idWZmZXJDaGVja1Bvc2l0aW9uKSB7XG4gICAgICAgICAgICBjaGVja0J1ZmZlckxlbmd0aChwYXJzZXIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJzZXI7XG4gICAgfVxuICAgIC8qISBodHRwOi8vbXRocy5iZS9mcm9tY29kZXBvaW50IHYwLjEuMCBieSBAbWF0aGlhcyAqL1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgaWYgKCFTdHJpbmcuZnJvbUNvZGVQb2ludCkge1xuICAgICAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHN0cmluZ0Zyb21DaGFyQ29kZSA9IFN0cmluZy5mcm9tQ2hhckNvZGU7XG4gICAgICAgICAgICB2YXIgZmxvb3IgPSBNYXRoLmZsb29yO1xuICAgICAgICAgICAgdmFyIGZyb21Db2RlUG9pbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIE1BWF9TSVpFID0gMHg0MDAwO1xuICAgICAgICAgICAgICAgIHZhciBjb2RlVW5pdHMgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgaGlnaFN1cnJvZ2F0ZTtcbiAgICAgICAgICAgICAgICB2YXIgbG93U3Vycm9nYXRlO1xuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IC0xO1xuICAgICAgICAgICAgICAgIHZhciBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGlmICghbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gXCJcIjtcbiAgICAgICAgICAgICAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29kZVBvaW50ID0gTnVtYmVyKGFyZ3VtZW50c1tpbmRleF0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzRmluaXRlKGNvZGVQb2ludCkgfHwgLy8gYE5hTmAsIGArSW5maW5pdHlgLCBvciBgLUluZmluaXR5YFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZVBvaW50IDwgMCB8fCAvLyBub3QgYSB2YWxpZCBVbmljb2RlIGNvZGUgcG9pbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVQb2ludCA+IDB4MTBmZmZmIHx8IC8vIG5vdCBhIHZhbGlkIFVuaWNvZGUgY29kZSBwb2ludFxuICAgICAgICAgICAgICAgICAgICAgICAgZmxvb3IoY29kZVBvaW50KSAhPT0gY29kZVBvaW50IC8vIG5vdCBhbiBpbnRlZ2VyXG4gICAgICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgUmFuZ2VFcnJvcihcIkludmFsaWQgY29kZSBwb2ludDogXCIgKyBjb2RlUG9pbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2RlUG9pbnQgPD0gMHhmZmZmKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBCTVAgY29kZSBwb2ludFxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZVVuaXRzLnB1c2goY29kZVBvaW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFzdHJhbCBjb2RlIHBvaW50OyBzcGxpdCBpbiBzdXJyb2dhdGUgaGFsdmVzXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBodHRwOi8vbWF0aGlhc2J5bmVucy5iZS9ub3Rlcy9qYXZhc2NyaXB0LWVuY29kaW5nI3N1cnJvZ2F0ZS1mb3JtdWxhZVxuICAgICAgICAgICAgICAgICAgICAgICAgY29kZVBvaW50IC09IDB4MTAwMDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBoaWdoU3Vycm9nYXRlID0gKGNvZGVQb2ludCA+PiAxMCkgKyAweGQ4MDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBsb3dTdXJyb2dhdGUgPSAoY29kZVBvaW50ICUgMHg0MDApICsgMHhkYzAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZVVuaXRzLnB1c2goaGlnaFN1cnJvZ2F0ZSwgbG93U3Vycm9nYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggKyAxID09PSBsZW5ndGggfHwgY29kZVVuaXRzLmxlbmd0aCA+IE1BWF9TSVpFKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gc3RyaW5nRnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIGNvZGVVbml0cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlVW5pdHMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICAgICAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZywgXCJmcm9tQ29kZVBvaW50XCIsIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZyb21Db2RlUG9pbnQsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBTdHJpbmcuZnJvbUNvZGVQb2ludCA9IGZyb21Db2RlUG9pbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKCk7XG4gICAgfVxuICAgIHJldHVybiBzYXg7XG59O1xuY29uc3Qgc2F4ID0gLyoqICNfX1BVUkVfXyAqLyBpbml0aWFsaXplU2F4KCk7XG5leHBvcnQgeyBzYXggfTtcbiJdLCJuYW1lcyI6WyJpbml0aWFsaXplU2F4Iiwic2F4IiwicGFyc2VyIiwic3RyaWN0Iiwib3B0IiwiU0FYUGFyc2VyIiwiU0FYU3RyZWFtIiwiY3JlYXRlU3RyZWFtIiwiTUFYX0JVRkZFUl9MRU5HVEgiLCJidWZmZXJzIiwiRVZFTlRTIiwiY2xlYXJCdWZmZXJzIiwicSIsImMiLCJidWZmZXJDaGVja1Bvc2l0aW9uIiwibG93ZXJjYXNlIiwibG93ZXJjYXNldGFncyIsImxvb3NlQ2FzZSIsInRhZ3MiLCJjbG9zZWQiLCJjbG9zZWRSb290Iiwic2F3Um9vdCIsInRhZyIsImVycm9yIiwibm9zY3JpcHQiLCJzdGF0ZSIsIlMiLCJCRUdJTiIsInN0cmljdEVudGl0aWVzIiwiRU5USVRJRVMiLCJPYmplY3QiLCJjcmVhdGUiLCJYTUxfRU5USVRJRVMiLCJhdHRyaWJMaXN0IiwieG1sbnMiLCJucyIsInJvb3ROUyIsInRyYWNrUG9zaXRpb24iLCJwb3NpdGlvbiIsImxpbmUiLCJjb2x1bW4iLCJlbWl0IiwibyIsIkYiLCJwcm90b3R5cGUiLCJuZXdmIiwia2V5cyIsImEiLCJpIiwiaGFzT3duUHJvcGVydHkiLCJwdXNoIiwiY2hlY2tCdWZmZXJMZW5ndGgiLCJtYXhBbGxvd2VkIiwiTWF0aCIsIm1heCIsIm1heEFjdHVhbCIsImwiLCJsZW5ndGgiLCJsZW4iLCJjbG9zZVRleHQiLCJlbWl0Tm9kZSIsImNkYXRhIiwic2NyaXB0IiwibSIsImZsdXNoQnVmZmVycyIsImVuZCIsIndyaXRlIiwicmVzdW1lIiwiY2xvc2UiLCJmbHVzaCIsIlN0cmVhbSIsIlJlYWRhYmxlU3RyZWFtIiwic3RyZWFtV3JhcHMiLCJmaWx0ZXIiLCJldiIsImFwcGx5IiwiX3BhcnNlciIsIndyaXRhYmxlIiwicmVhZGFibGUiLCJtZSIsIm9uZW5kIiwib25lcnJvciIsImVyIiwiX2RlY29kZXIiLCJmb3JFYWNoIiwiZGVmaW5lUHJvcGVydHkiLCJnZXQiLCJzZXQiLCJoIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwib24iLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwiY29uc3RydWN0b3IiLCJ2YWx1ZSIsImRhdGEiLCJ0b1N0cmluZyIsImNodW5rIiwiaGFuZGxlciIsImluZGV4T2YiLCJhcmdzIiwiYXJndW1lbnRzIiwiQXJyYXkiLCJzcGxpY2UiLCJjYWxsIiwiQ0RBVEEiLCJET0NUWVBFIiwiWE1MX05BTUVTUEFDRSIsIlhNTE5TX05BTUVTUEFDRSIsInhtbCIsIm5hbWVTdGFydCIsIm5hbWVCb2R5IiwiZW50aXR5U3RhcnQiLCJlbnRpdHlCb2R5IiwiaXNXaGl0ZXNwYWNlIiwiaXNRdW90ZSIsImlzQXR0cmliRW5kIiwiaXNNYXRjaCIsInJlZ2V4IiwidGVzdCIsIm5vdE1hdGNoIiwiU1RBVEUiLCJCRUdJTl9XSElURVNQQUNFIiwiVEVYVCIsIlRFWFRfRU5USVRZIiwiT1BFTl9XQUtBIiwiU0dNTF9ERUNMIiwiU0dNTF9ERUNMX1FVT1RFRCIsIkRPQ1RZUEVfUVVPVEVEIiwiRE9DVFlQRV9EVEQiLCJET0NUWVBFX0RURF9RVU9URUQiLCJDT01NRU5UX1NUQVJUSU5HIiwiQ09NTUVOVCIsIkNPTU1FTlRfRU5ESU5HIiwiQ09NTUVOVF9FTkRFRCIsIkNEQVRBX0VORElORyIsIkNEQVRBX0VORElOR18yIiwiUFJPQ19JTlNUIiwiUFJPQ19JTlNUX0JPRFkiLCJQUk9DX0lOU1RfRU5ESU5HIiwiT1BFTl9UQUciLCJPUEVOX1RBR19TTEFTSCIsIkFUVFJJQiIsIkFUVFJJQl9OQU1FIiwiQVRUUklCX05BTUVfU0FXX1dISVRFIiwiQVRUUklCX1ZBTFVFIiwiQVRUUklCX1ZBTFVFX1FVT1RFRCIsIkFUVFJJQl9WQUxVRV9DTE9TRUQiLCJBVFRSSUJfVkFMVUVfVU5RVU9URUQiLCJBVFRSSUJfVkFMVUVfRU5USVRZX1EiLCJBVFRSSUJfVkFMVUVfRU5USVRZX1UiLCJDTE9TRV9UQUciLCJDTE9TRV9UQUdfU0FXX1dISVRFIiwiU0NSSVBUIiwiU0NSSVBUX0VORElORyIsImFtcCIsImd0IiwibHQiLCJxdW90IiwiYXBvcyIsIkFFbGlnIiwiQWFjdXRlIiwiQWNpcmMiLCJBZ3JhdmUiLCJBcmluZyIsIkF0aWxkZSIsIkF1bWwiLCJDY2VkaWwiLCJFVEgiLCJFYWN1dGUiLCJFY2lyYyIsIkVncmF2ZSIsIkV1bWwiLCJJYWN1dGUiLCJJY2lyYyIsIklncmF2ZSIsIkl1bWwiLCJOdGlsZGUiLCJPYWN1dGUiLCJPY2lyYyIsIk9ncmF2ZSIsIk9zbGFzaCIsIk90aWxkZSIsIk91bWwiLCJUSE9STiIsIlVhY3V0ZSIsIlVjaXJjIiwiVWdyYXZlIiwiVXVtbCIsIllhY3V0ZSIsImFhY3V0ZSIsImFjaXJjIiwiYWVsaWciLCJhZ3JhdmUiLCJhcmluZyIsImF0aWxkZSIsImF1bWwiLCJjY2VkaWwiLCJlYWN1dGUiLCJlY2lyYyIsImVncmF2ZSIsImV0aCIsImV1bWwiLCJpYWN1dGUiLCJpY2lyYyIsImlncmF2ZSIsIml1bWwiLCJudGlsZGUiLCJvYWN1dGUiLCJvY2lyYyIsIm9ncmF2ZSIsIm9zbGFzaCIsIm90aWxkZSIsIm91bWwiLCJzemxpZyIsInRob3JuIiwidWFjdXRlIiwidWNpcmMiLCJ1Z3JhdmUiLCJ1dW1sIiwieWFjdXRlIiwieXVtbCIsImNvcHkiLCJyZWciLCJuYnNwIiwiaWV4Y2wiLCJjZW50IiwicG91bmQiLCJjdXJyZW4iLCJ5ZW4iLCJicnZiYXIiLCJzZWN0IiwidW1sIiwib3JkZiIsImxhcXVvIiwibm90Iiwic2h5IiwibWFjciIsImRlZyIsInBsdXNtbiIsInN1cDEiLCJzdXAyIiwic3VwMyIsImFjdXRlIiwibWljcm8iLCJwYXJhIiwibWlkZG90IiwiY2VkaWwiLCJvcmRtIiwicmFxdW8iLCJmcmFjMTQiLCJmcmFjMTIiLCJmcmFjMzQiLCJpcXVlc3QiLCJ0aW1lcyIsImRpdmlkZSIsIk9FbGlnIiwib2VsaWciLCJTY2Fyb24iLCJzY2Fyb24iLCJZdW1sIiwiZm5vZiIsImNpcmMiLCJ0aWxkZSIsIkFscGhhIiwiQmV0YSIsIkdhbW1hIiwiRGVsdGEiLCJFcHNpbG9uIiwiWmV0YSIsIkV0YSIsIlRoZXRhIiwiSW90YSIsIkthcHBhIiwiTGFtYmRhIiwiTXUiLCJOdSIsIlhpIiwiT21pY3JvbiIsIlBpIiwiUmhvIiwiU2lnbWEiLCJUYXUiLCJVcHNpbG9uIiwiUGhpIiwiQ2hpIiwiUHNpIiwiT21lZ2EiLCJhbHBoYSIsImJldGEiLCJnYW1tYSIsImRlbHRhIiwiZXBzaWxvbiIsInpldGEiLCJldGEiLCJ0aGV0YSIsImlvdGEiLCJrYXBwYSIsImxhbWJkYSIsIm11IiwibnUiLCJ4aSIsIm9taWNyb24iLCJwaSIsInJobyIsInNpZ21hZiIsInNpZ21hIiwidGF1IiwidXBzaWxvbiIsInBoaSIsImNoaSIsInBzaSIsIm9tZWdhIiwidGhldGFzeW0iLCJ1cHNpaCIsInBpdiIsImVuc3AiLCJlbXNwIiwidGhpbnNwIiwienduaiIsInp3aiIsImxybSIsInJsbSIsIm5kYXNoIiwibWRhc2giLCJsc3F1byIsInJzcXVvIiwic2JxdW8iLCJsZHF1byIsInJkcXVvIiwiYmRxdW8iLCJkYWdnZXIiLCJEYWdnZXIiLCJidWxsIiwiaGVsbGlwIiwicGVybWlsIiwicHJpbWUiLCJQcmltZSIsImxzYXF1byIsInJzYXF1byIsIm9saW5lIiwiZnJhc2wiLCJldXJvIiwiaW1hZ2UiLCJ3ZWllcnAiLCJyZWFsIiwidHJhZGUiLCJhbGVmc3ltIiwibGFyciIsInVhcnIiLCJyYXJyIiwiZGFyciIsImhhcnIiLCJjcmFyciIsImxBcnIiLCJ1QXJyIiwickFyciIsImRBcnIiLCJoQXJyIiwiZm9yYWxsIiwicGFydCIsImV4aXN0IiwiZW1wdHkiLCJuYWJsYSIsImlzaW4iLCJub3RpbiIsIm5pIiwicHJvZCIsInN1bSIsIm1pbnVzIiwibG93YXN0IiwicmFkaWMiLCJwcm9wIiwiaW5maW4iLCJhbmciLCJhbmQiLCJvciIsImNhcCIsImN1cCIsImludCIsInRoZXJlNCIsInNpbSIsImNvbmciLCJhc3ltcCIsIm5lIiwiZXF1aXYiLCJsZSIsImdlIiwic3ViIiwic3VwIiwibnN1YiIsInN1YmUiLCJzdXBlIiwib3BsdXMiLCJvdGltZXMiLCJwZXJwIiwic2RvdCIsImxjZWlsIiwicmNlaWwiLCJsZmxvb3IiLCJyZmxvb3IiLCJsYW5nIiwicmFuZyIsImxveiIsInNwYWRlcyIsImNsdWJzIiwiaGVhcnRzIiwiZGlhbXMiLCJrZXkiLCJlIiwicyIsIlN0cmluZyIsImZyb21DaGFyQ29kZSIsImV2ZW50Iiwibm9kZVR5cGUiLCJ0ZXh0Tm9kZSIsInRleHRvcHRzIiwidGV4dCIsInRyaW0iLCJub3JtYWxpemUiLCJyZXBsYWNlIiwiRXJyb3IiLCJzdHJpY3RGYWlsIiwibWVzc2FnZSIsIm5ld1RhZyIsInRhZ05hbWUiLCJwYXJlbnQiLCJuYW1lIiwiYXR0cmlidXRlcyIsInFuYW1lIiwiYXR0cmlidXRlIiwicXVhbE5hbWUiLCJzcGxpdCIsInByZWZpeCIsImxvY2FsIiwiYXR0cmliIiwiYXR0cmliTmFtZSIsImF0dHJpYlZhbHVlIiwicW4iLCJvcGVuVGFnIiwic2VsZkNsb3NpbmciLCJ1cmkiLCJKU09OIiwic3RyaW5naWZ5IiwicCIsIm52IiwiaXNTZWxmQ2xvc2luZyIsInRvTG93ZXJDYXNlIiwiY2xvc2VUYWciLCJ0IiwiY2xvc2VUbyIsInBvcCIsIngiLCJuIiwicGFyc2VFbnRpdHkiLCJlbnRpdHkiLCJlbnRpdHlMQyIsIm51bSIsIm51bVN0ciIsImNoYXJBdCIsInNsaWNlIiwicGFyc2VJbnQiLCJpc05hTiIsImZyb21Db2RlUG9pbnQiLCJiZWdpbldoaXRlU3BhY2UiLCJzdGFydFRhZ1Bvc2l0aW9uIiwicmVzdWx0Iiwic3RhcnRpIiwic3Vic3RyaW5nIiwic2dtbERlY2wiLCJwcm9jSW5zdE5hbWUiLCJwcm9jSW5zdEJvZHkiLCJwYWQiLCJqb2luIiwidG9VcHBlckNhc2UiLCJjb21tZW50IiwiZG9jdHlwZSIsImJvZHkiLCJyZXR1cm5TdGF0ZSIsImJ1ZmZlciIsInVucGFyc2VkRW50aXRpZXMiLCJwYXJzZWRFbnRpdHkiLCJzdHJpbmdGcm9tQ2hhckNvZGUiLCJmbG9vciIsIk1BWF9TSVpFIiwiY29kZVVuaXRzIiwiaGlnaFN1cnJvZ2F0ZSIsImxvd1N1cnJvZ2F0ZSIsImluZGV4IiwiY29kZVBvaW50IiwiTnVtYmVyIiwiaXNGaW5pdGUiLCJSYW5nZUVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/sax-js/sax.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/stream.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/stream.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsyncGeneratorWithSetup: () => (/* binding */ AsyncGeneratorWithSetup),\n/* harmony export */   IterableReadableStream: () => (/* binding */ IterableReadableStream),\n/* harmony export */   atee: () => (/* binding */ atee),\n/* harmony export */   concat: () => (/* binding */ concat),\n/* harmony export */   pipeGeneratorWithSetup: () => (/* binding */ pipeGeneratorWithSetup)\n/* harmony export */ });\n/*\n * Support async iterator syntax for ReadableStreams in all environments.\n * Source: https://github.com/MattiasBuelens/web-streams-polyfill/pull/122#issuecomment-1627354490\n */ class IterableReadableStream extends ReadableStream {\n    constructor(){\n        super(...arguments);\n        Object.defineProperty(this, \"reader\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n    }\n    ensureReader() {\n        if (!this.reader) {\n            this.reader = this.getReader();\n        }\n    }\n    async next() {\n        this.ensureReader();\n        try {\n            const result = await this.reader.read();\n            if (result.done) {\n                this.reader.releaseLock(); // release lock when stream becomes closed\n                return {\n                    done: true,\n                    value: undefined\n                };\n            } else {\n                return {\n                    done: false,\n                    value: result.value\n                };\n            }\n        } catch (e) {\n            this.reader.releaseLock(); // release lock when stream becomes errored\n            throw e;\n        }\n    }\n    async return() {\n        this.ensureReader();\n        // If wrapped in a Node stream, cancel is already called.\n        if (this.locked) {\n            const cancelPromise = this.reader.cancel(); // cancel first, but don't await yet\n            this.reader.releaseLock(); // release lock first\n            await cancelPromise; // now await it\n        }\n        return {\n            done: true,\n            value: undefined\n        };\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    async throw(e) {\n        this.ensureReader();\n        if (this.locked) {\n            const cancelPromise = this.reader.cancel(); // cancel first, but don't await yet\n            this.reader.releaseLock(); // release lock first\n            await cancelPromise; // now await it\n        }\n        throw e;\n    }\n    [Symbol.asyncIterator]() {\n        return this;\n    }\n    static fromReadableStream(stream) {\n        // From https://developer.mozilla.org/en-US/docs/Web/API/Streams_API/Using_readable_streams#reading_the_stream\n        const reader = stream.getReader();\n        return new IterableReadableStream({\n            start (controller) {\n                return pump();\n                function pump() {\n                    return reader.read().then(({ done, value })=>{\n                        // When no more data needs to be consumed, close the stream\n                        if (done) {\n                            controller.close();\n                            return;\n                        }\n                        // Enqueue the next data chunk into our target stream\n                        controller.enqueue(value);\n                        return pump();\n                    });\n                }\n            },\n            cancel () {\n                reader.releaseLock();\n            }\n        });\n    }\n    static fromAsyncGenerator(generator) {\n        return new IterableReadableStream({\n            async pull (controller) {\n                const { value, done } = await generator.next();\n                // When no more data needs to be consumed, close the stream\n                if (done) {\n                    controller.close();\n                }\n                // Fix: `else if (value)` will hang the streaming when nullish value (e.g. empty string) is pulled\n                controller.enqueue(value);\n            },\n            async cancel (reason) {\n                await generator.return(reason);\n            }\n        });\n    }\n}\nfunction atee(iter, length = 2) {\n    const buffers = Array.from({\n        length\n    }, ()=>[]);\n    return buffers.map(async function* makeIter(buffer) {\n        while(true){\n            if (buffer.length === 0) {\n                const result = await iter.next();\n                for (const buffer of buffers){\n                    buffer.push(result);\n                }\n            } else if (buffer[0].done) {\n                return;\n            } else {\n                // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                yield buffer.shift().value;\n            }\n        }\n    });\n}\nfunction concat(first, second) {\n    if (Array.isArray(first) && Array.isArray(second)) {\n        return first.concat(second);\n    } else if (typeof first === \"string\" && typeof second === \"string\") {\n        return first + second;\n    } else if (typeof first === \"number\" && typeof second === \"number\") {\n        return first + second;\n    } else if (// eslint-disable-next-line @typescript-eslint/no-explicit-any\n    \"concat\" in first && // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    typeof first.concat === \"function\") {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return first.concat(second);\n    } else if (typeof first === \"object\" && typeof second === \"object\") {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const chunk = {\n            ...first\n        };\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        for (const [key, value] of Object.entries(second)){\n            if (key in chunk && !Array.isArray(chunk[key])) {\n                chunk[key] = concat(chunk[key], value);\n            } else {\n                chunk[key] = value;\n            }\n        }\n        return chunk;\n    } else {\n        throw new Error(`Cannot concat ${typeof first} and ${typeof second}`);\n    }\n}\nclass AsyncGeneratorWithSetup {\n    constructor(generator, startSetup){\n        Object.defineProperty(this, \"generator\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"setup\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"firstResult\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"firstResultUsed\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        this.generator = generator;\n        // setup is a promise that resolves only after the first iterator value\n        // is available. this is useful when setup of several piped generators\n        // needs to happen in logical order, ie. in the order in which input to\n        // to each generator is available.\n        this.setup = new Promise((resolve, reject)=>{\n            this.firstResult = generator.next();\n            if (startSetup) {\n                this.firstResult.then(startSetup).then(resolve, reject);\n            } else {\n                this.firstResult.then((_result)=>resolve(undefined), reject);\n            }\n        });\n    }\n    async next(...args) {\n        if (!this.firstResultUsed) {\n            this.firstResultUsed = true;\n            return this.firstResult;\n        }\n        return this.generator.next(...args);\n    }\n    async return(value) {\n        return this.generator.return(value);\n    }\n    async throw(e) {\n        return this.generator.throw(e);\n    }\n    [Symbol.asyncIterator]() {\n        return this;\n    }\n}\nasync function pipeGeneratorWithSetup(to, generator, startSetup, ...args) {\n    const gen = new AsyncGeneratorWithSetup(generator, startSetup);\n    const setup = await gen.setup;\n    return {\n        output: to(gen, setup, ...args),\n        setup\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvc3RyZWFtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7OztDQUdDLEdBQ00sTUFBTUEsK0JBQStCQztJQUN4Q0MsYUFBYztRQUNWLEtBQUssSUFBSUM7UUFDVEMsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxVQUFVO1lBQ2xDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7SUFDSjtJQUNBQyxlQUFlO1FBQ1gsSUFBSSxDQUFDLElBQUksQ0FBQ0MsTUFBTSxFQUFFO1lBQ2QsSUFBSSxDQUFDQSxNQUFNLEdBQUcsSUFBSSxDQUFDQyxTQUFTO1FBQ2hDO0lBQ0o7SUFDQSxNQUFNQyxPQUFPO1FBQ1QsSUFBSSxDQUFDSCxZQUFZO1FBQ2pCLElBQUk7WUFDQSxNQUFNSSxTQUFTLE1BQU0sSUFBSSxDQUFDSCxNQUFNLENBQUNJLElBQUk7WUFDckMsSUFBSUQsT0FBT0UsSUFBSSxFQUFFO2dCQUNiLElBQUksQ0FBQ0wsTUFBTSxDQUFDTSxXQUFXLElBQUksMENBQTBDO2dCQUNyRSxPQUFPO29CQUNIRCxNQUFNO29CQUNOUCxPQUFPUztnQkFDWDtZQUNKLE9BQ0s7Z0JBQ0QsT0FBTztvQkFDSEYsTUFBTTtvQkFDTlAsT0FBT0ssT0FBT0wsS0FBSztnQkFDdkI7WUFDSjtRQUNKLEVBQ0EsT0FBT1UsR0FBRztZQUNOLElBQUksQ0FBQ1IsTUFBTSxDQUFDTSxXQUFXLElBQUksMkNBQTJDO1lBQ3RFLE1BQU1FO1FBQ1Y7SUFDSjtJQUNBLE1BQU1DLFNBQVM7UUFDWCxJQUFJLENBQUNWLFlBQVk7UUFDakIseURBQXlEO1FBQ3pELElBQUksSUFBSSxDQUFDVyxNQUFNLEVBQUU7WUFDYixNQUFNQyxnQkFBZ0IsSUFBSSxDQUFDWCxNQUFNLENBQUNZLE1BQU0sSUFBSSxvQ0FBb0M7WUFDaEYsSUFBSSxDQUFDWixNQUFNLENBQUNNLFdBQVcsSUFB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QXdCdEIsV0FBV3VCO0lBQ25ELE1BQU1DLFFBQVEsTUFBTVUsSUFBSVYsS0FBSztJQUM3QixPQUFPO1FBQUVXLFFBQVFGLEdBQUdDLEtBQUtWLFVBQVVNO1FBQU9OO0lBQU07QUFDcEQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1mb3JtLWJ1aWxkZXItdHV0b3JpYWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvc3RyZWFtLmpzPzkyMTUiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIFN1cHBvcnQgYXN5bmMgaXRlcmF0b3Igc3ludGF4IGZvciBSZWFkYWJsZVN0cmVhbXMgaW4gYWxsIGVudmlyb25tZW50cy5cbiAqIFNvdXJjZTogaHR0cHM6Ly9naXRodWIuY29tL01hdHRpYXNCdWVsZW5zL3dlYi1zdHJlYW1zLXBvbHlmaWxsL3B1bGwvMTIyI2lzc3VlY29tbWVudC0xNjI3MzU0NDkwXG4gKi9cbmV4cG9ydCBjbGFzcyBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtIGV4dGVuZHMgUmVhZGFibGVTdHJlYW0ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJyZWFkZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZW5zdXJlUmVhZGVyKCkge1xuICAgICAgICBpZiAoIXRoaXMucmVhZGVyKSB7XG4gICAgICAgICAgICB0aGlzLnJlYWRlciA9IHRoaXMuZ2V0UmVhZGVyKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgbmV4dCgpIHtcbiAgICAgICAgdGhpcy5lbnN1cmVSZWFkZXIoKTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucmVhZGVyLnJlYWQoKTtcbiAgICAgICAgICAgIGlmIChyZXN1bHQuZG9uZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVhZGVyLnJlbGVhc2VMb2NrKCk7IC8vIHJlbGVhc2UgbG9jayB3aGVuIHN0cmVhbSBiZWNvbWVzIGNsb3NlZFxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGRvbmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGRvbmU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcmVzdWx0LnZhbHVlLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRoaXMucmVhZGVyLnJlbGVhc2VMb2NrKCk7IC8vIHJlbGVhc2UgbG9jayB3aGVuIHN0cmVhbSBiZWNvbWVzIGVycm9yZWRcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgcmV0dXJuKCkge1xuICAgICAgICB0aGlzLmVuc3VyZVJlYWRlcigpO1xuICAgICAgICAvLyBJZiB3cmFwcGVkIGluIGEgTm9kZSBzdHJlYW0sIGNhbmNlbCBpcyBhbHJlYWR5IGNhbGxlZC5cbiAgICAgICAgaWYgKHRoaXMubG9ja2VkKSB7XG4gICAgICAgICAgICBjb25zdCBjYW5jZWxQcm9taXNlID0gdGhpcy5yZWFkZXIuY2FuY2VsKCk7IC8vIGNhbmNlbCBmaXJzdCwgYnV0IGRvbid0IGF3YWl0IHlldFxuICAgICAgICAgICAgdGhpcy5yZWFkZXIucmVsZWFzZUxvY2soKTsgLy8gcmVsZWFzZSBsb2NrIGZpcnN0XG4gICAgICAgICAgICBhd2FpdCBjYW5jZWxQcm9taXNlOyAvLyBub3cgYXdhaXQgaXRcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBkb25lOiB0cnVlLCB2YWx1ZTogdW5kZWZpbmVkIH07XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgYXN5bmMgdGhyb3coZSkge1xuICAgICAgICB0aGlzLmVuc3VyZVJlYWRlcigpO1xuICAgICAgICBpZiAodGhpcy5sb2NrZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbmNlbFByb21pc2UgPSB0aGlzLnJlYWRlci5jYW5jZWwoKTsgLy8gY2FuY2VsIGZpcnN0LCBidXQgZG9uJ3QgYXdhaXQgeWV0XG4gICAgICAgICAgICB0aGlzLnJlYWRlci5yZWxlYXNlTG9jaygpOyAvLyByZWxlYXNlIGxvY2sgZmlyc3RcbiAgICAgICAgICAgIGF3YWl0IGNhbmNlbFByb21pc2U7IC8vIG5vdyBhd2FpdCBpdFxuICAgICAgICB9XG4gICAgICAgIHRocm93IGU7XG4gICAgfVxuICAgIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVJlYWRhYmxlU3RyZWFtKHN0cmVhbSkge1xuICAgICAgICAvLyBGcm9tIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9TdHJlYW1zX0FQSS9Vc2luZ19yZWFkYWJsZV9zdHJlYW1zI3JlYWRpbmdfdGhlX3N0cmVhbVxuICAgICAgICBjb25zdCByZWFkZXIgPSBzdHJlYW0uZ2V0UmVhZGVyKCk7XG4gICAgICAgIHJldHVybiBuZXcgSXRlcmFibGVSZWFkYWJsZVN0cmVhbSh7XG4gICAgICAgICAgICBzdGFydChjb250cm9sbGVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHB1bXAoKTtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBwdW1wKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVhZGVyLnJlYWQoKS50aGVuKCh7IGRvbmUsIHZhbHVlIH0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdoZW4gbm8gbW9yZSBkYXRhIG5lZWRzIHRvIGJlIGNvbnN1bWVkLCBjbG9zZSB0aGUgc3RyZWFtXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBFbnF1ZXVlIHRoZSBuZXh0IGRhdGEgY2h1bmsgaW50byBvdXIgdGFyZ2V0IHN0cmVhbVxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwdW1wKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjYW5jZWwoKSB7XG4gICAgICAgICAgICAgICAgcmVhZGVyLnJlbGVhc2VMb2NrKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21Bc3luY0dlbmVyYXRvcihnZW5lcmF0b3IpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJdGVyYWJsZVJlYWRhYmxlU3RyZWFtKHtcbiAgICAgICAgICAgIGFzeW5jIHB1bGwoY29udHJvbGxlcikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgdmFsdWUsIGRvbmUgfSA9IGF3YWl0IGdlbmVyYXRvci5uZXh0KCk7XG4gICAgICAgICAgICAgICAgLy8gV2hlbiBubyBtb3JlIGRhdGEgbmVlZHMgdG8gYmUgY29uc3VtZWQsIGNsb3NlIHRoZSBzdHJlYW1cbiAgICAgICAgICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIEZpeDogYGVsc2UgaWYgKHZhbHVlKWAgd2lsbCBoYW5nIHRoZSBzdHJlYW1pbmcgd2hlbiBudWxsaXNoIHZhbHVlIChlLmcuIGVtcHR5IHN0cmluZykgaXMgcHVsbGVkXG4gICAgICAgICAgICAgICAgY29udHJvbGxlci5lbnF1ZXVlKHZhbHVlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhc3luYyBjYW5jZWwocmVhc29uKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgZ2VuZXJhdG9yLnJldHVybihyZWFzb24pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfVxufVxuZXhwb3J0IGZ1bmN0aW9uIGF0ZWUoaXRlciwgbGVuZ3RoID0gMikge1xuICAgIGNvbnN0IGJ1ZmZlcnMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoIH0sICgpID0+IFtdKTtcbiAgICByZXR1cm4gYnVmZmVycy5tYXAoYXN5bmMgZnVuY3Rpb24qIG1ha2VJdGVyKGJ1ZmZlcikge1xuICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgaWYgKGJ1ZmZlci5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBpdGVyLm5leHQoKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGJ1ZmZlciBvZiBidWZmZXJzKSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlci5wdXNoKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoYnVmZmVyWzBdLmRvbmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICAgICAgICAgIHlpZWxkIGJ1ZmZlci5zaGlmdCgpLnZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59XG5leHBvcnQgZnVuY3Rpb24gY29uY2F0KGZpcnN0LCBzZWNvbmQpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShmaXJzdCkgJiYgQXJyYXkuaXNBcnJheShzZWNvbmQpKSB7XG4gICAgICAgIHJldHVybiBmaXJzdC5jb25jYXQoc2Vjb25kKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGZpcnN0ID09PSBcInN0cmluZ1wiICYmIHR5cGVvZiBzZWNvbmQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgcmV0dXJuIChmaXJzdCArIHNlY29uZCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBmaXJzdCA9PT0gXCJudW1iZXJcIiAmJiB0eXBlb2Ygc2Vjb25kID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgIHJldHVybiAoZmlyc3QgKyBzZWNvbmQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIFwiY29uY2F0XCIgaW4gZmlyc3QgJiZcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgdHlwZW9mIGZpcnN0LmNvbmNhdCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiBmaXJzdC5jb25jYXQoc2Vjb25kKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIGZpcnN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBzZWNvbmQgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgY29uc3QgY2h1bmsgPSB7IC4uLmZpcnN0IH07XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHNlY29uZCkpIHtcbiAgICAgICAgICAgIGlmIChrZXkgaW4gY2h1bmsgJiYgIUFycmF5LmlzQXJyYXkoY2h1bmtba2V5XSkpIHtcbiAgICAgICAgICAgICAgICBjaHVua1trZXldID0gY29uY2F0KGNodW5rW2tleV0sIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNodW5rW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2h1bms7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBjb25jYXQgJHt0eXBlb2YgZmlyc3R9IGFuZCAke3R5cGVvZiBzZWNvbmR9YCk7XG4gICAgfVxufVxuZXhwb3J0IGNsYXNzIEFzeW5jR2VuZXJhdG9yV2l0aFNldHVwIHtcbiAgICBjb25zdHJ1Y3RvcihnZW5lcmF0b3IsIHN0YXJ0U2V0dXApIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZ2VuZXJhdG9yXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInNldHVwXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImZpcnN0UmVzdWx0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImZpcnN0UmVzdWx0VXNlZFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZ2VuZXJhdG9yID0gZ2VuZXJhdG9yO1xuICAgICAgICAvLyBzZXR1cCBpcyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyBvbmx5IGFmdGVyIHRoZSBmaXJzdCBpdGVyYXRvciB2YWx1ZVxuICAgICAgICAvLyBpcyBhdmFpbGFibGUuIHRoaXMgaXMgdXNlZnVsIHdoZW4gc2V0dXAgb2Ygc2V2ZXJhbCBwaXBlZCBnZW5lcmF0b3JzXG4gICAgICAgIC8vIG5lZWRzIHRvIGhhcHBlbiBpbiBsb2dpY2FsIG9yZGVyLCBpZS4gaW4gdGhlIG9yZGVyIGluIHdoaWNoIGlucHV0IHRvXG4gICAgICAgIC8vIHRvIGVhY2ggZ2VuZXJhdG9yIGlzIGF2YWlsYWJsZS5cbiAgICAgICAgdGhpcy5zZXR1cCA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZmlyc3RSZXN1bHQgPSBnZW5lcmF0b3IubmV4dCgpO1xuICAgICAgICAgICAgaWYgKHN0YXJ0U2V0dXApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpcnN0UmVzdWx0LnRoZW4oc3RhcnRTZXR1cCkudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5maXJzdFJlc3VsdC50aGVuKChfcmVzdWx0KSA9PiByZXNvbHZlKHVuZGVmaW5lZCksIHJlamVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhc3luYyBuZXh0KC4uLmFyZ3MpIHtcbiAgICAgICAgaWYgKCF0aGlzLmZpcnN0UmVzdWx0VXNlZCkge1xuICAgICAgICAgICAgdGhpcy5maXJzdFJlc3VsdFVzZWQgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmlyc3RSZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZ2VuZXJhdG9yLm5leHQoLi4uYXJncyk7XG4gICAgfVxuICAgIGFzeW5jIHJldHVybih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0b3IucmV0dXJuKHZhbHVlKTtcbiAgICB9XG4gICAgYXN5bmMgdGhyb3coZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0b3IudGhyb3coZSk7XG4gICAgfVxuICAgIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwaXBlR2VuZXJhdG9yV2l0aFNldHVwKHRvLCBnZW5lcmF0b3IsIHN0YXJ0U2V0dXAsIC4uLmFyZ3MpIHtcbiAgICBjb25zdCBnZW4gPSBuZXcgQXN5bmNHZW5lcmF0b3JXaXRoU2V0dXAoZ2VuZXJhdG9yLCBzdGFydFNldHVwKTtcbiAgICBjb25zdCBzZXR1cCA9IGF3YWl0IGdlbi5zZXR1cDtcbiAgICByZXR1cm4geyBvdXRwdXQ6IHRvKGdlbiwgc2V0dXAsIC4uLmFyZ3MpLCBzZXR1cCB9O1xufVxuIl0sIm5hbWVzIjpbIkl0ZXJhYmxlUmVhZGFibGVTdHJlYW0iLCJSZWFkYWJsZVN0cmVhbSIsImNvbnN0cnVjdG9yIiwiYXJndW1lbnRzIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsImVuc3VyZVJlYWRlciIsInJlYWRlciIsImdldFJlYWRlciIsIm5leHQiLCJyZXN1bHQiLCJyZWFkIiwiZG9uZSIsInJlbGVhc2VMb2NrIiwidW5kZWZpbmVkIiwiZSIsInJldHVybiIsImxvY2tlZCIsImNhbmNlbFByb21pc2UiLCJjYW5jZWwiLCJ0aHJvdyIsIlN5bWJvbCIsImFzeW5jSXRlcmF0b3IiLCJmcm9tUmVhZGFibGVTdHJlYW0iLCJzdHJlYW0iLCJzdGFydCIsImNvbnRyb2xsZXIiLCJwdW1wIiwidGhlbiIsImNsb3NlIiwiZW5xdWV1ZSIsImZyb21Bc3luY0dlbmVyYXRvciIsImdlbmVyYXRvciIsInB1bGwiLCJyZWFzb24iLCJhdGVlIiwiaXRlciIsImxlbmd0aCIsImJ1ZmZlcnMiLCJBcnJheSIsImZyb20iLCJtYXAiLCJtYWtlSXRlciIsImJ1ZmZlciIsInB1c2giLCJzaGlmdCIsImNvbmNhdCIsImZpcnN0Iiwic2Vjb25kIiwiaXNBcnJheSIsImNodW5rIiwia2V5IiwiZW50cmllcyIsIkVycm9yIiwiQXN5bmNHZW5lcmF0b3JXaXRoU2V0dXAiLCJzdGFydFNldHVwIiwic2V0dXAiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImZpcnN0UmVzdWx0IiwiX3Jlc3VsdCIsImFyZ3MiLCJmaXJzdFJlc3VsdFVzZWQiLCJwaXBlR2VuZXJhdG9yV2l0aFNldHVwIiwidG8iLCJnZW4iLCJvdXRwdXQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/stream.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/dist/utils/tiktoken.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/core/dist/utils/tiktoken.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   encodingForModel: () => (/* binding */ encodingForModel),\n/* harmony export */   getEncoding: () => (/* binding */ getEncoding)\n/* harmony export */ });\n/* harmony import */ var js_tiktoken_lite__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! js-tiktoken/lite */ \"(rsc)/./node_modules/js-tiktoken/dist/lite.js\");\n/* harmony import */ var _async_caller_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./async_caller.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/async_caller.js\");\n\n\nconst cache = {};\nconst caller = /* #__PURE__ */ new _async_caller_js__WEBPACK_IMPORTED_MODULE_1__.AsyncCaller({});\nasync function getEncoding(encoding) {\n    if (!(encoding in cache)) {\n        cache[encoding] = caller.fetch(`https://tiktoken.pages.dev/js/${encoding}.json`).then((res)=>res.json()).then((data)=>new js_tiktoken_lite__WEBPACK_IMPORTED_MODULE_0__.Tiktoken(data)).catch((e)=>{\n            delete cache[encoding];\n            throw e;\n        });\n    }\n    return await cache[encoding];\n}\nasync function encodingForModel(model) {\n    return getEncoding((0,js_tiktoken_lite__WEBPACK_IMPORTED_MODULE_0__.getEncodingNameForModel)(model));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2Rpc3QvdXRpbHMvdGlrdG9rZW4uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFzRTtBQUN0QjtBQUNoRCxNQUFNRyxRQUFRLENBQUM7QUFDZixNQUFNQyxTQUFTLGFBQWEsR0FBRyxJQUFJRix5REFBV0EsQ0FBQyxDQUFDO0FBQ3pDLGVBQWVHLFlBQVlDLFFBQVE7SUFDdEMsSUFBSSxDQUFFQSxDQUFBQSxZQUFZSCxLQUFJLEdBQUk7UUFDdEJBLEtBQUssQ0FBQ0csU0FBUyxHQUFHRixPQUNiRyxLQUFLLENBQUMsQ0FBQyw4QkFBOEIsRUFBRUQsU0FBUyxLQUFLLENBQUMsRUFDdERFLElBQUksQ0FBQyxDQUFDQyxNQUFRQSxJQUFJQyxJQUFJLElBQ3RCRixJQUFJLENBQUMsQ0FBQ0csT0FBUyxJQUFJWCxzREFBUUEsQ0FBQ1csT0FDNUJDLEtBQUssQ0FBQyxDQUFDQztZQUNSLE9BQU9WLEtBQUssQ0FBQ0csU0FBUztZQUN0QixNQUFNTztRQUNWO0lBQ0o7SUFDQSxPQUFPLE1BQU1WLEtBQUssQ0FBQ0csU0FBUztBQUNoQztBQUNPLGVBQWVRLGlCQUFpQkMsS0FBSztJQUN4QyxPQUFPVixZQUFZSix5RUFBdUJBLENBQUNjO0FBQy9DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kaXN0L3V0aWxzL3Rpa3Rva2VuLmpzPzhlNmUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVGlrdG9rZW4sIGdldEVuY29kaW5nTmFtZUZvck1vZGVsLCB9IGZyb20gXCJqcy10aWt0b2tlbi9saXRlXCI7XG5pbXBvcnQgeyBBc3luY0NhbGxlciB9IGZyb20gXCIuL2FzeW5jX2NhbGxlci5qc1wiO1xuY29uc3QgY2FjaGUgPSB7fTtcbmNvbnN0IGNhbGxlciA9IC8qICNfX1BVUkVfXyAqLyBuZXcgQXN5bmNDYWxsZXIoe30pO1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEVuY29kaW5nKGVuY29kaW5nKSB7XG4gICAgaWYgKCEoZW5jb2RpbmcgaW4gY2FjaGUpKSB7XG4gICAgICAgIGNhY2hlW2VuY29kaW5nXSA9IGNhbGxlclxuICAgICAgICAgICAgLmZldGNoKGBodHRwczovL3Rpa3Rva2VuLnBhZ2VzLmRldi9qcy8ke2VuY29kaW5nfS5qc29uYClcbiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgICAudGhlbigoZGF0YSkgPT4gbmV3IFRpa3Rva2VuKGRhdGEpKVxuICAgICAgICAgICAgLmNhdGNoKChlKSA9PiB7XG4gICAgICAgICAgICBkZWxldGUgY2FjaGVbZW5jb2RpbmddO1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBhd2FpdCBjYWNoZVtlbmNvZGluZ107XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZW5jb2RpbmdGb3JNb2RlbChtb2RlbCkge1xuICAgIHJldHVybiBnZXRFbmNvZGluZyhnZXRFbmNvZGluZ05hbWVGb3JNb2RlbChtb2RlbCkpO1xufVxuIl0sIm5hbWVzIjpbIlRpa3Rva2VuIiwiZ2V0RW5jb2RpbmdOYW1lRm9yTW9kZWwiLCJBc3luY0NhbGxlciIsImNhY2hlIiwiY2FsbGVyIiwiZ2V0RW5jb2RpbmciLCJlbmNvZGluZyIsImZldGNoIiwidGhlbiIsInJlcyIsImpzb24iLCJkYXRhIiwiY2F0Y2giLCJlIiwiZW5jb2RpbmdGb3JNb2RlbCIsIm1vZGVsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/dist/utils/tiktoken.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/documents.js":
/*!***************************************************!*\
  !*** ./node_modules/@langchain/core/documents.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseDocumentTransformer: () => (/* reexport safe */ _dist_documents_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseDocumentTransformer),\n/* harmony export */   Document: () => (/* reexport safe */ _dist_documents_index_js__WEBPACK_IMPORTED_MODULE_0__.Document),\n/* harmony export */   MappingDocumentTransformer: () => (/* reexport safe */ _dist_documents_index_js__WEBPACK_IMPORTED_MODULE_0__.MappingDocumentTransformer)\n/* harmony export */ });\n/* harmony import */ var _dist_documents_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/documents/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/documents/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2RvY3VtZW50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXlDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9kb2N1bWVudHMuanM/NmQxOCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuL2Rpc3QvZG9jdW1lbnRzL2luZGV4LmpzJyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/documents.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/embeddings.js":
/*!****************************************************!*\
  !*** ./node_modules/@langchain/core/embeddings.js ***!
  \****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Embeddings: () => (/* reexport safe */ _dist_embeddings_js__WEBPACK_IMPORTED_MODULE_0__.Embeddings)\n/* harmony export */ });\n/* harmony import */ var _dist_embeddings_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/embeddings.js */ \"(rsc)/./node_modules/@langchain/core/dist/embeddings.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2VtYmVkZGluZ3MuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBb0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1mb3JtLWJ1aWxkZXItdHV0b3JpYWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2VtYmVkZGluZ3MuanM/ZmEyOCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuL2Rpc3QvZW1iZWRkaW5ncy5qcyciXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/embeddings.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/example_selectors.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/example_selectors.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseExampleSelector: () => (/* reexport safe */ _dist_example_selectors_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseExampleSelector),\n/* harmony export */   BasePromptSelector: () => (/* reexport safe */ _dist_example_selectors_index_js__WEBPACK_IMPORTED_MODULE_0__.BasePromptSelector),\n/* harmony export */   ConditionalPromptSelector: () => (/* reexport safe */ _dist_example_selectors_index_js__WEBPACK_IMPORTED_MODULE_0__.ConditionalPromptSelector),\n/* harmony export */   LengthBasedExampleSelector: () => (/* reexport safe */ _dist_example_selectors_index_js__WEBPACK_IMPORTED_MODULE_0__.LengthBasedExampleSelector),\n/* harmony export */   SemanticSimilarityExampleSelector: () => (/* reexport safe */ _dist_example_selectors_index_js__WEBPACK_IMPORTED_MODULE_0__.SemanticSimilarityExampleSelector),\n/* harmony export */   isChatModel: () => (/* reexport safe */ _dist_example_selectors_index_js__WEBPACK_IMPORTED_MODULE_0__.isChatModel),\n/* harmony export */   isLLM: () => (/* reexport safe */ _dist_example_selectors_index_js__WEBPACK_IMPORTED_MODULE_0__.isLLM)\n/* harmony export */ });\n/* harmony import */ var _dist_example_selectors_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/example_selectors/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/example_selectors/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2V4YW1wbGVfc2VsZWN0b3JzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQWlEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9leGFtcGxlX3NlbGVjdG9ycy5qcz81Njg0Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4vZGlzdC9leGFtcGxlX3NlbGVjdG9ycy9pbmRleC5qcyciXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/example_selectors.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/language_models/base.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/language_models/base.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseLangChain: () => (/* reexport safe */ _dist_language_models_base_js__WEBPACK_IMPORTED_MODULE_0__.BaseLangChain),\n/* harmony export */   BaseLanguageModel: () => (/* reexport safe */ _dist_language_models_base_js__WEBPACK_IMPORTED_MODULE_0__.BaseLanguageModel),\n/* harmony export */   calculateMaxTokens: () => (/* reexport safe */ _dist_language_models_base_js__WEBPACK_IMPORTED_MODULE_0__.calculateMaxTokens),\n/* harmony export */   getEmbeddingContextSize: () => (/* reexport safe */ _dist_language_models_base_js__WEBPACK_IMPORTED_MODULE_0__.getEmbeddingContextSize),\n/* harmony export */   getModelContextSize: () => (/* reexport safe */ _dist_language_models_base_js__WEBPACK_IMPORTED_MODULE_0__.getModelContextSize),\n/* harmony export */   getModelNameForTiktoken: () => (/* reexport safe */ _dist_language_models_base_js__WEBPACK_IMPORTED_MODULE_0__.getModelNameForTiktoken)\n/* harmony export */ });\n/* harmony import */ var _dist_language_models_base_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/language_models/base.js */ \"(rsc)/./node_modules/@langchain/core/dist/language_models/base.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2xhbmd1YWdlX21vZGVscy9iYXNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBK0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1mb3JtLWJ1aWxkZXItdHV0b3JpYWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2xhbmd1YWdlX21vZGVscy9iYXNlLmpzPzc2NTAiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi4vZGlzdC9sYW5ndWFnZV9tb2RlbHMvYmFzZS5qcyciXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/language_models/base.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/language_models/chat_models.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@langchain/core/language_models/chat_models.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseChatModel: () => (/* reexport safe */ _dist_language_models_chat_models_js__WEBPACK_IMPORTED_MODULE_0__.BaseChatModel),\n/* harmony export */   SimpleChatModel: () => (/* reexport safe */ _dist_language_models_chat_models_js__WEBPACK_IMPORTED_MODULE_0__.SimpleChatModel),\n/* harmony export */   createChatMessageChunkEncoderStream: () => (/* reexport safe */ _dist_language_models_chat_models_js__WEBPACK_IMPORTED_MODULE_0__.createChatMessageChunkEncoderStream)\n/* harmony export */ });\n/* harmony import */ var _dist_language_models_chat_models_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/language_models/chat_models.js */ \"(rsc)/./node_modules/@langchain/core/dist/language_models/chat_models.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2xhbmd1YWdlX21vZGVscy9jaGF0X21vZGVscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9sYW5ndWFnZV9tb2RlbHMvY2hhdF9tb2RlbHMuanM/YzJhZCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuLi9kaXN0L2xhbmd1YWdlX21vZGVscy9jaGF0X21vZGVscy5qcyciXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/language_models/chat_models.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/language_models/llms.js":
/*!**************************************************************!*\
  !*** ./node_modules/@langchain/core/language_models/llms.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BaseLLM: () => (/* reexport safe */ _dist_language_models_llms_js__WEBPACK_IMPORTED_MODULE_0__.BaseLLM),\n/* harmony export */   LLM: () => (/* reexport safe */ _dist_language_models_llms_js__WEBPACK_IMPORTED_MODULE_0__.LLM)\n/* harmony export */ });\n/* harmony import */ var _dist_language_models_llms_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/language_models/llms.js */ \"(rsc)/./node_modules/@langchain/core/dist/language_models/llms.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL2xhbmd1YWdlX21vZGVscy9sbG1zLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUErQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLWZvcm0tYnVpbGRlci10dXRvcmlhbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvbGFuZ3VhZ2VfbW9kZWxzL2xsbXMuanM/ZDE1MSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuLi9kaXN0L2xhbmd1YWdlX21vZGVscy9sbG1zLmpzJyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/language_models/llms.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/messages.js":
/*!**************************************************!*\
  !*** ./node_modules/@langchain/core/messages.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AIMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.AIMessage),\n/* harmony export */   AIMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.AIMessageChunk),\n/* harmony export */   BaseMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessage),\n/* harmony export */   BaseMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageChunk),\n/* harmony export */   ChatMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.ChatMessage),\n/* harmony export */   ChatMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.ChatMessageChunk),\n/* harmony export */   FunctionMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.FunctionMessage),\n/* harmony export */   FunctionMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.FunctionMessageChunk),\n/* harmony export */   HumanMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.HumanMessage),\n/* harmony export */   HumanMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.HumanMessageChunk),\n/* harmony export */   SystemMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.SystemMessage),\n/* harmony export */   SystemMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.SystemMessageChunk),\n/* harmony export */   ToolMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.ToolMessage),\n/* harmony export */   ToolMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.ToolMessageChunk),\n/* harmony export */   coerceMessageLikeToMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.coerceMessageLikeToMessage),\n/* harmony export */   getBufferString: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.getBufferString),\n/* harmony export */   isBaseMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessage),\n/* harmony export */   isBaseMessageChunk: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.isBaseMessageChunk),\n/* harmony export */   mapChatMessagesToStoredMessages: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.mapChatMessagesToStoredMessages),\n/* harmony export */   mapStoredMessageToChatMessage: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.mapStoredMessageToChatMessage),\n/* harmony export */   mapStoredMessagesToChatMessages: () => (/* reexport safe */ _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__.mapStoredMessagesToChatMessages)\n/* harmony export */ });\n/* harmony import */ var _dist_messages_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/messages/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/messages/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL21lc3NhZ2VzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBd0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1mb3JtLWJ1aWxkZXItdHV0b3JpYWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL21lc3NhZ2VzLmpzPzgyOTAiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi9kaXN0L21lc3NhZ2VzL2luZGV4LmpzJyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/messages.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/output_parsers.js":
/*!********************************************************!*\
  !*** ./node_modules/@langchain/core/output_parsers.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AsymmetricStructuredOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.AsymmetricStructuredOutputParser),\n/* harmony export */   BaseCumulativeTransformOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseCumulativeTransformOutputParser),\n/* harmony export */   BaseLLMOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseLLMOutputParser),\n/* harmony export */   BaseOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseOutputParser),\n/* harmony export */   BaseTransformOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseTransformOutputParser),\n/* harmony export */   BytesOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.BytesOutputParser),\n/* harmony export */   CommaSeparatedListOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.CommaSeparatedListOutputParser),\n/* harmony export */   CustomListOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.CustomListOutputParser),\n/* harmony export */   JsonMarkdownStructuredOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.JsonMarkdownStructuredOutputParser),\n/* harmony export */   JsonOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.JsonOutputParser),\n/* harmony export */   ListOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.ListOutputParser),\n/* harmony export */   MarkdownListOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.MarkdownListOutputParser),\n/* harmony export */   NumberedListOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.NumberedListOutputParser),\n/* harmony export */   OutputParserException: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.OutputParserException),\n/* harmony export */   StringOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.StringOutputParser),\n/* harmony export */   StructuredOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.StructuredOutputParser),\n/* harmony export */   XMLOutputParser: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.XMLOutputParser),\n/* harmony export */   XML_FORMAT_INSTRUCTIONS: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.XML_FORMAT_INSTRUCTIONS),\n/* harmony export */   parseJsonMarkdown: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.parseJsonMarkdown),\n/* harmony export */   parsePartialJson: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.parsePartialJson),\n/* harmony export */   parseXMLMarkdown: () => (/* reexport safe */ _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__.parseXMLMarkdown)\n/* harmony export */ });\n/* harmony import */ var _dist_output_parsers_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/output_parsers/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/output_parsers/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL291dHB1dF9wYXJzZXJzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBOEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1mb3JtLWJ1aWxkZXItdHV0b3JpYWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL291dHB1dF9wYXJzZXJzLmpzPzE5MzYiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi9kaXN0L291dHB1dF9wYXJzZXJzL2luZGV4LmpzJyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/output_parsers.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/outputs.js":
/*!*************************************************!*\
  !*** ./node_modules/@langchain/core/outputs.js ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatGenerationChunk: () => (/* reexport safe */ _dist_outputs_js__WEBPACK_IMPORTED_MODULE_0__.ChatGenerationChunk),\n/* harmony export */   GenerationChunk: () => (/* reexport safe */ _dist_outputs_js__WEBPACK_IMPORTED_MODULE_0__.GenerationChunk),\n/* harmony export */   RUN_KEY: () => (/* reexport safe */ _dist_outputs_js__WEBPACK_IMPORTED_MODULE_0__.RUN_KEY)\n/* harmony export */ });\n/* harmony import */ var _dist_outputs_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/outputs.js */ \"(rsc)/./node_modules/@langchain/core/dist/outputs.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL291dHB1dHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFpQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLWZvcm0tYnVpbGRlci10dXRvcmlhbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvb3V0cHV0cy5qcz9hZjQzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4vZGlzdC9vdXRwdXRzLmpzJyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/outputs.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/prompts.js":
/*!*************************************************!*\
  !*** ./node_modules/@langchain/core/prompts.js ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AIMessagePromptTemplate: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.AIMessagePromptTemplate),\n/* harmony export */   BaseChatPromptTemplate: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseChatPromptTemplate),\n/* harmony export */   BaseMessagePromptTemplate: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessagePromptTemplate),\n/* harmony export */   BaseMessageStringPromptTemplate: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseMessageStringPromptTemplate),\n/* harmony export */   BasePromptTemplate: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.BasePromptTemplate),\n/* harmony export */   BaseStringPromptTemplate: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.BaseStringPromptTemplate),\n/* harmony export */   ChatMessagePromptTemplate: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.ChatMessagePromptTemplate),\n/* harmony export */   ChatPromptTemplate: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.ChatPromptTemplate),\n/* harmony export */   DEFAULT_FORMATTER_MAPPING: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_FORMATTER_MAPPING),\n/* harmony export */   DEFAULT_PARSER_MAPPING: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.DEFAULT_PARSER_MAPPING),\n/* harmony export */   FewShotChatMessagePromptTemplate: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.FewShotChatMessagePromptTemplate),\n/* harmony export */   FewShotPromptTemplate: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.FewShotPromptTemplate),\n/* harmony export */   HumanMessagePromptTemplate: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.HumanMessagePromptTemplate),\n/* harmony export */   ImagePromptTemplate: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.ImagePromptTemplate),\n/* harmony export */   MessagesPlaceholder: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.MessagesPlaceholder),\n/* harmony export */   PipelinePromptTemplate: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.PipelinePromptTemplate),\n/* harmony export */   PromptTemplate: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.PromptTemplate),\n/* harmony export */   SystemMessagePromptTemplate: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.SystemMessagePromptTemplate),\n/* harmony export */   checkValidTemplate: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.checkValidTemplate),\n/* harmony export */   interpolateFString: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.interpolateFString),\n/* harmony export */   parseFString: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.parseFString),\n/* harmony export */   parseTemplate: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.parseTemplate),\n/* harmony export */   renderTemplate: () => (/* reexport safe */ _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__.renderTemplate)\n/* harmony export */ });\n/* harmony import */ var _dist_prompts_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/prompts/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/prompts/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3Byb21wdHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXVDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS9wcm9tcHRzLmpzPzc5NGUiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi9kaXN0L3Byb21wdHMvaW5kZXguanMnIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/prompts.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/runnables.js":
/*!***************************************************!*\
  !*** ./node_modules/@langchain/core/runnables.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RouterRunnable: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RouterRunnable),\n/* harmony export */   Runnable: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.Runnable),\n/* harmony export */   RunnableAssign: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnableAssign),\n/* harmony export */   RunnableBinding: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnableBinding),\n/* harmony export */   RunnableBranch: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnableBranch),\n/* harmony export */   RunnableEach: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnableEach),\n/* harmony export */   RunnableLambda: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnableLambda),\n/* harmony export */   RunnableMap: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnableMap),\n/* harmony export */   RunnableParallel: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnableParallel),\n/* harmony export */   RunnablePassthrough: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnablePassthrough),\n/* harmony export */   RunnablePick: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnablePick),\n/* harmony export */   RunnableRetry: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnableRetry),\n/* harmony export */   RunnableSequence: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnableSequence),\n/* harmony export */   RunnableWithFallbacks: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnableWithFallbacks),\n/* harmony export */   RunnableWithMessageHistory: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.RunnableWithMessageHistory),\n/* harmony export */   _coerceToRunnable: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__._coerceToRunnable),\n/* harmony export */   ensureConfig: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.ensureConfig),\n/* harmony export */   getCallbackManagerForConfig: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.getCallbackManagerForConfig),\n/* harmony export */   patchConfig: () => (/* reexport safe */ _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__.patchConfig)\n/* harmony export */ });\n/* harmony import */ var _dist_runnables_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/runnables/index.js */ \"(rsc)/./node_modules/@langchain/core/dist/runnables/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3J1bm5hYmxlcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF5QyIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLWZvcm0tYnVpbGRlci10dXRvcmlhbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvcnVubmFibGVzLmpzPzdhYjEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi9kaXN0L3J1bm5hYmxlcy9pbmRleC5qcyciXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/runnables.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/utils/chunk_array.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/core/utils/chunk_array.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   chunkArray: () => (/* reexport safe */ _dist_utils_chunk_array_js__WEBPACK_IMPORTED_MODULE_0__.chunkArray)\n/* harmony export */ });\n/* harmony import */ var _dist_utils_chunk_array_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/utils/chunk_array.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/chunk_array.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3V0aWxzL2NodW5rX2FycmF5LmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQTRDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS91dGlscy9jaHVua19hcnJheS5qcz81ZjgyIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4uL2Rpc3QvdXRpbHMvY2h1bmtfYXJyYXkuanMnIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/utils/chunk_array.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/utils/env.js":
/*!***************************************************!*\
  !*** ./node_modules/@langchain/core/utils/env.js ***!
  \***************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEnv: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.getEnv),\n/* harmony export */   getEnvironmentVariable: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable),\n/* harmony export */   getRuntimeEnvironment: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.getRuntimeEnvironment),\n/* harmony export */   isBrowser: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.isBrowser),\n/* harmony export */   isDeno: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.isDeno),\n/* harmony export */   isJsDom: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.isJsDom),\n/* harmony export */   isNode: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.isNode),\n/* harmony export */   isWebWorker: () => (/* reexport safe */ _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__.isWebWorker)\n/* harmony export */ });\n/* harmony import */ var _dist_utils_env_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/utils/env.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/env.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3V0aWxzL2Vudi5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBb0MiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1mb3JtLWJ1aWxkZXItdHV0b3JpYWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3V0aWxzL2Vudi5qcz80NjcxIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCAqIGZyb20gJy4uL2Rpc3QvdXRpbHMvZW52LmpzJyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/utils/env.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/utils/function_calling.js":
/*!****************************************************************!*\
  !*** ./node_modules/@langchain/core/utils/function_calling.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   convertToOpenAIFunction: () => (/* reexport safe */ _dist_utils_function_calling_js__WEBPACK_IMPORTED_MODULE_0__.convertToOpenAIFunction),\n/* harmony export */   convertToOpenAITool: () => (/* reexport safe */ _dist_utils_function_calling_js__WEBPACK_IMPORTED_MODULE_0__.convertToOpenAITool)\n/* harmony export */ });\n/* harmony import */ var _dist_utils_function_calling_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/utils/function_calling.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/function_calling.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3V0aWxzL2Z1bmN0aW9uX2NhbGxpbmcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWlEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS91dGlscy9mdW5jdGlvbl9jYWxsaW5nLmpzPzhjODkiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi4vZGlzdC91dGlscy9mdW5jdGlvbl9jYWxsaW5nLmpzJyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/utils/function_calling.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/utils/json_patch.js":
/*!**********************************************************!*\
  !*** ./node_modules/@langchain/core/utils/json_patch.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   applyPatch: () => (/* reexport safe */ _dist_utils_json_patch_js__WEBPACK_IMPORTED_MODULE_0__.applyPatch),\n/* harmony export */   compare: () => (/* reexport safe */ _dist_utils_json_patch_js__WEBPACK_IMPORTED_MODULE_0__.compare)\n/* harmony export */ });\n/* harmony import */ var _dist_utils_json_patch_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/utils/json_patch.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/json_patch.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3V0aWxzL2pzb25fcGF0Y2guanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTJDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vY29yZS91dGlscy9qc29uX3BhdGNoLmpzPzRiM2MiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi4vZGlzdC91dGlscy9qc29uX3BhdGNoLmpzJyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/utils/json_patch.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/core/utils/tiktoken.js":
/*!********************************************************!*\
  !*** ./node_modules/@langchain/core/utils/tiktoken.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   encodingForModel: () => (/* reexport safe */ _dist_utils_tiktoken_js__WEBPACK_IMPORTED_MODULE_0__.encodingForModel),\n/* harmony export */   getEncoding: () => (/* reexport safe */ _dist_utils_tiktoken_js__WEBPACK_IMPORTED_MODULE_0__.getEncoding)\n/* harmony export */ });\n/* harmony import */ var _dist_utils_tiktoken_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/utils/tiktoken.js */ \"(rsc)/./node_modules/@langchain/core/dist/utils/tiktoken.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9jb3JlL3V0aWxzL3Rpa3Rva2VuLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUF5QyIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLWZvcm0tYnVpbGRlci10dXRvcmlhbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL2NvcmUvdXRpbHMvdGlrdG9rZW4uanM/YzQ4YSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuLi9kaXN0L3V0aWxzL3Rpa3Rva2VuLmpzJyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/core/utils/tiktoken.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/openai/dist/azure/chat_models.js":
/*!******************************************************************!*\
  !*** ./node_modules/@langchain/openai/dist/azure/chat_models.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AzureChatOpenAI: () => (/* binding */ AzureChatOpenAI)\n/* harmony export */ });\n/* harmony import */ var _chat_models_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../chat_models.js */ \"(rsc)/./node_modules/@langchain/openai/dist/chat_models.js\");\n\nclass AzureChatOpenAI extends _chat_models_js__WEBPACK_IMPORTED_MODULE_0__.ChatOpenAI {\n    _llmType() {\n        return \"azure_openai\";\n    }\n    get lc_aliases() {\n        return {\n            openAIApiKey: \"openai_api_key\",\n            openAIApiVersion: \"openai_api_version\",\n            openAIBasePath: \"openai_api_base\"\n        };\n    }\n    constructor(fields){\n        // assume the base URL does not contain \"openai\" nor \"deployments\" prefix\n        let basePath = fields?.openAIBasePath ?? \"\";\n        if (!basePath.endsWith(\"/\")) basePath += \"/\";\n        if (!basePath.endsWith(\"openai/deployments\")) basePath += \"openai/deployments\";\n        const newFields = fields ? {\n            ...fields\n        } : fields;\n        if (newFields) {\n            newFields.azureOpenAIBasePath = basePath;\n            newFields.azureOpenAIApiDeploymentName = newFields.deploymentName;\n            newFields.azureOpenAIApiKey = newFields.openAIApiKey;\n            newFields.azureOpenAIApiVersion = newFields.openAIApiVersion;\n        }\n        super(newFields);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    toJSON() {\n        const json = super.toJSON();\n        function isRecord(obj) {\n            return typeof obj === \"object\" && obj != null;\n        }\n        if (isRecord(json) && isRecord(json.kwargs)) {\n            delete json.kwargs.azure_openai_base_path;\n            delete json.kwargs.azure_openai_api_deployment_name;\n            delete json.kwargs.azure_openai_api_key;\n            delete json.kwargs.azure_openai_api_version;\n            delete json.kwargs.azure_open_ai_base_path;\n        }\n        return json;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvZGlzdC9henVyZS9jaGF0X21vZGVscy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUErQztBQUN4QyxNQUFNQyx3QkFBd0JELHVEQUFVQTtJQUMzQ0UsV0FBVztRQUNQLE9BQU87SUFDWDtJQUNBLElBQUlDLGFBQWE7UUFDYixPQUFPO1lBQ0hDLGNBQWM7WUFDZEMsa0JBQWtCO1lBQ2xCQyxnQkFBZ0I7UUFDcEI7SUFDSjtJQUNBQyxZQUFZQyxNQUFNLENBQUU7UUFDaEIseUVBQXlFO1FBQ3pFLElBQUlDLFdBQVdELFFBQVFGLGtCQUFrQjtRQUN6QyxJQUFJLENBQUNHLFNBQVNDLFFBQVEsQ0FBQyxNQUNuQkQsWUFBWTtRQUNoQixJQUFJLENBQUNBLFNBQVNDLFFBQVEsQ0FBQyx1QkFDbkJELFlBQVk7UUFDaEIsTUFBTUUsWUFBWUgsU0FBUztZQUFFLEdBQUdBLE1BQU07UUFBQyxJQUFJQTtRQUMzQyxJQUFJRyxXQUFXO1lBQ1hBLFVBQVVDLG1CQUFtQixHQUFHSDtZQUNoQ0UsVUFBVUUsNEJBQTRCLEdBQUdGLFVBQVVHLGNBQWM7WUFDakVILFVBQVVJLGlCQUFpQixHQUFHSixVQUFVUCxZQUFZO1lBQ3BETyxVQUFVSyxxQkFBcUIsR0FBR0wsVUFBVU4sZ0JBQWdCO1FBQ2hFO1FBQ0EsS0FBSyxDQUFDTTtJQUNWO0lBQ0EsOERBQThEO0lBQzlETSxTQUFTO1FBQ0wsTUFBTUMsT0FBTyxLQUFLLENBQUNEO1FBQ25CLFNBQVNFLFNBQVNDLEdBQUc7WUFDakIsT0FBTyxPQUFPQSxRQUFRLFlBQVlBLE9BQU87UUFDN0M7UUFDQSxJQUFJRCxTQUFTRCxTQUFTQyxTQUFTRCxLQUFLRyxNQUFNLEdBQUc7WUFDekMsT0FBT0gsS0FBS0csTUFBTSxDQUFDQyxzQkFBc0I7WUFDekMsT0FBT0osS0FBS0csTUFBTSxDQUFDRSxnQ0FBZ0M7WUFDbkQsT0FBT0wsS0FBS0csTUFBTSxDQUFDRyxvQkFBb0I7WUFDdkMsT0FBT04sS0FBS0csTUFBTSxDQUFDSSx3QkFBd0I7WUFDM0MsT0FBT1AsS0FBS0csTUFBTSxDQUFDSyx1QkFBdUI7UUFDOUM7UUFDQSxPQUFPUjtJQUNYO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1mb3JtLWJ1aWxkZXItdHV0b3JpYWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvZGlzdC9henVyZS9jaGF0X21vZGVscy5qcz9iMzYzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENoYXRPcGVuQUkgfSBmcm9tIFwiLi4vY2hhdF9tb2RlbHMuanNcIjtcbmV4cG9ydCBjbGFzcyBBenVyZUNoYXRPcGVuQUkgZXh0ZW5kcyBDaGF0T3BlbkFJIHtcbiAgICBfbGxtVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiYXp1cmVfb3BlbmFpXCI7XG4gICAgfVxuICAgIGdldCBsY19hbGlhc2VzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb3BlbkFJQXBpS2V5OiBcIm9wZW5haV9hcGlfa2V5XCIsXG4gICAgICAgICAgICBvcGVuQUlBcGlWZXJzaW9uOiBcIm9wZW5haV9hcGlfdmVyc2lvblwiLFxuICAgICAgICAgICAgb3BlbkFJQmFzZVBhdGg6IFwib3BlbmFpX2FwaV9iYXNlXCIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcykge1xuICAgICAgICAvLyBhc3N1bWUgdGhlIGJhc2UgVVJMIGRvZXMgbm90IGNvbnRhaW4gXCJvcGVuYWlcIiBub3IgXCJkZXBsb3ltZW50c1wiIHByZWZpeFxuICAgICAgICBsZXQgYmFzZVBhdGggPSBmaWVsZHM/Lm9wZW5BSUJhc2VQYXRoID8/IFwiXCI7XG4gICAgICAgIGlmICghYmFzZVBhdGguZW5kc1dpdGgoXCIvXCIpKVxuICAgICAgICAgICAgYmFzZVBhdGggKz0gXCIvXCI7XG4gICAgICAgIGlmICghYmFzZVBhdGguZW5kc1dpdGgoXCJvcGVuYWkvZGVwbG95bWVudHNcIikpXG4gICAgICAgICAgICBiYXNlUGF0aCArPSBcIm9wZW5haS9kZXBsb3ltZW50c1wiO1xuICAgICAgICBjb25zdCBuZXdGaWVsZHMgPSBmaWVsZHMgPyB7IC4uLmZpZWxkcyB9IDogZmllbGRzO1xuICAgICAgICBpZiAobmV3RmllbGRzKSB7XG4gICAgICAgICAgICBuZXdGaWVsZHMuYXp1cmVPcGVuQUlCYXNlUGF0aCA9IGJhc2VQYXRoO1xuICAgICAgICAgICAgbmV3RmllbGRzLmF6dXJlT3BlbkFJQXBpRGVwbG95bWVudE5hbWUgPSBuZXdGaWVsZHMuZGVwbG95bWVudE5hbWU7XG4gICAgICAgICAgICBuZXdGaWVsZHMuYXp1cmVPcGVuQUlBcGlLZXkgPSBuZXdGaWVsZHMub3BlbkFJQXBpS2V5O1xuICAgICAgICAgICAgbmV3RmllbGRzLmF6dXJlT3BlbkFJQXBpVmVyc2lvbiA9IG5ld0ZpZWxkcy5vcGVuQUlBcGlWZXJzaW9uO1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyKG5ld0ZpZWxkcyk7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgdG9KU09OKCkge1xuICAgICAgICBjb25zdCBqc29uID0gc3VwZXIudG9KU09OKCk7XG4gICAgICAgIGZ1bmN0aW9uIGlzUmVjb3JkKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBvYmogPT09IFwib2JqZWN0XCIgJiYgb2JqICE9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzUmVjb3JkKGpzb24pICYmIGlzUmVjb3JkKGpzb24ua3dhcmdzKSkge1xuICAgICAgICAgICAgZGVsZXRlIGpzb24ua3dhcmdzLmF6dXJlX29wZW5haV9iYXNlX3BhdGg7XG4gICAgICAgICAgICBkZWxldGUganNvbi5rd2FyZ3MuYXp1cmVfb3BlbmFpX2FwaV9kZXBsb3ltZW50X25hbWU7XG4gICAgICAgICAgICBkZWxldGUganNvbi5rd2FyZ3MuYXp1cmVfb3BlbmFpX2FwaV9rZXk7XG4gICAgICAgICAgICBkZWxldGUganNvbi5rd2FyZ3MuYXp1cmVfb3BlbmFpX2FwaV92ZXJzaW9uO1xuICAgICAgICAgICAgZGVsZXRlIGpzb24ua3dhcmdzLmF6dXJlX29wZW5fYWlfYmFzZV9wYXRoO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBqc29uO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJDaGF0T3BlbkFJIiwiQXp1cmVDaGF0T3BlbkFJIiwiX2xsbVR5cGUiLCJsY19hbGlhc2VzIiwib3BlbkFJQXBpS2V5Iiwib3BlbkFJQXBpVmVyc2lvbiIsIm9wZW5BSUJhc2VQYXRoIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJiYXNlUGF0aCIsImVuZHNXaXRoIiwibmV3RmllbGRzIiwiYXp1cmVPcGVuQUlCYXNlUGF0aCIsImF6dXJlT3BlbkFJQXBpRGVwbG95bWVudE5hbWUiLCJkZXBsb3ltZW50TmFtZSIsImF6dXJlT3BlbkFJQXBpS2V5IiwiYXp1cmVPcGVuQUlBcGlWZXJzaW9uIiwidG9KU09OIiwianNvbiIsImlzUmVjb3JkIiwib2JqIiwia3dhcmdzIiwiYXp1cmVfb3BlbmFpX2Jhc2VfcGF0aCIsImF6dXJlX29wZW5haV9hcGlfZGVwbG95bWVudF9uYW1lIiwiYXp1cmVfb3BlbmFpX2FwaV9rZXkiLCJhenVyZV9vcGVuYWlfYXBpX3ZlcnNpb24iLCJhenVyZV9vcGVuX2FpX2Jhc2VfcGF0aCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/openai/dist/azure/chat_models.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/openai/dist/azure/llms.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/openai/dist/azure/llms.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AzureOpenAI: () => (/* binding */ AzureOpenAI)\n/* harmony export */ });\n/* harmony import */ var _llms_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../llms.js */ \"(rsc)/./node_modules/@langchain/openai/dist/llms.js\");\n\nclass AzureOpenAI extends _llms_js__WEBPACK_IMPORTED_MODULE_0__.OpenAI {\n    get lc_aliases() {\n        return {\n            openAIApiKey: \"openai_api_key\",\n            openAIApiVersion: \"openai_api_version\",\n            openAIBasePath: \"openai_api_base\"\n        };\n    }\n    constructor(fields){\n        // assume the base URL does not contain \"openai\" nor \"deployments\" prefix\n        let basePath = fields?.openAIBasePath ?? \"\";\n        if (!basePath.endsWith(\"/\")) basePath += \"/\";\n        if (!basePath.endsWith(\"openai/deployments\")) basePath += \"openai/deployments\";\n        const newFields = fields ? {\n            ...fields\n        } : fields;\n        if (newFields) {\n            newFields.azureOpenAIBasePath = basePath;\n            newFields.azureOpenAIApiDeploymentName = newFields.deploymentName;\n            newFields.azureOpenAIApiKey = newFields.openAIApiKey;\n            newFields.azureOpenAIApiVersion = newFields.openAIApiVersion;\n        }\n        super(newFields);\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    toJSON() {\n        const json = super.toJSON();\n        function isRecord(obj) {\n            return typeof obj === \"object\" && obj != null;\n        }\n        if (isRecord(json) && isRecord(json.kwargs)) {\n            delete json.kwargs.azure_openai_base_path;\n            delete json.kwargs.azure_openai_api_deployment_name;\n            delete json.kwargs.azure_openai_api_key;\n            delete json.kwargs.azure_openai_api_version;\n            delete json.kwargs.azure_open_ai_base_path;\n        }\n        return json;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvZGlzdC9henVyZS9sbG1zLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQW9DO0FBQzdCLE1BQU1DLG9CQUFvQkQsNENBQU1BO0lBQ25DLElBQUlFLGFBQWE7UUFDYixPQUFPO1lBQ0hDLGNBQWM7WUFDZEMsa0JBQWtCO1lBQ2xCQyxnQkFBZ0I7UUFDcEI7SUFDSjtJQUNBQyxZQUFZQyxNQUFNLENBQUU7UUFDaEIseUVBQXlFO1FBQ3pFLElBQUlDLFdBQVdELFFBQVFGLGtCQUFrQjtRQUN6QyxJQUFJLENBQUNHLFNBQVNDLFFBQVEsQ0FBQyxNQUNuQkQsWUFBWTtRQUNoQixJQUFJLENBQUNBLFNBQVNDLFFBQVEsQ0FBQyx1QkFDbkJELFlBQVk7UUFDaEIsTUFBTUUsWUFBWUgsU0FBUztZQUFFLEdBQUdBLE1BQU07UUFBQyxJQUFJQTtRQUMzQyxJQUFJRyxXQUFXO1lBQ1hBLFVBQVVDLG1CQUFtQixHQUFHSDtZQUNoQ0UsVUFBVUUsNEJBQTRCLEdBQUdGLFVBQVVHLGNBQWM7WUFDakVILFVBQVVJLGlCQUFpQixHQUFHSixVQUFVUCxZQUFZO1lBQ3BETyxVQUFVSyxxQkFBcUIsR0FBR0wsVUFBVU4sZ0JBQWdCO1FBQ2hFO1FBQ0EsS0FBSyxDQUFDTTtJQUNWO0lBQ0EsOERBQThEO0lBQzlETSxTQUFTO1FBQ0wsTUFBTUMsT0FBTyxLQUFLLENBQUNEO1FBQ25CLFNBQVNFLFNBQVNDLEdBQUc7WUFDakIsT0FBTyxPQUFPQSxRQUFRLFlBQVlBLE9BQU87UUFDN0M7UUFDQSxJQUFJRCxTQUFTRCxTQUFTQyxTQUFTRCxLQUFLRyxNQUFNLEdBQUc7WUFDekMsT0FBT0gsS0FBS0csTUFBTSxDQUFDQyxzQkFBc0I7WUFDekMsT0FBT0osS0FBS0csTUFBTSxDQUFDRSxnQ0FBZ0M7WUFDbkQsT0FBT0wsS0FBS0csTUFBTSxDQUFDRyxvQkFBb0I7WUFDdkMsT0FBT04sS0FBS0csTUFBTSxDQUFDSSx3QkFBd0I7WUFDM0MsT0FBT1AsS0FBS0csTUFBTSxDQUFDSyx1QkFBdUI7UUFDOUM7UUFDQSxPQUFPUjtJQUNYO0FBQ0oiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1mb3JtLWJ1aWxkZXItdHV0b3JpYWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvZGlzdC9henVyZS9sbG1zLmpzP2E4ZTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgT3BlbkFJIH0gZnJvbSBcIi4uL2xsbXMuanNcIjtcbmV4cG9ydCBjbGFzcyBBenVyZU9wZW5BSSBleHRlbmRzIE9wZW5BSSB7XG4gICAgZ2V0IGxjX2FsaWFzZXMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvcGVuQUlBcGlLZXk6IFwib3BlbmFpX2FwaV9rZXlcIixcbiAgICAgICAgICAgIG9wZW5BSUFwaVZlcnNpb246IFwib3BlbmFpX2FwaV92ZXJzaW9uXCIsXG4gICAgICAgICAgICBvcGVuQUlCYXNlUGF0aDogXCJvcGVuYWlfYXBpX2Jhc2VcIixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzKSB7XG4gICAgICAgIC8vIGFzc3VtZSB0aGUgYmFzZSBVUkwgZG9lcyBub3QgY29udGFpbiBcIm9wZW5haVwiIG5vciBcImRlcGxveW1lbnRzXCIgcHJlZml4XG4gICAgICAgIGxldCBiYXNlUGF0aCA9IGZpZWxkcz8ub3BlbkFJQmFzZVBhdGggPz8gXCJcIjtcbiAgICAgICAgaWYgKCFiYXNlUGF0aC5lbmRzV2l0aChcIi9cIikpXG4gICAgICAgICAgICBiYXNlUGF0aCArPSBcIi9cIjtcbiAgICAgICAgaWYgKCFiYXNlUGF0aC5lbmRzV2l0aChcIm9wZW5haS9kZXBsb3ltZW50c1wiKSlcbiAgICAgICAgICAgIGJhc2VQYXRoICs9IFwib3BlbmFpL2RlcGxveW1lbnRzXCI7XG4gICAgICAgIGNvbnN0IG5ld0ZpZWxkcyA9IGZpZWxkcyA/IHsgLi4uZmllbGRzIH0gOiBmaWVsZHM7XG4gICAgICAgIGlmIChuZXdGaWVsZHMpIHtcbiAgICAgICAgICAgIG5ld0ZpZWxkcy5henVyZU9wZW5BSUJhc2VQYXRoID0gYmFzZVBhdGg7XG4gICAgICAgICAgICBuZXdGaWVsZHMuYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZSA9IG5ld0ZpZWxkcy5kZXBsb3ltZW50TmFtZTtcbiAgICAgICAgICAgIG5ld0ZpZWxkcy5henVyZU9wZW5BSUFwaUtleSA9IG5ld0ZpZWxkcy5vcGVuQUlBcGlLZXk7XG4gICAgICAgICAgICBuZXdGaWVsZHMuYXp1cmVPcGVuQUlBcGlWZXJzaW9uID0gbmV3RmllbGRzLm9wZW5BSUFwaVZlcnNpb247XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIobmV3RmllbGRzKTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICB0b0pTT04oKSB7XG4gICAgICAgIGNvbnN0IGpzb24gPSBzdXBlci50b0pTT04oKTtcbiAgICAgICAgZnVuY3Rpb24gaXNSZWNvcmQob2JqKSB7XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiAmJiBvYmogIT0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNSZWNvcmQoanNvbikgJiYgaXNSZWNvcmQoanNvbi5rd2FyZ3MpKSB7XG4gICAgICAgICAgICBkZWxldGUganNvbi5rd2FyZ3MuYXp1cmVfb3BlbmFpX2Jhc2VfcGF0aDtcbiAgICAgICAgICAgIGRlbGV0ZSBqc29uLmt3YXJncy5henVyZV9vcGVuYWlfYXBpX2RlcGxveW1lbnRfbmFtZTtcbiAgICAgICAgICAgIGRlbGV0ZSBqc29uLmt3YXJncy5henVyZV9vcGVuYWlfYXBpX2tleTtcbiAgICAgICAgICAgIGRlbGV0ZSBqc29uLmt3YXJncy5henVyZV9vcGVuYWlfYXBpX3ZlcnNpb247XG4gICAgICAgICAgICBkZWxldGUganNvbi5rd2FyZ3MuYXp1cmVfb3Blbl9haV9iYXNlX3BhdGg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGpzb247XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIk9wZW5BSSIsIkF6dXJlT3BlbkFJIiwibGNfYWxpYXNlcyIsIm9wZW5BSUFwaUtleSIsIm9wZW5BSUFwaVZlcnNpb24iLCJvcGVuQUlCYXNlUGF0aCIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwiYmFzZVBhdGgiLCJlbmRzV2l0aCIsIm5ld0ZpZWxkcyIsImF6dXJlT3BlbkFJQmFzZVBhdGgiLCJhenVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lIiwiZGVwbG95bWVudE5hbWUiLCJhenVyZU9wZW5BSUFwaUtleSIsImF6dXJlT3BlbkFJQXBpVmVyc2lvbiIsInRvSlNPTiIsImpzb24iLCJpc1JlY29yZCIsIm9iaiIsImt3YXJncyIsImF6dXJlX29wZW5haV9iYXNlX3BhdGgiLCJhenVyZV9vcGVuYWlfYXBpX2RlcGxveW1lbnRfbmFtZSIsImF6dXJlX29wZW5haV9hcGlfa2V5IiwiYXp1cmVfb3BlbmFpX2FwaV92ZXJzaW9uIiwiYXp1cmVfb3Blbl9haV9iYXNlX3BhdGgiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/openai/dist/azure/llms.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/openai/dist/chat_models.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/openai/dist/chat_models.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ChatOpenAI: () => (/* binding */ ChatOpenAI),\n/* harmony export */   messageToOpenAIRole: () => (/* binding */ messageToOpenAIRole)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/messages */ \"(rsc)/./node_modules/@langchain/core/messages.js\");\n/* harmony import */ var _langchain_core_outputs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/outputs */ \"(rsc)/./node_modules/@langchain/core/outputs.js\");\n/* harmony import */ var _langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @langchain/core/utils/env */ \"(rsc)/./node_modules/@langchain/core/utils/env.js\");\n/* harmony import */ var _langchain_core_language_models_chat_models__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @langchain/core/language_models/chat_models */ \"(rsc)/./node_modules/@langchain/core/language_models/chat_models.js\");\n/* harmony import */ var _langchain_core_utils_function_calling__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @langchain/core/utils/function_calling */ \"(rsc)/./node_modules/@langchain/core/utils/function_calling.js\");\n/* harmony import */ var _utils_azure_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils/azure.js */ \"(rsc)/./node_modules/@langchain/openai/dist/utils/azure.js\");\n/* harmony import */ var _utils_openai_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./utils/openai.js */ \"(rsc)/./node_modules/@langchain/openai/dist/utils/openai.js\");\n/* harmony import */ var _utils_openai_format_fndef_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utils/openai-format-fndef.js */ \"(rsc)/./node_modules/@langchain/openai/dist/utils/openai-format-fndef.js\");\n\n\n\n\n\n\n\n\n\nfunction extractGenericMessageCustomRole(message) {\n    if (message.role !== \"system\" && message.role !== \"assistant\" && message.role !== \"user\" && message.role !== \"function\" && message.role !== \"tool\") {\n        console.warn(`Unknown message role: ${message.role}`);\n    }\n    return message.role;\n}\nfunction messageToOpenAIRole(message) {\n    const type = message._getType();\n    switch(type){\n        case \"system\":\n            return \"system\";\n        case \"ai\":\n            return \"assistant\";\n        case \"human\":\n            return \"user\";\n        case \"function\":\n            return \"function\";\n        case \"tool\":\n            return \"tool\";\n        case \"generic\":\n            {\n                if (!_langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.ChatMessage.isInstance(message)) throw new Error(\"Invalid generic chat message\");\n                return extractGenericMessageCustomRole(message);\n            }\n        default:\n            throw new Error(`Unknown message type: ${type}`);\n    }\n}\nfunction openAIResponseToChatMessage(message) {\n    switch(message.role){\n        case \"assistant\":\n            return new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.AIMessage(message.content || \"\", {\n                function_call: message.function_call,\n                tool_calls: message.tool_calls\n            });\n        default:\n            return new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.ChatMessage(message.content || \"\", message.role ?? \"unknown\");\n    }\n}\nfunction _convertDeltaToMessageChunk(// eslint-disable-next-line @typescript-eslint/no-explicit-any\ndelta, defaultRole) {\n    const role = delta.role ?? defaultRole;\n    const content = delta.content ?? \"\";\n    let additional_kwargs;\n    if (delta.function_call) {\n        additional_kwargs = {\n            function_call: delta.function_call\n        };\n    } else if (delta.tool_calls) {\n        additional_kwargs = {\n            tool_calls: delta.tool_calls\n        };\n    } else {\n        additional_kwargs = {};\n    }\n    if (role === \"user\") {\n        return new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.HumanMessageChunk({\n            content\n        });\n    } else if (role === \"assistant\") {\n        return new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.AIMessageChunk({\n            content,\n            additional_kwargs\n        });\n    } else if (role === \"system\") {\n        return new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.SystemMessageChunk({\n            content\n        });\n    } else if (role === \"function\") {\n        return new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.FunctionMessageChunk({\n            content,\n            additional_kwargs,\n            name: delta.name\n        });\n    } else if (role === \"tool\") {\n        return new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.ToolMessageChunk({\n            content,\n            additional_kwargs,\n            tool_call_id: delta.tool_call_id\n        });\n    } else {\n        return new _langchain_core_messages__WEBPACK_IMPORTED_MODULE_0__.ChatMessageChunk({\n            content,\n            role\n        });\n    }\n}\nfunction convertMessagesToOpenAIParams(messages) {\n    // TODO: Function messages do not support array content, fix cast\n    return messages.map((message)=>({\n            role: messageToOpenAIRole(message),\n            content: message.content,\n            name: message.name,\n            function_call: message.additional_kwargs.function_call,\n            tool_calls: message.additional_kwargs.tool_calls,\n            tool_call_id: message.tool_call_id\n        }));\n}\n/**\n * Wrapper around OpenAI large language models that use the Chat endpoint.\n *\n * To use you should have the `openai` package installed, with the\n * `OPENAI_API_KEY` environment variable set.\n *\n * To use with Azure you should have the `openai` package installed, with the\n * `AZURE_OPENAI_API_KEY`,\n * `AZURE_OPENAI_API_INSTANCE_NAME`,\n * `AZURE_OPENAI_API_DEPLOYMENT_NAME`\n * and `AZURE_OPENAI_API_VERSION` environment variable set.\n * `AZURE_OPENAI_BASE_PATH` is optional and will override `AZURE_OPENAI_API_INSTANCE_NAME` if you need to use a custom endpoint.\n *\n * @remarks\n * Any parameters that are valid to be passed to {@link\n * https://platform.openai.com/docs/api-reference/chat/create |\n * `openai.createChatCompletion`} can be passed through {@link modelKwargs}, even\n * if not explicitly available on this class.\n * @example\n * ```typescript\n * // Create a new instance of ChatOpenAI with specific temperature and model name settings\n * const model = new ChatOpenAI({\n *   temperature: 0.9,\n *   modelName: \"ft:gpt-3.5-turbo-0613:{ORG_NAME}::{MODEL_ID}\",\n * });\n *\n * // Invoke the model with a message and await the response\n * const message = await model.invoke(\"Hi there!\");\n *\n * // Log the response to the console\n * console.log(message);\n *\n * ```\n */ class ChatOpenAI extends _langchain_core_language_models_chat_models__WEBPACK_IMPORTED_MODULE_3__.BaseChatModel {\n    static lc_name() {\n        return \"ChatOpenAI\";\n    }\n    get callKeys() {\n        return [\n            ...super.callKeys,\n            \"options\",\n            \"function_call\",\n            \"functions\",\n            \"tools\",\n            \"tool_choice\",\n            \"promptIndex\",\n            \"response_format\",\n            \"seed\"\n        ];\n    }\n    get lc_secrets() {\n        return {\n            openAIApiKey: \"OPENAI_API_KEY\",\n            azureOpenAIApiKey: \"AZURE_OPENAI_API_KEY\",\n            organization: \"OPENAI_ORGANIZATION\"\n        };\n    }\n    get lc_aliases() {\n        return {\n            modelName: \"model\",\n            openAIApiKey: \"openai_api_key\",\n            azureOpenAIApiVersion: \"azure_openai_api_version\",\n            azureOpenAIApiKey: \"azure_openai_api_key\",\n            azureOpenAIApiInstanceName: \"azure_openai_api_instance_name\",\n            azureOpenAIApiDeploymentName: \"azure_openai_api_deployment_name\"\n        };\n    }\n    constructor(fields, /** @deprecated */ configuration){\n        super(fields ?? {});\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"temperature\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 1\n        });\n        Object.defineProperty(this, \"topP\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 1\n        });\n        Object.defineProperty(this, \"frequencyPenalty\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 0\n        });\n        Object.defineProperty(this, \"presencePenalty\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 0\n        });\n        Object.defineProperty(this, \"n\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 1\n        });\n        Object.defineProperty(this, \"logitBias\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"modelName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"gpt-3.5-turbo\"\n        });\n        Object.defineProperty(this, \"modelKwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"stop\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"user\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"timeout\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"streaming\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"maxTokens\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"logprobs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"topLogprobs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"openAIApiKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiVersion\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiInstanceName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiDeploymentName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIBasePath\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"organization\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"client\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"clientConfig\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.openAIApiKey = fields?.openAIApiKey ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_2__.getEnvironmentVariable)(\"OPENAI_API_KEY\");\n        this.azureOpenAIApiKey = fields?.azureOpenAIApiKey ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_2__.getEnvironmentVariable)(\"AZURE_OPENAI_API_KEY\");\n        if (!this.azureOpenAIApiKey && !this.openAIApiKey) {\n            throw new Error(\"OpenAI or Azure OpenAI API key not found\");\n        }\n        this.azureOpenAIApiInstanceName = fields?.azureOpenAIApiInstanceName ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_2__.getEnvironmentVariable)(\"AZURE_OPENAI_API_INSTANCE_NAME\");\n        this.azureOpenAIApiDeploymentName = fields?.azureOpenAIApiDeploymentName ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_2__.getEnvironmentVariable)(\"AZURE_OPENAI_API_DEPLOYMENT_NAME\");\n        this.azureOpenAIApiVersion = fields?.azureOpenAIApiVersion ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_2__.getEnvironmentVariable)(\"AZURE_OPENAI_API_VERSION\");\n        this.azureOpenAIBasePath = fields?.azureOpenAIBasePath ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_2__.getEnvironmentVariable)(\"AZURE_OPENAI_BASE_PATH\");\n        this.organization = fields?.configuration?.organization ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_2__.getEnvironmentVariable)(\"OPENAI_ORGANIZATION\");\n        this.modelName = fields?.modelName ?? this.modelName;\n        this.modelKwargs = fields?.modelKwargs ?? {};\n        this.timeout = fields?.timeout;\n        this.temperature = fields?.temperature ?? this.temperature;\n        this.topP = fields?.topP ?? this.topP;\n        this.frequencyPenalty = fields?.frequencyPenalty ?? this.frequencyPenalty;\n        this.presencePenalty = fields?.presencePenalty ?? this.presencePenalty;\n        this.maxTokens = fields?.maxTokens;\n        this.logprobs = fields?.logprobs;\n        this.topLogprobs = fields?.topLogprobs;\n        this.n = fields?.n ?? this.n;\n        this.logitBias = fields?.logitBias;\n        this.stop = fields?.stop;\n        this.user = fields?.user;\n        this.streaming = fields?.streaming ?? false;\n        if (this.azureOpenAIApiKey) {\n            if (!this.azureOpenAIApiInstanceName && !this.azureOpenAIBasePath) {\n                throw new Error(\"Azure OpenAI API instance name not found\");\n            }\n            if (!this.azureOpenAIApiDeploymentName) {\n                throw new Error(\"Azure OpenAI API deployment name not found\");\n            }\n            if (!this.azureOpenAIApiVersion) {\n                throw new Error(\"Azure OpenAI API version not found\");\n            }\n            this.openAIApiKey = this.openAIApiKey ?? \"\";\n        }\n        this.clientConfig = {\n            apiKey: this.openAIApiKey,\n            organization: this.organization,\n            baseURL: configuration?.basePath ?? fields?.configuration?.basePath,\n            dangerouslyAllowBrowser: true,\n            defaultHeaders: configuration?.baseOptions?.headers ?? fields?.configuration?.baseOptions?.headers,\n            defaultQuery: configuration?.baseOptions?.params ?? fields?.configuration?.baseOptions?.params,\n            ...configuration,\n            ...fields?.configuration\n        };\n    }\n    /**\n     * Get the parameters used to invoke the model\n     */ invocationParams(options) {\n        function isStructuredToolArray(tools) {\n            return tools !== undefined && tools.every((tool)=>Array.isArray(tool.lc_namespace));\n        }\n        const params = {\n            model: this.modelName,\n            temperature: this.temperature,\n            top_p: this.topP,\n            frequency_penalty: this.frequencyPenalty,\n            presence_penalty: this.presencePenalty,\n            max_tokens: this.maxTokens === -1 ? undefined : this.maxTokens,\n            logprobs: this.logprobs,\n            top_logprobs: this.topLogprobs,\n            n: this.n,\n            logit_bias: this.logitBias,\n            stop: options?.stop ?? this.stop,\n            user: this.user,\n            stream: this.streaming,\n            functions: options?.functions,\n            function_call: options?.function_call,\n            tools: isStructuredToolArray(options?.tools) ? options?.tools.map(_langchain_core_utils_function_calling__WEBPACK_IMPORTED_MODULE_4__.convertToOpenAITool) : options?.tools,\n            tool_choice: options?.tool_choice,\n            response_format: options?.response_format,\n            seed: options?.seed,\n            ...this.modelKwargs\n        };\n        return params;\n    }\n    /** @ignore */ _identifyingParams() {\n        return {\n            model_name: this.modelName,\n            ...this.invocationParams(),\n            ...this.clientConfig\n        };\n    }\n    async *_streamResponseChunks(messages, options, runManager) {\n        const messagesMapped = convertMessagesToOpenAIParams(messages);\n        const params = {\n            ...this.invocationParams(options),\n            messages: messagesMapped,\n            stream: true\n        };\n        let defaultRole;\n        const streamIterable = await this.completionWithRetry(params, options);\n        for await (const data of streamIterable){\n            const choice = data?.choices[0];\n            if (!choice) {\n                continue;\n            }\n            const { delta } = choice;\n            if (!delta) {\n                continue;\n            }\n            const chunk = _convertDeltaToMessageChunk(delta, defaultRole);\n            defaultRole = delta.role ?? defaultRole;\n            const newTokenIndices = {\n                prompt: options.promptIndex ?? 0,\n                completion: choice.index ?? 0\n            };\n            if (typeof chunk.content !== \"string\") {\n                console.log(\"[WARNING]: Received non-string content from OpenAI. This is currently not supported.\");\n                continue;\n            }\n            const generationChunk = new _langchain_core_outputs__WEBPACK_IMPORTED_MODULE_1__.ChatGenerationChunk({\n                message: chunk,\n                text: chunk.content,\n                generationInfo: newTokenIndices\n            });\n            yield generationChunk;\n            // eslint-disable-next-line no-void\n            void runManager?.handleLLMNewToken(generationChunk.text ?? \"\", newTokenIndices, undefined, undefined, undefined, {\n                chunk: generationChunk\n            });\n        }\n        if (options.signal?.aborted) {\n            throw new Error(\"AbortError\");\n        }\n    }\n    /**\n     * Get the identifying parameters for the model\n     *\n     */ identifyingParams() {\n        return this._identifyingParams();\n    }\n    /** @ignore */ async _generate(messages, options, runManager) {\n        const tokenUsage = {};\n        const params = this.invocationParams(options);\n        const messagesMapped = convertMessagesToOpenAIParams(messages);\n        if (params.stream) {\n            const stream = this._streamResponseChunks(messages, options, runManager);\n            const finalChunks = {};\n            for await (const chunk of stream){\n                const index = chunk.generationInfo?.completion ?? 0;\n                if (finalChunks[index] === undefined) {\n                    finalChunks[index] = chunk;\n                } else {\n                    finalChunks[index] = finalChunks[index].concat(chunk);\n                }\n            }\n            const generations = Object.entries(finalChunks).sort(([aKey], [bKey])=>parseInt(aKey, 10) - parseInt(bKey, 10)).map(([_, value])=>value);\n            const { functions, function_call } = this.invocationParams(options);\n            // OpenAI does not support token usage report under stream mode,\n            // fallback to estimation.\n            const promptTokenUsage = await this.getEstimatedTokenCountFromPrompt(messages, functions, function_call);\n            const completionTokenUsage = await this.getNumTokensFromGenerations(generations);\n            tokenUsage.promptTokens = promptTokenUsage;\n            tokenUsage.completionTokens = completionTokenUsage;\n            tokenUsage.totalTokens = promptTokenUsage + completionTokenUsage;\n            return {\n                generations,\n                llmOutput: {\n                    estimatedTokenUsage: tokenUsage\n                }\n            };\n        } else {\n            const data = await this.completionWithRetry({\n                ...params,\n                stream: false,\n                messages: messagesMapped\n            }, {\n                signal: options?.signal,\n                ...options?.options\n            });\n            const { completion_tokens: completionTokens, prompt_tokens: promptTokens, total_tokens: totalTokens } = data?.usage ?? {};\n            if (completionTokens) {\n                tokenUsage.completionTokens = (tokenUsage.completionTokens ?? 0) + completionTokens;\n            }\n            if (promptTokens) {\n                tokenUsage.promptTokens = (tokenUsage.promptTokens ?? 0) + promptTokens;\n            }\n            if (totalTokens) {\n                tokenUsage.totalTokens = (tokenUsage.totalTokens ?? 0) + totalTokens;\n            }\n            const generations = [];\n            for (const part of data?.choices ?? []){\n                const text = part.message?.content ?? \"\";\n                const generation = {\n                    text,\n                    message: openAIResponseToChatMessage(part.message ?? {\n                        role: \"assistant\"\n                    })\n                };\n                generation.generationInfo = {\n                    ...part.finish_reason ? {\n                        finish_reason: part.finish_reason\n                    } : {},\n                    ...part.logprobs ? {\n                        logprobs: part.logprobs\n                    } : {}\n                };\n                generations.push(generation);\n            }\n            return {\n                generations,\n                llmOutput: {\n                    tokenUsage\n                }\n            };\n        }\n    }\n    /**\n     * Estimate the number of tokens a prompt will use.\n     * Modified from: https://github.com/hmarr/openai-chat-tokens/blob/main/src/index.ts\n     */ async getEstimatedTokenCountFromPrompt(messages, functions, function_call) {\n        // It appears that if functions are present, the first system message is padded with a trailing newline. This\n        // was inferred by trying lots of combinations of messages and functions and seeing what the token counts were.\n        let tokens = (await this.getNumTokensFromMessages(messages)).totalCount;\n        // If there are functions, add the function definitions as they count towards token usage\n        if (functions && function_call !== \"auto\") {\n            const promptDefinitions = (0,_utils_openai_format_fndef_js__WEBPACK_IMPORTED_MODULE_7__.formatFunctionDefinitions)(functions);\n            tokens += await this.getNumTokens(promptDefinitions);\n            tokens += 9; // Add nine per completion\n        }\n        // If there's a system message _and_ functions are present, subtract four tokens. I assume this is because\n        // functions typically add a system message, but reuse the first one if it's already there. This offsets\n        // the extra 9 tokens added by the function definitions.\n        if (functions && messages.find((m)=>m._getType() === \"system\")) {\n            tokens -= 4;\n        }\n        // If function_call is 'none', add one token.\n        // If it's a FunctionCall object, add 4 + the number of tokens in the function name.\n        // If it's undefined or 'auto', don't add anything.\n        if (function_call === \"none\") {\n            tokens += 1;\n        } else if (typeof function_call === \"object\") {\n            tokens += await this.getNumTokens(function_call.name) + 4;\n        }\n        return tokens;\n    }\n    /**\n     * Estimate the number of tokens an array of generations have used.\n     */ async getNumTokensFromGenerations(generations) {\n        const generationUsages = await Promise.all(generations.map(async (generation)=>{\n            if (generation.message.additional_kwargs?.function_call) {\n                return (await this.getNumTokensFromMessages([\n                    generation.message\n                ])).countPerMessage[0];\n            } else {\n                return await this.getNumTokens(generation.message.content);\n            }\n        }));\n        return generationUsages.reduce((a, b)=>a + b, 0);\n    }\n    async getNumTokensFromMessages(messages) {\n        let totalCount = 0;\n        let tokensPerMessage = 0;\n        let tokensPerName = 0;\n        // From: https://github.com/openai/openai-cookbook/blob/main/examples/How_to_format_inputs_to_ChatGPT_models.ipynb\n        if (this.modelName === \"gpt-3.5-turbo-0301\") {\n            tokensPerMessage = 4;\n            tokensPerName = -1;\n        } else {\n            tokensPerMessage = 3;\n            tokensPerName = 1;\n        }\n        const countPerMessage = await Promise.all(messages.map(async (message)=>{\n            const textCount = await this.getNumTokens(message.content);\n            const roleCount = await this.getNumTokens(messageToOpenAIRole(message));\n            const nameCount = message.name !== undefined ? tokensPerName + await this.getNumTokens(message.name) : 0;\n            let count = textCount + tokensPerMessage + roleCount + nameCount;\n            // From: https://github.com/hmarr/openai-chat-tokens/blob/main/src/index.ts messageTokenEstimate\n            const openAIMessage = message;\n            if (openAIMessage._getType() === \"function\") {\n                count -= 2;\n            }\n            if (openAIMessage.additional_kwargs?.function_call) {\n                count += 3;\n            }\n            if (openAIMessage?.additional_kwargs.function_call?.name) {\n                count += await this.getNumTokens(openAIMessage.additional_kwargs.function_call?.name);\n            }\n            if (openAIMessage.additional_kwargs.function_call?.arguments) {\n                count += await this.getNumTokens(// Remove newlines and spaces\n                JSON.stringify(JSON.parse(openAIMessage.additional_kwargs.function_call?.arguments)));\n            }\n            totalCount += count;\n            return count;\n        }));\n        totalCount += 3; // every reply is primed with <|start|>assistant<|message|>\n        return {\n            totalCount,\n            countPerMessage\n        };\n    }\n    async completionWithRetry(request, options) {\n        const requestOptions = this._getClientOptions(options);\n        return this.caller.call(async ()=>{\n            try {\n                const res = await this.client.chat.completions.create(request, requestOptions);\n                return res;\n            } catch (e) {\n                const error = (0,_utils_openai_js__WEBPACK_IMPORTED_MODULE_6__.wrapOpenAIClientError)(e);\n                throw error;\n            }\n        });\n    }\n    _getClientOptions(options) {\n        if (!this.client) {\n            const openAIEndpointConfig = {\n                azureOpenAIApiDeploymentName: this.azureOpenAIApiDeploymentName,\n                azureOpenAIApiInstanceName: this.azureOpenAIApiInstanceName,\n                azureOpenAIApiKey: this.azureOpenAIApiKey,\n                azureOpenAIBasePath: this.azureOpenAIBasePath,\n                baseURL: this.clientConfig.baseURL\n            };\n            const endpoint = (0,_utils_azure_js__WEBPACK_IMPORTED_MODULE_5__.getEndpoint)(openAIEndpointConfig);\n            const params = {\n                ...this.clientConfig,\n                baseURL: endpoint,\n                timeout: this.timeout,\n                maxRetries: 0\n            };\n            if (!params.baseURL) {\n                delete params.baseURL;\n            }\n            this.client = new openai__WEBPACK_IMPORTED_MODULE_8__.OpenAI(params);\n        }\n        const requestOptions = {\n            ...this.clientConfig,\n            ...options\n        };\n        if (this.azureOpenAIApiKey) {\n            requestOptions.headers = {\n                \"api-key\": this.azureOpenAIApiKey,\n                ...requestOptions.headers\n            };\n            requestOptions.query = {\n                \"api-version\": this.azureOpenAIApiVersion,\n                ...requestOptions.query\n            };\n        }\n        return requestOptions;\n    }\n    _llmType() {\n        return \"openai\";\n    }\n    /** @ignore */ _combineLLMOutput(...llmOutputs) {\n        return llmOutputs.reduce((acc, llmOutput)=>{\n            if (llmOutput && llmOutput.tokenUsage) {\n                acc.tokenUsage.completionTokens += llmOutput.tokenUsage.completionTokens ?? 0;\n                acc.tokenUsage.promptTokens += llmOutput.tokenUsage.promptTokens ?? 0;\n                acc.tokenUsage.totalTokens += llmOutput.tokenUsage.totalTokens ?? 0;\n            }\n            return acc;\n        }, {\n            tokenUsage: {\n                completionTokens: 0,\n                promptTokens: 0,\n                totalTokens: 0\n            }\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvZGlzdC9jaGF0X21vZGVscy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFnRDtBQUNvSTtBQUNySDtBQUNJO0FBQ1U7QUFDQTtBQUM5QjtBQUNXO0FBQ2tCO0FBQzVFLFNBQVNpQixnQ0FBZ0NDLE9BQU87SUFDNUMsSUFBSUEsUUFBUUMsSUFBSSxLQUFLLFlBQ2pCRCxRQUFRQyxJQUFJLEtBQUssZUFDakJELFFBQVFDLElBQUksS0FBSyxVQUNqQkQsUUFBUUMsSUFBSSxLQUFLLGNBQ2pCRCxRQUFRQyxJQUFJLEtBQUssUUFBUTtRQUN6QkMsUUFBUUMsSUFBSSxDQUFDLENBQUMsc0JBQXNCLEVBQUVILFFBQVFDLElBQUksQ0FBQyxDQUFDO0lBQ3hEO0lBQ0EsT0FBT0QsUUFBUUMsSUFBSTtBQUN2QjtBQUNPLFNBQVNHLG9CQUFvQkosT0FBTztJQUN2QyxNQUFNSyxPQUFPTCxRQUFRTSxRQUFRO0lBQzdCLE9BQVFEO1FBQ0osS0FBSztZQUNELE9BQU87UUFDWCxLQUFLO1lBQ0QsT0FBTztRQUNYLEtBQUs7WUFDRCxPQUFPO1FBQ1gsS0FBSztZQUNELE9BQU87UUFDWCxLQUFLO1lBQ0QsT0FBTztRQUNYLEtBQUs7WUFBVztnQkFDWixJQUFJLENBQUNuQixpRUFBV0EsQ0FBQ3FCLFVBQVUsQ0FBQ1AsVUFDeEIsTUFBTSxJQUFJUSxNQUFNO2dCQUNwQixPQUFPVCxnQ0FBZ0NDO1lBQzNDO1FBQ0E7WUFDSSxNQUFNLElBQUlRLE1BQU0sQ0FBQyxzQkFBc0IsRUFBRUgsS0FBSyxDQUFDO0lBQ3ZEO0FBQ0o7QUFDQSxTQUFTSSw0QkFBNEJULE9BQU87SUFDeEMsT0FBUUEsUUFBUUMsSUFBSTtRQUNoQixLQUFLO1lBQ0QsT0FBTyxJQUFJakIsK0RBQVNBLENBQUNnQixRQUFRVSxPQUFPLElBQUksSUFBSTtnQkFDeENDLGVBQWVYLFFBQVFXLGFBQWE7Z0JBQ3BDQyxZQUFZWixRQUFRWSxVQUFV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LEdBQUcsSUFBSSxDQUFDOUcsWUFBWTtZQUNwQixHQUFHVyxPQUFPO1FBQ2Q7UUFDQSxJQUFJLElBQUksQ0FBQzFDLGlCQUFpQixFQUFFO1lBQ3hCNkksZUFBZXZHLE9BQU8sR0FBRztnQkFDckIsV0FBVyxJQUFJLENBQUN0QyxpQkFBaUI7Z0JBQ2pDLEdBQUc2SSxlQUFldkcsT0FBTztZQUM3QjtZQUNBdUcsZUFBZWMsS0FBSyxHQUFHO2dCQUNuQixlQUFlLElBQUksQ0FBQ3ZKLHFCQUFxQjtnQkFDekMsR0FBR3lJLGVBQWVjLEtBQUs7WUFDM0I7UUFDSjtRQUNBLE9BQU9kO0lBQ1g7SUFDQWUsV0FBVztRQUNQLE9BQU87SUFDWDtJQUNBLFlBQVksR0FDWkMsa0JBQWtCLEdBQUdDLFVBQVUsRUFBRTtRQUM3QixPQUFPQSxXQUFXaEMsTUFBTSxDQUFDLENBQUNpQyxLQUFLdEQ7WUFDM0IsSUFBSUEsYUFBYUEsVUFBVWpCLFVBQVUsRUFBRTtnQkFDbkN1RSxJQUFJdkUsVUFBVSxDQUFDZSxnQkFBZ0IsSUFDM0JFLFVBQVVqQixVQUFVLENBQUNlLGdCQUFnQixJQUFJO2dCQUM3Q3dELElBQUl2RSxVQUFVLENBQUNjLFlBQVksSUFBSUcsVUFBVWpCLFVBQVUsQ0FBQ2MsWUFBWSxJQUFJO2dCQUNwRXlELElBQUl2RSxVQUFVLENBQUNnQixXQUFXLElBQUlDLFVBQVVqQixVQUFVLENBQUNnQixXQUFXLElBQUk7WUFDdEU7WUFDQSxPQUFPdUQ7UUFDWCxHQUFHO1lBQ0N2RSxZQUFZO2dCQUNSZSxrQkFBa0I7Z0JBQ2xCRCxjQUFjO2dCQUNkRSxhQUFhO1lBQ2pCO1FBQ0o7SUFDSjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vb3BlbmFpL2Rpc3QvY2hhdF9tb2RlbHMuanM/ODU3MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBPcGVuQUkgYXMgT3BlbkFJQ2xpZW50IH0gZnJvbSBcIm9wZW5haVwiO1xuaW1wb3J0IHsgQUlNZXNzYWdlLCBBSU1lc3NhZ2VDaHVuaywgQ2hhdE1lc3NhZ2UsIENoYXRNZXNzYWdlQ2h1bmssIEZ1bmN0aW9uTWVzc2FnZUNodW5rLCBIdW1hbk1lc3NhZ2VDaHVuaywgU3lzdGVtTWVzc2FnZUNodW5rLCBUb29sTWVzc2FnZUNodW5rLCB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvbWVzc2FnZXNcIjtcbmltcG9ydCB7IENoYXRHZW5lcmF0aW9uQ2h1bmssIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9vdXRwdXRzXCI7XG5pbXBvcnQgeyBnZXRFbnZpcm9ubWVudFZhcmlhYmxlIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS91dGlscy9lbnZcIjtcbmltcG9ydCB7IEJhc2VDaGF0TW9kZWwsIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9sYW5ndWFnZV9tb2RlbHMvY2hhdF9tb2RlbHNcIjtcbmltcG9ydCB7IGNvbnZlcnRUb09wZW5BSVRvb2wgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3V0aWxzL2Z1bmN0aW9uX2NhbGxpbmdcIjtcbmltcG9ydCB7IGdldEVuZHBvaW50IH0gZnJvbSBcIi4vdXRpbHMvYXp1cmUuanNcIjtcbmltcG9ydCB7IHdyYXBPcGVuQUlDbGllbnRFcnJvciB9IGZyb20gXCIuL3V0aWxzL29wZW5haS5qc1wiO1xuaW1wb3J0IHsgZm9ybWF0RnVuY3Rpb25EZWZpbml0aW9ucywgfSBmcm9tIFwiLi91dGlscy9vcGVuYWktZm9ybWF0LWZuZGVmLmpzXCI7XG5mdW5jdGlvbiBleHRyYWN0R2VuZXJpY01lc3NhZ2VDdXN0b21Sb2xlKG1lc3NhZ2UpIHtcbiAgICBpZiAobWVzc2FnZS5yb2xlICE9PSBcInN5c3RlbVwiICYmXG4gICAgICAgIG1lc3NhZ2Uucm9sZSAhPT0gXCJhc3Npc3RhbnRcIiAmJlxuICAgICAgICBtZXNzYWdlLnJvbGUgIT09IFwidXNlclwiICYmXG4gICAgICAgIG1lc3NhZ2Uucm9sZSAhPT0gXCJmdW5jdGlvblwiICYmXG4gICAgICAgIG1lc3NhZ2Uucm9sZSAhPT0gXCJ0b29sXCIpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBVbmtub3duIG1lc3NhZ2Ugcm9sZTogJHttZXNzYWdlLnJvbGV9YCk7XG4gICAgfVxuICAgIHJldHVybiBtZXNzYWdlLnJvbGU7XG59XG5leHBvcnQgZnVuY3Rpb24gbWVzc2FnZVRvT3BlbkFJUm9sZShtZXNzYWdlKSB7XG4gICAgY29uc3QgdHlwZSA9IG1lc3NhZ2UuX2dldFR5cGUoKTtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBcInN5c3RlbVwiOlxuICAgICAgICAgICAgcmV0dXJuIFwic3lzdGVtXCI7XG4gICAgICAgIGNhc2UgXCJhaVwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiYXNzaXN0YW50XCI7XG4gICAgICAgIGNhc2UgXCJodW1hblwiOlxuICAgICAgICAgICAgcmV0dXJuIFwidXNlclwiO1xuICAgICAgICBjYXNlIFwiZnVuY3Rpb25cIjpcbiAgICAgICAgICAgIHJldHVybiBcImZ1bmN0aW9uXCI7XG4gICAgICAgIGNhc2UgXCJ0b29sXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJ0b29sXCI7XG4gICAgICAgIGNhc2UgXCJnZW5lcmljXCI6IHtcbiAgICAgICAgICAgIGlmICghQ2hhdE1lc3NhZ2UuaXNJbnN0YW5jZShtZXNzYWdlKSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGdlbmVyaWMgY2hhdCBtZXNzYWdlXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGV4dHJhY3RHZW5lcmljTWVzc2FnZUN1c3RvbVJvbGUobWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBtZXNzYWdlIHR5cGU6ICR7dHlwZX1gKTtcbiAgICB9XG59XG5mdW5jdGlvbiBvcGVuQUlSZXNwb25zZVRvQ2hhdE1lc3NhZ2UobWVzc2FnZSkge1xuICAgIHN3aXRjaCAobWVzc2FnZS5yb2xlKSB7XG4gICAgICAgIGNhc2UgXCJhc3Npc3RhbnRcIjpcbiAgICAgICAgICAgIHJldHVybiBuZXcgQUlNZXNzYWdlKG1lc3NhZ2UuY29udGVudCB8fCBcIlwiLCB7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb25fY2FsbDogbWVzc2FnZS5mdW5jdGlvbl9jYWxsLFxuICAgICAgICAgICAgICAgIHRvb2xfY2FsbHM6IG1lc3NhZ2UudG9vbF9jYWxscyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBDaGF0TWVzc2FnZShtZXNzYWdlLmNvbnRlbnQgfHwgXCJcIiwgbWVzc2FnZS5yb2xlID8/IFwidW5rbm93blwiKTtcbiAgICB9XG59XG5mdW5jdGlvbiBfY29udmVydERlbHRhVG9NZXNzYWdlQ2h1bmsoXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZGVsdGEsIGRlZmF1bHRSb2xlKSB7XG4gICAgY29uc3Qgcm9sZSA9IGRlbHRhLnJvbGUgPz8gZGVmYXVsdFJvbGU7XG4gICAgY29uc3QgY29udGVudCA9IGRlbHRhLmNvbnRlbnQgPz8gXCJcIjtcbiAgICBsZXQgYWRkaXRpb25hbF9rd2FyZ3M7XG4gICAgaWYgKGRlbHRhLmZ1bmN0aW9uX2NhbGwpIHtcbiAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3MgPSB7XG4gICAgICAgICAgICBmdW5jdGlvbl9jYWxsOiBkZWx0YS5mdW5jdGlvbl9jYWxsLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBlbHNlIGlmIChkZWx0YS50b29sX2NhbGxzKSB7XG4gICAgICAgIGFkZGl0aW9uYWxfa3dhcmdzID0ge1xuICAgICAgICAgICAgdG9vbF9jYWxsczogZGVsdGEudG9vbF9jYWxscyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGFkZGl0aW9uYWxfa3dhcmdzID0ge307XG4gICAgfVxuICAgIGlmIChyb2xlID09PSBcInVzZXJcIikge1xuICAgICAgICByZXR1cm4gbmV3IEh1bWFuTWVzc2FnZUNodW5rKHsgY29udGVudCB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAocm9sZSA9PT0gXCJhc3Npc3RhbnRcIikge1xuICAgICAgICByZXR1cm4gbmV3IEFJTWVzc2FnZUNodW5rKHsgY29udGVudCwgYWRkaXRpb25hbF9rd2FyZ3MgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHJvbGUgPT09IFwic3lzdGVtXCIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTeXN0ZW1NZXNzYWdlQ2h1bmsoeyBjb250ZW50IH0pO1xuICAgIH1cbiAgICBlbHNlIGlmIChyb2xlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGdW5jdGlvbk1lc3NhZ2VDaHVuayh7XG4gICAgICAgICAgICBjb250ZW50LFxuICAgICAgICAgICAgYWRkaXRpb25hbF9rd2FyZ3MsXG4gICAgICAgICAgICBuYW1lOiBkZWx0YS5uYW1lLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAocm9sZSA9PT0gXCJ0b29sXCIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUb29sTWVzc2FnZUNodW5rKHtcbiAgICAgICAgICAgIGNvbnRlbnQsXG4gICAgICAgICAgICBhZGRpdGlvbmFsX2t3YXJncyxcbiAgICAgICAgICAgIHRvb2xfY2FsbF9pZDogZGVsdGEudG9vbF9jYWxsX2lkLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBuZXcgQ2hhdE1lc3NhZ2VDaHVuayh7IGNvbnRlbnQsIHJvbGUgfSk7XG4gICAgfVxufVxuZnVuY3Rpb24gY29udmVydE1lc3NhZ2VzVG9PcGVuQUlQYXJhbXMobWVzc2FnZXMpIHtcbiAgICAvLyBUT0RPOiBGdW5jdGlvbiBtZXNzYWdlcyBkbyBub3Qgc3VwcG9ydCBhcnJheSBjb250ZW50LCBmaXggY2FzdFxuICAgIHJldHVybiBtZXNzYWdlcy5tYXAoKG1lc3NhZ2UpID0+ICh7XG4gICAgICAgIHJvbGU6IG1lc3NhZ2VUb09wZW5BSVJvbGUobWVzc2FnZSksXG4gICAgICAgIGNvbnRlbnQ6IG1lc3NhZ2UuY29udGVudCxcbiAgICAgICAgbmFtZTogbWVzc2FnZS5uYW1lLFxuICAgICAgICBmdW5jdGlvbl9jYWxsOiBtZXNzYWdlLmFkZGl0aW9uYWxfa3dhcmdzLmZ1bmN0aW9uX2NhbGwsXG4gICAgICAgIHRvb2xfY2FsbHM6IG1lc3NhZ2UuYWRkaXRpb25hbF9rd2FyZ3MudG9vbF9jYWxscyxcbiAgICAgICAgdG9vbF9jYWxsX2lkOiBtZXNzYWdlLnRvb2xfY2FsbF9pZCxcbiAgICB9KSk7XG59XG4vKipcbiAqIFdyYXBwZXIgYXJvdW5kIE9wZW5BSSBsYXJnZSBsYW5ndWFnZSBtb2RlbHMgdGhhdCB1c2UgdGhlIENoYXQgZW5kcG9pbnQuXG4gKlxuICogVG8gdXNlIHlvdSBzaG91bGQgaGF2ZSB0aGUgYG9wZW5haWAgcGFja2FnZSBpbnN0YWxsZWQsIHdpdGggdGhlXG4gKiBgT1BFTkFJX0FQSV9LRVlgIGVudmlyb25tZW50IHZhcmlhYmxlIHNldC5cbiAqXG4gKiBUbyB1c2Ugd2l0aCBBenVyZSB5b3Ugc2hvdWxkIGhhdmUgdGhlIGBvcGVuYWlgIHBhY2thZ2UgaW5zdGFsbGVkLCB3aXRoIHRoZVxuICogYEFaVVJFX09QRU5BSV9BUElfS0VZYCxcbiAqIGBBWlVSRV9PUEVOQUlfQVBJX0lOU1RBTkNFX05BTUVgLFxuICogYEFaVVJFX09QRU5BSV9BUElfREVQTE9ZTUVOVF9OQU1FYFxuICogYW5kIGBBWlVSRV9PUEVOQUlfQVBJX1ZFUlNJT05gIGVudmlyb25tZW50IHZhcmlhYmxlIHNldC5cbiAqIGBBWlVSRV9PUEVOQUlfQkFTRV9QQVRIYCBpcyBvcHRpb25hbCBhbmQgd2lsbCBvdmVycmlkZSBgQVpVUkVfT1BFTkFJX0FQSV9JTlNUQU5DRV9OQU1FYCBpZiB5b3UgbmVlZCB0byB1c2UgYSBjdXN0b20gZW5kcG9pbnQuXG4gKlxuICogQHJlbWFya3NcbiAqIEFueSBwYXJhbWV0ZXJzIHRoYXQgYXJlIHZhbGlkIHRvIGJlIHBhc3NlZCB0byB7QGxpbmtcbiAqIGh0dHBzOi8vcGxhdGZvcm0ub3BlbmFpLmNvbS9kb2NzL2FwaS1yZWZlcmVuY2UvY2hhdC9jcmVhdGUgfFxuICogYG9wZW5haS5jcmVhdGVDaGF0Q29tcGxldGlvbmB9IGNhbiBiZSBwYXNzZWQgdGhyb3VnaCB7QGxpbmsgbW9kZWxLd2FyZ3N9LCBldmVuXG4gKiBpZiBub3QgZXhwbGljaXRseSBhdmFpbGFibGUgb24gdGhpcyBjbGFzcy5cbiAqIEBleGFtcGxlXG4gKiBgYGB0eXBlc2NyaXB0XG4gKiAvLyBDcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgQ2hhdE9wZW5BSSB3aXRoIHNwZWNpZmljIHRlbXBlcmF0dXJlIGFuZCBtb2RlbCBuYW1lIHNldHRpbmdzXG4gKiBjb25zdCBtb2RlbCA9IG5ldyBDaGF0T3BlbkFJKHtcbiAqICAgdGVtcGVyYXR1cmU6IDAuOSxcbiAqICAgbW9kZWxOYW1lOiBcImZ0OmdwdC0zLjUtdHVyYm8tMDYxMzp7T1JHX05BTUV9Ojp7TU9ERUxfSUR9XCIsXG4gKiB9KTtcbiAqXG4gKiAvLyBJbnZva2UgdGhlIG1vZGVsIHdpdGggYSBtZXNzYWdlIGFuZCBhd2FpdCB0aGUgcmVzcG9uc2VcbiAqIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCBtb2RlbC5pbnZva2UoXCJIaSB0aGVyZSFcIik7XG4gKlxuICogLy8gTG9nIHRoZSByZXNwb25zZSB0byB0aGUgY29uc29sZVxuICogY29uc29sZS5sb2cobWVzc2FnZSk7XG4gKlxuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBDaGF0T3BlbkFJIGV4dGVuZHMgQmFzZUNoYXRNb2RlbCB7XG4gICAgc3RhdGljIGxjX25hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIkNoYXRPcGVuQUlcIjtcbiAgICB9XG4gICAgZ2V0IGNhbGxLZXlzKCkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgLi4uc3VwZXIuY2FsbEtleXMsXG4gICAgICAgICAgICBcIm9wdGlvbnNcIixcbiAgICAgICAgICAgIFwiZnVuY3Rpb25fY2FsbFwiLFxuICAgICAgICAgICAgXCJmdW5jdGlvbnNcIixcbiAgICAgICAgICAgIFwidG9vbHNcIixcbiAgICAgICAgICAgIFwidG9vbF9jaG9pY2VcIixcbiAgICAgICAgICAgIFwicHJvbXB0SW5kZXhcIixcbiAgICAgICAgICAgIFwicmVzcG9uc2VfZm9ybWF0XCIsXG4gICAgICAgICAgICBcInNlZWRcIixcbiAgICAgICAgXTtcbiAgICB9XG4gICAgZ2V0IGxjX3NlY3JldHMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvcGVuQUlBcGlLZXk6IFwiT1BFTkFJX0FQSV9LRVlcIixcbiAgICAgICAgICAgIGF6dXJlT3BlbkFJQXBpS2V5OiBcIkFaVVJFX09QRU5BSV9BUElfS0VZXCIsXG4gICAgICAgICAgICBvcmdhbml6YXRpb246IFwiT1BFTkFJX09SR0FOSVpBVElPTlwiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBnZXQgbGNfYWxpYXNlcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1vZGVsTmFtZTogXCJtb2RlbFwiLFxuICAgICAgICAgICAgb3BlbkFJQXBpS2V5OiBcIm9wZW5haV9hcGlfa2V5XCIsXG4gICAgICAgICAgICBhenVyZU9wZW5BSUFwaVZlcnNpb246IFwiYXp1cmVfb3BlbmFpX2FwaV92ZXJzaW9uXCIsXG4gICAgICAgICAgICBhenVyZU9wZW5BSUFwaUtleTogXCJhenVyZV9vcGVuYWlfYXBpX2tleVwiLFxuICAgICAgICAgICAgYXp1cmVPcGVuQUlBcGlJbnN0YW5jZU5hbWU6IFwiYXp1cmVfb3BlbmFpX2FwaV9pbnN0YW5jZV9uYW1lXCIsXG4gICAgICAgICAgICBhenVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lOiBcImF6dXJlX29wZW5haV9hcGlfZGVwbG95bWVudF9uYW1lXCIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKGZpZWxkcywgXG4gICAgLyoqIEBkZXByZWNhdGVkICovXG4gICAgY29uZmlndXJhdGlvbikge1xuICAgICAgICBzdXBlcihmaWVsZHMgPz8ge30pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJsY19zZXJpYWxpemFibGVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRlbXBlcmF0dXJlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiAxXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0b3BQXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiAxXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJmcmVxdWVuY3lQZW5hbHR5XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJwcmVzZW5jZVBlbmFsdHlcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm5cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IDFcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxvZ2l0Qmlhc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtb2RlbE5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwiZ3B0LTMuNS10dXJib1wiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtb2RlbEt3YXJnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdG9wXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInVzZXJcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidGltZW91dFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdHJlYW1pbmdcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtYXhUb2tlbnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibG9ncHJvYnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidG9wTG9ncHJvYnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwib3BlbkFJQXBpS2V5XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImF6dXJlT3BlbkFJQXBpVmVyc2lvblwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhenVyZU9wZW5BSUFwaUtleVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhenVyZU9wZW5BSUFwaUluc3RhbmNlTmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhenVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImF6dXJlT3BlbkFJQmFzZVBhdGhcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwib3JnYW5pemF0aW9uXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNsaWVudFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjbGllbnRDb25maWdcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5vcGVuQUlBcGlLZXkgPVxuICAgICAgICAgICAgZmllbGRzPy5vcGVuQUlBcGlLZXkgPz8gZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIk9QRU5BSV9BUElfS0VZXCIpO1xuICAgICAgICB0aGlzLmF6dXJlT3BlbkFJQXBpS2V5ID1cbiAgICAgICAgICAgIGZpZWxkcz8uYXp1cmVPcGVuQUlBcGlLZXkgPz9cbiAgICAgICAgICAgICAgICBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiQVpVUkVfT1BFTkFJX0FQSV9LRVlcIik7XG4gICAgICAgIGlmICghdGhpcy5henVyZU9wZW5BSUFwaUtleSAmJiAhdGhpcy5vcGVuQUlBcGlLZXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk9wZW5BSSBvciBBenVyZSBPcGVuQUkgQVBJIGtleSBub3QgZm91bmRcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5henVyZU9wZW5BSUFwaUluc3RhbmNlTmFtZSA9XG4gICAgICAgICAgICBmaWVsZHM/LmF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lID8/XG4gICAgICAgICAgICAgICAgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkFaVVJFX09QRU5BSV9BUElfSU5TVEFOQ0VfTkFNRVwiKTtcbiAgICAgICAgdGhpcy5henVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lID1cbiAgICAgICAgICAgIGZpZWxkcz8uYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZSA/P1xuICAgICAgICAgICAgICAgIGdldEVudmlyb25tZW50VmFyaWFibGUoXCJBWlVSRV9PUEVOQUlfQVBJX0RFUExPWU1FTlRfTkFNRVwiKTtcbiAgICAgICAgdGhpcy5henVyZU9wZW5BSUFwaVZlcnNpb24gPVxuICAgICAgICAgICAgZmllbGRzPy5henVyZU9wZW5BSUFwaVZlcnNpb24gPz9cbiAgICAgICAgICAgICAgICBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiQVpVUkVfT1BFTkFJX0FQSV9WRVJTSU9OXCIpO1xuICAgICAgICB0aGlzLmF6dXJlT3BlbkFJQmFzZVBhdGggPVxuICAgICAgICAgICAgZmllbGRzPy5henVyZU9wZW5BSUJhc2VQYXRoID8/XG4gICAgICAgICAgICAgICAgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkFaVVJFX09QRU5BSV9CQVNFX1BBVEhcIik7XG4gICAgICAgIHRoaXMub3JnYW5pemF0aW9uID1cbiAgICAgICAgICAgIGZpZWxkcz8uY29uZmlndXJhdGlvbj8ub3JnYW5pemF0aW9uID8/XG4gICAgICAgICAgICAgICAgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIk9QRU5BSV9PUkdBTklaQVRJT05cIik7XG4gICAgICAgIHRoaXMubW9kZWxOYW1lID0gZmllbGRzPy5tb2RlbE5hbWUgPz8gdGhpcy5tb2RlbE5hbWU7XG4gICAgICAgIHRoaXMubW9kZWxLd2FyZ3MgPSBmaWVsZHM/Lm1vZGVsS3dhcmdzID8/IHt9O1xuICAgICAgICB0aGlzLnRpbWVvdXQgPSBmaWVsZHM/LnRpbWVvdXQ7XG4gICAgICAgIHRoaXMudGVtcGVyYXR1cmUgPSBmaWVsZHM/LnRlbXBlcmF0dXJlID8/IHRoaXMudGVtcGVyYXR1cmU7XG4gICAgICAgIHRoaXMudG9wUCA9IGZpZWxkcz8udG9wUCA/PyB0aGlzLnRvcFA7XG4gICAgICAgIHRoaXMuZnJlcXVlbmN5UGVuYWx0eSA9IGZpZWxkcz8uZnJlcXVlbmN5UGVuYWx0eSA/PyB0aGlzLmZyZXF1ZW5jeVBlbmFsdHk7XG4gICAgICAgIHRoaXMucHJlc2VuY2VQZW5hbHR5ID0gZmllbGRzPy5wcmVzZW5jZVBlbmFsdHkgPz8gdGhpcy5wcmVzZW5jZVBlbmFsdHk7XG4gICAgICAgIHRoaXMubWF4VG9rZW5zID0gZmllbGRzPy5tYXhUb2tlbnM7XG4gICAgICAgIHRoaXMubG9ncHJvYnMgPSBmaWVsZHM/LmxvZ3Byb2JzO1xuICAgICAgICB0aGlzLnRvcExvZ3Byb2JzID0gZmllbGRzPy50b3BMb2dwcm9icztcbiAgICAgICAgdGhpcy5uID0gZmllbGRzPy5uID8/IHRoaXMubjtcbiAgICAgICAgdGhpcy5sb2dpdEJpYXMgPSBmaWVsZHM/LmxvZ2l0QmlhcztcbiAgICAgICAgdGhpcy5zdG9wID0gZmllbGRzPy5zdG9wO1xuICAgICAgICB0aGlzLnVzZXIgPSBmaWVsZHM/LnVzZXI7XG4gICAgICAgIHRoaXMuc3RyZWFtaW5nID0gZmllbGRzPy5zdHJlYW1pbmcgPz8gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLmF6dXJlT3BlbkFJQXBpS2V5KSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYXp1cmVPcGVuQUlBcGlJbnN0YW5jZU5hbWUgJiYgIXRoaXMuYXp1cmVPcGVuQUlCYXNlUGF0aCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkF6dXJlIE9wZW5BSSBBUEkgaW5zdGFuY2UgbmFtZSBub3QgZm91bmRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkF6dXJlIE9wZW5BSSBBUEkgZGVwbG95bWVudCBuYW1lIG5vdCBmb3VuZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5henVyZU9wZW5BSUFwaVZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBenVyZSBPcGVuQUkgQVBJIHZlcnNpb24gbm90IGZvdW5kXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vcGVuQUlBcGlLZXkgPSB0aGlzLm9wZW5BSUFwaUtleSA/PyBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2xpZW50Q29uZmlnID0ge1xuICAgICAgICAgICAgYXBpS2V5OiB0aGlzLm9wZW5BSUFwaUtleSxcbiAgICAgICAgICAgIG9yZ2FuaXphdGlvbjogdGhpcy5vcmdhbml6YXRpb24sXG4gICAgICAgICAgICBiYXNlVVJMOiBjb25maWd1cmF0aW9uPy5iYXNlUGF0aCA/PyBmaWVsZHM/LmNvbmZpZ3VyYXRpb24/LmJhc2VQYXRoLFxuICAgICAgICAgICAgZGFuZ2Vyb3VzbHlBbGxvd0Jyb3dzZXI6IHRydWUsXG4gICAgICAgICAgICBkZWZhdWx0SGVhZGVyczogY29uZmlndXJhdGlvbj8uYmFzZU9wdGlvbnM/LmhlYWRlcnMgPz9cbiAgICAgICAgICAgICAgICBmaWVsZHM/LmNvbmZpZ3VyYXRpb24/LmJhc2VPcHRpb25zPy5oZWFkZXJzLFxuICAgICAgICAgICAgZGVmYXVsdFF1ZXJ5OiBjb25maWd1cmF0aW9uPy5iYXNlT3B0aW9ucz8ucGFyYW1zID8/XG4gICAgICAgICAgICAgICAgZmllbGRzPy5jb25maWd1cmF0aW9uPy5iYXNlT3B0aW9ucz8ucGFyYW1zLFxuICAgICAgICAgICAgLi4uY29uZmlndXJhdGlvbixcbiAgICAgICAgICAgIC4uLmZpZWxkcz8uY29uZmlndXJhdGlvbixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBwYXJhbWV0ZXJzIHVzZWQgdG8gaW52b2tlIHRoZSBtb2RlbFxuICAgICAqL1xuICAgIGludm9jYXRpb25QYXJhbXMob3B0aW9ucykge1xuICAgICAgICBmdW5jdGlvbiBpc1N0cnVjdHVyZWRUb29sQXJyYXkodG9vbHMpIHtcbiAgICAgICAgICAgIHJldHVybiAodG9vbHMgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICAgICAgICAgIHRvb2xzLmV2ZXJ5KCh0b29sKSA9PiBBcnJheS5pc0FycmF5KHRvb2wubGNfbmFtZXNwYWNlKSkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgICAgICAgIG1vZGVsOiB0aGlzLm1vZGVsTmFtZSxcbiAgICAgICAgICAgIHRlbXBlcmF0dXJlOiB0aGlzLnRlbXBlcmF0dXJlLFxuICAgICAgICAgICAgdG9wX3A6IHRoaXMudG9wUCxcbiAgICAgICAgICAgIGZyZXF1ZW5jeV9wZW5hbHR5OiB0aGlzLmZyZXF1ZW5jeVBlbmFsdHksXG4gICAgICAgICAgICBwcmVzZW5jZV9wZW5hbHR5OiB0aGlzLnByZXNlbmNlUGVuYWx0eSxcbiAgICAgICAgICAgIG1heF90b2tlbnM6IHRoaXMubWF4VG9rZW5zID09PSAtMSA/IHVuZGVmaW5lZCA6IHRoaXMubWF4VG9rZW5zLFxuICAgICAgICAgICAgbG9ncHJvYnM6IHRoaXMubG9ncHJvYnMsXG4gICAgICAgICAgICB0b3BfbG9ncHJvYnM6IHRoaXMudG9wTG9ncHJvYnMsXG4gICAgICAgICAgICBuOiB0aGlzLm4sXG4gICAgICAgICAgICBsb2dpdF9iaWFzOiB0aGlzLmxvZ2l0QmlhcyxcbiAgICAgICAgICAgIHN0b3A6IG9wdGlvbnM/LnN0b3AgPz8gdGhpcy5zdG9wLFxuICAgICAgICAgICAgdXNlcjogdGhpcy51c2VyLFxuICAgICAgICAgICAgc3RyZWFtOiB0aGlzLnN0cmVhbWluZyxcbiAgICAgICAgICAgIGZ1bmN0aW9uczogb3B0aW9ucz8uZnVuY3Rpb25zLFxuICAgICAgICAgICAgZnVuY3Rpb25fY2FsbDogb3B0aW9ucz8uZnVuY3Rpb25fY2FsbCxcbiAgICAgICAgICAgIHRvb2xzOiBpc1N0cnVjdHVyZWRUb29sQXJyYXkob3B0aW9ucz8udG9vbHMpXG4gICAgICAgICAgICAgICAgPyBvcHRpb25zPy50b29scy5tYXAoY29udmVydFRvT3BlbkFJVG9vbClcbiAgICAgICAgICAgICAgICA6IG9wdGlvbnM/LnRvb2xzLFxuICAgICAgICAgICAgdG9vbF9jaG9pY2U6IG9wdGlvbnM/LnRvb2xfY2hvaWNlLFxuICAgICAgICAgICAgcmVzcG9uc2VfZm9ybWF0OiBvcHRpb25zPy5yZXNwb25zZV9mb3JtYXQsXG4gICAgICAgICAgICBzZWVkOiBvcHRpb25zPy5zZWVkLFxuICAgICAgICAgICAgLi4udGhpcy5tb2RlbEt3YXJncyxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHBhcmFtcztcbiAgICB9XG4gICAgLyoqIEBpZ25vcmUgKi9cbiAgICBfaWRlbnRpZnlpbmdQYXJhbXMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtb2RlbF9uYW1lOiB0aGlzLm1vZGVsTmFtZSxcbiAgICAgICAgICAgIC4uLnRoaXMuaW52b2NhdGlvblBhcmFtcygpLFxuICAgICAgICAgICAgLi4udGhpcy5jbGllbnRDb25maWcsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGFzeW5jICpfc3RyZWFtUmVzcG9uc2VDaHVua3MobWVzc2FnZXMsIG9wdGlvbnMsIHJ1bk1hbmFnZXIpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZXNNYXBwZWQgPSBjb252ZXJ0TWVzc2FnZXNUb09wZW5BSVBhcmFtcyhtZXNzYWdlcyk7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgICAgICAgIC4uLnRoaXMuaW52b2NhdGlvblBhcmFtcyhvcHRpb25zKSxcbiAgICAgICAgICAgIG1lc3NhZ2VzOiBtZXNzYWdlc01hcHBlZCxcbiAgICAgICAgICAgIHN0cmVhbTogdHJ1ZSxcbiAgICAgICAgfTtcbiAgICAgICAgbGV0IGRlZmF1bHRSb2xlO1xuICAgICAgICBjb25zdCBzdHJlYW1JdGVyYWJsZSA9IGF3YWl0IHRoaXMuY29tcGxldGlvbldpdGhSZXRyeShwYXJhbXMsIG9wdGlvbnMpO1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGRhdGEgb2Ygc3RyZWFtSXRlcmFibGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGNob2ljZSA9IGRhdGE/LmNob2ljZXNbMF07XG4gICAgICAgICAgICBpZiAoIWNob2ljZSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgeyBkZWx0YSB9ID0gY2hvaWNlO1xuICAgICAgICAgICAgaWYgKCFkZWx0YSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY2h1bmsgPSBfY29udmVydERlbHRhVG9NZXNzYWdlQ2h1bmsoZGVsdGEsIGRlZmF1bHRSb2xlKTtcbiAgICAgICAgICAgIGRlZmF1bHRSb2xlID0gZGVsdGEucm9sZSA/PyBkZWZhdWx0Um9sZTtcbiAgICAgICAgICAgIGNvbnN0IG5ld1Rva2VuSW5kaWNlcyA9IHtcbiAgICAgICAgICAgICAgICBwcm9tcHQ6IG9wdGlvbnMucHJvbXB0SW5kZXggPz8gMCxcbiAgICAgICAgICAgICAgICBjb21wbGV0aW9uOiBjaG9pY2UuaW5kZXggPz8gMCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAodHlwZW9mIGNodW5rLmNvbnRlbnQgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIltXQVJOSU5HXTogUmVjZWl2ZWQgbm9uLXN0cmluZyBjb250ZW50IGZyb20gT3BlbkFJLiBUaGlzIGlzIGN1cnJlbnRseSBub3Qgc3VwcG9ydGVkLlwiKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGdlbmVyYXRpb25DaHVuayA9IG5ldyBDaGF0R2VuZXJhdGlvbkNodW5rKHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBjaHVuayxcbiAgICAgICAgICAgICAgICB0ZXh0OiBjaHVuay5jb250ZW50LFxuICAgICAgICAgICAgICAgIGdlbmVyYXRpb25JbmZvOiBuZXdUb2tlbkluZGljZXMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHlpZWxkIGdlbmVyYXRpb25DaHVuaztcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby12b2lkXG4gICAgICAgICAgICB2b2lkIHJ1bk1hbmFnZXI/LmhhbmRsZUxMTU5ld1Rva2VuKGdlbmVyYXRpb25DaHVuay50ZXh0ID8/IFwiXCIsIG5ld1Rva2VuSW5kaWNlcywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgeyBjaHVuazogZ2VuZXJhdGlvbkNodW5rIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnNpZ25hbD8uYWJvcnRlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQWJvcnRFcnJvclwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGlkZW50aWZ5aW5nIHBhcmFtZXRlcnMgZm9yIHRoZSBtb2RlbFxuICAgICAqXG4gICAgICovXG4gICAgaWRlbnRpZnlpbmdQYXJhbXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pZGVudGlmeWluZ1BhcmFtcygpO1xuICAgIH1cbiAgICAvKiogQGlnbm9yZSAqL1xuICAgIGFzeW5jIF9nZW5lcmF0ZShtZXNzYWdlcywgb3B0aW9ucywgcnVuTWFuYWdlcikge1xuICAgICAgICBjb25zdCB0b2tlblVzYWdlID0ge307XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHRoaXMuaW52b2NhdGlvblBhcmFtcyhvcHRpb25zKTtcbiAgICAgICAgY29uc3QgbWVzc2FnZXNNYXBwZWQgPSBjb252ZXJ0TWVzc2FnZXNUb09wZW5BSVBhcmFtcyhtZXNzYWdlcyk7XG4gICAgICAgIGlmIChwYXJhbXMuc3RyZWFtKSB7XG4gICAgICAgICAgICBjb25zdCBzdHJlYW0gPSB0aGlzLl9zdHJlYW1SZXNwb25zZUNodW5rcyhtZXNzYWdlcywgb3B0aW9ucywgcnVuTWFuYWdlcik7XG4gICAgICAgICAgICBjb25zdCBmaW5hbENodW5rcyA9IHt9O1xuICAgICAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBzdHJlYW0pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IGNodW5rLmdlbmVyYXRpb25JbmZvPy5jb21wbGV0aW9uID8/IDA7XG4gICAgICAgICAgICAgICAgaWYgKGZpbmFsQ2h1bmtzW2luZGV4XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbmFsQ2h1bmtzW2luZGV4XSA9IGNodW5rO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZmluYWxDaHVua3NbaW5kZXhdID0gZmluYWxDaHVua3NbaW5kZXhdLmNvbmNhdChjaHVuayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZ2VuZXJhdGlvbnMgPSBPYmplY3QuZW50cmllcyhmaW5hbENodW5rcylcbiAgICAgICAgICAgICAgICAuc29ydCgoW2FLZXldLCBbYktleV0pID0+IHBhcnNlSW50KGFLZXksIDEwKSAtIHBhcnNlSW50KGJLZXksIDEwKSlcbiAgICAgICAgICAgICAgICAubWFwKChbXywgdmFsdWVdKSA9PiB2YWx1ZSk7XG4gICAgICAgICAgICBjb25zdCB7IGZ1bmN0aW9ucywgZnVuY3Rpb25fY2FsbCB9ID0gdGhpcy5pbnZvY2F0aW9uUGFyYW1zKG9wdGlvbnMpO1xuICAgICAgICAgICAgLy8gT3BlbkFJIGRvZXMgbm90IHN1cHBvcnQgdG9rZW4gdXNhZ2UgcmVwb3J0IHVuZGVyIHN0cmVhbSBtb2RlLFxuICAgICAgICAgICAgLy8gZmFsbGJhY2sgdG8gZXN0aW1hdGlvbi5cbiAgICAgICAgICAgIGNvbnN0IHByb21wdFRva2VuVXNhZ2UgPSBhd2FpdCB0aGlzLmdldEVzdGltYXRlZFRva2VuQ291bnRGcm9tUHJvbXB0KG1lc3NhZ2VzLCBmdW5jdGlvbnMsIGZ1bmN0aW9uX2NhbGwpO1xuICAgICAgICAgICAgY29uc3QgY29tcGxldGlvblRva2VuVXNhZ2UgPSBhd2FpdCB0aGlzLmdldE51bVRva2Vuc0Zyb21HZW5lcmF0aW9ucyhnZW5lcmF0aW9ucyk7XG4gICAgICAgICAgICB0b2tlblVzYWdlLnByb21wdFRva2VucyA9IHByb21wdFRva2VuVXNhZ2U7XG4gICAgICAgICAgICB0b2tlblVzYWdlLmNvbXBsZXRpb25Ub2tlbnMgPSBjb21wbGV0aW9uVG9rZW5Vc2FnZTtcbiAgICAgICAgICAgIHRva2VuVXNhZ2UudG90YWxUb2tlbnMgPSBwcm9tcHRUb2tlblVzYWdlICsgY29tcGxldGlvblRva2VuVXNhZ2U7XG4gICAgICAgICAgICByZXR1cm4geyBnZW5lcmF0aW9ucywgbGxtT3V0cHV0OiB7IGVzdGltYXRlZFRva2VuVXNhZ2U6IHRva2VuVXNhZ2UgfSB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuY29tcGxldGlvbldpdGhSZXRyeSh7XG4gICAgICAgICAgICAgICAgLi4ucGFyYW1zLFxuICAgICAgICAgICAgICAgIHN0cmVhbTogZmFsc2UsXG4gICAgICAgICAgICAgICAgbWVzc2FnZXM6IG1lc3NhZ2VzTWFwcGVkLFxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHNpZ25hbDogb3B0aW9ucz8uc2lnbmFsLFxuICAgICAgICAgICAgICAgIC4uLm9wdGlvbnM/Lm9wdGlvbnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHsgY29tcGxldGlvbl90b2tlbnM6IGNvbXBsZXRpb25Ub2tlbnMsIHByb21wdF90b2tlbnM6IHByb21wdFRva2VucywgdG90YWxfdG9rZW5zOiB0b3RhbFRva2VucywgfSA9IGRhdGE/LnVzYWdlID8/IHt9O1xuICAgICAgICAgICAgaWYgKGNvbXBsZXRpb25Ub2tlbnMpIHtcbiAgICAgICAgICAgICAgICB0b2tlblVzYWdlLmNvbXBsZXRpb25Ub2tlbnMgPVxuICAgICAgICAgICAgICAgICAgICAodG9rZW5Vc2FnZS5jb21wbGV0aW9uVG9rZW5zID8/IDApICsgY29tcGxldGlvblRva2VucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwcm9tcHRUb2tlbnMpIHtcbiAgICAgICAgICAgICAgICB0b2tlblVzYWdlLnByb21wdFRva2VucyA9ICh0b2tlblVzYWdlLnByb21wdFRva2VucyA/PyAwKSArIHByb21wdFRva2VucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0b3RhbFRva2Vucykge1xuICAgICAgICAgICAgICAgIHRva2VuVXNhZ2UudG90YWxUb2tlbnMgPSAodG9rZW5Vc2FnZS50b3RhbFRva2VucyA/PyAwKSArIHRvdGFsVG9rZW5zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZ2VuZXJhdGlvbnMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcGFydCBvZiBkYXRhPy5jaG9pY2VzID8/IFtdKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IHBhcnQubWVzc2FnZT8uY29udGVudCA/PyBcIlwiO1xuICAgICAgICAgICAgICAgIGNvbnN0IGdlbmVyYXRpb24gPSB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG9wZW5BSVJlc3BvbnNlVG9DaGF0TWVzc2FnZShwYXJ0Lm1lc3NhZ2UgPz8geyByb2xlOiBcImFzc2lzdGFudFwiIH0pLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgZ2VuZXJhdGlvbi5nZW5lcmF0aW9uSW5mbyA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4uKHBhcnQuZmluaXNoX3JlYXNvbiA/IHsgZmluaXNoX3JlYXNvbjogcGFydC5maW5pc2hfcmVhc29uIH0gOiB7fSksXG4gICAgICAgICAgICAgICAgICAgIC4uLihwYXJ0LmxvZ3Byb2JzID8geyBsb2dwcm9iczogcGFydC5sb2dwcm9icyB9IDoge30pLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgZ2VuZXJhdGlvbnMucHVzaChnZW5lcmF0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZ2VuZXJhdGlvbnMsXG4gICAgICAgICAgICAgICAgbGxtT3V0cHV0OiB7IHRva2VuVXNhZ2UgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRXN0aW1hdGUgdGhlIG51bWJlciBvZiB0b2tlbnMgYSBwcm9tcHQgd2lsbCB1c2UuXG4gICAgICogTW9kaWZpZWQgZnJvbTogaHR0cHM6Ly9naXRodWIuY29tL2htYXJyL29wZW5haS1jaGF0LXRva2Vucy9ibG9iL21haW4vc3JjL2luZGV4LnRzXG4gICAgICovXG4gICAgYXN5bmMgZ2V0RXN0aW1hdGVkVG9rZW5Db3VudEZyb21Qcm9tcHQobWVzc2FnZXMsIGZ1bmN0aW9ucywgZnVuY3Rpb25fY2FsbCkge1xuICAgICAgICAvLyBJdCBhcHBlYXJzIHRoYXQgaWYgZnVuY3Rpb25zIGFyZSBwcmVzZW50LCB0aGUgZmlyc3Qgc3lzdGVtIG1lc3NhZ2UgaXMgcGFkZGVkIHdpdGggYSB0cmFpbGluZyBuZXdsaW5lLiBUaGlzXG4gICAgICAgIC8vIHdhcyBpbmZlcnJlZCBieSB0cnlpbmcgbG90cyBvZiBjb21iaW5hdGlvbnMgb2YgbWVzc2FnZXMgYW5kIGZ1bmN0aW9ucyBhbmQgc2VlaW5nIHdoYXQgdGhlIHRva2VuIGNvdW50cyB3ZXJlLlxuICAgICAgICBsZXQgdG9rZW5zID0gKGF3YWl0IHRoaXMuZ2V0TnVtVG9rZW5zRnJvbU1lc3NhZ2VzKG1lc3NhZ2VzKSkudG90YWxDb3VudDtcbiAgICAgICAgLy8gSWYgdGhlcmUgYXJlIGZ1bmN0aW9ucywgYWRkIHRoZSBmdW5jdGlvbiBkZWZpbml0aW9ucyBhcyB0aGV5IGNvdW50IHRvd2FyZHMgdG9rZW4gdXNhZ2VcbiAgICAgICAgaWYgKGZ1bmN0aW9ucyAmJiBmdW5jdGlvbl9jYWxsICE9PSBcImF1dG9cIikge1xuICAgICAgICAgICAgY29uc3QgcHJvbXB0RGVmaW5pdGlvbnMgPSBmb3JtYXRGdW5jdGlvbkRlZmluaXRpb25zKGZ1bmN0aW9ucyk7XG4gICAgICAgICAgICB0b2tlbnMgKz0gYXdhaXQgdGhpcy5nZXROdW1Ub2tlbnMocHJvbXB0RGVmaW5pdGlvbnMpO1xuICAgICAgICAgICAgdG9rZW5zICs9IDk7IC8vIEFkZCBuaW5lIHBlciBjb21wbGV0aW9uXG4gICAgICAgIH1cbiAgICAgICAgLy8gSWYgdGhlcmUncyBhIHN5c3RlbSBtZXNzYWdlIF9hbmRfIGZ1bmN0aW9ucyBhcmUgcHJlc2VudCwgc3VidHJhY3QgZm91ciB0b2tlbnMuIEkgYXNzdW1lIHRoaXMgaXMgYmVjYXVzZVxuICAgICAgICAvLyBmdW5jdGlvbnMgdHlwaWNhbGx5IGFkZCBhIHN5c3RlbSBtZXNzYWdlLCBidXQgcmV1c2UgdGhlIGZpcnN0IG9uZSBpZiBpdCdzIGFscmVhZHkgdGhlcmUuIFRoaXMgb2Zmc2V0c1xuICAgICAgICAvLyB0aGUgZXh0cmEgOSB0b2tlbnMgYWRkZWQgYnkgdGhlIGZ1bmN0aW9uIGRlZmluaXRpb25zLlxuICAgICAgICBpZiAoZnVuY3Rpb25zICYmIG1lc3NhZ2VzLmZpbmQoKG0pID0+IG0uX2dldFR5cGUoKSA9PT0gXCJzeXN0ZW1cIikpIHtcbiAgICAgICAgICAgIHRva2VucyAtPSA0O1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIGZ1bmN0aW9uX2NhbGwgaXMgJ25vbmUnLCBhZGQgb25lIHRva2VuLlxuICAgICAgICAvLyBJZiBpdCdzIGEgRnVuY3Rpb25DYWxsIG9iamVjdCwgYWRkIDQgKyB0aGUgbnVtYmVyIG9mIHRva2VucyBpbiB0aGUgZnVuY3Rpb24gbmFtZS5cbiAgICAgICAgLy8gSWYgaXQncyB1bmRlZmluZWQgb3IgJ2F1dG8nLCBkb24ndCBhZGQgYW55dGhpbmcuXG4gICAgICAgIGlmIChmdW5jdGlvbl9jYWxsID09PSBcIm5vbmVcIikge1xuICAgICAgICAgICAgdG9rZW5zICs9IDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIGZ1bmN0aW9uX2NhbGwgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgIHRva2VucyArPSAoYXdhaXQgdGhpcy5nZXROdW1Ub2tlbnMoZnVuY3Rpb25fY2FsbC5uYW1lKSkgKyA0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0b2tlbnM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVzdGltYXRlIHRoZSBudW1iZXIgb2YgdG9rZW5zIGFuIGFycmF5IG9mIGdlbmVyYXRpb25zIGhhdmUgdXNlZC5cbiAgICAgKi9cbiAgICBhc3luYyBnZXROdW1Ub2tlbnNGcm9tR2VuZXJhdGlvbnMoZ2VuZXJhdGlvbnMpIHtcbiAgICAgICAgY29uc3QgZ2VuZXJhdGlvblVzYWdlcyA9IGF3YWl0IFByb21pc2UuYWxsKGdlbmVyYXRpb25zLm1hcChhc3luYyAoZ2VuZXJhdGlvbikgPT4ge1xuICAgICAgICAgICAgaWYgKGdlbmVyYXRpb24ubWVzc2FnZS5hZGRpdGlvbmFsX2t3YXJncz8uZnVuY3Rpb25fY2FsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAoYXdhaXQgdGhpcy5nZXROdW1Ub2tlbnNGcm9tTWVzc2FnZXMoW2dlbmVyYXRpb24ubWVzc2FnZV0pKVxuICAgICAgICAgICAgICAgICAgICAuY291bnRQZXJNZXNzYWdlWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZ2V0TnVtVG9rZW5zKGdlbmVyYXRpb24ubWVzc2FnZS5jb250ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4gZ2VuZXJhdGlvblVzYWdlcy5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiLCAwKTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0TnVtVG9rZW5zRnJvbU1lc3NhZ2VzKG1lc3NhZ2VzKSB7XG4gICAgICAgIGxldCB0b3RhbENvdW50ID0gMDtcbiAgICAgICAgbGV0IHRva2Vuc1Blck1lc3NhZ2UgPSAwO1xuICAgICAgICBsZXQgdG9rZW5zUGVyTmFtZSA9IDA7XG4gICAgICAgIC8vIEZyb206IGh0dHBzOi8vZ2l0aHViLmNvbS9vcGVuYWkvb3BlbmFpLWNvb2tib29rL2Jsb2IvbWFpbi9leGFtcGxlcy9Ib3dfdG9fZm9ybWF0X2lucHV0c190b19DaGF0R1BUX21vZGVscy5pcHluYlxuICAgICAgICBpZiAodGhpcy5tb2RlbE5hbWUgPT09IFwiZ3B0LTMuNS10dXJiby0wMzAxXCIpIHtcbiAgICAgICAgICAgIHRva2Vuc1Blck1lc3NhZ2UgPSA0O1xuICAgICAgICAgICAgdG9rZW5zUGVyTmFtZSA9IC0xO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdG9rZW5zUGVyTWVzc2FnZSA9IDM7XG4gICAgICAgICAgICB0b2tlbnNQZXJOYW1lID0gMTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb3VudFBlck1lc3NhZ2UgPSBhd2FpdCBQcm9taXNlLmFsbChtZXNzYWdlcy5tYXAoYXN5bmMgKG1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRleHRDb3VudCA9IGF3YWl0IHRoaXMuZ2V0TnVtVG9rZW5zKG1lc3NhZ2UuY29udGVudCk7XG4gICAgICAgICAgICBjb25zdCByb2xlQ291bnQgPSBhd2FpdCB0aGlzLmdldE51bVRva2VucyhtZXNzYWdlVG9PcGVuQUlSb2xlKG1lc3NhZ2UpKTtcbiAgICAgICAgICAgIGNvbnN0IG5hbWVDb3VudCA9IG1lc3NhZ2UubmFtZSAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgPyB0b2tlbnNQZXJOYW1lICsgKGF3YWl0IHRoaXMuZ2V0TnVtVG9rZW5zKG1lc3NhZ2UubmFtZSkpXG4gICAgICAgICAgICAgICAgOiAwO1xuICAgICAgICAgICAgbGV0IGNvdW50ID0gdGV4dENvdW50ICsgdG9rZW5zUGVyTWVzc2FnZSArIHJvbGVDb3VudCArIG5hbWVDb3VudDtcbiAgICAgICAgICAgIC8vIEZyb206IGh0dHBzOi8vZ2l0aHViLmNvbS9obWFyci9vcGVuYWktY2hhdC10b2tlbnMvYmxvYi9tYWluL3NyYy9pbmRleC50cyBtZXNzYWdlVG9rZW5Fc3RpbWF0ZVxuICAgICAgICAgICAgY29uc3Qgb3BlbkFJTWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgICAgICAgICBpZiAob3BlbkFJTWVzc2FnZS5fZ2V0VHlwZSgpID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICBjb3VudCAtPSAyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9wZW5BSU1lc3NhZ2UuYWRkaXRpb25hbF9rd2FyZ3M/LmZ1bmN0aW9uX2NhbGwpIHtcbiAgICAgICAgICAgICAgICBjb3VudCArPSAzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9wZW5BSU1lc3NhZ2U/LmFkZGl0aW9uYWxfa3dhcmdzLmZ1bmN0aW9uX2NhbGw/Lm5hbWUpIHtcbiAgICAgICAgICAgICAgICBjb3VudCArPSBhd2FpdCB0aGlzLmdldE51bVRva2VucyhvcGVuQUlNZXNzYWdlLmFkZGl0aW9uYWxfa3dhcmdzLmZ1bmN0aW9uX2NhbGw/Lm5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9wZW5BSU1lc3NhZ2UuYWRkaXRpb25hbF9rd2FyZ3MuZnVuY3Rpb25fY2FsbD8uYXJndW1lbnRzKSB7XG4gICAgICAgICAgICAgICAgY291bnQgKz0gYXdhaXQgdGhpcy5nZXROdW1Ub2tlbnMoXG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIG5ld2xpbmVzIGFuZCBzcGFjZXNcbiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShKU09OLnBhcnNlKG9wZW5BSU1lc3NhZ2UuYWRkaXRpb25hbF9rd2FyZ3MuZnVuY3Rpb25fY2FsbD8uYXJndW1lbnRzKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdG90YWxDb3VudCArPSBjb3VudDtcbiAgICAgICAgICAgIHJldHVybiBjb3VudDtcbiAgICAgICAgfSkpO1xuICAgICAgICB0b3RhbENvdW50ICs9IDM7IC8vIGV2ZXJ5IHJlcGx5IGlzIHByaW1lZCB3aXRoIDx8c3RhcnR8PmFzc2lzdGFudDx8bWVzc2FnZXw+XG4gICAgICAgIHJldHVybiB7IHRvdGFsQ291bnQsIGNvdW50UGVyTWVzc2FnZSB9O1xuICAgIH1cbiAgICBhc3luYyBjb21wbGV0aW9uV2l0aFJldHJ5KHJlcXVlc3QsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcmVxdWVzdE9wdGlvbnMgPSB0aGlzLl9nZXRDbGllbnRPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxsZXIuY2FsbChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuY2xpZW50LmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHJlcXVlc3QsIHJlcXVlc3RPcHRpb25zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvciA9IHdyYXBPcGVuQUlDbGllbnRFcnJvcihlKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIF9nZXRDbGllbnRPcHRpb25zKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNsaWVudCkge1xuICAgICAgICAgICAgY29uc3Qgb3BlbkFJRW5kcG9pbnRDb25maWcgPSB7XG4gICAgICAgICAgICAgICAgYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZTogdGhpcy5henVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lLFxuICAgICAgICAgICAgICAgIGF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lOiB0aGlzLmF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lLFxuICAgICAgICAgICAgICAgIGF6dXJlT3BlbkFJQXBpS2V5OiB0aGlzLmF6dXJlT3BlbkFJQXBpS2V5LFxuICAgICAgICAgICAgICAgIGF6dXJlT3BlbkFJQmFzZVBhdGg6IHRoaXMuYXp1cmVPcGVuQUlCYXNlUGF0aCxcbiAgICAgICAgICAgICAgICBiYXNlVVJMOiB0aGlzLmNsaWVudENvbmZpZy5iYXNlVVJMLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGVuZHBvaW50ID0gZ2V0RW5kcG9pbnQob3BlbkFJRW5kcG9pbnRDb25maWcpO1xuICAgICAgICAgICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuY2xpZW50Q29uZmlnLFxuICAgICAgICAgICAgICAgIGJhc2VVUkw6IGVuZHBvaW50LFxuICAgICAgICAgICAgICAgIHRpbWVvdXQ6IHRoaXMudGltZW91dCxcbiAgICAgICAgICAgICAgICBtYXhSZXRyaWVzOiAwLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICghcGFyYW1zLmJhc2VVUkwpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgcGFyYW1zLmJhc2VVUkw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNsaWVudCA9IG5ldyBPcGVuQUlDbGllbnQocGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXF1ZXN0T3B0aW9ucyA9IHtcbiAgICAgICAgICAgIC4uLnRoaXMuY2xpZW50Q29uZmlnLFxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMuYXp1cmVPcGVuQUlBcGlLZXkpIHtcbiAgICAgICAgICAgIHJlcXVlc3RPcHRpb25zLmhlYWRlcnMgPSB7XG4gICAgICAgICAgICAgICAgXCJhcGkta2V5XCI6IHRoaXMuYXp1cmVPcGVuQUlBcGlLZXksXG4gICAgICAgICAgICAgICAgLi4ucmVxdWVzdE9wdGlvbnMuaGVhZGVycyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXF1ZXN0T3B0aW9ucy5xdWVyeSA9IHtcbiAgICAgICAgICAgICAgICBcImFwaS12ZXJzaW9uXCI6IHRoaXMuYXp1cmVPcGVuQUlBcGlWZXJzaW9uLFxuICAgICAgICAgICAgICAgIC4uLnJlcXVlc3RPcHRpb25zLnF1ZXJ5LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVxdWVzdE9wdGlvbnM7XG4gICAgfVxuICAgIF9sbG1UeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJvcGVuYWlcIjtcbiAgICB9XG4gICAgLyoqIEBpZ25vcmUgKi9cbiAgICBfY29tYmluZUxMTU91dHB1dCguLi5sbG1PdXRwdXRzKSB7XG4gICAgICAgIHJldHVybiBsbG1PdXRwdXRzLnJlZHVjZSgoYWNjLCBsbG1PdXRwdXQpID0+IHtcbiAgICAgICAgICAgIGlmIChsbG1PdXRwdXQgJiYgbGxtT3V0cHV0LnRva2VuVXNhZ2UpIHtcbiAgICAgICAgICAgICAgICBhY2MudG9rZW5Vc2FnZS5jb21wbGV0aW9uVG9rZW5zICs9XG4gICAgICAgICAgICAgICAgICAgIGxsbU91dHB1dC50b2tlblVzYWdlLmNvbXBsZXRpb25Ub2tlbnMgPz8gMDtcbiAgICAgICAgICAgICAgICBhY2MudG9rZW5Vc2FnZS5wcm9tcHRUb2tlbnMgKz0gbGxtT3V0cHV0LnRva2VuVXNhZ2UucHJvbXB0VG9rZW5zID8/IDA7XG4gICAgICAgICAgICAgICAgYWNjLnRva2VuVXNhZ2UudG90YWxUb2tlbnMgKz0gbGxtT3V0cHV0LnRva2VuVXNhZ2UudG90YWxUb2tlbnMgPz8gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhY2M7XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHRva2VuVXNhZ2U6IHtcbiAgICAgICAgICAgICAgICBjb21wbGV0aW9uVG9rZW5zOiAwLFxuICAgICAgICAgICAgICAgIHByb21wdFRva2VuczogMCxcbiAgICAgICAgICAgICAgICB0b3RhbFRva2VuczogMCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6WyJPcGVuQUkiLCJPcGVuQUlDbGllbnQiLCJBSU1lc3NhZ2UiLCJBSU1lc3NhZ2VDaHVuayIsIkNoYXRNZXNzYWdlIiwiQ2hhdE1lc3NhZ2VDaHVuayIsIkZ1bmN0aW9uTWVzc2FnZUNodW5rIiwiSHVtYW5NZXNzYWdlQ2h1bmsiLCJTeXN0ZW1NZXNzYWdlQ2h1bmsiLCJUb29sTWVzc2FnZUNodW5rIiwiQ2hhdEdlbmVyYXRpb25DaHVuayIsImdldEVudmlyb25tZW50VmFyaWFibGUiLCJCYXNlQ2hhdE1vZGVsIiwiY29udmVydFRvT3BlbkFJVG9vbCIsImdldEVuZHBvaW50Iiwid3JhcE9wZW5BSUNsaWVudEVycm9yIiwiZm9ybWF0RnVuY3Rpb25EZWZpbml0aW9ucyIsImV4dHJhY3RHZW5lcmljTWVzc2FnZUN1c3RvbVJvbGUiLCJtZXNzYWdlIiwicm9sZSIsImNvbnNvbGUiLCJ3YXJuIiwibWVzc2FnZVRvT3BlbkFJUm9sZSIsInR5cGUiLCJfZ2V0VHlwZSIsImlzSW5zdGFuY2UiLCJFcnJvciIsIm9wZW5BSVJlc3BvbnNlVG9DaGF0TWVzc2FnZSIsImNvbnRlbnQiLCJmdW5jdGlvbl9jYWxsIiwidG9vbF9jYWxscyIsIl9jb252ZXJ0RGVsdGFUb01lc3NhZ2VDaHVuayIsImRlbHRhIiwiZGVmYXVsdFJvbGUiLCJhZGRpdGlvbmFsX2t3YXJncyIsIm5hbWUiLCJ0b29sX2NhbGxfaWQiLCJjb252ZXJ0TWVzc2FnZXNUb09wZW5BSVBhcmFtcyIsIm1lc3NhZ2VzIiwibWFwIiwiQ2hhdE9wZW5BSSIsImxjX25hbWUiLCJjYWxsS2V5cyIsImxjX3NlY3JldHMiLCJvcGVuQUlBcGlLZXkiLCJhenVyZU9wZW5BSUFwaUtleSIsIm9yZ2FuaXphdGlvbiIsImxjX2FsaWFzZXMiLCJtb2RlbE5hbWUiLCJhenVyZU9wZW5BSUFwaVZlcnNpb24iLCJhenVyZU9wZW5BSUFwaUluc3RhbmNlTmFtZSIsImF6dXJlT3BlbkFJQXBpRGVwbG95bWVudE5hbWUiLCJjb25zdHJ1Y3RvciIsImZpZWxkcyIsImNvbmZpZ3VyYXRpb24iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiYXp1cmVPcGVuQUlCYXNlUGF0aCIsIm1vZGVsS3dhcmdzIiwidGltZW91dCIsInRlbXBlcmF0dXJlIiwidG9wUCIsImZyZXF1ZW5jeVBlbmFsdHkiLCJwcmVzZW5jZVBlbmFsdHkiLCJtYXhUb2tlbnMiLCJsb2dwcm9icyIsInRvcExvZ3Byb2JzIiwibiIsImxvZ2l0QmlhcyIsInN0b3AiLCJ1c2VyIiwic3RyZWFtaW5nIiwiY2xpZW50Q29uZmlnIiwiYXBpS2V5IiwiYmFzZVVSTCIsImJhc2VQYXRoIiwiZGFuZ2Vyb3VzbHlBbGxvd0Jyb3dzZXIiLCJkZWZhdWx0SGVhZGVycyIsImJhc2VPcHRpb25zIiwiaGVhZGVycyIsImRlZmF1bHRRdWVyeSIsInBhcmFtcyIsImludm9jYXRpb25QYXJhbXMiLCJvcHRpb25zIiwiaXNTdHJ1Y3R1cmVkVG9vbEFycmF5IiwidG9vbHMiLCJ1bmRlZmluZWQiLCJldmVyeSIsInRvb2wiLCJBcnJheSIsImlzQXJyYXkiLCJsY19uYW1lc3BhY2UiLCJtb2RlbCIsInRvcF9wIiwiZnJlcXVlbmN5X3BlbmFsdHkiLCJwcmVzZW5jZV9wZW5hbHR5IiwibWF4X3Rva2VucyIsInRvcF9sb2dwcm9icyIsImxvZ2l0X2JpYXMiLCJzdHJlYW0iLCJmdW5jdGlvbnMiLCJ0b29sX2Nob2ljZSIsInJlc3BvbnNlX2Zvcm1hdCIsInNlZWQiLCJfaWRlbnRpZnlpbmdQYXJhbXMiLCJtb2RlbF9uYW1lIiwiX3N0cmVhbVJlc3BvbnNlQ2h1bmtzIiwicnVuTWFuYWdlciIsIm1lc3NhZ2VzTWFwcGVkIiwic3RyZWFtSXRlcmFibGUiLCJjb21wbGV0aW9uV2l0aFJldHJ5IiwiZGF0YSIsImNob2ljZSIsImNob2ljZXMiLCJjaHVuayIsIm5ld1Rva2VuSW5kaWNlcyIsInByb21wdCIsInByb21wdEluZGV4IiwiY29tcGxldGlvbiIsImluZGV4IiwibG9nIiwiZ2VuZXJhdGlvbkNodW5rIiwidGV4dCIsImdlbmVyYXRpb25JbmZvIiwiaGFuZGxlTExNTmV3VG9rZW4iLCJzaWduYWwiLCJhYm9ydGVkIiwiaWRlbnRpZnlpbmdQYXJhbXMiLCJfZ2VuZXJhdGUiLCJ0b2tlblVzYWdlIiwiZmluYWxDaHVua3MiLCJjb25jYXQiLCJnZW5lcmF0aW9ucyIsImVudHJpZXMiLCJzb3J0IiwiYUtleSIsImJLZXkiLCJwYXJzZUludCIsIl8iLCJwcm9tcHRUb2tlblVzYWdlIiwiZ2V0RXN0aW1hdGVkVG9rZW5Db3VudEZyb21Qcm9tcHQiLCJjb21wbGV0aW9uVG9rZW5Vc2FnZSIsImdldE51bVRva2Vuc0Zyb21HZW5lcmF0aW9ucyIsInByb21wdFRva2VucyIsImNvbXBsZXRpb25Ub2tlbnMiLCJ0b3RhbFRva2VucyIsImxsbU91dHB1dCIsImVzdGltYXRlZFRva2VuVXNhZ2UiLCJjb21wbGV0aW9uX3Rva2VucyIsInByb21wdF90b2tlbnMiLCJ0b3RhbF90b2tlbnMiLCJ1c2FnZSIsInBhcnQiLCJnZW5lcmF0aW9uIiwiZmluaXNoX3JlYXNvbiIsInB1c2giLCJ0b2tlbnMiLCJnZXROdW1Ub2tlbnNGcm9tTWVzc2FnZXMiLCJ0b3RhbENvdW50IiwicHJvbXB0RGVmaW5pdGlvbnMiLCJnZXROdW1Ub2tlbnMiLCJmaW5kIiwibSIsImdlbmVyYXRpb25Vc2FnZXMiLCJQcm9taXNlIiwiYWxsIiwiY291bnRQZXJNZXNzYWdlIiwicmVkdWNlIiwiYSIsImIiLCJ0b2tlbnNQZXJNZXNzYWdlIiwidG9rZW5zUGVyTmFtZSIsInRleHRDb3VudCIsInJvbGVDb3VudCIsIm5hbWVDb3VudCIsImNvdW50Iiwib3BlbkFJTWVzc2FnZSIsImFyZ3VtZW50cyIsIkpTT04iLCJzdHJpbmdpZnkiLCJwYXJzZSIsInJlcXVlc3QiLCJyZXF1ZXN0T3B0aW9ucyIsIl9nZXRDbGllbnRPcHRpb25zIiwiY2FsbGVyIiwiY2FsbCIsInJlcyIsImNsaWVudCIsImNoYXQiLCJjb21wbGV0aW9ucyIsImNyZWF0ZSIsImUiLCJlcnJvciIsIm9wZW5BSUVuZHBvaW50Q29uZmlnIiwiZW5kcG9pbnQiLCJtYXhSZXRyaWVzIiwicXVlcnkiLCJfbGxtVHlwZSIsIl9jb21iaW5lTExNT3V0cHV0IiwibGxtT3V0cHV0cyIsImFjYyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/openai/dist/chat_models.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/openai/dist/embeddings.js":
/*!***********************************************************!*\
  !*** ./node_modules/@langchain/openai/dist/embeddings.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OpenAIEmbeddings: () => (/* binding */ OpenAIEmbeddings)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var _langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/utils/env */ \"(rsc)/./node_modules/@langchain/core/utils/env.js\");\n/* harmony import */ var _langchain_core_embeddings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/embeddings */ \"(rsc)/./node_modules/@langchain/core/embeddings.js\");\n/* harmony import */ var _langchain_core_utils_chunk_array__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @langchain/core/utils/chunk_array */ \"(rsc)/./node_modules/@langchain/core/utils/chunk_array.js\");\n/* harmony import */ var _utils_azure_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils/azure.js */ \"(rsc)/./node_modules/@langchain/openai/dist/utils/azure.js\");\n/* harmony import */ var _utils_openai_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils/openai.js */ \"(rsc)/./node_modules/@langchain/openai/dist/utils/openai.js\");\n\n\n\n\n\n\n/**\n * Class for generating embeddings using the OpenAI API. Extends the\n * Embeddings class and implements OpenAIEmbeddingsParams and\n * AzureOpenAIInput.\n * @example\n * ```typescript\n * // Embed a query using OpenAIEmbeddings to generate embeddings for a given text\n * const model = new OpenAIEmbeddings();\n * const res = await model.embedQuery(\n *   \"What would be a good company name for a company that makes colorful socks?\",\n * );\n * console.log({ res });\n *\n * ```\n */ class OpenAIEmbeddings extends _langchain_core_embeddings__WEBPACK_IMPORTED_MODULE_1__.Embeddings {\n    constructor(fields, configuration){\n        const fieldsWithDefaults = {\n            maxConcurrency: 2,\n            ...fields\n        };\n        super(fieldsWithDefaults);\n        Object.defineProperty(this, \"modelName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"text-embedding-ada-002\"\n        });\n        Object.defineProperty(this, \"batchSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 512\n        });\n        // TODO: Update to `false` on next minor release (see: https://github.com/langchain-ai/langchainjs/pull/3612)\n        Object.defineProperty(this, \"stripNewLines\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        /**\n         * The number of dimensions the resulting output embeddings should have.\n         * Only supported in `text-embedding-3` and later models.\n         */ Object.defineProperty(this, \"dimensions\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"timeout\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiVersion\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiInstanceName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiDeploymentName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIBasePath\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"organization\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"client\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"clientConfig\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        let apiKey = fieldsWithDefaults?.openAIApiKey ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable)(\"OPENAI_API_KEY\");\n        const azureApiKey = fieldsWithDefaults?.azureOpenAIApiKey ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable)(\"AZURE_OPENAI_API_KEY\");\n        if (!azureApiKey && !apiKey) {\n            throw new Error(\"OpenAI or Azure OpenAI API key not found\");\n        }\n        const azureApiInstanceName = fieldsWithDefaults?.azureOpenAIApiInstanceName ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable)(\"AZURE_OPENAI_API_INSTANCE_NAME\");\n        const azureApiDeploymentName = (fieldsWithDefaults?.azureOpenAIApiEmbeddingsDeploymentName || fieldsWithDefaults?.azureOpenAIApiDeploymentName) ?? ((0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable)(\"AZURE_OPENAI_API_EMBEDDINGS_DEPLOYMENT_NAME\") || (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable)(\"AZURE_OPENAI_API_DEPLOYMENT_NAME\"));\n        const azureApiVersion = fieldsWithDefaults?.azureOpenAIApiVersion ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable)(\"AZURE_OPENAI_API_VERSION\");\n        this.azureOpenAIBasePath = fieldsWithDefaults?.azureOpenAIBasePath ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable)(\"AZURE_OPENAI_BASE_PATH\");\n        this.organization = fieldsWithDefaults?.configuration?.organization ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_0__.getEnvironmentVariable)(\"OPENAI_ORGANIZATION\");\n        this.modelName = fieldsWithDefaults?.modelName ?? this.modelName;\n        this.batchSize = fieldsWithDefaults?.batchSize ?? (azureApiKey ? 1 : this.batchSize);\n        this.stripNewLines = fieldsWithDefaults?.stripNewLines ?? this.stripNewLines;\n        this.timeout = fieldsWithDefaults?.timeout;\n        this.dimensions = fieldsWithDefaults?.dimensions;\n        this.azureOpenAIApiVersion = azureApiVersion;\n        this.azureOpenAIApiKey = azureApiKey;\n        this.azureOpenAIApiInstanceName = azureApiInstanceName;\n        this.azureOpenAIApiDeploymentName = azureApiDeploymentName;\n        if (this.azureOpenAIApiKey) {\n            if (!this.azureOpenAIApiInstanceName && !this.azureOpenAIBasePath) {\n                throw new Error(\"Azure OpenAI API instance name not found\");\n            }\n            if (!this.azureOpenAIApiDeploymentName) {\n                throw new Error(\"Azure OpenAI API deployment name not found\");\n            }\n            if (!this.azureOpenAIApiVersion) {\n                throw new Error(\"Azure OpenAI API version not found\");\n            }\n            apiKey = apiKey ?? \"\";\n        }\n        this.clientConfig = {\n            apiKey,\n            organization: this.organization,\n            baseURL: configuration?.basePath,\n            dangerouslyAllowBrowser: true,\n            defaultHeaders: configuration?.baseOptions?.headers,\n            defaultQuery: configuration?.baseOptions?.params,\n            ...configuration,\n            ...fields?.configuration\n        };\n    }\n    /**\n     * Method to generate embeddings for an array of documents. Splits the\n     * documents into batches and makes requests to the OpenAI API to generate\n     * embeddings.\n     * @param texts Array of documents to generate embeddings for.\n     * @returns Promise that resolves to a 2D array of embeddings for each document.\n     */ async embedDocuments(texts) {\n        const batches = (0,_langchain_core_utils_chunk_array__WEBPACK_IMPORTED_MODULE_2__.chunkArray)(this.stripNewLines ? texts.map((t)=>t.replace(/\\n/g, \" \")) : texts, this.batchSize);\n        const batchRequests = batches.map((batch)=>{\n            const params = {\n                model: this.modelName,\n                input: batch\n            };\n            if (this.dimensions) {\n                params.dimensions = this.dimensions;\n            }\n            return this.embeddingWithRetry(params);\n        });\n        const batchResponses = await Promise.all(batchRequests);\n        const embeddings = [];\n        for(let i = 0; i < batchResponses.length; i += 1){\n            const batch = batches[i];\n            const { data: batchResponse } = batchResponses[i];\n            for(let j = 0; j < batch.length; j += 1){\n                embeddings.push(batchResponse[j].embedding);\n            }\n        }\n        return embeddings;\n    }\n    /**\n     * Method to generate an embedding for a single document. Calls the\n     * embeddingWithRetry method with the document as the input.\n     * @param text Document to generate an embedding for.\n     * @returns Promise that resolves to an embedding for the document.\n     */ async embedQuery(text) {\n        const params = {\n            model: this.modelName,\n            input: this.stripNewLines ? text.replace(/\\n/g, \" \") : text\n        };\n        if (this.dimensions) {\n            params.dimensions = this.dimensions;\n        }\n        const { data } = await this.embeddingWithRetry(params);\n        return data[0].embedding;\n    }\n    /**\n     * Private method to make a request to the OpenAI API to generate\n     * embeddings. Handles the retry logic and returns the response from the\n     * API.\n     * @param request Request to send to the OpenAI API.\n     * @returns Promise that resolves to the response from the API.\n     */ async embeddingWithRetry(request) {\n        if (!this.client) {\n            const openAIEndpointConfig = {\n                azureOpenAIApiDeploymentName: this.azureOpenAIApiDeploymentName,\n                azureOpenAIApiInstanceName: this.azureOpenAIApiInstanceName,\n                azureOpenAIApiKey: this.azureOpenAIApiKey,\n                azureOpenAIBasePath: this.azureOpenAIBasePath,\n                baseURL: this.clientConfig.baseURL\n            };\n            const endpoint = (0,_utils_azure_js__WEBPACK_IMPORTED_MODULE_3__.getEndpoint)(openAIEndpointConfig);\n            const params = {\n                ...this.clientConfig,\n                baseURL: endpoint,\n                timeout: this.timeout,\n                maxRetries: 0\n            };\n            if (!params.baseURL) {\n                delete params.baseURL;\n            }\n            this.client = new openai__WEBPACK_IMPORTED_MODULE_5__.OpenAI(params);\n        }\n        const requestOptions = {};\n        if (this.azureOpenAIApiKey) {\n            requestOptions.headers = {\n                \"api-key\": this.azureOpenAIApiKey,\n                ...requestOptions.headers\n            };\n            requestOptions.query = {\n                \"api-version\": this.azureOpenAIApiVersion,\n                ...requestOptions.query\n            };\n        }\n        return this.caller.call(async ()=>{\n            try {\n                const res = await this.client.embeddings.create(request, requestOptions);\n                return res;\n            } catch (e) {\n                const error = (0,_utils_openai_js__WEBPACK_IMPORTED_MODULE_4__.wrapOpenAIClientError)(e);\n                throw error;\n            }\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvZGlzdC9lbWJlZGRpbmdzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBZ0Q7QUFDbUI7QUFDWDtBQUNPO0FBQ2hCO0FBQ1c7QUFDMUQ7Ozs7Ozs7Ozs7Ozs7O0NBY0MsR0FDTSxNQUFNTyx5QkFBeUJKLGtFQUFVQTtJQUM1Q0ssWUFBWUMsTUFBTSxFQUFFQyxhQUFhLENBQUU7UUFDL0IsTUFBTUMscUJBQXFCO1lBQUVDLGdCQUFnQjtZQUFHLEdBQUdILE1BQU07UUFBQztRQUMxRCxLQUFLLENBQUNFO1FBQ05FLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsYUFBYTtZQUNyQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsYUFBYTtZQUNyQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0EsNkdBQTZHO1FBQzdHTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGlCQUFpQjtZQUN6Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0E7OztTQUdDLEdBQ0RMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsY0FBYztZQUN0Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsV0FBVztZQUNuQ0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUseUJBQXlCO1lBQ2pEQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxxQkFBcUI7WUFD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LENBQUNpQyxNQUFNLEdBQUcsSUFBSXZFLDBDQUFZQSxDQUFDNkM7UUFDbkM7UUFDQSxNQUFNOEIsaUJBQWlCLENBQUM7UUFDeEIsSUFBSSxJQUFJLENBQUN0RCxpQkFBaUIsRUFBRTtZQUN4QnNELGVBQWVoQyxPQUFPLEdBQUc7Z0JBQ3JCLFdBQVcsSUFBSSxDQUFDdEIsaUJBQWlCO2dCQUNqQyxHQUFHc0QsZUFBZWhDLE9BQU87WUFDN0I7WUFDQWdDLGVBQWVDLEtBQUssR0FBRztnQkFDbkIsZUFBZSxJQUFJLENBQUMvQyxxQkFBcUI7Z0JBQ3pDLEdBQUc4QyxlQUFlQyxLQUFLO1lBQzNCO1FBQ0o7UUFDQSxPQUFPLElBQUksQ0FBQ0MsTUFBTSxDQUFDQyxJQUFJLENBQUM7WUFDcEIsSUFBSTtnQkFDQSxNQUFNQyxNQUFNLE1BQU0sSUFBSSxDQUFDUixNQUFNLENBQUNYLFVBQVUsQ0FBQ29CLE1BQU0sQ0FBQ1YsU0FBU0s7Z0JBQ3pELE9BQU9JO1lBQ1gsRUFDQSxPQUFPRSxHQUFHO2dCQUNOLE1BQU1DLFFBQVE3RSx1RUFBcUJBLENBQUM0RTtnQkFDcEMsTUFBTUM7WUFDVjtRQUNKO0lBQ0o7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLWZvcm0tYnVpbGRlci10dXRvcmlhbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL29wZW5haS9kaXN0L2VtYmVkZGluZ3MuanM/ZmY5OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBPcGVuQUkgYXMgT3BlbkFJQ2xpZW50IH0gZnJvbSBcIm9wZW5haVwiO1xuaW1wb3J0IHsgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSB9IGZyb20gXCJAbGFuZ2NoYWluL2NvcmUvdXRpbHMvZW52XCI7XG5pbXBvcnQgeyBFbWJlZGRpbmdzIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9lbWJlZGRpbmdzXCI7XG5pbXBvcnQgeyBjaHVua0FycmF5IH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS91dGlscy9jaHVua19hcnJheVwiO1xuaW1wb3J0IHsgZ2V0RW5kcG9pbnQgfSBmcm9tIFwiLi91dGlscy9henVyZS5qc1wiO1xuaW1wb3J0IHsgd3JhcE9wZW5BSUNsaWVudEVycm9yIH0gZnJvbSBcIi4vdXRpbHMvb3BlbmFpLmpzXCI7XG4vKipcbiAqIENsYXNzIGZvciBnZW5lcmF0aW5nIGVtYmVkZGluZ3MgdXNpbmcgdGhlIE9wZW5BSSBBUEkuIEV4dGVuZHMgdGhlXG4gKiBFbWJlZGRpbmdzIGNsYXNzIGFuZCBpbXBsZW1lbnRzIE9wZW5BSUVtYmVkZGluZ3NQYXJhbXMgYW5kXG4gKiBBenVyZU9wZW5BSUlucHV0LlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIC8vIEVtYmVkIGEgcXVlcnkgdXNpbmcgT3BlbkFJRW1iZWRkaW5ncyB0byBnZW5lcmF0ZSBlbWJlZGRpbmdzIGZvciBhIGdpdmVuIHRleHRcbiAqIGNvbnN0IG1vZGVsID0gbmV3IE9wZW5BSUVtYmVkZGluZ3MoKTtcbiAqIGNvbnN0IHJlcyA9IGF3YWl0IG1vZGVsLmVtYmVkUXVlcnkoXG4gKiAgIFwiV2hhdCB3b3VsZCBiZSBhIGdvb2QgY29tcGFueSBuYW1lIGZvciBhIGNvbXBhbnkgdGhhdCBtYWtlcyBjb2xvcmZ1bCBzb2Nrcz9cIixcbiAqICk7XG4gKiBjb25zb2xlLmxvZyh7IHJlcyB9KTtcbiAqXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNsYXNzIE9wZW5BSUVtYmVkZGluZ3MgZXh0ZW5kcyBFbWJlZGRpbmdzIHtcbiAgICBjb25zdHJ1Y3RvcihmaWVsZHMsIGNvbmZpZ3VyYXRpb24pIHtcbiAgICAgICAgY29uc3QgZmllbGRzV2l0aERlZmF1bHRzID0geyBtYXhDb25jdXJyZW5jeTogMiwgLi4uZmllbGRzIH07XG4gICAgICAgIHN1cGVyKGZpZWxkc1dpdGhEZWZhdWx0cyk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1vZGVsTmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJ0ZXh0LWVtYmVkZGluZy1hZGEtMDAyXCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImJhdGNoU2l6ZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogNTEyXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBUT0RPOiBVcGRhdGUgdG8gYGZhbHNlYCBvbiBuZXh0IG1pbm9yIHJlbGVhc2UgKHNlZTogaHR0cHM6Ly9naXRodWIuY29tL2xhbmdjaGFpbi1haS9sYW5nY2hhaW5qcy9wdWxsLzM2MTIpXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInN0cmlwTmV3TGluZXNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbnVtYmVyIG9mIGRpbWVuc2lvbnMgdGhlIHJlc3VsdGluZyBvdXRwdXQgZW1iZWRkaW5ncyBzaG91bGQgaGF2ZS5cbiAgICAgICAgICogT25seSBzdXBwb3J0ZWQgaW4gYHRleHQtZW1iZWRkaW5nLTNgIGFuZCBsYXRlciBtb2RlbHMuXG4gICAgICAgICAqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJkaW1lbnNpb25zXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRpbWVvdXRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXp1cmVPcGVuQUlBcGlWZXJzaW9uXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImF6dXJlT3BlbkFJQXBpS2V5XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImF6dXJlT3BlbkFJQXBpRGVwbG95bWVudE5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXp1cmVPcGVuQUlCYXNlUGF0aFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvcmdhbml6YXRpb25cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2xpZW50XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNsaWVudENvbmZpZ1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgYXBpS2V5ID0gZmllbGRzV2l0aERlZmF1bHRzPy5vcGVuQUlBcGlLZXkgPz9cbiAgICAgICAgICAgIGdldEVudmlyb25tZW50VmFyaWFibGUoXCJPUEVOQUlfQVBJX0tFWVwiKTtcbiAgICAgICAgY29uc3QgYXp1cmVBcGlLZXkgPSBmaWVsZHNXaXRoRGVmYXVsdHM/LmF6dXJlT3BlbkFJQXBpS2V5ID8/XG4gICAgICAgICAgICBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiQVpVUkVfT1BFTkFJX0FQSV9LRVlcIik7XG4gICAgICAgIGlmICghYXp1cmVBcGlLZXkgJiYgIWFwaUtleSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT3BlbkFJIG9yIEF6dXJlIE9wZW5BSSBBUEkga2V5IG5vdCBmb3VuZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhenVyZUFwaUluc3RhbmNlTmFtZSA9IGZpZWxkc1dpdGhEZWZhdWx0cz8uYXp1cmVPcGVuQUlBcGlJbnN0YW5jZU5hbWUgPz9cbiAgICAgICAgICAgIGdldEVudmlyb25tZW50VmFyaWFibGUoXCJBWlVSRV9PUEVOQUlfQVBJX0lOU1RBTkNFX05BTUVcIik7XG4gICAgICAgIGNvbnN0IGF6dXJlQXBpRGVwbG95bWVudE5hbWUgPSAoZmllbGRzV2l0aERlZmF1bHRzPy5henVyZU9wZW5BSUFwaUVtYmVkZGluZ3NEZXBsb3ltZW50TmFtZSB8fFxuICAgICAgICAgICAgZmllbGRzV2l0aERlZmF1bHRzPy5henVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lKSA/P1xuICAgICAgICAgICAgKGdldEVudmlyb25tZW50VmFyaWFibGUoXCJBWlVSRV9PUEVOQUlfQVBJX0VNQkVERElOR1NfREVQTE9ZTUVOVF9OQU1FXCIpIHx8XG4gICAgICAgICAgICAgICAgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkFaVVJFX09QRU5BSV9BUElfREVQTE9ZTUVOVF9OQU1FXCIpKTtcbiAgICAgICAgY29uc3QgYXp1cmVBcGlWZXJzaW9uID0gZmllbGRzV2l0aERlZmF1bHRzPy5henVyZU9wZW5BSUFwaVZlcnNpb24gPz9cbiAgICAgICAgICAgIGdldEVudmlyb25tZW50VmFyaWFibGUoXCJBWlVSRV9PUEVOQUlfQVBJX1ZFUlNJT05cIik7XG4gICAgICAgIHRoaXMuYXp1cmVPcGVuQUlCYXNlUGF0aCA9XG4gICAgICAgICAgICBmaWVsZHNXaXRoRGVmYXVsdHM/LmF6dXJlT3BlbkFJQmFzZVBhdGggPz9cbiAgICAgICAgICAgICAgICBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiQVpVUkVfT1BFTkFJX0JBU0VfUEFUSFwiKTtcbiAgICAgICAgdGhpcy5vcmdhbml6YXRpb24gPVxuICAgICAgICAgICAgZmllbGRzV2l0aERlZmF1bHRzPy5jb25maWd1cmF0aW9uPy5vcmdhbml6YXRpb24gPz9cbiAgICAgICAgICAgICAgICBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiT1BFTkFJX09SR0FOSVpBVElPTlwiKTtcbiAgICAgICAgdGhpcy5tb2RlbE5hbWUgPSBmaWVsZHNXaXRoRGVmYXVsdHM/Lm1vZGVsTmFtZSA/PyB0aGlzLm1vZGVsTmFtZTtcbiAgICAgICAgdGhpcy5iYXRjaFNpemUgPVxuICAgICAgICAgICAgZmllbGRzV2l0aERlZmF1bHRzPy5iYXRjaFNpemUgPz8gKGF6dXJlQXBpS2V5ID8gMSA6IHRoaXMuYmF0Y2hTaXplKTtcbiAgICAgICAgdGhpcy5zdHJpcE5ld0xpbmVzID1cbiAgICAgICAgICAgIGZpZWxkc1dpdGhEZWZhdWx0cz8uc3RyaXBOZXdMaW5lcyA/PyB0aGlzLnN0cmlwTmV3TGluZXM7XG4gICAgICAgIHRoaXMudGltZW91dCA9IGZpZWxkc1dpdGhEZWZhdWx0cz8udGltZW91dDtcbiAgICAgICAgdGhpcy5kaW1lbnNpb25zID0gZmllbGRzV2l0aERlZmF1bHRzPy5kaW1lbnNpb25zO1xuICAgICAgICB0aGlzLmF6dXJlT3BlbkFJQXBpVmVyc2lvbiA9IGF6dXJlQXBpVmVyc2lvbjtcbiAgICAgICAgdGhpcy5henVyZU9wZW5BSUFwaUtleSA9IGF6dXJlQXBpS2V5O1xuICAgICAgICB0aGlzLmF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lID0gYXp1cmVBcGlJbnN0YW5jZU5hbWU7XG4gICAgICAgIHRoaXMuYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZSA9IGF6dXJlQXBpRGVwbG95bWVudE5hbWU7XG4gICAgICAgIGlmICh0aGlzLmF6dXJlT3BlbkFJQXBpS2V5KSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYXp1cmVPcGVuQUlBcGlJbnN0YW5jZU5hbWUgJiYgIXRoaXMuYXp1cmVPcGVuQUlCYXNlUGF0aCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkF6dXJlIE9wZW5BSSBBUEkgaW5zdGFuY2UgbmFtZSBub3QgZm91bmRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkF6dXJlIE9wZW5BSSBBUEkgZGVwbG95bWVudCBuYW1lIG5vdCBmb3VuZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5henVyZU9wZW5BSUFwaVZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBenVyZSBPcGVuQUkgQVBJIHZlcnNpb24gbm90IGZvdW5kXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXBpS2V5ID0gYXBpS2V5ID8/IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jbGllbnRDb25maWcgPSB7XG4gICAgICAgICAgICBhcGlLZXksXG4gICAgICAgICAgICBvcmdhbml6YXRpb246IHRoaXMub3JnYW5pemF0aW9uLFxuICAgICAgICAgICAgYmFzZVVSTDogY29uZmlndXJhdGlvbj8uYmFzZVBhdGgsXG4gICAgICAgICAgICBkYW5nZXJvdXNseUFsbG93QnJvd3NlcjogdHJ1ZSxcbiAgICAgICAgICAgIGRlZmF1bHRIZWFkZXJzOiBjb25maWd1cmF0aW9uPy5iYXNlT3B0aW9ucz8uaGVhZGVycyxcbiAgICAgICAgICAgIGRlZmF1bHRRdWVyeTogY29uZmlndXJhdGlvbj8uYmFzZU9wdGlvbnM/LnBhcmFtcyxcbiAgICAgICAgICAgIC4uLmNvbmZpZ3VyYXRpb24sXG4gICAgICAgICAgICAuLi5maWVsZHM/LmNvbmZpZ3VyYXRpb24sXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB0byBnZW5lcmF0ZSBlbWJlZGRpbmdzIGZvciBhbiBhcnJheSBvZiBkb2N1bWVudHMuIFNwbGl0cyB0aGVcbiAgICAgKiBkb2N1bWVudHMgaW50byBiYXRjaGVzIGFuZCBtYWtlcyByZXF1ZXN0cyB0byB0aGUgT3BlbkFJIEFQSSB0byBnZW5lcmF0ZVxuICAgICAqIGVtYmVkZGluZ3MuXG4gICAgICogQHBhcmFtIHRleHRzIEFycmF5IG9mIGRvY3VtZW50cyB0byBnZW5lcmF0ZSBlbWJlZGRpbmdzIGZvci5cbiAgICAgKiBAcmV0dXJucyBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gYSAyRCBhcnJheSBvZiBlbWJlZGRpbmdzIGZvciBlYWNoIGRvY3VtZW50LlxuICAgICAqL1xuICAgIGFzeW5jIGVtYmVkRG9jdW1lbnRzKHRleHRzKSB7XG4gICAgICAgIGNvbnN0IGJhdGNoZXMgPSBjaHVua0FycmF5KHRoaXMuc3RyaXBOZXdMaW5lcyA/IHRleHRzLm1hcCgodCkgPT4gdC5yZXBsYWNlKC9cXG4vZywgXCIgXCIpKSA6IHRleHRzLCB0aGlzLmJhdGNoU2l6ZSk7XG4gICAgICAgIGNvbnN0IGJhdGNoUmVxdWVzdHMgPSBiYXRjaGVzLm1hcCgoYmF0Y2gpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICBtb2RlbDogdGhpcy5tb2RlbE5hbWUsXG4gICAgICAgICAgICAgICAgaW5wdXQ6IGJhdGNoLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICh0aGlzLmRpbWVuc2lvbnMpIHtcbiAgICAgICAgICAgICAgICBwYXJhbXMuZGltZW5zaW9ucyA9IHRoaXMuZGltZW5zaW9ucztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVtYmVkZGluZ1dpdGhSZXRyeShwYXJhbXMpO1xuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgYmF0Y2hSZXNwb25zZXMgPSBhd2FpdCBQcm9taXNlLmFsbChiYXRjaFJlcXVlc3RzKTtcbiAgICAgICAgY29uc3QgZW1iZWRkaW5ncyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJhdGNoUmVzcG9uc2VzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCBiYXRjaCA9IGJhdGNoZXNbaV07XG4gICAgICAgICAgICBjb25zdCB7IGRhdGE6IGJhdGNoUmVzcG9uc2UgfSA9IGJhdGNoUmVzcG9uc2VzW2ldO1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBiYXRjaC5sZW5ndGg7IGogKz0gMSkge1xuICAgICAgICAgICAgICAgIGVtYmVkZGluZ3MucHVzaChiYXRjaFJlc3BvbnNlW2pdLmVtYmVkZGluZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVtYmVkZGluZ3M7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ldGhvZCB0byBnZW5lcmF0ZSBhbiBlbWJlZGRpbmcgZm9yIGEgc2luZ2xlIGRvY3VtZW50LiBDYWxscyB0aGVcbiAgICAgKiBlbWJlZGRpbmdXaXRoUmV0cnkgbWV0aG9kIHdpdGggdGhlIGRvY3VtZW50IGFzIHRoZSBpbnB1dC5cbiAgICAgKiBAcGFyYW0gdGV4dCBEb2N1bWVudCB0byBnZW5lcmF0ZSBhbiBlbWJlZGRpbmcgZm9yLlxuICAgICAqIEByZXR1cm5zIFByb21pc2UgdGhhdCByZXNvbHZlcyB0byBhbiBlbWJlZGRpbmcgZm9yIHRoZSBkb2N1bWVudC5cbiAgICAgKi9cbiAgICBhc3luYyBlbWJlZFF1ZXJ5KHRleHQpIHtcbiAgICAgICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgICAgICAgbW9kZWw6IHRoaXMubW9kZWxOYW1lLFxuICAgICAgICAgICAgaW5wdXQ6IHRoaXMuc3RyaXBOZXdMaW5lcyA/IHRleHQucmVwbGFjZSgvXFxuL2csIFwiIFwiKSA6IHRleHQsXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLmRpbWVuc2lvbnMpIHtcbiAgICAgICAgICAgIHBhcmFtcy5kaW1lbnNpb25zID0gdGhpcy5kaW1lbnNpb25zO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgdGhpcy5lbWJlZGRpbmdXaXRoUmV0cnkocGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIGRhdGFbMF0uZW1iZWRkaW5nO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcml2YXRlIG1ldGhvZCB0byBtYWtlIGEgcmVxdWVzdCB0byB0aGUgT3BlbkFJIEFQSSB0byBnZW5lcmF0ZVxuICAgICAqIGVtYmVkZGluZ3MuIEhhbmRsZXMgdGhlIHJldHJ5IGxvZ2ljIGFuZCByZXR1cm5zIHRoZSByZXNwb25zZSBmcm9tIHRoZVxuICAgICAqIEFQSS5cbiAgICAgKiBAcGFyYW0gcmVxdWVzdCBSZXF1ZXN0IHRvIHNlbmQgdG8gdGhlIE9wZW5BSSBBUEkuXG4gICAgICogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRoZSByZXNwb25zZSBmcm9tIHRoZSBBUEkuXG4gICAgICovXG4gICAgYXN5bmMgZW1iZWRkaW5nV2l0aFJldHJ5KHJlcXVlc3QpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNsaWVudCkge1xuICAgICAgICAgICAgY29uc3Qgb3BlbkFJRW5kcG9pbnRDb25maWcgPSB7XG4gICAgICAgICAgICAgICAgYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZTogdGhpcy5henVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lLFxuICAgICAgICAgICAgICAgIGF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lOiB0aGlzLmF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lLFxuICAgICAgICAgICAgICAgIGF6dXJlT3BlbkFJQXBpS2V5OiB0aGlzLmF6dXJlT3BlbkFJQXBpS2V5LFxuICAgICAgICAgICAgICAgIGF6dXJlT3BlbkFJQmFzZVBhdGg6IHRoaXMuYXp1cmVPcGVuQUlCYXNlUGF0aCxcbiAgICAgICAgICAgICAgICBiYXNlVVJMOiB0aGlzLmNsaWVudENvbmZpZy5iYXNlVVJMLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGVuZHBvaW50ID0gZ2V0RW5kcG9pbnQob3BlbkFJRW5kcG9pbnRDb25maWcpO1xuICAgICAgICAgICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuY2xpZW50Q29uZmlnLFxuICAgICAgICAgICAgICAgIGJhc2VVUkw6IGVuZHBvaW50LFxuICAgICAgICAgICAgICAgIHRpbWVvdXQ6IHRoaXMudGltZW91dCxcbiAgICAgICAgICAgICAgICBtYXhSZXRyaWVzOiAwLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICghcGFyYW1zLmJhc2VVUkwpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgcGFyYW1zLmJhc2VVUkw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNsaWVudCA9IG5ldyBPcGVuQUlDbGllbnQocGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXF1ZXN0T3B0aW9ucyA9IHt9O1xuICAgICAgICBpZiAodGhpcy5henVyZU9wZW5BSUFwaUtleSkge1xuICAgICAgICAgICAgcmVxdWVzdE9wdGlvbnMuaGVhZGVycyA9IHtcbiAgICAgICAgICAgICAgICBcImFwaS1rZXlcIjogdGhpcy5henVyZU9wZW5BSUFwaUtleSxcbiAgICAgICAgICAgICAgICAuLi5yZXF1ZXN0T3B0aW9ucy5oZWFkZXJzLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJlcXVlc3RPcHRpb25zLnF1ZXJ5ID0ge1xuICAgICAgICAgICAgICAgIFwiYXBpLXZlcnNpb25cIjogdGhpcy5henVyZU9wZW5BSUFwaVZlcnNpb24sXG4gICAgICAgICAgICAgICAgLi4ucmVxdWVzdE9wdGlvbnMucXVlcnksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGxlci5jYWxsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5jbGllbnQuZW1iZWRkaW5ncy5jcmVhdGUocmVxdWVzdCwgcmVxdWVzdE9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gd3JhcE9wZW5BSUNsaWVudEVycm9yKGUpO1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiT3BlbkFJIiwiT3BlbkFJQ2xpZW50IiwiZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSIsIkVtYmVkZGluZ3MiLCJjaHVua0FycmF5IiwiZ2V0RW5kcG9pbnQiLCJ3cmFwT3BlbkFJQ2xpZW50RXJyb3IiLCJPcGVuQUlFbWJlZGRpbmdzIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJjb25maWd1cmF0aW9uIiwiZmllbGRzV2l0aERlZmF1bHRzIiwibWF4Q29uY3VycmVuY3kiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsInZhbHVlIiwiYXBpS2V5Iiwib3BlbkFJQXBpS2V5IiwiYXp1cmVBcGlLZXkiLCJhenVyZU9wZW5BSUFwaUtleSIsIkVycm9yIiwiYXp1cmVBcGlJbnN0YW5jZU5hbWUiLCJhenVyZU9wZW5BSUFwaUluc3RhbmNlTmFtZSIsImF6dXJlQXBpRGVwbG95bWVudE5hbWUiLCJhenVyZU9wZW5BSUFwaUVtYmVkZGluZ3NEZXBsb3ltZW50TmFtZSIsImF6dXJlT3BlbkFJQXBpRGVwbG95bWVudE5hbWUiLCJhenVyZUFwaVZlcnNpb24iLCJhenVyZU9wZW5BSUFwaVZlcnNpb24iLCJhenVyZU9wZW5BSUJhc2VQYXRoIiwib3JnYW5pemF0aW9uIiwibW9kZWxOYW1lIiwiYmF0Y2hTaXplIiwic3RyaXBOZXdMaW5lcyIsInRpbWVvdXQiLCJkaW1lbnNpb25zIiwiY2xpZW50Q29uZmlnIiwiYmFzZVVSTCIsImJhc2VQYXRoIiwiZGFuZ2Vyb3VzbHlBbGxvd0Jyb3dzZXIiLCJkZWZhdWx0SGVhZGVycyIsImJhc2VPcHRpb25zIiwiaGVhZGVycyIsImRlZmF1bHRRdWVyeSIsInBhcmFtcyIsImVtYmVkRG9jdW1lbnRzIiwidGV4dHMiLCJiYXRjaGVzIiwibWFwIiwidCIsInJlcGxhY2UiLCJiYXRjaFJlcXVlc3RzIiwiYmF0Y2giLCJtb2RlbCIsImlucHV0IiwiZW1iZWRkaW5nV2l0aFJldHJ5IiwiYmF0Y2hSZXNwb25zZXMiLCJQcm9taXNlIiwiYWxsIiwiZW1iZWRkaW5ncyIsImkiLCJsZW5ndGgiLCJkYXRhIiwiYmF0Y2hSZXNwb25zZSIsImoiLCJwdXNoIiwiZW1iZWRkaW5nIiwiZW1iZWRRdWVyeSIsInRleHQiLCJyZXF1ZXN0IiwiY2xpZW50Iiwib3BlbkFJRW5kcG9pbnRDb25maWciLCJlbmRwb2ludCIsIm1heFJldHJpZXMiLCJyZXF1ZXN0T3B0aW9ucyIsInF1ZXJ5IiwiY2FsbGVyIiwiY2FsbCIsInJlcyIsImNyZWF0ZSIsImUiLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/openai/dist/embeddings.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/openai/dist/index.js":
/*!******************************************************!*\
  !*** ./node_modules/@langchain/openai/dist/index.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AzureChatOpenAI: () => (/* reexport safe */ _azure_chat_models_js__WEBPACK_IMPORTED_MODULE_2__.AzureChatOpenAI),\n/* harmony export */   AzureOpenAI: () => (/* reexport safe */ _azure_llms_js__WEBPACK_IMPORTED_MODULE_4__.AzureOpenAI),\n/* harmony export */   ChatOpenAI: () => (/* reexport safe */ _chat_models_js__WEBPACK_IMPORTED_MODULE_1__.ChatOpenAI),\n/* harmony export */   OpenAI: () => (/* reexport safe */ _llms_js__WEBPACK_IMPORTED_MODULE_3__.OpenAI),\n/* harmony export */   OpenAIChat: () => (/* reexport safe */ _llms_js__WEBPACK_IMPORTED_MODULE_3__.OpenAIChat),\n/* harmony export */   OpenAIClient: () => (/* reexport safe */ openai__WEBPACK_IMPORTED_MODULE_0__.OpenAI),\n/* harmony export */   OpenAIEmbeddings: () => (/* reexport safe */ _embeddings_js__WEBPACK_IMPORTED_MODULE_5__.OpenAIEmbeddings),\n/* harmony export */   formatToOpenAIAssistantTool: () => (/* reexport safe */ _utils_openai_js__WEBPACK_IMPORTED_MODULE_7__.formatToOpenAIAssistantTool),\n/* harmony export */   formatToOpenAIFunction: () => (/* reexport safe */ _utils_openai_js__WEBPACK_IMPORTED_MODULE_7__.formatToOpenAIFunction),\n/* harmony export */   formatToOpenAITool: () => (/* reexport safe */ _utils_openai_js__WEBPACK_IMPORTED_MODULE_7__.formatToOpenAITool),\n/* harmony export */   getEndpoint: () => (/* reexport safe */ _utils_azure_js__WEBPACK_IMPORTED_MODULE_8__.getEndpoint),\n/* harmony export */   messageToOpenAIRole: () => (/* reexport safe */ _chat_models_js__WEBPACK_IMPORTED_MODULE_1__.messageToOpenAIRole),\n/* harmony export */   toFile: () => (/* reexport safe */ openai__WEBPACK_IMPORTED_MODULE_0__.toFile),\n/* harmony export */   wrapOpenAIClientError: () => (/* reexport safe */ _utils_openai_js__WEBPACK_IMPORTED_MODULE_7__.wrapOpenAIClientError)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var _chat_models_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./chat_models.js */ \"(rsc)/./node_modules/@langchain/openai/dist/chat_models.js\");\n/* harmony import */ var _azure_chat_models_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./azure/chat_models.js */ \"(rsc)/./node_modules/@langchain/openai/dist/azure/chat_models.js\");\n/* harmony import */ var _llms_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./llms.js */ \"(rsc)/./node_modules/@langchain/openai/dist/llms.js\");\n/* harmony import */ var _azure_llms_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./azure/llms.js */ \"(rsc)/./node_modules/@langchain/openai/dist/azure/llms.js\");\n/* harmony import */ var _embeddings_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./embeddings.js */ \"(rsc)/./node_modules/@langchain/openai/dist/embeddings.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./types.js */ \"(rsc)/./node_modules/@langchain/openai/dist/types.js\");\n/* harmony import */ var _utils_openai_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utils/openai.js */ \"(rsc)/./node_modules/@langchain/openai/dist/utils/openai.js\");\n/* harmony import */ var _utils_azure_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./utils/azure.js */ \"(rsc)/./node_modules/@langchain/openai/dist/utils/azure.js\");\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvZGlzdC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUF3RDtBQUN2QjtBQUNNO0FBQ2I7QUFDTTtBQUNBO0FBQ0w7QUFDTztBQUNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vb3BlbmFpL2Rpc3QvaW5kZXguanM/ZmM1OCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgeyBPcGVuQUkgYXMgT3BlbkFJQ2xpZW50LCB0b0ZpbGUgfSBmcm9tIFwib3BlbmFpXCI7XG5leHBvcnQgKiBmcm9tIFwiLi9jaGF0X21vZGVscy5qc1wiO1xuZXhwb3J0ICogZnJvbSBcIi4vYXp1cmUvY2hhdF9tb2RlbHMuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2xsbXMuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2F6dXJlL2xsbXMuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL2VtYmVkZGluZ3MuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3R5cGVzLmpzXCI7XG5leHBvcnQgKiBmcm9tIFwiLi91dGlscy9vcGVuYWkuanNcIjtcbmV4cG9ydCAqIGZyb20gXCIuL3V0aWxzL2F6dXJlLmpzXCI7XG4iXSwibmFtZXMiOlsiT3BlbkFJIiwiT3BlbkFJQ2xpZW50IiwidG9GaWxlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/openai/dist/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/openai/dist/legacy.js":
/*!*******************************************************!*\
  !*** ./node_modules/@langchain/openai/dist/legacy.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OpenAIChat: () => (/* binding */ OpenAIChat)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var _langchain_core_outputs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/outputs */ \"(rsc)/./node_modules/@langchain/core/outputs.js\");\n/* harmony import */ var _langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/utils/env */ \"(rsc)/./node_modules/@langchain/core/utils/env.js\");\n/* harmony import */ var _langchain_core_language_models_llms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @langchain/core/language_models/llms */ \"(rsc)/./node_modules/@langchain/core/language_models/llms.js\");\n/* harmony import */ var _utils_azure_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils/azure.js */ \"(rsc)/./node_modules/@langchain/openai/dist/utils/azure.js\");\n/* harmony import */ var _utils_openai_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./utils/openai.js */ \"(rsc)/./node_modules/@langchain/openai/dist/utils/openai.js\");\n\n\n\n\n\n\n/**\n * @deprecated For legacy compatibility. Use ChatOpenAI instead.\n *\n * Wrapper around OpenAI large language models that use the Chat endpoint.\n *\n * To use you should have the `openai` package installed, with the\n * `OPENAI_API_KEY` environment variable set.\n *\n * To use with Azure you should have the `openai` package installed, with the\n * `AZURE_OPENAI_API_KEY`,\n * `AZURE_OPENAI_API_INSTANCE_NAME`,\n * `AZURE_OPENAI_API_DEPLOYMENT_NAME`\n * and `AZURE_OPENAI_API_VERSION` environment variable set.\n *\n * @remarks\n * Any parameters that are valid to be passed to {@link\n * https://platform.openai.com/docs/api-reference/chat/create |\n * `openai.createCompletion`} can be passed through {@link modelKwargs}, even\n * if not explicitly available on this class.\n *\n * @augments BaseLLM\n * @augments OpenAIInput\n * @augments AzureOpenAIChatInput\n * @example\n * ```typescript\n * const model = new OpenAIChat({\n *   prefixMessages: [\n *     {\n *       role: \"system\",\n *       content: \"You are a helpful assistant that answers in pirate language\",\n *     },\n *   ],\n *   maxTokens: 50,\n * });\n *\n * const res = await model.call(\n *   \"What would be a good company name for a company that makes colorful socks?\"\n * );\n * console.log({ res });\n * ```\n */ class OpenAIChat extends _langchain_core_language_models_llms__WEBPACK_IMPORTED_MODULE_2__.LLM {\n    static lc_name() {\n        return \"OpenAIChat\";\n    }\n    get callKeys() {\n        return [\n            ...super.callKeys,\n            \"options\",\n            \"promptIndex\"\n        ];\n    }\n    get lc_secrets() {\n        return {\n            openAIApiKey: \"OPENAI_API_KEY\",\n            azureOpenAIApiKey: \"AZURE_OPENAI_API_KEY\",\n            organization: \"OPENAI_ORGANIZATION\"\n        };\n    }\n    get lc_aliases() {\n        return {\n            modelName: \"model\",\n            openAIApiKey: \"openai_api_key\",\n            azureOpenAIApiVersion: \"azure_openai_api_version\",\n            azureOpenAIApiKey: \"azure_openai_api_key\",\n            azureOpenAIApiInstanceName: \"azure_openai_api_instance_name\",\n            azureOpenAIApiDeploymentName: \"azure_openai_api_deployment_name\"\n        };\n    }\n    constructor(fields, /** @deprecated */ configuration){\n        super(fields ?? {});\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"temperature\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 1\n        });\n        Object.defineProperty(this, \"topP\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 1\n        });\n        Object.defineProperty(this, \"frequencyPenalty\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 0\n        });\n        Object.defineProperty(this, \"presencePenalty\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 0\n        });\n        Object.defineProperty(this, \"n\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 1\n        });\n        Object.defineProperty(this, \"logitBias\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"maxTokens\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"modelName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"gpt-3.5-turbo\"\n        });\n        Object.defineProperty(this, \"prefixMessages\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"modelKwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"timeout\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"stop\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"user\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"streaming\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"openAIApiKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiVersion\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiInstanceName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiDeploymentName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIBasePath\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"organization\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"client\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"clientConfig\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.openAIApiKey = fields?.openAIApiKey ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"OPENAI_API_KEY\");\n        this.azureOpenAIApiKey = fields?.azureOpenAIApiKey ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"AZURE_OPENAI_API_KEY\");\n        if (!this.azureOpenAIApiKey && !this.openAIApiKey) {\n            throw new Error(\"OpenAI or Azure OpenAI API key not found\");\n        }\n        this.azureOpenAIApiInstanceName = fields?.azureOpenAIApiInstanceName ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"AZURE_OPENAI_API_INSTANCE_NAME\");\n        this.azureOpenAIApiDeploymentName = (fields?.azureOpenAIApiCompletionsDeploymentName || fields?.azureOpenAIApiDeploymentName) ?? ((0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"AZURE_OPENAI_API_COMPLETIONS_DEPLOYMENT_NAME\") || (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"AZURE_OPENAI_API_DEPLOYMENT_NAME\"));\n        this.azureOpenAIApiVersion = fields?.azureOpenAIApiVersion ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"AZURE_OPENAI_API_VERSION\");\n        this.azureOpenAIBasePath = fields?.azureOpenAIBasePath ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"AZURE_OPENAI_BASE_PATH\");\n        this.organization = fields?.configuration?.organization ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_1__.getEnvironmentVariable)(\"OPENAI_ORGANIZATION\");\n        this.modelName = fields?.modelName ?? this.modelName;\n        this.prefixMessages = fields?.prefixMessages ?? this.prefixMessages;\n        this.modelKwargs = fields?.modelKwargs ?? {};\n        this.timeout = fields?.timeout;\n        this.temperature = fields?.temperature ?? this.temperature;\n        this.topP = fields?.topP ?? this.topP;\n        this.frequencyPenalty = fields?.frequencyPenalty ?? this.frequencyPenalty;\n        this.presencePenalty = fields?.presencePenalty ?? this.presencePenalty;\n        this.n = fields?.n ?? this.n;\n        this.logitBias = fields?.logitBias;\n        this.maxTokens = fields?.maxTokens;\n        this.stop = fields?.stop;\n        this.user = fields?.user;\n        this.streaming = fields?.streaming ?? false;\n        if (this.n > 1) {\n            throw new Error(\"Cannot use n > 1 in OpenAIChat LLM. Use ChatOpenAI Chat Model instead.\");\n        }\n        if (this.azureOpenAIApiKey) {\n            if (!this.azureOpenAIApiInstanceName && !this.azureOpenAIBasePath) {\n                throw new Error(\"Azure OpenAI API instance name not found\");\n            }\n            if (!this.azureOpenAIApiDeploymentName) {\n                throw new Error(\"Azure OpenAI API deployment name not found\");\n            }\n            if (!this.azureOpenAIApiVersion) {\n                throw new Error(\"Azure OpenAI API version not found\");\n            }\n            this.openAIApiKey = this.openAIApiKey ?? \"\";\n        }\n        this.clientConfig = {\n            apiKey: this.openAIApiKey,\n            organization: this.organization,\n            baseURL: configuration?.basePath ?? fields?.configuration?.basePath,\n            dangerouslyAllowBrowser: true,\n            defaultHeaders: configuration?.baseOptions?.headers ?? fields?.configuration?.baseOptions?.headers,\n            defaultQuery: configuration?.baseOptions?.params ?? fields?.configuration?.baseOptions?.params,\n            ...configuration,\n            ...fields?.configuration\n        };\n    }\n    /**\n     * Get the parameters used to invoke the model\n     */ invocationParams(options) {\n        return {\n            model: this.modelName,\n            temperature: this.temperature,\n            top_p: this.topP,\n            frequency_penalty: this.frequencyPenalty,\n            presence_penalty: this.presencePenalty,\n            n: this.n,\n            logit_bias: this.logitBias,\n            max_tokens: this.maxTokens === -1 ? undefined : this.maxTokens,\n            stop: options?.stop ?? this.stop,\n            user: this.user,\n            stream: this.streaming,\n            ...this.modelKwargs\n        };\n    }\n    /** @ignore */ _identifyingParams() {\n        return {\n            model_name: this.modelName,\n            ...this.invocationParams(),\n            ...this.clientConfig\n        };\n    }\n    /**\n     * Get the identifying parameters for the model\n     */ identifyingParams() {\n        return {\n            model_name: this.modelName,\n            ...this.invocationParams(),\n            ...this.clientConfig\n        };\n    }\n    /**\n     * Formats the messages for the OpenAI API.\n     * @param prompt The prompt to be formatted.\n     * @returns Array of formatted messages.\n     */ formatMessages(prompt) {\n        const message = {\n            role: \"user\",\n            content: prompt\n        };\n        return this.prefixMessages ? [\n            ...this.prefixMessages,\n            message\n        ] : [\n            message\n        ];\n    }\n    async *_streamResponseChunks(prompt, options, runManager) {\n        const params = {\n            ...this.invocationParams(options),\n            messages: this.formatMessages(prompt),\n            stream: true\n        };\n        const stream = await this.completionWithRetry(params, options);\n        for await (const data of stream){\n            const choice = data?.choices[0];\n            if (!choice) {\n                continue;\n            }\n            const { delta } = choice;\n            const generationChunk = new _langchain_core_outputs__WEBPACK_IMPORTED_MODULE_0__.GenerationChunk({\n                text: delta.content ?? \"\"\n            });\n            yield generationChunk;\n            const newTokenIndices = {\n                prompt: options.promptIndex ?? 0,\n                completion: choice.index ?? 0\n            };\n            // eslint-disable-next-line no-void\n            void runManager?.handleLLMNewToken(generationChunk.text ?? \"\", newTokenIndices);\n        }\n        if (options.signal?.aborted) {\n            throw new Error(\"AbortError\");\n        }\n    }\n    /** @ignore */ async _call(prompt, options, runManager) {\n        const params = this.invocationParams(options);\n        if (params.stream) {\n            const stream = await this._streamResponseChunks(prompt, options, runManager);\n            let finalChunk;\n            for await (const chunk of stream){\n                if (finalChunk === undefined) {\n                    finalChunk = chunk;\n                } else {\n                    finalChunk = finalChunk.concat(chunk);\n                }\n            }\n            return finalChunk?.text ?? \"\";\n        } else {\n            const response = await this.completionWithRetry({\n                ...params,\n                stream: false,\n                messages: this.formatMessages(prompt)\n            }, {\n                signal: options.signal,\n                ...options.options\n            });\n            return response?.choices[0]?.message?.content ?? \"\";\n        }\n    }\n    async completionWithRetry(request, options) {\n        const requestOptions = this._getClientOptions(options);\n        return this.caller.call(async ()=>{\n            try {\n                const res = await this.client.chat.completions.create(request, requestOptions);\n                return res;\n            } catch (e) {\n                const error = (0,_utils_openai_js__WEBPACK_IMPORTED_MODULE_4__.wrapOpenAIClientError)(e);\n                throw error;\n            }\n        });\n    }\n    /** @ignore */ _getClientOptions(options) {\n        if (!this.client) {\n            const openAIEndpointConfig = {\n                azureOpenAIApiDeploymentName: this.azureOpenAIApiDeploymentName,\n                azureOpenAIApiInstanceName: this.azureOpenAIApiInstanceName,\n                azureOpenAIApiKey: this.azureOpenAIApiKey,\n                azureOpenAIBasePath: this.azureOpenAIBasePath,\n                baseURL: this.clientConfig.baseURL\n            };\n            const endpoint = (0,_utils_azure_js__WEBPACK_IMPORTED_MODULE_3__.getEndpoint)(openAIEndpointConfig);\n            const params = {\n                ...this.clientConfig,\n                baseURL: endpoint,\n                timeout: this.timeout,\n                maxRetries: 0\n            };\n            if (!params.baseURL) {\n                delete params.baseURL;\n            }\n            this.client = new openai__WEBPACK_IMPORTED_MODULE_5__.OpenAI(params);\n        }\n        const requestOptions = {\n            ...this.clientConfig,\n            ...options\n        };\n        if (this.azureOpenAIApiKey) {\n            requestOptions.headers = {\n                \"api-key\": this.azureOpenAIApiKey,\n                ...requestOptions.headers\n            };\n            requestOptions.query = {\n                \"api-version\": this.azureOpenAIApiVersion,\n                ...requestOptions.query\n            };\n        }\n        return requestOptions;\n    }\n    _llmType() {\n        return \"openai\";\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvZGlzdC9sZWdhY3kuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFnRDtBQUNVO0FBQ1M7QUFDUjtBQUNaO0FBQ1c7QUFDMUQ7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0F3Q0MsR0FDTSxNQUFNTyxtQkFBbUJILHFFQUFHQTtJQUMvQixPQUFPSSxVQUFVO1FBQ2IsT0FBTztJQUNYO0lBQ0EsSUFBSUMsV0FBVztRQUNYLE9BQU87ZUFBSSxLQUFLLENBQUNBO1lBQVU7WUFBVztTQUFjO0lBQ3hEO0lBQ0EsSUFBSUMsYUFBYTtRQUNiLE9BQU87WUFDSEMsY0FBYztZQUNkQyxtQkFBbUI7WUFDbkJDLGNBQWM7UUFDbEI7SUFDSjtJQUNBLElBQUlDLGFBQWE7UUFDYixPQUFPO1lBQ0hDLFdBQVc7WUFDWEosY0FBYztZQUNkSyx1QkFBdUI7WUFDdkJKLG1CQUFtQjtZQUNuQkssNEJBQTRCO1lBQzVCQyw4QkFBOEI7UUFDbEM7SUFDSjtJQUNBQyxZQUFZQyxNQUFNLEVBQ2xCLGdCQUFnQixHQUNoQkMsYUFBYSxDQUFFO1FBQ1gsS0FBSyxDQUFDRCxVQUFVLENBQUM7UUFDakJFLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CO1lBQzNDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxlQUFlO1lBQ3ZDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxRQUFRO1lBQ2hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxvQkFBb0I7WUFDNUNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lB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LElBQUksQ0FBQzZDLE1BQU0sRUFBRTtZQUNkLE1BQU1NLHVCQUF1QjtnQkFDekJ4Riw4QkFBOEIsSUFBSSxDQUFDQSw0QkFBNEI7Z0JBQy9ERCw0QkFBNEIsSUFBSSxDQUFDQSwwQkFBMEI7Z0JBQzNETCxtQkFBbUIsSUFBSSxDQUFDQSxpQkFBaUI7Z0JBQ3pDa0IscUJBQXFCLElBQUksQ0FBQ0EsbUJBQW1CO2dCQUM3Q2dCLFNBQVMsSUFBSSxDQUFDRixZQUFZLENBQUNFLE9BQU87WUFDdEM7WUFDQSxNQUFNNkQsV0FBV3RHLDREQUFXQSxDQUFDcUc7WUFDN0IsTUFBTXJELFNBQVM7Z0JBQ1gsR0FBRyxJQUFJLENBQUNULFlBQVk7Z0JBQ3BCRSxTQUFTNkQ7Z0JBQ1QxRSxTQUFTLElBQUksQ0FBQ0EsT0FBTztnQkFDckIyRSxZQUFZO1lBQ2hCO1lBQ0EsSUFBSSxDQUFDdkQsT0FBT1AsT0FBTyxFQUFFO2dCQUNqQixPQUFPTyxPQUFPUCxPQUFPO1lBQ3pCO1lBQ0EsSUFBSSxDQUFDc0QsTUFBTSxHQUFHLElBQUluRywwQ0FBWUEsQ0FBQ29EO1FBQ25DO1FBQ0EsTUFBTTBDLGlCQUFpQjtZQUNuQixHQUFHLElBQUksQ0FBQ25ELFlBQVk7WUFDcEIsR0FBR1csT0FBTztRQUNkO1FBQ0EsSUFBSSxJQUFJLENBQUMzQyxpQkFBaUIsRUFBRTtZQUN4Qm1GLGVBQWU1QyxPQUFPLEdBQUc7Z0JBQ3JCLFdBQVcsSUFBSSxDQUFDdkMsaUJBQWlCO2dCQUNqQyxHQUFHbUYsZUFBZTVDLE9BQU87WUFDN0I7WUFDQTRDLGVBQWVjLEtBQUssR0FBRztnQkFDbkIsZUFBZSxJQUFJLENBQUM3RixxQkFBcUI7Z0JBQ3pDLEdBQUcrRSxlQUFlYyxLQUFLO1lBQzNCO1FBQ0o7UUFDQSxPQUFPZDtJQUNYO0lBQ0FlLFdBQVc7UUFDUCxPQUFPO0lBQ1g7QUFDSiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLWZvcm0tYnVpbGRlci10dXRvcmlhbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL29wZW5haS9kaXN0L2xlZ2FjeS5qcz8zOWQyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9wZW5BSSBhcyBPcGVuQUlDbGllbnQgfSBmcm9tIFwib3BlbmFpXCI7XG5pbXBvcnQgeyBHZW5lcmF0aW9uQ2h1bmsgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL291dHB1dHNcIjtcbmltcG9ydCB7IGdldEVudmlyb25tZW50VmFyaWFibGUgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3V0aWxzL2VudlwiO1xuaW1wb3J0IHsgTExNIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS9sYW5ndWFnZV9tb2RlbHMvbGxtc1wiO1xuaW1wb3J0IHsgZ2V0RW5kcG9pbnQgfSBmcm9tIFwiLi91dGlscy9henVyZS5qc1wiO1xuaW1wb3J0IHsgd3JhcE9wZW5BSUNsaWVudEVycm9yIH0gZnJvbSBcIi4vdXRpbHMvb3BlbmFpLmpzXCI7XG4vKipcbiAqIEBkZXByZWNhdGVkIEZvciBsZWdhY3kgY29tcGF0aWJpbGl0eS4gVXNlIENoYXRPcGVuQUkgaW5zdGVhZC5cbiAqXG4gKiBXcmFwcGVyIGFyb3VuZCBPcGVuQUkgbGFyZ2UgbGFuZ3VhZ2UgbW9kZWxzIHRoYXQgdXNlIHRoZSBDaGF0IGVuZHBvaW50LlxuICpcbiAqIFRvIHVzZSB5b3Ugc2hvdWxkIGhhdmUgdGhlIGBvcGVuYWlgIHBhY2thZ2UgaW5zdGFsbGVkLCB3aXRoIHRoZVxuICogYE9QRU5BSV9BUElfS0VZYCBlbnZpcm9ubWVudCB2YXJpYWJsZSBzZXQuXG4gKlxuICogVG8gdXNlIHdpdGggQXp1cmUgeW91IHNob3VsZCBoYXZlIHRoZSBgb3BlbmFpYCBwYWNrYWdlIGluc3RhbGxlZCwgd2l0aCB0aGVcbiAqIGBBWlVSRV9PUEVOQUlfQVBJX0tFWWAsXG4gKiBgQVpVUkVfT1BFTkFJX0FQSV9JTlNUQU5DRV9OQU1FYCxcbiAqIGBBWlVSRV9PUEVOQUlfQVBJX0RFUExPWU1FTlRfTkFNRWBcbiAqIGFuZCBgQVpVUkVfT1BFTkFJX0FQSV9WRVJTSU9OYCBlbnZpcm9ubWVudCB2YXJpYWJsZSBzZXQuXG4gKlxuICogQHJlbWFya3NcbiAqIEFueSBwYXJhbWV0ZXJzIHRoYXQgYXJlIHZhbGlkIHRvIGJlIHBhc3NlZCB0byB7QGxpbmtcbiAqIGh0dHBzOi8vcGxhdGZvcm0ub3BlbmFpLmNvbS9kb2NzL2FwaS1yZWZlcmVuY2UvY2hhdC9jcmVhdGUgfFxuICogYG9wZW5haS5jcmVhdGVDb21wbGV0aW9uYH0gY2FuIGJlIHBhc3NlZCB0aHJvdWdoIHtAbGluayBtb2RlbEt3YXJnc30sIGV2ZW5cbiAqIGlmIG5vdCBleHBsaWNpdGx5IGF2YWlsYWJsZSBvbiB0aGlzIGNsYXNzLlxuICpcbiAqIEBhdWdtZW50cyBCYXNlTExNXG4gKiBAYXVnbWVudHMgT3BlbkFJSW5wdXRcbiAqIEBhdWdtZW50cyBBenVyZU9wZW5BSUNoYXRJbnB1dFxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IG1vZGVsID0gbmV3IE9wZW5BSUNoYXQoe1xuICogICBwcmVmaXhNZXNzYWdlczogW1xuICogICAgIHtcbiAqICAgICAgIHJvbGU6IFwic3lzdGVtXCIsXG4gKiAgICAgICBjb250ZW50OiBcIllvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudCB0aGF0IGFuc3dlcnMgaW4gcGlyYXRlIGxhbmd1YWdlXCIsXG4gKiAgICAgfSxcbiAqICAgXSxcbiAqICAgbWF4VG9rZW5zOiA1MCxcbiAqIH0pO1xuICpcbiAqIGNvbnN0IHJlcyA9IGF3YWl0IG1vZGVsLmNhbGwoXG4gKiAgIFwiV2hhdCB3b3VsZCBiZSBhIGdvb2QgY29tcGFueSBuYW1lIGZvciBhIGNvbXBhbnkgdGhhdCBtYWtlcyBjb2xvcmZ1bCBzb2Nrcz9cIlxuICogKTtcbiAqIGNvbnNvbGUubG9nKHsgcmVzIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBPcGVuQUlDaGF0IGV4dGVuZHMgTExNIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiT3BlbkFJQ2hhdFwiO1xuICAgIH1cbiAgICBnZXQgY2FsbEtleXMoKSB7XG4gICAgICAgIHJldHVybiBbLi4uc3VwZXIuY2FsbEtleXMsIFwib3B0aW9uc1wiLCBcInByb21wdEluZGV4XCJdO1xuICAgIH1cbiAgICBnZXQgbGNfc2VjcmV0cygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9wZW5BSUFwaUtleTogXCJPUEVOQUlfQVBJX0tFWVwiLFxuICAgICAgICAgICAgYXp1cmVPcGVuQUlBcGlLZXk6IFwiQVpVUkVfT1BFTkFJX0FQSV9LRVlcIixcbiAgICAgICAgICAgIG9yZ2FuaXphdGlvbjogXCJPUEVOQUlfT1JHQU5JWkFUSU9OXCIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGdldCBsY19hbGlhc2VzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbW9kZWxOYW1lOiBcIm1vZGVsXCIsXG4gICAgICAgICAgICBvcGVuQUlBcGlLZXk6IFwib3BlbmFpX2FwaV9rZXlcIixcbiAgICAgICAgICAgIGF6dXJlT3BlbkFJQXBpVmVyc2lvbjogXCJhenVyZV9vcGVuYWlfYXBpX3ZlcnNpb25cIixcbiAgICAgICAgICAgIGF6dXJlT3BlbkFJQXBpS2V5OiBcImF6dXJlX29wZW5haV9hcGlfa2V5XCIsXG4gICAgICAgICAgICBhenVyZU9wZW5BSUFwaUluc3RhbmNlTmFtZTogXCJhenVyZV9vcGVuYWlfYXBpX2luc3RhbmNlX25hbWVcIixcbiAgICAgICAgICAgIGF6dXJlT3BlbkFJQXBpRGVwbG95bWVudE5hbWU6IFwiYXp1cmVfb3BlbmFpX2FwaV9kZXBsb3ltZW50X25hbWVcIixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzLCBcbiAgICAvKiogQGRlcHJlY2F0ZWQgKi9cbiAgICBjb25maWd1cmF0aW9uKSB7XG4gICAgICAgIHN1cGVyKGZpZWxkcyA/PyB7fSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImxjX3NlcmlhbGl6YWJsZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidGVtcGVyYXR1cmVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IDFcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRvcFBcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IDFcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImZyZXF1ZW5jeVBlbmFsdHlcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInByZXNlbmNlUGVuYWx0eVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiblwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogMVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibG9naXRCaWFzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1heFRva2Vuc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtb2RlbE5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IFwiZ3B0LTMuNS10dXJib1wiXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJwcmVmaXhNZXNzYWdlc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtb2RlbEt3YXJnc1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0aW1lb3V0XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInN0b3BcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidXNlclwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJzdHJlYW1pbmdcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvcGVuQUlBcGlLZXlcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXp1cmVPcGVuQUlBcGlWZXJzaW9uXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImF6dXJlT3BlbkFJQXBpS2V5XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImF6dXJlT3BlbkFJQXBpRGVwbG95bWVudE5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXp1cmVPcGVuQUlCYXNlUGF0aFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvcmdhbml6YXRpb25cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2xpZW50XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImNsaWVudENvbmZpZ1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm9wZW5BSUFwaUtleSA9XG4gICAgICAgICAgICBmaWVsZHM/Lm9wZW5BSUFwaUtleSA/PyBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiT1BFTkFJX0FQSV9LRVlcIik7XG4gICAgICAgIHRoaXMuYXp1cmVPcGVuQUlBcGlLZXkgPVxuICAgICAgICAgICAgZmllbGRzPy5henVyZU9wZW5BSUFwaUtleSA/P1xuICAgICAgICAgICAgICAgIGdldEVudmlyb25tZW50VmFyaWFibGUoXCJBWlVSRV9PUEVOQUlfQVBJX0tFWVwiKTtcbiAgICAgICAgaWYgKCF0aGlzLmF6dXJlT3BlbkFJQXBpS2V5ICYmICF0aGlzLm9wZW5BSUFwaUtleSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiT3BlbkFJIG9yIEF6dXJlIE9wZW5BSSBBUEkga2V5IG5vdCBmb3VuZFwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lID1cbiAgICAgICAgICAgIGZpZWxkcz8uYXp1cmVPcGVuQUlBcGlJbnN0YW5jZU5hbWUgPz9cbiAgICAgICAgICAgICAgICBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiQVpVUkVfT1BFTkFJX0FQSV9JTlNUQU5DRV9OQU1FXCIpO1xuICAgICAgICB0aGlzLmF6dXJlT3BlbkFJQXBpRGVwbG95bWVudE5hbWUgPVxuICAgICAgICAgICAgKGZpZWxkcz8uYXp1cmVPcGVuQUlBcGlDb21wbGV0aW9uc0RlcGxveW1lbnROYW1lIHx8XG4gICAgICAgICAgICAgICAgZmllbGRzPy5henVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lKSA/P1xuICAgICAgICAgICAgICAgIChnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiQVpVUkVfT1BFTkFJX0FQSV9DT01QTEVUSU9OU19ERVBMT1lNRU5UX05BTUVcIikgfHxcbiAgICAgICAgICAgICAgICAgICAgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkFaVVJFX09QRU5BSV9BUElfREVQTE9ZTUVOVF9OQU1FXCIpKTtcbiAgICAgICAgdGhpcy5henVyZU9wZW5BSUFwaVZlcnNpb24gPVxuICAgICAgICAgICAgZmllbGRzPy5henVyZU9wZW5BSUFwaVZlcnNpb24gPz9cbiAgICAgICAgICAgICAgICBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiQVpVUkVfT1BFTkFJX0FQSV9WRVJTSU9OXCIpO1xuICAgICAgICB0aGlzLmF6dXJlT3BlbkFJQmFzZVBhdGggPVxuICAgICAgICAgICAgZmllbGRzPy5henVyZU9wZW5BSUJhc2VQYXRoID8/XG4gICAgICAgICAgICAgICAgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkFaVVJFX09QRU5BSV9CQVNFX1BBVEhcIik7XG4gICAgICAgIHRoaXMub3JnYW5pemF0aW9uID1cbiAgICAgICAgICAgIGZpZWxkcz8uY29uZmlndXJhdGlvbj8ub3JnYW5pemF0aW9uID8/XG4gICAgICAgICAgICAgICAgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIk9QRU5BSV9PUkdBTklaQVRJT05cIik7XG4gICAgICAgIHRoaXMubW9kZWxOYW1lID0gZmllbGRzPy5tb2RlbE5hbWUgPz8gdGhpcy5tb2RlbE5hbWU7XG4gICAgICAgIHRoaXMucHJlZml4TWVzc2FnZXMgPSBmaWVsZHM/LnByZWZpeE1lc3NhZ2VzID8/IHRoaXMucHJlZml4TWVzc2FnZXM7XG4gICAgICAgIHRoaXMubW9kZWxLd2FyZ3MgPSBmaWVsZHM/Lm1vZGVsS3dhcmdzID8/IHt9O1xuICAgICAgICB0aGlzLnRpbWVvdXQgPSBmaWVsZHM/LnRpbWVvdXQ7XG4gICAgICAgIHRoaXMudGVtcGVyYXR1cmUgPSBmaWVsZHM/LnRlbXBlcmF0dXJlID8/IHRoaXMudGVtcGVyYXR1cmU7XG4gICAgICAgIHRoaXMudG9wUCA9IGZpZWxkcz8udG9wUCA/PyB0aGlzLnRvcFA7XG4gICAgICAgIHRoaXMuZnJlcXVlbmN5UGVuYWx0eSA9IGZpZWxkcz8uZnJlcXVlbmN5UGVuYWx0eSA/PyB0aGlzLmZyZXF1ZW5jeVBlbmFsdHk7XG4gICAgICAgIHRoaXMucHJlc2VuY2VQZW5hbHR5ID0gZmllbGRzPy5wcmVzZW5jZVBlbmFsdHkgPz8gdGhpcy5wcmVzZW5jZVBlbmFsdHk7XG4gICAgICAgIHRoaXMubiA9IGZpZWxkcz8ubiA/PyB0aGlzLm47XG4gICAgICAgIHRoaXMubG9naXRCaWFzID0gZmllbGRzPy5sb2dpdEJpYXM7XG4gICAgICAgIHRoaXMubWF4VG9rZW5zID0gZmllbGRzPy5tYXhUb2tlbnM7XG4gICAgICAgIHRoaXMuc3RvcCA9IGZpZWxkcz8uc3RvcDtcbiAgICAgICAgdGhpcy51c2VyID0gZmllbGRzPy51c2VyO1xuICAgICAgICB0aGlzLnN0cmVhbWluZyA9IGZpZWxkcz8uc3RyZWFtaW5nID8/IGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5uID4gMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IHVzZSBuID4gMSBpbiBPcGVuQUlDaGF0IExMTS4gVXNlIENoYXRPcGVuQUkgQ2hhdCBNb2RlbCBpbnN0ZWFkLlwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5henVyZU9wZW5BSUFwaUtleSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lICYmICF0aGlzLmF6dXJlT3BlbkFJQmFzZVBhdGgpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBenVyZSBPcGVuQUkgQVBJIGluc3RhbmNlIG5hbWUgbm90IGZvdW5kXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmF6dXJlT3BlbkFJQXBpRGVwbG95bWVudE5hbWUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBenVyZSBPcGVuQUkgQVBJIGRlcGxveW1lbnQgbmFtZSBub3QgZm91bmRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuYXp1cmVPcGVuQUlBcGlWZXJzaW9uKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXp1cmUgT3BlbkFJIEFQSSB2ZXJzaW9uIG5vdCBmb3VuZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub3BlbkFJQXBpS2V5ID0gdGhpcy5vcGVuQUlBcGlLZXkgPz8gXCJcIjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsaWVudENvbmZpZyA9IHtcbiAgICAgICAgICAgIGFwaUtleTogdGhpcy5vcGVuQUlBcGlLZXksXG4gICAgICAgICAgICBvcmdhbml6YXRpb246IHRoaXMub3JnYW5pemF0aW9uLFxuICAgICAgICAgICAgYmFzZVVSTDogY29uZmlndXJhdGlvbj8uYmFzZVBhdGggPz8gZmllbGRzPy5jb25maWd1cmF0aW9uPy5iYXNlUGF0aCxcbiAgICAgICAgICAgIGRhbmdlcm91c2x5QWxsb3dCcm93c2VyOiB0cnVlLFxuICAgICAgICAgICAgZGVmYXVsdEhlYWRlcnM6IGNvbmZpZ3VyYXRpb24/LmJhc2VPcHRpb25zPy5oZWFkZXJzID8/XG4gICAgICAgICAgICAgICAgZmllbGRzPy5jb25maWd1cmF0aW9uPy5iYXNlT3B0aW9ucz8uaGVhZGVycyxcbiAgICAgICAgICAgIGRlZmF1bHRRdWVyeTogY29uZmlndXJhdGlvbj8uYmFzZU9wdGlvbnM/LnBhcmFtcyA/P1xuICAgICAgICAgICAgICAgIGZpZWxkcz8uY29uZmlndXJhdGlvbj8uYmFzZU9wdGlvbnM/LnBhcmFtcyxcbiAgICAgICAgICAgIC4uLmNvbmZpZ3VyYXRpb24sXG4gICAgICAgICAgICAuLi5maWVsZHM/LmNvbmZpZ3VyYXRpb24sXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgcGFyYW1ldGVycyB1c2VkIHRvIGludm9rZSB0aGUgbW9kZWxcbiAgICAgKi9cbiAgICBpbnZvY2F0aW9uUGFyYW1zKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1vZGVsOiB0aGlzLm1vZGVsTmFtZSxcbiAgICAgICAgICAgIHRlbXBlcmF0dXJlOiB0aGlzLnRlbXBlcmF0dXJlLFxuICAgICAgICAgICAgdG9wX3A6IHRoaXMudG9wUCxcbiAgICAgICAgICAgIGZyZXF1ZW5jeV9wZW5hbHR5OiB0aGlzLmZyZXF1ZW5jeVBlbmFsdHksXG4gICAgICAgICAgICBwcmVzZW5jZV9wZW5hbHR5OiB0aGlzLnByZXNlbmNlUGVuYWx0eSxcbiAgICAgICAgICAgIG46IHRoaXMubixcbiAgICAgICAgICAgIGxvZ2l0X2JpYXM6IHRoaXMubG9naXRCaWFzLFxuICAgICAgICAgICAgbWF4X3Rva2VuczogdGhpcy5tYXhUb2tlbnMgPT09IC0xID8gdW5kZWZpbmVkIDogdGhpcy5tYXhUb2tlbnMsXG4gICAgICAgICAgICBzdG9wOiBvcHRpb25zPy5zdG9wID8/IHRoaXMuc3RvcCxcbiAgICAgICAgICAgIHVzZXI6IHRoaXMudXNlcixcbiAgICAgICAgICAgIHN0cmVhbTogdGhpcy5zdHJlYW1pbmcsXG4gICAgICAgICAgICAuLi50aGlzLm1vZGVsS3dhcmdzLFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKiogQGlnbm9yZSAqL1xuICAgIF9pZGVudGlmeWluZ1BhcmFtcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1vZGVsX25hbWU6IHRoaXMubW9kZWxOYW1lLFxuICAgICAgICAgICAgLi4udGhpcy5pbnZvY2F0aW9uUGFyYW1zKCksXG4gICAgICAgICAgICAuLi50aGlzLmNsaWVudENvbmZpZyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBpZGVudGlmeWluZyBwYXJhbWV0ZXJzIGZvciB0aGUgbW9kZWxcbiAgICAgKi9cbiAgICBpZGVudGlmeWluZ1BhcmFtcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1vZGVsX25hbWU6IHRoaXMubW9kZWxOYW1lLFxuICAgICAgICAgICAgLi4udGhpcy5pbnZvY2F0aW9uUGFyYW1zKCksXG4gICAgICAgICAgICAuLi50aGlzLmNsaWVudENvbmZpZyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9ybWF0cyB0aGUgbWVzc2FnZXMgZm9yIHRoZSBPcGVuQUkgQVBJLlxuICAgICAqIEBwYXJhbSBwcm9tcHQgVGhlIHByb21wdCB0byBiZSBmb3JtYXR0ZWQuXG4gICAgICogQHJldHVybnMgQXJyYXkgb2YgZm9ybWF0dGVkIG1lc3NhZ2VzLlxuICAgICAqL1xuICAgIGZvcm1hdE1lc3NhZ2VzKHByb21wdCkge1xuICAgICAgICBjb25zdCBtZXNzYWdlID0ge1xuICAgICAgICAgICAgcm9sZTogXCJ1c2VyXCIsXG4gICAgICAgICAgICBjb250ZW50OiBwcm9tcHQsXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLnByZWZpeE1lc3NhZ2VzID8gWy4uLnRoaXMucHJlZml4TWVzc2FnZXMsIG1lc3NhZ2VdIDogW21lc3NhZ2VdO1xuICAgIH1cbiAgICBhc3luYyAqX3N0cmVhbVJlc3BvbnNlQ2h1bmtzKHByb21wdCwgb3B0aW9ucywgcnVuTWFuYWdlcikge1xuICAgICAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICAgICAgICAuLi50aGlzLmludm9jYXRpb25QYXJhbXMob3B0aW9ucyksXG4gICAgICAgICAgICBtZXNzYWdlczogdGhpcy5mb3JtYXRNZXNzYWdlcyhwcm9tcHQpLFxuICAgICAgICAgICAgc3RyZWFtOiB0cnVlLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBzdHJlYW0gPSBhd2FpdCB0aGlzLmNvbXBsZXRpb25XaXRoUmV0cnkocGFyYW1zLCBvcHRpb25zKTtcbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBkYXRhIG9mIHN0cmVhbSkge1xuICAgICAgICAgICAgY29uc3QgY2hvaWNlID0gZGF0YT8uY2hvaWNlc1swXTtcbiAgICAgICAgICAgIGlmICghY2hvaWNlKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB7IGRlbHRhIH0gPSBjaG9pY2U7XG4gICAgICAgICAgICBjb25zdCBnZW5lcmF0aW9uQ2h1bmsgPSBuZXcgR2VuZXJhdGlvbkNodW5rKHtcbiAgICAgICAgICAgICAgICB0ZXh0OiBkZWx0YS5jb250ZW50ID8/IFwiXCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHlpZWxkIGdlbmVyYXRpb25DaHVuaztcbiAgICAgICAgICAgIGNvbnN0IG5ld1Rva2VuSW5kaWNlcyA9IHtcbiAgICAgICAgICAgICAgICBwcm9tcHQ6IG9wdGlvbnMucHJvbXB0SW5kZXggPz8gMCxcbiAgICAgICAgICAgICAgICBjb21wbGV0aW9uOiBjaG9pY2UuaW5kZXggPz8gMCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdm9pZFxuICAgICAgICAgICAgdm9pZCBydW5NYW5hZ2VyPy5oYW5kbGVMTE1OZXdUb2tlbihnZW5lcmF0aW9uQ2h1bmsudGV4dCA/PyBcIlwiLCBuZXdUb2tlbkluZGljZXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRpb25zLnNpZ25hbD8uYWJvcnRlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQWJvcnRFcnJvclwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogQGlnbm9yZSAqL1xuICAgIGFzeW5jIF9jYWxsKHByb21wdCwgb3B0aW9ucywgcnVuTWFuYWdlcikge1xuICAgICAgICBjb25zdCBwYXJhbXMgPSB0aGlzLmludm9jYXRpb25QYXJhbXMob3B0aW9ucyk7XG4gICAgICAgIGlmIChwYXJhbXMuc3RyZWFtKSB7XG4gICAgICAgICAgICBjb25zdCBzdHJlYW0gPSBhd2FpdCB0aGlzLl9zdHJlYW1SZXNwb25zZUNodW5rcyhwcm9tcHQsIG9wdGlvbnMsIHJ1bk1hbmFnZXIpO1xuICAgICAgICAgICAgbGV0IGZpbmFsQ2h1bms7XG4gICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHN0cmVhbSkge1xuICAgICAgICAgICAgICAgIGlmIChmaW5hbENodW5rID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZmluYWxDaHVuayA9IGNodW5rO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZmluYWxDaHVuayA9IGZpbmFsQ2h1bmsuY29uY2F0KGNodW5rKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmluYWxDaHVuaz8udGV4dCA/PyBcIlwiO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNvbXBsZXRpb25XaXRoUmV0cnkoe1xuICAgICAgICAgICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgICAgICAgICBzdHJlYW06IGZhbHNlLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiB0aGlzLmZvcm1hdE1lc3NhZ2VzKHByb21wdCksXG4gICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgc2lnbmFsOiBvcHRpb25zLnNpZ25hbCxcbiAgICAgICAgICAgICAgICAuLi5vcHRpb25zLm9wdGlvbnMsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZT8uY2hvaWNlc1swXT8ubWVzc2FnZT8uY29udGVudCA/PyBcIlwiO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzeW5jIGNvbXBsZXRpb25XaXRoUmV0cnkocmVxdWVzdCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCByZXF1ZXN0T3B0aW9ucyA9IHRoaXMuX2dldENsaWVudE9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGxlci5jYWxsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5jbGllbnQuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUocmVxdWVzdCwgcmVxdWVzdE9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gd3JhcE9wZW5BSUNsaWVudEVycm9yKGUpO1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqIEBpZ25vcmUgKi9cbiAgICBfZ2V0Q2xpZW50T3B0aW9ucyhvcHRpb25zKSB7XG4gICAgICAgIGlmICghdGhpcy5jbGllbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IG9wZW5BSUVuZHBvaW50Q29uZmlnID0ge1xuICAgICAgICAgICAgICAgIGF6dXJlT3BlbkFJQXBpRGVwbG95bWVudE5hbWU6IHRoaXMuYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZSxcbiAgICAgICAgICAgICAgICBhenVyZU9wZW5BSUFwaUluc3RhbmNlTmFtZTogdGhpcy5henVyZU9wZW5BSUFwaUluc3RhbmNlTmFtZSxcbiAgICAgICAgICAgICAgICBhenVyZU9wZW5BSUFwaUtleTogdGhpcy5henVyZU9wZW5BSUFwaUtleSxcbiAgICAgICAgICAgICAgICBhenVyZU9wZW5BSUJhc2VQYXRoOiB0aGlzLmF6dXJlT3BlbkFJQmFzZVBhdGgsXG4gICAgICAgICAgICAgICAgYmFzZVVSTDogdGhpcy5jbGllbnRDb25maWcuYmFzZVVSTCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBlbmRwb2ludCA9IGdldEVuZHBvaW50KG9wZW5BSUVuZHBvaW50Q29uZmlnKTtcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICAuLi50aGlzLmNsaWVudENvbmZpZyxcbiAgICAgICAgICAgICAgICBiYXNlVVJMOiBlbmRwb2ludCxcbiAgICAgICAgICAgICAgICB0aW1lb3V0OiB0aGlzLnRpbWVvdXQsXG4gICAgICAgICAgICAgICAgbWF4UmV0cmllczogMCxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoIXBhcmFtcy5iYXNlVVJMKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHBhcmFtcy5iYXNlVVJMO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jbGllbnQgPSBuZXcgT3BlbkFJQ2xpZW50KHBhcmFtcyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVxdWVzdE9wdGlvbnMgPSB7XG4gICAgICAgICAgICAuLi50aGlzLmNsaWVudENvbmZpZyxcbiAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLmF6dXJlT3BlbkFJQXBpS2V5KSB7XG4gICAgICAgICAgICByZXF1ZXN0T3B0aW9ucy5oZWFkZXJzID0ge1xuICAgICAgICAgICAgICAgIFwiYXBpLWtleVwiOiB0aGlzLmF6dXJlT3BlbkFJQXBpS2V5LFxuICAgICAgICAgICAgICAgIC4uLnJlcXVlc3RPcHRpb25zLmhlYWRlcnMsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmVxdWVzdE9wdGlvbnMucXVlcnkgPSB7XG4gICAgICAgICAgICAgICAgXCJhcGktdmVyc2lvblwiOiB0aGlzLmF6dXJlT3BlbkFJQXBpVmVyc2lvbixcbiAgICAgICAgICAgICAgICAuLi5yZXF1ZXN0T3B0aW9ucy5xdWVyeSxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcXVlc3RPcHRpb25zO1xuICAgIH1cbiAgICBfbGxtVHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwib3BlbmFpXCI7XG4gICAgfVxufVxuIl0sIm5hbWVzIjpbIk9wZW5BSSIsIk9wZW5BSUNsaWVudCIsIkdlbmVyYXRpb25DaHVuayIsImdldEVudmlyb25tZW50VmFyaWFibGUiLCJMTE0iLCJnZXRFbmRwb2ludCIsIndyYXBPcGVuQUlDbGllbnRFcnJvciIsIk9wZW5BSUNoYXQiLCJsY19uYW1lIiwiY2FsbEtleXMiLCJsY19zZWNyZXRzIiwib3BlbkFJQXBpS2V5IiwiYXp1cmVPcGVuQUlBcGlLZXkiLCJvcmdhbml6YXRpb24iLCJsY19hbGlhc2VzIiwibW9kZWxOYW1lIiwiYXp1cmVPcGVuQUlBcGlWZXJzaW9uIiwiYXp1cmVPcGVuQUlBcGlJbnN0YW5jZU5hbWUiLCJhenVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lIiwiY29uc3RydWN0b3IiLCJmaWVsZHMiLCJjb25maWd1cmF0aW9uIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJ2YWx1ZSIsIkVycm9yIiwiYXp1cmVPcGVuQUlBcGlDb21wbGV0aW9uc0RlcGxveW1lbnROYW1lIiwiYXp1cmVPcGVuQUlCYXNlUGF0aCIsInByZWZpeE1lc3NhZ2VzIiwibW9kZWxLd2FyZ3MiLCJ0aW1lb3V0IiwidGVtcGVyYXR1cmUiLCJ0b3BQIiwiZnJlcXVlbmN5UGVuYWx0eSIsInByZXNlbmNlUGVuYWx0eSIsIm4iLCJsb2dpdEJpYXMiLCJtYXhUb2tlbnMiLCJzdG9wIiwidXNlciIsInN0cmVhbWluZyIsImNsaWVudENvbmZpZyIsImFwaUtleSIsImJhc2VVUkwiLCJiYXNlUGF0aCIsImRhbmdlcm91c2x5QWxsb3dCcm93c2VyIiwiZGVmYXVsdEhlYWRlcnMiLCJiYXNlT3B0aW9ucyIsImhlYWRlcnMiLCJkZWZhdWx0UXVlcnkiLCJwYXJhbXMiLCJpbnZvY2F0aW9uUGFyYW1zIiwib3B0aW9ucyIsIm1vZGVsIiwidG9wX3AiLCJmcmVxdWVuY3lfcGVuYWx0eSIsInByZXNlbmNlX3BlbmFsdHkiLCJsb2dpdF9iaWFzIiwibWF4X3Rva2VucyIsInVuZGVmaW5lZCIsInN0cmVhbSIsIl9pZGVudGlmeWluZ1BhcmFtcyIsIm1vZGVsX25hbWUiLCJpZGVudGlmeWluZ1BhcmFtcyIsImZvcm1hdE1lc3NhZ2VzIiwicHJvbXB0IiwibWVzc2FnZSIsInJvbGUiLCJjb250ZW50IiwiX3N0cmVhbVJlc3BvbnNlQ2h1bmtzIiwicnVuTWFuYWdlciIsIm1lc3NhZ2VzIiwiY29tcGxldGlvbldpdGhSZXRyeSIsImRhdGEiLCJjaG9pY2UiLCJjaG9pY2VzIiwiZGVsdGEiLCJnZW5lcmF0aW9uQ2h1bmsiLCJ0ZXh0IiwibmV3VG9rZW5JbmRpY2VzIiwicHJvbXB0SW5kZXgiLCJjb21wbGV0aW9uIiwiaW5kZXgiLCJoYW5kbGVMTE1OZXdUb2tlbiIsInNpZ25hbCIsImFib3J0ZWQiLCJfY2FsbCIsImZpbmFsQ2h1bmsiLCJjaHVuayIsImNvbmNhdCIsInJlc3BvbnNlIiwicmVxdWVzdCIsInJlcXVlc3RPcHRpb25zIiwiX2dldENsaWVudE9wdGlvbnMiLCJjYWxsZXIiLCJjYWxsIiwicmVzIiwiY2xpZW50IiwiY2hhdCIsImNvbXBsZXRpb25zIiwiY3JlYXRlIiwiZSIsImVycm9yIiwib3BlbkFJRW5kcG9pbnRDb25maWciLCJlbmRwb2ludCIsIm1heFJldHJpZXMiLCJxdWVyeSIsIl9sbG1UeXBlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/openai/dist/legacy.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/openai/dist/llms.js":
/*!*****************************************************!*\
  !*** ./node_modules/@langchain/openai/dist/llms.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OpenAI: () => (/* binding */ OpenAI),\n/* harmony export */   OpenAIChat: () => (/* reexport safe */ _legacy_js__WEBPACK_IMPORTED_MODULE_6__.OpenAIChat)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var _langchain_core_language_models_base__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @langchain/core/language_models/base */ \"(rsc)/./node_modules/@langchain/core/language_models/base.js\");\n/* harmony import */ var _langchain_core_outputs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/outputs */ \"(rsc)/./node_modules/@langchain/core/outputs.js\");\n/* harmony import */ var _langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @langchain/core/utils/env */ \"(rsc)/./node_modules/@langchain/core/utils/env.js\");\n/* harmony import */ var _langchain_core_language_models_llms__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @langchain/core/language_models/llms */ \"(rsc)/./node_modules/@langchain/core/language_models/llms.js\");\n/* harmony import */ var _langchain_core_utils_chunk_array__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @langchain/core/utils/chunk_array */ \"(rsc)/./node_modules/@langchain/core/utils/chunk_array.js\");\n/* harmony import */ var _utils_azure_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./utils/azure.js */ \"(rsc)/./node_modules/@langchain/openai/dist/utils/azure.js\");\n/* harmony import */ var _legacy_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./legacy.js */ \"(rsc)/./node_modules/@langchain/openai/dist/legacy.js\");\n/* harmony import */ var _utils_openai_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utils/openai.js */ \"(rsc)/./node_modules/@langchain/openai/dist/utils/openai.js\");\n\n\n\n\n\n\n\n\n\n\n/**\n * Wrapper around OpenAI large language models.\n *\n * To use you should have the `openai` package installed, with the\n * `OPENAI_API_KEY` environment variable set.\n *\n * To use with Azure you should have the `openai` package installed, with the\n * `AZURE_OPENAI_API_KEY`,\n * `AZURE_OPENAI_API_INSTANCE_NAME`,\n * `AZURE_OPENAI_API_DEPLOYMENT_NAME`\n * and `AZURE_OPENAI_API_VERSION` environment variable set.\n *\n * @remarks\n * Any parameters that are valid to be passed to {@link\n * https://platform.openai.com/docs/api-reference/completions/create |\n * `openai.createCompletion`} can be passed through {@link modelKwargs}, even\n * if not explicitly available on this class.\n * @example\n * ```typescript\n * const model = new OpenAI({\n *   modelName: \"gpt-4\",\n *   temperature: 0.7,\n *   maxTokens: 1000,\n *   maxRetries: 5,\n * });\n *\n * const res = await model.call(\n *   \"Question: What would be a good company name for a company that makes colorful socks?\\nAnswer:\"\n * );\n * console.log({ res });\n * ```\n */ class OpenAI extends _langchain_core_language_models_llms__WEBPACK_IMPORTED_MODULE_3__.BaseLLM {\n    static lc_name() {\n        return \"OpenAI\";\n    }\n    get callKeys() {\n        return [\n            ...super.callKeys,\n            \"options\"\n        ];\n    }\n    get lc_secrets() {\n        return {\n            openAIApiKey: \"OPENAI_API_KEY\",\n            azureOpenAIApiKey: \"AZURE_OPENAI_API_KEY\",\n            organization: \"OPENAI_ORGANIZATION\"\n        };\n    }\n    get lc_aliases() {\n        return {\n            modelName: \"model\",\n            openAIApiKey: \"openai_api_key\",\n            azureOpenAIApiVersion: \"azure_openai_api_version\",\n            azureOpenAIApiKey: \"azure_openai_api_key\",\n            azureOpenAIApiInstanceName: \"azure_openai_api_instance_name\",\n            azureOpenAIApiDeploymentName: \"azure_openai_api_deployment_name\"\n        };\n    }\n    constructor(fields, /** @deprecated */ configuration){\n        if ((fields?.modelName?.startsWith(\"gpt-3.5-turbo\") || fields?.modelName?.startsWith(\"gpt-4\")) && !fields?.modelName?.includes(\"-instruct\")) {\n            // eslint-disable-next-line no-constructor-return\n            return new _legacy_js__WEBPACK_IMPORTED_MODULE_6__.OpenAIChat(fields, configuration);\n        }\n        super(fields ?? {});\n        Object.defineProperty(this, \"lc_serializable\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: true\n        });\n        Object.defineProperty(this, \"temperature\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 0.7\n        });\n        Object.defineProperty(this, \"maxTokens\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 256\n        });\n        Object.defineProperty(this, \"topP\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 1\n        });\n        Object.defineProperty(this, \"frequencyPenalty\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 0\n        });\n        Object.defineProperty(this, \"presencePenalty\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 0\n        });\n        Object.defineProperty(this, \"n\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 1\n        });\n        Object.defineProperty(this, \"bestOf\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"logitBias\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"modelName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: \"gpt-3.5-turbo-instruct\"\n        });\n        Object.defineProperty(this, \"modelKwargs\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"batchSize\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 20\n        });\n        Object.defineProperty(this, \"timeout\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"stop\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"user\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"streaming\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"openAIApiKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiVersion\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiInstanceName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIApiDeploymentName\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"azureOpenAIBasePath\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"organization\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"client\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"clientConfig\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.openAIApiKey = fields?.openAIApiKey ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_2__.getEnvironmentVariable)(\"OPENAI_API_KEY\");\n        this.azureOpenAIApiKey = fields?.azureOpenAIApiKey ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_2__.getEnvironmentVariable)(\"AZURE_OPENAI_API_KEY\");\n        if (!this.azureOpenAIApiKey && !this.openAIApiKey) {\n            throw new Error(\"OpenAI or Azure OpenAI API key not found\");\n        }\n        this.azureOpenAIApiInstanceName = fields?.azureOpenAIApiInstanceName ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_2__.getEnvironmentVariable)(\"AZURE_OPENAI_API_INSTANCE_NAME\");\n        this.azureOpenAIApiDeploymentName = (fields?.azureOpenAIApiCompletionsDeploymentName || fields?.azureOpenAIApiDeploymentName) ?? ((0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_2__.getEnvironmentVariable)(\"AZURE_OPENAI_API_COMPLETIONS_DEPLOYMENT_NAME\") || (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_2__.getEnvironmentVariable)(\"AZURE_OPENAI_API_DEPLOYMENT_NAME\"));\n        this.azureOpenAIApiVersion = fields?.azureOpenAIApiVersion ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_2__.getEnvironmentVariable)(\"AZURE_OPENAI_API_VERSION\");\n        this.azureOpenAIBasePath = fields?.azureOpenAIBasePath ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_2__.getEnvironmentVariable)(\"AZURE_OPENAI_BASE_PATH\");\n        this.organization = fields?.configuration?.organization ?? (0,_langchain_core_utils_env__WEBPACK_IMPORTED_MODULE_2__.getEnvironmentVariable)(\"OPENAI_ORGANIZATION\");\n        this.modelName = fields?.modelName ?? this.modelName;\n        this.modelKwargs = fields?.modelKwargs ?? {};\n        this.batchSize = fields?.batchSize ?? this.batchSize;\n        this.timeout = fields?.timeout;\n        this.temperature = fields?.temperature ?? this.temperature;\n        this.maxTokens = fields?.maxTokens ?? this.maxTokens;\n        this.topP = fields?.topP ?? this.topP;\n        this.frequencyPenalty = fields?.frequencyPenalty ?? this.frequencyPenalty;\n        this.presencePenalty = fields?.presencePenalty ?? this.presencePenalty;\n        this.n = fields?.n ?? this.n;\n        this.bestOf = fields?.bestOf ?? this.bestOf;\n        this.logitBias = fields?.logitBias;\n        this.stop = fields?.stop;\n        this.user = fields?.user;\n        this.streaming = fields?.streaming ?? false;\n        if (this.streaming && this.bestOf && this.bestOf > 1) {\n            throw new Error(\"Cannot stream results when bestOf > 1\");\n        }\n        if (this.azureOpenAIApiKey) {\n            if (!this.azureOpenAIApiInstanceName && !this.azureOpenAIBasePath) {\n                throw new Error(\"Azure OpenAI API instance name not found\");\n            }\n            if (!this.azureOpenAIApiDeploymentName) {\n                throw new Error(\"Azure OpenAI API deployment name not found\");\n            }\n            if (!this.azureOpenAIApiVersion) {\n                throw new Error(\"Azure OpenAI API version not found\");\n            }\n            this.openAIApiKey = this.openAIApiKey ?? \"\";\n        }\n        this.clientConfig = {\n            apiKey: this.openAIApiKey,\n            organization: this.organization,\n            baseURL: configuration?.basePath ?? fields?.configuration?.basePath,\n            dangerouslyAllowBrowser: true,\n            defaultHeaders: configuration?.baseOptions?.headers ?? fields?.configuration?.baseOptions?.headers,\n            defaultQuery: configuration?.baseOptions?.params ?? fields?.configuration?.baseOptions?.params,\n            ...configuration,\n            ...fields?.configuration\n        };\n    }\n    /**\n     * Get the parameters used to invoke the model\n     */ invocationParams(options) {\n        return {\n            model: this.modelName,\n            temperature: this.temperature,\n            max_tokens: this.maxTokens,\n            top_p: this.topP,\n            frequency_penalty: this.frequencyPenalty,\n            presence_penalty: this.presencePenalty,\n            n: this.n,\n            best_of: this.bestOf,\n            logit_bias: this.logitBias,\n            stop: options?.stop ?? this.stop,\n            user: this.user,\n            stream: this.streaming,\n            ...this.modelKwargs\n        };\n    }\n    /** @ignore */ _identifyingParams() {\n        return {\n            model_name: this.modelName,\n            ...this.invocationParams(),\n            ...this.clientConfig\n        };\n    }\n    /**\n     * Get the identifying parameters for the model\n     */ identifyingParams() {\n        return this._identifyingParams();\n    }\n    /**\n     * Call out to OpenAI's endpoint with k unique prompts\n     *\n     * @param [prompts] - The prompts to pass into the model.\n     * @param [options] - Optional list of stop words to use when generating.\n     * @param [runManager] - Optional callback manager to use when generating.\n     *\n     * @returns The full LLM output.\n     *\n     * @example\n     * ```ts\n     * import { OpenAI } from \"langchain/llms/openai\";\n     * const openai = new OpenAI();\n     * const response = await openai.generate([\"Tell me a joke.\"]);\n     * ```\n     */ async _generate(prompts, options, runManager) {\n        const subPrompts = (0,_langchain_core_utils_chunk_array__WEBPACK_IMPORTED_MODULE_4__.chunkArray)(prompts, this.batchSize);\n        const choices = [];\n        const tokenUsage = {};\n        const params = this.invocationParams(options);\n        if (params.max_tokens === -1) {\n            if (prompts.length !== 1) {\n                throw new Error(\"max_tokens set to -1 not supported for multiple inputs\");\n            }\n            params.max_tokens = await (0,_langchain_core_language_models_base__WEBPACK_IMPORTED_MODULE_0__.calculateMaxTokens)({\n                prompt: prompts[0],\n                // Cast here to allow for other models that may not fit the union\n                modelName: this.modelName\n            });\n        }\n        for(let i = 0; i < subPrompts.length; i += 1){\n            const data = params.stream ? await (async ()=>{\n                const choices = [];\n                let response;\n                const stream = await this.completionWithRetry({\n                    ...params,\n                    stream: true,\n                    prompt: subPrompts[i]\n                }, options);\n                for await (const message of stream){\n                    // on the first message set the response properties\n                    if (!response) {\n                        response = {\n                            id: message.id,\n                            object: message.object,\n                            created: message.created,\n                            model: message.model\n                        };\n                    }\n                    // on all messages, update choice\n                    for (const part of message.choices){\n                        if (!choices[part.index]) {\n                            choices[part.index] = part;\n                        } else {\n                            const choice = choices[part.index];\n                            choice.text += part.text;\n                            choice.finish_reason = part.finish_reason;\n                            choice.logprobs = part.logprobs;\n                        }\n                        void runManager?.handleLLMNewToken(part.text, {\n                            prompt: Math.floor(part.index / this.n),\n                            completion: part.index % this.n\n                        });\n                    }\n                }\n                if (options.signal?.aborted) {\n                    throw new Error(\"AbortError\");\n                }\n                return {\n                    ...response,\n                    choices\n                };\n            })() : await this.completionWithRetry({\n                ...params,\n                stream: false,\n                prompt: subPrompts[i]\n            }, {\n                signal: options.signal,\n                ...options.options\n            });\n            choices.push(...data.choices);\n            const { completion_tokens: completionTokens, prompt_tokens: promptTokens, total_tokens: totalTokens } = data.usage ? data.usage : {\n                completion_tokens: undefined,\n                prompt_tokens: undefined,\n                total_tokens: undefined\n            };\n            if (completionTokens) {\n                tokenUsage.completionTokens = (tokenUsage.completionTokens ?? 0) + completionTokens;\n            }\n            if (promptTokens) {\n                tokenUsage.promptTokens = (tokenUsage.promptTokens ?? 0) + promptTokens;\n            }\n            if (totalTokens) {\n                tokenUsage.totalTokens = (tokenUsage.totalTokens ?? 0) + totalTokens;\n            }\n        }\n        const generations = (0,_langchain_core_utils_chunk_array__WEBPACK_IMPORTED_MODULE_4__.chunkArray)(choices, this.n).map((promptChoices)=>promptChoices.map((choice)=>({\n                    text: choice.text ?? \"\",\n                    generationInfo: {\n                        finishReason: choice.finish_reason,\n                        logprobs: choice.logprobs\n                    }\n                })));\n        return {\n            generations,\n            llmOutput: {\n                tokenUsage\n            }\n        };\n    }\n    // TODO(jacoblee): Refactor with _generate(..., {stream: true}) implementation?\n    async *_streamResponseChunks(input, options, runManager) {\n        const params = {\n            ...this.invocationParams(options),\n            prompt: input,\n            stream: true\n        };\n        const stream = await this.completionWithRetry(params, options);\n        for await (const data of stream){\n            const choice = data?.choices[0];\n            if (!choice) {\n                continue;\n            }\n            const chunk = new _langchain_core_outputs__WEBPACK_IMPORTED_MODULE_1__.GenerationChunk({\n                text: choice.text,\n                generationInfo: {\n                    finishReason: choice.finish_reason\n                }\n            });\n            yield chunk;\n            // eslint-disable-next-line no-void\n            void runManager?.handleLLMNewToken(chunk.text ?? \"\");\n        }\n        if (options.signal?.aborted) {\n            throw new Error(\"AbortError\");\n        }\n    }\n    async completionWithRetry(request, options) {\n        const requestOptions = this._getClientOptions(options);\n        return this.caller.call(async ()=>{\n            try {\n                const res = await this.client.completions.create(request, requestOptions);\n                return res;\n            } catch (e) {\n                const error = (0,_utils_openai_js__WEBPACK_IMPORTED_MODULE_7__.wrapOpenAIClientError)(e);\n                throw error;\n            }\n        });\n    }\n    /**\n     * Calls the OpenAI API with retry logic in case of failures.\n     * @param request The request to send to the OpenAI API.\n     * @param options Optional configuration for the API call.\n     * @returns The response from the OpenAI API.\n     */ _getClientOptions(options) {\n        if (!this.client) {\n            const openAIEndpointConfig = {\n                azureOpenAIApiDeploymentName: this.azureOpenAIApiDeploymentName,\n                azureOpenAIApiInstanceName: this.azureOpenAIApiInstanceName,\n                azureOpenAIApiKey: this.azureOpenAIApiKey,\n                azureOpenAIBasePath: this.azureOpenAIBasePath,\n                baseURL: this.clientConfig.baseURL\n            };\n            const endpoint = (0,_utils_azure_js__WEBPACK_IMPORTED_MODULE_5__.getEndpoint)(openAIEndpointConfig);\n            const params = {\n                ...this.clientConfig,\n                baseURL: endpoint,\n                timeout: this.timeout,\n                maxRetries: 0\n            };\n            if (!params.baseURL) {\n                delete params.baseURL;\n            }\n            this.client = new openai__WEBPACK_IMPORTED_MODULE_8__.OpenAI(params);\n        }\n        const requestOptions = {\n            ...this.clientConfig,\n            ...options\n        };\n        if (this.azureOpenAIApiKey) {\n            requestOptions.headers = {\n                \"api-key\": this.azureOpenAIApiKey,\n                ...requestOptions.headers\n            };\n            requestOptions.query = {\n                \"api-version\": this.azureOpenAIApiVersion,\n                ...requestOptions.query\n            };\n        }\n        return requestOptions;\n    }\n    _llmType() {\n        return \"openai\";\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvZGlzdC9sbG1zLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQWdEO0FBQzBCO0FBQ2hCO0FBQ1M7QUFDSDtBQUNEO0FBQ2hCO0FBQ047QUFDaUI7QUFDcEM7QUFDdEI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Q0ErQkMsR0FDTSxNQUFNQSxlQUFlSyx5RUFBT0E7SUFDL0IsT0FBT0ssVUFBVTtRQUNiLE9BQU87SUFDWDtJQUNBLElBQUlDLFdBQVc7UUFDWCxPQUFPO2VBQUksS0FBSyxDQUFDQTtZQUFVO1NBQVU7SUFDekM7SUFDQSxJQUFJQyxhQUFhO1FBQ2IsT0FBTztZQUNIQyxjQUFjO1lBQ2RDLG1CQUFtQjtZQUNuQkMsY0FBYztRQUNsQjtJQUNKO0lBQ0EsSUFBSUMsYUFBYTtRQUNiLE9BQU87WUFDSEMsV0FBVztZQUNYSixjQUFjO1lBQ2RLLHVCQUF1QjtZQUN2QkosbUJBQW1CO1lBQ25CSyw0QkFBNEI7WUFDNUJDLDhCQUE4QjtRQUNsQztJQUNKO0lBQ0FDLFlBQVlDLE1BQU0sRUFDbEIsZ0JBQWdCLEdBQ2hCQyxhQUFhLENBQUU7UUFDWCxJQUFJLENBQUNELFFBQVFMLFdBQVdPLFdBQVcsb0JBQy9CRixRQUFRTCxXQUFXTyxXQUFXLFFBQU8sS0FDckMsQ0FBQ0YsUUFBUUwsV0FBV1EsU0FBUyxjQUFjO1lBQzNDLGlEQUFpRDtZQUNqRCxPQUFPLElBQUlqQixrREFBVUEsQ0FBQ2MsUUFBUUM7UUFDbEM7UUFDQSxLQUFLLENBQUNELFVBQVUsQ0FBQztRQUNqQkksT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxtQkFBbUI7WUFDM0NDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGVBQWU7WUFDdkNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGFBQWE7WUFDckNDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFFBQVE7WUFDaENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU87UUFDWDtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLG9CQUFvQjtZQUM1Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTztRQUNYO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsbUJBQW1CO1lBQzNDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxLQUFLO1lBQzdCQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxVQUFVO1lBQ2xDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxhQUFhO1lBQ3JDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxhQUFhO1lBQ3JDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxlQUFlO1lBQ3ZDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxhQUFhO1lBQ3JDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxXQUFXO1lBQ25DQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxRQUFRO1lBQ2hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxRQUFRO1lBQ2hDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxhQUFhO1lBQ3JDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPO1FBQ1g7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLHlCQUF5QjtZQUNqREMsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUscUJBQXFCO1lBQzdDQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSw4QkFBOEI7WUFDdERDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdDQUFnQztZQUN4REMsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0FMLE9BQU9DLGNBQWMsQ0FBQyxJQUFJLEVBQUUsdUJBQXVCO1lBQy9DQyxZQUFZO1lBQ1pDLGNBQWM7WUFDZEMsVUFBVTtZQUNWQyxPQUFPLEtBQUs7UUFDaEI7UUFDQUwsT0FBT0MsY0FBYyxDQUFDLElBQUksRUFBRSxnQkFBZ0I7WUFDeENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVU7WUFDbENDLFlBQVk7WUFDWkMsY0FBYztZQUNkQyxVQUFVO1lBQ1ZDLE9BQU8sS0FBSztRQUNoQjtRQUNBTCxPQUFPQyxjQUFjLENBQUMsSUFBSSxFQUFFLGdCQUFnQjtZQUN4Q0MsWUFBWTtZQUNaQyxjQUFjO1lBQ2RDLFVBQVU7WUFDVkMsT0FBTyxLQUFLO1FBQ2hCO1FBQ0EsSUFBSSxDQUFDbEIsWUFBWSxHQUNiUyxRQUFRVCxnQkFBZ0JULGlGQUFzQkEsQ0FBQztRQUNuRCxJQUFJLENBQUNVLGlCQUFpQixHQUNsQlEsUUFBUVIscUJBQ0pWLGlGQUFzQkEsQ0FBQztRQUMvQixJQUFJLENBQUMsSUFBSSxDQUFDVSxpQkFBaUIsSUFBSSxDQUFDLElBQUksQ0FBQ0QsWUFBWSxFQUFFO1lBQy9DLE1BQU0sSUFBSW1CLE1BQU07UUFDcEI7UUFDQSxJQUFJLENBQUNiLDBCQUEwQixHQUMzQkcsUUFBUUgsOEJBQ0pmLGlGQUFzQkEsQ0FBQztRQUMvQixJQUFJLENBQUNnQiw0QkFBNEIsR0FDN0IsQ0FBQ0UsUUFBUVcsMkNBQ0xYLFFBQVFGLDRCQUEyQixLQUNsQ2hCLENBQUFBLGlGQUFzQkEsQ0FBQyxtREFDcEJBLGlGQUFzQkEsQ0FBQyxtQ0FBa0M7UUFDckUsSUFBSSxDQUFDYyxxQkFBcUIsR0FDdEJJLFFBQVFKLHlCQUNKZCxpRkFBc0JBLENBQUM7UUFDL0IsSUFBSSxDQUFDOEIsbUJBQW1CLEdBQ3BCWixRQUFRWSx1QkFDSjlCLGlGQUFzQkEsQ0FBQztRQUMvQixJQUFJLENBQUNXLFlBQVksR0FDYk8sUUFBUUMsZUFBZVIsZ0JBQ25CWCxpRkFBc0JBLENBQUM7UUFDL0IsSUFBSSxDQUFDYSxTQUFTLEdBQUdLLFFBQVFMLGFBQWEsSUFBSSxDQUFDQSxTQUFTO1FBQ3BELElBQUksQ0FBQ2tCLFdBQVcsR0FBR2IsUUFBUWEsZUFBZSxDQUFDO1FBQzNDLElBQUksQ0FBQ0MsU0FBUyxHQUFHZCxRQUFRYyxhQUFhLElBQUksQ0FBQ0EsU0FBUztRQUNwRCxJQUFJLENBQUNDLE9BQU8sR0FBR2YsUUFBUWU7UUFDdkIsSUFBSSxDQUFDQyxXQUFXLEdBQUdoQixRQUFRZ0IsZUFBZSxJQUFJLENBQUNBLFdBQVc7UUFDMUQsSUFBSSxDQUFDQyxTQUFTLEdBQUdqQixRQUFRaUIsYUFBYSxJQUFJLENBQUNBLFNBQVM7UUFDcEQsSUFBSSxDQUFDQyxJQUFJLEdBQUdsQixRQUFRa0IsUUFBUSxJQUFJLENBQUNBLElBQUk7UUFDckMsSUFBSSxDQUFDQyxnQkFBZ0IsR0FBR25CLFFBQVFtQixvQkFBb0IsSUFBSSxDQUFDQSxnQkFBZ0I7UUFDekUsSUFBSSxDQUFDQyxlQUFlLEdBQUdwQixRQUFRb0IsbUJBQW1CLElBQUksQ0FBQ0EsZUFBZTtRQUN0RSxJQUFJLENBQUNDLENBQUMsR0FBR3JCLFFBQVFxQixLQUFLLElBQUksQ0FBQ0EsQ0FBQztRQUM1QixJQUFJLENBQUNDLE1BQU0sR0FBR3RCLFFBQVFzQixVQUFVLElBQUksQ0FBQ0EsTUFBTTtRQUMzQyxJQUFJLENBQUNDLFNBQVMsR0FBR3ZCLFFBQVF1QjtRQUN6QixJQUFJLENBQUNDLElBQUksR0FBR3hCLFFBQVF3QjtRQUNwQixJQUFJLENBQUNDLElBQUksR0FBR3pCLFFBQVF5QjtRQUNwQixJQUFJLENBQUNDLFNBQVMsR0FBRzFCLFFBQVEwQixhQUFhO1FBQ3RDLElBQUksSUFBSSxDQUFDQSxTQUFTLElBQUksSUFBSSxDQUFDSixNQUFNLElBQUksSUFBSSxDQUFDQSxNQUFNLEdBQUcsR0FBRztZQUNsRCxNQUFNLElBQUlaLE1BQU07UUFDcEI7UUFDQSxJQUFJLElBQUksQ0FBQ2xCLGlCQUFpQixFQUFFO1lBQ3hCLElBQUksQ0FBQyxJQUFJLENBQUNLLDBCQUEwQixJQUFJLENBQUMsSUFBSSxDQUFDZSxtQkFBbUIsRUFBRTtnQkFDL0QsTUFBTSxJQUFJRixNQUFNO1lBQ3BCO1lBQ0EsSUFBSSxDQUFDLElBQUksQ0FBQ1osNEJBQTRCLEVBQUU7Z0JBQ3BDLE1BQU0sSUFBSVksTUFBTTtZQUNwQjtZQUNBLElBQUksQ0FBQyxJQUFJLENBQUNkLHFCQUFxQixFQUFFO2dCQUM3QixNQUFNLElBQUljLE1BQU07WUFDcEI7WUFDQSxJQUFJLENBQUNuQixZQUFZLEdBQUcsSUFBSSxDQUFDQSxZQUFZLElBQUk7UUFDN0M7UUFDQSxJQUFJLENBQUNvQyxZQUFZLEdBQUc7WUFDaEJDLFFBQVEsSUFBSSxDQUFDckMsWUFBWTtZQUN6QkUsY0FBYyxJQUFJLENBQUNBLFlBQVk7WUFDL0JvQyxTQUFTNUIsZUFBZTZCLFlBQVk5QixRQUFRQyxlQUFlNkI7WUFDM0RDLHlCQUF5QjtZQUN6QkMsZ0JBQWdCL0IsZUFBZWdDLGFBQWFDLFdBQ3hDbEMsUUFBUUMsZUFBZWdDLGFBQWFDO1lBQ3hDQyxjQUFjbEMsZUFBZWdDLGFBQWFHLFVBQ3RDcEMsUUFBUUMsZUFBZWdDLGFBQWFHO1lBQ3hDLEdBQUduQyxhQUFhO1lBQ2hCLEdBQUdELFFBQVFDLGFBQWE7UUFDNUI7SUFDSjtJQUNBOztLQUVDLEdBQ0RvQyxpQkFBaUJDLE9BQU8sRUFBRTtRQUN0QixPQUFPO1lBQ0hDLE9BQU8sSUFBSSxDQUFDNUMsU0FBUztZQUNyQnFCLGFBQWEsSUFBSSxDQUFDQSxXQUFXO1lBQzdCd0IsWUFBWSxJQUFJLENBQUN2QixTQUFTO1lBQzFCd0IsT0FBTyxJQUFJLENBQUN2QixJQUFJO1lBQ2hCd0IsbUJBQW1CLElBQUksQ0FBQ3ZCLGdCQUFnQjtZQUN4Q3dCLGtCQUFrQixJQUFJLENBQUN2QixlQUFlO1lBQ3RDQyxHQUFHLElBQUksQ0FBQ0EsQ0FBQztZQUNUdUIsU0FBUyxJQUFJLENBQUN0QixNQUFNO1lBQ3BCdUIsWUFBWSxJQUFJLENBQUN0QixTQUFTO1lBQzFCQyxNQUFNYyxTQUFTZCxRQUFRLElBQUksQ0FBQ0EsSUFBSTtZQUNoQ0MsTUFBTSxJQUFJLENBQUNBLElBQUk7WUFDZnFCLFFBQVEsSUFBSSxDQUFDcEIsU0FBUztZQUN0QixHQUFHLElBQUksQ0FBQ2IsV0FBVztRQUN2QjtJQUNKO0lBQ0EsWUFBWSxHQUNaa0MscUJBQXFCO1FBQ2pCLE9BQU87WUFDSEMsWUFBWSxJQUFJLENBQUNyRCxTQUFTO1lBQzFCLEdBQUcsSUFBSSxDQUFDMEMsZ0JBQWdCLEVBQUU7WUFDMUIsR0FBRyxJQUFJLENBQUNWLFlBQVk7UUFDeEI7SUFDSjtJQUNBOztLQUVDLEdBQ0RzQixvQkFBb0I7UUFDaEIsT0FBTyxJQUFJLENBQUNGLGtCQUFrQjtJQUNsQztJQUNBOzs7Ozs7Ozs7Ozs7Ozs7S0FlQyxHQUNELE1BQU1HLFVBQVVDLE9BQU8sRUFBRWIsT0FBTyxFQUFFYyxVQUFVLEVBQUU7UUFDMUMsTUFBTUMsYUFBYXJFLDZFQUFVQSxDQUFDbUUsU0FBUyxJQUFJLENBQUNyQyxTQUFTO1FBQ3JELE1BQU13QyxVQUFVLEVBQUU7UUFDbEIsTUFBTUMsYUFBYSxDQUFDO1FBQ3BCLE1BQU1uQixTQUFTLElBQUksQ0FBQ0MsZ0JBQWdCLENBQUNDO1FBQ3JDLElBQUlGLE9BQU9JLFVBQVUsS0FBSyxDQUFDLEdBQUc7WUFDMUIsSUFBSVcsUUFBUUssTUFBTSxLQUFLLEdBQUc7Z0JBQ3RCLE1BQU0sSUFBSTlDLE1BQU07WUFDcEI7WUFDQTBCLE9BQU9JLFVBQVUsR0FBRyxNQUFNNUQsd0ZBQWtCQSxDQUFDO2dCQUN6QzZFLFFBQVFOLE9BQU8sQ0FBQyxFQUFFO2dCQUNsQixpRUFBaUU7Z0JBQ2pFeEQsV0FBVyxJQUFJLENBQUNBLFNBQVM7WUFDN0I7UUFDSjtRQUNBLElBQUssSUFBSStELElBQUksR0FBR0EsSUFBSUwsV0FBV0csTUFBTSxFQUFFRSxLQUFLLEVBQUc7WUFDM0MsTUFBTUMsT0FBT3ZCLE9BQU9VLE1BQU0sR0FDcEIsTUFBTSxDQUFDO2dCQUNMLE1BQU1RLFVBQVUsRUFBRTtnQkFDbEIsSUFBSU07Z0JBQ0osTUFBTWQsU0FBUyxNQUFNLElBQUksQ0FBQ2UsbUJBQW1CLENBQUM7b0JBQzFDLEdBQUd6QixNQUFNO29CQUNUVSxRQUFRO29CQUNSVyxRQUFRSixVQUFVLENBQUNLLEVBQUU7Z0JBQ3pCLEdBQUdwQjtnQkFDSCxXQUFXLE1BQU13QixXQUFXaEIsT0FBUTtvQkFDaEMsbURBQW1EO29CQUNuRCxJQUFJLENBQUNjLFVBQVU7d0JBQ1hBLFdBQVc7NEJBQ1BHLElBQUlELFFBQVFDLEVBQUU7NEJBQ2RDLFFBQVFGLFFBQVFFLE1BQU07NEJBQ3RCQyxTQUFTSCxRQUFRRyxPQUFPOzRCQUN4QjFCLE9BQU91QixRQUFRdkIsS0FBSzt3QkFDeEI7b0JBQ0o7b0JBQ0EsaUNBQWlDO29CQUNqQyxLQUFLLE1BQU0yQixRQUFRSixRQUFRUixPQUFPLENBQUU7d0JBQ2hDLElBQUksQ0FBQ0EsT0FBTyxDQUFDWSxLQUFLQyxLQUFLLENBQUMsRUFBRTs0QkFDdEJiLE9BQU8sQ0FBQ1ksS0FBS0MsS0FBSyxDQUFDLEdBQUdEO3dCQUMxQixPQUNLOzRCQUNELE1BQU1FLFNBQVNkLE9BQU8sQ0FBQ1ksS0FBS0MsS0FBSyxDQUFDOzRCQUNsQ0MsT0FBT0MsSUFBSSxJQUFJSCxLQUFLRyxJQUFJOzRCQUN4QkQsT0FBT0UsYUFBYSxHQUFHSixLQUFLSSxhQUFhOzRCQUN6Q0YsT0FBT0csUUFBUSxHQUFHTCxLQUFLSyxRQUFRO3dCQUNuQzt3QkFDQSxLQUFLbkIsWUFBWW9CLGtCQUFrQk4sS0FBS0csSUFBSSxFQUFFOzRCQUMxQ1osUUFBUWdCLEtBQUtDLEtBQUssQ0FBQ1IsS0FBS0MsS0FBSyxHQUFHLElBQUksQ0FBQzlDLENBQUM7NEJBQ3RDc0QsWUFBWVQsS0FBS0MsS0FBSyxHQUFHLElBQUksQ0FBQzlDLENBQUM7d0JBQ25DO29CQUNKO2dCQUNKO2dCQUNBLElBQUlpQixRQUFRc0MsTUFBTSxFQUFFQyxTQUFTO29CQUN6QixNQUFNLElBQUluRSxNQUFNO2dCQUNwQjtnQkFDQSxPQUFPO29CQUFFLEdBQUdrRCxRQUFRO29CQUFFTjtnQkFBUTtZQUNsQyxPQUNFLE1BQU0sSUFBSSxDQUFDTyxtQkFBbUIsQ0FBQztnQkFDN0IsR0FBR3pCLE1BQU07Z0JBQ1RVLFFBQVE7Z0JBQ1JXLFFBQVFKLFVBQVUsQ0FBQ0ssRUFBRTtZQUN6QixHQUFHO2dCQUNDa0IsUUFBUXRDLFFBQVFzQyxNQUFNO2dCQUN0QixHQUFHdEMsUUFBUUEsT0FBTztZQUN0QjtZQUNKZ0IsUUFBUXdCLElBQUksSUFBSW5CLEtBQUtMLE9BQU87WUFDNUIsTUFBTSxFQUFFeUIsbUJBQW1CQyxnQkFBZ0IsRUFBRUMsZUFBZUMsWUFBWSxFQUFFQyxjQUFjQyxXQUFXLEVBQUcsR0FBR3pCLEtBQUswQixLQUFLLEdBQzdHMUIsS0FBSzBCLEtBQUssR0FDVjtnQkFDRU4sbUJBQW1CTztnQkFDbkJMLGVBQWVLO2dCQUNmSCxjQUFjRztZQUNsQjtZQUNKLElBQUlOLGtCQUFrQjtnQkFDbEJ6QixXQUFXeUIsZ0JBQWdCLEdBQ3ZCLENBQUN6QixXQUFXeUIsZ0JBQWdCLElBQUksS0FBS0E7WUFDN0M7WUFDQSxJQUFJRSxjQUFjO2dCQUNkM0IsV0FBVzJCLFlBQVksR0FBRyxDQUFDM0IsV0FBVzJCLFlBQVksSUFBSSxLQUFLQTtZQUMvRDtZQUNBLElBQUlFLGFBQWE7Z0JBQ2I3QixXQUFXNkIsV0FBVyxHQUFHLENBQUM3QixXQUFXNkIsV0FBVyxJQUFJLEtBQUtBO1lBQzdEO1FBQ0o7UUFDQSxNQUFNRyxjQUFjdkcsNkVBQVVBLENBQUNzRSxTQUFTLElBQUksQ0FBQ2pDLENBQUMsRUFBRW1FLEdBQUcsQ0FBQyxDQUFDQyxnQkFBa0JBLGNBQWNELEdBQUcsQ0FBQyxDQUFDcEIsU0FBWTtvQkFDbEdDLE1BQU1ELE9BQU9DLElBQUksSUFBSTtvQkFDckJxQixnQkFBZ0I7d0JBQ1pDLGNBQWN2QixPQUFPRSxhQUFhO3dCQUNsQ0MsVUFBVUgsT0FBT0csUUFBUTtvQkFDN0I7Z0JBQ0o7UUFDQSxPQUFPO1lBQ0hnQjtZQUNBSyxXQUFXO2dCQUFFckM7WUFBVztRQUM1QjtJQUNKO0lBQ0EsK0VBQStFO0lBQy9FLE9BQU9zQyxzQkFBc0JDLEtBQUssRUFBRXhELE9BQU8sRUFBRWMsVUFBVSxFQUFFO1FBQ3JELE1BQU1oQixTQUFTO1lBQ1gsR0FBRyxJQUFJLENBQUNDLGdCQUFnQixDQUFDQyxRQUFRO1lBQ2pDbUIsUUFBUXFDO1lBQ1JoRCxRQUFRO1FBQ1o7UUFDQSxNQUFNQSxTQUFTLE1BQU0sSUFBSSxDQUFDZSxtQkFBbUIsQ0FBQ3pCLFFBQVFFO1FBQ3RELFdBQVcsTUFBTXFCLFFBQVFiLE9BQVE7WUFDN0IsTUFBTXNCLFNBQVNULE1BQU1MLE9BQU8sQ0FBQyxFQUFFO1lBQy9CLElBQUksQ0FBQ2MsUUFBUTtnQkFDVDtZQUNKO1lBQ0EsTUFBTTJCLFFBQVEsSUFBSWxILG9FQUFlQSxDQUFDO2dCQUM5QndGLE1BQU1ELE9BQU9DLElBQUk7Z0JBQ2pCcUIsZ0JBQWdCO29CQUNaQyxjQUFjdkIsT0FBT0UsYUFBYTtnQkFDdEM7WUFDSjtZQUNBLE1BQU15QjtZQUNOLG1DQUFtQztZQUNuQyxLQUFLM0MsWUFBWW9CLGtCQUFrQnVCLE1BQU0xQixJQUFJLElBQUk7UUFDckQ7UUFDQSxJQUFJL0IsUUFBUXNDLE1BQU0sRUFBRUMsU0FBUztZQUN6QixNQUFNLElBQUluRSxNQUFNO1FBQ3BCO0lBQ0o7SUFDQSxNQUFNbUQsb0JBQW9CbUMsT0FBTyxFQUFFMUQsT0FBTyxFQUFFO1FBQ3hDLE1BQU0yRCxpQkFBaUIsSUFBSSxDQUFDQyxpQkFBaUIsQ0FBQzVEO1FBQzlDLE9BQU8sSUFBSSxDQUFDNkQsTUFBTSxDQUFDQyxJQUFJLENBQUM7WUFDcEIsSUFBSTtnQkFDQSxNQUFNQyxNQUFNLE1BQU0sSUFBSSxDQUFDQyxNQUFNLENBQUNDLFdBQVcsQ0FBQ0MsTUFBTSxDQUFDUixTQUFTQztnQkFDMUQsT0FBT0k7WUFDWCxFQUNBLE9BQU9JLEdBQUc7Z0JBQ04sTUFBTUMsUUFBUXZILHVFQUFxQkEsQ0FBQ3NIO2dCQUNwQyxNQUFNQztZQUNWO1FBQ0o7SUFDSjtJQUNBOzs7OztLQUtDLEdBQ0RSLGtCQUFrQjVELE9BQU8sRUFBRTtRQUN2QixJQUFJLENBQUMsSUFBSSxDQUFDZ0UsTUFBTSxFQUFFO1lBQ2QsTUFBTUssdUJBQXVCO2dCQUN6QjdHLDhCQUE4QixJQUFJLENBQUNBLDRCQUE0QjtnQkFDL0RELDRCQUE0QixJQUFJLENBQUNBLDBCQUEwQjtnQkFDM0RMLG1CQUFtQixJQUFJLENBQUNBLGlCQUFpQjtnQkFDekNvQixxQkFBcUIsSUFBSSxDQUFDQSxtQkFBbUI7Z0JBQzdDaUIsU0FBUyxJQUFJLENBQUNGLFlBQVksQ0FBQ0UsT0FBTztZQUN0QztZQUNBLE1BQU0rRSxXQUFXM0gsNERBQVdBLENBQUMwSDtZQUM3QixNQUFNdkUsU0FBUztnQkFDWCxHQUFHLElBQUksQ0FBQ1QsWUFBWTtnQkFDcEJFLFNBQVMrRTtnQkFDVDdGLFNBQVMsSUFBSSxDQUFDQSxPQUFPO2dCQUNyQjhGLFlBQVk7WUFDaEI7WUFDQSxJQUFJLENBQUN6RSxPQUFPUCxPQUFPLEVBQUU7Z0JBQ2pCLE9BQU9PLE9BQU9QLE9BQU87WUFDekI7WUFDQSxJQUFJLENBQUN5RSxNQUFNLEdBQUcsSUFBSTNILDBDQUFZQSxDQUFDeUQ7UUFDbkM7UUFDQSxNQUFNNkQsaUJBQWlCO1lBQ25CLEdBQUcsSUFBSSxDQUFDdEUsWUFBWTtZQUNwQixHQUFHVyxPQUFPO1FBQ2Q7UUFDQSxJQUFJLElBQUksQ0FBQzlDLGlCQUFpQixFQUFFO1lBQ3hCeUcsZUFBZS9ELE9BQU8sR0FBRztnQkFDckIsV0FBVyxJQUFJLENBQUMxQyxpQkFBaUI7Z0JBQ2pDLEdBQUd5RyxlQUFlL0QsT0FBTztZQUM3QjtZQUNBK0QsZUFBZWEsS0FBSyxHQUFHO2dCQUNuQixlQUFlLElBQUksQ0FBQ2xILHFCQUFxQjtnQkFDekMsR0FBR3FHLGVBQWVhLEtBQUs7WUFDM0I7UUFDSjtRQUNBLE9BQU9iO0lBQ1g7SUFDQWMsV0FBVztRQUNQLE9BQU87SUFDWDtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vb3BlbmFpL2Rpc3QvbGxtcy5qcz9mNmE5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9wZW5BSSBhcyBPcGVuQUlDbGllbnQgfSBmcm9tIFwib3BlbmFpXCI7XG5pbXBvcnQgeyBjYWxjdWxhdGVNYXhUb2tlbnMgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL2xhbmd1YWdlX21vZGVscy9iYXNlXCI7XG5pbXBvcnQgeyBHZW5lcmF0aW9uQ2h1bmsgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL291dHB1dHNcIjtcbmltcG9ydCB7IGdldEVudmlyb25tZW50VmFyaWFibGUgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL3V0aWxzL2VudlwiO1xuaW1wb3J0IHsgQmFzZUxMTSwgfSBmcm9tIFwiQGxhbmdjaGFpbi9jb3JlL2xhbmd1YWdlX21vZGVscy9sbG1zXCI7XG5pbXBvcnQgeyBjaHVua0FycmF5IH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS91dGlscy9jaHVua19hcnJheVwiO1xuaW1wb3J0IHsgZ2V0RW5kcG9pbnQgfSBmcm9tIFwiLi91dGlscy9henVyZS5qc1wiO1xuaW1wb3J0IHsgT3BlbkFJQ2hhdCB9IGZyb20gXCIuL2xlZ2FjeS5qc1wiO1xuaW1wb3J0IHsgd3JhcE9wZW5BSUNsaWVudEVycm9yIH0gZnJvbSBcIi4vdXRpbHMvb3BlbmFpLmpzXCI7XG5leHBvcnQgeyBPcGVuQUlDaGF0IH07XG4vKipcbiAqIFdyYXBwZXIgYXJvdW5kIE9wZW5BSSBsYXJnZSBsYW5ndWFnZSBtb2RlbHMuXG4gKlxuICogVG8gdXNlIHlvdSBzaG91bGQgaGF2ZSB0aGUgYG9wZW5haWAgcGFja2FnZSBpbnN0YWxsZWQsIHdpdGggdGhlXG4gKiBgT1BFTkFJX0FQSV9LRVlgIGVudmlyb25tZW50IHZhcmlhYmxlIHNldC5cbiAqXG4gKiBUbyB1c2Ugd2l0aCBBenVyZSB5b3Ugc2hvdWxkIGhhdmUgdGhlIGBvcGVuYWlgIHBhY2thZ2UgaW5zdGFsbGVkLCB3aXRoIHRoZVxuICogYEFaVVJFX09QRU5BSV9BUElfS0VZYCxcbiAqIGBBWlVSRV9PUEVOQUlfQVBJX0lOU1RBTkNFX05BTUVgLFxuICogYEFaVVJFX09QRU5BSV9BUElfREVQTE9ZTUVOVF9OQU1FYFxuICogYW5kIGBBWlVSRV9PUEVOQUlfQVBJX1ZFUlNJT05gIGVudmlyb25tZW50IHZhcmlhYmxlIHNldC5cbiAqXG4gKiBAcmVtYXJrc1xuICogQW55IHBhcmFtZXRlcnMgdGhhdCBhcmUgdmFsaWQgdG8gYmUgcGFzc2VkIHRvIHtAbGlua1xuICogaHR0cHM6Ly9wbGF0Zm9ybS5vcGVuYWkuY29tL2RvY3MvYXBpLXJlZmVyZW5jZS9jb21wbGV0aW9ucy9jcmVhdGUgfFxuICogYG9wZW5haS5jcmVhdGVDb21wbGV0aW9uYH0gY2FuIGJlIHBhc3NlZCB0aHJvdWdoIHtAbGluayBtb2RlbEt3YXJnc30sIGV2ZW5cbiAqIGlmIG5vdCBleHBsaWNpdGx5IGF2YWlsYWJsZSBvbiB0aGlzIGNsYXNzLlxuICogQGV4YW1wbGVcbiAqIGBgYHR5cGVzY3JpcHRcbiAqIGNvbnN0IG1vZGVsID0gbmV3IE9wZW5BSSh7XG4gKiAgIG1vZGVsTmFtZTogXCJncHQtNFwiLFxuICogICB0ZW1wZXJhdHVyZTogMC43LFxuICogICBtYXhUb2tlbnM6IDEwMDAsXG4gKiAgIG1heFJldHJpZXM6IDUsXG4gKiB9KTtcbiAqXG4gKiBjb25zdCByZXMgPSBhd2FpdCBtb2RlbC5jYWxsKFxuICogICBcIlF1ZXN0aW9uOiBXaGF0IHdvdWxkIGJlIGEgZ29vZCBjb21wYW55IG5hbWUgZm9yIGEgY29tcGFueSB0aGF0IG1ha2VzIGNvbG9yZnVsIHNvY2tzP1xcbkFuc3dlcjpcIlxuICogKTtcbiAqIGNvbnNvbGUubG9nKHsgcmVzIH0pO1xuICogYGBgXG4gKi9cbmV4cG9ydCBjbGFzcyBPcGVuQUkgZXh0ZW5kcyBCYXNlTExNIHtcbiAgICBzdGF0aWMgbGNfbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiT3BlbkFJXCI7XG4gICAgfVxuICAgIGdldCBjYWxsS2V5cygpIHtcbiAgICAgICAgcmV0dXJuIFsuLi5zdXBlci5jYWxsS2V5cywgXCJvcHRpb25zXCJdO1xuICAgIH1cbiAgICBnZXQgbGNfc2VjcmV0cygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9wZW5BSUFwaUtleTogXCJPUEVOQUlfQVBJX0tFWVwiLFxuICAgICAgICAgICAgYXp1cmVPcGVuQUlBcGlLZXk6IFwiQVpVUkVfT1BFTkFJX0FQSV9LRVlcIixcbiAgICAgICAgICAgIG9yZ2FuaXphdGlvbjogXCJPUEVOQUlfT1JHQU5JWkFUSU9OXCIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGdldCBsY19hbGlhc2VzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbW9kZWxOYW1lOiBcIm1vZGVsXCIsXG4gICAgICAgICAgICBvcGVuQUlBcGlLZXk6IFwib3BlbmFpX2FwaV9rZXlcIixcbiAgICAgICAgICAgIGF6dXJlT3BlbkFJQXBpVmVyc2lvbjogXCJhenVyZV9vcGVuYWlfYXBpX3ZlcnNpb25cIixcbiAgICAgICAgICAgIGF6dXJlT3BlbkFJQXBpS2V5OiBcImF6dXJlX29wZW5haV9hcGlfa2V5XCIsXG4gICAgICAgICAgICBhenVyZU9wZW5BSUFwaUluc3RhbmNlTmFtZTogXCJhenVyZV9vcGVuYWlfYXBpX2luc3RhbmNlX25hbWVcIixcbiAgICAgICAgICAgIGF6dXJlT3BlbkFJQXBpRGVwbG95bWVudE5hbWU6IFwiYXp1cmVfb3BlbmFpX2FwaV9kZXBsb3ltZW50X25hbWVcIixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY29uc3RydWN0b3IoZmllbGRzLCBcbiAgICAvKiogQGRlcHJlY2F0ZWQgKi9cbiAgICBjb25maWd1cmF0aW9uKSB7XG4gICAgICAgIGlmICgoZmllbGRzPy5tb2RlbE5hbWU/LnN0YXJ0c1dpdGgoXCJncHQtMy41LXR1cmJvXCIpIHx8XG4gICAgICAgICAgICBmaWVsZHM/Lm1vZGVsTmFtZT8uc3RhcnRzV2l0aChcImdwdC00XCIpKSAmJlxuICAgICAgICAgICAgIWZpZWxkcz8ubW9kZWxOYW1lPy5pbmNsdWRlcyhcIi1pbnN0cnVjdFwiKSkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnN0cnVjdG9yLXJldHVyblxuICAgICAgICAgICAgcmV0dXJuIG5ldyBPcGVuQUlDaGF0KGZpZWxkcywgY29uZmlndXJhdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgc3VwZXIoZmllbGRzID8/IHt9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibGNfc2VyaWFsaXphYmxlXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ0ZW1wZXJhdHVyZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogMC43XG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJtYXhUb2tlbnNcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IDI1NlxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwidG9wUFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogMVxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZnJlcXVlbmN5UGVuYWx0eVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwicHJlc2VuY2VQZW5hbHR5XCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJuXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiAxXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJiZXN0T2ZcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwibG9naXRCaWFzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1vZGVsTmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogXCJncHQtMy41LXR1cmJvLWluc3RydWN0XCJcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm1vZGVsS3dhcmdzXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImJhdGNoU2l6ZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogMjBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRpbWVvdXRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwic3RvcFwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJ1c2VyXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInN0cmVhbWluZ1wiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9wZW5BSUFwaUtleVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhenVyZU9wZW5BSUFwaVZlcnNpb25cIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXp1cmVPcGVuQUlBcGlLZXlcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXp1cmVPcGVuQUlBcGlJbnN0YW5jZU5hbWVcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZVwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJhenVyZU9wZW5BSUJhc2VQYXRoXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9yZ2FuaXphdGlvblwiLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICB2YWx1ZTogdm9pZCAwXG4gICAgICAgIH0pO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJjbGllbnRcIiwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgdmFsdWU6IHZvaWQgMFxuICAgICAgICB9KTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiY2xpZW50Q29uZmlnXCIsIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZhbHVlOiB2b2lkIDBcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMub3BlbkFJQXBpS2V5ID1cbiAgICAgICAgICAgIGZpZWxkcz8ub3BlbkFJQXBpS2V5ID8/IGdldEVudmlyb25tZW50VmFyaWFibGUoXCJPUEVOQUlfQVBJX0tFWVwiKTtcbiAgICAgICAgdGhpcy5henVyZU9wZW5BSUFwaUtleSA9XG4gICAgICAgICAgICBmaWVsZHM/LmF6dXJlT3BlbkFJQXBpS2V5ID8/XG4gICAgICAgICAgICAgICAgZ2V0RW52aXJvbm1lbnRWYXJpYWJsZShcIkFaVVJFX09QRU5BSV9BUElfS0VZXCIpO1xuICAgICAgICBpZiAoIXRoaXMuYXp1cmVPcGVuQUlBcGlLZXkgJiYgIXRoaXMub3BlbkFJQXBpS2V5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJPcGVuQUkgb3IgQXp1cmUgT3BlbkFJIEFQSSBrZXkgbm90IGZvdW5kXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYXp1cmVPcGVuQUlBcGlJbnN0YW5jZU5hbWUgPVxuICAgICAgICAgICAgZmllbGRzPy5henVyZU9wZW5BSUFwaUluc3RhbmNlTmFtZSA/P1xuICAgICAgICAgICAgICAgIGdldEVudmlyb25tZW50VmFyaWFibGUoXCJBWlVSRV9PUEVOQUlfQVBJX0lOU1RBTkNFX05BTUVcIik7XG4gICAgICAgIHRoaXMuYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZSA9XG4gICAgICAgICAgICAoZmllbGRzPy5henVyZU9wZW5BSUFwaUNvbXBsZXRpb25zRGVwbG95bWVudE5hbWUgfHxcbiAgICAgICAgICAgICAgICBmaWVsZHM/LmF6dXJlT3BlbkFJQXBpRGVwbG95bWVudE5hbWUpID8/XG4gICAgICAgICAgICAgICAgKGdldEVudmlyb25tZW50VmFyaWFibGUoXCJBWlVSRV9PUEVOQUlfQVBJX0NPTVBMRVRJT05TX0RFUExPWU1FTlRfTkFNRVwiKSB8fFxuICAgICAgICAgICAgICAgICAgICBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiQVpVUkVfT1BFTkFJX0FQSV9ERVBMT1lNRU5UX05BTUVcIikpO1xuICAgICAgICB0aGlzLmF6dXJlT3BlbkFJQXBpVmVyc2lvbiA9XG4gICAgICAgICAgICBmaWVsZHM/LmF6dXJlT3BlbkFJQXBpVmVyc2lvbiA/P1xuICAgICAgICAgICAgICAgIGdldEVudmlyb25tZW50VmFyaWFibGUoXCJBWlVSRV9PUEVOQUlfQVBJX1ZFUlNJT05cIik7XG4gICAgICAgIHRoaXMuYXp1cmVPcGVuQUlCYXNlUGF0aCA9XG4gICAgICAgICAgICBmaWVsZHM/LmF6dXJlT3BlbkFJQmFzZVBhdGggPz9cbiAgICAgICAgICAgICAgICBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiQVpVUkVfT1BFTkFJX0JBU0VfUEFUSFwiKTtcbiAgICAgICAgdGhpcy5vcmdhbml6YXRpb24gPVxuICAgICAgICAgICAgZmllbGRzPy5jb25maWd1cmF0aW9uPy5vcmdhbml6YXRpb24gPz9cbiAgICAgICAgICAgICAgICBnZXRFbnZpcm9ubWVudFZhcmlhYmxlKFwiT1BFTkFJX09SR0FOSVpBVElPTlwiKTtcbiAgICAgICAgdGhpcy5tb2RlbE5hbWUgPSBmaWVsZHM/Lm1vZGVsTmFtZSA/PyB0aGlzLm1vZGVsTmFtZTtcbiAgICAgICAgdGhpcy5tb2RlbEt3YXJncyA9IGZpZWxkcz8ubW9kZWxLd2FyZ3MgPz8ge307XG4gICAgICAgIHRoaXMuYmF0Y2hTaXplID0gZmllbGRzPy5iYXRjaFNpemUgPz8gdGhpcy5iYXRjaFNpemU7XG4gICAgICAgIHRoaXMudGltZW91dCA9IGZpZWxkcz8udGltZW91dDtcbiAgICAgICAgdGhpcy50ZW1wZXJhdHVyZSA9IGZpZWxkcz8udGVtcGVyYXR1cmUgPz8gdGhpcy50ZW1wZXJhdHVyZTtcbiAgICAgICAgdGhpcy5tYXhUb2tlbnMgPSBmaWVsZHM/Lm1heFRva2VucyA/PyB0aGlzLm1heFRva2VucztcbiAgICAgICAgdGhpcy50b3BQID0gZmllbGRzPy50b3BQID8/IHRoaXMudG9wUDtcbiAgICAgICAgdGhpcy5mcmVxdWVuY3lQZW5hbHR5ID0gZmllbGRzPy5mcmVxdWVuY3lQZW5hbHR5ID8/IHRoaXMuZnJlcXVlbmN5UGVuYWx0eTtcbiAgICAgICAgdGhpcy5wcmVzZW5jZVBlbmFsdHkgPSBmaWVsZHM/LnByZXNlbmNlUGVuYWx0eSA/PyB0aGlzLnByZXNlbmNlUGVuYWx0eTtcbiAgICAgICAgdGhpcy5uID0gZmllbGRzPy5uID8/IHRoaXMubjtcbiAgICAgICAgdGhpcy5iZXN0T2YgPSBmaWVsZHM/LmJlc3RPZiA/PyB0aGlzLmJlc3RPZjtcbiAgICAgICAgdGhpcy5sb2dpdEJpYXMgPSBmaWVsZHM/LmxvZ2l0QmlhcztcbiAgICAgICAgdGhpcy5zdG9wID0gZmllbGRzPy5zdG9wO1xuICAgICAgICB0aGlzLnVzZXIgPSBmaWVsZHM/LnVzZXI7XG4gICAgICAgIHRoaXMuc3RyZWFtaW5nID0gZmllbGRzPy5zdHJlYW1pbmcgPz8gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLnN0cmVhbWluZyAmJiB0aGlzLmJlc3RPZiAmJiB0aGlzLmJlc3RPZiA+IDEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBzdHJlYW0gcmVzdWx0cyB3aGVuIGJlc3RPZiA+IDFcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYXp1cmVPcGVuQUlBcGlLZXkpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5henVyZU9wZW5BSUFwaUluc3RhbmNlTmFtZSAmJiAhdGhpcy5henVyZU9wZW5BSUJhc2VQYXRoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXp1cmUgT3BlbkFJIEFQSSBpbnN0YW5jZSBuYW1lIG5vdCBmb3VuZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5henVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQXp1cmUgT3BlbkFJIEFQSSBkZXBsb3ltZW50IG5hbWUgbm90IGZvdW5kXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLmF6dXJlT3BlbkFJQXBpVmVyc2lvbikge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkF6dXJlIE9wZW5BSSBBUEkgdmVyc2lvbiBub3QgZm91bmRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm9wZW5BSUFwaUtleSA9IHRoaXMub3BlbkFJQXBpS2V5ID8/IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jbGllbnRDb25maWcgPSB7XG4gICAgICAgICAgICBhcGlLZXk6IHRoaXMub3BlbkFJQXBpS2V5LFxuICAgICAgICAgICAgb3JnYW5pemF0aW9uOiB0aGlzLm9yZ2FuaXphdGlvbixcbiAgICAgICAgICAgIGJhc2VVUkw6IGNvbmZpZ3VyYXRpb24/LmJhc2VQYXRoID8/IGZpZWxkcz8uY29uZmlndXJhdGlvbj8uYmFzZVBhdGgsXG4gICAgICAgICAgICBkYW5nZXJvdXNseUFsbG93QnJvd3NlcjogdHJ1ZSxcbiAgICAgICAgICAgIGRlZmF1bHRIZWFkZXJzOiBjb25maWd1cmF0aW9uPy5iYXNlT3B0aW9ucz8uaGVhZGVycyA/P1xuICAgICAgICAgICAgICAgIGZpZWxkcz8uY29uZmlndXJhdGlvbj8uYmFzZU9wdGlvbnM/LmhlYWRlcnMsXG4gICAgICAgICAgICBkZWZhdWx0UXVlcnk6IGNvbmZpZ3VyYXRpb24/LmJhc2VPcHRpb25zPy5wYXJhbXMgPz9cbiAgICAgICAgICAgICAgICBmaWVsZHM/LmNvbmZpZ3VyYXRpb24/LmJhc2VPcHRpb25zPy5wYXJhbXMsXG4gICAgICAgICAgICAuLi5jb25maWd1cmF0aW9uLFxuICAgICAgICAgICAgLi4uZmllbGRzPy5jb25maWd1cmF0aW9uLFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIHBhcmFtZXRlcnMgdXNlZCB0byBpbnZva2UgdGhlIG1vZGVsXG4gICAgICovXG4gICAgaW52b2NhdGlvblBhcmFtcyhvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtb2RlbDogdGhpcy5tb2RlbE5hbWUsXG4gICAgICAgICAgICB0ZW1wZXJhdHVyZTogdGhpcy50ZW1wZXJhdHVyZSxcbiAgICAgICAgICAgIG1heF90b2tlbnM6IHRoaXMubWF4VG9rZW5zLFxuICAgICAgICAgICAgdG9wX3A6IHRoaXMudG9wUCxcbiAgICAgICAgICAgIGZyZXF1ZW5jeV9wZW5hbHR5OiB0aGlzLmZyZXF1ZW5jeVBlbmFsdHksXG4gICAgICAgICAgICBwcmVzZW5jZV9wZW5hbHR5OiB0aGlzLnByZXNlbmNlUGVuYWx0eSxcbiAgICAgICAgICAgIG46IHRoaXMubixcbiAgICAgICAgICAgIGJlc3Rfb2Y6IHRoaXMuYmVzdE9mLFxuICAgICAgICAgICAgbG9naXRfYmlhczogdGhpcy5sb2dpdEJpYXMsXG4gICAgICAgICAgICBzdG9wOiBvcHRpb25zPy5zdG9wID8/IHRoaXMuc3RvcCxcbiAgICAgICAgICAgIHVzZXI6IHRoaXMudXNlcixcbiAgICAgICAgICAgIHN0cmVhbTogdGhpcy5zdHJlYW1pbmcsXG4gICAgICAgICAgICAuLi50aGlzLm1vZGVsS3dhcmdzLFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKiogQGlnbm9yZSAqL1xuICAgIF9pZGVudGlmeWluZ1BhcmFtcygpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG1vZGVsX25hbWU6IHRoaXMubW9kZWxOYW1lLFxuICAgICAgICAgICAgLi4udGhpcy5pbnZvY2F0aW9uUGFyYW1zKCksXG4gICAgICAgICAgICAuLi50aGlzLmNsaWVudENvbmZpZyxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBpZGVudGlmeWluZyBwYXJhbWV0ZXJzIGZvciB0aGUgbW9kZWxcbiAgICAgKi9cbiAgICBpZGVudGlmeWluZ1BhcmFtcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lkZW50aWZ5aW5nUGFyYW1zKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGwgb3V0IHRvIE9wZW5BSSdzIGVuZHBvaW50IHdpdGggayB1bmlxdWUgcHJvbXB0c1xuICAgICAqXG4gICAgICogQHBhcmFtIFtwcm9tcHRzXSAtIFRoZSBwcm9tcHRzIHRvIHBhc3MgaW50byB0aGUgbW9kZWwuXG4gICAgICogQHBhcmFtIFtvcHRpb25zXSAtIE9wdGlvbmFsIGxpc3Qgb2Ygc3RvcCB3b3JkcyB0byB1c2Ugd2hlbiBnZW5lcmF0aW5nLlxuICAgICAqIEBwYXJhbSBbcnVuTWFuYWdlcl0gLSBPcHRpb25hbCBjYWxsYmFjayBtYW5hZ2VyIHRvIHVzZSB3aGVuIGdlbmVyYXRpbmcuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgZnVsbCBMTE0gb3V0cHV0LlxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiBgYGB0c1xuICAgICAqIGltcG9ydCB7IE9wZW5BSSB9IGZyb20gXCJsYW5nY2hhaW4vbGxtcy9vcGVuYWlcIjtcbiAgICAgKiBjb25zdCBvcGVuYWkgPSBuZXcgT3BlbkFJKCk7XG4gICAgICogY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBvcGVuYWkuZ2VuZXJhdGUoW1wiVGVsbCBtZSBhIGpva2UuXCJdKTtcbiAgICAgKiBgYGBcbiAgICAgKi9cbiAgICBhc3luYyBfZ2VuZXJhdGUocHJvbXB0cywgb3B0aW9ucywgcnVuTWFuYWdlcikge1xuICAgICAgICBjb25zdCBzdWJQcm9tcHRzID0gY2h1bmtBcnJheShwcm9tcHRzLCB0aGlzLmJhdGNoU2l6ZSk7XG4gICAgICAgIGNvbnN0IGNob2ljZXMgPSBbXTtcbiAgICAgICAgY29uc3QgdG9rZW5Vc2FnZSA9IHt9O1xuICAgICAgICBjb25zdCBwYXJhbXMgPSB0aGlzLmludm9jYXRpb25QYXJhbXMob3B0aW9ucyk7XG4gICAgICAgIGlmIChwYXJhbXMubWF4X3Rva2VucyA9PT0gLTEpIHtcbiAgICAgICAgICAgIGlmIChwcm9tcHRzLmxlbmd0aCAhPT0gMSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIm1heF90b2tlbnMgc2V0IHRvIC0xIG5vdCBzdXBwb3J0ZWQgZm9yIG11bHRpcGxlIGlucHV0c1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcmFtcy5tYXhfdG9rZW5zID0gYXdhaXQgY2FsY3VsYXRlTWF4VG9rZW5zKHtcbiAgICAgICAgICAgICAgICBwcm9tcHQ6IHByb21wdHNbMF0sXG4gICAgICAgICAgICAgICAgLy8gQ2FzdCBoZXJlIHRvIGFsbG93IGZvciBvdGhlciBtb2RlbHMgdGhhdCBtYXkgbm90IGZpdCB0aGUgdW5pb25cbiAgICAgICAgICAgICAgICBtb2RlbE5hbWU6IHRoaXMubW9kZWxOYW1lLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdWJQcm9tcHRzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0gcGFyYW1zLnN0cmVhbVxuICAgICAgICAgICAgICAgID8gYXdhaXQgKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hvaWNlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0cmVhbSA9IGF3YWl0IHRoaXMuY29tcGxldGlvbldpdGhSZXRyeSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW06IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9tcHQ6IHN1YlByb21wdHNbaV0sXG4gICAgICAgICAgICAgICAgICAgIH0sIG9wdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IG1lc3NhZ2Ugb2Ygc3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBvbiB0aGUgZmlyc3QgbWVzc2FnZSBzZXQgdGhlIHJlc3BvbnNlIHByb3BlcnRpZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IG1lc3NhZ2UuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdDogbWVzc2FnZS5vYmplY3QsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZWQ6IG1lc3NhZ2UuY3JlYXRlZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWw6IG1lc3NhZ2UubW9kZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uIGFsbCBtZXNzYWdlcywgdXBkYXRlIGNob2ljZVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIG1lc3NhZ2UuY2hvaWNlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY2hvaWNlc1twYXJ0LmluZGV4XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaG9pY2VzW3BhcnQuaW5kZXhdID0gcGFydDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNob2ljZSA9IGNob2ljZXNbcGFydC5pbmRleF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZS50ZXh0ICs9IHBhcnQudGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hvaWNlLmZpbmlzaF9yZWFzb24gPSBwYXJ0LmZpbmlzaF9yZWFzb247XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNob2ljZS5sb2dwcm9icyA9IHBhcnQubG9ncHJvYnM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgcnVuTWFuYWdlcj8uaGFuZGxlTExNTmV3VG9rZW4ocGFydC50ZXh0LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb21wdDogTWF0aC5mbG9vcihwYXJ0LmluZGV4IC8gdGhpcy5uKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGlvbjogcGFydC5pbmRleCAlIHRoaXMubixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5zaWduYWw/LmFib3J0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFib3J0RXJyb3JcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4ucmVzcG9uc2UsIGNob2ljZXMgfTtcbiAgICAgICAgICAgICAgICB9KSgpXG4gICAgICAgICAgICAgICAgOiBhd2FpdCB0aGlzLmNvbXBsZXRpb25XaXRoUmV0cnkoe1xuICAgICAgICAgICAgICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHByb21wdDogc3ViUHJvbXB0c1tpXSxcbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIHNpZ25hbDogb3B0aW9ucy5zaWduYWwsXG4gICAgICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMub3B0aW9ucyxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNob2ljZXMucHVzaCguLi5kYXRhLmNob2ljZXMpO1xuICAgICAgICAgICAgY29uc3QgeyBjb21wbGV0aW9uX3Rva2VuczogY29tcGxldGlvblRva2VucywgcHJvbXB0X3Rva2VuczogcHJvbXB0VG9rZW5zLCB0b3RhbF90b2tlbnM6IHRvdGFsVG9rZW5zLCB9ID0gZGF0YS51c2FnZVxuICAgICAgICAgICAgICAgID8gZGF0YS51c2FnZVxuICAgICAgICAgICAgICAgIDoge1xuICAgICAgICAgICAgICAgICAgICBjb21wbGV0aW9uX3Rva2VuczogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICBwcm9tcHRfdG9rZW5zOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsX3Rva2VuczogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoY29tcGxldGlvblRva2Vucykge1xuICAgICAgICAgICAgICAgIHRva2VuVXNhZ2UuY29tcGxldGlvblRva2VucyA9XG4gICAgICAgICAgICAgICAgICAgICh0b2tlblVzYWdlLmNvbXBsZXRpb25Ub2tlbnMgPz8gMCkgKyBjb21wbGV0aW9uVG9rZW5zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByb21wdFRva2Vucykge1xuICAgICAgICAgICAgICAgIHRva2VuVXNhZ2UucHJvbXB0VG9rZW5zID0gKHRva2VuVXNhZ2UucHJvbXB0VG9rZW5zID8/IDApICsgcHJvbXB0VG9rZW5zO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRvdGFsVG9rZW5zKSB7XG4gICAgICAgICAgICAgICAgdG9rZW5Vc2FnZS50b3RhbFRva2VucyA9ICh0b2tlblVzYWdlLnRvdGFsVG9rZW5zID8/IDApICsgdG90YWxUb2tlbnM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZ2VuZXJhdGlvbnMgPSBjaHVua0FycmF5KGNob2ljZXMsIHRoaXMubikubWFwKChwcm9tcHRDaG9pY2VzKSA9PiBwcm9tcHRDaG9pY2VzLm1hcCgoY2hvaWNlKSA9PiAoe1xuICAgICAgICAgICAgdGV4dDogY2hvaWNlLnRleHQgPz8gXCJcIixcbiAgICAgICAgICAgIGdlbmVyYXRpb25JbmZvOiB7XG4gICAgICAgICAgICAgICAgZmluaXNoUmVhc29uOiBjaG9pY2UuZmluaXNoX3JlYXNvbixcbiAgICAgICAgICAgICAgICBsb2dwcm9iczogY2hvaWNlLmxvZ3Byb2JzLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSkpKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGdlbmVyYXRpb25zLFxuICAgICAgICAgICAgbGxtT3V0cHV0OiB7IHRva2VuVXNhZ2UgfSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLy8gVE9ETyhqYWNvYmxlZSk6IFJlZmFjdG9yIHdpdGggX2dlbmVyYXRlKC4uLiwge3N0cmVhbTogdHJ1ZX0pIGltcGxlbWVudGF0aW9uP1xuICAgIGFzeW5jICpfc3RyZWFtUmVzcG9uc2VDaHVua3MoaW5wdXQsIG9wdGlvbnMsIHJ1bk1hbmFnZXIpIHtcbiAgICAgICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgICAgICAgLi4udGhpcy5pbnZvY2F0aW9uUGFyYW1zKG9wdGlvbnMpLFxuICAgICAgICAgICAgcHJvbXB0OiBpbnB1dCxcbiAgICAgICAgICAgIHN0cmVhbTogdHJ1ZSxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgc3RyZWFtID0gYXdhaXQgdGhpcy5jb21wbGV0aW9uV2l0aFJldHJ5KHBhcmFtcywgb3B0aW9ucyk7XG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgZGF0YSBvZiBzdHJlYW0pIHtcbiAgICAgICAgICAgIGNvbnN0IGNob2ljZSA9IGRhdGE/LmNob2ljZXNbMF07XG4gICAgICAgICAgICBpZiAoIWNob2ljZSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY2h1bmsgPSBuZXcgR2VuZXJhdGlvbkNodW5rKHtcbiAgICAgICAgICAgICAgICB0ZXh0OiBjaG9pY2UudGV4dCxcbiAgICAgICAgICAgICAgICBnZW5lcmF0aW9uSW5mbzoge1xuICAgICAgICAgICAgICAgICAgICBmaW5pc2hSZWFzb246IGNob2ljZS5maW5pc2hfcmVhc29uLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHlpZWxkIGNodW5rO1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXZvaWRcbiAgICAgICAgICAgIHZvaWQgcnVuTWFuYWdlcj8uaGFuZGxlTExNTmV3VG9rZW4oY2h1bmsudGV4dCA/PyBcIlwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5zaWduYWw/LmFib3J0ZWQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFib3J0RXJyb3JcIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgY29tcGxldGlvbldpdGhSZXRyeShyZXF1ZXN0LCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RPcHRpb25zID0gdGhpcy5fZ2V0Q2xpZW50T3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbGVyLmNhbGwoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLmNsaWVudC5jb21wbGV0aW9ucy5jcmVhdGUocmVxdWVzdCwgcmVxdWVzdE9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yID0gd3JhcE9wZW5BSUNsaWVudEVycm9yKGUpO1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbHMgdGhlIE9wZW5BSSBBUEkgd2l0aCByZXRyeSBsb2dpYyBpbiBjYXNlIG9mIGZhaWx1cmVzLlxuICAgICAqIEBwYXJhbSByZXF1ZXN0IFRoZSByZXF1ZXN0IHRvIHNlbmQgdG8gdGhlIE9wZW5BSSBBUEkuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgT3B0aW9uYWwgY29uZmlndXJhdGlvbiBmb3IgdGhlIEFQSSBjYWxsLlxuICAgICAqIEByZXR1cm5zIFRoZSByZXNwb25zZSBmcm9tIHRoZSBPcGVuQUkgQVBJLlxuICAgICAqL1xuICAgIF9nZXRDbGllbnRPcHRpb25zKG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNsaWVudCkge1xuICAgICAgICAgICAgY29uc3Qgb3BlbkFJRW5kcG9pbnRDb25maWcgPSB7XG4gICAgICAgICAgICAgICAgYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZTogdGhpcy5henVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lLFxuICAgICAgICAgICAgICAgIGF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lOiB0aGlzLmF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lLFxuICAgICAgICAgICAgICAgIGF6dXJlT3BlbkFJQXBpS2V5OiB0aGlzLmF6dXJlT3BlbkFJQXBpS2V5LFxuICAgICAgICAgICAgICAgIGF6dXJlT3BlbkFJQmFzZVBhdGg6IHRoaXMuYXp1cmVPcGVuQUlCYXNlUGF0aCxcbiAgICAgICAgICAgICAgICBiYXNlVVJMOiB0aGlzLmNsaWVudENvbmZpZy5iYXNlVVJMLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGVuZHBvaW50ID0gZ2V0RW5kcG9pbnQob3BlbkFJRW5kcG9pbnRDb25maWcpO1xuICAgICAgICAgICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuY2xpZW50Q29uZmlnLFxuICAgICAgICAgICAgICAgIGJhc2VVUkw6IGVuZHBvaW50LFxuICAgICAgICAgICAgICAgIHRpbWVvdXQ6IHRoaXMudGltZW91dCxcbiAgICAgICAgICAgICAgICBtYXhSZXRyaWVzOiAwLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICghcGFyYW1zLmJhc2VVUkwpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgcGFyYW1zLmJhc2VVUkw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNsaWVudCA9IG5ldyBPcGVuQUlDbGllbnQocGFyYW1zKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXF1ZXN0T3B0aW9ucyA9IHtcbiAgICAgICAgICAgIC4uLnRoaXMuY2xpZW50Q29uZmlnLFxuICAgICAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMuYXp1cmVPcGVuQUlBcGlLZXkpIHtcbiAgICAgICAgICAgIHJlcXVlc3RPcHRpb25zLmhlYWRlcnMgPSB7XG4gICAgICAgICAgICAgICAgXCJhcGkta2V5XCI6IHRoaXMuYXp1cmVPcGVuQUlBcGlLZXksXG4gICAgICAgICAgICAgICAgLi4ucmVxdWVzdE9wdGlvbnMuaGVhZGVycyxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXF1ZXN0T3B0aW9ucy5xdWVyeSA9IHtcbiAgICAgICAgICAgICAgICBcImFwaS12ZXJzaW9uXCI6IHRoaXMuYXp1cmVPcGVuQUlBcGlWZXJzaW9uLFxuICAgICAgICAgICAgICAgIC4uLnJlcXVlc3RPcHRpb25zLnF1ZXJ5LFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVxdWVzdE9wdGlvbnM7XG4gICAgfVxuICAgIF9sbG1UeXBlKCkge1xuICAgICAgICByZXR1cm4gXCJvcGVuYWlcIjtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiT3BlbkFJIiwiT3BlbkFJQ2xpZW50IiwiY2FsY3VsYXRlTWF4VG9rZW5zIiwiR2VuZXJhdGlvbkNodW5rIiwiZ2V0RW52aXJvbm1lbnRWYXJpYWJsZSIsIkJhc2VMTE0iLCJjaHVua0FycmF5IiwiZ2V0RW5kcG9pbnQiLCJPcGVuQUlDaGF0Iiwid3JhcE9wZW5BSUNsaWVudEVycm9yIiwibGNfbmFtZSIsImNhbGxLZXlzIiwibGNfc2VjcmV0cyIsIm9wZW5BSUFwaUtleSIsImF6dXJlT3BlbkFJQXBpS2V5Iiwib3JnYW5pemF0aW9uIiwibGNfYWxpYXNlcyIsIm1vZGVsTmFtZSIsImF6dXJlT3BlbkFJQXBpVmVyc2lvbiIsImF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lIiwiYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZSIsImNvbnN0cnVjdG9yIiwiZmllbGRzIiwiY29uZmlndXJhdGlvbiIsInN0YXJ0c1dpdGgiLCJpbmNsdWRlcyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwidmFsdWUiLCJFcnJvciIsImF6dXJlT3BlbkFJQXBpQ29tcGxldGlvbnNEZXBsb3ltZW50TmFtZSIsImF6dXJlT3BlbkFJQmFzZVBhdGgiLCJtb2RlbEt3YXJncyIsImJhdGNoU2l6ZSIsInRpbWVvdXQiLCJ0ZW1wZXJhdHVyZSIsIm1heFRva2VucyIsInRvcFAiLCJmcmVxdWVuY3lQZW5hbHR5IiwicHJlc2VuY2VQZW5hbHR5IiwibiIsImJlc3RPZiIsImxvZ2l0QmlhcyIsInN0b3AiLCJ1c2VyIiwic3RyZWFtaW5nIiwiY2xpZW50Q29uZmlnIiwiYXBpS2V5IiwiYmFzZVVSTCIsImJhc2VQYXRoIiwiZGFuZ2Vyb3VzbHlBbGxvd0Jyb3dzZXIiLCJkZWZhdWx0SGVhZGVycyIsImJhc2VPcHRpb25zIiwiaGVhZGVycyIsImRlZmF1bHRRdWVyeSIsInBhcmFtcyIsImludm9jYXRpb25QYXJhbXMiLCJvcHRpb25zIiwibW9kZWwiLCJtYXhfdG9rZW5zIiwidG9wX3AiLCJmcmVxdWVuY3lfcGVuYWx0eSIsInByZXNlbmNlX3BlbmFsdHkiLCJiZXN0X29mIiwibG9naXRfYmlhcyIsInN0cmVhbSIsIl9pZGVudGlmeWluZ1BhcmFtcyIsIm1vZGVsX25hbWUiLCJpZGVudGlmeWluZ1BhcmFtcyIsIl9nZW5lcmF0ZSIsInByb21wdHMiLCJydW5NYW5hZ2VyIiwic3ViUHJvbXB0cyIsImNob2ljZXMiLCJ0b2tlblVzYWdlIiwibGVuZ3RoIiwicHJvbXB0IiwiaSIsImRhdGEiLCJyZXNwb25zZSIsImNvbXBsZXRpb25XaXRoUmV0cnkiLCJtZXNzYWdlIiwiaWQiLCJvYmplY3QiLCJjcmVhdGVkIiwicGFydCIsImluZGV4IiwiY2hvaWNlIiwidGV4dCIsImZpbmlzaF9yZWFzb24iLCJsb2dwcm9icyIsImhhbmRsZUxMTU5ld1Rva2VuIiwiTWF0aCIsImZsb29yIiwiY29tcGxldGlvbiIsInNpZ25hbCIsImFib3J0ZWQiLCJwdXNoIiwiY29tcGxldGlvbl90b2tlbnMiLCJjb21wbGV0aW9uVG9rZW5zIiwicHJvbXB0X3Rva2VucyIsInByb21wdFRva2VucyIsInRvdGFsX3Rva2VucyIsInRvdGFsVG9rZW5zIiwidXNhZ2UiLCJ1bmRlZmluZWQiLCJnZW5lcmF0aW9ucyIsIm1hcCIsInByb21wdENob2ljZXMiLCJnZW5lcmF0aW9uSW5mbyIsImZpbmlzaFJlYXNvbiIsImxsbU91dHB1dCIsIl9zdHJlYW1SZXNwb25zZUNodW5rcyIsImlucHV0IiwiY2h1bmsiLCJyZXF1ZXN0IiwicmVxdWVzdE9wdGlvbnMiLCJfZ2V0Q2xpZW50T3B0aW9ucyIsImNhbGxlciIsImNhbGwiLCJyZXMiLCJjbGllbnQiLCJjb21wbGV0aW9ucyIsImNyZWF0ZSIsImUiLCJlcnJvciIsIm9wZW5BSUVuZHBvaW50Q29uZmlnIiwiZW5kcG9pbnQiLCJtYXhSZXRyaWVzIiwicXVlcnkiLCJfbGxtVHlwZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/openai/dist/llms.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/openai/dist/types.js":
/*!******************************************************!*\
  !*** ./node_modules/@langchain/openai/dist/types.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvZGlzdC90eXBlcy5qcyIsIm1hcHBpbmdzIjoiO0FBQVUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1mb3JtLWJ1aWxkZXItdHV0b3JpYWwvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvZGlzdC90eXBlcy5qcz8yYTdhIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB7fTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/openai/dist/types.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/openai/dist/utils/azure.js":
/*!************************************************************!*\
  !*** ./node_modules/@langchain/openai/dist/utils/azure.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getEndpoint: () => (/* binding */ getEndpoint)\n/* harmony export */ });\n/**\n * This function generates an endpoint URL for (Azure) OpenAI\n * based on the configuration parameters provided.\n *\n * @param {OpenAIEndpointConfig} config - The configuration object for the (Azure) endpoint.\n *\n * @property {string} config.azureOpenAIApiDeploymentName - The deployment name of Azure OpenAI.\n * @property {string} config.azureOpenAIApiInstanceName - The instance name of Azure OpenAI.\n * @property {string} config.azureOpenAIApiKey - The API Key for Azure OpenAI.\n * @property {string} config.azureOpenAIBasePath - The base path for Azure OpenAI.\n * @property {string} config.baseURL - Some other custom base path URL.\n *\n * The function operates as follows:\n * - If both `azureOpenAIBasePath` and `azureOpenAIApiDeploymentName` (plus `azureOpenAIApiKey`) are provided, it returns an URL combining these two parameters (`${azureOpenAIBasePath}/${azureOpenAIApiDeploymentName}`).\n * - If `azureOpenAIApiKey` is provided, it checks for `azureOpenAIApiInstanceName` and `azureOpenAIApiDeploymentName` and throws an error if any of these is missing. If both are provided, it generates an URL incorporating these parameters.\n * - If none of the above conditions are met, return any custom `baseURL`.\n * - The function returns the generated URL as a string, or undefined if no custom paths are specified.\n *\n * @throws Will throw an error if the necessary parameters for generating the URL are missing.\n *\n * @returns {string | undefined} The generated (Azure) OpenAI endpoint URL.\n */ function getEndpoint(config) {\n    const { azureOpenAIApiDeploymentName, azureOpenAIApiInstanceName, azureOpenAIApiKey, azureOpenAIBasePath, baseURL } = config;\n    if (azureOpenAIApiKey && azureOpenAIBasePath && azureOpenAIApiDeploymentName) {\n        return `${azureOpenAIBasePath}/${azureOpenAIApiDeploymentName}`;\n    }\n    if (azureOpenAIApiKey) {\n        if (!azureOpenAIApiInstanceName) {\n            throw new Error(\"azureOpenAIApiInstanceName is required when using azureOpenAIApiKey\");\n        }\n        if (!azureOpenAIApiDeploymentName) {\n            throw new Error(\"azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey\");\n        }\n        return `https://${azureOpenAIApiInstanceName}.openai.azure.com/openai/deployments/${azureOpenAIApiDeploymentName}`;\n    }\n    return baseURL;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvZGlzdC91dGlscy9henVyZS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQXFCQyxHQUNNLFNBQVNBLFlBQVlDLE1BQU07SUFDOUIsTUFBTSxFQUFFQyw0QkFBNEIsRUFBRUMsMEJBQTBCLEVBQUVDLGlCQUFpQixFQUFFQyxtQkFBbUIsRUFBRUMsT0FBTyxFQUFHLEdBQUdMO0lBQ3ZILElBQUlHLHFCQUNBQyx1QkFDQUgsOEJBQThCO1FBQzlCLE9BQU8sQ0FBQyxFQUFFRyxvQkFBb0IsQ0FBQyxFQUFFSCw2QkFBNkIsQ0FBQztJQUNuRTtJQUNBLElBQUlFLG1CQUFtQjtRQUNuQixJQUFJLENBQUNELDRCQUE0QjtZQUM3QixNQUFNLElBQUlJLE1BQU07UUFDcEI7UUFDQSxJQUFJLENBQUNMLDhCQUE4QjtZQUMvQixNQUFNLElBQUlLLE1BQU07UUFDcEI7UUFDQSxPQUFPLENBQUMsUUFBUSxFQUFFSiwyQkFBMkIscUNBQXFDLEVBQUVELDZCQUE2QixDQUFDO0lBQ3RIO0lBQ0EsT0FBT0k7QUFDWCIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLWZvcm0tYnVpbGRlci10dXRvcmlhbC8uL25vZGVfbW9kdWxlcy9AbGFuZ2NoYWluL29wZW5haS9kaXN0L3V0aWxzL2F6dXJlLmpzP2Q4NzEiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIGdlbmVyYXRlcyBhbiBlbmRwb2ludCBVUkwgZm9yIChBenVyZSkgT3BlbkFJXG4gKiBiYXNlZCBvbiB0aGUgY29uZmlndXJhdGlvbiBwYXJhbWV0ZXJzIHByb3ZpZGVkLlxuICpcbiAqIEBwYXJhbSB7T3BlbkFJRW5kcG9pbnRDb25maWd9IGNvbmZpZyAtIFRoZSBjb25maWd1cmF0aW9uIG9iamVjdCBmb3IgdGhlIChBenVyZSkgZW5kcG9pbnQuXG4gKlxuICogQHByb3BlcnR5IHtzdHJpbmd9IGNvbmZpZy5henVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lIC0gVGhlIGRlcGxveW1lbnQgbmFtZSBvZiBBenVyZSBPcGVuQUkuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gY29uZmlnLmF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lIC0gVGhlIGluc3RhbmNlIG5hbWUgb2YgQXp1cmUgT3BlbkFJLlxuICogQHByb3BlcnR5IHtzdHJpbmd9IGNvbmZpZy5henVyZU9wZW5BSUFwaUtleSAtIFRoZSBBUEkgS2V5IGZvciBBenVyZSBPcGVuQUkuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gY29uZmlnLmF6dXJlT3BlbkFJQmFzZVBhdGggLSBUaGUgYmFzZSBwYXRoIGZvciBBenVyZSBPcGVuQUkuXG4gKiBAcHJvcGVydHkge3N0cmluZ30gY29uZmlnLmJhc2VVUkwgLSBTb21lIG90aGVyIGN1c3RvbSBiYXNlIHBhdGggVVJMLlxuICpcbiAqIFRoZSBmdW5jdGlvbiBvcGVyYXRlcyBhcyBmb2xsb3dzOlxuICogLSBJZiBib3RoIGBhenVyZU9wZW5BSUJhc2VQYXRoYCBhbmQgYGF6dXJlT3BlbkFJQXBpRGVwbG95bWVudE5hbWVgIChwbHVzIGBhenVyZU9wZW5BSUFwaUtleWApIGFyZSBwcm92aWRlZCwgaXQgcmV0dXJucyBhbiBVUkwgY29tYmluaW5nIHRoZXNlIHR3byBwYXJhbWV0ZXJzIChgJHthenVyZU9wZW5BSUJhc2VQYXRofS8ke2F6dXJlT3BlbkFJQXBpRGVwbG95bWVudE5hbWV9YCkuXG4gKiAtIElmIGBhenVyZU9wZW5BSUFwaUtleWAgaXMgcHJvdmlkZWQsIGl0IGNoZWNrcyBmb3IgYGF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lYCBhbmQgYGF6dXJlT3BlbkFJQXBpRGVwbG95bWVudE5hbWVgIGFuZCB0aHJvd3MgYW4gZXJyb3IgaWYgYW55IG9mIHRoZXNlIGlzIG1pc3NpbmcuIElmIGJvdGggYXJlIHByb3ZpZGVkLCBpdCBnZW5lcmF0ZXMgYW4gVVJMIGluY29ycG9yYXRpbmcgdGhlc2UgcGFyYW1ldGVycy5cbiAqIC0gSWYgbm9uZSBvZiB0aGUgYWJvdmUgY29uZGl0aW9ucyBhcmUgbWV0LCByZXR1cm4gYW55IGN1c3RvbSBgYmFzZVVSTGAuXG4gKiAtIFRoZSBmdW5jdGlvbiByZXR1cm5zIHRoZSBnZW5lcmF0ZWQgVVJMIGFzIGEgc3RyaW5nLCBvciB1bmRlZmluZWQgaWYgbm8gY3VzdG9tIHBhdGhzIGFyZSBzcGVjaWZpZWQuXG4gKlxuICogQHRocm93cyBXaWxsIHRocm93IGFuIGVycm9yIGlmIHRoZSBuZWNlc3NhcnkgcGFyYW1ldGVycyBmb3IgZ2VuZXJhdGluZyB0aGUgVVJMIGFyZSBtaXNzaW5nLlxuICpcbiAqIEByZXR1cm5zIHtzdHJpbmcgfCB1bmRlZmluZWR9IFRoZSBnZW5lcmF0ZWQgKEF6dXJlKSBPcGVuQUkgZW5kcG9pbnQgVVJMLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RW5kcG9pbnQoY29uZmlnKSB7XG4gICAgY29uc3QgeyBhenVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lLCBhenVyZU9wZW5BSUFwaUluc3RhbmNlTmFtZSwgYXp1cmVPcGVuQUlBcGlLZXksIGF6dXJlT3BlbkFJQmFzZVBhdGgsIGJhc2VVUkwsIH0gPSBjb25maWc7XG4gICAgaWYgKGF6dXJlT3BlbkFJQXBpS2V5ICYmXG4gICAgICAgIGF6dXJlT3BlbkFJQmFzZVBhdGggJiZcbiAgICAgICAgYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZSkge1xuICAgICAgICByZXR1cm4gYCR7YXp1cmVPcGVuQUlCYXNlUGF0aH0vJHthenVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lfWA7XG4gICAgfVxuICAgIGlmIChhenVyZU9wZW5BSUFwaUtleSkge1xuICAgICAgICBpZiAoIWF6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJhenVyZU9wZW5BSUFwaUluc3RhbmNlTmFtZSBpcyByZXF1aXJlZCB3aGVuIHVzaW5nIGF6dXJlT3BlbkFJQXBpS2V5XCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiYXp1cmVPcGVuQUlBcGlEZXBsb3ltZW50TmFtZSBpcyBhIHJlcXVpcmVkIHBhcmFtZXRlciB3aGVuIHVzaW5nIGF6dXJlT3BlbkFJQXBpS2V5XCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgaHR0cHM6Ly8ke2F6dXJlT3BlbkFJQXBpSW5zdGFuY2VOYW1lfS5vcGVuYWkuYXp1cmUuY29tL29wZW5haS9kZXBsb3ltZW50cy8ke2F6dXJlT3BlbkFJQXBpRGVwbG95bWVudE5hbWV9YDtcbiAgICB9XG4gICAgcmV0dXJuIGJhc2VVUkw7XG59XG4iXSwibmFtZXMiOlsiZ2V0RW5kcG9pbnQiLCJjb25maWciLCJhenVyZU9wZW5BSUFwaURlcGxveW1lbnROYW1lIiwiYXp1cmVPcGVuQUlBcGlJbnN0YW5jZU5hbWUiLCJhenVyZU9wZW5BSUFwaUtleSIsImF6dXJlT3BlbkFJQmFzZVBhdGgiLCJiYXNlVVJMIiwiRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/openai/dist/utils/azure.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/openai/dist/utils/openai-format-fndef.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@langchain/openai/dist/utils/openai-format-fndef.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   formatFunctionDefinitions: () => (/* binding */ formatFunctionDefinitions)\n/* harmony export */ });\nfunction isAnyOfProp(prop) {\n    return prop.anyOf !== undefined && Array.isArray(prop.anyOf);\n}\n// When OpenAI use functions in the prompt, they format them as TypeScript definitions rather than OpenAPI JSON schemas.\n// This function converts the JSON schemas into TypeScript definitions.\nfunction formatFunctionDefinitions(functions) {\n    const lines = [\n        \"namespace functions {\",\n        \"\"\n    ];\n    for (const f of functions){\n        if (f.description) {\n            lines.push(`// ${f.description}`);\n        }\n        if (Object.keys(f.parameters.properties ?? {}).length > 0) {\n            lines.push(`type ${f.name} = (_: {`);\n            lines.push(formatObjectProperties(f.parameters, 0));\n            lines.push(\"}) => any;\");\n        } else {\n            lines.push(`type ${f.name} = () => any;`);\n        }\n        lines.push(\"\");\n    }\n    lines.push(\"} // namespace functions\");\n    return lines.join(\"\\n\");\n}\n// Format just the properties of an object (not including the surrounding braces)\nfunction formatObjectProperties(obj, indent) {\n    const lines = [];\n    for (const [name, param] of Object.entries(obj.properties ?? {})){\n        if (param.description && indent < 2) {\n            lines.push(`// ${param.description}`);\n        }\n        if (obj.required?.includes(name)) {\n            lines.push(`${name}: ${formatType(param, indent)},`);\n        } else {\n            lines.push(`${name}?: ${formatType(param, indent)},`);\n        }\n    }\n    return lines.map((line)=>\" \".repeat(indent) + line).join(\"\\n\");\n}\n// Format a single property type\nfunction formatType(param, indent) {\n    if (isAnyOfProp(param)) {\n        return param.anyOf.map((v)=>formatType(v, indent)).join(\" | \");\n    }\n    switch(param.type){\n        case \"string\":\n            if (param.enum) {\n                return param.enum.map((v)=>`\"${v}\"`).join(\" | \");\n            }\n            return \"string\";\n        case \"number\":\n            if (param.enum) {\n                return param.enum.map((v)=>`${v}`).join(\" | \");\n            }\n            return \"number\";\n        case \"integer\":\n            if (param.enum) {\n                return param.enum.map((v)=>`${v}`).join(\" | \");\n            }\n            return \"number\";\n        case \"boolean\":\n            return \"boolean\";\n        case \"null\":\n            return \"null\";\n        case \"object\":\n            return [\n                \"{\",\n                formatObjectProperties(param, indent + 2),\n                \"}\"\n            ].join(\"\\n\");\n        case \"array\":\n            if (param.items) {\n                return `${formatType(param.items, indent)}[]`;\n            }\n            return \"any[]\";\n        default:\n            return \"\";\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvZGlzdC91dGlscy9vcGVuYWktZm9ybWF0LWZuZGVmLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxTQUFTQSxZQUFZQyxJQUFJO0lBQ3JCLE9BQVFBLEtBQUtDLEtBQUssS0FBS0MsYUFDbkJDLE1BQU1DLE9BQU8sQ0FBQ0osS0FBS0MsS0FBSztBQUNoQztBQUNBLHdIQUF3SDtBQUN4SCx1RUFBdUU7QUFDaEUsU0FBU0ksMEJBQTBCQyxTQUFTO0lBQy9DLE1BQU1DLFFBQVE7UUFBQztRQUF5QjtLQUFHO0lBQzNDLEtBQUssTUFBTUMsS0FBS0YsVUFBVztRQUN2QixJQUFJRSxFQUFFQyxXQUFXLEVBQUU7WUFDZkYsTUFBTUcsSUFBSSxDQUFDLENBQUMsR0FBRyxFQUFFRixFQUFFQyxXQUFXLENBQUMsQ0FBQztRQUNwQztRQUNBLElBQUlFLE9BQU9DLElBQUksQ0FBQ0osRUFBRUssVUFBVSxDQUFDQyxVQUFVLElBQUksQ0FBQyxHQUFHQyxNQUFNLEdBQUcsR0FBRztZQUN2RFIsTUFBTUcsSUFBSSxDQUFDLENBQUMsS0FBSyxFQUFFRixFQUFFUSxJQUFJLENBQUMsUUFBUSxDQUFDO1lBQ25DVCxNQUFNRyxJQUFJLENBQUNPLHVCQUF1QlQsRUFBRUssVUFBVSxFQUFFO1lBQ2hETixNQUFNRyxJQUFJLENBQUM7UUFDZixPQUNLO1lBQ0RILE1BQU1HLElBQUksQ0FBQyxDQUFDLEtBQUssRUFBRUYsRUFBRVEsSUFBSSxDQUFDLGFBQWEsQ0FBQztRQUM1QztRQUNBVCxNQUFNRyxJQUFJLENBQUM7SUFDZjtJQUNBSCxNQUFNRyxJQUFJLENBQUM7SUFDWCxPQUFPSCxNQUFNVyxJQUFJLENBQUM7QUFDdEI7QUFDQSxpRkFBaUY7QUFDakYsU0FBU0QsdUJBQXVCRSxHQUFHLEVBQUVDLE1BQU07SUFDdkMsTUFBTWIsUUFBUSxFQUFFO0lBQ2hCLEtBQUssTUFBTSxDQUFDUyxNQUFNSyxNQUFNLElBQUlWLE9BQU9XLE9BQU8sQ0FBQ0gsSUFBSUwsVUFBVSxJQUFJLENBQUMsR0FBSTtRQUM5RCxJQUFJTyxNQUFNWixXQUFXLElBQUlXLFNBQVMsR0FBRztZQUNqQ2IsTUFBTUcsSUFBSSxDQUFDLENBQUMsR0FBRyxFQUFFVyxNQUFNWixXQUFXLENBQUMsQ0FBQztRQUN4QztRQUNBLElBQUlVLElBQUlJLFFBQVEsRUFBRUMsU0FBU1IsT0FBTztZQUM5QlQsTUFBTUcsSUFBSSxDQUFDLENBQUMsRUFBRU0sS0FBSyxFQUFFLEVBQUVTLFdBQVdKLE9BQU9ELFFBQVEsQ0FBQyxDQUFDO1FBQ3ZELE9BQ0s7WUFDRGIsTUFBTUcsSUFBSSxDQUFDLENBQUMsRUFBRU0sS0FBSyxHQUFHLEVBQUVTLFdBQVdKLE9BQU9ELFFBQVEsQ0FBQyxDQUFDO1FBQ3hEO0lBQ0o7SUFDQSxPQUFPYixNQUFNbUIsR0FBRyxDQUFDLENBQUNDLE9BQVMsSUFBSUMsTUFBTSxDQUFDUixVQUFVTyxNQUFNVCxJQUFJLENBQUM7QUFDL0Q7QUFDQSxnQ0FBZ0M7QUFDaEMsU0FBU08sV0FBV0osS0FBSyxFQUFFRCxNQUFNO0lBQzdCLElBQUlyQixZQUFZc0IsUUFBUTtRQUNwQixPQUFPQSxNQUFNcEIsS0FBSyxDQUFDeUIsR0FBRyxDQUFDLENBQUNHLElBQU1KLFdBQVdJLEdBQUdULFNBQVNGLElBQUksQ0FBQztJQUM5RDtJQUNBLE9BQVFHLE1BQU1TLElBQUk7UUFDZCxLQUFLO1lBQ0QsSUFBSVQsTUFBTVUsSUFBSSxFQUFFO2dCQUNaLE9BQU9WLE1BQU1VLElBQUksQ0FBQ0wsR0FBRyxDQUFDLENBQUNHLElBQU0sQ0FBQyxDQUFDLEVBQUVBLEVBQUUsQ0FBQyxDQUFDLEVBQUVYLElBQUksQ0FBQztZQUNoRDtZQUNBLE9BQU87UUFDWCxLQUFLO1lBQ0QsSUFBSUcsTUFBTVUsSUFBSSxFQUFFO2dCQUNaLE9BQU9WLE1BQU1VLElBQUksQ0FBQ0wsR0FBRyxDQUFDLENBQUNHLElBQU0sQ0FBQyxFQUFFQSxFQUFFLENBQUMsRUFBRVgsSUFBSSxDQUFDO1lBQzlDO1lBQ0EsT0FBTztRQUNYLEtBQUs7WUFDRCxJQUFJRyxNQUFNVSxJQUFJLEVBQUU7Z0JBQ1osT0FBT1YsTUFBTVUsSUFBSSxDQUFDTCxHQUFHLENBQUMsQ0FBQ0csSUFBTSxDQUFDLEVBQUVBLEVBQUUsQ0FBQyxFQUFFWCxJQUFJLENBQUM7WUFDOUM7WUFDQSxPQUFPO1FBQ1gsS0FBSztZQUNELE9BQU87UUFDWCxLQUFLO1lBQ0QsT0FBTztRQUNYLEtBQUs7WUFDRCxPQUFPO2dCQUFDO2dCQUFLRCx1QkFBdUJJLE9BQU9ELFNBQVM7Z0JBQUk7YUFBSSxDQUFDRixJQUFJLENBQUM7UUFDdEUsS0FBSztZQUNELElBQUlHLE1BQU1XLEtBQUssRUFBRTtnQkFDYixPQUFPLENBQUMsRUFBRVAsV0FBV0osTUFBTVcsS0FBSyxFQUFFWixRQUFRLEVBQUUsQ0FBQztZQUNqRDtZQUNBLE9BQU87UUFDWDtZQUNJLE9BQU87SUFDZjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vb3BlbmFpL2Rpc3QvdXRpbHMvb3BlbmFpLWZvcm1hdC1mbmRlZi5qcz84YjI5Il0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGlzQW55T2ZQcm9wKHByb3ApIHtcbiAgICByZXR1cm4gKHByb3AuYW55T2YgIT09IHVuZGVmaW5lZCAmJlxuICAgICAgICBBcnJheS5pc0FycmF5KHByb3AuYW55T2YpKTtcbn1cbi8vIFdoZW4gT3BlbkFJIHVzZSBmdW5jdGlvbnMgaW4gdGhlIHByb21wdCwgdGhleSBmb3JtYXQgdGhlbSBhcyBUeXBlU2NyaXB0IGRlZmluaXRpb25zIHJhdGhlciB0aGFuIE9wZW5BUEkgSlNPTiBzY2hlbWFzLlxuLy8gVGhpcyBmdW5jdGlvbiBjb252ZXJ0cyB0aGUgSlNPTiBzY2hlbWFzIGludG8gVHlwZVNjcmlwdCBkZWZpbml0aW9ucy5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRGdW5jdGlvbkRlZmluaXRpb25zKGZ1bmN0aW9ucykge1xuICAgIGNvbnN0IGxpbmVzID0gW1wibmFtZXNwYWNlIGZ1bmN0aW9ucyB7XCIsIFwiXCJdO1xuICAgIGZvciAoY29uc3QgZiBvZiBmdW5jdGlvbnMpIHtcbiAgICAgICAgaWYgKGYuZGVzY3JpcHRpb24pIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYC8vICR7Zi5kZXNjcmlwdGlvbn1gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoT2JqZWN0LmtleXMoZi5wYXJhbWV0ZXJzLnByb3BlcnRpZXMgPz8ge30pLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYHR5cGUgJHtmLm5hbWV9ID0gKF86IHtgKTtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goZm9ybWF0T2JqZWN0UHJvcGVydGllcyhmLnBhcmFtZXRlcnMsIDApKTtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goXCJ9KSA9PiBhbnk7XCIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGluZXMucHVzaChgdHlwZSAke2YubmFtZX0gPSAoKSA9PiBhbnk7YCk7XG4gICAgICAgIH1cbiAgICAgICAgbGluZXMucHVzaChcIlwiKTtcbiAgICB9XG4gICAgbGluZXMucHVzaChcIn0gLy8gbmFtZXNwYWNlIGZ1bmN0aW9uc1wiKTtcbiAgICByZXR1cm4gbGluZXMuam9pbihcIlxcblwiKTtcbn1cbi8vIEZvcm1hdCBqdXN0IHRoZSBwcm9wZXJ0aWVzIG9mIGFuIG9iamVjdCAobm90IGluY2x1ZGluZyB0aGUgc3Vycm91bmRpbmcgYnJhY2VzKVxuZnVuY3Rpb24gZm9ybWF0T2JqZWN0UHJvcGVydGllcyhvYmosIGluZGVudCkge1xuICAgIGNvbnN0IGxpbmVzID0gW107XG4gICAgZm9yIChjb25zdCBbbmFtZSwgcGFyYW1dIG9mIE9iamVjdC5lbnRyaWVzKG9iai5wcm9wZXJ0aWVzID8/IHt9KSkge1xuICAgICAgICBpZiAocGFyYW0uZGVzY3JpcHRpb24gJiYgaW5kZW50IDwgMikge1xuICAgICAgICAgICAgbGluZXMucHVzaChgLy8gJHtwYXJhbS5kZXNjcmlwdGlvbn1gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob2JqLnJlcXVpcmVkPy5pbmNsdWRlcyhuYW1lKSkge1xuICAgICAgICAgICAgbGluZXMucHVzaChgJHtuYW1lfTogJHtmb3JtYXRUeXBlKHBhcmFtLCBpbmRlbnQpfSxgKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxpbmVzLnB1c2goYCR7bmFtZX0/OiAke2Zvcm1hdFR5cGUocGFyYW0sIGluZGVudCl9LGApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsaW5lcy5tYXAoKGxpbmUpID0+IFwiIFwiLnJlcGVhdChpbmRlbnQpICsgbGluZSkuam9pbihcIlxcblwiKTtcbn1cbi8vIEZvcm1hdCBhIHNpbmdsZSBwcm9wZXJ0eSB0eXBlXG5mdW5jdGlvbiBmb3JtYXRUeXBlKHBhcmFtLCBpbmRlbnQpIHtcbiAgICBpZiAoaXNBbnlPZlByb3AocGFyYW0pKSB7XG4gICAgICAgIHJldHVybiBwYXJhbS5hbnlPZi5tYXAoKHYpID0+IGZvcm1hdFR5cGUodiwgaW5kZW50KSkuam9pbihcIiB8IFwiKTtcbiAgICB9XG4gICAgc3dpdGNoIChwYXJhbS50eXBlKSB7XG4gICAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgICAgICAgIGlmIChwYXJhbS5lbnVtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtLmVudW0ubWFwKCh2KSA9PiBgXCIke3Z9XCJgKS5qb2luKFwiIHwgXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFwic3RyaW5nXCI7XG4gICAgICAgIGNhc2UgXCJudW1iZXJcIjpcbiAgICAgICAgICAgIGlmIChwYXJhbS5lbnVtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtLmVudW0ubWFwKCh2KSA9PiBgJHt2fWApLmpvaW4oXCIgfCBcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gXCJudW1iZXJcIjtcbiAgICAgICAgY2FzZSBcImludGVnZXJcIjpcbiAgICAgICAgICAgIGlmIChwYXJhbS5lbnVtKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtLmVudW0ubWFwKCh2KSA9PiBgJHt2fWApLmpvaW4oXCIgfCBcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gXCJudW1iZXJcIjtcbiAgICAgICAgY2FzZSBcImJvb2xlYW5cIjpcbiAgICAgICAgICAgIHJldHVybiBcImJvb2xlYW5cIjtcbiAgICAgICAgY2FzZSBcIm51bGxcIjpcbiAgICAgICAgICAgIHJldHVybiBcIm51bGxcIjtcbiAgICAgICAgY2FzZSBcIm9iamVjdFwiOlxuICAgICAgICAgICAgcmV0dXJuIFtcIntcIiwgZm9ybWF0T2JqZWN0UHJvcGVydGllcyhwYXJhbSwgaW5kZW50ICsgMiksIFwifVwiXS5qb2luKFwiXFxuXCIpO1xuICAgICAgICBjYXNlIFwiYXJyYXlcIjpcbiAgICAgICAgICAgIGlmIChwYXJhbS5pdGVtcykge1xuICAgICAgICAgICAgICAgIHJldHVybiBgJHtmb3JtYXRUeXBlKHBhcmFtLml0ZW1zLCBpbmRlbnQpfVtdYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBcImFueVtdXCI7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiaXNBbnlPZlByb3AiLCJwcm9wIiwiYW55T2YiLCJ1bmRlZmluZWQiLCJBcnJheSIsImlzQXJyYXkiLCJmb3JtYXRGdW5jdGlvbkRlZmluaXRpb25zIiwiZnVuY3Rpb25zIiwibGluZXMiLCJmIiwiZGVzY3JpcHRpb24iLCJwdXNoIiwiT2JqZWN0Iiwia2V5cyIsInBhcmFtZXRlcnMiLCJwcm9wZXJ0aWVzIiwibGVuZ3RoIiwibmFtZSIsImZvcm1hdE9iamVjdFByb3BlcnRpZXMiLCJqb2luIiwib2JqIiwiaW5kZW50IiwicGFyYW0iLCJlbnRyaWVzIiwicmVxdWlyZWQiLCJpbmNsdWRlcyIsImZvcm1hdFR5cGUiLCJtYXAiLCJsaW5lIiwicmVwZWF0IiwidiIsInR5cGUiLCJlbnVtIiwiaXRlbXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/openai/dist/utils/openai-format-fndef.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/openai/dist/utils/openai.js":
/*!*************************************************************!*\
  !*** ./node_modules/@langchain/openai/dist/utils/openai.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   formatToOpenAIAssistantTool: () => (/* binding */ formatToOpenAIAssistantTool),\n/* harmony export */   formatToOpenAIFunction: () => (/* reexport safe */ _langchain_core_utils_function_calling__WEBPACK_IMPORTED_MODULE_1__.convertToOpenAIFunction),\n/* harmony export */   formatToOpenAITool: () => (/* reexport safe */ _langchain_core_utils_function_calling__WEBPACK_IMPORTED_MODULE_1__.convertToOpenAITool),\n/* harmony export */   wrapOpenAIClientError: () => (/* binding */ wrapOpenAIClientError)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var zod_to_json_schema__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod-to-json-schema */ \"(rsc)/./node_modules/zod-to-json-schema/dist/esm/index.js\");\n/* harmony import */ var _langchain_core_utils_function_calling__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @langchain/core/utils/function_calling */ \"(rsc)/./node_modules/@langchain/core/utils/function_calling.js\");\n\n\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction wrapOpenAIClientError(e) {\n    let error;\n    if (e.constructor.name === openai__WEBPACK_IMPORTED_MODULE_2__.APIConnectionTimeoutError.name) {\n        error = new Error(e.message);\n        error.name = \"TimeoutError\";\n    } else if (e.constructor.name === openai__WEBPACK_IMPORTED_MODULE_2__.APIUserAbortError.name) {\n        error = new Error(e.message);\n        error.name = \"AbortError\";\n    } else {\n        error = e;\n    }\n    return error;\n}\n\nfunction formatToOpenAIAssistantTool(tool) {\n    return {\n        type: \"function\",\n        function: {\n            name: tool.name,\n            description: tool.description,\n            parameters: (0,zod_to_json_schema__WEBPACK_IMPORTED_MODULE_0__.zodToJsonSchema)(tool.schema)\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvZGlzdC91dGlscy9vcGVuYWkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUF1RTtBQUNsQjtBQUNrRDtBQUN2Ryw4REFBOEQ7QUFDdkQsU0FBU0ssc0JBQXNCQyxDQUFDO0lBQ25DLElBQUlDO0lBQ0osSUFBSUQsRUFBRUUsV0FBVyxDQUFDQyxJQUFJLEtBQUtULDZEQUF5QkEsQ0FBQ1MsSUFBSSxFQUFFO1FBQ3ZERixRQUFRLElBQUlHLE1BQU1KLEVBQUVLLE9BQU87UUFDM0JKLE1BQU1FLElBQUksR0FBRztJQUNqQixPQUNLLElBQUlILEVBQUVFLFdBQVcsQ0FBQ0MsSUFBSSxLQUFLUixxREFBaUJBLENBQUNRLElBQUksRUFBRTtRQUNwREYsUUFBUSxJQUFJRyxNQUFNSixFQUFFSyxPQUFPO1FBQzNCSixNQUFNRSxJQUFJLEdBQUc7SUFDakIsT0FDSztRQUNERixRQUFRRDtJQUNaO0lBQ0EsT0FBT0M7QUFDWDtBQUN5RztBQUNsRyxTQUFTTyw0QkFBNEJDLElBQUk7SUFDNUMsT0FBTztRQUNIQyxNQUFNO1FBQ05DLFVBQVU7WUFDTlIsTUFBTU0sS0FBS04sSUFBSTtZQUNmUyxhQUFhSCxLQUFLRyxXQUFXO1lBQzdCQyxZQUFZakIsbUVBQWVBLENBQUNhLEtBQUtLLE1BQU07UUFDM0M7SUFDSjtBQUNKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vb3BlbmFpL2Rpc3QvdXRpbHMvb3BlbmFpLmpzPzkzM2YiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQVBJQ29ubmVjdGlvblRpbWVvdXRFcnJvciwgQVBJVXNlckFib3J0RXJyb3IsIH0gZnJvbSBcIm9wZW5haVwiO1xuaW1wb3J0IHsgem9kVG9Kc29uU2NoZW1hIH0gZnJvbSBcInpvZC10by1qc29uLXNjaGVtYVwiO1xuaW1wb3J0IHsgY29udmVydFRvT3BlbkFJRnVuY3Rpb24sIGNvbnZlcnRUb09wZW5BSVRvb2wsIH0gZnJvbSBcIkBsYW5nY2hhaW4vY29yZS91dGlscy9mdW5jdGlvbl9jYWxsaW5nXCI7XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZXhwb3J0IGZ1bmN0aW9uIHdyYXBPcGVuQUlDbGllbnRFcnJvcihlKSB7XG4gICAgbGV0IGVycm9yO1xuICAgIGlmIChlLmNvbnN0cnVjdG9yLm5hbWUgPT09IEFQSUNvbm5lY3Rpb25UaW1lb3V0RXJyb3IubmFtZSkge1xuICAgICAgICBlcnJvciA9IG5ldyBFcnJvcihlLm1lc3NhZ2UpO1xuICAgICAgICBlcnJvci5uYW1lID0gXCJUaW1lb3V0RXJyb3JcIjtcbiAgICB9XG4gICAgZWxzZSBpZiAoZS5jb25zdHJ1Y3Rvci5uYW1lID09PSBBUElVc2VyQWJvcnRFcnJvci5uYW1lKSB7XG4gICAgICAgIGVycm9yID0gbmV3IEVycm9yKGUubWVzc2FnZSk7XG4gICAgICAgIGVycm9yLm5hbWUgPSBcIkFib3J0RXJyb3JcIjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGVycm9yID0gZTtcbiAgICB9XG4gICAgcmV0dXJuIGVycm9yO1xufVxuZXhwb3J0IHsgY29udmVydFRvT3BlbkFJRnVuY3Rpb24gYXMgZm9ybWF0VG9PcGVuQUlGdW5jdGlvbiwgY29udmVydFRvT3BlbkFJVG9vbCBhcyBmb3JtYXRUb09wZW5BSVRvb2wsIH07XG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0VG9PcGVuQUlBc3Npc3RhbnRUb29sKHRvb2wpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBcImZ1bmN0aW9uXCIsXG4gICAgICAgIGZ1bmN0aW9uOiB7XG4gICAgICAgICAgICBuYW1lOiB0b29sLm5hbWUsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogdG9vbC5kZXNjcmlwdGlvbixcbiAgICAgICAgICAgIHBhcmFtZXRlcnM6IHpvZFRvSnNvblNjaGVtYSh0b29sLnNjaGVtYSksXG4gICAgICAgIH0sXG4gICAgfTtcbn1cbiJdLCJuYW1lcyI6WyJBUElDb25uZWN0aW9uVGltZW91dEVycm9yIiwiQVBJVXNlckFib3J0RXJyb3IiLCJ6b2RUb0pzb25TY2hlbWEiLCJjb252ZXJ0VG9PcGVuQUlGdW5jdGlvbiIsImNvbnZlcnRUb09wZW5BSVRvb2wiLCJ3cmFwT3BlbkFJQ2xpZW50RXJyb3IiLCJlIiwiZXJyb3IiLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJFcnJvciIsIm1lc3NhZ2UiLCJmb3JtYXRUb09wZW5BSUZ1bmN0aW9uIiwiZm9ybWF0VG9PcGVuQUlUb29sIiwiZm9ybWF0VG9PcGVuQUlBc3Npc3RhbnRUb29sIiwidG9vbCIsInR5cGUiLCJmdW5jdGlvbiIsImRlc2NyaXB0aW9uIiwicGFyYW1ldGVycyIsInNjaGVtYSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/openai/dist/utils/openai.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/@langchain/openai/index.js":
/*!*************************************************!*\
  !*** ./node_modules/@langchain/openai/index.js ***!
  \*************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AzureChatOpenAI: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.AzureChatOpenAI),\n/* harmony export */   AzureOpenAI: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.AzureOpenAI),\n/* harmony export */   ChatOpenAI: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.ChatOpenAI),\n/* harmony export */   OpenAI: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.OpenAI),\n/* harmony export */   OpenAIChat: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.OpenAIChat),\n/* harmony export */   OpenAIClient: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.OpenAIClient),\n/* harmony export */   OpenAIEmbeddings: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.OpenAIEmbeddings),\n/* harmony export */   formatToOpenAIAssistantTool: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.formatToOpenAIAssistantTool),\n/* harmony export */   formatToOpenAIFunction: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.formatToOpenAIFunction),\n/* harmony export */   formatToOpenAITool: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.formatToOpenAITool),\n/* harmony export */   getEndpoint: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.getEndpoint),\n/* harmony export */   messageToOpenAIRole: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.messageToOpenAIRole),\n/* harmony export */   toFile: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.toFile),\n/* harmony export */   wrapOpenAIClientError: () => (/* reexport safe */ _dist_index_js__WEBPACK_IMPORTED_MODULE_0__.wrapOpenAIClientError)\n/* harmony export */ });\n/* harmony import */ var _dist_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./dist/index.js */ \"(rsc)/./node_modules/@langchain/openai/dist/index.js\");\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGxhbmdjaGFpbi9vcGVuYWkvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQStCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktZm9ybS1idWlsZGVyLXR1dG9yaWFsLy4vbm9kZV9tb2R1bGVzL0BsYW5nY2hhaW4vb3BlbmFpL2luZGV4LmpzP2I5MDYiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi9kaXN0L2luZGV4LmpzJyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@langchain/openai/index.js\n");

/***/ })

};
;